/*! For license information please see cozy.88cd9285.js.LICENSE.txt */
(self.webpackChunktwakemail=self.webpackChunktwakemail||[]).push([["465"],{98049:function(){},59507:function(){},78893:function(){},4978:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppItem=void 0;var o=a(r(95297)),i=a(r(90402)),u=n(r(67294)),c=a(r(27361)),s=a(r(71871)),l=r(16396),d=a(r(4733)),f=a(r(79475)),p=a(r(67597)),h=r(5171),y=a(r(8620)),v=(0,c.default)(l.models,"applications.getAppDisplayName",function(e){return e.namePrefix&&"cozy"!==e.namePrefix.toLowerCase()?"".concat(e.namePrefix," ").concat(e.name):e.name}),m=function(e){var t=e.onAppSwitch,r=e.useHomeIcon,n=e.app,a=e.isInvertedTheme,c=(0,u.useState)(),s=(0,i.default)(c,2),l=s[0],h=s[1];(0,u.useEffect)(function(){return function(){l&&clearTimeout(l)}},[l]);var m=n.slug?"icon-".concat(n.slug):"",g=v(n);return u.default.createElement(f.default,{onAppSwitch:function(){"function"==typeof t&&h(setTimeout(function(){t()},1e3))},href:n.href||"",app:n},function(e){var t=e.onClick,i=e.href;return u.default.createElement("li",{className:"coz-nav-apps-item".concat(n.isCurrentApp?" coz-nav-apps-item--current":"")},u.default.createElement("a",{role:"menuitem",href:i,"data-icon":m,title:g,onClick:t},r?u.default.createElement(p.default,{className:"coz-nav-apps-item-icon",isInvertedTheme:a}):u.default.createElement(d.default,(0,o.default)({app:n,className:"coz-nav-apps-item-icon",key:n.slug},y.default.get.iconProps())),u.default.createElement("p",{className:"coz-label"},g)))})};t.AppItem=m,m.propTypes={app:h.appShape.isRequired,useHomeIcon:s.default.bool,isInvertedTheme:s.default.bool,onAppSwitch:s.default.func},t.default=m},85976:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppItemPlaceholder=void 0;var a=n(r(67294)),o=function(){return a.default.createElement("li",{className:"coz-nav-apps-item"},a.default.createElement("span",{role:"menuitem",disabled:!0},a.default.createElement("div",{className:"coz-nav-apps-item-icon coz-loading-placeholder"}),a.default.createElement("p",{className:"coz-label coz-loading-placeholder"})))};t.AppItemPlaceholder=o,t.default=o},93001:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(67294)),o=r(27084),i=n(r(71871)),u=n(r(70923)),c=n(r(32419)),s=n(r(3745)),l=r(48263),d=r(54910),f=n(r(66470)),p=function(e){var t=e.homeApp,r=e.handleClick,n=e.appName,o=e.appNamePrefix,i=e.appSlug,d=e.iconPath,p=e.isInvertedTheme,h=e.isFetchingApps,y=e.isPublic,v=e.opened,m=(0,f.default)().t,g=t&&t.isCurrentApp;if(!y&&h)return a.default.createElement("div",{className:"coz-nav-apps-btns coz-nav-apps-btns--loading"},a.default.createElement("div",{className:"coz-nav-apps-btns-home coz-loading-placeholder"}),a.default.createElement("div",{className:"coz-nav-apps-btns-main coz-loading-placeholder"}));var b=!g&&o?[m("".concat(i,".name_prefix"),{_:o}),m("".concat(i,".name"),{_:n})].join(" "):m("".concat(i,".name"),{_:n}),w=!y&&t&&t.href;return a.default.createElement("div",{className:"coz-nav-apps-btns".concat(g?" coz-nav-apps-btns--currentHome":"")},a.default.createElement(l.ButtonCozyHome,{homeHref:w,isInvertedTheme:p}),!g&&a.default.createElement("span",{className:"coz-nav-apps-btns-sep"}),a.default.createElement("button",{type:"button",onClick:y?null:r,className:"coz-nav-apps-btns-main","aria-controls":"coz-nav-pop--apps","data-tutorial":"apps",disabled:y},!g&&a.default.createElement("img",{className:"coz-bar-hide-sm",src:d,width:"28",alt:""}),a.default.createElement("span",{className:"coz-nav-app-name"},b),!y&&a.default.createElement(c.default,{icon:v?s.default:u.default,color:"var(--secondaryTextColor)",size:"12"})))};p.propTypes={homeApp:i.default.shape({isCurrentApp:i.default.bool,slug:i.default.string,href:i.default.string}),handleClick:i.default.func,appName:i.default.string,appNamePrefix:i.default.string,appSlug:i.default.string,iconPath:i.default.string,isInvertedTheme:i.default.bool,isFetchingApps:i.default.bool,isPublic:i.default.bool,opened:i.default.bool};var h=(0,o.connect)(function(e){return{homeApp:(0,d.getHomeApp)(e),isFetchingApps:(0,d.isFetchingApps)(e)}},function(){return{}})(p);t.default=h},24904:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppsContent=void 0;var a=n(r(67294)),o=r(27084),i=n(r(71871)),u=n(r(32419)),c=n(r(72336)),s=n(r(72339)),l=r(54910),d=n(r(4978)),f=n(r(85976)),p=n(r(66470)),h=function(e){var t=e.apps,r=e.homeApp,n=e.isFetchingApps,o=e.onAppSwitch,i=e.isInvertedTheme,l=(0,p.default)().t,h=(0,s.default)().isMobile,v=y(l),m=r&&r.isCurrentApp,g=r&&r.slug;return n||t&&t.length?a.default.createElement("div",{className:"coz-nav-pop-content"},a.default.createElement("ul",{className:"coz-nav-group"},h&&r&&a.default.createElement(d.default,{app:r,useHomeIcon:!0,onAppSwitch:o,isInvertedTheme:i}),n?[,,,].fill({}).map(function(e,t){return a.default.createElement(f.default,{key:t})}):t.filter(function(e){return e.slug!==g}).sort(function(e,t){return v(e)>v(t)}).map(function(e,t){return a.default.createElement(d.default,{app:e,key:t,onAppSwitch:o,isInvertedTheme:i})})),r&&!h&&!m&&a.default.createElement("a",{role:"menuitem",href:r.href,className:"coz-apps-home-btn"},a.default.createElement(u.default,{icon:c.default}),l("menu.home"))):a.default.createElement("p",{className:"coz-nav--error coz-nav-group"},l("no_apps"))};t.AppsContent=h,h.propTypes={homeApp:i.default.shape({isCurrentApp:i.default.bool,slug:i.default.string,href:i.default.string}),apps:i.default.array,isFetchingApps:i.default.bool.isRequired,onAppSwitch:i.default.func,isInvertedTheme:i.default.bool};var y=function(e){return function(t){var r=t.namePrefix?e("".concat(t.slug,".namePrefix"),{_:t.namePrefix}):null,n=e("".concat(t.slug,".name"),{_:t.name});return r?"".concat(r," ").concat(n):"".concat(n)}},v=(0,o.connect)(function(e){return{apps:(0,l.getApps)(e),homeApp:(0,l.getHomeApp)(e),isFetchingApps:(0,l.isFetchingApps)(e)}})(h);t.default=v},48263:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonCozyHome=void 0;var a=n(r(67294)),o=n(r(71871)),i=n(r(71400)),u=r(25976),c=r(22960),s=n(r(67597)),l=function(e){var t=e.homeHref,r=e.isInvertedTheme,n=(0,c.useWebviewIntent)();return(0,u.isFlagshipApp)()||(0,i.default)("flagship.debug")?a.default.createElement("a",{onClick:function(){n.call("backToHome")},className:"coz-nav-apps-btns-home coz-nav-apps-btns-home--is-flagship","data-testid":"buttonCozyHome"},a.default.createElement(s.default,{className:"coz-nav-apps-btns-home-svg",isInvertedTheme:r})):t?a.default.createElement("a",{href:t,className:"coz-nav-apps-btns-home"},a.default.createElement(s.default,{className:"coz-nav-apps-btns-home-svg",isInvertedTheme:r})):a.default.createElement("span",{className:"coz-nav-apps-btns-home"},a.default.createElement(s.default,{className:"coz-nav-apps-btns-home-svg",isInvertedTheme:r}))};t.ButtonCozyHome=l,l.propTypes={homeHref:o.default.string,isInvertedTheme:o.default.bool}},67597:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(95297)),o=n(r(67294)),i=n(r(71871)),u=n(r(4733)),c=n(r(8620));function s(e){return o.default.createElement("svg",(0,a.default)({width:32,height:32},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("circle",{fill:"#297EF2",fillRule:"nonzero",cx:16,cy:16,r:16}),o.default.createElement("path",{d:"M19.314 17.561a.555.555 0 01-.82.12 4.044 4.044 0 01-2.499.862 4.04 4.04 0 01-2.494-.86.557.557 0 01-.815-.12.547.547 0 01.156-.748c.214-.14.229-.421.229-.424a.555.555 0 01.176-.385.504.504 0 01.386-.145.544.544 0 01.528.553c0 .004 0 .153-.054.36a2.954 2.954 0 003.784-.008 1.765 1.765 0 01-.053-.344.546.546 0 01.536-.561h.01c.294 0 .538.237.545.532 0 0 .015.282.227.422a.544.544 0 01.158.746m2.322-6.369a5.94 5.94 0 00-1.69-3.506A5.651 5.651 0 0015.916 6a5.648 5.648 0 00-4.029 1.687 5.936 5.936 0 00-1.691 3.524 5.677 5.677 0 00-3.433 1.737 5.966 5.966 0 00-1.643 4.137C5.12 20.347 7.704 23 10.882 23h10.236c3.176 0 5.762-2.653 5.762-5.915 0-3.083-2.31-5.623-5.244-5.893",fill:"#FFF"})))}var l=function(e){var t=e.className,r=e.isInvertedTheme;return o.default.createElement(u.default,{fetchIcon:function(){return r?"".concat(c.default.get.cozyURL(),"/assets/images/icon-cozy-home-inverted.svg"):"".concat(c.default.get.cozyURL(),"/assets/images/icon-cozy-home.svg")},fallbackIcon:s,className:t})};l.propTypes={className:i.default.string,isInvertedTheme:i.default.bool},t.default=l},55098:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(90402)),i=n(r(67294)),u=a(r(71871)),c=a(r(24904)),s=a(r(93001)),l=function(e){var t=e.appName,r=e.appNamePrefix,n=e.appSlug,a=e.iconPath,u=e.isPublic,l=e.isInvertedTheme,d=(0,i.useState)(),f=(0,o.default)(d,2),p=f[0],h=f[1],y=(0,i.useRef)(),v=(0,i.useRef)(),m=(0,i.useCallback)(function(e){!p||y.current.contains(e.target)||v.current.contains(e.target)||(h(!1),e.stopPropagation())},[p]);return(0,i.useEffect)(function(){return document.body.addEventListener("click",m),v.current=document.getElementById("cozy-bar-modal-dom-place"),function(){document.body.removeEventListener("click",m)}},[m]),i.default.createElement("nav",{className:"coz-nav coz-nav-apps",ref:y},i.default.createElement(s.default,{appName:t,appNamePrefix:r,appSlug:n,iconPath:a,handleClick:function(){h(!p)},opened:p,isPublic:u,isInvertedTheme:l}),i.default.createElement("div",{className:"coz-nav-pop coz-nav-pop--apps",id:"coz-nav-pop--apps","aria-hidden":!p},i.default.createElement(c.default,{isInvertedTheme:l})))};l.propTypes={appName:u.default.string,appNamePrefix:u.default.string,appSlug:u.default.string,iconPath:u.default.string,isPublic:u.default.bool,isInvertedTheme:u.default.bool},t.default=l},60381:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(90402)),i=n(r(67294)),u=r(36198),c=a(r(66470));t.default=function(e){var t=e.code,r=e.links,n=(0,c.default)().t,a=(0,i.useState)(!0),s=(0,o.default)(a,2),l=s[0],d=s[1],f=(0,i.useCallback)(function(){return setTimeout(function(){d(!1)},100)},[d]);return(0,i.useEffect)(function(){f()},[f]),i.default.createElement("div",{className:"coz-bar-banner".concat(l?" unmounted":"")},i.default.createElement("p",null,n("banner.".concat(t,".description"))),r&&i.default.createElement(u.ButtonLink,{className:"coz-bar-banner-button",size:"tiny",href:r,label:n("banner.".concat(t,".CTA"))}))}},94200:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapDispatchToProps=t.mapStateToProps=t.Bar=void 0;var o=a(r(90402)),i=a(r(95297)),u=n(r(67294)),c=r(27084),s=a(r(71871)),l=r(72339),d=a(r(32419)),f=r(25976),p=a(r(71400)),h=r(48263),y=a(r(60381)),v=a(r(86220)),m=a(r(1453)),g=a(r(55098)),b=r(54910),w=a(r(66470)),O=r(16396);function k(e){return u.default.createElement("svg",(0,i.default)({width:16,height:16},e),u.default.createElement("path",{d:"M0 0h4v4H0V0zm0 6h4v4H0V6zm0 6h4v4H0v-4zM6 0h4v4H6V0zm0 6h4v4H6V6zm0 6h4v4H6v-4zm6-12h4v4h-4V0zm0 6h4v4h-4V6zm0 6h4v4h-4v-4z",fillRule:"evenodd"}))}var _=function(e){var t=e.fetchContext,r=e.fetchSettingsData,n=e.fetchApps,a=e.isPublic,i=e.onDrawer,c=e.barLeft,s=e.barRight,b=e.barCenter,_=e.barSearch,x=e.onLogOut,S=e.userActionRequired,E=e.isInvertedTheme,P=e.appName,C=e.appNamePrefix,A=e.appSlug,j=e.iconPath,T=e.hasFetchedApps,M=(0,O.useClient)(),D=(0,w.default)().t,R=(0,l.useBreakpoints)().isMobile,I=(0,u.useState)(!1),N=(0,o.default)(I,2),F=N[0],L=N[1],z=!a&&R,B=!a&&!R,U=(0,u.useCallback)(function(){a||(t(),r(!1),T||n())},[n,t,r,T,a]);(0,u.useEffect)(function(){var e=function(){U()};return U(),M.on("tokenRefreshed",e),function(){M.removeListener("tokenRefreshed",e)}},[M,U]),(0,u.useEffect)(function(){!T&&F&&n()},[F,n,T]);var H=function(){i(!F),L(!F)};return u.default.createElement("div",{className:"coz-bar-wrapper","data-testid":"coz-bar-wrapper"},u.default.createElement("div",{id:"cozy-bar-modal-dom-place"}),u.default.createElement("div",{className:"coz-bar-container"},c||((0,f.isFlagshipApp)()||(0,p.default)("flagship.debug")?u.default.createElement(h.ButtonCozyHome,{isInvertedTheme:E}):z?u.default.createElement("button",{type:"button",className:"coz-bar-btn coz-bar-burger",onClick:H,"data-tutorial":"apps-mobile"},u.default.createElement(d.default,{icon:k,width:16,height:16,color:"currentColor"}),u.default.createElement("span",{className:"u-visuallyhidden"},D("drawer"))):null),b||u.default.createElement(g.default,{appName:P,appNamePrefix:C,appSlug:A,iconPath:j,isPublic:a,isInvertedTheme:E}),u.default.createElement("div",{className:"u-flex-grow"},_),s||(B?u.default.createElement(m.default,{onLogOut:x}):null),z?u.default.createElement(v.default,{visible:F,onClose:H,drawerListener:function(){return i(F)},onLogOut:x,isInvertedTheme:E}):null),S&&u.default.createElement(y.default,S))};t.Bar=_,_.propTypes={appName:s.default.string,appNamePrefix:s.default.string,appSlug:s.default.string,iconPath:s.default.string,isPublic:s.default.bool,isInvertedTheme:s.default.bool,onLogOut:s.default.func,onDrawer:s.default.func,userActionRequired:s.default.object};var x=function(e){return{hasFetchedApps:(0,b.hasFetched)(e)}};t.mapStateToProps=x;var S=function(e){return{fetchApps:function(){return e((0,b.fetchApps)())},fetchContext:function(){return e((0,b.fetchContext)())},fetchSettingsData:function(t){return e((0,b.fetchSettingsData)(t))}}};t.mapDispatchToProps=S;var E=(0,c.connect)(x,S)(_);t.default=E},70914:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarCenter=function(e){var t=e.children,r=(0,a.useBarContext)();return(0,n.useEffect)(function(){if(r&&void 0!==r.setBarCenter)return r.setBarCenter(t),function(){r.setBarCenter(null)};console.warn("You should not use BarCenter outside of a BarProvider")},[r,t]),null};var n=r(67294),a=r(70082)},9296:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.BarComponent=void 0;var o=a(r(95297)),i=a(r(90402)),u=n(r(67294)),c=r(73935),s=r(54910),l=r(75934),d=a(r(94200)),f=r(27084),p=r(16396),h=r(25976),y=a(r(24060)),v=a(r(8620)),m=r(70082),g=function(){var e=(0,h.isMobileApp)()?"mobile":"browser",t=document.createElement("div");return t.setAttribute("id","coz-bar"),t.setAttribute("role","banner"),t.classList.add("coz-target--".concat(e)),t},b=function(){var e=g(),t=document.querySelector(l.APP_SELECTOR);return t?(document.body.insertBefore(e,t),document.body.classList.add("has-banner"),e):(console.warn('Cozy-bar is looking for a "'.concat(l.APP_SELECTOR,"\" tag that contains your application and can't find it :'(… The BAR is now disabled")),null)};function w(e){var t=e.children,r=e.wrapperElement,n=e.setWrapperElement,a=e.wrapperId,o=void 0===a?"cozy-bar":a;return((0,u.useLayoutEffect)(function(){var e=document.getElementById(o),t=!1;return e||(t=!0,e=b(o)),n(e),function(){t&&e.parentNode&&e.parentNode.removeChild(e)}},[n,o]),null===r)?null:(0,c.createPortal)(t,r)}t.BarComponent=function(e){var t,n=e.appName,a=void 0===n?(0,l.getAppName)():n,c=e.appNamePrefix,h=void 0===c?(0,l.getAppNamePrefix)():c,g=e.appSlug,b=void 0===g?(0,l.getAppSlug)():g,O=e.iconPath,k=void 0===O?(0,l.getDefaultIcon)():O,_=e.isInvertedTheme,x=e.isPublic,S=void 0!==x&&x,E=e.onLogOut,P=e.disableInternalStore,C=void 0!==P&&P,A=(0,m.useBarContext)()||{},j=A.barSearch,T=A.barLeft,M=A.barCenter,D=A.barRight,R=A.themeVariant,I=(0,u.useState)(null),N=(0,i.default)(I,2),F=N[0],L=N[1],z=(0,p.useClient)(),B=!S&&/^\/public/.test(window.location.pathname),U=r(49145).default;t=C?z.store:U(),(0,u.useEffect)(function(){t.dispatch((0,s.setInfos)(a,h,b)),v.default.init({cozyClient:z,onCreate:function(e){return t.dispatch((0,s.onRealtimeCreate)(e))},onDelete:function(e){return t.dispatch((0,s.onRealtimeDelete)(e))}})},[a,h,b,z,t]);var H={appName:a,isInvertedTheme:_,appNamePrefix:h,appSlug:b,cozyClient:z,iconPath:k,isPublic:B||S,onLogOut:E,userActionRequired:(0,l.getUserActionRequired)(),onDrawer:function(e){F.dataset.visible=e}};return u.default.createElement(w,{wrapperElement:F,setWrapperElement:L},u.default.createElement(y.default,{variant:R,ignoreCozySettings:H.isPublic},C?u.default.createElement(d.default,(0,o.default)({},H,{barSearch:j,barLeft:T,barCenter:M,barRight:D})):u.default.createElement(f.Provider,{store:t},u.default.createElement(d.default,(0,o.default)({},H,{barSearch:j,barLeft:T,barCenter:M,barRight:D})))))}},65039:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarLeft=function(e){var t=e.children,r=(0,a.useBarContext)();return(0,n.useEffect)(function(){if(r&&void 0!==r.setBarLeft)return r.setBarLeft(t),function(){r.setBarLeft(null)};console.warn("You should not use BarLeft outside of a BarProvider")},[r,t]),null};var n=r(67294),a=r(70082)},70082:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useBarContext=t.BarContext=void 0;var o=a(r(90402)),i=n(r(67294)),u=(0,i.createContext)();t.BarContext=u,t.useBarContext=function(){return(0,i.useContext)(u)};var c=(0,i.memo)(function(e){var t=e.children,r=(0,i.useState)(null),n=(0,o.default)(r,2),a=n[0],c=n[1],s=(0,i.useState)(null),l=(0,o.default)(s,2),d=l[0],f=l[1],p=(0,i.useState)(null),h=(0,o.default)(p,2),y=h[0],v=h[1],m=(0,i.useState)(null),g=(0,o.default)(m,2),b=g[0],w=g[1],O=(0,i.useState)("normal"),k=(0,o.default)(O,2),_=k[0],x=k[1],S=(0,i.useMemo)(function(){return{barCenter:a,setBarCenter:c,barRight:d,setBarRight:f,barLeft:y,setBarLeft:v,barSearch:b,setBarSearch:w,themeVariant:_,setThemeVariant:x}},[a,y,d,b,_]);return i.default.createElement(u.Provider,{value:S},t)});t.default=c},21797:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarRight=function(e){var t=e.children,r=(0,a.useBarContext)();return(0,n.useEffect)(function(){if(r&&void 0!==r.setBarRight)return r.setBarRight(t),function(){r.setBarRight(null)};console.warn("You should not use BarRight outside of a BarProvider")},[r,t]),null};var n=r(67294),a=r(70082)},89718:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarSearch=function(e){var t=e.children,r=(0,a.useBarContext)();return(0,n.useEffect)(function(){if(r&&void 0!==r.setBarSearch)return r.setBarSearch(t),function(){r.setBarSearch(null)};console.warn("You should not use BarSearch outside of a BarProvider")},[r,t]),null};var n=r(67294),a=r(70082)},48208:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarTheme=function(e){var t=e.variant,r=(0,a.useBarContext)();return(0,n.useEffect)(function(){if(r&&void 0!==r.setTheme)return r.setThemeVariant(t),function(){r.setThemeVariant("normal")};console.warn("You should not use BarTheme outside of a BarProvider")},[r,t]),null};var n=r(67294),a=r(70082)},86220:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Drawer=void 0;var o=a(r(68434)),i=a(r(82007)),u=a(r(65105)),c=a(r(19723)),s=a(r(8997)),l=a(r(25665)),d=a(r(27952)),f=a(r(12323)),p=a(r(64512)),h=n(r(67294)),y=r(27084),v=a(r(50840)),m=a(r(71871)),g=a(r(20958)),b=a(r(24546)),w=a(r(9758)),O=a(r(24904)),k=a(r(29e3)),_=r(54910),x=function(e){(0,l.default)(a,e);var t,r,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(a);return e=t?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function a(e){var t,r;return(0,u.default)(this,a),t=n.call(this,e),(0,p.default)((0,s.default)(t),"onDrawerClick",function(e){e.target===t.wrapperRef&&t.close()}),(0,p.default)((0,s.default)(t),"onTransitionEnd",function(){t.props.visible?(t.gesturesHandler||t.attachGestures(),t.preventBackgroundScrolling()):(t.restoreBackgroundScrolling(),t.setState({isClosing:!1})),t.props.drawerListener()}),(0,p.default)((0,s.default)(t),"UNSAFE_componentWillReceiveProps",(r=(0,i.default)(o.default.mark(function e(r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.props.visible&&r.visible)){e.next=3;break}return e.next=3,t.props.fetchSettingsData();case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),(0,p.default)((0,s.default)(t),"close",function(){t.state.isClosing||(t.detachGestures(),t.setState(function(){return{isClosing:!0}}),t.turnTransitionsOn(),t.props.onClose(),t.asideRef.style.transform="")}),t.state={isScrolling:!1,isClosing:!1},t}return(0,c.default)(a,[{key:"componentDidMount",value:(r=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.turnTransitionsOn();case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"turnTransitionsOn",value:function(){this.asideRef.classList.add("with-transition"),this.asideRef.addEventListener("transitionend",this.onTransitionEnd)}},{key:"turnTransitionsOff",value:function(){this.asideRef.classList.remove("with-transition"),this.asideRef.removeEventListener("transitionend",this.onTransitionEnd)}},{key:"preventBackgroundScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"restoreBackgroundScrolling",value:function(){document.body.style.overflow="auto"}},{key:"detachGestures",value:function(){this.gesturesHandler.destroy(),this.gesturesHandler=null}},{key:"attachGestures",value:function(){var e=this;this.gesturesHandler=new v.default.Manager(document.documentElement,{recognizers:[[v.default.Pan,{direction:v.default.DIRECTION_ALL}]]});var t=this.asideRef.getBoundingClientRect().width,r=null;this.gesturesHandler.on("panstart",function(t){e.state.isClosing||("panup"===t.additionalEvent||"pandown"===t.additionalEvent?e.setState({isScrolling:!0}):(e.turnTransitionsOff(),r=0))}),this.gesturesHandler.on("pan",function(n){e.state.isClosing||e.state.isScrolling||(r=-n.deltaX/t,e.applyTransformation(r))}),this.gesturesHandler.on("panend",function(r){if(!e.state.isClosing){if(e.state.isScrolling){e.setState({isScrolling:!1});return}var n=-r.deltaX/t>=.4,a=r.velocity<0&&Math.abs(r.velocity)>=.2;n||a?e.close():(e.turnTransitionsOn(),e.applyTransformation(0))}})}},{key:"applyTransformation",value:function(e){e=Math.min(1.1,Math.max(0,e)),this.asideRef.style.transform="translateX(-"+100*e+"%)"}},{key:"render",value:function(){var e=this,t=this.props,r=t.visible,n=t.isInvertedTheme,a=t.onLogOut;return h.default.createElement("div",{className:"coz-drawer-wrapper",onClick:this.onDrawerClick,"aria-hidden":r?"false":"true",ref:function(t){e.wrapperRef=t}},h.default.createElement("aside",{ref:function(t){e.asideRef=t}},h.default.createElement("nav",{className:"coz-drawer--apps"},h.default.createElement(O.default,{onAppSwitch:this.close,isInvertedTheme:n})),h.default.createElement(g.default,null),h.default.createElement("nav",{className:"coz-drawer--settings"},h.default.createElement(w.default,{elevation:0,square:!0},h.default.createElement(b.default,null,h.default.createElement(k.default,{isDrawer:!0,onLogOut:a}))))))}}]),a}(h.Component);t.Drawer=x,x.propTypes={visible:m.default.bool,onClose:m.default.func,onLogOut:m.default.func,isInvertedTheme:m.default.bool,fetchSettingsData:m.default.func};var S=(0,y.connect)(null,function(e){return{fetchSettingsData:function(){return e((0,_.fetchSettingsData)())}}})(x);t.default=S},29e3:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(95297)),o=n(r(80295)),i=n(r(67294)),u=n(r(71871)),c=r(16396),s=r(53207),l=n(r(72518)),d=n(r(47868)),f=r(12568),p=r(85764),h=r(21272),y=n(r(66470)),v=function(e){var t=e.anchorRef,r=e.instanceInfo,n=e.onLogOut,a=e.isDrawer,o=e.onClose,u=(0,y.default)().t,c=(0,s.makeActions)([f.profile,f.appearance,f.plans,f.storage,s.divider,f.permissions,f.connectedDevices,f.connections,s.divider,f.help,f.contact,h.legalNotice,p.termsOfService,f.logout],{t:u,instanceInfo:r,onLogOut:n});return a?i.default.createElement(d.default,{actions:c}):i.default.createElement(l.default,{ref:t,open:!0,docs:[],actions:c,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoClose:!0,onClose:o})};v.propTypes={instanceInfo:u.default.object,onLogOut:u.default.func,isDrawer:u.default.bool};var m=function(e){var t=(0,c.useInstanceInfo)(),r=t.isLoaded,n=(0,o.default)(t,["isLoaded"]);return r?i.default.createElement(v,(0,a.default)({instanceInfo:n},e)):null};m.defaultProps={isDrawer:!1},m.propTypes={onLogOut:u.default.func,isDrawer:u.default.bool},t.default=m},37629:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(67294)),o=r(16396),i=r(5499),u=r(96716),c=n(r(66470));t.default=function(){var e=(0,c.default)().t,t=(0,o.useInstanceInfo)(),r=t.isLoaded,n=t.diskUsage;if(!r)return null;var s=(0,i.makeDiskInfos)(n.data.used,n.data.quota||Math.max(1e12,10*parseInt(n.data.used,10)));return a.default.createElement(a.default.Fragment,null,e("storage_phrase",{diskUsage:s.humanDiskUsage,diskQuota:s.humanDiskQuota}),a.default.createElement(u.LinearProgress,{style:{width:"85%"},className:"u-mt-half",variant:"determinate",value:parseInt(s.percentUsage)}))}},93313:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.appearance=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(41286)),p=r(96121),h=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label}))});h.displayName="AppearanceAction",t.appearance=function(e){var t=e.t;return{name:"appearance",icon:f.default,label:t("appearance"),action:function(e,t){var r=t.client,n=(0,p.getSettingsLink)({client:r,hash:"appearance"});window.open(n,"_self")},Component:h}}},26038:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.connectedDevices=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(88191)),p=r(96121),h=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label}))});h.displayName="ConnectedDevicesAction",t.connectedDevices=function(e){var t=e.t;return{name:"connectedDevices",icon:f.default,label:t("connectedDevices"),action:function(e,t){var r=t.client,n=(0,p.getSettingsLink)({client:r,hash:"connectedDevices"});window.open(n,"_self")},Component:h}}},91132:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.connections=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(73806)),p=r(96121),h=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label}))});h.displayName="ConnectionsAction",t.connections=function(e){var t=e.t;return{name:"connections",icon:f.default,label:t("connections"),action:function(e,t){var r=t.client,n=(0,p.getSettingsLink)({client:r,hash:"sessions"});window.open(n,"_self")},Component:h}}},85127:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.contact=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(75410)),p=r(96121),h=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label}))});h.displayName="ContactAction",t.contact=function(e){var t=e.t;return{name:"contact",icon:f.default,label:t("contact"),action:function(e,t){var r=t.client,n=(0,p.getSettingsLink)({client:r,hash:"support"});window.open(n,"_self")},Component:h}}},58714:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.help=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(58896)),p=a(r(19034)),h=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:p.default})))});h.displayName="HelpAction",t.help=function(e){var t=e.t;return{name:"help",icon:f.default,label:t("help"),action:function(){window.open("https://support.cozy.io/","_blank","noopener, noreferrer")},Component:h}}},12568:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"appearance",{enumerable:!0,get:function(){return n.appearance}}),Object.defineProperty(t,"connectedDevices",{enumerable:!0,get:function(){return a.connectedDevices}}),Object.defineProperty(t,"connections",{enumerable:!0,get:function(){return o.connections}}),Object.defineProperty(t,"contact",{enumerable:!0,get:function(){return i.contact}}),Object.defineProperty(t,"help",{enumerable:!0,get:function(){return u.help}}),Object.defineProperty(t,"logout",{enumerable:!0,get:function(){return c.logout}}),Object.defineProperty(t,"permissions",{enumerable:!0,get:function(){return s.permissions}}),Object.defineProperty(t,"plans",{enumerable:!0,get:function(){return l.plans}}),Object.defineProperty(t,"profile",{enumerable:!0,get:function(){return d.profile}}),Object.defineProperty(t,"storage",{enumerable:!0,get:function(){return f.storage}});var n=r(93313),a=r(26038),o=r(91132),i=r(85127),u=r(58714),c=r(63535),s=r(52149),l=r(96316),d=r(59373),f=r(8827)},21272:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.legalNotice=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(26712)),p=a(r(19034)),h=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:p.default})))});h.displayName="LegalNoticeAction",t.legalNotice=function(e){var t=e.t,r=e.instanceInfo;return{name:"legalNotice",icon:f.default,label:t("legalNotice"),displayCondition:function(){return!!r.instance.data.legal_notice_url},action:function(){window.open(r.instance.data.legal_notice_url,"_blank","noopener, noreferrer")},Component:h}}},63535:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.logout=void 0;var o=a(r(68434)),i=a(r(82007)),u=a(r(95297)),c=a(r(80295)),s=n(r(67294)),l=r(25976),d=a(r(73355)),f=a(r(96105)),p=a(r(11075)),h=a(r(32419)),y=a(r(43738)),v=(0,s.forwardRef)(function(e,t){var r=e.action,n=(0,c.default)(e,["action"]);return s.default.createElement(d.default,(0,u.default)({},n,{ref:t}),s.default.createElement(f.default,null,s.default.createElement(h.default,{icon:r.icon})),s.default.createElement(p.default,{primary:r.label}))});v.displayName="LogoutAction",t.logout=function(e){var t,r=e.t,n=e.onLogOut;return{name:"logout",icon:y.default,label:r("logout"),action:(t=(0,i.default)(o.default.mark(function e(t,r){var a,i,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.client,i=r.webviewIntent,!(n&&"function"==typeof n)){e.next=8;break}if(!((u=n())instanceof Promise)){e.next=6;break}return e.next=6,u;case 6:e.next=11;break;case 8:return e.next=10,a.logout();case 10:return e.abrupt("return",(0,l.isFlagshipApp)()&&i?i.call("logout"):window.location.reload());case 11:case"end":return e.stop()}},e)})),function(e,r){return t.apply(this,arguments)}),Component:v}}},52149:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.permissions=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(71400)),s=a(r(73355)),l=a(r(96105)),d=a(r(11075)),f=a(r(32419)),p=a(r(3473)),h=r(96121),y=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(s.default,(0,o.default)({},n,{ref:t}),u.default.createElement(l.default,null,u.default.createElement(f.default,{icon:r.icon})),u.default.createElement(d.default,{primary:r.label}))});y.displayName="PermissionsAction",t.permissions=function(e){var t=e.t;return{name:"permissions",icon:p.default,label:t("permissions"),displayCondition:function(){return(0,c.default)("settings.permissions-dashboard")},action:function(e,t){var r=t.client,n=(0,h.getSettingsLink)({client:r,hash:"permissions/slug"});window.open(n,"_self")},Component:y}}},96316:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.plans=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(71400)),s=r(16396),l=r(5499),d=a(r(73355)),f=a(r(96105)),p=a(r(11075)),h=a(r(32419)),y=a(r(78975)),v=a(r(19034)),m=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(d.default,(0,o.default)({},n,{ref:t}),u.default.createElement(f.default,null,u.default.createElement(h.default,{icon:r.icon})),u.default.createElement(p.default,{primary:r.label}),!(0,c.default)("settings.subscription")&&u.default.createElement(f.default,null,u.default.createElement(h.default,{icon:v.default})))});m.displayName="PlansAction",t.plans=function(e){var t=e.t,r=e.instanceInfo;return{name:"plans",icon:y.default,label:t("plans"),displayCondition:function(){return(0,l.shouldDisplayOffers)(r)||(0,l.hasAnOffer)(r)},action:function(e,t){var n=t.client,a=(0,c.default)("settings.subscription")&&n?(0,s.generateWebLink)({cozyUrl:n.getStackClient().uri,hash:"/subscription",pathname:"/",slug:"settings",subDomainType:n.getInstanceOptions().subdomain}):(0,l.buildPremiumLink)(r);window.open(a,"_self")},Component:m}}},59373:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.profile=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(43068)),p=r(96121),h=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t,color:"primary"}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label}))});h.displayName="ProfileAction",t.profile=function(e){var t=e.t;return{name:"profile",icon:f.default,label:t("profile"),action:function(e,t){var r=t.client,n=(0,p.getSettingsLink)({client:r,hash:"profile"});window.open(n,"_self")},Component:h}}},8827:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.storage=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(16385)),p=a(r(37629)),h=r(96121),y=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label,secondary:u.default.createElement(p.default,null),secondaryTypographyProps:{variant:"body1",color:"textSecondary",component:"div"}}))});y.displayName="StorageAction",t.storage=function(e){var t=e.t;return{name:"storage",icon:f.default,label:t("storage"),action:function(e,t){var r=t.client,n=(0,h.getSettingsLink)({client:r,hash:"storage"});window.open(n,"_self")},Component:y}}},85764:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.termsOfService=void 0;var o=a(r(95297)),i=a(r(80295)),u=n(r(67294)),c=a(r(73355)),s=a(r(96105)),l=a(r(11075)),d=a(r(32419)),f=a(r(73690)),p=a(r(19034)),h=(0,u.forwardRef)(function(e,t){var r=e.action,n=(0,i.default)(e,["action"]);return u.default.createElement(c.default,(0,o.default)({},n,{ref:t}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:r.icon})),u.default.createElement(l.default,{primary:r.label}),u.default.createElement(s.default,null,u.default.createElement(d.default,{icon:p.default})))});h.displayName="TermsOfServiceAction",t.termsOfService=function(e){var t=e.t,r=e.instanceInfo;return{name:"termsOfService",icon:f.default,label:t("termsOfService"),action:function(){window.open("https://files.cozycloud.cc/TOS".concat(r.instance.data.tos?"-".concat(r.instance.data.tos):"-201711",".pdf"),"_blank","noopener, noreferrer")},Component:h}}},96121:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSettingsLink=t.isFetchingQueries=void 0;var n=r(16396);t.isFetchingQueries=function(e){return e.some(function(e){return"loading"===e.fetchStatus})},t.getSettingsLink=function(e){var t=e.client,r=e.hash;return(0,n.generateWebLink)({cozyUrl:t.getStackClient().uri,slug:"settings",hash:r,subDomainType:t.getInstanceOptions().subdomain})}},1453:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(90402)),i=n(r(67294)),u=r(16396),c=a(r(41496)),s=a(r(32419)),l=a(r(3387)),d=a(r(29e3)),f=a(r(66470));t.default=function(e){var t=e.onLogOut,r=(0,i.useState)(!1),n=(0,o.default)(r,2),a=n[0],p=n[1],h=(0,i.useRef)(),y=(0,f.default)().t,v=(0,u.useInstanceInfo)().isLoaded;return i.default.createElement(i.default.Fragment,null,i.default.createElement(c.default,{ref:h,variant:"text","aria-controls":"simple-menu","aria-haspopup":"true",color:"default",busy:!v,startIcon:i.default.createElement(s.default,{icon:l.default}),label:y("menu.settings"),onClick:function(){return p(function(e){return!e})}}),a&&i.default.createElement(d.default,{anchorRef:h,onLogOut:t,onClose:function(){return p(!1)}}))}},66470:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(36956),o=n(r(94157)),i=n(r(18670)),u=n(r(13585)),c={en:o.default,fr:i.default,es:u.default},s=(0,a.createUseI18n)(c);t.default=s},75934:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_SELECTOR=t.getUserActionRequired=t.getAppSlug=t.getAppNamePrefix=t.getAppName=t.getDefaultIcon=void 0;var r="[role=application]";t.APP_SELECTOR=r;var n=function(){var e=document.querySelector(r);return e&&e.dataset?e.dataset:{}},a=function(){var e=n();return e.cozy?JSON.parse(e.cozy):{app:{}}};t.getDefaultIcon=function(){var e=a(),t=n();return e.app.icon?e.app.icon:t.cozyIconPath?t.cozyIconPath:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},t.getAppName=function(){var e=a(),t=n();return e.app.name||t.cozyAppName||null},t.getAppNamePrefix=function(){var e=a(),t=n();return e.app.prefix||t.cozyAppNamePrefix||null},t.getAppSlug=function(){var e=a(),t=n();return e.app.slug||t.cozyAppSlug||null},t.getUserActionRequired=function(){var e=document.querySelector("meta[name=user-action-required]"),t=e&&e.dataset;if(t){var r=t.title,n=t.code,a=t.detail,o=t.links;if(n)return{title:r,code:n,detail:a,links:o}}}},62330:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"BarComponent",{enumerable:!0,get:function(){return a.BarComponent}}),Object.defineProperty(t,"BarCenter",{enumerable:!0,get:function(){return o.BarCenter}}),Object.defineProperty(t,"BarProvider",{enumerable:!0,get:function(){return i.default}});var a=r(9296),o=(r(65039),r(21797),r(70914)),i=(r(48208),r(89718),n(r(70082)));r(54910)},2320:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.UnauthorizedStackException=t.UnavailableStackException=t.MethodNotAllowedException=t.NotFoundException=t.ServerErrorException=t.ForbiddenException=void 0;var a=n(r(65105)),o=n(r(25665)),i=n(r(27952)),u=n(r(12323)),c=n(r(15500));function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,u.default)(e);return r=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,i.default)(this,r)}}var l=function(e){(0,o.default)(r,e);var t=s(r);function r(e){var n;return(0,a.default)(this,r),(n=t.call(this)).name="Forbidden",n.status=403,n.message=e||"The application does not have permission to access this resource.",n.stack=Error().stack,n}return r}((0,c.default)(Error));t.ForbiddenException=l;var d=function(e){(0,o.default)(r,e);var t=s(r);function r(e){var n;return(0,a.default)(this,r),(n=t.call(this)).name="ServerError",n.status=500,n.message=e||"A server error occurred",n.stack=Error().stack,n}return r}((0,c.default)(Error));t.ServerErrorException=d;var f=function(e){(0,o.default)(r,e);var t=s(r);function r(e){var n;return(0,a.default)(this,r),(n=t.call(this)).name="NotFound",n.status=404,n.message=e||"The ressource was not found",n.stack=Error().stack,n}return r}((0,c.default)(Error));t.NotFoundException=f;var p=function(e){(0,o.default)(r,e);var t=s(r);function r(e){var n;return(0,a.default)(this,r),(n=t.call(this)).name="MethodNotAllowed",n.status=405,n.message=e||"Method not allowed",n.stack=Error().stack,n}return r}((0,c.default)(Error));t.MethodNotAllowedException=p;var h=function(e){(0,o.default)(r,e);var t=s(r);function r(e){var n;return(0,a.default)(this,r),(n=t.call(this)).name="UnavailableStack",n.message=e||"The stack is temporarily unavailable",n.stack=Error().stack,n}return r}((0,c.default)(Error));t.UnavailableStackException=h;var y=function(e){(0,o.default)(r,e);var t=s(r);function r(e){var n;return(0,a.default)(this,r),(n=t.call(this)).name="UnauthorizedStack",n.status=401,n.message=e||"The app is not allowed to access to the requested resource",n.stack=Error().stack,n}return r}((0,c.default)(Error));t.UnauthorizedStackException=y},73854:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return c.apply(this,arguments)};var a=n(r(68434)),o=n(r(82007)),i={},u={gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"};function c(){return(c=(0,o.default)(a.default.mark(function e(t){var r,n,o,c,s,l,d,f=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:{},!((n=!(f.length>2)||void 0===f[2]||f[2])&&i.icons&&i.icons[o])){e.next=4;break}return e.abrupt("return",i.icons[o]);case 4:if(o=r.links&&r.links.icon){e.next=7;break}return e.abrupt("return","");case 7:return e.prev=7,e.next=10,t(o);case 10:if((s=e.sent).ok){e.next=13;break}throw Error("Error while fetching icon ".concat(s.statusText,": ").concat(o));case 13:return e.next=15,s.blob();case 15:c=e.sent,e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(7),e.t0;case 21:if(c.type){e.next=30;break}if(r.icon){e.next=24;break}throw Error("".concat(r.name,": Cannot detect mime type for icon ").concat(o));case 24:if(l=r.icon.split(".").pop()){e.next=27;break}throw Error("".concat(r.name,": Unable to detect icon mime type from extension (").concat(r.icon,")"));case 27:if(u[l]){e.next=29;break}throw Error("".concat(r.name,": 'Unexpected icon extension (").concat(r.icon,")"));case 29:c=new Blob([c],{type:u[l]});case 30:if(!c.type.match(/^image\/.*$/)){e.next=34;break}return d=URL.createObjectURL(c),n&&(i.icons=i.icons||{},i.icons[o]=d),e.abrupt("return",d);case 34:throw Error("".concat(r.name,": icon ").concat(o," is not an image."));case 35:case"end":return e.stop()}},e,null,[[7,18]])}))).apply(this,arguments)}},44841:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(71400)),o=n(r(60732));(0,n(r(31468)).default)(window,"cozy.debug.flagship",function(){return(0,a.default)("flagship.debug",!0)});var i=window.minilog||o.default,u=i("cozy-bar");(0,a.default)("bar.debug")||i.suggest.deny("cozy-bar","info"),t.default=u},73535:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(68434)),o=n(r(82007)),i="io.cozy.apps";t.default=function(e){var t,r=e.getApp,n=e.onCreate,u=e.onDelete,c=e.cozyClient,s=(t=(0,o.default)(a.default.mark(function e(t){var o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(t.slug);case 3:o=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),Error("Cannot fetch app ".concat(t.slug,": ").concat(e.t0.message));case 9:"function"==typeof n&&n(o);case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return t.apply(this,arguments)});try{var l=c.plugins.realtime;if(!l)throw Error("You must include the realtime plugin to use cozy-bar realtime features.");l.subscribe("created",i,s),l.subscribe("deleted",i,function(e){"function"==typeof u&&u(e)})}catch(e){console.warn("Cannot initialize realtime in Cozy-bar: ".concat(e.message))}}},38717:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.setDefaultApp=t.fetchApps=t.setInfos=t.receiveApp=t.deleteApp=t.hasFetched=t.isFetchingApps=t.getHomeApp=t.getApps=t.isCurrentApp=void 0;var a=n(r(24789)),o=n(r(68434)),i=n(r(82007)),u=n(r(8620)),c=n(r(17083)),s=n(r(71400)),l="DELETE_APP",d="RECEIVE_APP",f="RECEIVE_APP_LIST",p="RECEIVE_HOME_APP",h="FETCH_APPS",y="FETCH_APPS_FAILURE",v="SET_INFOS",m=function(e,t){return t.slug===e.appSlug};t.isCurrentApp=m,t.getApps=function(e){return e.apps?e.apps:[]},t.getHomeApp=function(e){return e.homeApp},t.isFetchingApps=function(e){return!!e&&e.isFetching},t.hasFetched=function(e){return e.hasFetched},t.deleteApp=function(e){return{type:l,app:e}},t.receiveApp=function(e){return{type:d,app:e}},t.setInfos=function(e,t,r){return{type:v,appName:e,appNamePrefix:t,appSlug:r}},t.fetchApps=function(){var e;return e=(0,i.default)(o.default.mark(function e(t){var r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:h}),e.next=4,u.default.get.apps();case 4:if(r=e.sent,n=(0,s.default)("apps.hidden")||[],a=r.map(w).filter(function(e){return!n.includes(e.slug)}),r.length){e.next=9;break}throw Error("No installed apps found by the bar");case 9:return e.next=11,t(g(a));case 11:return e.next=13,t({type:f,apps:a});case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),t({type:y}),console.warn(e.t0.message?e.t0.message:e.t0);case 19:case"end":return e.stop()}},e,null,[[0,15]])})),function(t){return e.apply(this,arguments)}};var g=function(e){var t;return t=(0,i.default)(o.default.mark(function t(r){var n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(n=O("home",e))){t.next=5;break}return t.abrupt("return",r({type:p,homeApp:n}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("Cozy-bar cannot fetch home app data: ".concat(t.t0.message));case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(e){return t.apply(this,arguments)}};t.setDefaultApp=g;var b={apps:[],homeApp:null,isFetching:!0,appName:null,appNamePrefix:null,appSlug:null,hasFetched:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return(0,a.default)({},e,{isFetching:!0});case"FETCH_APPS_SUCCESS":case y:return(0,a.default)({},e,{isFetching:!1});case d:return(0,a.default)({},e,{apps:(0,c.default)(e.apps,[w(t.app)],function(e,t){return e.slug===t.slug})});case f:var r=t.apps.map(function(t){return(0,a.default)({},t,{isCurrentApp:m(e,t)})});return(0,a.default)({},e,{isFetching:!1,hasFetched:!0,apps:r});case p:var n=t.homeApp;return m(e,n)?(0,a.default)({},e,{homeApp:(0,a.default)({},n,{isCurrentApp:!0})}):(0,a.default)({},e,{homeApp:n});case l:return(0,a.default)({},e,{apps:e.apps.filter(function(e){return e.slug!==t.app.slug})});case v:return(0,a.default)({},e,{appName:t.appName,appNamePrefix:t.appNamePrefix,appSlug:t.appSlug});default:return e}};var w=function(e){var t;return(0,a.default)({},e,!!(t=e.attributes)&&Object.keys(t).reduce(function(e,r){return e[r.split("_").map(function(e,t){return t?e.charAt(0).toUpperCase()+e.slice(1):e}).join("")]=t[r],e},{}),{href:e.links&&e.links.related})},O=function(e,t){return t.find(function(t){return t.slug===e})}},99545:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.fetchContext=t.getHelpLink=void 0;var a=n(r(24789)),o=n(r(68434)),i=n(r(82007)),u=n(r(8620)),c=r(52803),s="FETCH_CONTEXT",l="FETCH_CONTEXT_SUCCESS",d="RECEIVE_NO_CONTEXT";t.getHelpLink=function(e){return e.helpLink},t.fetchContext=function(){var e;return e=(0,i.default)(o.default.mark(function e(t,r){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:s}),!r().cozyBar.context.contextNotExist){e.next=3;break}return e.abrupt("return",t({type:l,context:null}));case 3:return e.prev=3,e.next=6,u.default.get.context();case 6:return n=e.sent,e.abrupt("return",t({type:l,context:n}));case 10:return e.prev=10,e.t0=e.catch(3),e.t0.status&&404===e.t0.status&&t({type:d}),console.warn("Cannot get Cozy context"),e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[3,10]])})),function(t,r){return e.apply(this,arguments)}};var f={contextNotExist:!1,helpLink:null,isFetching:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return(0,a.default)({},e,{isFetching:!0});case l:var r=t.context&&t.context.data&&t.context.data.attributes;return(0,a.default)({},e,{helpLink:r&&r.help_link||null,isFetching:!1,contextNotExist:!1});case d:return(0,a.default)({},e,{contextNotExist:!0});case c.LOG_OUT:return f;default:return e}}},54910:function(e,t,r){"use strict";var n=r(14746);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.reducers=t.onRealtimeDelete=t.onRealtimeCreate=t.getHelpLink=t.isFetchingSettings=t.isSettingsBusy=t.getStorageData=t.hasFetched=t.isCurrentApp=t.isFetchingApps=t.getHomeApp=t.getApps=t.fetchContext=t.logOut=t.fetchSettingsData=t.setInfos=t.fetchApps=void 0;var a=r(98116),o=n(r(38717)),i=n(r(52803)),u=n(r(99545)),c=function(e,t){return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return t.apply(void 0,[r.cozyBar[e]].concat(a))}},s=o.fetchApps;t.fetchApps=s;var l=o.setInfos;t.setInfos=l;var d=i.fetchSettingsData;t.fetchSettingsData=d;var f=i.logOut;t.logOut=f;var p=u.fetchContext;t.fetchContext=p;var h=c("apps",o.getApps);t.getApps=h;var y=c("apps",o.getHomeApp);t.getHomeApp=y;var v=c("apps",o.isFetchingApps);t.isFetchingApps=v;var m=c("apps",o.isCurrentApp);t.isCurrentApp=m;var g=c("apps",o.hasFetched);t.hasFetched=g;var b=c("settings",i.getStorageData);t.getStorageData=b;var w=c("settings",i.isSettingsBusy);t.isSettingsBusy=w;var O=c("settings",i.isFetchingSettings);t.isFetchingSettings=O;var k=c("context",u.getHelpLink);t.getHelpLink=k;var _=o.receiveApp;t.onRealtimeCreate=_;var x=o.deleteApp;t.onRealtimeDelete=x;var S={cozyBar:(0,a.combineReducers)({apps:o.default,context:u.default,settings:i.default})};t.reducers=S;var E=(0,a.combineReducers)(S);t.default=E},52803:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.logOut=t.fetchSettingsData=t.isFetchingSettings=t.isSettingsBusy=t.getStorageData=t.LOG_OUT=void 0;var a=n(r(24789)),o=n(r(68434)),i=n(r(82007)),u=n(r(8620)),c="FETCH_SETTINGS",s="FETCH_SETTINGS_BUSY",l="FETCH_SETTINGS_SUCCESS",d="RECEIVE_STORAGE",f="LOG_OUT";t.LOG_OUT=f,t.getStorageData=function(e){return e.storageData},t.isSettingsBusy=function(e){return e.isBusy},t.isFetchingSettings=function(e){return e.isFetching};var p=function(){var e;return e=(0,i.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.default.get.storageData();case 3:return r=e.sent,e.abrupt("return",t({type:d,storageData:r}));case 7:return e.prev=7,e.t0=e.catch(0),console.warn&&console.warn("Cannot get Cozy storage informations"),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(t){return e.apply(this,arguments)}};t.fetchSettingsData=function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e=(0,i.default)(o.default.mark(function e(r){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:c}),n=setTimeout(function(){t&&r({type:s})},450),e.next=4,r(p());case 4:clearTimeout(n),r({type:l});case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}},t.logOut=function(){var e;return e=(0,i.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:f}),e.prev=1,e.next=4,u.default.logout();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.warn("Error while logging out in the cozy-bar",e.t0);case 9:case"end":return e.stop()}},e,null,[[1,6]])})),function(t){return e.apply(this,arguments)}};var h={contextNotExist:!1,isFetching:!1,isBusy:!1,storageData:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return(0,a.default)({},e,{isFetching:!0});case s:return(0,a.default)({},e,{isBusy:!0});case l:return(0,a.default)({},e,{isFetching:!1,isBusy:!1});case"RECEIVE_NO_CONTEXT":return(0,a.default)({},e,{contextNotExist:!0});case d:return(0,a.default)({},e,{storageData:t.storageData});case f:return h;default:return e}}},86659:function(e,t,r){"use strict";var n,a,o,i,u=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=u(r(68434)),s=u(r(82007)),l=r(9420),d=u(r(73854)),f=u(r(73535)),p=r(2320),h=r(25976),y={401:p.UnauthorizedStackException,403:p.ForbiddenException,404:p.NotFoundException,405:p.MethodNotAllowedException,500:p.ServerErrorException},v=function(){return i.getStackClient()},m=function(){return new URL(v().uri)},g=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n.headers=n.headers||{};return a.Accept="application/json","GET"===e||"HEAD"===e||void 0===r||a["Content-Type"]||(a["Content-Type"]="application/json",r=JSON.stringify(r)),v().fetch(e,t,r,n).then(function(e){if("function"==typeof y[e.status])throw new y[e.status];if(!e.headers.get("content-type").includes("json"))throw Error("Server response not in JSON");return e.json()})},b=function(e){if(!e)throw Error("Missing slug");return g("GET","/apps/".concat(e)).then(function(e){if(e.error)throw Error(e.error);return e.data})},w=function(e){return v().fetch("GET",e)},O={get:{app:b,apps:function(){return g("GET","/apps/").then(function(e){if(e.error)throw Error(e.error);return e.data})},context:(n=function(){return g("GET","/settings/context")},a={},o=void 0,(0,s.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==o){e.next=10;break}return e.prev=1,e.next=4,n();case 4:o=e.sent,e.next=10;break;case 7:var t;e.prev=7,e.t0=e.catch(1),o=["NotFoundException","NotFound","FetchError"].includes((t=e.t0).name)&&t.status&&404===t.status?a:void 0;case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))),storageData:function(){return g("GET","/settings/disk-usage").then(function(e){var t=parseInt(e.data.attributes.used,10),r=parseInt(e.data.attributes.quota,10)||Math.max(1e12,10*t);return{usage:t,quota:r,isLimited:e.data.attributes.is_limited}}).catch(function(){throw new p.UnavailableStackException})},iconProps:function(){var e={domain:m().host,secure:"https:"===m().protocol};return(0,h.isMobileApp)()?{fetchIcon:function(e){return(0,d.default)(w,e,!0)}}:e},cozyURL:function(){return m().origin},intents:function(){return new l.Intents({client:i})}},updateAccessToken:function(){throw Error("updateAccessToken should not be used with a cozy-client instance initialization")},cozyFetchJSON:function(e,t,r,n){return g(t,r,n).then(function(e){var t=Object.assign({},e.data);return t.id&&(t._id=t.id),t})},logout:function(){return v().fetch("DELETE","/auth/login").then(function(e){if(401===e.status)throw new p.UnauthorizedStackException;return 204===e.status&&window.location.reload(),!0}).catch(function(){throw new p.UnavailableStackException})},init:function(e){var t=e.cozyClient,r=e.onCreate,n=e.onDelete;(i=t).isLogged&&(0,f.default)({getApp:b,onCreate:r,onDelete:n,cozyClient:i})}};t.default=O},8620:function(e,t,r){"use strict";var n,a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getIntents=t.cozyFetchJSON=t.default=void 0;var o=a(r(86659)),i=function(){if(!n)throw Error("client not initialized in cozy-bar");return n},u={init:function(e){return(n=o.default).init(e)},get:{app:function(){var e;return(e=i().get).app.apply(e,arguments)},apps:function(){var e;return(e=i().get).apps.apply(e,arguments)},context:function(){var e;return(e=i().get).context.apply(e,arguments)},storageData:function(){var e;return(e=i().get).storageData.apply(e,arguments)},iconProps:function(){var e;return(e=i().get).iconProps.apply(e,arguments)},cozyURL:function(){var e;return(e=i().get).cozyURL.apply(e,arguments)}},updateAccessToken:function(){var e;return(e=i()).updateAccessToken.apply(e,arguments)},logout:function(){var e;return(e=i()).logout.apply(e,arguments)},cozyFetchJSON:function(){var e;return(e=i()).cozyFetchJSON.apply(e,arguments)},getStack:i,getIntents:function(){return i().get.intents()}};t.default=u;var c=u.cozyFetchJSON,s=u.getIntents;t.getIntents=s,t.cozyFetchJSON=c},49145:function(e,t,r){"use strict";var n,a=r(5751);t.default=void 0;var o=a(r(24789)),i=r(98116),u=a(r(53894)),c=r(25613),s=r(54910),l=r(94500),d=a(r(76734)),f=a(r(58609)),p=a(r(44841)),h=a(r(71400)),y={storage:d.default,key:"cozy-bar",whitelist:f.default},v=(0,l.createLogger)({logger:p.default}),m=(0,c.persistCombineReducers)(y,(0,o.default)({},s.reducers)),g=[u.default];(0,h.default)("bar.debug")&&g.push(v);t.default=function(){return n||(n=(0,i.createStore)(m,i.applyMiddleware.apply(null,g)),(0,c.persistStore)(n)),n}},5171:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.appShape=void 0;var a=n(r(71871)),o=a.default.shape({slug:a.default.string.isRequired,name:a.default.string.isRequired,namePrefix:a.default.string,comingSoon:a.default.bool,href:a.default.string,links:a.default.shape({icon:a.default.string.isRequired})});t.appShape=o},79391:function(e,t,r){"use strict";var n=r(67361);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,i){if(i!==n){var u=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r,r}},71871:function(e,t,r){e.exports=r(79391)()},67361:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},18621:function(e,t,r){"use strict";var n=r(34155),a=r(16452),o=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(r(78619)),u=o(r(61874)),c=o(r(75888)),s=o(r(15572)),l=o(r(11449)),d=o(r(10687)),f=o(r(89679)),p=o(r(59422)),h=o(r(85660)),y=o(r(66604)),v=o(r(17204)),m=o(r(85564)),g=o(r(45578)),b=o(r(4788)),w=o(r(84486)),O=o(r(27361)),k=o(r(37203)),_=a(r(60359)),x=r(87941),S=o(r(97619)),E=r(25367),P=r(11282),C=r(72004),A=r(71450),j=r(18118),T=o(r(20057)),M=a(r(65972)),D=o(r(39268)),R=o(r(42189)),I=r(37130),N=o(r(31344)),F=r(12196),L=r(325),z=o(r(22853)),B=r(76305),U=o(r(67266)),H=o(r(25888)),G=r(23864);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function q(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return V(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Q=function(e){return{get:function(t,r){return z.default.warn(e),t[r]}}},J=function(e){var t;if(e&&"undefined"!=typeof window&&null!==(t=window.cozy)&&void 0!==t&&t.isSecureProtocol){var r,n=new URL(e);return n.protocol="https:",(r=n.toString()).endsWith("/")?r.slice(0,-1):r}return e},Y="creation",K="update",$=function(){var e,t,r,a,o,k,D,Z,V,$,X,ee,et,er,en,ea,eo,ei,eu,ec,es,el,ed,ef;function ep(){var e,t,r=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,ep),(0,h.default)(this,"fetchQueryAndGetFromState",(e=(0,d.default)(l.default.mark(function e(t){var n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.definition,a=t.options,e.prev=1,e.next=4,r.query(n,a);case 4:return e.abrupt("return",r.getQueryFromState(a.as,a));case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}},e,null,[[1,7]])})),function(t){return e.apply(this,arguments)}));var a=n.link,o=n.links,i=n.schema,u=n.appMetadata,c=n.capabilities,p=n.performanceApi,y=(0,s.default)(n,["link","links","schema","appMetadata","capabilities","performanceApi"]);a&&z.default.warn("`link` is deprecated, use `links`"),this.performanceApi=p||F.defaultPerformanceApi,this.appMetadata=void 0===u?{}:u,this.loginPromise=null,y.uri=J(y.uri),this.options=y,this.queryIdGenerator=new B.QueryIDGenerator,this.isLogged=!1,this.instanceOptions={},this.handleRevocationChange=this.handleRevocationChange.bind(this),this.handleTokenRefresh=this.handleTokenRefresh.bind(this),this.createClient();var v=this.getStackClient();if(v.on("error",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.emit.apply(r,["error"].concat(t))}),this.setLinks(Array.isArray(t=a||o||new S.default({performanceApi:this.performanceApi}))?t:[t]),this.schema=new R.default(void 0===i?{}:i,v),this.capabilities=c||null,this.plugins={},!(this.stackClient instanceof _.OAuthClient))try{this.loadInstanceOptionsFromDOM()}catch(e){}this._promiseCache=new H.default,y.uri&&y.token&&this.login(),this.storeAccesors=null,!1!==y.store&&this.ensureStore()}return(0,p.default)(ep,[{key:"emit",value:function(){}},{key:"on",value:function(){}},{key:"removeListener",value:function(){}},{key:"registerPlugin",value:function(e,t){if(!e.pluginName)throw Error("Cannot register a plugin whose class does not have `pluginName` attribute.");if(this.plugins[e.pluginName])throw Error("Cannot register plugin ".concat(e.pluginName,". A plugin with the same name has already been registered."));var r=new e(this,t);return this.plugins[e.pluginName]=r,r}},{key:"addSchema",value:function(e){this.schema.add(e)}},{key:"registerClientOnLinks",value:function(){var e,t=q(this.links);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.registerClient)try{r.registerClient(this)}catch(e){z.default.warn(e)}}}catch(e){t.e(e)}finally{t.f()}}},{key:"login",value:function(e){return this.isLogged&&!this.isRevoked?(z.default.warn("CozyClient is already logged."),this.loginPromise):this.loginPromise=this._login(e)}},{key:"_login",value:(e=(0,d.default)(l.default.mark(function e(t){var r,n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.emit("beforeLogin"),this.registerClientOnLinks(),t&&(t.uri&&this.stackClient.setUri(t.uri),t.token&&this.stackClient.setToken(t.token)),r=q(this.links),e.prev=4,r.s();case 6:if((n=r.n()).done){e.next=13;break}if(!(a=n.value).onLogin){e.next=11;break}return e.next=11,a.onLogin();case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:if(this.isLogged=!0,this.isRevoked=!1,!(this.stackClient instanceof _.OAuthClient)){e.next=26;break}return e.next=26,this.loadInstanceOptionsFromStack();case 26:this.emit("login");case 27:case"end":return e.stop()}},e,this,[[4,15,18,21]])})),function(t){return e.apply(this,arguments)})},{key:"logout",value:(t=(0,d.default)(l.default.mark(function e(){var t,r,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLogged){e.next=3;break}return z.default.warn("CozyClient isn't logged."),e.abrupt("return");case 3:if(this.emit("beforeLogout"),this.isLogged=!1,!(this.stackClient instanceof _.OAuthClient)){e.next=17;break}if(e.prev=6,!(this.stackClient.unregister&&(!this.stackClient.isRegistered||this.stackClient.isRegistered()))){e.next=10;break}return e.next=10,this.stackClient.unregister();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),z.default.warn("Impossible to unregister client on stack: ".concat(e.t0));case 15:case 20:e.next=25;break;case 17:return e.prev=17,e.next=20,this.stackClient.fetch("DELETE","/auth/login");case 22:e.prev=22,e.t1=e.catch(17),z.default.warn("Impossible to log out: ".concat(e.t1));case 25:t=q(this.links),e.prev=26,t.s();case 28:if((r=t.n()).done){e.next=41;break}if(!(n=r.value).reset){e.next=39;break}return e.prev=31,e.next=34,n.reset();case 34:e.next=39;break;case 36:e.prev=36,e.t2=e.catch(31),z.default.warn(e.t2);case 39:e.next=28;break;case 41:e.next=46;break;case 43:e.prev=43,e.t3=e.catch(26),t.e(e.t3);case 46:return e.prev=46,t.f(),e.finish(46);case 49:this.store&&this.dispatch((0,M.resetState)()),this.emit("logout");case 51:case"end":return e.stop()}},e,this,[[6,12],[17,22],[26,43,46,49],[31,36]])})),function(){return t.apply(this,arguments)})},{key:"collection",value:function(e){return this.getStackClient().collection(e)}},{key:"fetch",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getStackClient().fetch(e,t,r,n)}},{key:"all",value:function(e){return z.default.warn("\nclient.all is deprecated, prefer to use the Q helper to build a new QueryDefinition.\n\nimport { Q } from 'cozy-client'\nclient.query(Q('io.cozy.bills'))"),(0,A.Q)(e)}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return z.default.warn("client.find(doctype, selector) is deprecated, please use Q(doctype).where(selector) to build the same query."),new A.QueryDefinition({doctype:e,selector:t})}},{key:"get",value:function(e,t){return z.default.warn("client.get(".concat(e,", id) is deprecated, please use Q(").concat(e,").getById(id) to build the same query.")),new A.QueryDefinition({doctype:e,id:t})}},{key:"create",value:(r=(0,d.default)(l.default.mark(function e(t,r,n){var a,o,i=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:{},r._type,o=W({_type:t},(0,s.default)(r,["_type"])),e.next=5,this.schema.validate(o);case 5:if(!0===e.sent){e.next=8;break}throw Error("Validation failed");case 8:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(o,n),a));case 9:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"validate",value:function(e){return this.schema.validate(e)}},{key:"save",value:(a=(0,d.default)(l.default.mark(function e(t){var r,n,a,o,i=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},n=t._type,a=(0,s.default)(t,["_type"]),n){e.next=4;break}throw Error("The document must have a `_type` property");case 4:return o=W({_type:n},a),e.next=7,this.schema.validate(o);case 7:if(!0===e.sent){e.next=10;break}throw Error("Validation failed");case 10:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(o),r));case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"saveAll",value:(o=(0,d.default)(l.default.mark(function e(t){var r,n,a,o,i=this,u=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},1===Array.from(new Set(t.map(function(e){return e._type}))).length){e.next=4;break}throw Error("saveAll can only save documents with the same doctype");case 4:return e.next=6,Promise.all(t.map(function(e){return i.schema.validate(e)}));case 6:if(!((n=e.sent.filter(function(e){return!0!==e})).length>0)){e.next=11;break}throw z.default.warn("There has been some validation errors while bulk saving",n),Error("Validation failed for at least one doc");case 11:return a=t.map(function(e){return i.prepareDocumentForSave(e)}),o=A.Mutations.updateDocuments(a),e.abrupt("return",this.mutate(o,r));case 14:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"ensureCozyMetadata",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{event:Y};if(void 0===this.appMetadata)return e;if(e._type){var n=this.schema.getDoctypeSchema(e._type);t=(0,O.default)(n,"doctypeVersion")}var a=this.appMetadata,o=a.slug,i=a.sourceAccount,u=a.sourceAccountIdentifier,s=a.version,l=new Date().toISOString(),d=(0,O.default)(e,"cozyMetadata",{});return r.event===Y?d=W({metadataVersion:1,doctypeVersion:t,createdByApp:o,sourceAccount:i,sourceAccountIdentifier:u,createdAt:l,createdByAppVersion:s,updatedAt:l,updatedByApps:o?[{date:l,slug:o,version:s}]:[]},d):r.event===K&&(d=W(W({},d),{},{updatedAt:l,updatedByApps:[{date:l,slug:o,version:s}].concat((0,c.default)((0,O.default)(e,"cozyMetadata.updatedByApps",[]).filter(function(e){return e.slug!==o})))})),W(W({},e),{},{cozyMetadata:d})}},{key:"prepareDocumentForSave",value:function(e){var t=!e._rev;return this.ensureCozyMetadata((0,C.dehydrate)(e),{event:t?Y:K})}},{key:"getDocumentSavePlan",value:function(e,t){var r=this,n=!e._rev,a=this.prepareDocumentForSave(e),o=n?A.Mutations.createDocument(a):A.Mutations.updateDocument(a);if(!(t&&Object.values(t).filter(function(e){return Array.isArray(e)?e.length>0:e}).length>0))return o;for(var i=0,c=Object.keys(t);i<c.length;i++){var s,l,d=c[i],f=e._type,p=this.schema.getRelationship(f,d);if(!((s=p.type).prototype.addReferences&&s.prototype.removeReferences))throw l=p.name,Error('The "'.concat(l,'" relationship does not support references. If you need to add references to a document, its relationship class must have the methods {add,remove}References'))}if(t&&!n)throw Error("Unable to save external relationships on a not-new document");return[o,function(e){var n=r.hydrateDocument(e.data);return Object.entries(t).map(function(e){var t=(0,u.default)(e,2),r=t[0],a=t[1];return n[r].addReferences(a)})}]}},{key:"triggerHook",value:function(e,t){if(ep.hooks){var r,n=q((ep.hooks[t._type]||{})[e]||[]);try{for(n.s();!(r=n.n()).done;)(0,r.value)(this,t)}catch(e){n.e(e)}finally{n.f()}}}},{key:"destroy",value:(k=(0,d.default)(l.default.mark(function e(t){var r,n,a=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.triggerHook("before:destroy",t);case 3:return e.next=5,this.mutate(A.Mutations.deleteDocument(t),r);case 5:return n=e.sent,e.next=8,this.triggerHook("after:destroy",t);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"upload",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.mutate(A.Mutations.uploadFile(e,t),r)}},{key:"ensureQueryExists",value:function(e,t,r){this.ensureStore(),"loaded"===(0,M.getQueryFromState)(this.store.getState(),e).fetchStatus&&(t.skip||t.bookmark)||this.dispatch((0,M.initQuery)(e,t,r))}},{key:"query",value:(D=(0,d.default)(l.default.mark(function e(t){var r,n,a,o,i,u,c,d,f,p,h=this,y=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(r=y.length>1&&void 0!==y[1]?y[1]:{}).update,a=r.executeFromStore,o=(0,s.default)(r,["update","executeFromStore"]),i=this.performanceApi.mark("client.query(".concat(t.doctype,")")),this.ensureStore(),u=o.as||this.queryIdGenerator.generateId(t),c=this.getQueryFromState(u,o),void 0===o.enabled||"boolean"==typeof o.enabled){e.next=9;break}throw Error("option.enabled should be a boolean for this query: ".concat(JSON.stringify(t)));case 9:if(!o.fetchPolicy){e.next=15;break}if(o.as){e.next=12;break}throw Error("Cannot use `fetchPolicy` without naming the query, please use `as` to name the query");case 12:if(o.fetchPolicy(c)){e.next=15;break}return e.abrupt("return");case 15:if(!(c&&Object.keys(c).length>0)||"loading"!==c.fetchStatus){e.next=18;break}return e.abrupt("return",this._promiseCache.get(function(){return(0,U.default)(t)}));case 18:return this.ensureQueryExists(u,t,o),e.prev=19,d=void 0!==o.backgroundFetching?o.backgroundFetching:this.options.backgroundFetching,this.dispatch((0,M.loadQuery)(u,{backgroundFetching:d})),f=a?function(){return Promise.resolve((0,M.executeQueryFromState)(h.store.getState(),t))}:function(){return h.requestQuery(t,o)},e.next=25,this._promiseCache.exec(f,function(){return(0,U.default)(t)});case 25:return p=e.sent,this.dispatch((0,M.receiveQueryResult)(u,p,{update:n,backgroundFetching:d})),this.performanceApi.measure({markName:i,measureName:"".concat(i," success"),color:"primary"}),e.abrupt("return",p);case 31:if(e.prev=31,e.t0=e.catch(19),this.performanceApi.measure({markName:i,measureName:"".concat(i," error"),color:"error"}),this.dispatch((0,M.receiveQueryError)(u,e.t0)),!o.onError){e.next=39;break}o.onError(e.t0),e.next=44;break;case 39:if(!this.options.onError){e.next=43;break}this.options.onError(e.t0),e.next=44;break;case 43:throw e.t0;case 44:case"end":return e.stop()}},e,this,[[19,31]])})),function(e){return D.apply(this,arguments)})},{key:"queryAll",value:(Z=(0,d.default)(l.default.mark(function e(t){var r,n,a,o,i,u,s=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=s.length>1&&void 0!==s[1]?s[1]:{}).as||this.queryIdGenerator.generateId(t),a=W(W({},r),{},{as:n}),e.prev=3,e.next=6,this.query(t,a);case 6:i=(o=e.sent).data;case 8:if(!(o&&o.next)){e.next=22;break}if(!o.bookmark){e.next=15;break}return e.next=12,this.query(t.offsetBookmark(o.bookmark),a);case 12:o=e.sent,e.next=19;break;case 15:return u=(0,M.getRawQueryFromState)(this.store.getState(),n),e.next=18,this.query(t.offset(u.data.length),a);case 18:o=e.sent;case 19:i.push.apply(i,(0,c.default)(o.data)),e.next=8;break;case 22:return e.abrupt("return",i);case 25:return e.prev=25,e.t0=e.catch(3),z.default.log("queryAll error for ".concat(e.t0.toString())),e.abrupt("return",[]);case 29:case"end":return e.stop()}},e,this,[[3,25]])})),function(e){return Z.apply(this,arguments)})},{key:"watchQuery",value:function(){return z.default.warn("client.watchQuery is deprecated, please use client.makeObservableQuery."),this.makeObservableQuery.apply(this,arguments)}},{key:"makeObservableQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ensureStore();var r=t.as||this.queryIdGenerator.generateId(e);return this.ensureQueryExists(r,e),new N.default(r,e,this,t)}},{key:"mutate",value:(V=(0,d.default)(l.default.mark(function e(t){var r,n,a,o,i,u,c=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=c.length>1&&void 0!==c[1]?c[1]:{}).update,a=r.updateQueries,o=(0,s.default)(r,["update","updateQueries"]),this.ensureStore(),i=o.as||this.queryIdGenerator.generateId(t),this.dispatch((0,M.initMutation)(i,t)),e.prev=5,e.next=8,this.requestMutation(t,o);case 8:return u=e.sent,this.dispatch((0,M.receiveMutationResult)(i,u,{update:n,updateQueries:a},t)),e.abrupt("return",u);case 13:throw e.prev=13,e.t0=e.catch(5),this.dispatch((0,M.receiveMutationError)(i,e.t0,t)),e.t0;case 17:case"end":return e.stop()}},e,this,[[5,13]])})),function(e){return V.apply(this,arguments)})},{key:"requestQuery",value:($=(0,d.default)(l.default.mark(function e(t,r){var n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chain.request(t,r);case 2:return n=e.sent,e.next=5,this.persistVirtualDocuments(t,n.data);case 5:if(t.includes){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,this.fetchRelationships(n,this.getIncludesRelationships(t));case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return $.apply(this,arguments)})},{key:"persistVirtualDocuments",value:(X=(0,d.default)(l.default.mark(function e(t,r){var n,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=["io.cozy.files.shortcuts"].includes(t.doctype),"io.cozy.apps_registry"!==t.doctype){e.next=6;break}return e.next=5,this.persistVirtualDocument({_type:"io.cozy.apps_registry",_id:t.id,cozyPouchData:r},n);case 5:return e.abrupt("return",e.sent);case 6:if(Array.isArray(r)){e.next=11;break}return e.next=9,this.persistVirtualDocument(r,n);case 9:e.next=28;break;case 11:a=q(r),e.prev=12,a.s();case 14:if((o=a.n()).done){e.next=20;break}return i=o.value,e.next=18,this.persistVirtualDocument(i,n);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),a.e(e.t0);case 25:return e.prev=25,a.f(),e.finish(25);case 28:case"end":return e.stop()}},e,this,[[12,22,25,28]])})),function(e,t){return X.apply(this,arguments)})},{key:"persistVirtualDocument",value:(ee=(0,d.default)(l.default.mark(function e(t,r){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.cozyLocalOnly)){e.next=2;break}return e.abrupt("return");case 2:if(!(!(null!==(n=t.meta)&&void 0!==n&&n.rev)&&!t._rev||r)){e.next=5;break}return e.next=5,this.chain.persistCozyData(t);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return ee.apply(this,arguments)})},{key:"fetchRelationships",value:(et=(0,d.default)(l.default.mark(function e(t,r){var n,a,o,i,c,s,d,f,p,h,y,v,O,k,_,x,S,E,C,j=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=!Array.isArray(t.data))||0!==t.data.length){e.next=3;break}return e.abrupt("return",t);case 3:return a=n?[t.data]:t.data,o=new Map,i=[],c=[],a.forEach(function(e){return(0,w.default)(r,function(t,r){try{var n=t.type.query(e,j,t),a=e._id;o.set(n,[a,r]),n instanceof A.QueryDefinition?c.push(n):i.push(n)}catch(e){}})}),s=(0,T.default)(c),e.next=11,Promise.all(s.map(function(e){return j.chain.request(e)}));case 11:d=e.sent,f=(0,g.default)((0,m.default)(i),"_id"),p=(0,m.default)(d.map(function(e){return e.included||e.data})).concat(f).filter(Boolean),h={},y=q((0,b.default)(s,d));try{for(y.s();!(v=y.n()).done;)k=(O=(0,u.default)(v.value,2))[0],_=O[1],(x=o.get(k))&&(E=(S=(0,u.default)(x,2))[0],C=S[1],h[E]=h[E]||{},h[E][C]=(0,P.responseToRelationship)(_))}catch(e){y.e(e)}finally{y.f()}return e.abrupt("return",W(W({},(0,P.attachRelationships)(t,h)),{},{included:p}));case 18:case"end":return e.stop()}},e)})),function(e,t){return et.apply(this,arguments)})},{key:"requestMutation",value:(er=(0,d.default)(l.default.mark(function e(t,r){var n,a,o,u,c=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=8;break}return a=(n=(0,i.default)(t))[0],o=n.slice(1),e.next=4,this.requestMutation(a);case 4:return u=e.sent,e.next=7,Promise.all(o.map(function(e){var t="function"==typeof e?e(u):e;return c.requestMutation(t)}));case 7:return e.abrupt("return",u);case 8:return e.abrupt("return",this.chain.request(t,r));case 9:case"end":return e.stop()}},e,this)})),function(e,t){return er.apply(this,arguments)})},{key:"getIncludesRelationships",value:function(e){var t=this,r=e.includes,n=e.doctype;return r?(0,v.default)(r.map(function(e){return[e,t.schema.getRelationship(n,e)]})):{}}},{key:"hydrateDocuments",value:function(e,t){var r=this;if(!1===this.options.autoHydrate)return t;var n=this.schema.getDoctypeSchema(e);return n.relationships?t.map(function(e){return r.hydrateDocument(e,n)}):t}},{key:"hydrateDocument",value:function(e,t){if(!e)return e;var r=t||this.schema.getDoctypeSchema(e._type);return W(W({},e),this.hydrateRelationships(e,r.relationships))}},{key:"hydrateRelationships",value:function(e,t){var r=this.getRelationshipStoreAccessors();return(0,y.default)(t,function(t,n){return(0,E.create)(e,t,r)})}},{key:"makeNewDocument",value:function(e){return this.hydrateDocument({_type:e})}},{key:"generateRandomId",value:function(){return this.queryIdGenerator.generateRandomId()}},{key:"getAssociation",value:function(e,t){return(0,E.create)(e,this.schema.getRelationship(e._type,t),this.getRelationshipStoreAccessors())}},{key:"getRelationshipStoreAccessors",value:function(){var e=this;return this.storeAccesors||(this.storeAccessors={get:this.getDocumentFromState.bind(this),save:function(t,r){return e.save.call(e,t,r)},dispatch:this.dispatch.bind(this),query:function(t,r){return e.query.call(e,t,r)},mutate:function(t,r){return e.mutate.call(e,t,r)}}),this.storeAccessors}},{key:"getCollectionFromState",value:function(e){try{return(0,M.getCollectionFromState)(this.store.getState(),e)}catch(t){return z.default.warn("Could not getCollectionFromState",e,t.message),null}}},{key:"getDocumentFromState",value:function(e,t){try{return(0,M.getDocumentFromState)(this.store.getState(),e,t)}catch(r){return z.default.warn("Could not getDocumentFromState",e,t,r.message),null}}},{key:"getQueryFromState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.hydrated||!1,n=t.singleDocData||!1;try{var a=(0,M.getQueryFromState)(this.store.getState(),e),o=a.definition&&a.definition.doctype,i=a.definition&&a.definition.id;if(!r&&!n)return a;var u=r&&o?this.hydrateDocuments(o,a.data):a.data;return W(W({},a),{},{data:i&&n?u[0]:u})}catch(t){return z.default.warn("Could not get query from state. queryId: ".concat(e,", error: ").concat(t.message)),null}}},{key:"register",value:function(e){return this.getStackClient().setUri(e),this.startOAuthFlow(j.authFunction)}},{key:"isReactNative",value:function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product}},{key:"startOAuthFlow",value:(en=(0,d.default)(l.default.mark(function e(t){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getStackClient(),e.next=3,r.register();case 3:return e.next=5,this.certifyFlagship();case 5:return e.abrupt("return",this.authorize({openURLCallback:t}));case 6:case"end":return e.stop()}},e,this)})),function(e){return en.apply(this,arguments)})},{key:"certifyFlagship",value:(ea=(0,d.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getStackClient()).oauthOptions.shouldRequireFlagshipPermissions){e.next=4;break}return e.next=4,(0,G.certifyFlagship)(t.oauthOptions.certificationConfig,this);case 4:case"end":return e.stop()}},e,this)})),function(){return ea.apply(this,arguments)})},{key:"authorize",value:(eo=(0,d.default)(l.default.mark(function e(){var t,r,n,a,o,i,u,c,s,d,f,p,h,y,v,m=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===(r=(t=m.length>0&&void 0!==m[0]?m[0]:{}).openURLCallback)?j.authFunction:r,o=void 0===(a=t.sessionCode)?void 0:a,u=void 0===(i=t.pkceCodes)?{}:i,e.prev=1,c=u.codeVerifier,s=u.codeChallenge,f=(d=this.getStackClient()).generateStateCode(),p=d.getAuthCodeURL({stateCode:f,scopes:void 0,sessionCode:o,codeChallenge:s}),e.next=8,n(p);case 8:return h=e.sent,y=d.getAccessCodeFromURL(h,f),e.next=12,d.fetchAccessToken(y,void 0,void 0,c);case 12:return v=e.sent,d.setToken(v),e.abrupt("return",{token:v,infos:d.oauthOptions,client:d.oauthOptions});case 17:throw e.prev=17,e.t0=e.catch(1),e.t0.message===x.REGISTRATION_ABORT&&this.getStackClient().unregister(),e.t0;case 21:case"end":return e.stop()}},e,this,[[1,17]])})),function(){return eo.apply(this,arguments)})},{key:"renewAuthorization",value:function(){return this.authorize({openURLCallback:j.authFunction})}},{key:"setStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force;if(void 0===e)throw Error("Store is undefined");if(this.store&&!(void 0!==r&&r))throw Error("Client already has a store, it is forbidden to change store.\nsetStore must be called before any query is executed. Try to\ncall setStore earlier in your code, preferably just after the\ninstantiation of the client.");this.store=e}},{key:"ensureStore",value:function(){this.store||this.setStore((0,M.createStore)(this.performanceApi))}},{key:"checkForRevocation",value:(ei=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.stackClient instanceof _.OAuthClient)){e.next=4;break}return e.abrupt("return",this.stackClient.checkForRevocation());case 4:throw"checkForRevocation is only implemented for OAutClient";case 5:case"end":return e.stop()}},e,this)})),function(){return ei.apply(this,arguments)})},{key:"handleRevocationChange",value:function(e){e?(this.isRevoked=!0,this.emit("revoked")):(this.isRevoked=!1,this.emit("unrevoked"))}},{key:"handleTokenRefresh",value:function(e){this.emit("tokenRefreshed"),this.options.onTokenRefresh&&(Q("Using onTokenRefresh is deprecated, please use events like this: cozyClient.on('tokenRefreshed', token => console.log('Token has been refreshed', token)). https://git.io/fj3M3"),this.options.onTokenRefresh(e))}},{key:"createClient",value:function(){this.options.client&&z.default.warn("CozyClient: Using options.client is deprecated, please use options.stackClient.");var e=void 0===this.options.warningForCustomHandlers||this.options.warningForCustomHandlers,t=this.options.client||this.options.stackClient,r={onRevocationChange:this.handleRevocationChange,onTokenRefresh:this.handleTokenRefresh};if(t){this.stackClient=t,t.options||(t.options={});for(var n=0,a=Object.keys(r);n<a.length;n++){var o=a[n];t.options[o]?e&&z.default.warn("You passed a stackClient with its own ".concat(o,". It is not supported, unexpected things might happen.")):t.options[o]=r[o]}}else{var i=W(W({},this.options),r);this.stackClient=this.options.oauth?new _.OAuthClient(i):new _.default(i)}this.client=new Proxy(this.stackClient,Q("Using cozyClient.client is deprecated, please use cozyClient.stackClient."))}},{key:"getClient",value:function(){return z.default.warn("CozyClient: getClient() is deprecated, please use getStackClient()."),this.getStackClient()}},{key:"getStackClient",value:function(){return this.stackClient||this.createClient(),this.stackClient}},{key:"reducer",value:function(){return(0,M.default)(this.performanceApi)}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"getInstanceOptions",value:function(){return this.instanceOptions}},{key:"loadInstanceOptionsFromDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[role=application]",t=document.querySelector(e);if(!(t instanceof HTMLElement))throw Error("The selector that is passed does not return an HTMLElement");var r=t.dataset,n=r.cozy,a=(0,s.default)(r,["cozy"]);this.instanceOptions=W(W({},JSON.parse(void 0===n?"{}":n)),a),this.capabilities=this.instanceOptions.capabilities||null}},{key:"loadInstanceOptionsFromStack",value:(eu=(0,d.default)(l.default.mark(function e(){var t,r,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.query((0,A.Q)("io.cozy.settings").getById("io.cozy.settings.capabilities")),this.query((0,A.Q)("io.cozy.settings").getById("io.cozy.settings.instance"))]);case 2:r=(t=e.sent)[0].data,n=t[1].data,this.instanceOptions={capabilities:r,locale:n.locale,tracking:n.tracking},this.capabilities=this.instanceOptions.capabilities||null;case 7:case"end":return e.stop()}},e,this)})),function(){return eu.apply(this,arguments)})},{key:"setData",value:function(e){var t=this;this.ensureStore(),Object.entries(e).forEach(function(e){var r=(0,u.default)(e,2),n=(r[0],r[1]);t.dispatch((0,M.receiveQueryResult)(null,{data:n}))})}},{key:"setOnError",value:function(e){if(this.options&&this.options.onError)throw Error("On Error is already defined");this.options.onError=e}},{key:"toJSON",value:function(){return new L.CozyClient({uri:this.options.uri})}},{key:"setAppMetadata",value:function(e){this.appMetadata=W(W({},this.appMetadata),e)}},{key:"setLinks",value:(ec=(0,d.default)(l.default.mark(function e(t){var r,n,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.links=t||[new S.default({performanceApi:this.performanceApi})],this.registerClientOnLinks(),this.chain=(0,I.chain)(this.links),!this.isLogged){e.next=22;break}r=q(this.links),e.prev=5,r.s();case 7:if((n=r.n()).done){e.next=14;break}if(!(a=n.value).onLogin){e.next=12;break}return e.next=12,a.onLogin();case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}},e,this,[[5,16,19,22]])})),function(e){return ec.apply(this,arguments)})},{key:"getSettings",value:(es=(0,d.default)(l.default.mark(function e(t,r){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.getSettings)(this,t,r));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return es.apply(this,arguments)})},{key:"saveAfterFetchSettings",value:(el=(0,d.default)(l.default.mark(function e(t,r,n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.saveAfterFetchSettings)(this,t,r,n));case 1:case"end":return e.stop()}},e,this)})),function(e,t,r){return el.apply(this,arguments)})},{key:"resetQuery",value:(ed=(0,d.default)(l.default.mark(function e(t){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(0,M.isQueryExisting)(this.store.getState(),t)){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:return this.dispatch((0,M.resetQuery)(t)),r=this.getQueryFromState(t),e.next=7,this.query(r.definition,{as:t});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(e){return ed.apply(this,arguments)})}],[{key:"fromOldClient",value:function(e,t){return new ep(W({uri:e._url,token:e._token.token},t))}},{key:"fromOldOAuthClient",value:(ef=(0,d.default)(l.default.mark(function e(t,r){var n,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._oauth){e.next=12;break}return e.next=3,t.authorize();case 3:if(a={oauth:(n=e.sent).client,token:n.token,scope:n.token.scope},!(o=new ep(W(W({uri:t._url},a),r))).loginPromise){e.next=9;break}return e.next=9,o.loginPromise;case 9:return e.abrupt("return",o);case 12:throw Error("Cannot instantiate a new client: old client is not an OAuth client. CozyClient.fromOldClient might be more suitable.");case 13:case"end":return e.stop()}},e)})),function(e,t){return ef.apply(this,arguments)})},{key:"fromEnv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e||(void 0!==n?n.env:{}),a=r.COZY_URL,o=r.COZY_CREDENTIALS;if(!a||!o)throw Error("Env used to instantiate CozyClient must have COZY_URL and COZY_CREDENTIALS");try{t.oauth=JSON.parse(o)}catch(e){t.token=o.trim()}return t.uri=a.trim(),new ep(W({},t))}},{key:"fromDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[role=application]",r=document.querySelector(t);if(!(r instanceof HTMLElement))throw Error("Cannot find an HTMLElement corresponding to ".concat(t));if(!r||!r.dataset)throw Error("Found no data in ".concat(t," to instantiate cozyClient"));var n=r.dataset.cozy?JSON.parse(r.dataset.cozy):W({},r.dataset),a=n.domain,o=n.token;if(a&&o||(a=a||n.cozyDomain,o=o||n.cozyToken),!a||!o)throw Error("Found no data in ".concat(r.dataset," to instantiate cozyClient"));return new ep(W({uri:"".concat(window.location.protocol,"//").concat(a),token:o,capabilities:n.capabilities},e))}},{key:"registerHook",value:function(e,t,r){var n=ep.hooks[e]=ep.hooks[e]||{};n[t]=n[t]||[],n[t].push(r)}}]),ep}();$.hooks=$.hooks||{},$.fetchPolicies=D.default,$.version="57.1.0",k.default.mixin($),t.default=$},37130:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.chain=t.default=void 0;var a=n(r(75888)),o=n(r(11449)),i=n(r(10687)),u=n(r(89679)),c=n(r(59422)),s=function(){var e,t,r;function n(e,t){(0,u.default)(this,n),"function"==typeof e&&(this.request=e),"function"==typeof t&&(this.persistCozyData=t)}return(0,c.default)(n,[{key:"request",value:(e=(0,i.default)(o.default.mark(function e(t,r,n,a){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("request is not implemented");case 1:case"end":return e.stop()}},e)})),function(t,r,n,a){return e.apply(this,arguments)})},{key:"persistCozyData",value:(t=(0,i.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("persistCozyData is not implemented");case 1:case"end":return e.stop()}},e)})),function(e,r){return t.apply(this,arguments)})},{key:"reset",value:(r=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("reset is not implemented");case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})}]),n}();t.default=s;var l=function(e){return"function"==typeof e?new s(e):e},d=new s(function(e,t,r){if(r)return r;if(e.execute)return e.execute();throw Error("No link could handle operation ".concat(JSON.stringify(e)))},function(e,t){});t.chain=function(e){return[].concat((0,a.default)(e),[d]).map(l).reduce(f)};var f=function(e,t){return new s(function(r,n,a,o){return e.request(r,n,a,function(e,r,n){return t.request(e,r,n,o)})},function(r,n){return e.persistCozyData(r,function(e){return t.persistCozyData(e,n)})})}},31344:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(89679)),o=n(r(59422)),i=n(r(85660)),u=n(r(27361)),c=r(65972),s=Object.prototype.hasOwnProperty,l=function(){function e(t,r,n,o){var u=this;if((0,a.default)(this,e),(0,i.default)(this,"handleStoreChange",function(){var e=u.currentRawResult();!function(e,t){if(d(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!s.call(t,r[a])||!d(e[r[a]],t[r[a]]))return!1;return!0}(e,u.lastResult)&&(u.lastResult=e,u.notifyObservers())}),!t||!r||!n)throw Error("ObservableQuery takes 3 arguments: queryId, definition and client");this.queryId=t,this.definition=r,this.client=n,this.observers={},this.idCounter=1,this.lastResult=this.currentRawResult(),this.options=o}return(0,o.default)(e,[{key:"currentResult",value:function(){return this.client.getQueryFromState(this.queryId,{hydrated:(0,u.default)(this.options,"hydrated",!0),singleDocData:!0})}},{key:"fetch",value:function(){return this.client.query(this.definition,{as:this.queryId})}},{key:"fetchMore",value:function(){var e=this.currentRawResult();return e.bookmark?this.client.query(this.definition.offsetBookmark(e.bookmark),{as:this.queryId}):this.client.query(this.definition.offset(e.data.length),{as:this.queryId})}},{key:"currentRawResult",value:function(){return(0,c.getRawQueryFromState)(this.getStore().getState(),this.queryId)}},{key:"notifyObservers",value:function(){var e=this;Object.keys(this.observers).forEach(function(t){return e.observers[t]()})}},{key:"subscribeToStore",value:function(){if(this._unsubscribeStore)throw Error("ObservableQuery instance is already subscribed to store.");this._unsubscribeStore=this.getStore().subscribe(this.handleStoreChange)}},{key:"unsubscribeFromStore",value:function(){if(!this._unsubscribeStore)throw Error("ObservableQuery instance is not subscribed to store");this._unsubscribeStore()}},{key:"subscribe",value:function(e){var t=this,r=this.idCounter;return this.idCounter++,this.observers[r]=e,1===Object.keys(this.observers).length&&this.subscribeToStore(),function(){return t.unsubscribe(r)}}},{key:"unsubscribe",value:function(e){if(!this.observers[e])throw Error("Cannot unsubscribe unknown callbackId ".concat(e));delete this.observers[e],0===Object.keys(this.observers).length&&(this.unsubscribeFromStore(),this._unsubscribeStore=null)}},{key:"getStore",value:function(){return this.client.store}}]),e}();function d(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.default=l},63384:function(e,t,r){"use strict";var n=r(16452),a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(89679)),i=a(r(59422)),u=a(r(11806)),c=a(r(73035)),s=a(r(34771)),l=a(r(85660)),d=n(r(67294)),f=a(r(45697)),p=a(r(54028)),h=f.default.shape({subscribe:f.default.func.isRequired,dispatch:f.default.func.isRequired,getState:f.default.func.isRequired}),y=function(e){(0,u.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(n);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function n(e,t){var a;if((0,o.default)(this,n),a=r.call(this,e,t),!e.client)throw Error("CozyProvider was not passed a client instance.");return e.store&&e.client.setStore(e.store),a}return(0,i.default)(n,[{key:"getChildContext",value:function(){return{store:this.props.store||this.context.store||this.props.client.store,client:this.props.client}}},{key:"render",value:function(){return d.default.createElement(p.default.Provider,{value:this.getChildContext()},this.props.children)}}]),n}(d.Component);t.default=y,(0,l.default)(y,"propTypes",{store:h,client:f.default.object.isRequired,children:f.default.oneOfType([f.default.element,f.default.arrayOf(f.default.element)]).isRequired}),(0,l.default)(y,"childContextTypes",{store:f.default.object,client:f.default.object.isRequired}),(0,l.default)(y,"contextTypes",{store:f.default.object})},18597:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.computeChildrenArgs=t.getQueryAttributes=t.default=t.fetchQuery=void 0;var a=n(r(89679)),o=n(r(59422)),i=n(r(80595)),u=n(r(11806)),c=n(r(73035)),s=n(r(34771)),l=n(r(85660)),d=n(r(15572)),f=r(67294);n(r(18621));var p=n(r(45697));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,l.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}n(r(31344));var v={},m=function(e,t){return t.fetch?t.fetch():e.query(t.definition,{as:t.queryId})};t.fetchQuery=m;var g=function(e,t){var r=e.create.bind(e),n=e.save.bind(e),a=e.destroy.bind(e),o=e.getAssociation.bind(e),i="function"==typeof t.query?t.query(e,t):t.query,u=e.makeObservableQuery(i,t),c=u.fetchMore.bind(u),s=t.mutations,l=(0,d.default)(t,["mutations"]),f="function"==typeof s?s(e,u,l):s,p=u.fetch?u.fetch.bind(u):null;return{client:e,observableQuery:u,queryDefinition:i,createDocument:r,saveDocument:n,deleteDocument:a,getAssociation:o,fetchMore:c,fetch:p,mutations:f}};t.getQueryAttributes=g;var b=function(e){var t=e.observableQuery,r=e.fetchMore,n=e.fetch,a=e.createDocument,o=e.saveDocument,i=e.deleteDocument,u=e.getAssociation,c=e.mutations;return[y({fetchMore:r,fetch:n},t.currentResult()),y({createDocument:a,saveDocument:o,deleteDocument:i,getAssociation:u},c)]};t.computeChildrenArgs=b;var w=function(e){(0,u.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(n);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function n(e,t){(0,a.default)(this,n),o=r.call(this,e,t),(0,l.default)((0,i.default)(o),"onQueryChange",function(){o.recomputeChildrenArgs(),o.setState(v)});var o,u=t.client;if(!t.client)throw Error("Query should be used with client in context (use CozyProvider to set context)");return o.client=u,o.observableQuery=null,o.queryUnsubscribe=null,Object.assign((0,i.default)(o),g(u,e)),o.recomputeChildrenArgs(),o}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this.queryUnsubscribe=this.observableQuery.subscribe(this.onQueryChange),!1!==this.props.enabled&&this.executeQueryRespectingFetchPolicy()}},{key:"executeQueryRespectingFetchPolicy",value:function(){if(this.props.fetchPolicy){var e=this.client.getQueryFromState(this.props.as);this.props.fetchPolicy&&"function"==typeof this.props.fetchPolicy&&this.props.fetchPolicy(e)&&m(this.client,this.observableQuery)}else m(this.client,this.observableQuery)}},{key:"componentDidUpdate",value:function(e){!1===e.enabled&&!1!==this.props.enabled&&this.executeQueryRespectingFetchPolicy()}},{key:"componentWillUnmount",value:function(){this.queryUnsubscribe&&this.queryUnsubscribe()}},{key:"recomputeChildrenArgs",value:function(){this.childrenArgs=b(this)}},{key:"render",value:function(){return(0,this.props.children)(this.childrenArgs[0],this.childrenArgs[1])}}]),n}(f.Component);t.default=w,w.contextTypes={client:p.default.object,store:p.default.object};var O=p.default.object;w.propTypes={query:p.default.oneOfType([p.default.func,O]).isRequired,enabled:p.default.bool,as:p.default.string,children:p.default.func.isRequired,fetchPolicy:p.default.func},w.defaultProps={enabled:!0}},1153:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(10687)),i=r(67294),u=n(r(26726)),c=r(45330),s=r(14932),l=(0,i.memo)(function(e){var t=e.doctype,r=(0,u.default)();return(0,i.useEffect)(function(){var e,n=r.plugins.realtime;if(!n)throw Error("You must include the realtime plugin to use RealTimeQueries");var i={};"io.cozy.files"===t&&(i.enhanceDocFn=s.ensureFilePath);var u=function(e){(0,c.dispatchCreate)(r,t,e,i)},l=function(e){(0,c.dispatchUpdate)(r,t,e,i)},d=function(e){(0,c.dispatchDelete)(r,t,e,i)};return(e=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.subscribe("created",t,u);case 2:return e.next=4,n.subscribe("updated",t,l);case 4:return e.next=6,n.subscribe("deleted",t,d);case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})(),function(){n.unsubscribe("created",t,u),n.unsubscribe("updated",t,l),n.unsubscribe("deleted",t,d)}},[r,t]),null});t.default=l},42189:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(89679)),u=n(r(59422)),c=n(r(85660)),s=n(r(24350)),l=n(r(66604)),d=n(r(82492)),f=n(r(84238)),p=n(r(71843)),h=r(25367);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,c.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=function(e){var t=(0,l.default)(e.relationships||{},function(e,t){return v(v({},e),{},{name:t,type:(0,h.resolveClass)(e.doctype,e.type)})});return v(v({},e),{},{relationships:(0,f.default)(t)>0?(0,s.default)(t,"name"):null})},g=function(e,t){if(!e)throw Error(t)},b=function(e,t){var r=(0,p.default)(e,t,function(e){return e.name});g(0===r.length,"Duplicated names in schemas being added: ".concat(r.map(function(e){return e.name}).join(", ")));var n=(0,p.default)(e,t,function(e){return e.doctype});g(0===n.length,"Duplicated doctypes in schemas being added: ".concat(n.map(function(e){return e.name}).join(", ")))},w=function(){var e,t;function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,i.default)(this,r),this.byDoctype={},this.add(e),this.client=t}return(0,u.default)(r,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.default)(e,function(e,t){return v({name:t},m(e))});b(Object.values(t),Object.values(this.byDoctype)),(0,d.default)(this.byDoctype,(0,s.default)(t,function(e){return e.doctype}))}},{key:"getDoctypeSchema",value:function(e){var t=this.byDoctype[e];return t||(t=m({name:e,doctype:e}),this.byDoctype[e]=t),t}},{key:"getRelationship",value:function(e,t){if(!e)throw TypeError("Invalid doctype ".concat(e));var r=this.getDoctypeSchema(e);if(!r)throw Error("Cannot find doctype ".concat(e," in schema"));if(!r.relationships)throw Error("Schema for doctype ".concat(e," has no relationships"));return r.relationships[t]}},{key:"validate",value:(e=(0,o.default)(a.default.mark(function e(t){var r,n,o,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},n=this.byDoctype[t._type]){e.next=4;break}return e.abrupt("return",!0);case 4:if(n.attributes){e.next=6;break}return e.abrupt("return",!0);case 6:e.t0=a.default.keys(n.attributes);case 7:if((e.t1=e.t0()).done){e.next=15;break}return o=e.t1.value,e.next=11,this.validateAttribute(t,o,n.attributes[o]);case 11:!0!==(i=e.sent)&&(r[o]=i),e.next=7;break;case 15:if(0!==Object.keys(r).length){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"validateAttribute",value:(t=(0,o.default)(a.default.mark(function e(t,r,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.unique&&this.client)){e.next=6;break}return e.next=3,this.client.collection(t._type).checkUniquenessOf(r,t[r]);case 3:if(!0===e.sent){e.next=6;break}return e.abrupt("return","must be unique");case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)})),function(e,r,n){return t.apply(this,arguments)})}]),r}();t.default=w},97619:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.transformBulkDocsResponse=void 0;var a=n(r(15572)),o=n(r(11449)),i=n(r(10687)),u=n(r(89679)),c=n(r(59422)),s=n(r(11806)),l=n(r(73035)),d=n(r(34771)),f=n(r(85660)),p=n(r(35905)),h=r(71450),y=n(r(37130)),v=r(87941),m=r(29822),g=n(r(22853)),b=r(88930),w=r(12196);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){(0,f.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _=function(e){var t=e.selector,r=e.partialFilter,n=e.sort,a=e.fields;return!!t||!!r||!!n||!!a},x=function(e,t){var r=(0,p.default)(e,t,function(e,t){return e.ok?k(k({},t),{},{_id:e.id,_rev:e.rev}):t});if(e.find(function(e){return!e.ok}))throw new m.BulkEditError(e,r);return{data:r}};t.transformBulkDocsResponse=x;var S=function(e){(0,s.default)(m,e);var t,r,n,f,p,y=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(m);return e=t?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function m(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.client,n=t.stackClient,a=t.platform,o=t.performanceApi;return(0,u.default)(this,m),e=y.call(this),r&&g.default.warn("Using options.client is deprecated, prefer options.stackClient"),e.stackClient=n||r,e.isOnline=null==a?void 0:a.isOnline,e.performanceApi=o||w.defaultPerformanceApi,e}return(0,c.default)(m,[{key:"registerClient",value:function(e){this.stackClient=e.stackClient||e.client}},{key:"reset",value:(r=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.stackClient=null;case 1:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"request",value:(n=(0,i.default)(o.default.mark(function e(t,r,n,a){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(null!=r&&r.forceStack)&&this.isOnline,!e.t0){e.next=5;break}return e.next=4,this.isOnline();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",a(t,r));case 7:if(e.prev=7,!t.mutationType){e.next=12;break}return e.next=11,this.executeMutation(t,r,n,a);case 11:case 14:return e.abrupt("return",e.sent);case 12:return e.next=14,this.executeQuery(t);case 17:if(e.prev=17,e.t1=e.catch(7),!(!(null!=r&&r.forceStack)&&(0,b.isReactNativeOfflineError)(e.t1))){e.next=21;break}return e.abrupt("return",a(t,r));case 21:throw e.t1;case 22:case"end":return e.stop()}},e,this,[[7,17]])})),function(e,t,r,a){return n.apply(this,arguments)})},{key:"persistCozyData",value:(f=(0,i.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r(t));case 1:case"end":return e.stop()}},e)})),function(e,t){return f.apply(this,arguments)})},{key:"executeQuery",value:function(e){var t=e.doctype,r=e.selector,n=e.id,o=e.ids,i=e.referenced,u=(0,a.default)(e,["doctype","selector","id","ids","referenced"]);if(!t)throw g.default.warn("Bad query",e),Error("No doctype found in a query definition");var c=this.stackClient.collection(t);return n?c.get(n,e):o?c.getAll(o):i?c.findReferencedBy(i,u):_(e)?c.find(r,u):c.all(u)}},{key:"executeMutation",value:(p=(0,i.default)(o.default.mark(function e(t,r,n,i){var u,c,s,l,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u=t.mutationType,c=t.document,s=t.documents,l=(0,a.default)(t,["mutationType","document","documents"]),e.t0=u,e.next=e.t0===h.MutationTypes.CREATE_DOCUMENT?4:e.t0===h.MutationTypes.UPDATE_DOCUMENTS?5:e.t0===h.MutationTypes.UPDATE_DOCUMENT?9:e.t0===h.MutationTypes.DELETE_DOCUMENT?10:e.t0===h.MutationTypes.ADD_REFERENCES_TO?11:e.t0===h.MutationTypes.REMOVE_REFERENCES_TO?12:e.t0===h.MutationTypes.ADD_REFERENCED_BY?13:e.t0===h.MutationTypes.REMOVE_REFERENCED_BY?18:e.t0===h.MutationTypes.UPLOAD_FILE?23:24;break;case 4:return e.abrupt("return",this.stackClient.collection(c._type).create(c));case 5:return e.next=7,this.stackClient.collection(s[0]._type).updateAll(s);case 7:return d=e.sent,e.abrupt("return",x(d,s));case 9:return e.abrupt("return",this.stackClient.collection(c._type).update(c));case 10:return e.abrupt("return",this.stackClient.collection(c._type).destroy(c));case 11:return e.abrupt("return",this.stackClient.collection(l.referencedDocuments[0]._type).addReferencesTo(c,l.referencedDocuments));case 12:return e.abrupt("return",this.stackClient.collection(l.referencedDocuments[0]._type).removeReferencesTo(c,l.referencedDocuments));case 13:if(c._type!==v.DOCTYPE_FILES){e.next=17;break}return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).addReferencedBy(c,l.referencedDocuments));case 17:case 22:throw Error("The document type should be io.cozy.files");case 18:if(c._type!==v.DOCTYPE_FILES){e.next=22;break}return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).removeReferencedBy(c,l.referencedDocuments));case 23:return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).upload(l.file,l.dirPath));case 24:return e.abrupt("return",i(t,r,n));case 25:case"end":return e.stop()}},e,this)})),function(e,t,r,n){return p.apply(this,arguments)})}]),m}(y.default);t.default=S},62946:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(89679)),u=n(r(59422)),c=n(r(11806)),s=n(r(73035)),l=n(r(34771)),d=function(e){(0,c.default)(p,e);var t,r,n,d,f=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(p);return e=t?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.webviewIntent;return(0,i.default)(this,p),(e=f.call(this)).webviewIntent=r,e}return(0,u.default)(p,[{key:"registerClient",value:function(e){}},{key:"reset",value:(r=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"request",value:(n=(0,o.default)(a.default.mark(function e(t,r,n,o){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webviewIntent.call("flagshipLinkRequest",t,r));case 1:case"end":return e.stop()}},e,this)})),function(e,t,r,a){return n.apply(this,arguments)})},{key:"persistCozyData",value:(d=(0,o.default)(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}},e)})),function(e,t){return d.apply(this,arguments)})}]),p}(n(r(37130)).default);t.default=d},28187:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(89679)),o=n(r(59422));r(71450);var i=function(){function e(t,r,n,o){(0,a.default)(this,e);var i=o.dispatch,u=o.get,c=o.query,s=o.mutate,l=o.save;this.target=t,this.name=r,this.doctype=n,this.get=u,this.query=c,this.mutate=s,this.save=l,this.dispatch=i}return(0,o.default)(e,[{key:"raw",get:function(){throw Error("A relationship must define its raw getter")}},{key:"data",get:function(){throw Error("A relationship must define its data getter")}}],[{key:"query",value:function(e,t,r){throw Error("A custom relationship must define its query() function")}}]),e}();t.default=i},13965:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.updateRelationship=t.updateHasManyItem=t.removeHasManyItem=t.setHasManyItem=t.getHasManyItems=t.getHasManyItem=void 0;var a=n(r(89679)),o=n(r(59422)),i=n(r(80595)),u=n(r(11806)),c=n(r(73035)),s=n(r(34771)),l=n(r(85660)),d=n(r(75888)),f=n(r(27361)),p=n(r(82492)),h=r(71450),y=r(65972),v=n(r(28187)),m=n(r(22853));function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,l.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var w=function(e,t,r){var n=-1===t?e.length:t;return[].concat((0,d.default)(e.slice(0,n)),[r],(0,d.default)(e.slice(n+1)))},O=function(e){(0,u.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(n);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function n(){var e;(0,a.default)(this,n);for(var t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];return e=r.call.apply(r,[this].concat(o)),(0,l.default)((0,i.default)(e),"updateRelationshipData",function(t){return function(r,n){var a=(0,y.getDocumentFromState)(n(),e.target._type,e.target._id);r((0,y.receiveQueryResult)(null,{data:b(b({},a),{},{relationships:b(b({},a.relationships),{},(0,l.default)({},e.name,t(a.relationships[e.name])))})}))}}),e}return(0,o.default)(n,[{key:"fetchMore",value:function(){throw"Not implemented"}},{key:"exists",value:function(e){return this.existsById(e._id)}},{key:"containsById",value:function(e){return void 0!==this.getRelationship().data.find(function(t){return e===t._id})}},{key:"existsById",value:function(e){return!!(this.containsById(e)&&this.get(this.doctype,e))}},{key:"add",value:function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){return e._id});return this.addById(t)}},{key:"remove",value:function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){return e._id});return this.removeById(t)}},{key:"addTargetRelationships",value:function(e){var t,r=this;this.target.relationships||(this.target.relationships={}),this.target.relationships[this.name]||(this.target.relationships[this.name]={data:[]});var n=(Array.isArray(e)?e:[e]).filter(function(e){return!r.existsById(e)}).map(function(e){return{_id:e,_type:r.doctype}});(t=this.target.relationships[this.name].data).push.apply(t,(0,d.default)(n)),this.updateMetaCount()}},{key:"addById",value:function(e){return this.addTargetRelationships(e),this.save(this.target)}},{key:"removeTargetRelationships",value:function(e){var t=Array.isArray(e)?e:[e];this.target.relationships[this.name].data=this.target.relationships[this.name].data.filter(function(e){var r=e._id;return!t.includes(r)}),this.updateMetaCount()}},{key:"removeById",value:function(e){return this.removeTargetRelationships(e),this.save(this.target)}},{key:"updateMetaCount",value:function(){void 0!==(0,f.default)(this.target.relationships[this.name],"meta.count")&&(this.target.relationships[this.name].meta=b(b({},this.target.relationships[this.name].meta),{},{count:this.target.relationships[this.name].data.length}))}},{key:"getRelationship",value:function(){var e=this.target[this.name],t=(0,f.default)(this.target,"relationships.".concat(this.name));return t||(e&&e.length&&m.default.warn("You're trying to access data on a relationship that appear to not be loaded yet. You may want to use 'include()' on your query"),{data:[],next:!0,meta:{count:0}})}},{key:"updateTargetRelationship",value:function(e,t){var r=e.readDocument(this.target._type,this.target._id);e.writeDocument(this.updateRelationship(r,t))}},{key:"updateRelationship",value:function(e,t){return n.updateRelationship(e,this.name,t)}},{key:"dehydrate",value:function(e){return b(b({},e),{},{relationships:b(b({},e.relationships),{},(0,l.default)({},this.name,{data:this.raw}))})}},{key:"raw",get:function(){return this.getRelationship().data}},{key:"data",get:function(){var e=this;return this.getRelationship().data.map(function(t){var r=t._id,n=t._type;return e.get(n,r)}).filter(Boolean)}},{key:"hasMore",get:function(){return this.getRelationship().next}},{key:"count",get:function(){var e=this.getRelationship();return e.meta?e.meta.count:e.data.length}}],[{key:"query",value:function(e,t,r){var n=(0,f.default)(e,"relationships.".concat(r.name,".data"),[]).map(function(e){return e._id});return new h.QueryDefinition({doctype:r.doctype,ids:n})}}]),n}(v.default),k=O.getHasManyItem=function(e,t,r){return(0,f.default)(e,"relationships.".concat(t,".data"),[]).find(function(e){return e._id==r})};t.getHasManyItem=k;var _=O.getHasManyItems=function(e,t){return(0,f.default)(e,"relationships.".concat(t,".data"),[])};t.getHasManyItems=_;var x=O.setHasManyItem=function(e,t,r,n){var a=O.getHasManyItems(e,t),o=a.findIndex(function(e){return e._id===r}),i=(0,p.default)({},a[o],n),u=w(a,o,i);return O.updateRelationship(e,t,function(e){return(0,p.default)({},e,{data:u})})};t.setHasManyItem=x;var S=O.removeHasManyItem=function(e,t,r){var n=O.getHasManyItems(e,t).filter(function(e){return e._id!==r});return O.updateRelationship(e,t,function(){return{data:n}})};t.removeHasManyItem=S;var E=O.updateHasManyItem=function(e,t,r,n){var a=n(O.getHasManyItem(e,t,r));return O.setHasManyItem(e,t,r,a)};t.updateHasManyItem=E;var P=O.updateRelationship=function(e,t,r){return b(b({},e),{},{relationships:b(b({},e.relationships),{},(0,l.default)({},t,b(b({},e.relationships?e.relationships[t]:{}),r(e.relationships?e.relationships[t]:{}))))})};t.updateRelationship=P,t.default=O},32349:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getFileDatetime=void 0;var a=n(r(11449)),o=n(r(75888)),i=n(r(85660)),u=n(r(10687)),c=n(r(89679)),s=n(r(59422)),l=n(r(39438)),d=n(r(11806)),f=n(r(73035)),p=n(r(34771)),h=n(r(61874)),y=n(r(27361)),v=n(r(57557)),m=n(r(44908)),g=r(71450),b=r(65972),w=r(87941);n(r(28187));var O=n(r(13965));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=function(e,t){var r=(0,h.default)(e,3),n=r[0],a=r[1],o=r[2];return[o?[n,a,o]:[n,a],t]},S=function(e){var t;return(null===(t=e.metadata)||void 0===t?void 0:t.datetime)||e.created_at};t.getFileDatetime=S;var E=function(e){(0,d.default)(O,e);var t,r,n,i,h=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,p.default)(O);return e=t?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,e)});function O(){return(0,c.default)(this,O),h.apply(this,arguments)}return(0,s.default)(O,[{key:"fetchMore",value:(r=(0,u.default)(a.default.mark(function e(){var t,r,n,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new g.QueryDefinition({doctype:w.DOCTYPE_FILES}),n=(r=this.getRelationship().data)[r.length-1],e.next=5,this.dispatch(function(){var e=(0,u.default)(a.default.mark(function e(u,c){var s,l,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=S((0,b.getDocumentFromState)(c(),n._type,n._id)),l=x([i.target._type,i.target._id,s],r[r.length-1]._id),e.next=5,i.query(t.referencedBy(i.target).offsetCursor(l));case 5:return(d=e.sent).data.shift(),e.next=9,i.dispatch(i.updateRelationshipData(function(e){return _(_({},e),{},{data:[].concat((0,o.default)(e.data),(0,o.default)(d.data)),next:d.next})}));case 9:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"addById",value:(n=(0,u.default)(a.default.mark(function e(t){var r,n,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.isArray(t)?t:[t],this.addTargetRelationships(r),n=r.map(function(e){return{_id:e,_type:o.doctype}}),e.next=5,this.mutate(this.addReferences(n));case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"removeById",value:(i=(0,u.default)(a.default.mark(function e(t){var r,n,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.isArray(t)?t:[t],this.removeTargetRelationships(t),n=r.map(function(e){return{_id:e,_type:o.doctype}}),e.next=5,this.mutate(this.removeReferences(n));case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"addReferences",value:function(e){if(this.target._type===w.DOCTYPE_FILES)return g.Mutations.addReferencedBy(this.target,e);if(e[0]._type===w.DOCTYPE_FILES)return g.Mutations.addReferencesTo(this.target,e);throw Error("Either the document or the references should be io.cozy.files")}},{key:"removeReferences",value:function(e){if(this.target._type===w.DOCTYPE_FILES)return g.Mutations.removeReferencedBy(this.target,e);if(e[0]._type===w.DOCTYPE_FILES)return g.Mutations.removeReferencesTo(this.target,e);throw Error("Either the document or the references should be io.cozy.files")}},{key:"dehydrate",value:function(e){return(0,v.default)(e,[this.name,"relationships.".concat(this.name)])}},{key:"data",get:function(){var e=this;return this.target._type===w.DOCTYPE_FILES?(0,y.default)(this.target,"referenced_by",[]).map(function(t){var r=t.id,n=t.type;return e.get(n,r)}).filter(Boolean):(0,l.default)((0,p.default)(O.prototype),"data",this)}}],[{key:"query",value:function(e,t,r){if(e._type===w.DOCTYPE_FILES){var n=(0,y.default)(e,"relationships.referenced_by.data",[]),a=(0,m.default)(n.filter(function(e){return e.type===r.doctype}).map(function(e){return e.id}));return a.length>0?(0,g.Q)(r.doctype).getByIds(a):null}var o=x([e._type,e._id],"");return(0,g.Q)(r.doctype).referencedBy(e).offsetCursor(o)}}]),O}(O.default);t.default=E},23433:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(85660)),o=n(r(89679)),i=n(r(59422)),u=n(r(11806)),c=n(r(73035)),s=n(r(34771)),l=r(71450);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p=function(e){(0,u.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(n);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function n(){return(0,o.default)(this,n),r.apply(this,arguments)}return(0,i.default)(n,[{key:"addById",value:function(e){this.getRelationship().push(e)}},{key:"removeById",value:function(e){var t=this.getRelationship(),r=t.indexOf(e);-1!==r&&t.splice(r,1)}},{key:"existsById",value:function(e){return -1!==this.getRelationship().indexOf(e)}},{key:"getRelationship",value:function(){return this.target[this.name]=this.target[this.name]||[],this.target[this.name]}},{key:"dehydrate",value:function(e){return f(f({},e),{},(0,a.default)({},this.name,this.raw||[]))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){var e=this,t=this.doctype;return(this.raw||[]).map(function(r){return e.get(t,r)})}}],[{key:"query",value:function(e,t,r){var n=e[r.name];return n&&n>0?(0,l.Q)(r.doctype).getByIds(n):null}}]),n}(n(r(28187)).default);t.default=p},1715:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(89679)),o=n(r(59422)),i=n(r(39438)),u=n(r(11806)),c=n(r(73035)),s=n(r(34771)),l=n(r(13965)),d=r(71450),f=function(e){(0,u.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(n);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function n(){return(0,a.default)(this,n),r.apply(this,arguments)}return(0,o.default)(n,[{key:"data",get:function(){var e=this;return(0,i.default)((0,s.default)(n.prototype),"data",this).filter(function(t){return t.slug===e.target.slug})}}],[{key:"query",value:function(e,t){return(0,d.Q)("io.cozy.triggers").where({worker:"konnector"})}}]),n}(l.default);t.default=f},95760:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(85660)),o=n(r(89679)),i=n(r(59422)),u=n(r(11806)),c=n(r(73035)),s=n(r(34771)),l=n(r(27361)),d=n(r(36968)),f=r(71450),p=n(r(28187)),h=n(r(22853));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=function(e){(0,u.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(n);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function n(){return(0,o.default)(this,n),r.apply(this,arguments)}return(0,i.default)(n,[{key:"add",value:function(e){return this.setRelationship(e),this.save(this.target)}},{key:"remove",value:function(){return this.setRelationship(void 0),this.save(this.target)}},{key:"setRelationship",value:function(e){if(e&&e._type!==this.doctype)throw Error("Tried to associate a ".concat(e._type," document to a HasOne relationship on ").concat(this.doctype," document"));var t="relationships[".concat(this.name,"].data");e?(0,d.default)(this.target,t,{_id:e._id,_type:e._type}):(0,d.default)(this.target,t,void 0)}},{key:"set",value:function(e){h.default.warn("set is deprecated for has-one relationships. Use `add` instead."),this.setRelationship(e)}},{key:"unset",value:function(){h.default.warn("unset is deprecated for has-one relationships. Use `remove` instead."),this.setRelationship(void 0)}},{key:"dehydrate",value:function(e){return this.raw?v(v({},e),{},{relationships:v(v({},e.relationships),{},(0,a.default)({},this.name,{data:this.raw}))}):e}},{key:"raw",get:function(){return(0,l.default)(this.target,"relationships[".concat(this.name,"].data"),null)}},{key:"data",get:function(){return this.raw?this.get(this.doctype,this.raw._id):null}}],[{key:"query",value:function(e,t,r){var n=(0,l.default)(e,"relationships.".concat(r.name,".data"),{});return n&&n._id?(0,f.Q)(r.doctype).getById(n._id):null}}]),n}(p.default);t.default=m},13846:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.BelongsToInPlace=t.default=void 0;var a=n(r(85660)),o=n(r(89679)),i=n(r(59422)),u=n(r(11806)),c=n(r(73035)),s=n(r(34771)),l=n(r(28187)),d=r(71450);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=function(e){(0,u.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(n);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function n(){return(0,o.default)(this,n),r.apply(this,arguments)}return(0,i.default)(n,[{key:"dehydrate",value:function(e){return p(p({},e),{},(0,a.default)({},this.name,this.raw||void 0))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){return this.get(this.doctype,this.raw)}}],[{key:"query",value:function(e,t,r){var n=e[r.name];return t.getDocumentFromState(r.doctype,n)||(0,d.Q)(r.doctype).getById(n)}}]),n}(l.default);t.default=h,t.BelongsToInPlace=h},11282:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getReferencedById=t.getReferencedBy=t.isReferencedById=t.isReferencedBy=t.create=t.resolveClass=t.attachRelationships=t.responseToRelationship=t.pickTypeAndId=void 0;var a=n(r(85660)),o=n(r(78718)),i=n(r(35937)),u=n(r(28187)),c=n(r(95760)),s=n(r(13846)),l=n(r(13965)),d=n(r(23433)),f=n(r(32349));function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=function(e){return(0,o.default)(e,"_type","_id")};t.pickTypeAndId=y,t.responseToRelationship=function(e){var t;return(0,i.default)({data:Array.isArray(t=e.data)?t.map(y):y(t),meta:e.meta,next:e.next,skip:e.skip,bookmark:e.bookmark})};var v=function(e,t){return h(h({},e),{},{relationships:h(h({},e.relationships),t)})};t.attachRelationships=function(e,t){if(Array.isArray(e.data))return h(h({},e),{},{data:e.data.map(function(e){return v(e,t[e._id])})});var r=e.data;return h(h({},e),{},{data:v(r,t[r._id])})};var m={"io.cozy.files:has-many":f.default,"has-many":l.default,"belongs-to-in-place":s.default,"has-one":c.default,"has-one-in-place":s.default,"has-many-in-place":d.default};t.resolveClass=function(e,t){if(void 0===t)throw Error("Undefined type for "+e);if("string"!=typeof t)return t;var r=m["".concat(e,":").concat(t)]||m[t];if(r)return r;throw Error("Unknown association '".concat(t,"'"))},t.create=function(e,t,r){var n=t.name,a=t.type,o=t.doctype;if(e[n]instanceof u.default)throw Error("Association ".concat(n," already exists"));return new a(e,n,o,r)},t.isReferencedBy=function(e,t){var r,n;return((null==e?void 0:null===(r=e.relationships)||void 0===r?void 0:null===(n=r.referenced_by)||void 0===n?void 0:n.data)||(null==e?void 0:e.referenced_by)||[]).some(function(e){return e.type===t})},t.isReferencedById=function(e,t,r){var n,a;return((null==e?void 0:null===(n=e.relationships)||void 0===n?void 0:null===(a=n.referenced_by)||void 0===a?void 0:a.data)||(null==e?void 0:e.referenced_by)||[]).some(function(e){return e.type===t&&e.id===r})},t.getReferencedBy=function(e,t){var r,n;return((null==e?void 0:null===(r=e.relationships)||void 0===r?void 0:null===(n=r.referenced_by)||void 0===n?void 0:n.data)||(null==e?void 0:e.referenced_by)||[]).filter(function(e){return e.type===t})},t.getReferencedById=function(e,t,r){var n,a;return((null==e?void 0:null===(n=e.relationships)||void 0===n?void 0:null===(a=n.referenced_by)||void 0===a?void 0:a.data)||(null==e?void 0:e.referenced_by)||[]).filter(function(e){return e.type===t&&e.id===r})}},25367:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"HasManyFiles",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"resolveClass",{enumerable:!0,get:function(){return d.resolveClass}}),Object.defineProperty(t,"create",{enumerable:!0,get:function(){return d.create}}),Object.defineProperty(t,"isReferencedBy",{enumerable:!0,get:function(){return d.isReferencedBy}}),Object.defineProperty(t,"isReferencedById",{enumerable:!0,get:function(){return d.isReferencedById}}),Object.defineProperty(t,"getReferencedBy",{enumerable:!0,get:function(){return d.getReferencedBy}}),Object.defineProperty(t,"getReferencedById",{enumerable:!0,get:function(){return d.getReferencedById}});var a=n(r(32349)),o=n(r(13965)),i=n(r(95760)),u=n(r(13846)),c=n(r(23433)),s=n(r(1715)),l=n(r(28187)),d=r(11282)},18118:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authFunction=void 0,t.authFunction=function(){throw"Not implemented"}},87941:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOCTYPE_FILES_ENCRYPTION=t.DOCTYPE_PERMISSIONS=t.DOCTYPE_FILES=t.REGISTRATION_ABORT=void 0,t.REGISTRATION_ABORT="REGISTRATION_ABORT",t.DOCTYPE_FILES="io.cozy.files",t.DOCTYPE_PERMISSIONS="io.cozy.permissions",t.DOCTYPE_FILES_ENCRYPTION="io.cozy.files.encryption"},20538:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_TYPE=void 0,t.APP_TYPE={KONNECTOR:"konnector",WEBAPP:"webapp"}},54028:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.clientContext=void 0;var a=r(67294);n(r(18621));var o=(0,a.createContext)({client:null,store:null});t.clientContext=o,t.default=o},29822:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.BulkEditError=void 0;var a=n(r(85660)),o=n(r(89679)),i=n(r(59422)),u=n(r(11806)),c=n(r(73035)),s=n(r(34771)),l=n(r(4003)),d=n(r(35905));function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=function(e){(0,u.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(n);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function n(e,t){var a;return(0,o.default)(this,n),(a=r.call(this,"Error while bulk saving")).name="BulkEditError",a.results=(0,d.default)(e,t,function(e,t){return p(p({},e),{},{doc:t})}),a}return(0,i.default)(n,[{key:"getUpdatedDocuments",value:function(){return this.results.filter(function(e){return e.ok}).map(function(e){return e.doc})}},{key:"getErrors",value:function(){return this.results.filter(function(e){return!e.ok})}}]),n}((0,l.default)(Error));t.BulkEditError=h},23864:function(e,t,r){"use strict";var n,a,o,i=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.certifyFlagship=void 0;var u=i(r(11449)),c=i(r(10687));i(r(18621));var s=r(79166),l=(n=(0,c.default)(u.default.mark(function e(t){var r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.getStackClient(),e.next=4,r.fetchJSON("POST","/auth/clients/".concat(r.oauthOptions.clientID,"/challenge"),null,{headers:{Authorization:r.registrationAccessTokenToAuthHeader()}});case 4:return n=e.sent,e.abrupt("return",n.nonce);case 8:throw e.prev=8,e.t0=e.catch(0),Error("[FLAGSHIP_CERTIFICATION] Something went wrong while requesting a challenge from CozyStack:\n"+e.t0.message);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return n.apply(this,arguments)}),d=(a=(0,c.default)(u.default.mark(function e(t,r,n){var a,o,i,c,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.platform,o=t.attestation,i=t.keyId,c=t.issuer,s=n.getStackClient(),e.next=5,s.fetchJSON("POST","/auth/clients/".concat(s.oauthOptions.clientID,"/attestation"),{platform:a,attestation:o,challenge:r,keyId:i,issuer:c},{headers:{Authorization:s.registrationAccessTokenToAuthHeader()}});case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),Error("[FLAGSHIP_CERTIFICATION] Something went wrong while giving attestation to CozyStack:\n"+e.t0.message);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,r){return a.apply(this,arguments)}),f=(o=(0,c.default)(u.default.mark(function e(t,r){var n,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("[FLAGSHIP_CERTIFICATION] Certification configuration is not set");case 2:return e.prev=2,e.next=5,l(r);case 5:return n=e.sent,e.next=8,(0,s.getAppAttestationFromStore)(n,t);case 8:return a=e.sent,e.next=11,d(a,n,r);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn('[FLAGSHIP_CERTIFICATION] Automatic certification for URI "'.concat(r.stackClient.uri,'" failed. This is expected on dev environments and non-official phones. Cozy-stack will continue with manual certification through 2FA')),console.warn(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[2,13]])})),function(e,t){return o.apply(this,arguments)});t.certifyFlagship=f},79166:function(e,t,r){"use strict";var n,a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getAppAttestationFromStore=void 0;var o=a(r(11449)),i=(n=(0,a(r(10687)).default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("getAppAttestationFromStore can only be called from a React Native container");case 1:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});t.getAppAttestationFromStore=i},78133:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.dehydrate=void 0;var a=n(r(61874)),o=r(25367);t.dehydrate=function(e){return Object.entries(e).reduce(function(e,t){var r=(0,a.default)(t,2),n=r[0],i=r[1],u=e;if(i instanceof o.Association){if(i.dehydrate)u=i.dehydrate(u);else throw Error("Association on key ".concat(n," should have a dehydrate method"))}else u[n]=i;return u},{})}},72004:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"deconstructCozyWebLinkWithSlug",{enumerable:!0,get:function(){return n.deconstructCozyWebLinkWithSlug}}),Object.defineProperty(t,"deconstructRedirectLink",{enumerable:!0,get:function(){return n.deconstructRedirectLink}}),Object.defineProperty(t,"generateWebLink",{enumerable:!0,get:function(){return n.generateWebLink}}),Object.defineProperty(t,"ensureFirstSlash",{enumerable:!0,get:function(){return n.ensureFirstSlash}}),Object.defineProperty(t,"rootCozyUrl",{enumerable:!0,get:function(){return n.rootCozyUrl}}),Object.defineProperty(t,"InvalidRedirectLinkError",{enumerable:!0,get:function(){return n.InvalidRedirectLinkError}}),Object.defineProperty(t,"InvalidCozyUrlError",{enumerable:!0,get:function(){return n.InvalidCozyUrlError}}),Object.defineProperty(t,"InvalidProtocolError",{enumerable:!0,get:function(){return n.InvalidProtocolError}}),Object.defineProperty(t,"BlockedCozyError",{enumerable:!0,get:function(){return n.BlockedCozyError}}),Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return a.dehydrate}}),Object.defineProperty(t,"editSettings",{enumerable:!0,get:function(){return o.editSettings}}),Object.defineProperty(t,"getQuery",{enumerable:!0,get:function(){return o.getQuery}}),Object.defineProperty(t,"getSettings",{enumerable:!0,get:function(){return o.getSettings}}),Object.defineProperty(t,"normalizeSettings",{enumerable:!0,get:function(){return o.normalizeSettings}}),Object.defineProperty(t,"saveAfterFetchSettings",{enumerable:!0,get:function(){return o.saveAfterFetchSettings}});var n=r(77304),a=r(78133),o=r(56200)},14932:function(e,t,r){"use strict";var n,a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.ensureFilePath=void 0;var o=a(r(11449)),i=a(r(85660)),u=a(r(10687)),c=r(71450),s=a(r(18621));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var d=function(e){return{definition:function(){return(0,c.Q)("io.cozy.files").getById(e)},options:{as:"io.cozy.files/".concat(e),singleDocData:!0,fetchPolicy:s.default.fetchPolicies.olderThan(3e4)}}},f=(n=(0,u.default)(o.default.mark(function e(t){var r,n,a,u,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},!t.path){e.next=3;break}return e.abrupt("return",t);case 3:return n=d(t.dir_id),e.next=6,r.client.fetchQueryAndGetFromState({definition:n.definition(),options:n.options});case 6:if(!(!(a=e.sent).data||!a.data.path)){e.next=9;break}throw Error("Could not define a file path for ".concat(t._id||t.id));case 9:return u=a.data.path+"/"+t.name,e.abrupt("return",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({path:u},t));case 11:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});t.ensureFilePath=f},56200:function(e,t,r){"use strict";var n,a,o=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getQuery=t.extractKeys=t.editSettings=t.normalizeSettings=t.saveAfterFetchSettings=t.getSettings=void 0;var i=o(r(61874)),u=o(r(85660)),c=o(r(11449)),s=o(r(10687));o(r(18621));var l=o(r(39268)),d=r(71450);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,u.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=l.default.olderThan(36e5),v=(n=(0,s.default)(c.default.mark(function e(t,r,n){var a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=_(r),e.next=3,t.fetchQueryAndGetFromState({definition:a.definition,options:a.options});case 3:return o=g(e.sent.data),e.abrupt("return",k(o,n));case 6:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)});t.getSettings=v;var m=(a=(0,s.default)(c.default.mark(function e(t,r,n,a){var o,i,u,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=_(r),e.next=3,t.fetchQueryAndGetFromState({definition:o.definition,options:o.options});case 3:return i=g(e.sent.data),u=void 0,u="function"==typeof n?n(k(i,a)):h(h({},k(i,Object.keys(n))),n),s=b(r,i,u),e.next=10,t.save(s);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)})),function(e,t,r,n){return a.apply(this,arguments)});t.saveAfterFetchSettings=m;var g=function(e){return(Array.isArray(e)?e[0]:e)||{}};t.normalizeSettings=g;var b=function(e,t,r){var n=E(e);return"instance"===e?w(t,r):O(t,n,r)};t.editSettings=b;var w=function(e,t){for(var r=h(h({_id:e._id,_type:e._type,_rev:e.meta.rev},e),{},{attributes:h({},e.attributes)}),n=0,a=Object.entries(t);n<a.length;n++){var o=(0,i.default)(a[n],2),u=o[0],c=o[1];r[u]=c,r.attributes[u]=c}return r},O=function(e,t,r){for(var n=h({_type:t},e),a=0,o=Object.entries(r);a<o.length;a++){var u=(0,i.default)(o[a],2),c=u[0],s=u[1];n[c]=s}return n},k=function(e,t){var r,n={},a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;n[o]=e[o]}}catch(e){a.e(e)}finally{a.f()}return n};t.extractKeys=k;var _=function(e){return"instance"===e?S(e):"passwords"===e?S("bitwarden"):x(e)};t.getQuery=_;var x=function(e){var t=E(e);return{definition:(0,d.Q)(t).limitBy(1),options:{as:t,fetchPolicy:y,singleDocData:!0}}},S=function(e){var t="io.cozy.settings",r=E(e);return{definition:(0,d.Q)(t).getById(r),options:{as:"".concat(t,"/").concat(r),fetchPolicy:y,singleDocData:!0}}},E=function(e){return["instance","bitwarden"].includes(e)?"io.cozy.settings.".concat(e):"passwords"===e?"io.cozy.settings.bitwarden":"io.cozy.".concat(e,".settings")}},77304:function(e,t,r){"use strict";var n,a,o,i=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.rootCozyUrl=t.InvalidCozyUrlError=t.BlockedCozyError=t.InvalidProtocolError=t.InvalidRedirectLinkError=t.deconstructRedirectLink=t.deconstructCozyWebLinkWithSlug=t.generateWebLink=t.ensureFirstSlash=void 0;var u=i(r(75888)),c=i(r(78619)),s=i(r(11449)),l=i(r(10687)),d=i(r(89679)),f=i(r(11806)),p=i(r(73035)),h=i(r(34771)),y=i(r(4003)),v=i(r(61874));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,h.default)(e);return r=t?Reflect.construct(n,arguments,(0,h.default)(this).constructor):n.apply(this,arguments),(0,p.default)(this,r)}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var b=function(e){return e?e.startsWith("/")?e:"/"+e:"/"};t.ensureFirstSlash=b,t.generateWebLink=function(e){var t=e.cozyUrl,r=e.searchParams,n=e.pathname,a=e.hash,o=e.slug,i=e.subDomainType,u=new URL(t);u.host="nested"===i?"".concat(o,".").concat(u.host):u.host.split(".").map(function(e,t){return 0===t?e+"-"+o:e}).join("."),u.pathname=b(n),u.hash=b(a);var c,s=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return g(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(r||[]);try{for(s.s();!(c=s.n()).done;){var l=(0,v.default)(c.value,2),d=l[0],f=l[1];u.searchParams.set(d,f)}}catch(e){s.e(e)}finally{s.f()}return u.toString()},t.deconstructCozyWebLinkWithSlug=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flat",r=new URL(e),n="nested"===t?r.host.split(".")[0]:r.host.split(".")[0].split("-")[1],a="nested"===t?r.host.split(".")[1]:r.host.split(".")[0].split("-")[0];return{cozyBaseDomain:r.host.split(".").slice("nested"===t?2:1).join("."),cozyName:a,pathname:r.pathname,hash:r.hash,protocol:r.protocol,searchParams:r.searchParams.toString(),slug:n}},t.deconstructRedirectLink=function(e){var t=e.split("#"),r=(0,v.default)(t,2),n=r[0],a=r[1],o=n.split(/\/(.*)/),i=(0,v.default)(o,2),u=i[0],c=i[1];if(!u.match(/^[a-z0-9]+$/))throw new w(e);return{slug:u,pathname:c,hash:a}};var w=function(e){(0,f.default)(r,e);var t=m(r);function r(e){var n;return(0,d.default)(this,r),(n=t.call(this,"Invalid redirect link ".concat(e))).redirectLink=e,n}return r}((0,y.default)(Error));t.InvalidRedirectLinkError=w;var O=function(e){(0,f.default)(r,e);var t=m(r);function r(e){var n;return(0,d.default)(this,r),(n=t.call(this,"Invalid URL protocol ".concat(e.protocol))).url=e,n}return r}((0,y.default)(Error));t.InvalidProtocolError=O;var k=function(e){(0,f.default)(r,e);var t=m(r);function r(e){var n;return(0,d.default)(this,r),(n=t.call(this,"Blocked cozy ".concat(e.toString()))).url=e,n}return r}((0,y.default)(Error));t.BlockedCozyError=k;var _=function(e){(0,f.default)(r,e);var t=m(r);function r(e){var n;return(0,d.default)(this,r),(n=t.call(this,"URL ".concat(e.toString()," does not seem to be a valid Cozy URL"))).url=e,n}return r}((0,y.default)(Error));t.InvalidCozyUrlError=_;var x=function(e){var t=e.protocol,r=e.hostname,n=e.port;return(""!==t?"".concat(t,"//"):"https://")+r+(""!==n?":".concat(n):"")},S=(n=(0,l.default)(s.default.mark(function e(t){var r,n,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x(t)+"/.well-known/change-password");case 2:if(n=(r=e.sent).status,a=r.url,404!==n){e.next=6;break}throw new _(t);case 6:return e.next=8,P(r);case 8:if(!e.sent){e.next=10;break}throw new k(t);case 10:return o=t.origin!==new URL(a).origin,e.abrupt("return",200===n&&!o);case 12:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),E=(a=(0,l.default)(s.default.mark(function e(t){var r,n,a,o,i,l,d,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(["http:","https:"].includes(t.protocol)){e.next=2;break}throw new O(t);case 2:return e.next=4,S(t);case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",new URL(x({protocol:t.protocol,hostname:t.hostname,port:t.port})));case 6:if(!/^[^.-][^.]+-[^.-]+\./.test(t.hostname)){e.next=14;break}return r=t.hostname.split("."),a=(n=(0,c.default)(r))[0],o=n.slice(1),i=[a.replace(/-.+/,"")].concat((0,u.default)(o)).join("."),l=new URL(x({protocol:t.protocol,hostname:i,port:t.port})),e.next=12,S(l);case 12:if(!e.sent){e.next=14;break}return e.abrupt("return",l);case 14:return d=t.hostname.split(".").splice(1).join("."),f=new URL(x({protocol:t.protocol,hostname:d,port:t.port})),e.next=18,S(f);case 18:if(!e.sent){e.next=20;break}return e.abrupt("return",f);case 20:throw new _(t);case 21:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.rootCozyUrl=E;var P=(o=(0,l.default)(s.default.mark(function e(t){var r,n,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(503===t.status){e.next=2;break}return e.abrupt("return",!1);case 2:return a=(n=t.headers.get("content-type"))&&n.indexOf("json")>=0,e.next=6,a?t.json():t.text();case 6:if(!(null!=(o=e.sent)&&null!==(r=o.some)&&void 0!==r&&r.call(o,function(e){return"Blocked"===e.title}))){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})},378:function(e,t,r){"use strict";var n=r(16452),a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.queryConnectFlat=t.queryConnect=t.withClient=void 0;var o=a(r(85660)),i=a(r(21929)),u=n(r(67294)),c=a(r(45697)),s=a(r(47745)),l=a(r(18597)),d=a(r(26726)),f=r(72403),p=a(r(22853));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}t.withClient=function(e){var t=function(t){var r=(0,d.default)();return u.default.createElement(e,(0,i.default)({},t,{client:r}))};return t.displayName="withClient(".concat(e.displayName||e.name,")"),t};var v=function(e,t,r){if(!t)throw Error("withQuery has no options for ".concat(e," (wrapping ").concat(r.name,")"));return function(r){var n=function(n,a){if(!a.client)throw Error("Should be used with client in context (use CozyProvider to set context)");var i="function"==typeof t?t(n):t;return t.doc?(p.default.warn("queryOpts.doc is deprecated"),u.default.createElement(r,y((0,o.default)({},e,i.doc),n))):u.default.createElement(l.default,i,function(t){return u.default.createElement(r,y((0,o.default)({},e,t),n))})};return n.contextTypes={client:c.default.object},n.displayName="withQuery(".concat(r.displayName||r.name,")"),n}};t.queryConnect=function(e){return function(t){var r=Object.keys(e).map(function(r){return v(r,e[r],t)});return s.default.apply(null,r)(t)}},t.queryConnectFlat=function(e){return function(t){var r=function(r){var n=(0,f.useQueries)(e);return u.default.createElement(t,(0,i.default)({},r,n))};return r.displayName="queryConnectFlat(".concat(t.displayName||t.name,")"),r}}},54277:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(67294);t.default=function(){var e=(0,n.useRef)();return(0,n.useEffect)(function(){return e.current=!0,function(){e.current=!1}},[]),e}},29568:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(61874)),o=r(67294),i=n(r(54277));t.default=function(e){var t=(0,i.default)(),r=(0,o.useState)(e),n=(0,a.default)(r,2),u=n[0],c=n[1];return[u,(0,o.useCallback)(function(e){t.current&&c(e)},[])]}},63786:function(e,t,r){"use strict";var n=r(16452),a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useAppLinkWithStoreFallback",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"useCapabilities",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"useFetchShortcut",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"useClient",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"useQuery",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"useQueries",{enumerable:!0,get:function(){return s.useQueries}}),Object.defineProperty(t,"useAppsInMaintenance",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"useQueryAll",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"useMutation",{enumerable:!0,get:function(){return f.useMutation}}),Object.defineProperty(t,"useInstanceInfo",{enumerable:!0,get:function(){return p.useInstanceInfo}}),Object.defineProperty(t,"useSettings",{enumerable:!0,get:function(){return h.useSettings}});var o=a(r(25199)),i=a(r(56733)),u=a(r(90797)),c=a(r(26726)),s=n(r(72403)),l=a(r(82475)),d=a(r(71747)),f=r(34607),p=r(22380),h=r(74108)},25199:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(61874)),u=r(67294),c=r(71450),s=r(23963);t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=(0,u.useState)("loading"),l=(0,i.default)(n,2),d=l[0],f=l[1],p=(0,u.useState)(!0),h=(0,i.default)(p,2),y=h[0],v=h[1],m=(0,u.useState)(null),g=(0,i.default)(m,2),b=g[0],w=g[1];return(0,u.useEffect)(function(){var n;(n=(0,o.default)(a.default.mark(function n(){var o,i,u;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.query((0,c.Q)("io.cozy.apps"));case 3:o=n.sent,i={slug:e},v(!!(u=(0,s.isInstalled)(o.data,i))),u?w((0,s.getUrl)(u)+r):w((0,s.getStoreURL)(o.data,i)),f("loaded"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),f("errored");case 14:case"end":return n.stop()}},n,null,[[0,11]])})),function(){return n.apply(this,arguments)})()},[t,e,r]),{fetchStatus:d,isInstalled:y,url:b}}},82475:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(72403)),o=r(71450),i=n(r(18621));t.default=function(){return(0,a.default)((0,o.Q)("io.cozy.apps_registry").getById("maintenance"),{as:"io.cozy.apps_registry/maintenance",fetchPolicy:i.default.fetchPolicies.olderThan(6e5),singleDocData:!1}).data||[]}},56733:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(61874)),u=r(67294),c=n(r(27361)),s=r(71450);t.default=function(e){var t=(0,u.useState)(),r=(0,i.default)(t,2),n=r[0],l=r[1],d=(0,u.useState)("idle"),f=(0,i.default)(d,2),p=f[0],h=f[1];return(0,u.useEffect)(function(){var t,r=(t=(0,o.default)(a.default.mark(function t(){var r;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h("loading"),t.prev=1,t.next=4,e.query((0,s.Q)("io.cozy.settings").getById("io.cozy.settings.capabilities"));case 4:r=t.sent,l((0,c.default)(r,"data",{})),h("loaded"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),h("failed");case 12:case"end":return t.stop()}},t,null,[[1,9]])})),function(){return t.apply(this,arguments)});e.capabilities?(l(e.capabilities),h("loaded")):r()},[e]),{capabilities:n,fetchStatus:p}}},26726:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(67294),o=n(r(54028));n(r(18621)),t.default=function(){return(0,a.useContext)(o.default).client}},90797:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(61874)),u=r(67294),c=r(71450),s=n(r(18621));t.default=function(e,t){var r=(0,u.useState)(null),n=(0,i.default)(r,2),l=n[0],d=n[1],f=(0,u.useState)(null),p=(0,i.default)(f,2),h=p[0],y=p[1],v=(0,u.useState)("idle"),m=(0,i.default)(v,2),g=m[0],b=m[1];return(0,u.useEffect)(function(){var r;(r=(0,o.default)(a.default.mark(function r(){var n,o,i,u,l,f;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return b("loading"),r.prev=1,r.next=4,e.fetchQueryAndGetFromState({definition:(0,c.Q)("io.cozy.files.shortcuts").getById(t),options:{as:"io.cozy.files.shortcuts/".concat(t),fetchPolicy:s.default.fetchPolicies.olderThan(6e5),singleDocData:!0}});case 4:if(!(l=null==(u=r.sent)?void 0:null===(n=u.data)||void 0===n?void 0:null===(o=n.metadata)||void 0===o?void 0:null===(i=o.target)||void 0===i?void 0:i.app)){r.next=13;break}return r.next=9,e.getStackClient().getIconURL({type:"app",slug:l,priority:"stack"});case 9:y(r.sent),r.next=16;break;case 13:f=new URL(u.data.url),y("".concat(e.getStackClient().uri,"/bitwarden/icons/").concat(f.host,"/icon.png"));case 16:d({data:u.data}),b("loaded"),r.next=23;break;case 20:r.prev=20,r.t0=r.catch(1),b("failed");case 23:case"end":return r.stop()}},r,null,[[1,20]])})),function(){return r.apply(this,arguments)})()},[e,t]),{shortcutInfos:l,shortcutImg:h,fetchStatus:g}}},22380:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.useInstanceInfo=void 0;var a=n(r(72403)),o=n(r(18621)),i=r(71450),u=r(88930);t.useInstanceInfo=function(){var e=c("io.cozy.settings.instance"),t=(0,a.default)(e.definition,e.options),r=c("io.cozy.settings.context"),n=(0,a.default)(r.definition,r.options),o=c("io.cozy.settings.disk-usage"),i=(0,a.default)(o.definition,o.options);return{isLoaded:null!==(0,u.hasQueryBeenLoaded)(t)&&null!==(0,u.hasQueryBeenLoaded)(n)&&null!==(0,u.hasQueryBeenLoaded)(i),instance:{data:t.data},context:{data:n.data},diskUsage:{data:i.data}}};var c=function(e){return{definition:(0,i.Q)("io.cozy.settings").getById(e),options:{as:"io.cozy.settings/".concat(e),fetchPolicy:o.default.fetchPolicies.olderThan(54e4),singleDocData:!0}}}},34607:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.useMutation=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(61874)),u=r(67294),c=n(r(45697)),s=n(r(26726)),l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.onSuccess,n=void 0===r?void 0:r,c=t.onError,l=void 0===c?void 0:c,d=(0,s.default)(),f=(0,u.useState)("pending"),p=(0,i.default)(f,2),h=p[0],y=p[1],v=(0,u.useState)(),m=(0,i.default)(v,2),g=m[0],b=m[1],w=(0,u.useState)(),O=(0,i.default)(w,2),k=O[0],_=O[1];return{mutate:(0,u.useCallback)((e=(0,o.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(void 0),y("loading"),e.prev=2,e.next=5,d.save(t);case 5:if(_((r=e.sent).data),"function"!=typeof n){e.next=10;break}return e.next=10,n(r.data);case 10:y("loaded"),e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(2),y("failed"),b(e.t0),"function"!=typeof l){e.next=20;break}return e.next=20,l(e.t0);case 20:case"end":return e.stop()}},e,null,[[2,13]])})),function(t){return e.apply(this,arguments)}),[d,l,n]),mutationStatus:h,error:g,data:k}};t.useMutation=l,l.propTypes={onSuccess:c.default.func,onError:c.default.func}},72403:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useQueries=void 0;var a=n(r(61874)),o=n(r(85660)),i=r(67294),u=r(9055),c=n(r(27361)),s=n(r(26726)),l=n(r(22853)),d=r(54028);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}r(71450);var h=(0,u.createSelectorHook)(d.clientContext),y=function(e,t){if(!h)throw Error("You must use react-redux > 7.1.0 to use useQuery (uses useSelector) under the hood");if(!e)throw l.default.warn("Bad query",e),Error("Bad query");var r=t.as,n=t.enabled,a=void 0===n||n,o=a?"function"==typeof e?e():e:null;if(!r)throw Error("You must specify options.as when using useQuery");var u=(0,s.default)(),d=h(function(){return void 0===t.singleDocData&&null!=o&&o.id&&l.default.warn("useQuery options.singleDocData will pass to true in a next version of cozy-client, please add it now to prevent any problem in the future."),u.getQueryFromState(r,{hydrated:(0,c.default)(t,"hydrated",!0),singleDocData:(0,c.default)(t,"singleDocData",!1)})});(0,i.useEffect)(function(){!1!==a&&u.query(o,t)},[r,a]);var f=(0,i.useCallback)(function(){var e=u.getQueryFromState(r);return u.query(e.bookmark?e.definition.offsetBookmark(e.bookmark):e.definition.offset(e.data.length),{as:r})},[r,u]),y=(0,i.useCallback)(function(){return u.query(o,t)},[u,o,t]);return p(p({},d),{},{fetchMore:f,fetch:y})};t.useQueries=function(e){for(var t={},r=0,n=Object.entries(e);r<n.length;r++){var o=(0,a.default)(n[r],2),i=o[0],u=o[1];t[i]=y(u.query,u)}return t},t.default=y},71747:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(61874)),u=r(67294);r(71450);var c=n(r(72403)),s=n(r(29568));t.default=function(e,t){var r=(0,s.default)(!1),n=(0,i.default)(r,2),l=n[0],d=n[1],f=(0,c.default)(e,t);return(0,u.useEffect)(function(){var e;(e=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("loaded"===f.fetchStatus&&f.hasMore&&!l)){e.next=5;break}return d(!0),e.next=4,f.fetchMore();case 4:d(!1);case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[f.hasMore,f.fetchStatus,l]),f}},74108:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.useSettings=void 0;var a=n(r(15572)),o=r(67294),i=r(72004),u=r(34607),c=n(r(72403)),s=r(88930),l=r(56200);t.useSettings=function(e,t){var r=(0,i.getQuery)(e),n=(0,c.default)(r.definition,r.options),d=n.data,f=(0,a.default)(n,["data"]),p=(0,u.useMutation)(),h=p.mutate,y=(0,a.default)(p,["mutate"]),v=(0,o.useCallback)(function(t){var r=(0,i.normalizeSettings)(d);return h((0,i.editSettings)(e,r,t))},[h,d,e]),m=(0,i.normalizeSettings)(d),g=(0,s.hasQueryBeenLoaded)(f)?(0,l.extractKeys)(m,t):void 0;return{query:f,values:g,save:v,mutation:y}}},16396:function(e,t,r){"use strict";var n=r(16452),a=r(99338);Object.defineProperty(t,"__esModule",{value:!0});var o={CozyLink:!0,StackLink:!0,WebFlagshipLink:!0,compose:!0,QueryDefinition:!0,Q:!0,Mutations:!0,MutationTypes:!0,getDoctypeFromOperation:!0,Association:!0,HasMany:!0,HasOne:!0,HasOneInPlace:!0,HasManyInPlace:!0,HasManyTriggers:!0,isReferencedBy:!0,isReferencedById:!0,getReferencedBy:!0,getReferencedById:!0,deconstructCozyWebLinkWithSlug:!0,deconstructRedirectLink:!0,dehydrate:!0,generateWebLink:!0,ensureFirstSlash:!0,rootCozyUrl:!0,InvalidRedirectLinkError:!0,InvalidCozyUrlError:!0,InvalidProtocolError:!0,BlockedCozyError:!0,cancelable:!0,isQueryLoading:!0,hasQueryBeenLoaded:!0,isQueriesLoading:!0,hasQueriesBeenLoaded:!0,getQueryFromState:!0,dispatchCreate:!0,dispatchUpdate:!0,dispatchDelete:!0,Registry:!0,RealTimeQueries:!0,manifest:!0,CozyProvider:!0,withMutation:!0,withMutations:!0,Query:!0,queryConnect:!0,queryConnectFlat:!0,withClient:!0,models:!0,fetchPolicies:!0,BulkEditError:!0,webPerformanceApi:!0,defaultPerformanceApi:!0};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"CozyLink",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"StackLink",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"WebFlagshipLink",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"compose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"QueryDefinition",{enumerable:!0,get:function(){return d.QueryDefinition}}),Object.defineProperty(t,"Q",{enumerable:!0,get:function(){return d.Q}}),Object.defineProperty(t,"Mutations",{enumerable:!0,get:function(){return d.Mutations}}),Object.defineProperty(t,"MutationTypes",{enumerable:!0,get:function(){return d.MutationTypes}}),Object.defineProperty(t,"getDoctypeFromOperation",{enumerable:!0,get:function(){return d.getDoctypeFromOperation}}),Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return f.Association}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return f.HasMany}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return f.HasOne}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return f.HasOneInPlace}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return f.HasManyInPlace}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return f.HasManyTriggers}}),Object.defineProperty(t,"isReferencedBy",{enumerable:!0,get:function(){return p.isReferencedBy}}),Object.defineProperty(t,"isReferencedById",{enumerable:!0,get:function(){return p.isReferencedById}}),Object.defineProperty(t,"getReferencedBy",{enumerable:!0,get:function(){return p.getReferencedBy}}),Object.defineProperty(t,"getReferencedById",{enumerable:!0,get:function(){return p.getReferencedById}}),Object.defineProperty(t,"deconstructCozyWebLinkWithSlug",{enumerable:!0,get:function(){return h.deconstructCozyWebLinkWithSlug}}),Object.defineProperty(t,"deconstructRedirectLink",{enumerable:!0,get:function(){return h.deconstructRedirectLink}}),Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return h.dehydrate}}),Object.defineProperty(t,"generateWebLink",{enumerable:!0,get:function(){return h.generateWebLink}}),Object.defineProperty(t,"ensureFirstSlash",{enumerable:!0,get:function(){return h.ensureFirstSlash}}),Object.defineProperty(t,"rootCozyUrl",{enumerable:!0,get:function(){return h.rootCozyUrl}}),Object.defineProperty(t,"InvalidRedirectLinkError",{enumerable:!0,get:function(){return h.InvalidRedirectLinkError}}),Object.defineProperty(t,"InvalidCozyUrlError",{enumerable:!0,get:function(){return h.InvalidCozyUrlError}}),Object.defineProperty(t,"InvalidProtocolError",{enumerable:!0,get:function(){return h.InvalidProtocolError}}),Object.defineProperty(t,"BlockedCozyError",{enumerable:!0,get:function(){return h.BlockedCozyError}}),Object.defineProperty(t,"cancelable",{enumerable:!0,get:function(){return y.cancelable}}),Object.defineProperty(t,"isQueryLoading",{enumerable:!0,get:function(){return y.isQueryLoading}}),Object.defineProperty(t,"hasQueryBeenLoaded",{enumerable:!0,get:function(){return y.hasQueryBeenLoaded}}),Object.defineProperty(t,"isQueriesLoading",{enumerable:!0,get:function(){return y.isQueriesLoading}}),Object.defineProperty(t,"hasQueriesBeenLoaded",{enumerable:!0,get:function(){return y.hasQueriesBeenLoaded}}),Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return v.getQueryFromState}}),Object.defineProperty(t,"dispatchCreate",{enumerable:!0,get:function(){return v.dispatchCreate}}),Object.defineProperty(t,"dispatchUpdate",{enumerable:!0,get:function(){return v.dispatchUpdate}}),Object.defineProperty(t,"dispatchDelete",{enumerable:!0,get:function(){return v.dispatchDelete}}),Object.defineProperty(t,"Registry",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"RealTimeQueries",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"CozyProvider",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"withMutation",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"withMutations",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"Query",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"queryConnect",{enumerable:!0,get:function(){return x.queryConnect}}),Object.defineProperty(t,"queryConnectFlat",{enumerable:!0,get:function(){return x.queryConnectFlat}}),Object.defineProperty(t,"withClient",{enumerable:!0,get:function(){return x.withClient}}),Object.defineProperty(t,"fetchPolicies",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"BulkEditError",{enumerable:!0,get:function(){return A.BulkEditError}}),Object.defineProperty(t,"webPerformanceApi",{enumerable:!0,get:function(){return j.webPerformanceApi}}),Object.defineProperty(t,"defaultPerformanceApi",{enumerable:!0,get:function(){return T.defaultPerformanceApi}}),t.models=t.manifest=void 0;var i=a(r(18621)),u=a(r(37130)),c=a(r(97619)),s=a(r(62946)),l=a(r(59242)),d=r(71450),f=r(25367),p=r(11282),h=r(72004),y=r(88930),v=r(65972),m=a(r(10513)),g=a(r(1153)),b=n(r(86092));t.manifest=b;var w=a(r(63384)),O=a(r(43592)),k=a(r(18428)),_=a(r(18597)),x=r(378),S=n(r(4034));t.models=S;var E=a(r(39268)),P=r(24424);Object.keys(P).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(o,e))&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))});var C=r(63786);Object.keys(C).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(o,e))&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))});var A=r(29822),j=r(86465),T=r(12196)},22853:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(60732)),o=(0,a.default)("cozy-client");a.default.suggest.deny("cozy-client","info"),t.default=o},24424:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.createFakeClient=t.createMockClient=void 0;var a=n(r(61874)),o=n(r(11449)),i=n(r(10687)),u=n(r(85660)),c=n(r(15572)),s=n(r(82492)),l=n(r(18621)),d=r(65972),f=r(60359),p=r(71450);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var y=function(e,t,r){var n=r.definition,a=r.doctype,o=r.data,i=r.queryError,s=(0,c.default)(r,["definition","doctype","data","queryError"]);e.store.dispatch((0,d.initQuery)(t,n||(0,p.Q)(a))),i?e.store.dispatch((0,d.receiveQueryError)(t,i)):e.store.dispatch((0,d.receiveQueryResult)(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,u.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({data:o?o.map(function(e){return(0,f.normalizeDoc)(e,a)}):o},s)))},v=function(e){var t;return t=(0,i.default)(o.default.mark(function t(r){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",{data:null});case 2:if(!e[r.doctype]){t.next=6;break}return t.abrupt("return",{data:e[r.doctype]});case 6:return t.abrupt("return",{data:[]});case 7:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}};t.createMockClient=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queries,r=e.remote,n=e.clientOptions,a=e.clientFunctions,o=jest.fn().mockImplementation(v(r));return m({queries:t,remote:r,clientOptions:n,clientFunctions:(0,s.default)({query:o,save:jest.fn(),saveAll:jest.fn(),stackClient:{fetchJSON:jest.fn()}},a)})};var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queries,r=e.remote,n=e.clientOptions,o=e.clientFunctions,i=new l.default(n||{});i.ensureStore();for(var u=0,c=Object.entries(t||{});u<c.length;u++){var d=(0,a.default)(c[u],2);y(i,d[0],d[1])}return i.query=v(r),(0,s.default)(i,o),i};t.createFakeClient=m},94564:function(e,t,r){"use strict";var n,a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.isAccountWithTrigger=t.buildAccount=t.getAccountName=t.getAccountLogin=t.setContractSyncStatusInAccount=t.getContractSyncStatusFromAccount=t.muteError=t.getMutedErrors=void 0;var o=a(r(11449)),i=a(r(10687)),u=a(r(85660)),c=a(r(82492)),s=r(71450),l=r(13965),d=r(86092);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,u.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=function(e){return(null==e?void 0:e.mutedErrors)||[]};t.getMutedErrors=y,t.muteError=function(e,t){var r=y(e);return r.push({type:t,mutedAt:new Date().toISOString()}),h(h({},e),{},{mutedErrors:r})},t.getContractSyncStatusFromAccount=function(e,t){var r,n,a=(0,l.getHasManyItem)(e,"contracts",t);if(!a)throw Error("Cannot find contrat ".concat(t," in account"));return null===(r=null==a?void 0:null===(n=a.metadata)||void 0===n?void 0:n.imported)||void 0===r||r},t.setContractSyncStatusInAccount=function(e,t,r){return(0,l.updateHasManyItem)(e,"contracts",t,function(e){if(void 0===e)throw Error("Cannot find contrat ".concat(t," in account"));return(0,c.default)({},e,{metadata:{imported:r}})})};var v=function(e){if(e.identifier)return e.auth[e.identifier];if(e&&e.auth){var t,r=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(d.legacyLoginFields);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e.auth[n])return e.auth[n]}}catch(e){r.e(e)}finally{r.f()}}return null};t.getAccountLogin=v,t.getAccountName=function(e){return e?e.auth&&(e.auth.accountName||v(e))||e._id:null},t.buildAccount=function(e,t){return{auth:t,account_type:e.slug,identifier:(0,d.getIdentifier)(e.fields),state:null}};var m=(n=(0,i.default)(o.default.mark(function e(t,r){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,s.Q)("io.cozy.triggers").where({"message.account":r._id}).indexFields(["message.account"]).limitBy(1));case 2:return n=e.sent,e.abrupt("return",n.data.length>0);case 4:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});t.isAccountWithTrigger=m},23963:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getAppDisplayName=t.getUrl=t.isInstalled=t.getStoreInstallationURL=t.getStoreURL=void 0;var a=n(r(27361)),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.slug)throw Error("Expected app / konnector with the defined slug");var r=i(e,{slug:"store"});if(!r)return null;var n=r.links&&r.links.related;return n?"".concat(n,"#/discover/").concat(t.slug):null};t.getStoreURL=o,t.getStoreInstallationURL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o(e,t);return r?"".concat(r,"/install"):null};var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.find(function(e){return e.slug===t.slug})};t.isInstalled=i,t.getUrl=function(e){return e.links&&e.links.related},t.getAppDisplayName=function(e,t){var r=(0,a.default)(e,"name_prefix"),n=(0,a.default)(e,"name"),o=(0,a.default)(e,["locales",t,"name"],n),i=(0,a.default)(e,["locales",t,"name_prefix"],r);return i&&"cozy"!==i.toLowerCase()?"".concat(i," ").concat(o):o}},88842:function(e,t,r){"use strict";var n,a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.hasExtensionInstalledAttribute=void 0;var o=a(r(11449)),i=a(r(10687)),u=r(71450),c=(n=(0,i.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchQueryAndGetFromState({definition:(0,u.Q)("io.cozy.settings").getById("io.cozy.settings.bitwarden"),options:{as:"io.cozy.settings/io.cozy.settings.bitwarden",singleDocData:!0}});case 3:return r=e.sent.data.extension_installed,e.abrupt("return",!!r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return n.apply(this,arguments)});t.hasExtensionInstalledAttribute=c},47978:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMagicLink=t.isOIDC=void 0,t.isOIDC=function(e){var t;return null!==(t=e.capabilities.can_auth_with_oidc)&&void 0!==t&&t},t.isMagicLink=function(e){var t;return null!==(t=e.capabilities.can_auth_with_magic_links)&&void 0!==t&&t}},40996:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.isContact=t.getIndexByFamilyNameGivenNameEmailCozyUrl=t.getDefaultSortIndexValue=t.makeDefaultSortIndexValue=t.getDisplayName=t.makeDisplayName=t.getFullname=t.makeFullname=t.getPrimaryAddress=t.getPrimaryPhone=t.getPrimaryCozyDomain=t.getPrimaryCozy=t.getPrimaryEmail=t.getInitials=t.getPrimaryOrFirst=t.CONTACTS_DOCTYPE=void 0;var a=n(r(27361)),o=n(r(41609)),i=n(r(22853)),u="io.cozy.contacts";t.CONTACTS_DOCTYPE=u;var c=function(e){return function(t){return t&&t[e]&&0!==t[e].length&&t[e][0]?t[e].find(function(e){return e.primary})||t[e][0]:""}};t.getPrimaryOrFirst=c,t.getInitials=function(e){if(null!=e&&null!==(t=e.name)&&void 0!==t&&t.givenName||null!=e&&null!==(r=e.name)&&void 0!==r&&r.familyName)return["givenName","familyName"].map(function(t){return(0,a.default)(e,["name",t,0],"")}).join("").toUpperCase();var t,r,n=s(e);if(n)return n[0].toUpperCase();var o=d(e);return o?o[0].toUpperCase():""};var s=function(e){return Array.isArray(e.email)?c("email")(e).address||"":e.email};t.getPrimaryEmail=s;var l=function(e){return Array.isArray(e.cozy)?c("cozy")(e).url||"":e.url};t.getPrimaryCozy=l;var d=function(e){try{return new URL(l(e)).hostname.replace(/^(www.)/g,"")}catch(t){return l(e)}};t.getPrimaryCozyDomain=d,t.getPrimaryPhone=function(e){return c("phone")(e).number||""},t.getPrimaryAddress=function(e){return c("address")(e).formattedAddress||""};var f=["namePrefix","givenName","additionalName","familyName","nameSuffix"],p=function(e,t){var r=(null==t?void 0:t.attributesFullname)||f;return e.name?r.map(function(t){return e.name[t]}).filter(function(e){return void 0!==e}).join(" ").trim():""};t.makeFullname=p,t.getFullname=function(e){return(0,a.default)(e,"fullname")?e.fullname:p(e)};var h=function(e,t){var r=p(e,t),n=s(e),a=d(e);return r&&r.length>0?r:n&&n.length>0?n:a&&a.length>0?a:""};t.makeDisplayName=h,t.getDisplayName=function(e){return(0,a.default)(e,"displayName")?e.displayName:h(e)};var y=function(e){var t=[(0,a.default)(e,"name.familyName",""),(0,a.default)(e,"name.givenName",""),s(e),d(e)].join("").trim().toLowerCase();return 0===t.length?null:t};t.makeDefaultSortIndexValue=y;var v=function(e){var t=(0,a.default)(e,"indexes.byFamilyNameGivenNameEmailCozyUrl",null);return null!==t?(0,o.default)(t)?null:t:y(e)};t.getDefaultSortIndexValue=v,t.getIndexByFamilyNameGivenNameEmailCozyUrl=function(e){return i.default.warn("Deprecation: `getIndexByFamilyNameGivenNameEmailCozyUrl` is deprecated, please use `getDefaultSortIndexValue` instead"),v(e)},t.isContact=function(e){return e._type===u}},65314:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getEmojiByCountry=t.getAllNationalities=t.getNationalityByCodeISO=t.getAllCountryNames=t.getCountryNameByCodeISO=t.getAllCountries=t.checkCountryCode=t.isCountryCodeAlpha2=t.isCountryCodeAlpha3=t.isValidCountryCodeTranslation=t.COUNTRIES_ISO=void 0;var a=n(r(75888)),o=r(61774),i=n(r(22853)),u=[{code2:"AF",code3:"AFG",number:"004"},{code2:"AL",code3:"ALB",number:"008"},{code2:"DZ",code3:"DZA",number:"012"},{code2:"AD",code3:"AND",number:"020"},{code2:"AO",code3:"AGO",number:"024"},{code2:"AG",code3:"ATG",number:"028"},{code2:"AR",code3:"ARG",number:"032"},{code2:"AM",code3:"ARM",number:"051"},{code2:"AU",code3:"AUS",number:"036"},{code2:"AT",code3:"AUT",number:"040"},{code2:"AZ",code3:"AZE",number:"031"},{code2:"BS",code3:"BHS",number:"044"},{code2:"BH",code3:"BHR",number:"048"},{code2:"BD",code3:"BGD",number:"050"},{code2:"BB",code3:"BRB",number:"052"},{code2:"BY",code3:"BLR",number:"112"},{code2:"BE",code3:"BEL",number:"056"},{code2:"BZ",code3:"BLZ",number:"084"},{code2:"BJ",code3:"BEN",number:"204"},{code2:"BM",code3:"BMU",number:"060"},{code2:"BT",code3:"BTN",number:"064"},{code2:"BO",code3:"BOL",number:"068"},{code2:"BQ",code3:"BES",number:"535"},{code2:"BA",code3:"BIH",number:"070"},{code2:"BW",code3:"BWA",number:"072"},{code2:"BV",code3:"BVT",number:"074"},{code2:"BR",code3:"BRA",number:"076"},{code2:"IO",code3:"IOT",number:"086"},{code2:"BN",code3:"BRN",number:"096"},{code2:"BG",code3:"BGR",number:"100"},{code2:"BF",code3:"BFA",number:"854"},{code2:"BI",code3:"BDI",number:"108"},{code2:"CV",code3:"CPV",number:"132"},{code2:"KH",code3:"KHM",number:"116"},{code2:"CM",code3:"CMR",number:"120"},{code2:"CA",code3:"CAN",number:"124"},{code2:"KY",code3:"CYM",number:"136"},{code2:"CF",code3:"CAF",number:"140"},{code2:"TD",code3:"TCD",number:"148"},{code2:"CL",code3:"CHL",number:"152"},{code2:"CN",code3:"CHN",number:"156"},{code2:"CX",code3:"CXR",number:"162"},{code2:"CC",code3:"CCK",number:"166"},{code2:"CO",code3:"COL",number:"170"},{code2:"KM",code3:"COM",number:"174"},{code2:"CD",code3:"COD",number:"180"},{code2:"CG",code3:"COG",number:"178"},{code2:"CK",code3:"COK",number:"184"},{code2:"CR",code3:"CRI",number:"188"},{code2:"HR",code3:"HRV",number:"191"},{code2:"CU",code3:"CUB",number:"192"},{code2:"CW",code3:"CUW",number:"531"},{code2:"CY",code3:"CYP",number:"196"},{code2:"CZ",code3:"CZE",number:"203"},{code2:"CI",code3:"CIV",number:"384"},{code2:"DK",code3:"DNK",number:"208"},{code2:"DJ",code3:"DJI",number:"262"},{code2:"DM",code3:"DMA",number:"212"},{code2:"DO",code3:"DOM",number:"214"},{code2:"EC",code3:"ECU",number:"218"},{code2:"EG",code3:"EGY",number:"818"},{code2:"SV",code3:"SLV",number:"222"},{code2:"GQ",code3:"GNQ",number:"226"},{code2:"ER",code3:"ERI",number:"232"},{code2:"EE",code3:"EST",number:"233"},{code2:"SZ",code3:"SWZ",number:"748"},{code2:"ET",code3:"ETH",number:"231"},{code2:"FK",code3:"FLK",number:"238"},{code2:"FO",code3:"FRO",number:"234"},{code2:"FJ",code3:"FJI",number:"242"},{code2:"FI",code3:"FIN",number:"246"},{code2:"FR",code3:"FRA",number:"250"},{code2:"GF",code3:"GUF",number:"254"},{code2:"PF",code3:"PYF",number:"258"},{code2:"TF",code3:"ATF",number:"260"},{code2:"GA",code3:"GAB",number:"266"},{code2:"GM",code3:"GMB",number:"270"},{code2:"GE",code3:"GEO",number:"268"},{code2:"DE",code3:"DEU",number:"276"},{code2:"GH",code3:"GHA",number:"288"},{code2:"GI",code3:"GIB",number:"292"},{code2:"GR",code3:"GRC",number:"300"},{code2:"GL",code3:"GRL",number:"304"},{code2:"GD",code3:"GRD",number:"308"},{code2:"GP",code3:"GLP",number:"312"},{code2:"GU",code3:"GUM",number:"316"},{code2:"GT",code3:"GTM",number:"320"},{code2:"GG",code3:"GGY",number:"831"},{code2:"GN",code3:"GIN",number:"324"},{code2:"GW",code3:"GNB",number:"624"},{code2:"GY",code3:"GUY",number:"328"},{code2:"HT",code3:"HTI",number:"332"},{code2:"HM",code3:"HMD",number:"334"},{code2:"VA",code3:"VAT",number:"336"},{code2:"HN",code3:"HND",number:"340"},{code2:"HK",code3:"HKG",number:"344"},{code2:"HU",code3:"HUN",number:"348"},{code2:"IS",code3:"ISL",number:"352"},{code2:"IN",code3:"IND",number:"356"},{code2:"ID",code3:"IDN",number:"360"},{code2:"IR",code3:"IRN",number:"364"},{code2:"IQ",code3:"IRQ",number:"368"},{code2:"IE",code3:"IRL",number:"372"},{code2:"IM",code3:"IMN",number:"833"},{code2:"IL",code3:"ISR",number:"376"},{code2:"IT",code3:"ITA",number:"380"},{code2:"JM",code3:"JAM",number:"388"},{code2:"JP",code3:"JPN",number:"392"},{code2:"JE",code3:"JEY",number:"832"},{code2:"JO",code3:"JOR",number:"400"},{code2:"KZ",code3:"KAZ",number:"398"},{code2:"KE",code3:"KEN",number:"404"},{code2:"KI",code3:"KIR",number:"296"},{code2:"KP",code3:"PRK",number:"408"},{code2:"KR",code3:"KOR",number:"410"},{code2:"KW",code3:"KWT",number:"414"},{code2:"KG",code3:"KGZ",number:"417"},{code2:"LA",code3:"LAO",number:"418"},{code2:"LV",code3:"LVA",number:"428"},{code2:"LB",code3:"LBN",number:"422"},{code2:"LS",code3:"LSO",number:"426"},{code2:"LR",code3:"LBR",number:"430"},{code2:"LY",code3:"LBY",number:"434"},{code2:"LI",code3:"LIE",number:"438"},{code2:"LT",code3:"LTU",number:"440"},{code2:"LU",code3:"LUX",number:"442"},{code2:"MO",code3:"MAC",number:"446"},{code2:"MG",code3:"MDG",number:"450"},{code2:"MW",code3:"MWI",number:"454"},{code2:"MY",code3:"MYS",number:"458"},{code2:"MV",code3:"MDV",number:"462"},{code2:"ML",code3:"MLI",number:"466"},{code2:"MT",code3:"MLT",number:"470"},{code2:"MH",code3:"MHL",number:"584"},{code2:"MQ",code3:"MTQ",number:"474"},{code2:"MR",code3:"MRT",number:"478"},{code2:"MU",code3:"MUS",number:"480"},{code2:"YT",code3:"MYT",number:"175"},{code2:"MX",code3:"MEX",number:"484"},{code2:"FM",code3:"FSM",number:"583"},{code2:"MD",code3:"MDA",number:"498"},{code2:"MC",code3:"MCO",number:"492"},{code2:"MN",code3:"MNG",number:"496"},{code2:"ME",code3:"MNE",number:"499"},{code2:"MS",code3:"MSR",number:"500"},{code2:"MA",code3:"MAR",number:"504"},{code2:"MZ",code3:"MOZ",number:"508"},{code2:"MM",code3:"MMR",number:"104"},{code2:"NA",code3:"NAM",number:"516"},{code2:"NR",code3:"NRU",number:"520"},{code2:"NP",code3:"NPL",number:"524"},{code2:"NL",code3:"NLD",number:"528"},{code2:"NC",code3:"NCL",number:"540"},{code2:"NZ",code3:"NZL",number:"554"},{code2:"NI",code3:"NIC",number:"558"},{code2:"NE",code3:"NER",number:"562"},{code2:"NG",code3:"NGA",number:"566"},{code2:"NU",code3:"NIU",number:"570"},{code2:"NF",code3:"NFK",number:"574"},{code2:"MP",code3:"MNP",number:"580"},{code2:"NO",code3:"NOR",number:"578"},{code2:"OM",code3:"OMN",number:"512"},{code2:"PK",code3:"PAK",number:"586"},{code2:"PW",code3:"PLW",number:"585"},{code2:"PS",code3:"PSE",number:"275"},{code2:"PA",code3:"PAN",number:"591"},{code2:"PG",code3:"PNG",number:"598"},{code2:"PY",code3:"PRY",number:"600"},{code2:"PE",code3:"PER",number:"604"},{code2:"PH",code3:"PHL",number:"608"},{code2:"PN",code3:"PCN",number:"612"},{code2:"PL",code3:"POL",number:"616"},{code2:"PT",code3:"PRT",number:"620"},{code2:"PR",code3:"PRI",number:"630"},{code2:"QA",code3:"QAT",number:"634"},{code2:"MK",code3:"MKD",number:"807"},{code2:"RO",code3:"ROU",number:"642"},{code2:"RU",code3:"RUS",number:"643"},{code2:"RW",code3:"RWA",number:"646"},{code2:"RE",code3:"REU",number:"638"},{code2:"BL",code3:"BLM",number:"652"},{code2:"SH",code3:"SHN",number:"654"},{code2:"KN",code3:"KNA",number:"659"},{code2:"LC",code3:"LCA",number:"662"},{code2:"MF",code3:"MAF",number:"663"},{code2:"PM",code3:"SPM",number:"666"},{code2:"VC",code3:"VCT",number:"670"},{code2:"WS",code3:"WSM",number:"882"},{code2:"SM",code3:"SMR",number:"674"},{code2:"ST",code3:"STP",number:"678"},{code2:"SA",code3:"SAU",number:"682"},{code2:"SN",code3:"SEN",number:"686"},{code2:"RS",code3:"SRB",number:"688"},{code2:"SC",code3:"SYC",number:"690"},{code2:"SL",code3:"SLE",number:"694"},{code2:"SG",code3:"SGP",number:"702"},{code2:"SX",code3:"SXM",number:"534"},{code2:"SK",code3:"SVK",number:"703"},{code2:"SI",code3:"SVN",number:"705"},{code2:"SB",code3:"SLB",number:"090"},{code2:"SO",code3:"SOM",number:"706"},{code2:"ZA",code3:"ZAF",number:"710"},{code2:"GS",code3:"SGS",number:"239"},{code2:"SS",code3:"SSD",number:"728"},{code2:"ES",code3:"ESP",number:"724"},{code2:"LK",code3:"LKA",number:"144"},{code2:"SD",code3:"SDN",number:"729"},{code2:"SR",code3:"SUR",number:"740"},{code2:"SJ",code3:"SJM",number:"744"},{code2:"SE",code3:"SWE",number:"752"},{code2:"CH",code3:"CHE",number:"756"},{code2:"SY",code3:"SYR",number:"760"},{code2:"TW",code3:"TWN",number:"158"},{code2:"TJ",code3:"TJK",number:"762"},{code2:"TZ",code3:"TZA",number:"834"},{code2:"TH",code3:"THA",number:"764"},{code2:"TL",code3:"TLS",number:"626"},{code2:"TG",code3:"TGO",number:"768"},{code2:"TK",code3:"TKL",number:"772"},{code2:"TO",code3:"TON",number:"776"},{code2:"TT",code3:"TTO",number:"780"},{code2:"TN",code3:"TUN",number:"788"},{code2:"TR",code3:"TUR",number:"792"},{code2:"TM",code3:"TKM",number:"795"},{code2:"TC",code3:"TCA",number:"796"},{code2:"TV",code3:"TUV",number:"798"},{code2:"UG",code3:"UGA",number:"800"},{code2:"UA",code3:"UKR",number:"804"},{code2:"AE",code3:"ARE",number:"784"},{code2:"GB",code3:"GBR",number:"826"},{code2:"UM",code3:"UMI",number:"581"},{code2:"US",code3:"USA",number:"840"},{code2:"UY",code3:"URY",number:"858"},{code2:"UZ",code3:"UZB",number:"860"},{code2:"VU",code3:"VUT",number:"548"},{code2:"VE",code3:"VEN",number:"862"},{code2:"VN",code3:"VNM",number:"704"},{code2:"VG",code3:"VGB",number:"092"},{code2:"VI",code3:"VIR",number:"850"},{code2:"WF",code3:"WLF",number:"876"},{code2:"EH",code3:"ESH",number:"732"},{code2:"YE",code3:"YEM",number:"887"},{code2:"ZM",code3:"ZMB",number:"894"},{code2:"ZW",code3:"ZWE",number:"716"},{code2:"AX",code3:"ALA",number:"248"}];t.COUNTRIES_ISO=u,t.isValidCountryCodeTranslation=function(e,t){var r=(0,o.getLocalizer)(e).polyglot;return s(t)&&r.has("nationalities.".concat(t))&&r.has("countries.".concat(t))};var c=function(e){if(!e)return!1;var t=e.toUpperCase();return u.some(function(e){return e.code3===t})};t.isCountryCodeAlpha3=c;var s=function(e){if(!e)return!1;var t=e.toUpperCase();return u.some(function(e){return e.code2===t})};t.isCountryCodeAlpha2=s,t.checkCountryCode=function(e){return s(e)||c(e)};var l=function(e){var t=(0,o.getLocalizer)(e).t;return u.map(function(e){return{code2:e.code2,code3:e.code3,number:e.number,name:t("countries.".concat(e.code2)),nationality:t("nationalities.".concat(e.code2))}})};t.getAllCountries=l;var d=function(e){return function(t){var r,n=null==e?void 0:null===(r=e.toString())||void 0===r?void 0:r.toUpperCase();return/^[A-Z]{2,3}$/.test(n)?t.code2===n||t.code3===n:!!/^\d+$/.test(n)&&t.number===n}};t.getCountryNameByCodeISO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lang:"en"},r=l(t.lang).find(d(e));return r?r.name:(i.default.warn("Country with code ".concat(e," not found")),null)},t.getAllCountryNames=function(e){return l(e).map(function(e){return e.name})},t.getNationalityByCodeISO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lang:"en"},r=l(t.lang).find(d(e));return r?r.nationality:(i.default.warn("Nationality with code ".concat(e," not found")),null)},t.getAllNationalities=function(e){return l(e).map(function(e){return e.nationality})},t.getEmojiByCountry=function(e){if(!e)return null;if(!/^[a-z]{2}$/i.test(e))return i.default.error("Country argument must be an ISO 3166-1 alpha-2 string, but got '".concat(JSON.stringify(e),"' instead.")),null;if(!u.find(function(t){return t.code2===e.toUpperCase()}))return i.default.error("Country with code ".concat(e," not found in the list of countries")),null;var t=(0,a.default)(e.toUpperCase()).map(function(e){return e.codePointAt(0)+127397});return String.fromCodePoint.apply(String,(0,a.default)(t))}},61774:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizer=void 0;for(var a=n(r(54078)),o=n(r(20455)),i=n(r(40883)),u={en:o.default,fr:i.default},c={},s=0,l=["fr","en"];s<l.length;s++){var d=l[s],f=new a.default;f.extend(u[d]),c[d]=f}t.getLocalizer=function(e){var t=c[e]||c.en;return{t:t.t.bind(t),polyglot:t,lang:e}}},61645:function(e,t,r){"use strict";var n,a,o=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAggregatesFromDACC=t.buildAggregateParams=t.sendMeasureToDACC=t.checkMeasureParams=t.isCorrectDateFormat=void 0;var i=o(r(11449)),u=o(r(10687)),c=o(r(33918));o(r(18621));var s=function(e){try{return!!new Date(Date.parse(e)).toISOString().startsWith(e)}catch(e){return!1}};t.isCorrectDateFormat=s;var l=function(e){var t=e.createdBy,r=e.measureName,n=e.startDate,a=e.value,o=e.group1,i=e.group2,u=e.group3;if(!t||"string"!=typeof t)throw Error("Missing or wrong type parameter: createdBy");if(!r||"string"!=typeof r)throw Error("Missing or wrong type parameter: measureName");if(!n)throw Error("Missing parameter: startDate");if(!s(n))throw Error("Date should be in YYYY-MM-DD format");if("number"!=typeof a)throw Error("Missing or wrong type parameter: value");if(o&&("object"!=typeof o||0===Object.keys(o).length)||i&&("object"!=typeof i||0===Object.keys(i).length)||u&&("object"!=typeof u||0===Object.keys(u).length))throw Error("Groups should be key-value objects");if(u&&(!i||!o)||i&&!o)throw Error("Group order must be respected")};t.checkMeasureParams=l;var d=(n=(0,u.default)(i.default.mark(function e(t,r,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(n),e.next=4,t.getStackClient().fetchJSON("POST","/remote/".concat(r),{data:JSON.stringify(n),path:"measure"});case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),(0,c.default)("error","Error while sending measure to remote doctype: ".concat(e.t0.message)),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e,t,r){return n.apply(this,arguments)});t.sendMeasureToDACC=d;var f=function(e){var t=e.measureName;if(!t||"string"!=typeof t)throw Error("Missing or wrong type parameter: measureName");var r=e.startDate||new Date(0).toISOString(),n=e.endDate||new Date(Date.now()).toISOString();if(!s(r)||!s(n))throw(0,c.default)("error","Date should be in YYYY-MM-DD format but received: startDate: ".concat(r," | endDate: ").concat(n)),Error("Date should be in YYYY-MM-DD format");return{measureName:t,startDate:r,endDate:n}};t.buildAggregateParams=f;var p=(a=(0,u.default)(i.default.mark(function e(t,r,n){var a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=f(n),e.next=4,t.getStackClient().fetchJSON("POST","/remote/".concat(r),{data:JSON.stringify(a),path:"aggregate"});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),(0,c.default)("error","Error while fetching aggregates to remote doctype: ".concat(e.t0.message)),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,r){return a.apply(this,arguments)});t.fetchAggregatesFromDACC=p},60195:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconLabelPairs=t.THEME_OTHERS_LABELS=t.THEME_INVOICE_LABELS=t.THEME_FINANCE_LABELS=t.THEME_ACTIVITY_LABELS=t.THEME_TRANSPORT_LABELS=t.THEME_HOME_LABELS=t.THEME_HEALTH_LABELS=t.THEME_WORK_STUDY_LABELS=t.THEME_FAMILY_LABELS=t.THEME_IDENTITY_LABELS=void 0,t.THEME_IDENTITY_LABELS=["identity_photo","national_id_card","passport","residence_permit","electoral_card","family_record_book","birth_certificate","driver_license","citizen_registration_certificate","note_identity_document","other_identity_document"],t.THEME_FAMILY_LABELS=["family_record_book","birth_certificate","wedding","pacs","single_parent_benefit","divorce","large_family_card","caf","payment_proof_family_allowance","note_family_document","other_family_document","person_insurance"],t.THEME_WORK_STUDY_LABELS=["diploma","work_contract","pay_sheet","unemployment_benefit","employment_center_certificate","pension","work_disability_recognition","gradebook","student_card","school_attendance_certificate","school_insurance_certificate","resume","motivation_letter","expense_claim","note_work_document","other_work_document"],t.THEME_HEALTH_LABELS=["health_certificate","health_book","national_health_insurance_card","national_health_insurance_right_certificate","health_insurance_card","prescription","health_invoice","work_disability_recognition","pregnancy_medical_certificate","note_health_document","other_health_document"],t.THEME_HOME_LABELS=["phone_invoice","isp_invoice","telecom_invoice","energy_invoice","water_invoice","other_invoice","work_invoice","house_sale_agreeement","building_permit","technical_diagnostic_record","unfit_for_habitation_declaration","lease","rent_receipt","accommodation_proof","house_insurance","work_quote","condition_report","note_house_document","other_house_document","real_estate_insurance"],t.THEME_TRANSPORT_LABELS=["driver_license","vehicle_registration","car_insurance","transport_card","mechanic_invoice","transport_invoice","note_transport_document","other_transport_document"],t.THEME_ACTIVITY_LABELS=["personal_sporting_licence","fidelity_card","note_activity_document","other_activity_document"],t.THEME_FINANCE_LABELS=["fine","tax_certificate","tax_return","tax_notice","tax_timetable","real_estate_tax","pay_sheet","receipt","single_parent_benefit","other_tax_document","bank_details","bank_statement","loan_agreement","payment_proof_family_allowance","note_finance","expense_claim","other_bank_document","other_revenue"],t.THEME_INVOICE_LABELS=["phone_invoice","isp_invoice","telecom_invoice","energy_invoice","water_invoice","appliance_invoice","web_service_invoice","restaurant_invoice","work_invoice","transport_invoice","health_invoice","note_invoice","expense_claim","energy_contract","grocery_invoice","other_invoice"],t.THEME_OTHERS_LABELS=["other_administrative_document"],t.iconLabelPairs=[{icon:"bank-check",labels:["bank_details"]},{icon:"bank",labels:["other_administrative_document","other_tax_document","real_estate_tax","tax_certificate","tax_notice","tax_return","tax_timetable"]},{icon:"benefit",labels:["loan_agreement","other_revenue","pay_sheet","payment_proof_family_allowance","pension"]},{icon:"bill",labels:["other_invoice"]},{icon:"car",labels:["car_insurance","driver_license","other_transport_document","transport_card","transport_invoice","vehicle_registration"]},{icon:"child",labels:["birth_certificate"]},{icon:"email",labels:["receipt"]},{icon:"euro",labels:["other_bank_document"]},{icon:"exchange",labels:["bank_statement"]},{icon:"file-type-note",labels:["note_activity_document","note_family_document","note_finance","note_health_document","note_house_document","note_identity_document","note_invoice","note_transport_document","note_work_document"]},{icon:"fitness",labels:["other_activity_document","personal_sporting_licence"]},{icon:"globe",labels:["residence_permit"]},{icon:"gouv",labels:["electoral_card"]},{icon:"heart",labels:["health_book","health_certificate","health_insurance_card","health_invoice","national_health_insurance_card","national_health_insurance_right_certificate","other_health_document","person_insurance","pregnancy_medical_certificate","prescription"]},{icon:"home",labels:["accommodation_proof","building_permit","condition_report","house_insurance","house_sale_agreeement","lease","mechanic_invoice","other_house_document","real_estate_insurance","rent_receipt","technical_diagnostic_record","unfit_for_habitation_declaration","work_invoice","work_quote"]},{icon:"image",labels:["identity_photo"]},{icon:"justice",labels:["fine"]},{icon:"laudry",labels:["appliance_invoice"]},{icon:"lightning",labels:["energy_contract","energy_invoice"]},{icon:"people",labels:["national_id_card","other_identity_document","resume","work_disability_recognition"]},{icon:"plane",labels:["passport"]},{icon:"remboursement",labels:["expense_claim"]},{icon:"restaurant",labels:["restaurant_invoice"]},{icon:"school",labels:["diploma","gradebook"]},{icon:"shop",labels:["fidelity_card","grocery_invoice"]},{icon:"team",labels:["caf","citizen_registration_certificate","divorce","family_record_book","large_family_card","other_family_document","pacs","single_parent_benefit","wedding"]},{icon:"telecom",labels:["isp_invoice","telecom_invoice","web_service_invoice"]},{icon:"telephone",labels:["phone_invoice"]},{icon:"water",labels:["water_invoice"]},{icon:"work",labels:["employment_center_certificate","motivation_letter","other_work_document","school_attendance_certificate","school_insurance_certificate","student_card","unemployment_benefit","work_contract"]}]},48536:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themesList=void 0;var n=r(60195),a=r(34259),o=function(e){return e.map(function(e){try{return a.Qualification.getByLabel(e)}catch(e){return console.log("error",e),null}}).filter(function(e){return e})},i=[{id:"theme1",label:"identity",icon:"people",items:o(n.THEME_IDENTITY_LABELS),defaultItems:["birth_certificate"]},{id:"theme2",label:"family",icon:"team",items:o(n.THEME_FAMILY_LABELS),defaultItems:["family_record_book"]},{id:"theme3",label:"work_study",icon:"work",items:o(n.THEME_WORK_STUDY_LABELS)},{id:"theme4",label:"health",icon:"heart",items:o(n.THEME_HEALTH_LABELS)},{id:"theme5",label:"home",icon:"home",items:o(n.THEME_HOME_LABELS)},{id:"theme6",label:"transport",icon:"car",items:o(n.THEME_TRANSPORT_LABELS),defaultItems:["driver_license"]},{id:"theme7",label:"activity",icon:"chess",items:o(n.THEME_ACTIVITY_LABELS)},{id:"theme8",label:"finance",icon:"bank",items:o(n.THEME_FINANCE_LABELS)},{id:"theme9",label:"invoice",icon:"bill",items:o(n.THEME_INVOICE_LABELS)},{id:"theme10",label:"others",icon:"dots",items:o(n.THEME_OTHERS_LABELS)}];t.themesList=i},29444:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQualificationNote=t.getThemeByItem=void 0;var n=r(48536);t.getThemeByItem=function(e){var t=n.themesList.find(function(t){return t.defaultItems&&t.defaultItems.includes(e.label)});return t||n.themesList.find(function(t){return t.items.some(function(t){return t.label===e.label})})},t.isQualificationNote=function(e){return e.label.toLowerCase().startsWith("note_")}},41818:function(e,t,r){"use strict";var n=r(16452);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Qualification",{enumerable:!0,get:function(){return a.Qualification}}),Object.defineProperty(t,"setQualification",{enumerable:!0,get:function(){return a.setQualification}}),Object.defineProperty(t,"getQualification",{enumerable:!0,get:function(){return a.getQualification}}),t.helpers=t.themes=t.locales=void 0;var a=r(34259),o=n(r(92984));t.locales=o;var i=n(r(48536));t.themes=i;var u=n(r(29444));t.helpers=u},92984:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizer=t.getBoundT=void 0;var a=n(r(85660)),o=n(r(54078)),i=n(r(28330)),u=n(r(6765)),c=r(65314);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}for(var d={en:i.default,fr:u.default},f={},p=0,h=["fr","en"];p<h.length;p++){var y=h[p],v=new o.default;v.extend(d[y]),f[y]=v}t.getBoundT=function(e){var t=m(e);return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l(l({},r),{},{smart_count:(null==r?void 0:r.smart_count)||1}),a=null==r?void 0:r.country,o="foreign"!==a?(0,c.getEmojiByCountry)(a):null,i="foreign"===a?t("country.foreign"):null;return o||i?"".concat(t(e,n)," ").concat(o||i):t(e,n)}};var m=function(e){var t=f[e]||f.en;return t.t.bind(t)};t.getLocalizer=m},34259:function(e,t,r){"use strict";var n=r(16452),a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.hasSupportedQualification=t.isSupportedQualification=t.getIconByLabel=t.getQualification=t.setQualification=t.Qualification=void 0;var o=a(r(85660)),i=a(r(89679)),u=a(r(59422)),c=a(r(36968)),s=a(r(91966)),l=n(r(37504)),d=a(r(22853)),f=r(60195);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,e);var n=l.qualifications.find(function(e){return e.label===t});if(n){this.icon=r.icon||m(t),this.label=n.label;var a=r.purpose||n.purpose;a&&(this.purpose=a);var o=r.sourceCategory||n.sourceCategory;o&&(this.sourceCategory=o);var u=r.sourceSubCategory||n.sourceSubCategory;u&&(this.sourceSubCategory=u);var c=r.subjects||n.subjects;c&&(this.subjects=c)}else throw Error("No qualification found for the label ".concat(t))}return(0,u.default)(e,[{key:"checkAttributes",value:function(e){if(this.purpose!==e.purpose){if(this.purpose)throw Error("The purpose for the label ".concat(this.label," should be ").concat(this.purpose,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.purposeKnownValues.includes(e.purpose)||d.default.info("This purpose is not listed among the known values: ".concat(e.purpose,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if(this.sourceCategory!==e.sourceCategory){if(this.sourceCategory)throw Error("The sourceCategory for the label ".concat(this.label," should be ").concat(this.sourceCategory,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.sourceCategoryKnownValues.includes(e.sourceCategory)||d.default.info("This sourceCategory is not listed among the known values: ".concat(e.sourceCategory,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if(this.sourceSubCategory!==e.sourceSubCategory){if(this.sourceSubCategory)throw Error("The sourceSubCategory for the label ".concat(this.label," should be ").concat(this.sourceSubCategory,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.sourceSubCategoryKnownValues.includes(e.sourceSubCategory)||d.default.info("This sourceSubCategory is not listed among the known values: ".concat(e.sourceSubCategory,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if((0,s.default)(this.subjects,e.subjects).length>0)throw Error("The subjects for the label ".concat(this.label," should include ").concat(this.subjects,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");var t=(0,s.default)(e.subjects,this.subjects);if(t.length>0){var r=(0,s.default)(t,l.subjectsKnownValues);r.length>0&&d.default.info("These subjects are not listed among the known values: ".concat(r,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}}},{key:"setPurpose",value:function(t){return new e(this.label,y(y({},this.toQualification()),{},{purpose:t}))}},{key:"setSourceCategory",value:function(t){return new e(this.label,y(y({},this.toQualification()),{},{sourceCategory:t}))}},{key:"setSourceSubCategory",value:function(t){return new e(this.label,y(y({},this.toQualification()),{},{sourceSubCategory:t}))}},{key:"setSubjects",value:function(t){return new e(this.label,y(y({},this.toQualification()),{},{subjects:t}))}},{key:"setIcon",value:function(t){return new e(this.label,y(y({},this.toQualification()),{},{icon:t}))}},{key:"toQualification",value:function(){return{icon:this.icon,label:this.label,purpose:this.purpose,sourceCategory:this.sourceCategory,sourceSubCategory:this.sourceSubCategory,subjects:this.subjects}}}]),e}();t.Qualification=v,v.getByLabel=function(e){return new v(e)},t.setQualification=function(e,t){if(t.label){var r=t;return new v(t.label).checkAttributes(t),t.icon||(r=new v(t.label,t).setIcon(m(t.label))),(0,c.default)(e,"metadata.qualification",r)}throw Error("You must set a label to qualify")},t.getQualification=function(e){var t,r=null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.qualification;return r?new v(r.label,r.qualification).toQualification():null};var m=function(e){var t,r=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(f.iconLabelPairs);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.labels.includes(e))return n.icon}}catch(e){r.e(e)}finally{r.f()}return d.default.info("The ".concat(e," qualification does not seem to have an icon.\n    Please open an issue on https://github.com/cozy/cozy-client/issues")),""};t.getIconByLabel=m;var g=function(e){return l.qualifications.some(function(t){return t.label===e})};t.isSupportedQualification=g,t.hasSupportedQualification=function(e){var t,r;return g(null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:null===(r=t.qualification)||void 0===r?void 0:r.label)}},67348:function(e,t,r){"use strict";var n,a,o,i,u,c,s,l,d,f=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=function(e){var t=e._id||e.id;return E({_id:t,id:t,_type:e._type||_.DOCTYPE_FILES},e)},t.ensureFilePath=function(e,t){if(e.path)return e;if(!t||!t.path)throw Error("Could not define a file path for ".concat(e._id||e.id));return E({path:t.path+"/"+e.name},e)},t.getParentFolderId=function(e){var t=(0,m.default)(e,"attributes.dir_id");return""===t?null:t},t.downloadFile=t.copy=t.fetchBlobFileById=t.isFromKonnector=t.hasCertifications=t.hasQualifications=t.isPlainText=t.uploadFileWithConflictStrategy=t.generateFileNameForRevision=t.generateNewFileNameOnConflict=t.overrideFileForPath=t.move=t.getFullpath=t.hasMetadataAttribute=t.fetchFilesByQualificationRules=t.saveFileQualification=t.isSharingShorcutNew=t.isSharingShortcutNew=t.isSharingShorcut=t.isSharingShortcut=t.getSharingShortcutTargetDoctype=t.getSharingShortcutTargetMime=t.getSharingShortcutStatus=t.isShortcut=t.shouldBeOpenedByOnlyOffice=t.isOnlyOfficeFile=t.isEncryptedFileOrFolder=t.isEncryptedFolder=t.getEncryptiondRef=t.isEncrypted=t.isNote=t.isDirectory=t.isFile=t.splitFilename=t.ALBUMS_DOCTYPE=void 0;var p=f(r(11449)),h=f(r(10687)),y=f(r(85660)),v=r(25976),m=f(r(27361)),g=f(r(47037)),b=f(r(18721)),w=f(r(10691)),O=r(34259),k=r(71450),_=r(87941);f(r(18621));var x=f(r(22853));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){(0,y.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var P="file";t.ALBUMS_DOCTYPE="io.cozy.photos.albums";var C=/(.+)(\..*)$/,A=function(e){if(!(0,g.default)(e.name))throw Error("file should have a name property");if("file"===e.type){var t=e.name.match(C);if(t)return{filename:t[1],extension:t[2]}}return{filename:e.name,extension:""}};t.splitFilename=A;var j=function(e){return e&&e.type===P};t.isFile=j,t.isDirectory=function(e){return e&&"directory"===e.type};var T=function(e){return!!(e&&e.name&&e.name.endsWith(".cozy-note"))&&e.type===P&&!!e.metadata&&void 0!==e.metadata.title&&void 0!==e.metadata.version};t.isNote=T;var M=function(e){return!!e.encrypted};t.isEncrypted=M;var D=function(e){return(0,m.default)(e,"referenced_by",[]).find(function(e){return e.type===_.DOCTYPE_FILES_ENCRYPTION})};t.getEncryptiondRef=D;var R=function(e){return!!D(e)};t.isEncryptedFolder=R,t.isEncryptedFileOrFolder=function(e){return R(e)||M(e)};var I=function(e){return j(e)&&!T(e)&&("text"===e.class||"spreadsheet"===e.class||"slide"===e.class)};t.isOnlyOfficeFile=I,t.shouldBeOpenedByOnlyOffice=function(e){return I(e)&&!e.name.endsWith(".txt")&&!e.name.endsWith(".md")},t.isShortcut=function(e){return e&&"shortcut"===e.class};var N=function(e){return(0,m.default)(e,"metadata.sharing.status")};t.getSharingShortcutStatus=N,t.getSharingShortcutTargetMime=function(e){return(0,m.default)(e,"metadata.target.mime")},t.getSharingShortcutTargetDoctype=function(e){return(0,m.default)(e,"metadata.target._type")};var F=function(e){return!!N(e)};t.isSharingShortcut=F,t.isSharingShorcut=function(e){return x.default.warn("Deprecation: `isSharingShorcut` is deprecated, please use `isSharingShortcut` instead"),F(e)};var L=function(e){return"new"===N(e)};t.isSharingShortcutNew=L,t.isSharingShorcutNew=function(e){return x.default.warn("Deprecation: `isSharingShorcutNew` is deprecated, please use `isSharingShortcutNew` instead"),L(e)};var z=(n=(0,h.default)(p.default.mark(function e(t,r,n){var a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,O.setQualification)(r,n),e.abrupt("return",t.collection(_.DOCTYPE_FILES).updateMetadataAttribute(r._id,a.metadata));case 2:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)});t.saveFileQualification=z;var B=(a=(0,h.default)(p.default.mark(function e(t,r){var n,a,o,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rules,a=r.count,o=(0,k.Q)(_.DOCTYPE_FILES).where(E({},n)).partialIndex({trashed:!1}).indexFields(["cozyMetadata.updatedAt","metadata.qualification"]).sortBy([{"cozyMetadata.updatedAt":"desc"}]).limitBy(a||1),e.next=4,t.query(o);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.fetchFilesByQualificationRules=B,t.hasMetadataAttribute=function(e){var t=e.file,r=e.attribute;return(0,b.default)(t,"metadata.".concat(r))};var U=(o=(0,h.default)(p.default.mark(function e(t,r,n){var a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw Error("You must provide a dirId");case 2:return e.next=4,t.query((0,k.Q)(_.DOCTYPE_FILES).getById(r));case 4:return a=e.sent.data,o=(0,w.default)(a.path,"/"),e.abrupt("return","".concat(o,"/").concat(n));case 8:case"end":return e.stop()}},e)})),function(e,t,r){return o.apply(this,arguments)});t.getFullpath=U;var H=(i=(0,h.default)(p.default.mark(function e(t,r,n){var a,o,i,u,c,s=arguments;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(s.length>3&&void 0!==s[3]?s[3]:{force:!1}).force,e.prev=1,"io.cozy.remote.nextcloud.files"!==r._type){e.next=10;break}if("io.cozy.remote.nextcloud.files"!==n._type){e.next=7;break}return e.next=6,t.collection("io.cozy.remote.nextcloud.files").move(r,n);case 6:case 9:case 13:return e.abrupt("return",{moved:void 0,deleted:null});case 7:return e.next=9,t.collection("io.cozy.remote.nextcloud.files").moveToCozy(r,n);case 10:if("io.cozy.remote.nextcloud.files"!==n._type){e.next=14;break}return e.next=13,t.collection("io.cozy.remote.nextcloud.files").moveFromCozy(n,r);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(1),e.t0;case 19:return e.prev=19,e.next=22,t.collection(_.DOCTYPE_FILES).updateFileMetadata(r._id,{dir_id:n._id});case 22:return o=e.sent,e.abrupt("return",{moved:o.data,deleted:null});case 26:if(e.prev=26,e.t1=e.catch(19),!(409===e.t1.status&&a)){e.next=43;break}return e.next=31,U(t,n._id,r.name);case 31:return i=e.sent,e.next=34,t.collection(_.DOCTYPE_FILES).statByPath(i);case 34:return u=e.sent,e.next=37,t.collection(_.DOCTYPE_FILES).destroy(u.data);case 37:return e.next=39,t.collection(_.DOCTYPE_FILES).updateFileMetadata(r._id,{dir_id:n._id});case 39:return c=e.sent,e.abrupt("return",{moved:c.data,deleted:u.data.id});case 43:throw e.t1;case 44:case"end":return e.stop()}},e,null,[[1,16],[19,26]])})),function(e,t,r){return i.apply(this,arguments)});t.move=H;var G=(u=(0,h.default)(p.default.mark(function e(t,r,n,a){var o,i,u,c,s,l,d,f;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(o=r).endsWith("/")||(o+="/"),i=t.collection(_.DOCTYPE_FILES),e.prev=3,e.next=6,i.statByPath(o+n.name);case 6:return c=(u=e.sent.data).id,s=u.dir_id,e.next=10,i.updateFile(n,{dirId:s,fileId:c,metadata:a});case 10:return l=e.sent,e.abrupt("return",l);case 14:if(e.prev=14,e.t0=e.catch(3),!/Not Found/.test(e.t0)){e.next=24;break}return e.next=19,i.ensureDirectoryExists(o);case 19:return d=e.sent,e.next=22,i.createFile(n,{dirId:d,metadata:a});case 22:return f=e.sent,e.abrupt("return",f);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,null,[[3,14]])})),function(e,t,r,n){return u.apply(this,arguments)});t.overrideFileForPath=G;var Z=function(e,t){var r=(null==t?void 0:t.delimiter)||"_",n=new RegExp("(".concat(r,")([0-9]+)$")),a=e.match(n);if(!a)return"".concat(e).concat(r,"1");var o=parseInt(a[2]);return o++,e.replace(new RegExp("(".concat(r,")([0-9]+)$")),"".concat(r).concat(o))};t.generateNewFileNameOnConflict=Z,t.generateFileNameForRevision=function(e,t,r){var n=A(e),a=n.filename,o=n.extension;return"".concat(a,"_").concat(r(t.updated_at,"DD MMMM - HH[h]mm")).concat(o)};var W=(c=(0,h.default)(p.default.mark(function e(t,r,n){var a,o,i,u,c,s,l,d,f,h,y;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.name,o=n.dirId,i=n.conflictStrategy,u=n.conflictOptions,e.prev=1,e.next=4,U(t,o,a);case 4:return c=e.sent,e.next=7,t.collection(_.DOCTYPE_FILES).statByPath(c);case 7:if(s=e.sent.data.id,"erase"!==i){e.next=16;break}return e.next=12,t.collection(_.DOCTYPE_FILES).updateFile(r,E(E({},n),{},{fileId:s}));case 12:return l=e.sent,e.abrupt("return",l);case 16:return f=(d=A({name:a,type:"file"})).filename,h=d.extension,y=Z(f,u)+h,e.abrupt("return",W(t,r,E(E({},n),{},{name:y})));case 19:e.next=26;break;case 21:if(e.prev=21,e.t0=e.catch(1),!/Not Found/.test(e.t0.message)){e.next=25;break}return e.abrupt("return",t.collection(_.DOCTYPE_FILES).createFile(r,n));case 25:throw e.t0;case 26:case"end":return e.stop()}},e,null,[[1,21]])})),function(e,t,r){return c.apply(this,arguments)});t.uploadFileWithConflictStrategy=W,t.isPlainText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?/^text\//.test(e):/\.(txt|md)$/.test(t)},t.hasQualifications=function(e){return!!(0,m.default)(e,"metadata.qualification")},t.hasCertifications=function(e){return(0,m.default)(e,"metadata.carbonCopy",!1)||(0,m.default)(e,"metadata.electronicSafe",!1)},t.isFromKonnector=function(e){return(0,b.default)(e,"cozyMetadata.sourceAccount")};var q=(s=(0,h.default)(p.default.mark(function e(t,r){var n,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collection(_.DOCTYPE_FILES),e.next=3,n.fetchFileContentById(r);case 3:return a=e.sent,e.next=6,a.blob();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)});t.fetchBlobFileById=q;var V=(l=(0,h.default)(p.default.mark(function e(t,r,n){var a,o,i,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"io.cozy.remote.nextcloud.files"!==r._type||"io.cozy.remote.nextcloud.files"!==n._type){e.next=6;break}return e.next=4,t.collection("io.cozy.remote.nextcloud.files").copy(r,n);case 4:return a=e.sent,e.abrupt("return",a);case 6:if("io.cozy.remote.nextcloud.files"!==r._type||"io.cozy.files"!==n._type){e.next=11;break}return e.next=9,t.collection("io.cozy.remote.nextcloud.files").moveToCozy(r,n,{copy:!0});case 9:return o=e.sent,e.abrupt("return",o);case 11:if("io.cozy.remote.nextcloud.files"!==n._type){e.next=16;break}return e.next=14,t.collection("io.cozy.remote.nextcloud.files").moveFromCozy(n,r,{copy:!0});case 14:return i=e.sent,e.abrupt("return",i);case 16:return e.next=18,t.collection(_.DOCTYPE_FILES).copy(r._id,void 0,n._id);case 18:return u=e.sent,e.abrupt("return",u);case 22:throw e.prev=22,e.t0=e.catch(0),e.t0;case 25:case"end":return e.stop()}},e,null,[[0,22]])})),function(e,t,r){return l.apply(this,arguments)});t.copy=V;var Q=(d=(0,h.default)(p.default.mark(function e(t){var r,n,a,o,i,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.client,n=t.file,a=t.url,o=t.webviewIntent,i=r.collection(_.DOCTYPE_FILES),!((0,v.isFlagshipApp)()&&o&&!M(n))){e.next=19;break}return e.next=5,null==o?void 0:o.call("isAvailable","downloadFile");case 5:if(e.t1=u=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==u;case 9:if(!e.t0){e.next=13;break}e.t2=u,e.next=14;break;case 13:e.t2=!1;case 14:if(!e.t2){e.next=19;break}return e.next=18,o.call("downloadFile",n);case 18:return e.abrupt("return",e.sent);case 19:if(!M(n)){e.next=21;break}return e.abrupt("return",i.forceFileDownload(a,n.name));case 21:return e.abrupt("return",i.download(n));case 22:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)});t.downloadFile=Q},27899:function(e,t,r){"use strict";var n,a,o,i=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getReferencedFolder=t.createFolderWithReference=t.ensureMagicFolder=t.MAGIC_FOLDERS=void 0;var u=i(r(11449)),c=i(r(10687)),s=i(r(89734));i(r(18621));var l=r(87941),d=r(71450),f="io.cozy.apps",p="administrative",h="photos",y={ADMINISTRATIVE:"".concat(f,"/").concat(p),PHOTOS:"".concat(f,"/").concat(h),PHOTOS_BACKUP:"".concat(f,"/").concat(h,"/mobile"),PHOTOS_UPLOAD:"".concat(f,"/").concat(h,"/upload"),NOTES:"".concat(f,"/notes"),HOME:"".concat(f,"/home"),PAPERS:"".concat(f,"/").concat(p,"/papers"),COACH_CO2:"".concat(f,"/").concat(p,"/coachco2")};t.MAGIC_FOLDERS=y;var v=(n=(0,c.default)(u.default.mark(function e(t,r,n){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={_type:f,_id:r},e.next=3,g(t,a);case 3:if(!(o=e.sent)){e.next=6;break}return e.abrupt("return",o);case 6:if((i=Object.values(y)).includes(r)){e.next=9;break}throw Error("Cannot create Magic folder with id ".concat(r,". Allowed values are ").concat(i.join(", "),"."));case 9:if(n){e.next=11;break}throw Error("Magic folder default path must be defined");case 11:return e.abrupt("return",m(t,n,a));case 12:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)});t.ensureMagicFolder=v;var m=(a=(0,c.default)(u.default.mark(function e(t,r,n){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collection(l.DOCTYPE_FILES),e.next=3,a.ensureDirectoryExists(r);case 3:return o=e.sent,e.next=6,a.addReferencesTo(n,[{_id:o}]);case 6:return e.next=8,a.get(o);case 8:return i=e.sent.data,e.abrupt("return",i);case 11:case"end":return e.stop()}},e)})),function(e,t,r){return a.apply(this,arguments)});t.createFolderWithReference=m;var g=(o=(0,c.default)(u.default.mark(function e(t,r){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,d.Q)(l.DOCTYPE_FILES).partialIndex({type:"directory",trashed:!1}).referencedBy(r));case 2:return n=e.sent.included,e.abrupt("return",n.length>0?(0,s.default)(n,"created_at").pop():null);case 5:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)});t.getReferencedFolder=g},93829:function(e,t){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.deltaLatitude=t.deltaLongitude=t.computeSphericalCenter=t.geodesicDistance=t.computeSpeed=void 0,t.computeSpeed=function(e,t){return e&&t?Math.round(e/t*100)/100:0};var n=function(e){return e*Math.PI/180},a=function(e){return 180*e/Math.PI},o=function(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r};t.geodesicDistance=function(e,t){if((null==e?void 0:e.lon)===void 0||(null==e?void 0:e.lat)===void 0||(null==t?void 0:t.lon)===void 0||(null==t?void 0:t.lat)===void 0)return null;var r=n(e.lon),a=n(e.lat),i=n(t.lon),u=n(t.lat);return o(6378137*(2*Math.asin(Math.sqrt(Math.pow(Math.sin((u-a)/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin((i-r)/2),2)))),2)},t.computeSphericalCenter=function(e){if(e.length<1)return null;if(1===e.length)return e[0];var t,i=0,u=0,c=0,s=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}(e))){o&&(e=o);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,u=!0,c=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==o.return||o.return()}finally{if(c)throw i}}}}(e);try{for(s.s();!(t=s.n()).done;){var l=t.value,d=n(l.lon),f=n(l.lat),p=Math.cos(f)*Math.cos(d),h=Math.cos(f)*Math.sin(d),y=Math.sin(f);i+=p,u+=h,c+=y}}catch(e){s.e(e)}finally{s.f()}var v=i/e.length,m=u/e.length,g=c/e.length,b=a(Math.atan2(m,v));return{lat:o(a(Math.atan2(g,Math.sqrt(v*v+m*m))),13),lon:o(b,13)}},t.deltaLongitude=function(e,t){return o(a(t/(6378137*Math.cos(n(e)))),13)},t.deltaLatitude=function(e){return o(e/(40075e3/360),13)}},4034:function(e,t,r){"use strict";var n=r(16452);Object.defineProperty(t,"__esModule",{value:!0}),t.geo=t.user=t.paper=t.dacc=t.sharing=t.timeseries=t.document=t.contact=t.utils=t.permission=t.note=t.account=t.konnectorFolder=t.folder=t.file=t.applications=t.instance=t.trigger=t.accounts=t.triggers=void 0;var a=n(r(20786));t.trigger=a;var o=n(r(5499));t.instance=o;var i=n(r(23963));t.applications=i;var u=n(r(67348));t.file=u;var c=n(r(27899));t.folder=c;var s=n(r(3857));t.konnectorFolder=s;var l=n(r(94564));t.account=l;var d=n(r(49666));t.note=d;var f=n(r(13001));t.permission=f;var p=n(r(1028));t.utils=p;var h=n(r(40996));t.contact=h;var y=n(r(41818));t.document=y;var v=n(r(48398));t.timeseries=v;var m=n(r(32672));t.sharing=m;var g=n(r(61645));t.dacc=g;var b=n(r(87067));t.paper=b;var w=n(r(51398));t.user=w;var O=n(r(93829));t.geo=O,t.triggers=a,t.accounts=l},5499:function(e,t,r){"use strict";var n,a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiskInfos=t.hasPasswordDefinedAttribute=t.buildPremiumLink=t.hasAnOffer=t.shouldDisplayOffers=t.getUuid=t.isFreemiumUser=t.arePremiumLinksEnabled=t.isSelfHosted=void 0;var o=a(r(11449)),i=a(r(10687)),u=a(r(27361)),c=r(71450),s=function(e){return!(0,u.default)(e,"context.data.manager_url")};t.isSelfHosted=s;var l=function(e){return!!(0,u.default)(e,"context.data.enable_premium_links")};t.arePremiumLinksEnabled=l;var d=function(e){return 5e10>=parseInt((0,u.default)(e,"diskUsage.data.quota",!1))};t.isFreemiumUser=d;var f=function(e){return(0,u.default)(e,"instance.data.uuid")};t.getUuid=f,t.shouldDisplayOffers=function(e){return!s(e)&&l(e)&&f(e)&&d(e)},t.hasAnOffer=function(e){return!s(e)&&l(e)&&f(e)&&!d(e)},t.buildPremiumLink=function(e){var t=(0,u.default)(e,"context.data.manager_url",!1),r=f(e);return t&&r?"".concat(t,"/cozy/instances/").concat(r,"/premium"):null};var p=(n=(0,i.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchQueryAndGetFromState({definition:(0,c.Q)("io.cozy.settings").getById("io.cozy.settings.instance"),options:{as:"io.cozy.settings/io.cozy.settings.instance",singleDocData:!0}});case 3:return r=e.sent.data.password_defined,e.abrupt("return",!!r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return n.apply(this,arguments)});t.hasPasswordDefinedAttribute=p;var h=function(e){return 1e-9*e},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"".concat(e%1?e.toFixed(t):e)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return{diskQuota:h(t),diskUsage:h(e),percentUsage:e/t*100}};t.makeDiskInfos=function(e,t){var r=v(+e,t?+t:void 0),n=r.diskQuota,a=r.diskUsage,o=r.percentUsage;return{humanDiskQuota:y(n),humanDiskUsage:y(a),percentUsage:Math.round(o).toString()}}},3857:function(e,t,r){"use strict";var n,a,o,i,u,c,s,l=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.findKonnectorAccountFolderByReference=t.buildFolderPermission=t.buildMainFolderPath=t.buildFolderPath=t.statDirectoryByPath=t.createDirectoryByPath=t.ensureKonnectorFolder=void 0;var d=l(r(11449)),f=l(r(61874)),p=l(r(10687)),h=r(27899);l(r(18621));var y=r(94564),v=r(92984),m=r(71450),g="io.cozy.files",b=(n=(0,p.default)(d.default.mark(function e(t,r){var n,a,o,i,u,c,s,l,p,m,g,b,x,S,E;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.konnector,a=r.account,o=r.lang,i=t.collection("io.cozy.permissions"),u=(0,v.getLocalizer)(o),e.next=5,Promise.all([(0,h.ensureMagicFolder)(t,h.MAGIC_FOLDERS.ADMINISTRATIVE,u("MagicFolders.administrative")),(0,h.ensureMagicFolder)(t,h.MAGIC_FOLDERS.PHOTOS,u("MagicFolders.photos"))]);case 5:return c=e.sent,l=(s=(0,f.default)(c,2))[0],p=s[1],m=(0,y.getAccountName)(a),e.next=12,N({client:t,slug:n.slug,sourceAccountIdentifier:m});case 12:if(!(g=e.sent)){e.next=15;break}return e.abrupt("return",g);case 15:return e.next=17,F({client:t,slug:n.slug});case 17:if(!(b=e.sent)){e.next=22;break}return e.next=21,function(e){return L.apply(this,arguments)}({client:t,mainFolder:b,konnector:n,sourceAccountIdentifier:m});case 21:return e.abrupt("return",e.sent);case 22:return x=_(n,{administrative:l.path,photos:p.path}),e.next=25,O(t,x);case 25:if(e.t0=e.sent,e.t0){e.next=30;break}return e.next=29,w(t,x);case 29:e.t0=e.sent;case 30:return R({client:t,folder:e.t0,konnector:n}),S=k(n,a,{administrative:l.path,photos:p.path}),e.next=35,O(t,S);case 35:if(e.t1=e.sent,e.t1){e.next=40;break}return e.next=39,w(t,S);case 39:e.t1=e.sent;case 40:return E=e.t1,e.next=43,Promise.all([i.add(n,j(E)),R({client:t,folder:E,konnector:n}),I({client:t,folder:E,sourceAccountIdentifier:m})]);case 43:return e.abrupt("return",E);case 44:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});t.ensureKonnectorFolder=b;var w=(a=(0,p.default)(d.default.mark(function e(t,r){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(g).createDirectoryByPath(r);case 2:return n=e.sent.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.createDirectoryByPath=w;var O=(o=(0,p.default)(d.default.mark(function e(t,r){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.collection(g).statByPath(r);case 3:if(!(n=e.sent).data.trashed){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",n.data);case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0&&404===e.t0.status)){e.next=13;break}return e.abrupt("return",null);case 13:throw Error(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[0,9]])})),function(e,t){return o.apply(this,arguments)});t.statDirectoryByPath=O;var k=function(e,t){var r,n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=T(((null==e?void 0:null===(r=e.folders)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.defaultDir)||"$administrative/$konnector/$account").replace(/(\/+)/g,"/"),"/");x(o)||(o="$administrative/"+o);var i=o.split("/",1),u=E(o,i[0]),c=P(i[0],a),s=C(u,{konnector:e.name,account:(0,y.getAccountName)(t).replace(A,"-")});return"/".concat(c,"/").concat(s)};t.buildFolderPath=k;var _=function(e){var t,r,n,a,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=T(((null==e?void 0:null===(t=e.folders)||void 0===t?void 0:null===(r=t[0])||void 0===r?void 0:null===(n=r.defaultDir)||void 0===n?void 0:null===(a=n.split("/"))||void 0===a?void 0:null===(o=a.slice(0,-1))||void 0===o?void 0:o.join("/"))||"$administrative/$konnector").replace(/(\/+)/g,"/"),"/");x(u)||(u="$administrative/"+u);var c=u.split("/",1),s=E(u,c[0]),l=P(c[0],i),d=C(s,{konnector:e.name});return"/".concat(l,"/").concat(d)};t.buildMainFolderPath=_;var x=function(e){return S.some(function(t){return e.startsWith(t)})},S=["$administrative","$photos"],E=function(e,t){var r=e.substring(t.length);return""===r&&(r="$konnector/$account"),r},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return T((t[e.slice(1)]||"Administrative").replace(/(\/+)/g,"/"),"/")},C=function(e,t){return T(e.replace(/(\/+)/g,"/"),"/").split("/").map(function(e){return(null==t?void 0:t[e.slice(1)])||e}).join("/")},A=/\//g,j=function(e){return{saveFolder:{type:g,values:[e._id],verbs:["GET","PATCH","POST"]}}};t.buildFolderPermission=j;var T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\\s";return e.replace(new RegExp("^([".concat(t,"]*)(.*?)([").concat(t,"]*)$")),"$2")},M=function(e,t){var r;return!!(null===(r=e.referenced_by)||void 0===r?void 0:r.find(function(e){return"io.cozy.konnectors"===e.type&&e.id==="io.cozy.konnectors/"+t}))},D=function(e,t){var r;return!!(null===(r=e.referenced_by)||void 0===r?void 0:r.find(function(e){return"io.cozy.accounts.sourceAccountIdentifier"===e.type&&(!t||e.id===t)}))},R=(i=(0,p.default)(d.default.mark(function e(t){var r,n,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.client,n=t.folder,a=t.konnector,o=r.collection(g),M(n,a.slug)){e.next=5;break}return e.next=5,o.addReferencesTo(a,[n]);case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),I=(u=(0,p.default)(d.default.mark(function e(t){var r,n,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.client,n=t.folder,a=t.sourceAccountIdentifier,o=r.collection(g),D(n,a)){e.next=5;break}return e.next=5,o.addReferencesTo({_id:a,_type:"io.cozy.accounts.sourceAccountIdentifier"},[n]);case 5:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)}),N=(c=(0,p.default)(d.default.mark(function e(t){var r,n,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.client,n=t.slug,a=t.sourceAccountIdentifier,e.next=3,r.query((0,m.Q)(g).partialIndex({type:"directory",trashed:!1}).referencedBy({_type:"io.cozy.konnectors",_id:"io.cozy.konnectors/".concat(n)}));case 3:return o=e.sent.included,e.abrupt("return",o.find(function(e){return D(e,a)}));case 6:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)});t.findKonnectorAccountFolderByReference=N;var F=(s=(0,p.default)(d.default.mark(function e(t){var r,n,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.client,n=t.slug,e.next=3,r.query((0,m.Q)(g).partialIndex({type:"directory",trashed:!1}).referencedBy({_type:"io.cozy.konnectors",_id:"io.cozy.konnectors/".concat(n)}));case 3:return a=e.sent.included,e.abrupt("return",a.find(function(e){return!D(e)}));case 6:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)});function L(){return(L=(0,p.default)(d.default.mark(function e(t){var r,n,a,o,i,u;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.client,n=t.mainFolder,a=t.konnector,o=t.sourceAccountIdentifier,i=n.path+"/"+o,e.next=4,O(r,i);case 4:if(e.t0=e.sent,e.t0){e.next=9;break}return e.next=8,w(r,i);case 8:e.t0=e.sent;case 9:return u=e.t0,e.next=12,R({client:r,folder:u,konnector:a});case 12:return e.next=14,I({client:r,folder:u,sourceAccountIdentifier:o});case 14:return e.abrupt("return",u);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}},86092:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeCategories=h,t.areTermsValid=y,t.isPartnershipValid=v,t.sanitize=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return!e.categories&&e.category&&"string"==typeof e.category&&(t.categories=[e.category],delete t.category),t.categories=h(t.categories),"object"==typeof e.name&&(t.name=e.name.en),e.available_version&&(t.availableVersion=e.available_version,delete t.available_version),e.latest_version&&(t.latestVersion=e.latestVersion,delete t.latest_version),t.terms&&!y(t.terms)&&delete t.terms,t.partnership&&!v(t.partnership)&&delete t.partnership,t.fields&&(t.fields=g(e.fields)),t},t.getIdentifier=t.sanitizeIdentifier=t.legacyLoginFields=t.ROLE_IDENTIFIER=void 0;var a=n(r(85660)),o=n(r(59242)),i=n(r(50361)),u=n(r(70894));function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var l="identifier";t.ROLE_IDENTIFIER=l;var d=["login","identifier","new_identifier","email"];t.legacyLoginFields=d;var f=["secret","dob","code","answer","access_token","refresh_token","appSecret"],p=["banking","cozy","energy","health","host_provider","insurance","isp","mes_infos","online_services","others","partners","press","productivity","ptnb","public_service","shopping","social","telecom","transport"];function h(e){if(!e)return["others"];var t=e.filter(function(e){return p.includes(e)});return t.length?t:["others"]}function y(e){return!!(e&&e.id&&e.url&&e.version)}function v(e){return!!(e&&e.description)}var m=function(e){var t=(0,i.default)(e),r=!1;for(var n in t)t[n].role===l&&(r?delete t[n].role:r=!0);if(r)return t;var a,o=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return c(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(d);try{for(o.s();!(a=o.n()).done;){var u=a.value;if(t[u])return t[u].role=l,t}}catch(e){o.e(e)}finally{o.f()}for(var s in t)if("password"!==t[s].type){t[s].role=l;break}return t};t.sanitizeIdentifier=m,t.getIdentifier=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.default)(m(e),function(e){return e.role===l})||null};var g=(0,o.default)([function(e){var t=(0,i.default)(e);return delete t.advancedFields,t},m,function(e){var t=(0,i.default)(e);for(var r in t){var n=t[r],a=void 0===n.required?n.isRequired:n.required;t[r].required="boolean"!=typeof a||a}return t},function(e){var t=(0,i.default)(e);for(var r in t){var n=t[r];"boolean"!=typeof n.encrypted&&(n.encrypted="password"===n.type||f.includes(r))}return t}])},49666:function(e,t,r){"use strict";var n,a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchURL=t.generateUrlForNote=t.generatePrivateUrl=void 0;var o=a(r(11449)),i=a(r(10687)),u=r(72004),c=a(r(22853)),s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.returnUrl,a=new URL(e);return n&&a.searchParams.set("returnUrl",n),a.hash="#/n/".concat(t.id),a.toString()};t.generatePrivateUrl=s,t.generateUrlForNote=function(e,t){return c.default.warn("generateUrlForNote is deprecated. Please use models.note.generatePrivateUrl instead"),s(e,t)};var l=(n=(0,i.default)(o.default.mark(function e(t,r){var n,a,i,c,s,l,d,f,p,h,y,v=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>2&&void 0!==v[2]?v[2]:{},e.next=3,t.getStackClient().collection("io.cozy.notes").fetchURL({_id:r.id});case 3:if(i=(a=e.sent.data).note_id,c=a.subdomain,s=a.protocol,l=a.instance,d=a.sharecode,f=a.public_name,!d){e.next=18;break}return(h=[["id",i]]).push(["sharecode",d]),f&&h.push(["username",f]),e.abrupt("return",(0,u.generateWebLink)({cozyUrl:"".concat(s,"://").concat(l),searchParams:h,pathname:null!==(p=n.pathname)&&void 0!==p?p:"/public/",slug:"notes",subDomainType:c}));case 18:return e.abrupt("return",(0,u.generateWebLink)({cozyUrl:"".concat(s,"://").concat(l),pathname:null!==(y=n.pathname)&&void 0!==y?y:"",slug:"notes",subDomainType:c,hash:"/n/".concat(i)}));case 19:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});t.fetchURL=l},87067:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.isForeignPaper=t.makeExpirationDescription=t.makeExpiresInMessage=t.makeExpiredMessage=t.formatContactValue=t.getTranslatedNameForContact=t.formatOtherMetadataValue=t.getTranslatedNameForOtherMetadata=t.formatInformationMetadataValue=t.getTranslatedNameForInformationMetadata=t.formatDateMetadataValue=t.getTranslatedNameForDateMetadata=t.getMetadataQualificationType=t.formatMetadataQualification=t.makeMetadataQualification=t.isExpiringSoon=t.isExpired=t.computeExpirationNoticeLink=t.computeExpirationNoticeDate=t.computeExpirationDate=t.isExpiring=t.KNOWN_BILLS_ATTRIBUTES_NAMES=t.KNOWN_OTHER_METADATA_NAMES=t.KNOWN_INFORMATION_METADATA_NAMES=t.KNOWN_DATE_METADATA_NAMES=void 0;var a=n(r(75888)),o=n(r(86802)),i=n(r(83386)),u=n(r(95110)),c=n(r(12102)),s=r(92984),l=r(61774),d=r(40996),f=n(r(27361)),p=r(65314),h={national_id_card:"https://www.service-public.fr/particuliers/vosdroits/N358",residence_permit:"https://www.service-public.fr/particuliers/vosdroits/N110",passport:"https://www.service-public.fr/particuliers/vosdroits/N360",driver_license:"https://permisdeconduire.ants.gouv.fr/demarches-en-ligne/perte-vol-deterioration-fin-de-validite-ou-changement-d-etat-civil"},y=["AObtentionDate","BObtentionDate","CObtentionDate","DObtentionDate","obtentionDate","expirationDate","referencedDate","issueDate","shootingDate","date","datetime"];t.KNOWN_DATE_METADATA_NAMES=y;var v=["number","bicNumber","country","refTaxIncome","contractType","netSocialAmount","employerName","vehicle.licenseNumber","vehicle.confidentialNumber","noticePeriod"];t.KNOWN_INFORMATION_METADATA_NAMES=v;var m=["contact","page","qualification"];t.KNOWN_OTHER_METADATA_NAMES=m;var g=["amount","subtype","employer"];t.KNOWN_BILLS_ATTRIBUTES_NAMES=g;var b=function(e){var t,r,n,a,o,i=null===(t=e.metadata)||void 0===t?void 0:null===(r=t.qualification)||void 0===r?void 0:r.label,u=null===(n=e.metadata)||void 0===n?void 0:n.country,c=null===(a=e.metadata)||void 0===a?void 0:a.expirationDate,s=null===(o=e.metadata)||void 0===o?void 0:o.noticePeriod;return"national_id_card"===i&&(!u||"fr"===u)&&!!c&&!!s},w=function(e){var t,r,n=null===(t=e.metadata)||void 0===t?void 0:t.expirationDate,a=null===(r=e.metadata)||void 0===r?void 0:r.noticePeriod;return!!n&&!!a},O=function(e){var t,r,n,a=null===(t=e.metadata)||void 0===t?void 0:null===(r=t.qualification)||void 0===r?void 0:r.label,o=null===(n=e.metadata)||void 0===n?void 0:n.referencedDate,i=e.created_at;return"personal_sporting_licence"===a&&(!!o||!!i)};t.isExpiring=function(e){return!!(b(e)||w(e)||O(e))};var k=function(e){if(b(e)||w(e)){var t;return new Date(null===(t=e.metadata)||void 0===t?void 0:t.expirationDate)}if(O(e)){var r,n=null===(r=e.metadata)||void 0===r?void 0:r.referencedDate,a=e.created_at;return(0,o.default)(new Date(null!=n?n:a),{days:365})}return null};t.computeExpirationDate=k;var _=function(e){if(b(e)||w(e)){var t;return parseInt(null===(t=e.metadata)||void 0===t?void 0:t.noticePeriod,10)}return O(e)?15:null},x=function(e){var t=k(e);if(null==t)return null;var r=_(e);return null==r?null:(0,i.default)(t,{days:r})};t.computeExpirationNoticeDate=x,t.computeExpirationNoticeLink=function(e){var t,r,n=null===(t=e.metadata)||void 0===t?void 0:null===(r=t.qualification)||void 0===r?void 0:r.label;return n&&h[n]||null},t.isExpired=function(e){var t=new Date,r=k(e);return null!=r&&r<=t},t.isExpiringSoon=function(e){var t=new Date,r=k(e),n=x(e);return null!=r&&null!=n&&n<=t&&t<r};var S=function(e){var t=e.metadata,r=e.knownMetadataPath,n=e.value||(0,f.default)(t,r,null)||null;return Object.keys(t).some(function(e){return r.startsWith(e)})||"contact"===r?{name:r,value:n}:null};t.makeMetadataQualification=S,t.formatMetadataQualification=function(e){var t=y.map(function(t){return S({metadata:e,knownMetadataPath:t})}).filter(Boolean).filter(function(e,t,r){return r.length>1?"datetime"!==e.name:e}),r=v.map(function(t){return S({metadata:e,knownMetadataPath:t})}).filter(Boolean),n=m.map(function(t){var r,n="qualification"===t?null===(r=e[t])||void 0===r?void 0:r.label:e[t];return S({metadata:e,knownMetadataPath:t,value:n})}).filter(Boolean);return[].concat((0,a.default)(t),(0,a.default)(r),(0,a.default)(n))},t.getMetadataQualificationType=function(e){return y.includes(e)?"date":v.includes(e)?"information":m.includes(e)?"contact"===e?"contact":"other":g.includes(e)?"bills":null},t.getTranslatedNameForDateMetadata=function(e,t){var r=t.lang;return(0,s.getLocalizer)(r)("Scan.qualification.date.title.".concat(e))},t.formatDateMetadataValue=function(e,t){var r=t.lang,n=t.f,a=(0,s.getLocalizer)(r);return e?n(e,"en"===r?"LL/dd/yyyy":"dd/LL/yyyy"):a("Scan.qualification.noInfo")},t.getTranslatedNameForInformationMetadata=function(e,t){var r=t.lang,n=t.qualificationLabel,a=(0,s.getLocalizer)(r);return a("number"===e?"Scan.qualification.information.title.".concat(n,".").concat(e):"Scan.qualification.information.title.".concat(e))},t.formatInformationMetadataValue=function(e,t){var r=t.lang,n=t.name,a=t.qualificationLabel,o=(0,s.getLocalizer)(r),i=(0,l.getLocalizer)(r).t;return"number"==typeof e||e?"noticePeriod"===n?"".concat(e," ").concat(o("Scan.qualification.information.day",{smart_count:e})):"contractType"===n?o("Scan.attributes.contractType.".concat(e),{_:e}):"refTaxIncome"===n||"netSocialAmount"===n||"amount"===n||"number"===n&&"pay_sheet"===a?"".concat(e," €"):"country"===n&&(0,p.isValidCountryCodeTranslation)(r,e)?i("countries.".concat(e)):e:o("Scan.qualification.noInfo")},t.getTranslatedNameForOtherMetadata=function(e,t){var r=t.lang;return(0,s.getLocalizer)(r)("Scan.qualification.".concat(e))},t.formatOtherMetadataValue=function(e,t){var r=t.lang,n=t.name,a=(0,s.getLocalizer)(r);return"qualification"===n?a("Scan.items.".concat(e),{smart_count:1}):a("Scan.qualification.".concat(e))},t.getTranslatedNameForContact=function(e){var t=e.lang;return(0,s.getLocalizer)(t)("Scan.qualification.contact")},t.formatContactValue=function(e){return e&&e.length>0?e.map(function(e){return"".concat((0,d.getDisplayName)(e))}).join(", "):""},t.makeExpiredMessage=function(e){var t=e.lang;return(0,s.getLocalizer)(t)("Scan.expiration.expired")},t.makeExpiresInMessage=function(e,t){var r=t.lang;return(0,s.getLocalizer)(r)("Scan.expiration.expiresIn",{duration:(0,u.default)(new Date(e),{locale:"fr"===r?c.default:void 0})})},t.makeExpirationDescription=function(e,t){var r=t.lang;return(0,s.getLocalizer)(r)("Scan.expiration.description",{duration:(0,u.default)(new Date(e),{locale:"fr"===r?c.default:void 0})})},t.isForeignPaper=function(e){var t;return null!==(t=e.metadata)&&void 0!==t&&!!t.country&&"fr"!==e.metadata.country.toLowerCase()}},13001:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.isReadOnly=v,t.fetchOwn=m,t.isForType=b,t.isDocumentReadOnly=function(e){return O.apply(this,arguments)},t.isShortcutCreatedOnTheRecipientCozy=void 0;var a=n(r(85660)),o=n(r(11449)),i=n(r(10687)),u=n(r(75888)),c=n(r(25325)),s=n(r(27361));n(r(18621));var l=r(71450),d=r(67348),f=r(87941),p=n(r(22853));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.writability;return e.verbs&&e.verbs.length>0&&0===(0,c.default)(e.verbs,["ALL"].concat((0,u.default)(void 0===r?["PATCH","POST","PUT","DELETE"]:r))).length}function m(e){return g.apply(this,arguments)}function g(){return(g=(0,i.default)(o.default.mark(function e(t){var r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.collection("io.cozy.permissions"),e.next=3,r.fetchOwnPermissions();case 3:if(n=e.sent,a=(0,s.default)(n,"data.attributes.permissions")){e.next=7;break}throw"Can't get self permissions";case 7:return e.abrupt("return",Object.values(a));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function b(e,t){return e.type===t||e.type+".*"===t}function w(){return(w=(0,i.default)(o.default.mark(function e(t){var r,n,a,u,c,s,p,h,v,g,w;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w=function(){return(w=(0,i.default)(o.default.mark(function e(t){var r,n,a,i,u,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.doc,n=t.client,!(i=(a=t.perms).find(function(e){if(!e.values)return!0;var t=r[e.selector||"id"];return e.values.includes(t)}))){e.next=6;break}return e.abrupt("return",i);case 6:if(c!==f.DOCTYPE_FILES){e.next=16;break}if(u=(0,d.getParentFolderId)(r),e.t0=u,!e.t0){e.next=13;break}return e.next=12,h(u);case 12:e.t0=e.sent;case 13:if(!(s=e.t0)){e.next=16;break}return e.abrupt("return",g({doc:s,perms:a,client:n}));case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)},g=function(e){return w.apply(this,arguments)},v=function(){return(v=(0,i.default)(o.default.mark(function e(t){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,l.Q)(f.DOCTYPE_FILES).getById(t),e.next=3,n.query(r);case 3:return a=e.sent,e.abrupt("return",a&&a.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)},h=function(e){return v.apply(this,arguments)},r=t.document,n=t.client,a=t.permissions,u=r._id||r.id,c=r._type||r.type,s=y(y({},r),{},{id:u,type:c}),!a){e.next=12;break}e.t0=a,e.next=15;break;case 12:return e.next=14,m(n);case 14:e.t0=e.sent;case 15:return p=e.t0.filter(function(e){return b(e,c)}),e.abrupt("return",g({doc:s,client:n,perms:p}));case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(){return(O=(0,i.default)(o.default.mark(function e(t){var r,n,a,i,u,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.document,n=t.client,a=t.writability,void 0!==(i=t.permissions)){e.next=10;break}return e.next=7,m(n);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i;case 11:if(!((u=e.t0).length<=1)){e.next=16;break}e.t1=u[0],e.next=19;break;case 16:return e.next=18,function(e){return w.apply(this,arguments)}({document:r,client:n,permissions:u});case 18:e.t1=e.sent;case 19:if(!(c=e.t1)){e.next=24;break}return e.abrupt("return",v(c,{writability:a}));case 24:return p.default.warn("can't find the document in current attached permissions"),e.abrupt("return",void 0);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.isShortcutCreatedOnTheRecipientCozy=function(e){if(!e.included)return!1;var t=e.included.find(function(e){return"io.cozy.sharings.members"===e.type});return!!t&&!!t.attributes.instance}},32672:function(e,t,r){"use strict";var n,a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingLink=void 0;var o=a(r(11449)),i=a(r(85660)),u=a(r(10687)),c=r(87941);a(r(18621));var s=r(72004);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f=(n=(0,u.default)(o.default.mark(function e(t,r){var n,a,i,u,l,f,p,h,y,v,m=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=(i=m.length>2&&void 0!==m[2]?m[2]:{}).ttl,l=i.password,p=void 0===(f=i.verbs)?["GET"]:f,h=d(d({_type:c.DOCTYPE_PERMISSIONS,permissions:{files:{type:c.DOCTYPE_FILES,values:r,verbs:p}}},u&&{ttl:u}),l&&{password:l}),e.next=4,t.save(h);case 4:return y=e.sent.data,v=(0,s.generateWebLink)({cozyUrl:t.getStackClient().uri,searchParams:[["sharecode",null==y?void 0:null===(n=y.attributes)||void 0===n?void 0:null===(a=n.shortcodes)||void 0===a?void 0:a.code]],pathname:"/public",slug:"drive",subDomainType:t.capabilities.flat_subdomains?"flat":"nested"}),e.abrupt("return",v);case 8:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});t.makeSharingLink=f},48398:function(e,t,r){"use strict";var n,a,o=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTimeSeriesByIntervalAndSource=t.saveTimeSeries=void 0;var i=o(r(11449)),u=o(r(10687)),c=r(71450),s=function(e){if(!e.startDate||!e.endDate)throw Error("You must specify a startDate and endDate for the time serie");if(!Date.parse(e.startDate)||!Date.parse(e.endDate))throw Error("Invalid date format for the time serie");if(!e.dataType)throw Error("You must specify a dataType for the time serie");if(!e.series||!Array.isArray(e.series))throw Error("You must specify a series array for the time serie")},l=(n=(0,u.default)(i.default.mark(function e(t,r){var n,a,o,u,c,l,d;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dataType,a=r.series,o=r.startDate,u=r.endDate,c=r.source,l=r.theme,s({dataType:n,series:a,startDate:o,endDate:u,source:c}),d={_type:"io.cozy.timeseries.".concat(n),startDate:o,endDate:u,source:c,theme:l,series:a},e.abrupt("return",t.save(d));case 5:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});t.saveTimeSeries=l;var d=(a=(0,u.default)(i.default.mark(function e(t,r){var n,a,o,u,s,l,d;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.startDate,a=r.endDate,o=r.dataType,u=r.source,s=r.limit,l="io.cozy.timeseries.".concat(o),d=(0,c.Q)(l).where({source:u,startDate:{$gte:n},endDate:{$lte:a}}).indexFields(["source","startDate","endDate"]).sortBy([{source:"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(s||5),e.abrupt("return",t.query(d));case 4:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.fetchTimeSeriesByIntervalAndSource=d},20786:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.triggers=t.triggerStates=void 0;var a=n(r(85660)),o=r(94564),i=n(r(22853));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var s=["CHALLENGE_ASKED","DISK_QUOTA_EXCEEDED","TERMS_VERSION_MISMATCH","USER_ACTION_NEEDED","USER_ACTION_NEEDED.CHANGE_PASSWORD","USER_ACTION_NEEDED.ACCOUNT_REMOVED","USER_ACTION_NEEDED.WEBAUTH_REQUIRED","USER_ACTION_NEEDED.SCA_REQUIRED","LOGIN_FAILED"],l={getLastExecution:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_execution},getLastSuccess:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_success},getLastsuccess:function(e){var t;return i.default.warn("Deprecated, please use getLastSuccess instead of getLastsuccess"),null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_success},isErrored:function(e){var t;return(null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.status)==="errored"},getLastErrorType:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_error}};t.triggerStates=l;var d={isKonnectorWorker:function(e){return"konnector"===e.worker},isKonnector:function(e){return"konnector"===e.worker||"client"===e.worker},getKonnector:function(e){return d.isKonnector(e)?e.message&&e.message.konnector?e.message.konnector:e.message&&e.message.Data?JSON.parse(atob(e.message.Data)).konnector:void 0:null},getAccountId:function(e){var t,r,n=null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.Data;return n?JSON.parse(atob(n)).account:null==e?void 0:null===(r=e.message)||void 0===r?void 0:r.account},isLatestErrorMuted:function(e,t){var r=l.getLastErrorType(e),n=l.getLastSuccess(e),a=n?new Date(n):new Date;return(0,o.getMutedErrors)(t).some(function(e){return e.type===r&&(!n||new Date(e.mutedAt)>a)})},hasActionableError:function(e){var t;return s.includes(null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_error)},buildTriggerAttributes:function(e){var t=e.account,r=e.cron,n=e.folder,a=e.konnector,o={account:t._id,konnector:a.slug};n&&(o.folder_to_save=n._id);var i=a.clientSide?{type:"@client"}:{type:"@cron",arguments:void 0===r?"0 0 0 * * 0":r};return c(c({},{worker:"konnector",message:o}),i)}};t.triggers=d},51398:function(e,t,r){"use strict";var n,a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPassword=void 0;var o=a(r(11449)),i=a(r(10687)),u=r(5499),c=r(88842),s=r(47978),l=(n=(0,i.default)(o.default.mark(function e(t){var r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.hasExtensionInstalledAttribute)(t);case 2:return r=e.sent,e.next=5,(0,u.hasPasswordDefinedAttribute)(t);case 5:return n=e.sent,e.abrupt("return",!((0,s.isMagicLink)(t)||(0,s.isOIDC)(t))||r||n);case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});t.hasPassword=l},1028:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.getFlagshipDownloadLink=t.getCreatedByApp=t.hasBeenUpdatedByApp=void 0;var a=n(r(27361)),o=r(25976),i=n(r(71400));t.hasBeenUpdatedByApp=function(e,t){var r=(0,a.default)(e,"cozyMetadata.updatedByApps");return!!(r&&r.find(function(e){return e.slug===t}))},t.getCreatedByApp=function(e){return(0,a.default)(e,"cozyMetadata.createdByApp")},t.getFlagshipDownloadLink=function(e){if((0,o.isAndroid)()){var t=(0,i.default)("flagship.playstore-id")||"io.cozy.flagship.mobile";return"https://play.google.com/store/apps/details?id=".concat(t,"&hl=").concat(e)}if((0,o.isIOS)()){var r=(0,i.default)("flagship.appstore-id")||"id1600636174";return"https://apps.apple.com/".concat(e,"/app/").concat(r)}return(0,i.default)("flagship.download-link")||"https://cozy.io/".concat(e,"/download")}},12196:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPerformanceApi=void 0,t.defaultPerformanceApi={measure:function(e){},mark:function(e){return e}}},86465:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.webPerformanceApi=void 0;var a=n(r(73955));t.webPerformanceApi={measure:function(e){var t=e.measureName,r=e.markName,n=e.category,a=e.color,o=null!=t?t:r;performance.measure(o,{start:r,detail:{devtools:{track:null!=n?n:"CozyClient",color:null!=a?a:"secondary"}}})},mark:function(e){var t="".concat((0,a.default)()," ").concat(e);return performance.mark(t),t}}},39268:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={olderThan:function(e){return function(t){return!t||!t.lastUpdate||Date.now()-t.lastUpdate>e}},noFetch:function(){return!1}}},25888:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(89679)),u=n(r(59422)),c=function(){var e;function t(){(0,i.default)(this,t),this.pending={}}return(0,u.default)(t,[{key:"exec",value:(e=(0,o.default)(a.default.mark(function e(t,r){var n,o,i,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r(),(o=this.pending[n])?i=o:(i=t(),this.pending[n]=i),e.prev=3,e.next=6,i;case 6:return u=e.sent,e.abrupt("return",u);case 8:return e.prev=8,this.pending[n]=null,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(t,r){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=e(),r=this.pending[t];return r||null}}]),t}();t.default=c},71450:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryDefinition=t.MutationTypes=t.Mutations=t.getDoctypeFromOperation=t.uploadFile=t.removeReferencedBy=t.addReferencedBy=t.removeReferencesTo=t.addReferencesTo=t.deleteDocument=t.updateDocuments=t.updateDocument=t.createDocument=t.isAGetByIdQuery=t.Q=void 0;var a=n(r(85660)),o=n(r(89679)),i=n(r(59422)),u=n(r(70894)),c=n(r(22853));function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(this,e),this.doctype=t.doctype,this.id=t.id,this.ids=t.ids,this.selector=t.selector,this.fields=t.fields,this.indexedFields=t.indexedFields,this.partialFilter=t.partialFilter,this.sort=t.sort,this.includes=t.includes,this.referenced=t.referenced,this.limit=t.limit,this.skip=t.skip,this.cursor=t.cursor,this.bookmark=t.bookmark}return(0,i.default)(e,[{key:"checkSortOrder",value:function(e){var t=e.sort,r=e.selector,n=e.indexedFields,a=this.sort||t,o=this.selector||r||{},i=this.indexedFields||n;if(a){var u=i||Object.keys(o);if(u&&!(u.length<1)){if(a.length>u.length){c.default.warn("You should not sort on non-indexed fields.\n\n        Sort: ".concat(JSON.stringify(a),"\n\n        Indexed fields: ").concat(u));return}for(var s=0;s<a.length;s++)if(Object.keys(a[s])[0]!==u[s]){c.default.warn("The sort order should be the same than the indexed fields.\n\n          Sort: ".concat(JSON.stringify(a),"\n\n          Indexed fields: ").concat(u,"\n"));return}}}}},{key:"checkSelector",value:function(e){(0,u.default)(e,["$exists",!1])&&c.default.warn('The "$exists: false" predicate should be defined as a partial index for better performance.\n\n        Selector: '.concat(JSON.stringify(e))),(0,u.default)(e,"$ne")&&c.default.info("The use of the $ne operator is more efficient with a partial index.\n\n        Selector: ".concat(JSON.stringify(e)));var t=(0,u.default)(e,function(e){return Array.isArray(e)});if(t&&!t.startsWith("$"))throw Error("You pass ".concat(JSON.stringify(e),", this is a valid mango operation, \n\n        but sift doesn't support it so CozyClient can not evaluate \n\n        the request in memory. You must use a MongoDB operator \n\n        like $in or $or operator instead, preferably in a partial index, \n\n        to avoid costly full-scan"))}},{key:"checkSelectFields",value:function(e){var t=e.fields,r=e.selector,n=e.partialFilter,a=this.fields||t,o=this.selector||r,i=this.partialFilter||n;if(a&&(o||i)&&!Object.keys(l(l({},o),i)).every(function(e){return a.includes(e)}))throw Error("The .select should includes all the fields used in where or partialIndex.\n        Please fix this query: fields: ".concat(JSON.stringify(this.toDefinition())))}},{key:"getById",value:function(t){if(!t)throw Error("getById called with undefined id");return new e(l(l({},this.toDefinition()),{},{id:t}))}},{key:"getByIds",value:function(t){return new e(l(l({},this.toDefinition()),{},{ids:t}))}},{key:"where",value:function(t){return this.checkSortOrder({selector:t}),this.checkSelector(t),this.checkSelectFields({selector:t}),new e(l(l({},this.toDefinition()),{},{selector:t}))}},{key:"select",value:function(t){return this.checkSelectFields({fields:t}),new e(l(l({},this.toDefinition()),{},{fields:t}))}},{key:"indexFields",value:function(t){return this.checkSortOrder({indexedFields:t}),new e(l(l({},this.toDefinition()),{},{indexedFields:t}))}},{key:"partialIndex",value:function(t){return this.checkSelectFields({partialFilter:t}),new e(l(l({},this.toDefinition()),{},{partialFilter:t}))}},{key:"sortBy",value:function(t){if(!Array.isArray(t))throw Error('Invalid sort, should be an array ([{ label: "desc"}, { name: "asc"}]), you passed '.concat(JSON.stringify(t),"."));return this.checkSortOrder({sort:t}),new e(l(l({},this.toDefinition()),{},{sort:t}))}},{key:"include",value:function(t){if(!Array.isArray(t))throw Error("include() takes an array of relationship names");return new e(l(l({},this.toDefinition()),{},{includes:t}))}},{key:"limitBy",value:function(t){return new e(l(l({},this.toDefinition()),{},{limit:t}))}},{key:"UNSAFE_noLimit",value:function(){return new e(l(l({},this.toDefinition()),{},{limit:null}))}},{key:"offset",value:function(t){return new e(l(l({},this.toDefinition()),{},{bookmark:void 0,cursor:void 0,skip:t}))}},{key:"offsetCursor",value:function(t){return new e(l(l({},this.toDefinition()),{},{bookmark:void 0,skip:void 0,cursor:t}))}},{key:"offsetBookmark",value:function(t){return new e(l(l({},this.toDefinition()),{},{skip:void 0,cursor:void 0,bookmark:t}))}},{key:"referencedBy",value:function(t){return new e(l(l({},this.toDefinition()),{},{referenced:t}))}},{key:"toDefinition",value:function(){return{doctype:this.doctype,id:this.id,ids:this.ids,selector:this.selector,fields:this.fields,indexedFields:this.indexedFields,partialFilter:this.partialFilter,sort:this.sort,includes:this.includes,referenced:this.referenced,limit:this.limit,skip:this.skip,cursor:this.cursor,bookmark:this.bookmark}}}]),e}();t.QueryDefinition=d,t.Q=function(e){return new d({doctype:e})},t.isAGetByIdQuery=function(e){if(!e)return!1;var t=Object.values(e);return 0!==t.length&&2===t.filter(function(e){return void 0!==e}).length&&void 0!==e.id};var f="CREATE_DOCUMENT",p="UPDATE_DOCUMENT",h="UPDATE_DOCUMENTS",y="DELETE_DOCUMENT",v="ADD_REFERENCES_TO",m="UPLOAD_FILE",g=function(e){return{mutationType:P.CREATE_DOCUMENT,document:e}};t.createDocument=g;var b=function(e){return{mutationType:P.UPDATE_DOCUMENT,document:e}};t.updateDocument=b;var w=function(e){return{mutationType:P.UPDATE_DOCUMENTS,documents:e}};t.updateDocuments=w;var O=function(e){return{mutationType:P.DELETE_DOCUMENT,document:e}};t.deleteDocument=O;var k=function(e,t){return{mutationType:P.ADD_REFERENCES_TO,referencedDocuments:t,document:e}};t.addReferencesTo=k;var _=function(e,t){return{mutationType:P.REMOVE_REFERENCES_TO,referencedDocuments:t,document:e}};t.removeReferencesTo=_;var x=function(e,t){return{mutationType:P.ADD_REFERENCED_BY,referencedDocuments:t,document:e}};t.addReferencedBy=x;var S=function(e,t){return{mutationType:P.REMOVE_REFERENCED_BY,referencedDocuments:t,document:e}};t.removeReferencedBy=S;var E=function(e,t){return{mutationType:P.UPLOAD_FILE,file:e,dirPath:t}};t.uploadFile=E,t.getDoctypeFromOperation=function(e){if(!e.mutationType)return e.doctype;var t=e.mutationType;switch(t){case f:case p:return e.document._type;case h:return e.documents[0]._type;case y:return e.document._type;case v:case m:throw Error("Not implemented");default:throw Error("Unknown mutationType ".concat(t))}},t.Mutations={createDocument:g,updateDocument:b,updateDocuments:w,deleteDocument:O,addReferencesTo:k,removeReferencesTo:_,addReferencedBy:x,removeReferencedBy:S,uploadFile:E};var P={CREATE_DOCUMENT:f,UPDATE_DOCUMENT:p,UPDATE_DOCUMENTS:h,DELETE_DOCUMENT:y,ADD_REFERENCES_TO:v,REMOVE_REFERENCES_TO:"REMOVE_REFERENCES_TO",ADD_REFERENCED_BY:"ADD_REFERENCED_BY",REMOVE_REFERENCED_BY:"REMOVE_REFERENCED_BY",UPLOAD_FILE:m};t.MutationTypes=P},20057:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(66604)),o=n(r(7739)),i=n(r(85564)),u=n(r(18446)),c=n(r(44908)),s=n(r(87185)),l=r(71450),d=function(e){var t=(0,o.default)(e,function(e){return e.id||e.ids?"idQueries":"others"}),r=t.idQueries,n=void 0===r?[]:r,a=t.others,d=n.length>0?new l.QueryDefinition({doctype:e[0].doctype,ids:(0,c.default)((0,i.default)(n.map(function(e){return e.id||e.ids})))}):[];return(0,s.default)(void 0===a?[]:a,u.default).concat(d)};t.default=function(e){var t=(0,o.default)(e,function(e){return e.doctype});return(0,i.default)(Object.values((0,a.default)(t,d)))}},10513:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.registryEndpoint=t.transformRegistryFormatToStackFormat=void 0;var a=n(r(11449)),o=n(r(10687)),i=n(r(89679)),u=n(r(59422)),c=n(r(85660)),s=n(r(27361));r(35449);var l=n(r(47064)),d=r(20538);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}t.transformRegistryFormatToStackFormat=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,c.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({id:(0,s.default)(e,"latest_version.manifest.source"),attributes:(0,s.default)(e,"latest_version.manifest")},e)},t.registryEndpoint="/registry/";var p=function(e){var t=new URLSearchParams(e).toString();return t?"?".concat(t):""},h=function(e){var t=e.type,r=t===d.APP_TYPE.KONNECTOR||"node"===t?"konnectors":"apps";return"/".concat(r)},y=function(){var e,t,r;function n(e){if((0,i.default)(this,n),!e.client)throw Error("Need to pass a client to instantiate a Registry API.");this.client=e.client}return(0,u.default)(n,[{key:"installApp",value:(e=(0,o.default)(a.default.mark(function e(t,r){var n,o,i,u,c,s,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.slug,o=t.terms,i={},(u=t.installed)&&(i.PermissionsAcked=u),r&&(i.Source=r),c=p(i),!o){e.next=9;break}return e.next=9,l.default.save(this.client,o);case 9:return s=t.installed?"PUT":"POST",d=h(t),e.abrupt("return",this.client.stackClient.fetchJSON(s,"".concat(d,"/").concat(n).concat(c)));case 12:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})},{key:"uninstallApp",value:(t=(0,o.default)(a.default.mark(function e(t){var r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.slug,n=h(t),e.abrupt("return",this.client.stackClient.fetchJSON("DELETE","".concat(n,"/").concat(r)));case 3:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"fetchApps",value:(r=(0,o.default)(a.default.mark(function e(t){var r,n,o,i,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.channel,n=t.type,i=new URLSearchParams({limit:void 0===(o=t.limit)?"200":o,versionsChannel:r,latestChannelVersion:r}).toString(),n&&(i+="&filter[type]=".concat(n)),e.next=6,this.client.stackClient.fetchJSON("GET","/registry?".concat(i));case 6:return u=e.sent.data,e.abrupt("return",u);case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"fetchAppsInMaintenance",value:function(){return this.client.stackClient.fetchJSON("GET","/registry/maintenance")}},{key:"fetchApp",value:function(e){return this.client.stackClient.fetchJSON("GET","/registry/".concat(e))}},{key:"fetchAppVersion",value:function(e){if(!e.slug)throw Error("Need to pass a slug to use fetchAppVersion");var t=e.slug,r=e.channel,n=e.version,a=r||n&&"latest"!==n?r:"stable",o="/registry/".concat(t,"/");return a?o+="".concat(a,"/").concat(n||"latest"):o+="".concat(n),this.client.stackClient.fetchJSON("GET",o)}}]),n}();t.default=y},94158:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndMergeDocument=t.getCollectionFromSlice=t.getDocumentsFromSlice=t.getDocumentFromSlice=t.default=t.mergeDocumentsWithRelationships=void 0;var a=n(r(85660)),o=n(r(24350)),i=n(r(27361)),u=n(r(18446)),c=n(r(57557)),s=n(r(82492)),l=n(r(22853)),d=r(76305),f=r(71450),p=r(22249),h=r(98829);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=function(e,t){var r=t._type;if(!r)throw Error("Document without _type");if(!(0,h.properId)(t))throw Error("Document without id");var n=(0,i.default)(e,[r,(0,h.properId)(t)]);return(0,u.default)(n,t)?e:v(v({},e),{},(0,a.default)({},r,v(v({},e[r]),{},(0,a.default)({},(0,h.properId)(t),g(n,t)))))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=v(v({},e),t);return(e.relationships||t.relationships)&&(r.relationships=v(v({},e.relationships),t.relationships)),r};t.mergeDocumentsWithRelationships=g,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!(0,d.isReceivingData)(t)&&!(0,p.isReceivingMutationResult)(t))return e;if(t&&t.definition&&t.definition.mutationType===f.MutationTypes.DELETE_DOCUMENT){var r=t.definition.document._id,n=t.definition.document._type;return v(v({},e),{},(0,a.default)({},n,(0,c.default)(e[n],r)))}var o=t.response,i=o.data,u=o.included;if(!i||Array.isArray(i)&&0===i.length)return e;var s=u?u.reduce(m,e):e;return Array.isArray(i)?b(i,s):m(s,i)},t.getDocumentFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(!t)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");if(!r)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined id");return e[t]&&e[t][r]?e[t][r]:null},t.getDocumentsFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(!t)throw Error("getDocumentsFromSlice: Cannot retrieve documents with undefined doctype");if(!r||r.length<1)throw Error("getDocumentsFromSlice: Cannot retrieve documents with undefined ids");return e[t]?r.map(function(r){return e[t][r]}).filter(Boolean):[]},t.getCollectionFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");return e[t]?Object.values(e[t]):null};var b=function(e,t){var r=e[0]._type;if(!r)throw l.default.info("Document without _type",e[0]),Error("Document without _type");var n=(0,o.default)(e,h.properId),a=Object.assign({},t);return a[r]=Object.assign({},t[r]),Object.values(n).map(function(e){var t=(0,h.properId)(e);a[r][t]?a[r][t]=(0,s.default)({},a[r][t],e):a[r][t]=e}),a};t.extractAndMergeDocument=b},98829:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.properId=void 0,t.properId=function(e){return e.id||e._id}},65972:function(e,t,r){"use strict";var n=r(16452),a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"initQuery",{enumerable:!0,get:function(){return f.initQuery}}),Object.defineProperty(t,"loadQuery",{enumerable:!0,get:function(){return f.loadQuery}}),Object.defineProperty(t,"resetQuery",{enumerable:!0,get:function(){return f.resetQuery}}),Object.defineProperty(t,"receiveQueryResult",{enumerable:!0,get:function(){return f.receiveQueryResult}}),Object.defineProperty(t,"receiveQueryError",{enumerable:!0,get:function(){return f.receiveQueryError}}),Object.defineProperty(t,"executeQueryFromState",{enumerable:!0,get:function(){return f.executeQueryFromState}}),Object.defineProperty(t,"initMutation",{enumerable:!0,get:function(){return p.initMutation}}),Object.defineProperty(t,"receiveMutationResult",{enumerable:!0,get:function(){return p.receiveMutationResult}}),Object.defineProperty(t,"receiveMutationError",{enumerable:!0,get:function(){return p.receiveMutationError}}),Object.defineProperty(t,"getStateRoot",{enumerable:!0,get:function(){return h.getStateRoot}}),Object.defineProperty(t,"getCollectionFromState",{enumerable:!0,get:function(){return h.getCollectionFromState}}),Object.defineProperty(t,"getDocumentFromState",{enumerable:!0,get:function(){return h.getDocumentFromState}}),Object.defineProperty(t,"getQueryFromStore",{enumerable:!0,get:function(){return h.getQueryFromStore}}),Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return h.getQueryFromState}}),Object.defineProperty(t,"getRawQueryFromState",{enumerable:!0,get:function(){return h.getRawQueryFromState}}),Object.defineProperty(t,"isQueryExisting",{enumerable:!0,get:function(){return h.isQueryExisting}}),Object.defineProperty(t,"dispatchCreate",{enumerable:!0,get:function(){return y.dispatchCreate}}),Object.defineProperty(t,"dispatchUpdate",{enumerable:!0,get:function(){return y.dispatchUpdate}}),Object.defineProperty(t,"dispatchDelete",{enumerable:!0,get:function(){return y.dispatchDelete}}),t.resetState=t.createStore=t.default=t.StoreProxy=void 0;var o=a(r(85660)),i=a(r(89679)),u=a(r(59422)),c=a(r(71400)),s=r(98116),l=a(r(56454)),d=a(r(94158)),f=n(r(76305)),p=r(22249),h=r(76790),y=r(45330);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var g="COZY_CLIENT.RESET_STATE";t.resetState=function(){return{type:g}};var b=function(){function e(t){(0,i.default)(this,e),this.state=t}return(0,u.default)(e,[{key:"readDocument",value:function(e,t){return this.state.documents[e][t]}},{key:"writeDocument",value:function(e){this.setState(function(t){return m(m({},t),{},{documents:m(m({},t.documents),{},(0,o.default)({},e._type,m(m({},t.documents[e._type]),{},(0,o.default)({},e._id,e))))})})}},{key:"setState",value:function(e){this.state=e(this.state)}},{key:"getState",value:function(){return this.state}}]),e}();t.StoreProxy=b;var w={documents:{},queries:{}},O=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,r=arguments.length>1?arguments[1]:void 0,n=e.mark("combinedReducer");if(r.type==g)return e.measure({markName:n,measureName:"".concat(n," reset"),category:"CozyClientStore"}),w;if(!(0,f.isQueryAction)(r)&&!(0,p.isMutationAction)(r))return e.measure({markName:n,measureName:"".concat(n," no query nor mutate action"),category:"CozyClientStore"}),t;if(r.update){var a=new b(t);r.update(a,r.response);var o={documents:a.getState().documents,queries:(0,f.default)(e,a.getState().queries,r,a.getState().documents)};return e.measure({markName:n,measureName:"".concat(n," update action"),category:"CozyClientStore"}),o}var i=(0,d.default)(t.documents,r),u=i!==t.documents,c={documents:i,queries:(0,f.default)(e,t.queries,r,i,u)};return e.measure({markName:n,measureName:"".concat(n," queries"),category:"CozyClientStore"}),c}};t.default=O;var k=(0,c.default)("debug")&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.compose;t.createStore=function(e){return(0,s.createStore)((0,s.combineReducers)({cozy:O(e)}),k((0,s.applyMiddleware)(l.default)))}},22249:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMutationError=t.receiveMutationResult=t.initMutation=t.isReceivingMutationResult=t.isMutationAction=void 0;var a=n(r(85660));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u="INIT_MUTATION",c="RECEIVE_MUTATION_RESULT",s="RECEIVE_MUTATION_ERROR";t.isMutationAction=function(e){return -1!==[u,c,s].indexOf(e.type)},t.isReceivingMutationResult=function(e){return e.type===c},t.initMutation=function(e,t){return{type:u,mutationId:e,definition:t}},t.receiveMutationResult=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i(i({type:c,mutationId:e,response:t},r),{},{definition:n})},t.receiveMutationError=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:s,mutationId:e,error:t,definition:r}}},76305:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryIDGenerator=t.getQueryFromSlice=t.resetQuery=t.receiveQueryError=t.receiveQueryResult=t.loadQuery=t.initQuery=t.default=t.updateData=t.makeSorterFromDefinition=t.executeQueryFromState=t.mergeSelectorAndPartialIndex=t.convert$gtNullSelectors=t.sortAndLimitDocsIds=t.isReceivingData=t.isQueryAction=void 0;var a=n(r(89679)),o=n(r(59422)),i=n(r(61874)),u=n(r(85660)),c=n(r(75888)),s=n(r(66604)),l=n(r(7739)),d=n(r(91966)),f=n(r(25325)),p=n(r(57043)),h=n(r(68630)),y=n(r(44908)),v=n(r(75472)),m=n(r(47037)),g=n(r(27361)),b=n(r(14328)),w=n(r(71400)),O=r(94158),k=r(22249),_=r(98829),x=r(71450),S=n(r(22853)),E=r(76790);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,u.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var A="INIT_QUERY",j="LOAD_QUERY",T="RECEIVE_QUERY_RESULT",M="RECEIVE_QUERY_ERROR",D="RESET_QUERY",R=(0,w.default)("debug"),I=function(e){return -1!==[A,j,T,M,D].indexOf(e.type)};t.isQueryAction=I,t.isReceivingData=function(e){return e.type===T};var N={id:null,definition:null,fetchStatus:"pending",isFetching:null,lastFetch:null,lastUpdate:null,lastErrorUpdate:null,lastError:null,hasMore:!1,count:0,fetchedPagesCount:0,data:[],bookmark:null},F=function(e,t,r,n){var a,o=n.count,i=n.fetchedPagesCount,u=(0,c.default)(r);if(e.definition.sort&&t){var s=W(e.definition),l=t[e.definition.doctype];u=s(l?u.map(function(e){return l[e]}).filter(Boolean):[]).map(_.properId)}var d=e.definition.limit;return d&&(a=o<d?i>1?d*(i-1)+o:o:d*i,u=u.slice(0,a)),u};t.sortAndLimitDocsIds=F;var L=function(e,t,r,n){var a=n.count,o=n.fetchedPagesCount,i=(0,y.default)([].concat((0,c.default)(e.data),(0,c.default)(t.data.map(_.properId))));return F(e,r,i,{count:a,fetchedPagesCount:o})},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;switch(r.type){case A:if(t.lastUpdate&&t.id===r.queryId&&t.definition===r.queryDefinition)return t;return C(C({},t),{},{id:r.queryId,definition:r.queryDefinition,options:r.options,fetchStatus:t.lastUpdate?t.fetchStatus:"pending"});case j:if("loading"===t.fetchStatus)return t;if("loaded"===t.fetchStatus&&r.backgroundFetching)return C(C({},t),{},{fetchStatus:"loaded",isFetching:!0});return C(C({},t),{},{fetchStatus:"loading"});case T:var a=e.mark("RECEIVE_QUERY_RESULT"),o=r.response;if(!o.data)return e.measure({markName:a,measureName:"".concat(a," with no data"),category:"CozyClientStore"}),C(C({},t),{},{fetchStatus:"loaded",isFetching:!r.backgroundFetching&&null,lastFetch:Date.now(),lastUpdate:Date.now()});var i=C({fetchStatus:"loaded",isFetching:!r.backgroundFetching&&null,lastFetch:Date.now(),lastUpdate:Date.now()},R&&{execution_stats:o.execution_stats});if(!Array.isArray(o.data))return e.measure({markName:a,measureName:"".concat(a," with object"),category:"CozyClientStore"}),C(C(C({},t),i),{},{hasMore:!1,count:1,data:[(0,_.properId)(o.data)]});var u=o.meta&&o.meta.count?o.meta.count:o.data.length;if(r.backgroundFetching)return e.measure({markName:a,measureName:"".concat(a," with background fetching"),category:"CozyClientStore"}),C(C(C({},t),i),{},{bookmark:o.bookmark||null,hasMore:void 0!==o.next?o.next:t.hasMore,count:u,data:o.data.map(_.properId)});var c=t.fetchedPagesCount+1,s=L(t,o,n,{count:u,fetchedPagesCount:c});return e.measure({markName:a,measureName:"".concat(a," default"),category:"CozyClientStore"}),C(C(C({},t),i),{},{bookmark:o.bookmark||null,hasMore:void 0!==o.next?o.next:t.hasMore,count:u,fetchedPagesCount:c,data:s});case M:return C(C({},t),{},{id:r.queryId,fetchStatus:"failed",isFetching:!r.backgroundFetching&&null,lastError:r.error,lastErrorUpdate:Date.now()});case D:return C(C({},N),{},{id:r.queryId,definition:t.definition,options:t.options});default:return t}},B=function e(t){for(var r={},n=0,a=Object.entries(t);n<a.length;n++){var o=(0,i.default)(a[n],2),u=o[0],c=o[1],s=(0,h.default)(c)?e(c):c;r["$gt"===u&&null===s?"$gtnull":u]=s}return r};t.convert$gtNullSelectors=B;var U=function(e){return C(C({},(0,g.default)(e,"selector")),(0,g.default)(e,"partialFilter"))};t.mergeSelectorAndPartialIndex=U;var H=function(e){if(e.selector||e.partialFilter){var t=U(e);return b.default.use({$gtnull:function(e,t){return!!t}}),(0,b.default)(B(t))}if(e.id){var r={_id:e.id};return(0,b.default)(r)}if(!e.ids)return null;var n={_id:{$in:e.ids}};return(0,b.default)(n)};t.executeQueryFromState=function(e,t){var r,n=!!t.id;if(t.id){var a=(0,E.getDocumentFromState)(e,t.doctype,t.id);r=a?[a]:[]}else if(t.ids)r=(0,E.getDocumentsFromState)(e,t.doctype,t.ids);else{var o=(0,E.getCollectionFromState)(e,t.doctype);r=null==o?void 0:o.filter(G(t))}return!r||r.length<1?{data:n?null:[]}:n?{data:r[0]}:{data:W(t)(r)}};var G=function(e){var t=e.doctype,r=H(e);return function(e){return e._type===t&&!e._deleted&&(!r||!!r(e))}},Z=function(e){return function(t){var r=(0,g.default)(t,e);return(0,m.default)(r)?r.toLowerCase():r}},W=function(e){var t=e.sort;if(!t)return function(e){return e};if(!Array.isArray(e.sort))return S.default.warn("Correct update of queries with a sort that is not an array is not supported. Use an array as argument of QueryDefinition::sort"),function(e){return e};var r=t.map(function(e){return Object.entries(e)[0]}),n=r.map(function(e){return e[0]}).map(Z),a=r.map(function(e){return e[1]});return function(e){return(0,v.default)(e,n,a)}};t.makeSorterFromDefinition=W;var q=function(e,t,r){var n=G(e.definition),a=(0,s.default)((0,l.default)(t,n),function(e){return e.map(_.properId)}),o=a.true,i=void 0===o?[]:o,u=a.false,c=e.data,h=e.options&&e.options.autoUpdate,y=!h||!1!==h.remove,v=!h||!1!==h.add,m=!h||!1!==h.update,g=y?(0,f.default)(c,void 0===u?[]:u):[],b=v?(0,d.default)(i,c):[],w=m?(0,f.default)(c,i):[],O=g.length||b.length||w.length,k=(0,d.default)((0,p.default)(c,b),g),x=e.fetchedPagesCount,S=F(e,r,k,{count:k.length,fetchedPagesCount:x});return C(C({},e),{},{data:S,count:S.length,fetchedPagesCount:x,lastUpdate:O?Date.now():e.lastUpdate})};t.updateData=q;var V=function(e,t){return function(r){var n=(0,g.default)(e,"response.data")||(0,g.default)(e,"definition.document");return n&&(Array.isArray(n)||(n=[n]),n.length&&r.definition.doctype===n[0]._type)?q(r,n,t):r}};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if(r.type==A){var o=z(e,t[r.queryId],r,n);return o===t[r.queryId]?t:C(C({},t),{},(0,u.default)({},r.queryId,o))}if(I(r)){var i=V(r,n);return(0,s.default)(t,function(t){return t.id==r.queryId?z(e,t,r,n):a?i(t):t})}if((0,k.isReceivingMutationResult)(r)){var c=r.updateQueries?function(e){var t=r.updateQueries,a=r.response,o=t[e.id];if(!o)return e;var i=o(Q(n,e.definition.doctype,e.data),a).map(_.properId);return C(C({},e),{},{data:i,count:i.length,lastUpdate:Date.now()})}:V(r,n);return(0,s.default)(t,c)}return t},t.initQuery=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.doctype)throw Error("Cannot init query with no doctype");return{type:A,queryId:e,queryDefinition:t,options:r}},t.loadQuery=function(e,t){return C({type:j,queryId:e},t)},t.receiveQueryResult=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C({type:T,queryId:e,response:t},r)},t.receiveQueryError=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C({type:M,queryId:e,error:t},r)},t.resetQuery=function(e){return{type:D,queryId:e}};var Q=function(e,t,r){return r.map(function(r){return(0,O.getDocumentFromSlice)(e,t,r)})};t.getQueryFromSlice=function(e,t,r){if(!e||!e[t])return C(C({},N),{},{id:t,data:null});var n=e[t];return r?C(C({},n),{},{data:Q(r,n.definition.doctype,n.data)}):n};var J=function(){function e(){(0,a.default)(this,e),this.idCounter=1}return(0,o.default)(e,[{key:"generateRandomId",value:function(){var e=this.idCounter;return this.idCounter++,e.toString()}},{key:"generateId",value:function(e){if(!(0,x.isAGetByIdQuery)(e))return this.generateRandomId();var t=e.id,r=e.doctype;return"".concat(r,"/").concat(t)}}]),e}();t.QueryIDGenerator=J,J.UNNAMED="unnamed"},45330:function(e,t,r){"use strict";var n,a,o,i,u=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchDelete=t.dispatchUpdate=t.dispatchCreate=void 0;var c=u(r(11449)),s=u(r(10687)),l=u(r(85660)),d=r(71450),f=r(22249);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,l.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=function(e,t){return h({id:e._id,_type:t},e)},v=(n=(0,s.default)(c.default.mark(function e(t,r){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof r.enhanceDocFn){e.next=4;break}return e.next=3,r.enhanceDocFn(t,{client:r.client});case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),m=function(e,t,r){e.dispatch((0,f.receiveMutationResult)(e.generateRandomId(),{data:t},{},r(t)))},g=(a=(0,s.default)(c.default.mark(function e(t,r,n){var a,o,i=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:{},o=y(n,r),e.next=4,v(o,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:m(t,e.sent,d.Mutations.createDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,r){return a.apply(this,arguments)});t.dispatchCreate=g;var b=(o=(0,s.default)(c.default.mark(function e(t,r,n){var a,o,i=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:{},o=y(n,r),e.next=4,v(o,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:m(t,e.sent,d.Mutations.updateDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,r){return o.apply(this,arguments)});t.dispatchUpdate=b;var w=(i=(0,s.default)(c.default.mark(function e(t,r,n){var a,o,i=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:{},o=y(h(h({},n),{},{_deleted:!0}),r),e.next=4,v(o,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:m(t,e.sent,d.Mutations.deleteDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,r){return i.apply(this,arguments)});t.dispatchDelete=w},76790:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryExisting=t.getRawQueryFromState=t.getQueryFromState=t.getQueryFromStore=t.getDocumentsFromState=t.getDocumentFromState=t.getCollectionFromState=t.getStateRoot=void 0;var n=r(94158),a=r(76305),o=function(e){return e.cozy||{}};t.getStateRoot=o,t.getCollectionFromState=function(e,t){return(0,n.getCollectionFromSlice)(o(e).documents,t)},t.getDocumentFromState=function(e,t,r){return(0,n.getDocumentFromSlice)(o(e).documents,t,r)},t.getDocumentsFromState=function(e,t,r){return(0,n.getDocumentsFromSlice)(o(e).documents,t,r)},t.getQueryFromStore=function(e,t){return i(e.getState(),t)};var i=function(e,t){return(0,a.getQueryFromSlice)(o(e).queries,t,o(e).documents)};t.getQueryFromState=i,t.getRawQueryFromState=function(e,t){return(0,a.getQueryFromSlice)(o(e).queries,t)},t.isQueryExisting=function(e,t){return void 0!==o(e).queries[t]}},47064:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(11449)),o=n(r(85660)),i=n(r(15572)),u=n(r(10687));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l="io.cozy.terms";function d(){return(d=(0,u.default)(a.default.mark(function e(t,r){var n,o,u,c,d,f;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.id,o=(0,i.default)(r,["id"]),e.next=3,t.query({doctype:l,selector:{termsId:n,version:o.version},limit:1});case 3:if(!((u=e.sent.data)&&u.length)){e.next=13;break}if((c=u[0]).termsId!=n||c.version!=o.version||c.url==o.url){e.next=11;break}return d=s(s({_type:l},c),{},{url:o.url}),e.next=11,t.save(d);case 11:e.next=16;break;case 13:return f=s(s({_type:l},o),{},{termsId:n,accepted:!0,acceptedAt:new Date}),e.next=16,t.save(f);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.default={save:function(e,t){return d.apply(this,arguments)}}},325:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.CozyClient=void 0;var a=n(r(11806)),o=n(r(73035)),i=n(r(34771)),u=n(r(89679)),c=function(e){(0,a.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,i.default)(n);return e=t?Reflect.construct(r,arguments,(0,i.default)(this).constructor):r.apply(this,arguments),(0,o.default)(this,e)});function n(){return(0,u.default)(this,n),r.apply(this,arguments)}return n}(function e(t){(0,u.default)(this,e),Object.assign(this,t)});t.CozyClient=c},41315:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(71450),t.default={}},88930:function(e,t,r){"use strict";var n=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeOfflineError=t.hasQueriesBeenLoaded=t.isQueriesLoading=t.hasQueryBeenLoaded=t.isQueryLoading=t.cancelable=void 0;var a=n(r(22853));t.cancelable=function(e){var t,r=new Promise(function(r,n){t=n,e.then(r),e.catch(n)});return r.cancel=function(){t({canceled:!0})},r};var o=function(e){return e?"loading"===e.fetchStatus||"pending"===e.fetchStatus:(a.default.warn("isQueryLoading called on falsy value."),!1)};t.isQueryLoading=o;var i=function(e){return e.lastFetch};t.hasQueryBeenLoaded=i,t.isQueriesLoading=function(e){return Object.values(e).some(function(e){return o(e)})},t.hasQueriesBeenLoaded=function(e){return Object.values(e).some(function(e){return i(e)})},t.isReactNativeOfflineError=function(e){return"Network request failed"===e.message}},43592:function(e,t,r){"use strict";var n=r(16452),a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(21929)),i=a(r(89679)),u=a(r(59422)),c=a(r(80595)),s=a(r(11806)),l=a(r(73035)),d=a(r(34771)),f=a(r(85660)),p=n(r(67294)),h=a(r(45697));t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=r.displayName||r.name||"Component",a=function(a){(0,s.default)(v,a);var h,y=(h=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,d.default)(v);return e=h?Reflect.construct(t,arguments,(0,d.default)(this).constructor):t.apply(this,arguments),(0,l.default)(this,e)});function v(r,a){var o;if((0,i.default)(this,v),o=y.call(this,r,a),(0,f.default)((0,c.default)(o),"mutate",function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return o.client.mutate(e.apply(null,n),t)}),o.client=r.client||a.client,!o.client)throw Error('Could not find "client" in either the context or props of '.concat(n));return o}return(0,u.default)(v,[{key:"render",value:function(){var e=(0,f.default)({},t.name||"mutate",this.mutate);return p.default.createElement(r,(0,o.default)({},e,this.props))}}]),v}(p.Component);return(0,f.default)(a,"contextTypes",{client:h.default.object}),a.displayName="WithMutation(".concat(n,")"),a}}},18428:function(e,t,r){"use strict";var n=r(16452),a=r(99338);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(21929)),i=a(r(89679)),u=a(r(59422)),c=a(r(11806)),s=a(r(73035)),l=a(r(34771)),d=a(r(85660)),f=a(r(75888)),p=a(r(82492)),h=n(r(67294)),y=a(r(45697)),v=a(r(22853));function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}t.default=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=e.displayName||e.name||"Component",n=function(n){(0,c.default)(g,n);var a,y=(a=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,l.default)(g);return e=a?Reflect.construct(t,arguments,(0,l.default)(this).constructor):t.apply(this,arguments),(0,s.default)(this,e)});function g(e,n){(0,i.default)(this,g),a=y.call(this,e,n);var a,o=e.client||n.client;if(v.default.warn("Deprecation: withMutations will be removed in the near future, prefer to use withClient to access the client. See https://github.com/cozy/cozy-client/pull/638 for more information."),!o)throw Error('Could not find "client" in either the context or props of '.concat(r));return a.mutations=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,d.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({createDocument:o.create.bind(o),saveDocument:o.save.bind(o),deleteDocument:o.destroy.bind(o)},p.default.apply(void 0,(0,f.default)(t.map(function(t){return"function"==typeof t?t(o,e):t})))),a}return(0,u.default)(g,[{key:"render",value:function(){return h.default.createElement(e,(0,o.default)({},this.mutations,this.props))}}]),g}(h.Component);return(0,d.default)(n,"contextTypes",{client:y.default.object}),n.displayName="WithMutations(".concat(r,")"),n}}},39854:function(e,t,r){"use strict";function n(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}r.d(t,{Z:()=>n})},94346:function(e,t,r){"use strict";function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}r.d(t,{Z:()=>n})},86802:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(25993),a=r(13065),o=r(74826),i=r(39854),u=r(94346);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if((0,i.Z)(2,arguments),!t||"object"!==c(t))return new Date(NaN);var r=t.years?(0,u.Z)(t.years):0,s=t.months?(0,u.Z)(t.months):0,l=t.weeks?(0,u.Z)(t.weeks):0,d=t.days?(0,u.Z)(t.days):0,f=t.hours?(0,u.Z)(t.hours):0,p=t.minutes?(0,u.Z)(t.minutes):0,h=t.seconds?(0,u.Z)(t.seconds):0,y=(0,o.Z)(e),v=s||r?(0,a.Z)(y,s+12*r):y;return new Date((d||l?(0,n.Z)(v,d+7*l):v).getTime()+1e3*(h+60*(p+60*f)))}},25993:function(e,t,r){"use strict";r.d(t,{Z:()=>i});var n=r(94346),a=r(74826),o=r(39854);function i(e,t){(0,o.Z)(2,arguments);var r=(0,a.Z)(e),i=(0,n.Z)(t);return isNaN(i)?new Date(NaN):(i&&r.setDate(r.getDate()+i),r)}},13065:function(e,t,r){"use strict";r.d(t,{Z:()=>i});var n=r(94346),a=r(74826),o=r(39854);function i(e,t){(0,o.Z)(2,arguments);var r=(0,a.Z)(e),i=(0,n.Z)(t);if(isNaN(i))return new Date(NaN);if(!i)return r;var u=r.getDate(),c=new Date(r.getTime());return(c.setMonth(r.getMonth()+i+1,0),u>=c.getDate())?c:(r.setFullYear(c.getFullYear(),c.getMonth(),u),r)}},95110:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>v});var n={};function a(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var o=r(74826),i=r(39854);function u(e,t){if(null==e)throw TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}var c={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},s=r(99316),l={date:(0,s.Z)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,s.Z)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,s.Z)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},d={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},f=r(84618),p={ordinalNumber:function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:(0,f.Z)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,f.Z)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,f.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,f.Z)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,f.Z)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},h=r(42669);let y={code:"en-US",formatDistance:function(e,t,r){var n,a=c[e];return(n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=r&&r.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:l,formatRelative:function(e,t,r,n){return d[e]},localize:p,match:{ordinalNumber:(0,r(795).Z)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,h.Z)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,h.Z)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,h.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,h.Z)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,h.Z)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function v(e,t){return(0,i.Z)(1,arguments),function(e,t,r){(0,i.Z)(2,arguments);var c,s,l,d,f,p,h,v=null!==(c=null!==(s=null==r?void 0:r.locale)&&void 0!==s?s:n.locale)&&void 0!==c?c:y;if(!v.formatDistance)throw RangeError("locale must contain localize.formatDistance property");var m=function(e,t){(0,i.Z)(2,arguments);var r=(0,o.Z)(e),n=(0,o.Z)(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}(e,t);if(isNaN(m))throw RangeError("Invalid time value");var g=u(u({},r),{addSuffix:!!(null==r?void 0:r.addSuffix),comparison:m});m>0?(d=(0,o.Z)(t),f=(0,o.Z)(e)):(d=(0,o.Z)(e),f=(0,o.Z)(t));var b=String(null!==(l=null==r?void 0:r.roundingMethod)&&void 0!==l?l:"round");if("floor"===b)p=Math.floor;else if("ceil"===b)p=Math.ceil;else if("round"===b)p=Math.round;else throw RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var w=f.getTime()-d.getTime(),O=w/6e4,k=(w-(a(f)-a(d)))/6e4,_=null==r?void 0:r.unit;if("second"===(h=_?String(_):O<1?"second":O<60?"minute":O<1440?"hour":k<43200?"day":k<525600?"month":"year")){var x=p(w/1e3);return v.formatDistance("xSeconds",x,g)}if("minute"===h){var S=p(O);return v.formatDistance("xMinutes",S,g)}if("hour"===h){var E=p(O/60);return v.formatDistance("xHours",E,g)}if("day"===h){var P=p(k/1440);return v.formatDistance("xDays",P,g)}if("month"===h){var C=p(k/43200);return 12===C&&"month"!==_?v.formatDistance("xYears",1,g):v.formatDistance("xMonths",C,g)}else if("year"===h){var A=p(k/525600);return v.formatDistance("xYears",A,g)}throw RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}(e,Date.now(),t)}},99316:function(e,t,r){"use strict";function n(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}r.d(t,{Z:()=>n})},84618:function(e,t,r){"use strict";function n(e){return function(t,r){var n;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=null!=r&&r.width?String(r.width):a;n=e.formattingValues[o]||e.formattingValues[a]}else{var i=e.defaultWidth,u=null!=r&&r.width?String(r.width):e.defaultWidth;n=e.values[u]||e.values[i]}return n[e.argumentCallback?e.argumentCallback(t):t]}}r.d(t,{Z:()=>n})},42669:function(e,t,r){"use strict";function n(e){return function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.width,o=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;var u=i[0],c=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],s=Array.isArray(c)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}(c,function(e){return e.test(u)}):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}(c,function(e){return e.test(u)});return r=e.valueCallback?e.valueCallback(s):s,{value:r=n.valueCallback?n.valueCallback(r):r,rest:t.slice(u.length)}}}r.d(t,{Z:()=>n})},795:function(e,t,r){"use strict";function n(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],o=t.match(e.parsePattern);if(!o)return null;var i=e.valueCallback?e.valueCallback(o[0]):o[0];return{value:i=r.valueCallback?r.valueCallback(i):i,rest:t.slice(a.length)}}}r.d(t,{Z:()=>n})},12102:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>l});var n={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},a=r(99316),o={date:(0,a.Z)({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,a.Z)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,a.Z)({formats:{full:"{{date}} '\xe0' {{time}}",long:"{{date}} '\xe0' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},i={lastWeek:"eeee 'dernier \xe0' p",yesterday:"'hier \xe0' p",today:"'aujourd’hui \xe0' p",tomorrow:"'demain \xe0' p'",nextWeek:"eeee 'prochain \xe0' p",other:"P"},u=r(84618),c={ordinalNumber:function(e,t){var r,n=Number(e),a=null==t?void 0:t.unit;return 0===n?"0":(r=1===n?a&&["year","week","hour","minute","second"].includes(a)?"\xe8re":"er":"\xe8me",n+r)},era:(0,u.Z)({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]},defaultWidth:"wide"}),quarter:(0,u.Z)({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2\xe8me trim.","3\xe8me trim.","4\xe8me trim."],wide:["1er trimestre","2\xe8me trimestre","3\xe8me trimestre","4\xe8me trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,u.Z)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],wide:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]},defaultWidth:"wide"}),day:(0,u.Z)({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:(0,u.Z)({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr\xe8s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’apr\xe8s-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},s=r(42669);let l={code:"fr",formatDistance:function(e,t,r){var a,o=n[e];return(a="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",String(t)),null!=r&&r.addSuffix)?r.comparison&&r.comparison>0?"dans "+a:"il y a "+a:a},formatLong:o,formatRelative:function(e,t,r,n){return i[e]},localize:c,match:{ordinalNumber:(0,r(795).Z)({matchPattern:/^(\d+)(ième|ère|ème|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:(0,s.Z)({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:(0,s.Z)({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,s.Z)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,s.Z)({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,s.Z)({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}}},83386:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(25993),a=r(39854),o=r(94346),i=r(13065);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if((0,a.Z)(2,arguments),!t||"object"!==u(t))return new Date(NaN);var r=t.years?(0,o.Z)(t.years):0,c=t.months?(0,o.Z)(t.months):0,s=t.weeks?(0,o.Z)(t.weeks):0,l=t.days?(0,o.Z)(t.days):0,d=t.hours?(0,o.Z)(t.hours):0,f=t.minutes?(0,o.Z)(t.minutes):0,p=t.seconds?(0,o.Z)(t.seconds):0;return new Date((function(e,t){(0,a.Z)(2,arguments);var r=(0,o.Z)(t);return(0,n.Z)(e,-r)})(function(e,t){(0,a.Z)(2,arguments);var r=(0,o.Z)(t);return(0,i.Z)(e,-r)}(e,c+12*r),l+7*s).getTime()-1e3*(p+60*(f+60*d)))}},74826:function(e,t,r){"use strict";r.d(t,{Z:()=>o});var n=r(39854);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){(0,n.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===a(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},9055:function(e,t,r){"use strict";r.r(t),r.d(t,{connect:()=>J,connectAdvanced:()=>I,useDispatch:()=>ee,useSelector:()=>en,batch:()=>ea.unstable_batchedUpdates,useStore:()=>$,shallowEqual:()=>F,ReactReduxContext:()=>y,createDispatchHook:()=>X,Provider:()=>w,createSelectorHook:()=>er,createStoreHook:()=>K});var n,a,o,i,u,c,s,l,d,f,p,h=r(67294),y=h.createContext(null),v=function(e){e()},m={notify:function(){},get:function(){return[]}};function g(e,t){var r,n=m;function a(){i.onStateChange&&i.onStateChange()}function o(){if(!r){var o,i,u;r=t?t.addNestedSub(a):e.subscribe(a),o=v,i=null,u=null,n={clear:function(){i=null,u=null},notify:function(){o(function(){for(var e=i;e;)e.callback(),e=e.next})},get:function(){for(var e=[],t=i;t;)e.push(t),t=t.next;return e},subscribe:function(e){var t=!0,r=u={callback:e,next:null,prev:u};return r.prev?r.prev.next=r:i=r,function(){t&&null!==i&&(t=!1,r.next?r.next.prev=r.prev:u=r.prev,r.prev?r.prev.next=r.next:i=r.next)}}}}}var i={addNestedSub:function(e){return o(),n.subscribe(e)},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return!!r},trySubscribe:o,tryUnsubscribe:function(){r&&(r(),r=void 0,n.clear(),n=m)},getListeners:function(){return n}};return i}var b="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?h.useLayoutEffect:h.useEffect;let w=function(e){var t=e.store,r=e.context,n=e.children,a=(0,h.useMemo)(function(){var e=g(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}},[t]),o=(0,h.useMemo)(function(){return t.getState()},[t]);b(function(){var e=a.subscription;return e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[a,o]);var i=r||y;return h.createElement(i.Provider,{value:a},n)};function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}var _=r(8679),x=r.n(_),S=r(59864),E=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],P=["reactReduxForwardedRef"],C=[],A=[null,null];function j(e,t){var r=e[1];return[t.payload,r+1]}function T(e,t,r){b(function(){return e.apply(void 0,t)},r)}function M(e,t,r,n,a,o,i){e.current=n,t.current=a,r.current=!1,o.current&&(o.current=null,i())}function D(e,t,r,n,a,o,i,u,c,s){if(e){var l=!1,d=null,f=function(){if(!l){var e,r,f=t.getState();try{e=n(f,a.current)}catch(e){r=e,d=e}r||(d=null),e===o.current?i.current||c():(o.current=e,u.current=e,i.current=!0,s({type:"STORE_UPDATED",payload:{error:r}}))}};return r.onStateChange=f,r.trySubscribe(),f(),function(){if(l=!0,r.tryUnsubscribe(),r.onStateChange=null,d)throw d}}}var R=function(){return[null,0]};function I(e,t){void 0===t&&(t={});var r=t,n=r.getDisplayName,a=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,o=r.methodName,i=void 0===o?"connectAdvanced":o,u=r.renderCountProp,c=void 0===u?void 0:u,s=r.shouldHandleStateChanges,l=void 0===s||s,d=r.storeKey,f=void 0===d?"store":d,p=(r.withRef,r.forwardRef),v=void 0!==p&&p,m=r.context,b=void 0===m?y:m,w=k(r,E);return function(t){var r=t.displayName||t.name||"Component",n=a(r),o=O({},w,{getDisplayName:a,methodName:i,renderCountProp:c,shouldHandleStateChanges:l,storeKey:f,displayName:n,wrappedComponentName:r,WrappedComponent:t}),u=w.pure,s=u?h.useMemo:function(e){return e()};function d(r){var n=(0,h.useMemo)(function(){var e=r.reactReduxForwardedRef,t=k(r,P);return[r.context,e,t]},[r]),a=n[0],i=n[1],u=n[2],c=(0,h.useMemo)(function(){return a&&a.Consumer&&(0,S.isContextConsumer)(h.createElement(a.Consumer,null))?a:b},[a,b]),d=(0,h.useContext)(c),f=!!r.store&&!!r.store.getState&&!!r.store.dispatch;d&&d.store;var p=f?r.store:d.store,y=(0,h.useMemo)(function(){return e(p.dispatch,o)},[p]),v=(0,h.useMemo)(function(){if(!l)return A;var e=g(p,f?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[p,f,d]),m=v[0],w=v[1],_=(0,h.useMemo)(function(){return f?d:O({},d,{subscription:m})},[f,d,m]),x=(0,h.useReducer)(j,C,R),E=x[0][0],I=x[1];if(E&&E.error)throw E.error;var N=(0,h.useRef)(),F=(0,h.useRef)(u),L=(0,h.useRef)(),z=(0,h.useRef)(!1),B=s(function(){return L.current&&u===F.current?L.current:y(p.getState(),u)},[p,E,u]);T(M,[F,N,z,u,B,L,w]),T(D,[l,p,m,y,F,N,z,L,w,I],[p,m,y]);var U=(0,h.useMemo)(function(){return h.createElement(t,O({},B,{ref:i}))},[i,t,B]);return(0,h.useMemo)(function(){return l?h.createElement(c.Provider,{value:_},U):U},[c,U,_])}var p=u?h.memo(d):d;if(p.WrappedComponent=t,p.displayName=d.displayName=n,v){var y=h.forwardRef(function(e,t){return h.createElement(p,O({},e,{reactReduxForwardedRef:t}))});return y.displayName=n,y.WrappedComponent=t,x()(y,t)}return x()(p,t)}}function N(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function F(e,t){if(N(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!N(e[r[a]],t[r[a]]))return!1;return!0}function L(e){return function(t,r){var n=e(t,r);function a(){return n}return a.dependsOnOwnProps=!1,a}}function z(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function B(e,t){return function(t,r){r.displayName;var n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=z(e);var a=n(t,r);return"function"==typeof a&&(n.mapToProps=a,n.dependsOnOwnProps=z(a),a=n(t,r)),a},n}}let U=[function(e){return"function"==typeof e?B(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:L(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?L(function(t){return function(e,t){var r={};for(var n in e)!function(n){var a=e[n];"function"==typeof a&&(r[n]=function(){return t(a.apply(void 0,arguments))})}(n);return r}(e,t)}):void 0}],H=[function(e){return"function"==typeof e?B(e,"mapStateToProps"):void 0},function(e){return e?void 0:L(function(){return{}})}];function G(e,t,r){return O({},r,e,t)}let Z=[function(e){return"function"==typeof e?function(t,r){r.displayName;var n,a=r.pure,o=r.areMergedPropsEqual,i=!1;return function(t,r,u){var c=e(t,r,u);return i?a&&o(c,n)||(n=c):(i=!0,n=c),n}}:void 0},function(e){return e?void 0:function(){return G}}];var W=["initMapStateToProps","initMapDispatchToProps","initMergeProps"],q=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function V(e,t,r){for(var n=t.length-1;n>=0;n--){var a=t[n](e);if(a)return a}return function(t,n){throw Error("Invalid value of type "+typeof e+" for "+r+" argument when connecting component "+n.wrappedComponentName+".")}}function Q(e,t){return e===t}let J=(o=void 0===(a=(n={}).connectHOC)?I:a,u=void 0===(i=n.mapStateToPropsFactories)?H:i,s=void 0===(c=n.mapDispatchToPropsFactories)?U:c,d=void 0===(l=n.mergePropsFactories)?Z:l,p=void 0===(f=n.selectorFactory)?function(e,t){var r=t.initMapStateToProps,n=t.initMapDispatchToProps,a=t.initMergeProps,o=k(t,W),i=r(e,o),u=n(e,o),c=a(e,o);return(o.pure?function(e,t,r,n,a){var o,i,u,c,s,l=a.areStatesEqual,d=a.areOwnPropsEqual,f=a.areStatePropsEqual,p=!1;return function(a,h){var y,v,m,g,b,w;return p?(y=a,b=!d(v=h,i),w=!l(y,o),(o=y,i=v,b&&w)?(u=e(o,i),t.dependsOnOwnProps&&(c=t(n,i)),s=r(u,c,i)):b?(e.dependsOnOwnProps&&(u=e(o,i)),t.dependsOnOwnProps&&(c=t(n,i)),s=r(u,c,i)):w?(g=!f(m=e(o,i),u),u=m,g&&(s=r(u,c,i)),s):s):(u=e(o=a,i=h),c=t(n,i),s=r(u,c,i),p=!0,s)}}:function(e,t,r,n){return function(a,o){return r(e(a,o),t(n,o),o)}})(i,u,c,e,o)}:f,function(e,t,r,n){void 0===n&&(n={});var a=n,i=a.pure,c=a.areStatesEqual,l=a.areOwnPropsEqual,f=void 0===l?F:l,h=a.areStatePropsEqual,y=void 0===h?F:h,v=a.areMergedPropsEqual,m=void 0===v?F:v,g=k(a,q),b=V(e,u,"mapStateToProps"),w=V(t,s,"mapDispatchToProps"),_=V(r,d,"mergeProps");return o(p,O({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:!!e,initMapStateToProps:b,initMapDispatchToProps:w,initMergeProps:_,pure:void 0===i||i,areStatesEqual:void 0===c?Q:c,areOwnPropsEqual:f,areStatePropsEqual:y,areMergedPropsEqual:m},g))});function Y(){return(0,h.useContext)(y)}function K(e){void 0===e&&(e=y);var t=e===y?Y:function(){return(0,h.useContext)(e)};return function(){return t().store}}var $=K();function X(e){void 0===e&&(e=y);var t=e===y?$:K(e);return function(){return t().dispatch}}var ee=X(),et=function(e,t){return e===t};function er(e){void 0===e&&(e=y);var t=e===y?Y:function(){return(0,h.useContext)(e)};return function(e,r){void 0===r&&(r=et);var n=t(),a=function(e,t,r,n){var a,o=(0,h.useReducer)(function(e){return e+1},0)[1],i=(0,h.useMemo)(function(){return g(r,n)},[r,n]),u=(0,h.useRef)(),c=(0,h.useRef)(),s=(0,h.useRef)(),l=(0,h.useRef)(),d=r.getState();try{if(e!==c.current||d!==s.current||u.current){var f=e(d);a=void 0!==l.current&&t(f,l.current)?l.current:f}else a=l.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return b(function(){c.current=e,s.current=d,l.current=a,u.current=void 0}),b(function(){function e(){try{var e=r.getState();if(e===s.current)return;var n=c.current(e);if(t(n,l.current))return;l.current=n,s.current=e}catch(e){u.current=e}o()}return i.onStateChange=e,i.trySubscribe(),e(),function(){return i.tryUnsubscribe()}},[r,i]),a}(e,r,n.store,n.subscription);return(0,h.useDebugValue)(a),a}}var en=er(),ea=r(73935);v=ea.unstable_batchedUpdates},56454:function(e,t,r){"use strict";function n(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}r.r(t),r.d(t,{default:()=>o});var a=n();a.withExtraArgument=n;let o=a},8969:function(e,t,r){"use strict";var n,a,o=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.startApp=t.default=t.checkApp=void 0;var i=o(r(68434)),u=o(r(82007)),c=r(54878),s=function(){return window.startApp},l=function(e){var t=e.appId,r=e.uri;return(0,c.isAndroidApp)()?{package:t}:r},d={},f=d.startApp=(n=(0,u.default)(i.default.mark(function e(t){var r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.startApp,e.next=3,d.checkApp(t);case 3:if(!e.sent){e.next=9;break}return n=l(t),e.abrupt("return",new Promise(function(e,t){if(!s()){t(Error("Cordova plugin 'com.lampa.startapp' is not installed. This plugin is needed to start a native app. Required by cozy-bar"));return}r.set(n).start(e,t)}));case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});t.startApp=f;var p=d.checkApp=(a=(0,u.default)(i.default.mark(function e(t){var r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.startApp,n=l(t),e.abrupt("return",new Promise(function(e,t){if(!s()){t(Error("Cordova plugin 'com.lampa.startapp' is not installed."));return}r.set(n).check(function(t){return e("OK"===t||t)},function(r){!1===r||0===r.indexOf("NameNotFoundException")?e(!1):t(r)})}));case 3:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.checkApp=p,t.default=d},31555:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCordova=void 0,t.isCordova=function(){return"undefined"!=typeof window&&void 0!==window.cordova}},34586:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openDeeplinkOrRedirect=void 0;var r=function(e,t,r){var n=document.createElement("iframe");return n.src=t,n.id="hiddenIframe_".concat(r),n.style.display="none",e.appendChild(n),n},n=function(e,t){var n=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);window.addEventListener("blur",i);var a=r(document.body,"about:blank",n),o=setTimeout(function(){t(),window.removeEventListener("blur",i),a.parentElement.removeChild(a)},500);function i(){clearTimeout(o),window.removeEventListener("blur",i),a.parentElement.removeChild(a)}a.contentWindow.location.href=e},a=function(e,t){for(var r=setTimeout(function(){t(),n.removeEventListener("blur",a)},500),n=window;n!=n.parent;)n=n.parent;function a(){clearTimeout(r),n.removeEventListener("blur",a)}n.addEventListener("blur",a),window.location=e},o=function(e,t){navigator.msLaunchUri(e,void 0,t)},i=function(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=navigator.userAgent.toLowerCase(),r=t.includes("safari")&&!t.includes("chrome")||Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,n=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a=n&&(t.includes("os 12_2")||t.includes("os 12_3"));return{isOpera:e,isFirefox:void 0!==window.InstallTrigger,isSafari:r,isChrome:!!window.chrome&&!e,isIOS122:a,isIOS:n}};t.openDeeplinkOrRedirect=function(e,t){if(navigator.msLaunchUri)o(e,t);else{var r=i();r.isChrome||r.isIOS&&!r.isIOS122?a(e,t):r.isSafari&&!r.isIOS122||r.isFirefox?n(e,t):t()}}},26082:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceName=void 0;var a=n(r(48403)),o=r(31555),i=r(28715),u=r(54878),c="Device",s=function(e){for(var t=0,r=["iPhone","iPad","Watch","AppleTV"];t<r.length;t++){var n=r[t];if(e.match(new RegExp(n)))return n}return c};t.getDeviceName=function(){if(!(0,i.hasDevicePlugin)())return(0,o.isCordova)()&&console.warn("You should install `cordova-plugin-device`."),c;var e=window.device,t=e.manufacturer,r=e.model,n=(0,u.isIOSApp)()?s(r):r;return"".concat((0,a.default)(t)," ").concat(n)}},70574:function(e,t,r){"use strict";var n,a,o=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isFlagshipOfflineSupported=t.isFlagshipApp=t.getFlagshipMetadata=t.FlagshipRoutes=void 0;var i=o(r(33918));t.FlagshipRoutes=a,(n=a||(t.FlagshipRoutes=a={})).Home="home",n.Cozyapp="cozyapp",n.Authenticate="authenticate",n.Onboarding="onboarding",n.Stack="stack";var u=function(){return"undefined"!=typeof window?window:void(0,i.default)("error",'"window" is not defined. This means that getGlobalWindow() shouldn\'t have been called and investigation should be done to prevent this call')};t.getFlagshipMetadata=function(){var e,t,r;return null!==(e=null===(t=u())||void 0===t?void 0:null===(r=t.cozy)||void 0===r?void 0:r.flagship)&&void 0!==e?e:{}},t.isFlagshipApp=function(){var e,t;return(null===(e=u())||void 0===e?void 0:null===(t=e.cozy)||void 0===t?void 0:t.flagship)!==void 0},t.isFlagshipOfflineSupported=function(){var e,t,r;return null===(e=u())||void 0===e?void 0:null===(t=e.cozy)||void 0===t?void 0:null===(r=t.flagship)||void 0===r?void 0:r.offline_available}},25976:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkApp",{enumerable:!0,get:function(){return o.checkApp}}),Object.defineProperty(t,"getDeviceName",{enumerable:!0,get:function(){return a.getDeviceName}}),Object.defineProperty(t,"getFlagshipMetadata",{enumerable:!0,get:function(){return l.getFlagshipMetadata}}),Object.defineProperty(t,"getPlatform",{enumerable:!0,get:function(){return n.getPlatform}}),Object.defineProperty(t,"hasDevicePlugin",{enumerable:!0,get:function(){return i.hasDevicePlugin}}),Object.defineProperty(t,"hasInAppBrowserPlugin",{enumerable:!0,get:function(){return i.hasInAppBrowserPlugin}}),Object.defineProperty(t,"hasNetworkInformationPlugin",{enumerable:!0,get:function(){return i.hasNetworkInformationPlugin}}),Object.defineProperty(t,"hasSafariPlugin",{enumerable:!0,get:function(){return i.hasSafariPlugin}}),Object.defineProperty(t,"isAndroid",{enumerable:!0,get:function(){return n.isAndroid}}),Object.defineProperty(t,"isAndroidApp",{enumerable:!0,get:function(){return n.isAndroidApp}}),Object.defineProperty(t,"isCordova",{enumerable:!0,get:function(){return u.isCordova}}),Object.defineProperty(t,"isFlagshipApp",{enumerable:!0,get:function(){return l.isFlagshipApp}}),Object.defineProperty(t,"isFlagshipOfflineSupported",{enumerable:!0,get:function(){return l.isFlagshipOfflineSupported}}),Object.defineProperty(t,"isIOS",{enumerable:!0,get:function(){return n.isIOS}}),Object.defineProperty(t,"isIOSApp",{enumerable:!0,get:function(){return n.isIOSApp}}),Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return n.isMobile}}),Object.defineProperty(t,"isMobileApp",{enumerable:!0,get:function(){return n.isMobileApp}}),Object.defineProperty(t,"isWebApp",{enumerable:!0,get:function(){return n.isWebApp}}),Object.defineProperty(t,"nativeLinkOpen",{enumerable:!0,get:function(){return c.nativeLinkOpen}}),Object.defineProperty(t,"openDeeplinkOrRedirect",{enumerable:!0,get:function(){return s.openDeeplinkOrRedirect}}),Object.defineProperty(t,"startApp",{enumerable:!0,get:function(){return o.startApp}});var n=r(54878),a=r(26082),o=r(8969),i=r(28715),u=r(31555),c=r(9526),s=r(34586),l=r(70574)},9526:function(e,t,r){"use strict";var n,a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.nativeLinkOpen=void 0;var o=a(r(68434)),i=a(r(82007)),u=r(28715),c=(n=(0,i.default)(o.default.mark(function e(t){var r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,e.next=3,(0,u.hasSafariPlugin)();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}e.t0=window.SafariViewController;case 6:if(!e.t0){e.next=10;break}window.SafariViewController.show({url:r,transition:"curl"},function(e){"closed"===e.event&&window.SafariViewController.hide()},function(){window.SafariViewController.hide()}),e.next=11;break;case 10:(0,u.hasInAppBrowserPlugin)()?(n="_blank",a="clearcache=yes,zoom=no",window.cordova.InAppBrowser.open(r,n,a)):window.location=r;case 11:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});t.nativeLinkOpen=c},54878:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebApp=t.isMobileApp=t.isMobile=t.isIOSApp=t.isIOS=t.isAndroidApp=t.isAndroid=t.getPlatform=void 0;var n=r(31555),a=function(){return(0,n.isCordova)()?window.cordova.platformId:"web"};t.getPlatform=a;var o=function(e){return a()===e};t.isIOSApp=function(){return o("ios")},t.isAndroidApp=function(){return o("android")},t.isWebApp=function(){return o("web")},t.isMobileApp=function(){return(0,n.isCordova)()};var i=function(){return window.navigator.userAgent&&window.navigator.userAgent.indexOf("Android")>=0};t.isAndroid=i;var u=function(){return window.navigator.userAgent&&/iPad|iPhone|iPod/.test(window.navigator.userAgent)};t.isIOS=u,t.isMobile=function(){return i()||u()}},28715:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSafariPlugin=t.hasNetworkInformationPlugin=t.hasInAppBrowserPlugin=t.hasDevicePlugin=void 0;var n=r(31555);t.hasDevicePlugin=function(){return(0,n.isCordova)()&&void 0!==window.device},t.hasInAppBrowserPlugin=function(){return(0,n.isCordova)()&&void 0!==window.cordova.InAppBrowser},t.hasSafariPlugin=function(){return new Promise(function(e){if(!(0,n.isCordova)()||void 0===window.SafariViewController){e(!1);return}window.SafariViewController.isAvailable(function(t){return e(t)})})},t.hasNetworkInformationPlugin=function(){return(0,n.isCordova)()&&void 0!==window.navigator.connection}},59197:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractUrl=void 0,t.extractUrl=function(e){if(!e.startsWith("http"))return e;var t=new URL(e);return t.pathname+t.search+t.hash}},62857:function(e,t,r){"use strict";var n=r(5751);t.useExternalBridge=void 0;var a=n(r(68434)),o=n(r(82007)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(79273)),u=r(67294),c=r(79655),s=r(16396),l=n(r(71400)),d=r(59197);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var p=function(){var e=document.getElementById("embeddedApp");if(null===e)throw Error("No iframe found");return e},h=function(){var e=(0,c.useLocation)();(0,u.useEffect)(function(){if("/"!==e.pathname||""!==e.hash||""!==e.search){var t=p(),r=new URL(t.src);r.pathname=e.pathname,r.hash=e.hash,r.search=e.search;var n=new URL(t.src);r.toString()!==n.toString()&&(t.src=r.toString())}},[])};t.useExternalBridge=function(e){var t=(0,s.useClient)(),r=(0,c.useNavigate)();h(),(0,u.useEffect)(function(){if(t){var n,u={getContacts:(n=(0,o.default)(a.default.mark(function e(){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,s.Q)("io.cozy.contacts"));case 2:return r=e.sent.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),getFlag:function(e){return(0,l.default)(e)},updateHistory:function(e){var t=(0,d.extractUrl)(e);console.log("\uD83D\uDFE2 Replacing route:",t),r(t,{replace:!0})}};i.expose(u,i.windowEndpoint(p().contentWindow,self,e))}},[r,t,e])}},73221:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(65105)),o=n(r(19723)),i=n(r(25665)),u=n(r(27952)),c=n(r(12323)),s=n(r(67294)),l=n(r(36049)),d=n(r(24394)),f=function(e){var t=e.name,r=e.onChange;return s.default.createElement("input",{type:"checkbox",checked:(0,d.default)(t),onChange:function(e){return(0,d.default)(t,JSON.parse(e.target.checked))&&r&&r()}})},p=function(e){var t=e.children,r=e.onClick;return s.default.createElement("button",{type:"button",onClick:r,style:{position:"absolute",top:"100%",left:"0"}},t)},h=(0,l.default)(function(){var e=d.default.list();return s.default.createElement("div",null,e.map(function(e){return s.default.createElement("div",{key:e},e.replace(/[a-z][A-Z]/g,function(e){return e[0]+" "+e[1].toLowerCase()})," : ",s.default.createElement(f,{onChange:function(){},name:e}))}))}),y=function(e){(0,i.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(n);return e=t?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function n(e){var t;return(0,a.default)(this,n),(t=r.call(this,e)).state={folded:!0},t}return(0,o.default)(n,[{key:"render",value:function(){var e,t=this;return(0,d.default)("switcher")&&s.default.createElement("div",{className:"flag-switcher",style:(e=this.state,{borderBottomLeftRadius:".5rem",padding:".5rem",position:"absolute",zIndex:1e3,color:"white",background:"rgba(74,68,90,0.85)",top:0,right:0,transform:"translateY(".concat(e.folded?"-100%":"0",")")})},s.default.createElement(p,{onClick:function(){return t.setState(function(e){return{folded:!e.folded}})}},this.state.folded?"Show":"Hide"," flags"),s.default.createElement("button",{onClick:function(){return t.setState({date:Date.now()})}},"refresh"),"\xa0",s.default.createElement("button",{onClick:function(){return d.default.reset()&&(0,d.default)("switcher",!0)&&t.forceUpdate()}},"reset"),s.default.createElement(h,null))}}]),n}(s.default.Component);t.default=y,y.List=h},36049:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(65105)),o=n(r(19723)),i=n(r(8997)),u=n(r(25665)),c=n(r(27952)),s=n(r(12323)),l=n(r(64512)),d=n(r(67294)),f=n(r(24394)).default.store;t.default=function(e){var t,r=function(t){(0,u.default)(p,t);var r,n=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,s.default)(p);return e=r?Reflect.construct(t,arguments,(0,s.default)(this).constructor):t.apply(this,arguments),(0,c.default)(this,e)});function p(){var e;(0,a.default)(this,p);for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=n.call.apply(n,[this].concat(r)),(0,l.default)((0,i.default)(e),"handleChange",function(){e.forceUpdate()}),e}return(0,o.default)(p,[{key:"componentDidMount",value:function(){f.on("change",this.handleChange)}},{key:"componentWillUnmount",value:function(){f.removeListener("change",this.handleChange)}},{key:"render",value:function(){return d.default.createElement(e,this.props)}}]),p}(d.default.Component);return(0,l.default)(r,"displayName",void 0),r.displayName="withFlags(".concat(null!==(t=e.displayName)&&void 0!==t?t:e.name,")"),r}},24394:function(e,t,r){"use strict";var n,a,o,i=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.resetFlags=t.listFlags=t.initializeFromRemote=t.initializeFromDOM=t.initialize=t.getTemplateData=t.enable=t.default=void 0;var u=i(r(68434)),c=i(r(65105)),s=i(r(19723)),l=i(r(82007)),d=i(r(90402)),f=r(71450);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=new(i(r(10916))).default,y=function(e,t){return 1==arguments.length?h.get(e):(h.set(e,t),t)},v=function(){return h.keys().sort()};t.listFlags=v;var m=function(){v().forEach(function(e){return h.remove(e)})};t.resetFlags=m;var g=function(e){if(Array.isArray(e)){if(0===e.length)return;console.log("flags.enable: Deprecation warning: prefer to use an object { flag1: true, flag2: true } instead of an array when using flags.enable"),t=e.map(function(e){return[e,!0]})}else"object"==typeof e&&(t=Object.entries(e));if(t){var t,r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(t);try{for(n.s();!(r=n.n()).done;){var a=(0,d.default)(r.value,2),o=a[0],i=a[1];y(o,i)}}catch(e){n.e(e)}finally{n.f()}}};t.enable=g;var b=(n=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,f.Q)("io.cozy.settings").getById("io.cozy.settings.flags"));case 2:g(e.sent.data.attributes);case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});t.initializeFromRemote=b;var w=function(e){if("undefined"==typeof document)return null;var t=document.querySelector("[data-cozy]"),r=document.querySelector("[data-cozy-".concat(e,"]"));try{if(t)return JSON.parse(t.dataset.cozy)[e];if(!r)return null;return console.warn('Prefer to use [data-cozy] to store template data. <div data-cozy="{{.CozyData}}></div>. "'),JSON.parse(r.dataset["cozy".concat(e[0].toUpperCase()+e.slice(1))])}catch(e){return null}};t.getTemplateData=w;var O=(a=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w("flags")){e.next=3;break}return e.abrupt("return",!1);case 3:return g(t),e.abrupt("return",!0);case 5:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)});t.initializeFromDOM=O;var k=(o=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:if(!1!=e.sent){e.next=6;break}return e.next=6,b(t);case 6:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)});t.initialize=k;var _=function(){var e,t,r;function n(e){(0,c.default)(this,n),this.client=e,this.handleLogin=this.handleLogin.bind(this),this.handleLogout=this.handleLogout.bind(this),this.client.on("login",this.handleLogin),this.client.on("logout",this.handleLogout),this.setupInitializing(),e.isLogged&&this.handleLogin()}return(0,s.default)(n,[{key:"refresh",value:(e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.initializeFromRemote(this.client);case 2:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"setupInitializing",value:function(){var e=this;this.initializing=new Promise(function(t){e.resolveInitializing=t})}},{key:"handleLogin",value:(t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.initialize(this.client);case 2:this.resolveInitializing(),this.client.emit("plugin:flag:login");case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"handleLogout",value:(r=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y.reset(),this.setupInitializing(),this.client.emit("plugin:flag:logout");case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}]),n}();_.pluginName="flags",y.store=h,y.list=v,y.reset=m,y.enable=g,y.initializeFromRemote=b,y.initializeFromDOM=O,y.initialize=k,y.plugin=_,t.default=y},71400:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(73221)),o=n(r(36049)),i=n(r(24394)),u=n(r(99975));i.default.connect=o.default,i.default.FlagSwitcher=a.default,i.default.useFlag=u.default,"undefined"!=typeof __ENABLED_FLAGS__&&i.default.enable(__ENABLED_FLAGS__);var c=i.default;t.default=c},6465:function(e,t){"use strict";function r(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.prefix=t.getKey=t.default=void 0;var a="flag__";t.prefix=a;var o=function(e){return a+e};t.getKey=o;var i=function(){return Object.keys(localStorage).filter(function(e){return 0===e.indexOf(a)}).map(function(e){return e.replace(a,"")})},u=function(e){var t=localStorage.getItem(o(e));return t?JSON.parse(t):t},c=function(e){return localStorage.removeItem(o(e))};t.default={getAll:function(){var e,t={},n=r(i());try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a]=u(a)}}catch(e){n.e(e)}finally{n.f()}return t},getItem:u,setItem:function(e,t){var r=JSON.stringify(t);return localStorage.setItem(o(e),r)},clearAll:function(){var e,t=r(i());try{for(t.s();!(e=t.n()).done;){var n=e.value;c(n)}}catch(e){t.e(e)}finally{t.f()}},removeItem:c}},10916:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(90402)),o=n(r(65105)),i=n(r(19723)),u=n(r(37203)),c=n(r(6465)),s=function(){function e(){(0,o.default)(this,e),this.store={},"undefined"!=typeof localStorage&&(this.longtermStore=c.default),this.restore()}return(0,i.default)(e,[{key:"restore",value:function(){if(this.longtermStore)for(var e=this.longtermStore.getAll(),t=0,r=Object.entries(e);t<r.length;t++){var n=(0,a.default)(r[t],2),o=n[0],i=n[1];this.store[o]=i,this.emit("change",o)}}},{key:"keys",value:function(){return Object.keys(this.store)}},{key:"get",value:function(e){if(this.store.hasOwnProperty(e))return this.store[e];if("string"==typeof e)for(var t=e.split("."),r=t.length,n=r-1;n>0;n--){var a=t.slice(0,n).join(".");if(this.store.hasOwnProperty(a))return t.slice(n,r).reduce(function(e,t){return e&&e.hasOwnProperty(t)?e[t]:null},this.store[a])}return null}},{key:"set",value:function(e,t){this.longtermStore&&this.longtermStore.setItem(e,t),this.store[e]=t,this.emit("change",e)}},{key:"remove",value:function(e){delete this.store[e],this.longtermStore&&this.longtermStore.removeItem(e),this.emit("change",e)}}]),e}();u.default.mixin(s),t.default=s},99975:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.useState)((0,i.default)(e)),r=(0,a.default)(t,2),n=r[0],u=r[1];return(0,o.useEffect)(function(){var t=function(t){t===e&&u((0,i.default)(e))};return i.default.store.on("change",t),function(){i.default.store.removeListener("change",t)}},[u,e]),n};var a=n(r(90402)),o=r(67294),i=n(r(24394))},96762:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numbers=void 0,t.numbers={maxAttempts:20}},51496:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strings=void 0,t.strings={flagshipButNoRNAPI:"<WebviewIntentProvider /> can not instantiate its service. The application was detected as running in a Flagship webview but has no access to `window.ReactNativeWebView`, which is contradictory.",noListenerFound:"Could not handle event, this `NativeMessenger` instance does not have a listener.",noWebviewFound:'error: no WebView was found when trying to post message. This might mean we exited a CozyApp without waiting the call("backToHome") response.',postMeSignature:"@post-me",webviewIsRendered:"webviewIsRendered",errorRegisterWebview:"Cannot register webview. A webview is already registered into cozy-intent with the uri: ${uri}",errorUnregisterWebview:"Cannot unregister webview. No webview is registered into cozy-intent with the uri: ${uri}",errorEmitMessage:"Cannot emit message. No webview is registered with uri: ${webviewUri}",errorCozyBarAPIMissing:"Cozy-bar was detected by WebviewIntentProvider but the required setWebviewContext() API was not found. Cozy-bar webview intents will not work. Your cozy-bar version is most likely outdated.",errorParentHandshake:'Handshake failed for uri: "${uri}". ConcreteConnection will not be available for this uri\'s messenger, but messages should still work. Error was: "${errorMessage}".',errorNoMessengerToInit:'Could not initialise messenger for uri: "${uri}. No WebView has been registered from react-native with this uri. Please use NativeService.registerWebview(WebviewRef).',logging:{registering:function(e){return'- REGISTERING ▶️ "'.concat(e,'"')},registered:function(e){return'- REGISTERED ▶️ "'.concat(e,'"')},unregistering:function(e){return'- UNREGISTERING ▶️ "'.concat(e,'"')},unregistered:function(e){return'- UNREGISTERED ▶️ "'.concat(e,'"')}}}},55260:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(96762);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))});var a=r(51496);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var o=r(53060);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=r(81334);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var u=r(69855);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))});var c=r(54675);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))});var s=r(45566);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var l=r(59761);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var d=r(3463);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))});var f=r(81519);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))});var p=r(81712);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))})},53060:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFlagshipUI=void 0,t.isFlagshipUI=function(e){return"object"==typeof e&&null!==e&&("bottomBackground"in e||"bottomOverlay"in e||"bottomTheme"in e||"topBackground"in e||"topOverlay"in e||"topTheme"in e)}},81334:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebviewSourceBaseUrl=function(e){return!!e.html}},69855:function(){},54675:function(){},45566:function(){},59761:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.NativeMessenger=t.DebugNativeMessenger=void 0;var a=n(r(19723)),o=n(r(65105)),i=n(r(64512)),u=r(97627),c=n(r(74450)),s=r(55260),l=t.logger=(0,c.default)("cozy-intent"),d=(0,u.debug)("NativeMessenger");t.NativeMessenger=(0,a.default)(function e(t){var r,n=this;(0,o.default)(this,e),(0,i.default)(this,"injectJavaScript",void 0),(0,i.default)(this,"listener",void 0),(0,i.default)(this,"webviewUri",void 0),(0,i.default)(this,"postMessage",function(e){if(e.error){var t;l.warn("Error during intent to ".concat(null!==(t=n.webviewUri)&&void 0!==t?t:"undefined webview"," : "),JSON.stringify(e.error))}try{var r,a="window.postMessage(".concat(JSON.stringify(e),")");null===(r=n.injectJavaScript)||void 0===r||r.call(n,a)}catch(e){d(s.strings.noWebviewFound)}}),(0,i.default)(this,"addMessageListener",function(e){return n.listener=e,function(){return n.listener=void 0}}),(0,i.default)(this,"onMessage",function(e){if(!n.listener)return d(s.strings.noListenerFound);n.listener({data:e})}),this.injectJavaScript=t.injectJavaScript,this.webviewUri=null!==(r=t.props.source.uri)&&void 0!==r?r:t.props.source.baseUrl}),t.DebugNativeMessenger=function(e){return{postMessage:function(t){"response"!==t.action&&d("- OUT",t),e.postMessage(t)},addMessageListener:function(t){return e.addMessageListener(t)},onMessage:function(t){d("- IN",t),e.onMessage(t)}}}},3463:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.NativeService=void 0;var a=n(r(68434)),o=n(r(82007)),i=n(r(65105)),u=n(r(19723)),c=n(r(64512)),s=r(97627),l=r(55260),d=r(46311);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,c.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=(0,s.debug)("NativeService");t.NativeService=function(){function e(t){var r,n,u,f=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.NativeMessenger;(0,i.default)(this,e),(0,c.default)(this,"messengerService",void 0),(0,c.default)(this,"localMethods",void 0),(0,c.default)(this,"messengerRegister",{}),(0,c.default)(this,"updateLocalMethods",function(e){f.localMethods=e}),(0,c.default)(this,"getUri",function(e){return new URL(e.nativeEvent.url).hostname.toLowerCase()}),(0,c.default)(this,"parseNativeEvent",function(e){return JSON.parse(e.nativeEvent.data)}),(0,c.default)(this,"isPostMeMessage",function(e){return e.type===l.strings.postMeSignature}),(0,c.default)(this,"isInitMessage",function(e){return e.message===l.strings.webviewIsRendered}),(0,c.default)(this,"registerWebview",function(e,t,r){if(h(l.strings.logging.registering(e)),f.messengerRegister[e])return h((0,d.interpolate)(l.strings.errorRegisterWebview,{uri:e}));var n=new f.messengerService(r);f.messengerRegister=p(p({},f.messengerRegister),{},(0,c.default)({},e,{messenger:(0,d.isNativeDevMode)()?(0,l.DebugNativeMessenger)(n):n,slug:t})),h(l.strings.logging.registered(e))}),(0,c.default)(this,"unregisterWebview",function(e){if(h(l.strings.logging.unregistering(e)),!f.messengerRegister[e])return h((0,d.interpolate)(l.strings.errorUnregisterWebview,{uri:e}));delete f.messengerRegister[e],h(l.strings.logging.unregistered(e))}),(0,c.default)(this,"initWebview",(r=(0,o.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.ParentHandshake)(t,f.localMethods,l.numbers.maxAttempts);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})),(0,c.default)(this,"tryEmit",(n=(0,o.default)(a.default.mark(function e(t,r){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.isNativeEvent(t)){e.next=2;break}return e.abrupt("return");case 2:if("setFlagshipUI"===(n=f.parseNativeEvent(t)).methodName&&(0,d.isFlagshipUiArgsArray)(n.args)&&(n.args[0].componentId=r),"setTheme"===n.methodName&&Array.isArray(n.args)&&(0,d.isThemeArg)(n.args[0])&&(n.args[0]={homeTheme:n.args[0],componentId:r}),!f.isInitMessage(n)){e.next=9;break}return e.next=8,f.tryInit(t);case 8:return e.abrupt("return",e.sent);case 9:f.isPostMeMessage(n)&&f.tryOnMessage(t,n);case 10:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})),(0,c.default)(this,"tryInit",(u=(0,o.default)(a.default.mark(function e(t){var r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.getUri(t),n=f.messengerRegister[r],e.prev=2,n){e.next=5;break}throw Error((0,d.interpolate)(l.strings.errorNoMessengerToInit,{uri:r}));case 5:return e.next=7,f.initWebview(n.messenger);case 7:n.connection=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),h((0,d.interpolate)(l.strings.errorParentHandshake,{uri:r,errorMessage:(0,d.getErrorMessage)(e.t0)}));case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(e){return u.apply(this,arguments)})),(0,c.default)(this,"tryOnMessage",function(e,t){var r,n=f.getUri(e),a=f.messengerRegister[n];if(void 0===a)return h((0,d.interpolate)(l.strings.errorEmitMessage,{webviewUri:n}));null===(r=t.args)||void 0===r||r.unshift({slug:a.slug}),a.messenger.onMessage(t)}),(0,c.default)(this,"getHostname",function(e){try{return new URL(e).hostname.toLowerCase()}catch(t){return e}}),(0,c.default)(this,"call",function(e,t){for(var r,n,a=arguments.length,o=Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];return null===(r=f.messengerRegister[f.getHostname(e)])||void 0===r||null===(r=r.connection)||void 0===r?void 0:(n=r.remoteHandle()).call.apply(n,[t].concat(o))}),this.messengerService=y,this.localMethods=t}return(0,u.default)(e,[{key:"isNativeEvent",value:function(e){return void 0!==e.nativeEvent.data}}]),e}()},81519:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewMessenger=t.DebugWebviewMessenger=void 0;var a=n(r(19723)),o=n(r(65105)),i=n(r(64512)),u=r(97627);t.WebviewMessenger=(0,a.default)(function e(t){var r=this;(0,o.default)(this,e),(0,i.default)(this,"windowRef",void 0),(0,i.default)(this,"postMessage",function(e){var t;return null===(t=r.windowRef)||void 0===t?void 0:t.ReactNativeWebView.postMessage(JSON.stringify(e))}),(0,i.default)(this,"addMessageListener",function(e){var t,n=function(t){return e(t)};return null===(t=r.windowRef)||void 0===t||t.addEventListener("message",n),function(){var e;return null===(e=r.windowRef)||void 0===e?void 0:e.removeEventListener("message",n)}}),this.windowRef=t}),t.DebugWebviewMessenger=function(e){var t=(0,u.debug)("WebviewMessenger");return{postMessage:function(r){"response"!==r.action&&t("- OUT",r),e.postMessage(r)},addMessageListener:function(t){return e.addMessageListener(t)}}}},81712:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewService=void 0;var a=n(r(19723)),o=n(r(65105)),i=n(r(64512));t.WebviewService=(0,a.default)(function e(t){var r=this;(0,o.default)(this,e),(0,i.default)(this,"close",void 0),(0,i.default)(this,"remoteHandle",void 0),(0,i.default)(this,"call",function(e){for(var t,n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return(t=r.remoteHandle).call.apply(t,[e].concat(a))}),(0,i.default)(this,"closeMessenger",function(){return r.close()}),this.remoteHandle=t.remoteHandle(),this.close=function(){return t.close()}})},22960:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55260);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))});var a=r(46311);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var o=r(17955);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})},46311:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isWebDevMode=t.isThemeArg=t.isNativeDevMode=t.isFlagshipUiArgsArray=t.interpolate=t.getErrorMessage=void 0;var a=n(r(36687)),o=r(55260);t.interpolate=function(e,t){if(!t)return e;var r=Object.keys(t),n=Object.values(t),o=(0,a.default)(Function,r.concat(["return `".concat(e,"`;")]));try{return o.apply(void 0,n)}catch(t){return e}},t.isNativeDevMode=function(){try{return!!__DEV__}catch(e){return!1}},t.isWebDevMode=function(){try{return!!__DEVELOPMENT__}catch(e){return!1}},t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.isFlagshipUiArgsArray=function(e){return Array.isArray(e)&&(0,o.isFlagshipUI)(e[0])},t.isThemeArg=function(e){return"string"==typeof e}},40003:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNativeIntentService=t.NativeIntentProvider=void 0;var n,a=r(97627),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(67294)),i=r(55260),u=r(17955);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var s=(0,a.debug)("NativeIntentProvider");t.getNativeIntentService=function(){if(!n)throw Error("nativeIntentService has not been instantiated in a NativeIntentProvider");return n};var l=function(e){n=e};t.NativeIntentProvider=function(e){var t=e.children,r=e.localMethods,n=(0,o.useRef)(null);return null===n.current&&(n.current=new i.NativeService(r),l(n.current)),(0,o.useEffect)(function(){var e;s("Updating localMethods on nativeIntentService"),null===(e=n.current)||void 0===e||e.updateLocalMethods(r)},[r]),o.default.createElement(u.NativeContext.Provider,{value:n.current},t)}},55319:function(e,t,r){"use strict";var n,a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewIntentProvider=void 0;var o=a(r(68434)),i=a(r(90402)),u=a(r(82007)),c=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(67294)),s=r(97627),l=r(55260),d=r(17955),f=r(46311);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var h=(0,s.debug)("WebviewIntentProvider"),y=function(){try{if(cozy.bar&&void 0===cozy.bar.setWebviewContext)return h(l.strings.errorCozyBarAPIMissing);return cozy.bar.setWebviewContext}catch(e){return}},v=(n=(0,u.default)(o.default.mark(function e(t,r){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var a;return a=l.strings.webviewIsRendered,window.ReactNativeWebView.postMessage(JSON.stringify({type:l.strings.postMeSignature,message:a})),n=new l.WebviewMessenger(window),e.next=4,(0,s.ChildHandshake)((0,f.isWebDevMode)()?(0,l.DebugWebviewMessenger)(n):n,r);case 4:t(e.sent);case 6:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),m=function(){var e;return null!==(e=window.cozy)&&void 0!==e&&!!e.flagship&&(void 0!==window.ReactNativeWebView||(h(l.strings.flagshipButNoRNAPI),!1))};t.WebviewIntentProvider=function(e){var t=e.children,r=e.methods,n=e.setBarContext,a=e.webviewService,o=(0,c.useState)(),u=(0,i.default)(o,2),s=u[0],f=u[1],p=(0,c.useState)(a),g=(0,i.default)(p,2),b=g[0],w=g[1],O=n||y();return(0,c.useEffect)(function(){!s&&!a&&m()&&v(f,r).catch(h)},[s,a,r]),(0,c.useEffect)(function(){!b&&s&&w(new l.WebviewService(s))},[b,s]),(0,c.useEffect)(function(){O&&b&&O(b)},[O,b]),c.default.createElement(d.WebviewContext.Provider,{value:b},t)}},84476:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.NativeContext=void 0;var a=n(r(67294));t.NativeContext=a.default.createContext(void 0)},50108:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewContext=void 0;var a=n(r(67294));t.WebviewContext=a.default.createContext(void 0)},74625:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useIsAvailable=void 0;var a=n(r(68434)),o=n(r(82007)),i=n(r(90402)),u=r(67294),c=r(83224),s=r(46311);t.useIsAvailable=function(e){var t=(0,c.useWebviewIntent)(),r=(0,u.useState)(null),n=(0,i.default)(r,2),l=n[0],d=n[1],f=(0,u.useState)(void 0),p=(0,i.default)(f,2),h=p[0],y=p[1];return(0,u.useEffect)(function(){if(t){var r;(r=(0,o.default)(a.default.mark(function r(){var n;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.call("isAvailable",e);case 3:if("boolean"==typeof(n=r.sent)){r.next=6;break}throw Error("Invalid result from isAvailable method: ".concat(n));case 6:y(void 0),d(n),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),y((0,s.getErrorMessage)(r.t0)),d(!1);case 14:case"end":return r.stop()}},r,null,[[0,10]])})),function(){return r.apply(this,arguments)})()}},[t,e]),{isAvailable:l,error:h}}},55093:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNativeIntent=void 0;var n=r(67294),a=r(17955);t.useNativeIntent=function(){return(0,n.useContext)(a.NativeContext)}},83224:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useWebviewIntent=void 0;var n=r(67294),a=r(17955);t.useWebviewIntent=function(){return(0,n.useContext)(a.WebviewContext)}},17955:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40003);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))});var a=r(55319);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var o=r(84476);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var i=r(50108);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var u=r(55093);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))});var c=r(83224);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))});var s=r(74625);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))})},78043:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.start=function e(t,r,n,a){var d,f,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},h=function(){f&&s.remove(f),d&&d.stopListening()},y=function(){h()},v=new Promise(function(h,v){var m,g=(0,c.pickService)(r,p.filterServices);f=s.insertIntentIframe(r,n,g.href,p.onReadyCallback);var b=g.href.split("/",3).join("/");(d=new l.default({intentId:r.id,origin:b,onReady:function(e){e.source.postMessage(a,e.origin)},onDone:function(e){h(e.data.document),y()},onCancel:function(){h(null),y()},onError:function(e){v(e instanceof Event?c.errorSerializer.deserialize(e.data.error):e),y()},onResize:function(e){var t=e.data,r=t.transition,a=t.dimensions;s.applyStyle(n,(0,u.default)({transition:r},a))},onExposeFrameRemoval:function(e){h({document:e.document,removeIntentIframe:function(){return s.remove(f)}})},onCompose:(m=(0,i.default)(o.default.mark(function r(a){var i,c,l,d,p,h,y,v;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c=(i=a.data).action,l=i.doctype,d=i.data,p=a.source,h=a.origin,r.next=4,t(c,l,d);case 4:return y=r.sent,s.hide(f),r.prev=6,r.next=9,e(t,y,n,(0,u.default)({},d,{exposeIntentFrameRemoval:!1}));case 9:v=r.sent,p.postMessage(v,h);case 11:return r.prev=11,s.show(f),r.finish(11);case 14:case"end":return r.stop()}},r,null,[[6,,11,14]])})),function(e){return m.apply(this,arguments)})})).listen()});return v.destroy=h,v};var o=a(r(68434)),i=a(r(82007)),u=a(r(24789)),c=r(75813),s=n(r(69564)),l=a(r(93326))},69564:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hide=function(e){e.style.display="none"},t.show=function(e){e.style.display="block"},t.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.iframeFromIntent=o,t.insertIntentIframe=function(e,t,r,n){a(t);var i=o(e,t,r);return"function"==typeof n&&(i.onload=n),t.appendChild(i),i.focus(),i},t.assertOKForIntentIframe=t.applyStyle=void 0;var r=function(e){return e+"px"},n={width:r,height:r,maxWidth:r,maxHeight:r};t.applyStyle=function(e,t){Object.keys(t).forEach(function(r){var a=t[r];e.style[r]="".concat(n[r]?n[r](a):a)})};var a=function(e){var t=e.ownerDocument;if(!t)throw console.warn("assertProperForIframe: bad node",e),Error("Cannot retrieve document object from given node");if(!t.defaultView)throw console.warn("assertProperForIframe: bad document",t),Error("Cannot retrieve window object from document")};function o(e,t,r){var n=t.ownerDocument;if(!n)throw Error("Cannot retrieve document object from given node");var a=n.createElement("iframe");return a.setAttribute("id","intent-".concat(e.id)),a.setAttribute("src",r),a.classList.add("coz-intent"),a}t.assertOKForIntentIframe=a},75813:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeQueryString=t.buildRedirectionURL=t.pickService=t.errorSerializer=void 0;var r,n=(r=function(e,t){return["name","message"].reduce(function(r,n){return e[n]&&(t[n]=e[n]),r},Object.assign(t,e))},{serialize:function(e){return r(e,{})},deserialize:function(e){return r(e,Error(e.message))}});t.errorSerializer=n,t.pickService=function(e,t){var r=e.attributes.services||[],n=t?r.find(t):r[0];if(!n)throw Error("Unable to find a service");return n},t.buildRedirectionURL=function(e,t){var r=Object.keys(t).filter(function(e){return!["object","function"].includes(typeof t[e])}).map(function(e){return"".concat(e,"=").concat(t[e])});return r.length?"".concat(e,"?").concat(r.join("&")):e},t.removeQueryString=function(e){return e.replace(/\?[^/#]*/,"")}},9420:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Intents",{enumerable:!0,get:function(){return a.default}});var a=n(r(3633))},3633:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(68434)),i=a(r(82007)),u=a(r(65105)),c=a(r(19723)),s=n(r(78043)),l=n(r(7295)),d=a(r(98395)),f=r(75813),p=function(){var e,t;function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.client;(0,u.default)(this,r),this.request=new d.default(t),this.create=this.create.bind(this)}return(0,c.default)(r,[{key:"create",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)throw Error('Misformed intent, "action" property must be provided');if(!t)throw Error('Misformed intent, "type" property must be provided');var o=this.request.post(e,t,n,a);return o.start=function(e,t){var a,i={filteredServices:n.filteredServices,onReadyCallback:t};delete n.filteredServices;var u=o.then(function(t){return a=s.start(r.create,t,e,n,i)});return u.stop=function(){a&&a.destroy()},u},o}},{key:"createService",value:function(e,t){return l.start(this.request)(e,t)}},{key:"getRedirectionURL",value:(e=(0,i.default)(o.default.mark(function e(t,r){var n,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t&&!r)){e.next=2;break}throw Error("Cannot retrieve redirection, at least type or doc must be provided");case 2:return e.next=4,this.create("REDIRECT",t,r);case 4:return n=e.sent,a=(0,f.pickService)(n),i=(0,f.removeQueryString)(a.href),e.abrupt("return",r?(0,f.buildRedirectionURL)(i,r):i);case 8:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})},{key:"redirect",value:(t=(0,i.default)(o.default.mark(function e(t,r,n){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window){e.next=2;break}throw Error("redirect() method can only be called in a browser");case 2:return e.next=4,this.getRedirectionURL(t,r);case 4:if(a=e.sent,!(n&&"function"==typeof n)){e.next=7;break}return e.abrupt("return",n(a));case 7:window.location.href=a;case 8:case"end":return e.stop()}},e,this)})),function(e,r,n){return t.apply(this,arguments)})}]),r}();t.default=p},93326:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(65105)),o=n(r(19723)),i=/intent-(.*):(.*)/,u=function(){function e(t){(0,a.default)(this,e),this.state={handshaken:!1},this.options=t,this.handleMessageWrapper=this.handleMessageWrapper.bind(this)}return(0,o.default)(e,[{key:"handleMessage",value:function(e){if(e.origin===this.options.origin){var t=e.data.type;if("load"===t){console.warn&&console.warn("Cozy Client ignored MessageEvent having data.type `load`.");return}var r=i.exec(t);if(!r){console.warn("intents: Message type ".concat(t," not matching intent format"));return}var n=r[1];c(n==this.options.intentId,"Invalid event id","eventId: ".concat(n," != listener eventId ").concat(this.options.intentId));var a=r[2];"ready"!==a?c(this.state.handshaken,"Unexpected handshake message from intent service"):this.state.handshaken=!0;var o=this.options["on"+s(a)];if(o)return o(e);console.warn("intents: Unhandled event ".concat(a))}}},{key:"handleMessageWrapper",value:function(e){try{this.handleMessage(e)}catch(e){this.options.onError(e)}}},{key:"listen",value:function(){window.addEventListener("message",this.handleMessageWrapper)}},{key:"stopListening",value:function(){window.removeEventListener("message",this.handleMessageWrapper)}}]),e}();t.default=u;var c=function(e,t,r){if(!e)throw r&&console.warn(r),Error(t)},s=function(e){return e[0].toUpperCase()+e.slice(1)}},98395:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(65105)),o=n(r(19723)),i=function(){function e(t){(0,a.default)(this,e),this.stackClient=t.stackClient}return(0,o.default)(e,[{key:"get",value:function(e){return this.stackClient.fetchJSON("GET","/intents/".concat(e)).then(function(e){var t=e.data;return t._id||(t._id=t.id),t})}},{key:"post",value:function(e,t,r,n){return this.stackClient.fetchJSON("POST","/intents",{data:{type:"io.cozy.intents",attributes:{action:e,type:t,data:r,permissions:n}}}).then(function(e){return e.data})}}]),e}();t.default=i},7295:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=void 0;var n=r(75813);function a(e){e&&e.style&&(e.style.height="100%")}t.start=function(e){return function(t,r){var o=r||"undefined"!=typeof window&&window;if(!o||!o.document)return Promise.reject(Error("Intent service should be used in browser"));o.addEventListener("load",function(){var e=o.document;[e.documentElement,e.body].forEach(a)});var i=t||o.location.search.split("=")[1];return i?e.get(i).then(function(e){var t=!1,r=function(r){if(t)throw Error("Intent service has already been terminated");o.parent.postMessage(r,e.attributes.client)},a=function(t,n,a){return new Promise(function(i){o.addEventListener("message",function t(r){if(r.origin===e.attributes.client)return o.removeEventListener("message",t),i(r.data)}),r({type:"intent-".concat(e._id,":compose"),action:t,doctype:n,data:a})})},i=function(e){r(e),t=!0},u=function(n,a){if(t)throw Error("Intent service has been terminated");r({type:"intent-".concat(e._id,":resize"),dimensions:n.element?Object.assign({},n,{maxHeight:n.element.clientHeight,maxWidth:n.element.clientWidth}):n,transition:a})},c=function(){i({type:"intent-".concat(e._id,":cancel")})};return o.addEventListener("unload",function(){t||c()}),new Promise(function(t){o.addEventListener("message",function r(n){n.origin===e.attributes.client&&(o.removeEventListener("message",r),t(n.data))}),o.parent.postMessage({type:"intent-".concat(e._id,":ready")},e.attributes.client)}).then(function(t){return{compose:a,getData:function(){return t},getIntent:function(){return e},terminate:function(r){var n=t&&t.exposeIntentFrameRemoval?"exposeFrameRemoval":"done";return i({type:"intent-".concat(e._id,":").concat(n),document:r})},throw:function(t){return i({type:"intent-".concat(e._id,":error"),error:n.errorSerializer.serialize(t)})},resizeClient:u,cancel:c}})}):Promise.reject(Error("Cannot retrieve intent from URL"))}}},46553:function(e){"use strict";var t=function(e){return Object.assign(this,e),this};t.prototype.toString=function(){throw Error("Cannot convert Secret to string")},e.exports=t},33918:function(e,t,r){"use strict";var n=r(34155);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=r(46553),i=r(87593),u=i.filterLevel,c=i.filterSecrets,s=n.env.LOG_LEVEL||"debug",l=r(36865),d=[u,c],f=function(){var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}}(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}(d);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!1===r.apply(null,arguments))return!0}}catch(e){t.e(e)}finally{t.f()}return!1};function p(e,t,r,n){!f(s,e,t,r,n)&&console.log(l(e,t,r,n))}p.addFilter=function(e){return d.push(e)},p.setLevel=function(e){s=e},["debug","info","warn","error","ok","critical"].forEach(function(e){p[e]=function(t,r,n){return p(e,t,r,n)}}),e.exports=p,p.setNoRetry=function(e){return e?e.no_retry=!0:e={no_retry:!0},e.no_retry},p.Secret=o,p.namespace=function(e){return function(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;p(t,r,n,a)}}},87593:function(e,t,r){"use strict";var n={secret:0,debug:10,info:20,warn:30,error:40,ok:50,critical:50},a=r(46553);e.exports={filterSecrets:function(e,t,r){if("secret"!==t&&r instanceof a)throw Error("You should log a secret with log.secret")},filterLevel:function(e,t){return n[t]>=n[e]}}},36865:function(e,t,r){"use strict";r(62481);var n=r(62481);e.exports=n},62481:function(e,t,r){"use strict";var n=r(64530);e.exports=function(e,t,r,a){var o={time:new Date,type:e,label:r,namespace:a};"object"==typeof t?(t&&t.no_retry&&(o.no_retry=t.no_retry),t&&t.message&&(o.message=t.message)):o.message=t,o.message&&o.message.stack&&(o.message=o.message.stack);var i=o;try{i=n(o).substr(0,65535)}catch(e){console.log(e.message,"cozy-logger: Failed to convert message to JSON")}return i}},7756:function(e,t,r){"use strict";var n=r(26465),a={debug:1,info:2,warn:3,error:4};function o(){this.enabled=!0,this.defaultResult=!0,this.clear()}function i(e,t){return e.n.test?e.n.test(t):e.n==t}n.mixin(o),o.prototype.allow=function(e,t){return this._white.push({n:e,l:a[t]}),this},o.prototype.deny=function(e,t){return this._black.push({n:e,l:a[t]}),this},o.prototype.clear=function(){return this._white=[],this._black=[],this},o.prototype.test=function(e,t){var r,n=Math.max(this._white.length,this._black.length);for(r=0;r<n;r++){if(this._white[r]&&i(this._white[r],e)&&a[t]>=this._white[r].l)return!0;if(this._black[r]&&i(this._black[r],e)&&a[t]<=this._black[r].l)return!1}return this.defaultResult},o.prototype.write=function(e,t,r){if(!this.enabled||this.test(e,t))return this.emit("item",e,t,r)},e.exports=o},94731:function(e,t,r){"use strict";var n=r(26465),a=r(7756),o=new n,i=Array.prototype.slice;(t=e.exports=function(e){var r=function(){return o.write(e,void 0,i.call(arguments)),r};return r.debug=function(){return o.write(e,"debug",i.call(arguments)),r},r.info=function(){return o.write(e,"info",i.call(arguments)),r},r.warn=function(){return o.write(e,"warn",i.call(arguments)),r},r.error=function(){return o.write(e,"error",i.call(arguments)),r},r.group=function(){return o.write(e,"group",i.call(arguments)),r},r.groupEnd=function(){return o.write(e,"groupEnd",i.call(arguments)),r},r.log=r.debug,r.suggest=t.suggest,r.format=o.format,r}).defaultBackend=t.defaultFormatter=null,t.pipe=function(e){return o.pipe(e)},t.end=t.unpipe=t.disable=function(e){return o.unpipe(e)},t.Transform=n,t.Filter=a,t.suggest=new a,t.enable=function(){return t.defaultFormatter?o.pipe(t.suggest).pipe(t.defaultFormatter).pipe(t.defaultBackend):o.pipe(t.suggest).pipe(t.defaultBackend)}},26465:function(e,t,r){"use strict";function n(){}r(37203).mixin(n),n.prototype.write=function(e,t,r){this.emit("item",e,t,r)},n.prototype.end=function(){this.emit("end"),this.removeAllListeners()},n.prototype.pipe=function(e){var t=this;function r(){e.write.apply(e,Array.prototype.slice.call(arguments))}function n(){e._isStdio||e.end()}return t.emit("unpipe",e),e.emit("pipe",t),t.on("item",r),t.on("end",n),t.when("unpipe",function(a){var o=a===e||void 0===a;return o&&(t.removeListener("item",r),t.removeListener("end",n),e.emit("unpipe")),o}),e},n.prototype.unpipe=function(e){return this.emit("unpipe",e),this},n.prototype.format=function(){throw Error("Warning: .format() is deprecated in Minilog v2! Use .pipe() instead. For example:\nvar Minilog = require('minilog');\nMinilog\n  .pipe(Minilog.backends.console.formatClean)\n  .pipe(Minilog.backends.console);")},n.mixin=function(e){var t,r=n.prototype;for(t in r)r.hasOwnProperty(t)&&(e.prototype[t]=r[t])},e.exports=n},93601:function(e,t,r){"use strict";var n=r(26465),a=[],o=new n;o.write=function(e,t,r){a.push([e,t,r])},o.get=function(){return a},o.empty=function(){a=[]},e.exports=o},90115:function(e,t,r){"use strict";var n=r(26465),a=/\n+$/,o=new n;o.write=function(e,t,r){var n=r.length-1;if("undefined"!=typeof console&&console.log){if(console.log.apply)return console.log.apply(console,[e,t].concat(r));if(JSON&&JSON.stringify){r[n]&&"string"==typeof r[n]&&(r[n]=r[n].replace(a,""));try{for(n=0;n<r.length;n++)r[n]=JSON.stringify(r[n])}catch(e){}console.log(r.join(" "))}}},o.formatters=["color","minilog"],o.color=r(82035),o.minilog=r(26687),e.exports=o},82035:function(e,t,r){"use strict";var n=r(26465),a=r(20477),o={debug:["cyan"],info:["purple"],warn:["yellow",!0],error:["red",!0]},i=new n;i.write=function(e,t,r){var n=console.log;console[t]&&console[t].apply&&(0,console[t]).apply(console,["%c"+e+" %c"+t,a("gray"),a.apply(a,o[t])].concat(r))},i.pipe=function(){},e.exports=i},26687:function(e,t,r){"use strict";var n=r(26465),a=r(20477),o={debug:["gray"],info:["purple"],warn:["yellow",!0],error:["red",!0]},i=new n;i.write=function(e,t,r){var n=console.log;"debug"!=t&&console[t]&&(n=console[t]);var i=0;if("info"!=t){for(;i<r.length&&"string"==typeof r[i];i++);n.apply(console,["%c"+e+" "+r.slice(0,i).join(" "),a.apply(a,o[t])].concat(r.slice(i)))}else n.apply(console,["%c"+e,a.apply(a,o[t])].concat(r))},i.pipe=function(){},e.exports=i},20477:function(e){"use strict";var t={black:"#000",red:"#c23621",green:"#25bc26",yellow:"#bbbb00",blue:"#492ee1",magenta:"#d338d3",cyan:"#33bbc8",gray:"#808080",purple:"#708"};e.exports=function(e,r){return r?"color: #fff; background: "+t[e]+";":"color: "+t[e]+";"}},74450:function(e,t,r){"use strict";var n=r(94731),a=n.enable,o=n.disable,i="undefined"!=typeof navigator&&/chrome/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&"ReactNative"===navigator.product,c=r(90115);if(n.defaultBackend=i||u?c.minilog:c,"undefined"!=typeof window){try{n.enable(JSON.parse(window.localStorage.minilogSettings))}catch(e){}if(window.location&&window.location.search){var s=RegExp("[?&]minilog=([^&]*)").exec(window.location.search);s&&n.enable(decodeURIComponent(s[1]))}}n.enable=function(){a.call(n,!0);try{window.localStorage.minilogSettings=JSON.stringify(!0)}catch(e){}return this},n.disable=function(){o.call(n);try{delete window.localStorage.minilogSettings}catch(e){}return this},(e.exports=n).backends={array:r(93601),browser:n.defaultBackend,localStorage:r(19377),jQuery:r(85791)}},85791:function(e,t,r){"use strict";var n=r(26465),a=new Date().valueOf().toString(36);function o(e){this.url=e.url||"",this.cache=[],this.timer=null,this.interval=e.interval||3e4,this.enabled=!0,this.jQuery=window.jQuery,this.extras={}}n.mixin(o),o.prototype.write=function(e,t,r){this.timer||this.init(),this.cache.push([e,t].concat(r))},o.prototype.init=function(){if(this.enabled&&this.jQuery){var e=this;this.timer=setTimeout(function(){var t,r,n=[],o=e.url;if(0==e.cache.length)return e.init();for(t=0;t<e.cache.length;t++)try{JSON.stringify(e.cache[t]),n.push(e.cache[t])}catch(e){}e.jQuery.isEmptyObject(e.extras)?(r=JSON.stringify({logs:n}),o=e.url+"?client_id="+a):r=JSON.stringify(e.jQuery.extend({logs:n},e.extras)),e.jQuery.ajax(o,{type:"POST",cache:!1,processData:!1,data:r,contentType:"application/json",timeout:1e4}).success(function(t){t.interval&&(e.interval=Math.max(1e3,t.interval))}).error(function(){e.interval=3e4}).always(function(){e.init()}),e.cache=[]},this.interval)}},o.prototype.end=function(){},o.jQueryWait=function(e){if("undefined"!=typeof window&&(window.jQuery||window.$))return e(window.jQuery||window.$);"undefined"!=typeof window&&setTimeout(function(){o.jQueryWait(e)},200)},e.exports=o},19377:function(e,t,r){"use strict";var n=r(26465),a=!1,o=new n;o.write=function(e,t,r){if("undefined"!=typeof window&&"undefined"!=typeof JSON&&JSON.stringify&&JSON.parse)try{a||(a=window.localStorage.minilog?JSON.parse(window.localStorage.minilog):[]),a.push([new Date().toString(),e,t,r]),window.localStorage.minilog=JSON.stringify(a)}catch(e){}},e.exports=o},88928:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(65105)),o=n(r(19723)),i=function(){function e(t){(0,a.default)(this,e);var r=t;"string"==typeof r&&(r=JSON.parse(r)),this.tokenType=r.token_type||r.tokenType,this.accessToken=r.access_token||r.accessToken,this.refreshToken=r.refresh_token||r.refreshToken,this.scope=r.scope}return(0,o.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.accessToken}},{key:"toBasicAuth",value:function(){return"user:".concat(this.accessToken,"@")}},{key:"toJSON",value:function(){return{tokenType:this.tokenType,accessToken:this.accessToken,refreshToken:this.refreshToken,scope:this.scope}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"getAccessToken",value:function(){return this.accessToken}}]),e}();t.default=i},14324:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeApp=t.APPS_DOCTYPE=void 0;var a=n(r(68434)),o=n(r(82007)),i=n(r(65105)),u=n(r(19723)),c=n(r(25665)),s=n(r(27952)),l=n(r(12323)),d=n(r(64512)),f=n(r(27361)),p=r(10513),h=n(r(78140)),y=n(r(67267)),v=r(26070);r(45051);var m=n(r(79271));function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,d.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O="io.cozy.apps";t.APPS_DOCTYPE=O;var k=function(e,t){return w(w({},(0,v.normalizeDoctypeJsonApi)(t)(e)),{},{id:e.id})};t.normalizeApp=k;var _=function(e){(0,c.default)(w,e);var t,r,n,d,y,v,b=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(w);return e=t?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function w(e){var t;return(0,i.default)(this,w),(t=b.call(this,O,e)).endpoint="/apps/",t}return(0,u.default)(w,[{key:"get",value:(r=(0,o.default)(a.default.mark(function e(t,r){var n,o,i,u,c,s,l,d,y=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.indexOf("/")>-1?n=t.split("/")[1]:(m.default.warn("Deprecated: in next versions of cozy-client, it will not be possible to query apps/konnectors only with id, please use the form ".concat(this.doctype,"/").concat(t,"\n\n- Q('io.cozy.apps').getById('banks')\n+ Q('io.cozy.apps').getById('io.cozy.apps/banks')")),n=t),!(r&&r.sources&&(!Array.isArray(r.sources)||0===r.sources.length))){e.next=3;break}throw Error('Invalid "sources" attribute passed in query, please use an array with at least one element.');case 3:o=(0,f.default)(r,"sources",["stack"]),i={stack:function(){return h.default.get(y.stackClient,"".concat(y.endpoint).concat(encodeURIComponent(n)),{normalize:function(e){return k(e,y.doctype)}})},registry:function(){return y.stackClient.fetchJSON("GET",p.registryEndpoint+n)}},u=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return g(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(o),e.prev=6,u.s();case 8:if((c=u.n()).done){e.next=27;break}return s=c.value,e.prev=10,e.next=13,i[s]();case 13:if(l=e.sent,"registry"===s){e.next=16;break}return e.abrupt("return",l);case 16:return m.default.warn("The use of source registry is deprecated since it can polute the io.cozy.apps slice. For exemple, if we request data from the registry, than the app will be present in the io.cozy.apps slice and then the isInstalled() will return true.\n\n            Use Q('io.cozy.apps_registry) instead"),d=(0,p.transformRegistryFormatToStackFormat)(l),e.abrupt("return",{data:k(d,this.doctype)});case 21:if(e.prev=21,e.t0=e.catch(10),s!==o[o.length-1]){e.next=25;break}throw e.t0;case 25:e.next=8;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(6),u.e(e.t1);case 32:return e.prev=32,u.f(),e.finish(32);case 35:case"end":return e.stop()}},e,this,[[6,29,32,35],[10,21]])})),function(e,t){return r.apply(this,arguments)})},{key:"all",value:(n=(0,o.default)(a.default.mark(function e(){var t,r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",this.endpoint);case 2:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return k(e,r.doctype)}),meta:{count:t.meta.count},skip:0,next:!1});case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"create",value:(d=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return d.apply(this,arguments)})},{key:"update",value:(y=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("update() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return y.apply(this,arguments)})},{key:"destroy",value:(v=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return v.apply(this,arguments)})}]),w}(y.default);_.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=_},20576:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(65105)),o=n(r(19723)),i=function(){function e(t){(0,a.default)(this,e),this.token=t||""}return(0,o.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.token}},{key:"toBasicAuth",value:function(){return"user:".concat(this.token,"@")}},{key:"getAccessToken",value:function(){return this.token}}]),e}();t.default=i},69736:function(e,t,r){"use strict";var n,a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeAppFromRegistry=t.APPS_REGISTRY_DOCTYPE=void 0;var o=a(r(65105)),i=a(r(19723)),u=a(r(25665)),c=a(r(27952)),s=a(r(12323)),l=a(r(68434)),d=a(r(82007)),f=a(r(64512)),p=a(r(67267)),h=r(26070);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,f.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m="io.cozy.apps_registry";t.APPS_REGISTRY_DOCTYPE=m;var g=function(e,t){var r,n="".concat("webapp"===e.type?"io.cozy.apps":"io.cozy.konnectors","/").concat(e.slug),a=v(v({},e.attributes),null===(r=e.latest_version)||void 0===r?void 0:r.manifest);return v({},(0,h.normalizeDoc)(v(v({},e),{},{attributes:a,id:n,_id:n}),t))};t.normalizeAppFromRegistry=g;var b=(n=(0,d.default)(l.default.mark(function e(t,r,n){var a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.fetchJSON("GET","/registry?versionsChannel=".concat(t,"&filter[type]=konnector&limit=500"));case 2:return a=e.sent,e.abrupt("return",{data:a.data.map(function(e){return g(e,r)})});case 4:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)}),w=function(e){(0,u.default)(p,e);var t,r,n,a,f=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(p);return e=t?Reflect.construct(r,arguments,(0,s.default)(this).constructor):r.apply(this,arguments),(0,c.default)(this,e)});function p(e){var t;return(0,o.default)(this,p),(t=f.call(this,m,e)).endpoint="/registry/",t}return(0,i.default)(p,[{key:"get",value:(r=(0,d.default)(l.default.mark(function e(t){var r,n,a=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.startsWith("konnectors/")){e.next=3;break}return r=t.split("/")[1],e.abrupt("return",b(r,this.doctype,this.stackClient));case 3:return e.next=5,this.stackClient.fetchJSON("GET","".concat(this.endpoint).concat(t));case 5:if(n=e.sent,"maintenance"!==t){e.next=8;break}return e.abrupt("return",{data:n.map(function(e){return g(e,a.doctype)})});case 8:return e.abrupt("return",{data:g(n,this.doctype)});case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"create",value:(n=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for AppsRegistryCollection");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"destroy",value:(a=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for AppsRegistryCollection");case 1:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})}]),p}(p.default);t.default=w},78140:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Collection=t.isDocumentUpdateConflict=t.isTimeoutError=t.isNoUsableIndexError=t.isIndexNotUsedWarning=t.isIndexConflictError=t.isIndexNotFoundError=t.dontThrowNotFoundError=void 0;var a=n(r(68434)),o=n(r(82007)),i=n(r(65105)),u=n(r(19723));r(79312);var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.message.match(/not_found/))return Array.isArray(t)?{data:t,meta:{count:0},skip:0,next:!1}:{data:t};throw e};t.dontThrowNotFoundError=c,t.isIndexNotFoundError=function(e){return e.message.match(/no_index/)},t.isIndexConflictError=function(e){return e.message.match(/error_saving_ddoc/)},t.isIndexNotUsedWarning=function(e){return e.match(/was not used because it does not contain a valid index for this query/)},t.isNoUsableIndexError=function(e){return e.message.match(/no_usable_index/)},t.isTimeoutError=function(e){return e.message.match(/context deadline exceeded/)},t.isDocumentUpdateConflict=function(e){return e.message.match(/Document update conflict/)};var s=function(){var e;function t(){(0,i.default)(this,t)}return(0,u.default)(t,null,[{key:"get",value:(e=(0,o.default)(a.default.mark(function e(t,r,n){var o,i,u,s,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(o=n.normalize)?function(e,t){return e}:o,s=void 0===(u=n.method)?"GET":u,e.prev=1,e.next=4,t.fetchJSON(s,r);case 4:return l=e.sent,e.abrupt("return",{data:i(l.data,l)});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",c(e.t0,null));case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(t,r,n){return e.apply(this,arguments)})}]),t}();t.Collection=s,t.default=s},25454:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CONTACTS_DOCTYPE=void 0;var a=n(r(68434)),o=n(r(82007)),i=n(r(65105)),u=n(r(19723)),c=n(r(59655)),s=n(r(25665)),l=n(r(27952)),d=n(r(12323)),f=n(r(64512)),p=n(r(67267)),h=r(26070);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,f.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}r(41315);var m="io.cozy.contacts";t.CONTACTS_DOCTYPE=m;var g=(0,h.normalizeDoctypeJsonApi)(m),b=function(e){var t;return v(v({},g(e)),{},{_rev:null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.rev})},w=function(e){(0,s.default)(h,e);var t,r,n,f,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(h);return e=t?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function h(){return(0,i.default)(this,h),p.apply(this,arguments)}return(0,u.default)(h,[{key:"find",value:(r=(0,o.default)(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||1!==Object.values(t).length||!0!=t.me){e.next=4;break}return e.abrupt("return",this.findMyself());case 4:return e.abrupt("return",(0,c.default)((0,d.default)(h.prototype),"find",this).call(this,t,r));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"findMyself",value:(n=(0,o.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/contacts/myself");case 2:return t={data:[b(e.sent.data)],next:!1,meta:null,bookmark:!1},e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"destroy",value:(f=(0,o.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys((null==t?void 0:null===(r=t.cozyMetadata)||void 0===r?void 0:r.sync)||{}).length>0)){e.next=6;break}return e.abrupt("return",(0,c.default)((0,d.default)(h.prototype),"update",this).call(this,v(v({},t),{},{trashed:!0})));case 6:return e.abrupt("return",(0,c.default)((0,d.default)(h.prototype),"destroy",this).call(this,t));case 7:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})}]),h}(p.default);t.default=w},29328:function(e,t,r){"use strict";var n,a=r(14746),o=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(r(80295)),u=o(r(64512)),c=o(r(65105)),s=o(r(19723)),l=o(r(68434)),d=o(r(82007)),f=o(r(50361)),p=a(r(14324)),h=o(r(20576));o(r(88928));var y=o(r(67267)),v=o(r(49129)),m=a(r(54056)),g=a(r(76812)),b=o(r(67207)),w=o(r(96302)),O=a(r(54026)),k=a(r(96727)),_=a(r(45082)),x=a(r(54348)),S=a(r(86247)),E=a(r(25454)),P=a(r(69736)),C=o(r(79954)),A=o(r(66605)),j=r(38558),T=o(r(37203)),M=a(r(45051)),D=o(r(79271)),R=o(r(20368)),I=r(68512);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,u.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var L=function(e){var t=e;if(null===t)return null;for(;"/"===t[t.length-1];)t=t.slice(0,-1);return t},z=(n=(0,d.default)(l.default.mark(function e(t){var r,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=t.headers.get("content-type"))&&/\bapplication\/(vnd\.api\+)?json\b/.test(r),e.abrupt("return",n?t.json():t.text());case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),B=function(){var e,t,r,n;function a(e){(0,c.default)(this,a);var t=F({},e),r=t.token,n=t.uri;this.options=t,this.setUri(void 0===n?"":n),this.setToken(r),this.konnectors=new g.default(this),this.jobs=new m.default(this),this._promiseCache=new R.default}return(0,s.default)(a,[{key:"isRevocationError",value:function(e){return null!=e&&!!e.message&&(!!(M.default.CLIENT_NOT_FOUND.test(e.message)||M.default.UNREGISTERED_CLIENT.test(e.message))||void 0)}},{key:"collection",value:function(e){if(!e)throw Error("CozyStackClient.collection() called without a doctype");switch(e){case p.APPS_DOCTYPE:return new p.default(this);case g.KONNECTORS_DOCTYPE:return new g.default(this);case"io.cozy.files":return new v.default(e,this);case"io.cozy.sharings":return new b.default(e,this);case"io.cozy.permissions":return new w.default(e,this);case E.CONTACTS_DOCTYPE:return new E.default(e,this);case O.TRIGGERS_DOCTYPE:return new O.default(this);case m.JOBS_DOCTYPE:return new m.default(this);case k.SETTINGS_DOCTYPE:return new k.default(this);case _.NOTES_DOCTYPE:return new _.default(this);case x.OAUTH_CLIENTS_DOCTYPE:return new x.default(this);case S.SHORTCUTS_DOCTYPE:return new S.default(this);case P.APPS_REGISTRY_DOCTYPE:return new P.default(this);case I.NEXTCLOUD_FILES_DOCTYPE:return new I.NextcloudFilesCollection(this);default:return new y.default(e,this)}}},{key:"fetch",value:function(e){function t(t,r,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=(0,d.default)(l.default.mark(function e(t,r,n){var a,o,u,c,s,d,f,p,h,y,v,m=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=void 0===(u=(o=F({},a=m.length>3&&void 0!==m[3]?m[3]:{})).throwFetchErrors)?this.options.throwFetchErrors:u,(s=(0,i.default)(o,["throwFetchErrors"])).method=t,d=s.headers=F({},a.headers),"GET"!==t&&"HEAD"!==t&&void 0!==n&&d["Content-Type"]&&(s.body=n),d.Authorization||(d.Authorization=this.getAuthorizationHeader()),s.credentials=s.credentials||"include",f=this.fullpath(r),p=(0,j.shouldXMLHTTPRequestBeUsed)(t,r,s)?j.fetchWithXMLHttpRequest:fetch,e.prev=9,e.next=12,p(f,s);case 12:if((h=e.sent).ok){e.next=21;break}return e.next=16,z(h);case 16:if(y=e.sent,v=new M.FetchError(h,y),this.emit("error",v),!c){e.next=21;break}throw v;case 21:return e.abrupt("return",h);case 24:throw e.prev=24,e.t0=e.catch(9),this.isRevocationError(e.t0)&&this.onRevocationChange(!0),e.t0;case 28:case"end":return e.stop()}},e,this,[[9,24]])})),function(t,r,n){return e.apply(this,arguments)}))},{key:"onTokenRefresh",value:function(e){this.options&&this.options.onTokenRefresh&&this.options.onTokenRefresh(e)}},{key:"onRevocationChange",value:function(e){this.options&&this.options.onRevocationChange&&this.options.onRevocationChange(e)}},{key:"refreshToken",value:(t=(0,d.default)(l.default.mark(function e(){var t,r,n,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}throw Error("Cannot refresh an empty token");case 2:return t={method:"GET",credentials:"include"},e.next=5,fetch("/?refreshToken",t);case 5:if((r=e.sent).ok){e.next=8;break}throw Error("Couldn't fetch a new token - response "+r.statusCode);case 8:return e.next=10,r.text();case 10:if(!(!(n=e.sent.match(/data-cozy="([^"]+)"/))||n.length<2)){e.next=14;break}throw Error("Couldn't fetch a new token - no data-cozy element found in HTML");case 14:if(a=JSON.parse(n[1].replace(/&#34;/g,'"')).token){e.next=19;break}throw Error("Couldn't fetch a new token - missing in data-cozy attribute");case 19:return o=new h.default(a),this.setToken(o),this.onTokenRefresh(o),D.default.info("Token successfully refreshed"),e.abrupt("return",o);case 24:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"fetchJSON",value:(r=(0,d.default)(l.default.mark(function e(t,r,n){var a,o=this,i=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>3&&void 0!==i[3]?i[3]:{},e.prev=1,e.next=4,this.fetchJSONWithCurrentToken(t,r,n,a);case 4:case 20:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!(M.default.EXPIRED_TOKEN.test(e.t0.message)||M.default.INVALID_TOKEN.test(e.t0.message)||M.default.INVALID_TOKEN_ALT.test(e.t0.message))){e.next=23;break}return e.prev=10,e.next=13,this._promiseCache.exec(function(){return o.refreshToken()},function(){return"refreshToken"});case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(10),e.t0;case 18:return e.next=20,this.fetchJSONWithCurrentToken(t,r,n,a);case 23:throw e.t0;case 24:case"end":return e.stop()}},e,this,[[1,7],[10,15]])})),function(e,t,n){return r.apply(this,arguments)})},{key:"fetchJSONWithCurrentToken",value:(n=(0,d.default)(l.default.mark(function e(t,r,n){var a,o,i,u,c,s=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>3&&void 0!==s[3]?s[3]:{},(i=(o=(0,f.default)(a)).headers=o.headers||{}).Accept="application/json",u=n,"GET"===t||"HEAD"===t||void 0===u||i["Content-Type"]||(i["Content-Type"]="application/json",u=JSON.stringify(u)),o.throwFetchErrors=!0,e.next=9,this.fetch(t,r,u,o);case 9:return c=e.sent,e.abrupt("return",z(c));case 11:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"fullpath",value:function(e){return e.startsWith("http")?e:this.uri+e}},{key:"getAuthorizationHeader",value:function(){return this.token?this.token.toAuthHeader():null}},{key:"setCredentials",value:function(e){return(0,A.default)("CozyStackClient::setCredentials is deprecated, use CozyStackClient::setToken"),this.setToken(e)}},{key:"getCredentials",value:function(){return(0,A.default)("CozyStackClient::getCredentials is deprecated, use CozyStackClient::getAuthorizationHeader"),this.getAuthorizationHeader()}},{key:"setToken",value:function(e){if(e){if(e.toAuthHeader)this.token=e;else if("string"==typeof e)this.token=new h.default(e);else throw D.default.warn("Cozy-Client: Unknown token format",e),Error("Cozy-Client: Unknown token format");this.onRevocationChange(!1)}else this.token=null}},{key:"getAccessToken",value:function(){return this.token&&this.token.getAccessToken()}},{key:"setUri",value:function(e){this.uri=L(e)}},{key:"getIconURL",value:function(e){return(0,C.default)(this,e)}}]),a}();T.default.mixin(B),t.default=B},67267:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(80295)),i=a(r(98235)),u=a(r(64512)),c=a(r(68434)),s=a(r(41)),l=a(r(82007)),d=a(r(65105)),f=a(r(19723)),p=a(r(71400)),h=r(66804),y=a(r(44908)),v=a(r(57557)),m=a(r(91175)),g=a(r(82492)),b=a(r(10240)),w=a(r(80129)),O=r(35946),k=r(26070),_=n(r(78140)),x=n(r(93726));r(45051);var S=a(r(79271));function E(){var e=(0,s.default)(["/data/","/_design/","/copy?rev=",""]);return E=function(){return e},e}function P(){var e=(0,s.default)(["/data/","/_design/","?rev=",""]);return P=function(){return e},e}function C(){var e=(0,s.default)(["/data/","/_design_docs?include_docs=true"]);return C=function(){return e},e}function A(){var e=(0,s.default)(["/data/","/_index"]);return A=function(){return e},e}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T(){var e=(0,s.default)(["/data/","/","?rev=",""]);return T=function(){return e},e}function M(){var e=(0,s.default)(["/data/","/",""]);return M=function(){return e},e}function D(){var e=(0,s.default)(["/data/","/",""]);return D=function(){return e},e}function R(){var e=(0,s.default)(["/data/","/_all_docs?include_docs=true"]);return R=function(){return e},e}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){(0,u.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(){var e=(0,s.default)(["/data/","/_find"]);return F=function(){return e},e}function L(){var e=(0,s.default)(["/data/","/",""]);return L=function(){return e},e}var z=function(e){return Object.assign({},(0,v.default)(e,"_type"),{_deleted:!0})},B=function(){var e,t,r,n,a,s,I,B,U,H,G,Z,W,q,V,Q,J,Y,K,$,X,ee;function et(e,t){(0,d.default)(this,et),this.doctype=e,this.stackClient=t,this.indexes={},this.endpoint="/data/".concat(this.doctype,"/")}return(0,f.default)(et,[{key:"all",value:(e=(0,l.default)(c.default.mark(function e(){var t,r,n,a,o,i,u,s,l,d,f,p,y,v,m,g=this,w=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===(r=(t=w.length>0&&void 0!==w[0]?w[0]:{}).limit)?100:r,o=void 0===(a=t.skip)?0:a,i=t.bookmark,l=(s=!!(u=t.keys)||null===n)?"_all_docs":"_normal_docs",d=(0,h.uri)(L(),this.doctype,l),f={include_docs:!0,limit:n,skip:o,keys:u,bookmark:i},p=x.buildURL(d,f),e.prev=6,e.next=9,this.stackClient.fetchJSON("GET",p);case 9:y=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",(0,_.dontThrowNotFoundError)(e.t0));case 15:return v=s?y.rows.filter(function(e){return e&&null!==e.doc&&!e.error&&!(0,b.default)(e.id,"_design")}).map(function(e){return(0,k.normalizeDoc)(e.doc,g.doctype)}):y.rows.map(function(e){return(0,k.normalizeDoc)(e,g.doctype)}),m=i?y.rows.length>=n:o+y.rows.length<y.total_rows,e.abrupt("return",{data:v,meta:{count:s?v.length:y.total_rows},skip:o,bookmark:y.bookmark,next:m});case 18:case"end":return e.stop()}},e,this,[[6,12]])})),function(){return e.apply(this,arguments)})},{key:"fetchDocumentsWithMango",value:(t=(0,l.default)(c.default.mark(function e(t,r){var n,a=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",this.stackClient.fetchJSON("POST",t,this.toMangoOptions(r,n)));case 2:case"end":return e.stop()}},e,this)})),function(e,r){return t.apply(this,arguments)})},{key:"migrateIndex",value:(r=(0,l.default)(c.default.mark(function e(t,r){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.copyIndex(t,r);case 3:return e.next=5,this.destroyIndex(t);case 5:e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(0),(0,_.isDocumentUpdateConflict)(e.t0)){e.next=11;break}throw e.t0;case 11:return(0,h.sleep)(1e3),e.next=14,this.copyIndex(t,r);case 14:return e.next=16,this.destroyIndex(t);case 16:case"end":return e.stop()}},e,this,[[0,7]])})),function(e,t){return r.apply(this,arguments)})},{key:"handleMissingIndex",value:(n=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.indexedFields,a=r.partialFilter,n||(n=(0,O.getIndexFields)({sort:r.sort,selector:t})),o=(0,O.getIndexNameFromFields)(n,a),e.next=5,this.findExistingIndex(t,r);case 5:if(i=e.sent){e.next=11;break}return e.next=9,this.createIndex(n,{partialFilter:a,indexName:o});case 9:case 14:e.next=17;break;case 11:if(i._id==="_design/".concat(o)){e.next=16;break}return e.next=14,this.migrateIndex(i,o);case 16:throw Error("Index unusable for query, index used: ".concat(o));case 17:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"findWithMango",value:(a=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i,u=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:{},e.prev=1,e.next=4,this.fetchDocumentsWithMango(t,r,n);case 4:if(!((i=(a=e.sent).warning||(null===(o=a.meta)||void 0===o?void 0:o.warning))&&n.partialFilter&&(0,_.isIndexNotUsedWarning)(i))){e.next=8;break}throw Error("no_index");case 8:e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(1),!((0,_.isIndexNotFoundError)(e.t0)||(0,_.isNoUsableIndexError)(e.t0)||(0,_.isTimeoutError)(e.t0))){e.next=20;break}return e.next=15,this.handleMissingIndex(r,n);case 15:return e.next=17,this.fetchDocumentsWithMango(t,r,n);case 17:a=e.sent,e.next=21;break;case 20:throw e.t0;case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}},e,this,[[1,10]])})),function(e,t){return a.apply(this,arguments)})},{key:"find",value:(s=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,u=this,s=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(n=(r=s.length>1&&void 0!==s[1]?s[1]:{}).skip)?0:n,e.prev=2,i=(0,h.uri)(F(),this.doctype),e.next=6,this.findWithMango(i,t,r);case 6:o=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,_.dontThrowNotFoundError)(e.t0));case 12:return e.abrupt("return",{data:o.docs.map(function(e){return(0,k.normalizeDoc)(e,u.doctype)}),next:o.next,skip:a,bookmark:o.bookmark,execution_stats:o.execution_stats});case 13:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return s.apply(this,arguments)})},{key:"findAll",value:(I=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,u,s=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=s.length>1&&void 0!==s[1]?s[1]:{},n=!0,a=[],o=r.bookmark||void 0;case 4:if(!n){e.next=13;break}return e.next=7,this.find(t,N(N({},r),{},{bookmark:o}));case 7:u=e.sent,a.push.apply(a,(0,i.default)(u.data)),o=u.bookmark,n=u.next,e.next=4;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e,this)})),function(e){return I.apply(this,arguments)})},{key:"get",value:(B=(0,l.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.default.get(this.stackClient,"".concat(this.endpoint).concat(encodeURIComponent(t)),{normalize:this.constructor.normalizeDoctype(this.doctype)}));case 1:case"end":return e.stop()}},e,this)})),function(e){return B.apply(this,arguments)})},{key:"getAll",value:(U=(0,l.default)(c.default.mark(function e(t){var r,n,a=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("POST",(0,h.uri)(R(),this.doctype),{keys:t});case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(0,_.dontThrowNotFoundError)(e.t0));case 9:return n=r.rows.filter(function(e){return e.doc}),e.abrupt("return",{data:n.map(function(e){return(0,k.normalizeDoc)(e.doc,a.doctype)}),meta:{count:n.length}});case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return U.apply(this,arguments)})},{key:"create",value:(H=(0,l.default)(c.default.mark(function e(t){var r,n,a,i,u,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,t._type,n=(0,o.default)(t,["_id","_type"]),i=(a=!!r)?"PUT":"POST",u=(0,h.uri)(D(),this.doctype,a?r:""),e.next=6,this.stackClient.fetchJSON(i,u,n);case 6:return s=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(s.data,this.doctype)});case 8:case"end":return e.stop()}},e,this)})),function(e){return H.apply(this,arguments)})},{key:"update",value:(G=(0,l.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PUT",(0,h.uri)(M(),this.doctype,t._id),t);case 2:return r=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(r.data,this.doctype)});case 4:case"end":return e.stop()}},e,this)})),function(e){return G.apply(this,arguments)})},{key:"destroy",value:(Z=(0,l.default)(c.default.mark(function e(t){var r,n,a,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,n=t._rev,a=(0,o.default)(t,["_id","_rev"]),e.next=3,this.stackClient.fetchJSON("DELETE",(0,h.uri)(T(),this.doctype,r,n));case 3:return i=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(N(N({},a),{},{_id:r,_rev:i.rev,_deleted:!0}),this.doctype)});case 5:case"end":return e.stop()}},e,this)})),function(e){return Z.apply(this,arguments)})},{key:"updateAll",value:(W=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.stackClient,!(!(n=t?t.map(function(e){return(0,v.default)(e,"_type")}):t)||!n.length)){e.next=4;break}return e.abrupt("return",Promise.resolve([]));case 4:return e.prev=4,e.next=7,r.fetchJSON("POST","/data/".concat(this.doctype,"/_bulk_docs"),{docs:n});case 7:return a=e.sent,e.abrupt("return",a);case 11:if(e.prev=11,e.t0=e.catch(4),!(e.t0.reason&&e.t0.reason.reason&&"Database does not exist."===e.t0.reason.reason)){e.next=24;break}return e.next=16,this.create(n[0]);case 16:return o=e.sent,e.next=19,this.updateAll(n.slice(1));case 19:return(i=e.sent).unshift({ok:!0,id:o._id,rev:o._rev}),e.abrupt("return",i);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,this,[[4,11]])})),function(e){return W.apply(this,arguments)})},{key:"destroyAll",value:function(e){return this.updateAll(e.map(z))}},{key:"toMangoOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sort,n=t.indexedFields,a=t.partialFilter,o=t.fields,c=t.skip,s=t.limit,l=t.bookmark;r=(0,O.transformSort)(r),!n&&e&&S.default.warn("Selector fields should be manually indexed to prevent unexpected behaviour"),n=n||(0,O.getIndexFields)({sort:r,selector:e});var d=t.indexId||"_design/".concat((0,O.getIndexNameFromFields)(n,a));if(r){var f=(0,y.default)(r.map(function(e){return(0,m.default)(Object.values(e))}));if(f.length>1)throw Error("Mango sort can only use a single order (asc or desc).");var h,v=f.length>0?(0,m.default)(f):"asc",b=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return j(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(n);try{for(b.s();!(h=b.n()).done;)!function(){var e=h.value;r.find(function(t){return(0,m.default)(Object.keys(t))===e})||r.push((0,u.default)({},e,v))}()}catch(e){b.e(e)}finally{b.f()}}return{selector:a?(0,g.default)(N({},e),a):e,use_index:d,fields:o?[].concat((0,i.default)(o),["_id","_rev"]):void 0,limit:s,skip:void 0===c?0:c,bookmark:t.bookmark||l,sort:r,execution_stats:!!(0,p.default)("debug")||void 0}}},{key:"checkUniquenessOf",value:(q=(0,l.default)(c.default.mark(function e(t,r){var n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUniqueIndexId(t);case 2:return n=e.sent,e.next=5,this.find((0,u.default)({},t,r),{indexId:n,fields:["_id"]});case 5:return a=e.sent,e.abrupt("return",0===a.data.length);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return q.apply(this,arguments)})},{key:"getUniqueIndexId",value:function(e){return this.getIndexId([e],{indexName:"".concat(this.doctype,"/").concat(e)})}},{key:"getIndexId",value:(V=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(n=r.partialFilter)?"":n,i=void 0===(o=r.indexName)?(0,O.getIndexNameFromFields)(t):o,this.indexes[i]){e.next=20;break}return e.prev=2,e.next=5,this.createIndex(t,{partialFilter:a});case 5:u=e.sent,e.next=19;break;case 8:if(e.prev=8,e.t0=e.catch(2),(0,_.isIndexConflictError)(e.t0)){e.next=14;break}throw e.t0;case 14:return e.next=16,(0,h.sleep)(1e3);case 16:return e.next=18,this.createIndex(t,{partialFilter:a});case 18:u=e.sent;case 19:this.indexes[i]=u;case 20:return e.abrupt("return",this.indexes[i].id);case 21:case"end":return e.stop()}},e,this,[[2,8]])})),function(e,t){return V.apply(this,arguments)})},{key:"createIndex",value:(Q=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,u,s,l,d=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=d.length>1&&void 0!==d[1]?d[1]:{}).partialFilter,a=r.indexName,o={index:{fields:t}},a&&(o.ddoc=a),n&&(o.index.partial_filter_selector=n),e.prev=4,e.next=7,this.stackClient.fetchJSON("POST",(0,h.uri)(A(),this.doctype),o);case 7:i=e.sent,e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(4),(0,_.isIndexConflictError)(e.t0)){e.next=16;break}throw e.t0;case 16:return e.abrupt("return");case 17:if(u={id:i.id,fields:t},"exists"!==i.result){e.next=20;break}return e.abrupt("return",u);case 20:return s={},t.forEach(function(e){return s[e]={$gt:null}}),l={indexId:u.id,limit:1,partialFilterFields:n?(0,O.getIndexFields)({partialFilter:n}):null},e.next=25,(0,h.attempt)(this.find(s,l));case 25:if(!e.sent){e.next=27;break}return e.abrupt("return",u);case 27:return e.next=29,(0,h.sleep)(1e3);case 29:return e.next=31,(0,h.attempt)(this.find(s,l));case 31:if(!e.sent){e.next=33;break}return e.abrupt("return",u);case 33:return e.next=35,(0,h.sleep)(500);case 35:return e.abrupt("return",u);case 36:case"end":return e.stop()}},e,this,[[4,10]])})),function(e){return Q.apply(this,arguments)})},{key:"fetchAllMangoIndexes",value:(J=(0,l.default)(c.default.mark(function e(){var t,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,h.uri)(C(),this.doctype),e.next=3,this.stackClient.fetchJSON("GET",t);case 3:return r=e.sent,e.abrupt("return",r.rows.filter(function(e){return"query"===e.doc.language}).map(function(e){return(0,O.normalizeDesignDoc)(e)}));case 5:case"end":return e.stop()}},e,this)})),function(){return J.apply(this,arguments)})},{key:"destroyIndex",value:(Y=(0,l.default)(c.default.mark(function e(t){var r,n,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id.split("/")[1],n=t._rev,a=(0,h.uri)(P(),this.doctype,r,n),e.abrupt("return",this.stackClient.fetchJSON("DELETE",a));case 4:case"end":return e.stop()}},e,this)})),function(e){return Y.apply(this,arguments)})},{key:"copyIndex",value:(K=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id.split("/")[1],a=t._rev,o=(0,h.uri)(E(),this.doctype,n,a),i={headers:{Destination:"_design/".concat(r)}},e.abrupt("return",this.stackClient.fetchJSON("POST",o,null,i));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return K.apply(this,arguments)})},{key:"findExistingIndex",value:($=(0,l.default)(c.default.mark(function e(t,r){var n,a,o,i,u,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.sort,a=r.indexedFields,o=r.partialFilter,e.next=3,this.fetchAllMangoIndexes();case 3:if(!((i=e.sent).length<1)){e.next=6;break}return e.abrupt("return",null);case 6:return n=(0,O.transformSort)(n),u=a||(0,O.getIndexFields)({sort:n,selector:t}),s=i.find(function(e){return(0,O.isMatchingIndex)(e,u,o)}),e.abrupt("return",s);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return $.apply(this,arguments)})},{key:"fetchChangesRaw",value:(X=(0,l.default)(c.default.mark(function e(t){var r,n,a,o,i,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.doc_ids&&t.doc_ids.length>0,n="?".concat([w.default.stringify(N(N({},(0,v.default)(t,["doc_ids","includeDocs"])),{},{include_docs:t.includeDocs})),r&&void 0===t.filter?"filter=_doc_ids":void 0].filter(Boolean).join("&")),a=r?"POST":"GET",o="/data/".concat(this.doctype,"/_changes").concat(n),i=r?{doc_ids:t.doc_ids}:void 0,e.next=7,this.stackClient.fetchJSON(a,o,i);case 7:return u=e.sent,e.abrupt("return",u);case 9:case"end":return e.stop()}},e,this)})),function(e){return X.apply(this,arguments)})},{key:"fetchChanges",value:(ee=(0,l.default)(c.default.mark(function e(){var t,r,n,a,o,i,u=this,s=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=s.length>1&&void 0!==s[1]?s[1]:{},n={includeDocs:!0},"object"!=typeof t?(n.since=t,S.default.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({since: "'.concat(t,'"}).'))):Object.keys(t).length>0&&Object.assign(n,t),e.next=6,this.fetchChangesRaw(n);case 6:return o=(a=e.sent).last_seq,i=a.results.map(function(e){return e.doc}).filter(Boolean),r.includeDesign||(i=i.filter(function(e){return 0!==e._id.indexOf("_design")})),r.includeDeleted||(i=i.filter(function(e){return!e._deleted})),e.abrupt("return",{newLastSeq:o,documents:i.map(function(e){return(0,k.normalizeDoc)(e,u.doctype)})});case 12:case"end":return e.stop()}},e,this)})),function(){return ee.apply(this,arguments)})}],[{key:"normalizeDoctype",value:function(e){return(0,k.normalizeDoctypeRawApi)(e)}}]),et}();t.default=B},49129:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isDirectory=t.isFile=void 0;var o=a(r(80295)),i=a(r(68434)),u=a(r(41)),c=a(r(82007)),s=a(r(65105)),l=a(r(19723)),d=a(r(8997)),f=a(r(25665)),p=a(r(27952)),h=a(r(12323)),y=a(r(64512)),v=a(r(12109)),m=a(r(18721)),g=a(r(27361)),b=a(r(57557)),w=a(r(78718));r(35946);var O=a(r(67267)),k=r(26070),_=r(66804);r(45051);var x=r(78140),S=r(77069),E=n(r(93726)),P=a(r(79271));function C(){var e=(0,u.default)(["/files/_changes"]);return C=function(){return e},e}function A(){var e=(0,u.default)(["/data/","/","/relationships/not_synchronizing"]);return A=function(){return e},e}function j(){var e=(0,u.default)(["/data/","/","/relationships/not_synchronizing"]);return j=function(){return e},e}function T(){var e=(0,u.default)(["/data/","/","/relationships/not_synchronizing"]);return T=function(){return e},e}function M(){var e=(0,u.default)(["/files/","/versions"]);return M=function(){return e},e}function D(){var e=(0,u.default)(["/files/upload/metadata"]);return D=function(){return e},e}function R(){var e=(0,u.default)(["/files/",""]);return R=function(){return e},e}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function N(){var e=(0,u.default)(["/files/","?Name=","&Type=directory&MetadataID=",""]);return N=function(){return e},e}function F(){var e=(0,u.default)(["/files/metadata?Path=",""]);return F=function(){return e},e}function L(){var e=(0,u.default)(["/files/",""]);return L=function(){return e},e}function z(){var e=(0,u.default)(["/files/downloads?Path=",""]);return z=function(){return e},e}function B(){var e=(0,u.default)(["/files/downloads?VersionId=","&Filename=",""]);return B=function(){return e},e}function U(){var e=(0,u.default)(["/files/downloads?Id=","&Filename=",""]);return U=function(){return e},e}function H(){var e=(0,u.default)(["/files/","?Name=","&Type=file&Executable=","&Encrypted=",""]);return H=function(){return e},e}function G(){var e=(0,u.default)(["/files/","?Name=","&Type=file&Executable=","&Encrypted=","&MetadataID=","&Size=","&SourceAccount=","&SourceAccountIdentifier=",""]);return G=function(){return e},e}function Z(){var e=(0,u.default)(["/files/",""]);return Z=function(){return e},e}function W(){var e=(0,u.default)(["/files/","/copy"]);return W=function(){return e},e}function q(){var e=(0,u.default)(["/files/trash/",""]);return q=function(){return e},e}function V(){var e=(0,u.default)(["/files/",""]);return V=function(){return e},e}function Q(){var e=(0,u.default)(["/data/","/","/relationships/references"]);return Q=function(){return e},e}function J(){var e=(0,u.default)(["/data/","/","/relationships/references"]);return J=function(){return e},e}function Y(){var e=(0,u.default)(["/files/","/relationships/referenced_by"]);return Y=function(){return e},e}function K(){var e=(0,u.default)(["/files/","/relationships/referenced_by"]);return K=function(){return e},e}function $(){var e=(0,u.default)(["/data/","/","/relationships/references"]);return $=function(){return e},e}function X(){var e=(0,u.default)(["/files/_all_docs?include_docs=true"]);return X=function(){return e},e}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(t){(0,y.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var er="io.cozy.files.root-dir",en=(0,k.normalizeDoctypeJsonApi)("io.cozy.files"),ea=function(e){var t;return et(et({},en(e)),{},{_rev:null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.rev})},eo=function(e){return e?e.map(function(e){return{_type:e.type,_id:e.id}}):[]},ei=function(e){return e&&e.trim()},eu=function(e){var t=ei(e);if("string"!=typeof t||""===t)throw Error("Missing name argument");if("."===e||".."===e)throw Error("Invalid filename: ".concat(e));var r=(0,S.getIllegalCharacters)(t);if(r.length)throw Error("Invalid filename containing illegal character(s): ".concat(r));return t};t.isFile=function(e){var t=e._type,r=e.type;return"io.cozy.files"===t||"directory"===r||"file"===r},t.isDirectory=function(e){return"directory"===e.type};var ec=function(e,t){return new Promise(function(r){e.forEach(function(e){return e.then(function(e){t(e)&&r(!0)})}),Promise.all(e).then(function(){return r(!1)})})},es=function(e){var t=e.lastIndexOf("/");return e.substring(0,t)},el=function(e){(0,f.default)(eL,e);var t,r,n,a,u,O,k,S,ee,en,el,ed,ef,ep,eh,ey,ev,em,eg,eb,ew,eO,ek,e_,ex,eS,eE,eP,eC,eA,ej,eT,eM,eD,eR,eI,eN,eF=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,h.default)(eL);return e=t?Reflect.construct(r,arguments,(0,h.default)(this).constructor):r.apply(this,arguments),(0,p.default)(this,e)});function eL(e,t){var r;return(0,s.default)(this,eL),r=eF.call(this,e,t),(0,y.default)((0,d.default)(r),"extractResponseLinkRelated",function(e){var t=e.links&&e.links.related;if(!t)throw Error("No related link in server response");return r.stackClient.fullpath(t)}),(0,y.default)((0,d.default)(r),"forceFileDownload",function(e,t){(0,_.forceDownload)(e,t)}),r.specialDirectories={},r}return(0,l.default)(eL,[{key:"get",value:function(e){return this.statById(e)}},{key:"getAll",value:(r=(0,c.default)(i.default.mark(function e(t){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("POST",(0,_.uri)(X()),{keys:t});case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(0,x.dontThrowNotFoundError)(e.t0));case 9:return e.abrupt("return",{data:r.data.map(function(e){return ea(e)}),meta:{count:r.data.length},execution_stats:r.execution_stats});case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return r.apply(this,arguments)})},{key:"fetchFindFiles",value:(n=(0,c.default)(i.default.mark(function e(t,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetchJSON("POST","/files/_find",this.toMangoOptions(t,r)));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"find",value:(a=(0,c.default)(i.default.mark(function e(t){var r,n,a,o,u,c,s,l=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(n=(r=l.length>1&&void 0!==l[1]?l[1]:{}).skip)?0:n,e.prev=2,u="/files/_find",e.next=6,this.findWithMango(u,t,r);case 6:o=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,x.dontThrowNotFoundError)(e.t0));case 12:return c=(0,g.default)(o,"links.next",""),s=new URL("".concat(this.stackClient.uri).concat(c)).searchParams.get("page[cursor]"),e.abrupt("return",{data:o.data.map(function(e){return ea(e)}),meta:o.meta,next:o.meta.count>a+o.data.length,skip:a,bookmark:s||void 0,execution_stats:o.meta.execution_stats});case 16:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return a.apply(this,arguments)})},{key:"findReferencedBy",value:(u=(0,c.default)(i.default.mark(function e(t){var r,n,a,o,u,c,s,l=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(n=(r=l.length>1&&void 0!==l[1]?l[1]:{}).skip)?0:n,o={include:"files","page[limit]":r.limit,"page[cursor]":r.cursor,sort:"datetime"},u=(0,_.uri)($(),t._type,t._id),c=E.buildURL(u,o),e.next=6,this.stackClient.fetchJSON("GET",c);case 6:return s=e.sent,e.abrupt("return",{data:eo(s.data),included:s.included?s.included.map(function(e){return ea(e)}):[],next:(0,m.default)(s,"links.next"),meta:s.meta,skip:a});case 8:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"addReferencedBy",value:(O=(0,c.default)(i.default.mark(function e(t,r){var n,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.map(function(e){return{id:e._id,type:e._type}}),e.next=3,this.stackClient.fetchJSON("POST",(0,_.uri)(K(),t._id),{data:n});case 3:return a=e.sent,e.abrupt("return",{data:eo(a.data),meta:a.meta});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return O.apply(this,arguments)})},{key:"removeReferencedBy",value:(k=(0,c.default)(i.default.mark(function e(t,r){var n,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.map(function(e){return{id:e._id||e.id,type:e._type||e.type}}),e.next=3,this.stackClient.fetchJSON("DELETE",(0,_.uri)(Y(),t._id||t.id),{data:n});case 3:return a=e.sent,e.abrupt("return",{data:eo(a.data),meta:a.meta});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return k.apply(this,arguments)})},{key:"addReferencesTo",value:(S=(0,c.default)(i.default.mark(function e(t,r){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.map(function(e){return{id:e._id,type:"io.cozy.files"}}),e.abrupt("return",this.stackClient.fetchJSON("POST",(0,_.uri)(J(),t._type,t._id),{data:n}));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return S.apply(this,arguments)})},{key:"removeReferencesTo",value:(ee=(0,c.default)(i.default.mark(function e(t,r){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.map(function(e){return{id:e._id,type:"io.cozy.files"}}),e.abrupt("return",this.stackClient.fetchJSON("DELETE",(0,_.uri)(Q(),t._type,t._id),{data:n}));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return ee.apply(this,arguments)})},{key:"destroy",value:(en=(0,c.default)(i.default.mark(function e(t){var r,n,a,o,u,c,s,l=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===(r=(l.length>1&&void 0!==l[1]?l[1]:{}).ifMatch)?"":r,a=t._id,o=t.relationships,u=t.referenced_by,e.next=4,this.stackClient.fetchJSON("DELETE",(0,_.uri)(V(),a),void 0,{headers:{"If-Match":n}});case 4:if(c=e.sent,!Array.isArray(s=(0,g.default)(o,"referenced_by.data",u))){e.next=9;break}return e.next=9,this.removeReferencedBy(t,s);case 9:return e.abrupt("return",{data:ea(c.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return en.apply(this,arguments)})},{key:"emptyTrash",value:function(){return this.stackClient.fetchJSON("DELETE","/files/trash")}},{key:"restore",value:function(e){return this.stackClient.fetchJSON("POST",(0,_.uri)(q(),e))}},{key:"copy",value:(el=(0,c.default)(i.default.mark(function e(t,r,n){var a,o,u,c,s,l,d,f=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(a=(f.length>3&&void 0!==f[3]?f[3]:{}).sanitizeName)||a,null!=(u=r)&&o&&(u=eu(u)),c={name:u,DirID:n},s=(0,_.uri)(W(),t),l=E.buildURL(s,c),e.next=8,this.stackClient.fetchJSON("POST",l);case 8:return d=e.sent,e.abrupt("return",{data:ea(d.data)});case 10:case"end":return e.stop()}},e,this)})),function(e,t,r){return el.apply(this,arguments)})},{key:"deleteFilePermanently",value:(ed=(0,c.default)(i.default.mark(function e(t){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PATCH",(0,_.uri)(Z(),t),{data:{type:"io.cozy.files",id:t,attributes:{permanent_delete:!0}}});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e,this)})),function(e){return ed.apply(this,arguments)})},{key:"upload",value:(ef=(0,c.default)(i.default.mark(function e(t,r){var n,a,o,u=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(n=(u.length>2&&void 0!==u[2]?u[2]:{}).sanitizeName)||n,e.next=3,this.ensureDirectoryExists(r,{sanitizeName:a});case 3:return o=e.sent,e.abrupt("return",this.createFile(t,{dirId:o},{sanitizeName:a}));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return ef.apply(this,arguments)})},{key:"create",value:(ep=(0,c.default)(i.default.mark(function e(t){var r,n,a,u,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0===(r=(c.length>1&&void 0!==c[1]?c[1]:{}).sanitizeName)||r,"directory"!==t.type){e.next=5;break}return e.abrupt("return",this.createDirectory(t,{sanitizeName:n}));case 5:return a=t.data,u=(0,o.default)(t,["data"]),e.abrupt("return",this.createFile(a,u,{sanitizeName:n}));case 7:case"end":return e.stop()}},e,this)})),function(e){return ep.apply(this,arguments)})},{key:"update",value:(eh=(0,c.default)(i.default.mark(function e(t){var r,n,a,u,c,s=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0===(r=(s.length>1&&void 0!==s[1]?s[1]:{}).sanitizeName)||r,a=t.data,u=(0,o.default)(t,["data"]),c=t.id||t._id,!a){e.next=8;break}if("directory"!==t.type){e.next=6;break}throw Error("You cannot pass a data object for a directory");case 6:return u.fileId=c,e.abrupt("return",this.updateFile(a,u,{sanitizeName:n}));case 8:return e.abrupt("return",this.updateAttributes(c,t,{sanitizeName:n}));case 9:case"end":return e.stop()}},e,this)})),function(e){return eh.apply(this,arguments)})},{key:"createFile",value:(ey=(0,c.default)(i.default.mark(function e(t){var r,n,a,u,c,s,l,d,f,p,h,y,v,m,g,b,w,O,k,x,S=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S.length>1&&void 0!==S[1]?S[1]:{},a=void 0===(n=(S.length>2&&void 0!==S[2]?S[2]:{}).sanitizeName)||n,u=r.name,s=void 0===(c=r.dirId)?"":c,d=void 0!==(l=r.executable)&&l,p=void 0!==(f=r.encrypted)&&f,h=r.metadata,v=void 0===(y=r.sourceAccount)?"":y,g=void 0===(m=r.sourceAccountIdentifier)?"":m,b=(0,o.default)(r,["name","dirId","executable","encrypted","metadata","sourceAccount","sourceAccountIdentifier"]),(w=u)||"string"!=typeof t.name||(w=t.name),a&&(w=eu(w)),O="",!h){e.next=12;break}return e.next=10,this.createFileMetadata(h);case 10:O=e.sent.data.id;case 12:return k="",b.contentLength&&(k=String(b.contentLength)),x=(0,_.uri)(G(),s,w,d,p,O,k,v,g),e.abrupt("return",this.doUpload(t,x,b));case 16:case"end":return e.stop()}},e,this)})),function(e){return ey.apply(this,arguments)})},{key:"updateFile",value:(ev=(0,c.default)(i.default.mark(function e(t){var r,n,a,u,c,s,l,d,f,p,h,y,v,m,g,b,w,O=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=O.length>1&&void 0!==O[1]?O[1]:{},a=void 0===(n=(O.length>2&&void 0!==O[2]?O[2]:{}).sanitizeName)||n,c=void 0!==(u=r.executable)&&u,l=void 0!==(s=r.encrypted)&&s,d=r.fileId,p=void 0===(f=r.name)?"":f,h=r.metadata,y=(0,o.default)(r,["executable","encrypted","fileId","name","metadata"]),!(!d||"string"!=typeof d)){e.next=5;break}throw Error("missing fileId argument");case 5:if(!(!(v=p||t.name)||"string"!=typeof v)){e.next=8;break}throw Error("missing name in data argument");case 8:if(m=a?eu(v):v,b=(0,_.uri)(H(),d,m,c,l),!h){e.next=16;break}return e.next=13,this.createFileMetadata(h);case 13:g=e.sent.data.id,b+="&MetadataID=".concat(g);case 16:return w="",y.contentLength&&(w=String(y.contentLength),b+="&Size=".concat(w)),e.abrupt("return",this.doUpload(t,b,y,"PUT"));case 19:case"end":return e.stop()}},e,this)})),function(e){return ev.apply(this,arguments)})},{key:"getDownloadLinkById",value:function(e,t){return this.stackClient.fetchJSON("POST",(0,_.uri)(U(),e,encodeURIComponent(t))).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByRevision",value:function(e,t){return this.stackClient.fetchJSON("POST",(0,_.uri)(B(),e,encodeURIComponent(t))).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByPath",value:function(e){return this.stackClient.fetchJSON("POST",(0,_.uri)(z(),e)).then(this.extractResponseLinkRelated)}},{key:"download",value:(em=(0,c.default)(i.default.mark(function e(t){var r,n,a,o,u=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:null,o=(u.length>2&&void 0!==u[2]?u[2]:void 0)||t.name,r){e.next=9;break}return e.next=6,this.getDownloadLinkById(t._id,o);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,this.getDownloadLinkByRevision(r,o);case 11:a=e.sent;case 12:this.forceFileDownload("".concat(a,"?Dl=1"),o);case 13:case"end":return e.stop()}},e,this)})),function(e){return em.apply(this,arguments)})},{key:"fetchFileContent",value:(eg=(0,c.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.default.warn("FileCollection.fetchFileContent() is deprecated. Use FileCollection.fetchFileContentById() instead"),e.abrupt("return",this.fetchFileContentById(t));case 2:case"end":return e.stop()}},e,this)})),function(e){return eg.apply(this,arguments)})},{key:"fetchFileContentById",value:(eb=(0,c.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetch("GET","/files/download/".concat(t)));case 1:case"end":return e.stop()}},e,this)})),function(e){return eb.apply(this,arguments)})},{key:"getBeautifulSize",value:function(e,t){return(0,_.formatBytes)(parseInt(e.size),t)}},{key:"downloadArchive",value:(ew=(0,c.default)(i.default.mark(function e(t,r){var n,a,o,u,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(c.length>2&&void 0!==c[2]?c[2]:{}).pages,a=r?(0,_.slugify)(r):"files",e.next=4,this.createArchiveLinkByIds({ids:t,name:a,pages:n});case 4:o=e.sent,u=this.stackClient.fullpath(o),this.forceFileDownload(u,a+".zip");case 7:case"end":return e.stop()}},e,this)})),function(e,t){return ew.apply(this,arguments)})},{key:"getArchiveLinkByIds",value:(eO=(0,c.default)(i.default.mark(function e(t){var r,n,a=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"files",P.default.warn("CozyClient FileCollection getArchiveLinkByIds method is deprecated. Use createArchiveLinkByIds instead"),e.next=4,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:{name:r,ids:t}}});case 4:return n=e.sent,e.abrupt("return",n.links.related);case 6:case"end":return e.stop()}},e,this)})),function(e){return eO.apply(this,arguments)})},{key:"createArchiveLinkByIds",value:(ek=(0,c.default)(i.default.mark(function e(t){var r,n,a,o,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ids,a=void 0===(n=t.name)?"files":n,o=t.pages,e.next=3,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:et({name:a,ids:r},o&&{pages:o})}});case 3:return u=e.sent,e.abrupt("return",u.links.related);case 5:case"end":return e.stop()}},e,this)})),function(e){return ek.apply(this,arguments)})},{key:"isChildOf",value:(e_=(0,c.default)(i.default.mark(function e(t,r){var n,a,o,u,c,s,l,d,f,p=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(n="object"==typeof t?t:{_id:t})._id,o=n.dirID,u=n.path,c=("object"==typeof r?r:{_id:r})._id,a!==c&&o!==c){e.next=4;break}return e.abrupt("return",!0);case 4:if(u){e.next=10;break}return e.next=7,this.statById(a);case 7:u=(s=e.sent).data.path,o=s.data.dirID;case 10:for(l=u,d=[u];""!=l;)""!=(f=es(l))&&d.push(f),l=f;return d.reverse(),e.abrupt("return",ec(d.map(function(e){return p.statByPath(e)}),function(e){return e.data._id==c}));case 15:case"end":return e.stop()}},e,this)})),function(e,t){return e_.apply(this,arguments)})},{key:"statById",value:(ex=(0,c.default)(i.default.mark(function e(t){var r,n,a,o,u,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n=(0,w.default)(r,["page[limit]","page[skip]","page[cursor]"]),a=(0,_.uri)(L(),t),o=E.buildURL(a,n),e.next=6,this.stackClient.fetchJSON("GET",o);case 6:return u=e.sent,e.abrupt("return",{data:ea(u.data),included:u.included&&u.included.map(function(e){return ea(e)}),links:u.links});case 8:case"end":return e.stop()}},e,this)})),function(e){return ex.apply(this,arguments)})},{key:"statByPath",value:(eS=(0,c.default)(i.default.mark(function e(t){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,_.uri)(F(),t));case 2:return r=e.sent,e.abrupt("return",{data:ea(r.data),included:r.included&&r.included.map(function(e){return ea(e)})});case 4:case"end":return e.stop()}},e,this)})),function(e){return eS.apply(this,arguments)})},{key:"createDirectory",value:(eE=(0,c.default)(i.default.mark(function e(){var t,r,n,a,o,u,c,s,l,d,f,p=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:{},n=void 0===(r=(p.length>1&&void 0!==p[1]?p[1]:{}).sanitizeName)||r,a=t.name,o=t.dirId,u=t.lastModifiedDate,c=t.metadata,s="",!c){e.next=9;break}return e.next=7,this.createFileMetadata(c);case 7:s=e.sent.data.id;case 9:return l=n?eu(a):a,d=u&&("string"==typeof u?new Date(u):u),e.next=13,this.stackClient.fetchJSON("POST",(0,_.uri)(N(),o,l,s),void 0,{headers:{Date:d?d.toGMTString():""}});case 13:return f=e.sent,e.abrupt("return",{data:ea(f.data)});case 15:case"end":return e.stop()}},e,this)})),function(){return eE.apply(this,arguments)})},{key:"ensureDirectoryExists",value:(eP=(0,c.default)(i.default.mark(function e(t){var r,n,a,o=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0===(r=(o.length>1&&void 0!==o[1]?o[1]:{}).sanitizeName)||r,this.specialDirectories[t]){e.next=6;break}return e.next=4,this.createDirectoryByPath(t,{sanitizeName:n});case 4:a=e.sent,this.specialDirectories[t]=a.data._id;case 6:return e.abrupt("return",this.specialDirectories[t]);case 7:case"end":return e.stop()}},e,this)})),function(e){return eP.apply(this,arguments)})},{key:"getDirectoryOrCreate",value:(eC=(0,c.default)(i.default.mark(function e(t,r){var n,a,o,u,c,s,l=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(n=(l.length>2&&void 0!==l[2]?l[2]:{}).sanitizeName)||n,!(r&&!r.attributes)){e.next=3;break}throw Error("Malformed parent directory");case 3:return o=a?ei(t):t,u="".concat(r._id===er?"":r.attributes.path,"/").concat(o),e.prev=5,e.next=8,this.statByPath(u||"/");case 8:return c=e.sent,e.abrupt("return",c);case 12:if(e.prev=12,e.t0=e.catch(5),!((s=JSON.parse(e.t0.message).errors)&&s.length&&"404"===s[0].status)){e.next=18;break}return e.abrupt("return",this.createDirectory({name:o,dirId:r&&r._id},{sanitizeName:a}));case 18:throw s;case 19:case"end":return e.stop()}},e,this,[[5,12]])})),function(e,t){return eC.apply(this,arguments)})},{key:"createDirectoryByPath",value:(eA=(0,c.default)(i.default.mark(function e(t){var r,n,a,o,u,c,s,l,d=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===(r=(d.length>1&&void 0!==d[1]?d[1]:{}).sanitizeName)||r,a=t.split("/").filter(function(e){return""!==e}),e.next=4,this.statById(er);case 4:if(o=e.sent,a.length){e.next=7;break}return e.abrupt("return",o);case 7:u=o,c=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return I(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(a),e.prev=9,c.s();case 11:if((s=c.n()).done){e.next=18;break}return l=s.value,e.next=15,this.getDirectoryOrCreate(l,u.data,{sanitizeName:n});case 15:u=e.sent;case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return e.abrupt("return",u);case 27:case"end":return e.stop()}},e,this,[[9,20,23,26]])})),function(e){return eA.apply(this,arguments)})},{key:"updateAttributes",value:(ej=(0,c.default)(i.default.mark(function e(t,r){var n,a,o,u,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(n=(c.length>2&&void 0!==c[2]?c[2]:{}).sanitizeName)||n,o=et({},r),r.name&&a&&(o.name=eu(r.name)),e.next=5,this.stackClient.fetchJSON("PATCH",(0,_.uri)(R(),t),{data:{type:"io.cozy.files",id:t,attributes:o}});case 5:return u=e.sent,e.abrupt("return",{data:ea(u.data)});case 7:case"end":return e.stop()}},e,this)})),function(e,t){return ej.apply(this,arguments)})},{key:"updateFileMetadata",value:(eT=(0,c.default)(i.default.mark(function e(t,r){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.default.warn("CozyClient FileCollection updateFileMetadata method is deprecated. Use updateAttributes instead"),e.abrupt("return",this.updateAttributes(t,r));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return eT.apply(this,arguments)})},{key:"createFileMetadata",value:(eM=(0,c.default)(i.default.mark(function e(t){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,_.uri)(D()),{data:{type:"io.cozy.files.metadata",attributes:t}});case 2:return r=e.sent,e.abrupt("return",{data:r.data});case 4:case"end":return e.stop()}},e,this)})),function(e){return eM.apply(this,arguments)})},{key:"updateMetadataAttribute",value:(eD=(0,c.default)(i.default.mark(function e(t,r){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,_.uri)(M(),t),{data:{type:"io.cozy.files.metadata",attributes:r}});case 2:return n=e.sent,e.abrupt("return",{data:n.data});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return eD.apply(this,arguments)})},{key:"getFileTypeFromName",value:function(e){return v.default.getType(e)||"application/octet-stream"}},{key:"doUpload",value:(eR=(0,c.default)(i.default.mark(function e(t,r,n){var a,o,u,c,s,l,d,f,p,h,y,v,m,g,b,w,O,k,_,x=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=x.length>3&&void 0!==x[3]?x[3]:"POST",o=r,u=t){e.next=5;break}throw Error("missing data argument");case 5:if(u.buffer&&u.buffer instanceof ArrayBuffer&&(u=u.buffer),c="undefined"!=typeof ArrayBuffer&&u instanceof ArrayBuffer,s="undefined"!=typeof File&&u instanceof File,l="undefined"!=typeof Blob&&u instanceof Blob,d=!0===u.readable&&"function"==typeof u.pipe,f="string"==typeof u,!(!c&&!s&&!l&&!d&&!f)){e.next=13;break}throw Error("invalid data type");case 13:return h=(p=n||{}).contentType,y=p.contentLength,v=p.checksum,m=p.lastModifiedDate,g=p.ifMatch,h||("string"==typeof u?h="text/plain":u.type?h=u.type:(w=new URLSearchParams((b=o.split("?")).length>1?b[1]:"").get("Name"),h=this.getFileTypeFromName(w.toLowerCase()))),(m=m||u.lastModified)&&(m=new Date(m)),O={"Content-Type":h},y&&(O["Content-Length"]=String(y)),v&&(O["Content-MD5"]=v),m&&(k=m.toISOString(),o="".concat(o,"&UpdatedAt=").concat(k,"&CreatedAt=").concat(k)),g&&(O["If-Match"]=g),e.next=24,this.stackClient.fetchJSON(a,o,u,{headers:O,onUploadProgress:n.onUploadProgress});case 24:return _=e.sent,e.abrupt("return",{data:ea(_.data)});case 26:case"end":return e.stop()}},e,this)})),function(e,t,r){return eR.apply(this,arguments)})},{key:"findNotSynchronizedDirectories",value:(eI=(0,c.default)(i.default.mark(function e(t){var r,n,a,o,u,c,s,l,d,f,p=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(n=(r=p.length>1&&void 0!==p[1]?p[1]:{}).skip)?0:n,o=r.limit,u=r.cursor,s={include:void 0!==(c=r.includeFiles)&&c?"files":void 0,"page[limit]":o,"page[cursor]":u,sort:"id"},l=(0,_.uri)(T(),t._type,t._id),d=E.buildURL(l,s),e.next=6,this.stackClient.fetchJSON("GET",d);case 6:return f=e.sent,e.abrupt("return",{data:f.data.map(function(e){return ea(e)}),included:f.included?f.included.map(function(e){return ea(e)}):[],next:(0,m.default)(f,"links.next"),meta:f.meta,skip:a});case 8:case"end":return e.stop()}},e,this)})),function(e){return eI.apply(this,arguments)})},{key:"addNotSynchronizedDirectories",value:function(e,t){var r=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("POST",(0,_.uri)(j(),e._type,e._id),{data:r})}},{key:"removeNotSynchronizedDirectories",value:function(e,t){var r=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("DELETE",(0,_.uri)(A(),e._type,e._id),{data:r})}},{key:"fetchChanges",value:(eN=(0,c.default)(i.default.mark(function e(){var t,r,n,a,o,u,c,s,l,d,f=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},r=f.length>1&&void 0!==f[1]?f[1]:{},n={},"object"!=typeof t?(n.since=t,P.default.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({since: "'.concat(t,'"}).'))):Object.keys(t).length>0&&Object.assign(n,t),Object.keys(r).length>0&&(Object.assign(n,r),(r.skipTrashed||r.includeFilePath)&&(n.includeDocs=!0)),a=et(et({},(0,b.default)(n,["fields","includeDocs","includeFilePath","skipDeleted","skipTrashed"])),{},{fields:n.fields?n.fields.join(","):null,include_docs:n.includeDocs,include_file_path:n.includeFilePath,skip_deleted:n.skipDeleted,skip_trashed:n.skipTrashed}),o=(0,_.uri)(C()),u=E.buildURL(o,a),e.next=10,this.stackClient.fetchJSON("GET",u);case 10:return s=(c=e.sent).last_seq,l=c.pending,d=c.results,e.abrupt("return",{newLastSeq:s,pending:l,results:d});case 15:case"end":return e.stop()}},e,this)})),function(){return eN.apply(this,arguments)})},{key:"getOrCreateSharedDrivesDirectory",value:function(){return this.stackClient.fetchJSON("POST","/files/shared-drives")}}]),eL}(O.default);t.default=el},54056:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.hasJobFinished=t.normalizeJob=t.JOBS_DOCTYPE=void 0;var a=n(r(68434)),o=n(r(41)),i=n(r(82007)),u=n(r(65105)),c=n(r(19723)),s=n(r(25665)),l=n(r(27952)),d=n(r(12323)),f=n(r(78140)),p=n(r(67267)),h=r(66804),y=r(26070);function v(){var e=(0,o.default)(["/jobs/",""]);return v=function(){return e},e}var m="io.cozy.jobs";t.JOBS_DOCTYPE=m;var g=function(e){return new Promise(function(t){return setTimeout(t,e)})},b=(0,y.normalizeDoctypeJsonApi)(m);t.normalizeJob=b;var w=function(e){return"done"===e.state||"errored"===e.state};t.hasJobFinished=w;var O=function(e){(0,s.default)(y,e);var t,r,n,o,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(y);return e=t?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function y(e){return(0,u.default)(this,y),p.call(this,m,e)}return(0,c.default)(y,[{key:"queued",value:function(e){return this.stackClient.fetchJSON("GET","/jobs/queue/".concat(e))}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.stackClient.fetchJSON("POST","/jobs/queue/".concat(e),{data:{type:m,attributes:{arguments:t,options:r,manual:n}}})}},{key:"get",value:(r=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.default.get(this.stackClient,(0,h.uri)(v(),t),{normalize:b}));case 1:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"update",value:(n=(0,i.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("client"===t.worker){e.next=2;break}throw Error("JobCollection.update only works for client workers. ".concat(t.worker," given"));case 2:return e.next=4,this.stackClient.fetchJSON("PATCH","/jobs/".concat(t._id),{data:{type:m,id:t._id,attributes:{state:t.attributes.state,error:t.attributes.error}}});case 4:return r=e.sent,e.abrupt("return",b(r.data));case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"waitFor",value:(o=(0,i.default)(a.default.mark(function e(t){var r,n,o,i,u,c,s,l,d,f,p,h,y=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(n=(r=y.length>1&&void 0!==y[1]?y[1]:{}).onUpdate)?null:n,u=void 0===(i=r.until)?w:i,s=void 0===(c=r.delay)?5e3:c,d=void 0===(l=r.timeout)?3e5:l,f=Date.now(),e.next=4,this.get(t);case 4:p=e.sent.data.attributes;case 5:if(!(!p||!u(p))){e.next=17;break}return e.next=8,g(s);case 8:return e.next=10,this.get(t);case 10:if(p=e.sent.data.attributes,o&&o(p),h=Date.now(),!(f-h>d)){e.next=15;break}throw Error("Timeout for JobCollection::waitFor");case 15:e.next=5;break;case 17:return e.abrupt("return",p);case 18:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})}]),y}(p.default);t.default=O},76812:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KONNECTORS_DOCTYPE=void 0;var o=a(r(68434)),i=a(r(82007)),u=a(r(65105)),c=a(r(19723)),s=a(r(25665)),l=a(r(27952)),d=a(r(12323)),f=a(r(78718)),p=a(r(14324)),h=n(r(54026)),y=r(26070),v="io.cozy.konnectors";t.KONNECTORS_DOCTYPE=v;var m=function(e){(0,s.default)(b,e);var t,r,n,a,p,m,g=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(b);return e=t?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function b(e){var t;return(0,u.default)(this,b),(t=g.call(this,e)).doctype=v,t.endpoint="/konnectors/",t}return(0,c.default)(b,[{key:"create",value:(r=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for konnectors");case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:(n=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for konnectors");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"findTriggersBySlug",value:(a=(0,i.default)(o.default.mark(function e(t){var r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new h.default(this.stackClient),e.next=3,r.all({limit:null});case 3:return n=e.sent.data,e.abrupt("return",n.map(function(e){return e.attributes}).filter(function(e){return(0,h.isForKonnector)(e,t)}));case 6:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"launch",value:(p=(0,i.default)(o.default.mark(function e(t){var r,n,a,i,u,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n=new h.default(this.stackClient),e.next=4,this.findTriggersBySlug(t);case 4:if(a=e.sent,1!==(i=r.accountId?a.filter(function(e){return(0,h.isForAccount)(e,r.accountId)}):a).length){e.next=10;break}return e.abrupt("return",n.launch(a[0]));case 10:if(u=JSON.stringify((0,f.default)({slug:t,accountId:r.accountId})),0!==i.length){e.next=15;break}throw Error("No trigger found for ".concat(u));case 15:if(!(i.length>1)){e.next=17;break}throw Error("More than 1 trigger found for ".concat(u));case 17:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"update",value:(m=(0,i.default)(o.default.mark(function e(t){var r,n,a,i,u=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},t){e.next=3;break}throw Error("Cannot call update with no slug");case 3:return n=r.source||null,a=r.sync?{headers:{Accept:"text/event-stream"}}:{},e.next=8,this.stackClient.fetchJSON("PUT","/konnectors/".concat(t)+(n?"?Source=".concat(n):""),a);case 8:return i=e.sent,e.abrupt("return",(0,y.normalizeDoc)(i));case 10:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})}]),b}(p.default);t.default=m},68512:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.NEXTCLOUD_FILES_DOCTYPE=t.NextcloudFilesCollection=void 0;var a=n(r(68434)),o=n(r(82007)),i=n(r(65105)),u=n(r(19723)),c=n(r(25665)),s=n(r(27952)),l=n(r(12323)),d=n(r(64512)),f=n(r(67267)),p=r(66804),h=r(45051),y=r(26070);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,d.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b="io.cozy.remote.nextcloud.files";t.NEXTCLOUD_FILES_DOCTYPE=b;var w=(0,y.normalizeDoctypeJsonApi)(b),O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.fromTrash,a=void 0!==n&&n;return function(r){var n=w(r);return g(g({},n),{},{parentPath:t,path:a?n.path:(0,p.joinPath)(t,n.name),cozyMetadata:g(g({},n.cozyMetadata),{},{sourceAccount:e})})}},k=function(e){(0,c.default)(E,e);var t,r,n,d,f,y,m,g,w,k,_,x,S=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(E);return e=t?Reflect.construct(r,arguments,(0,l.default)(this).constructor):r.apply(this,arguments),(0,s.default)(this,e)});function E(e){return(0,i.default)(this,E),S.call(this,b,e)}return(0,u.default)(E,[{key:"find",value:(r=(0,o.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t["cozyMetadata.sourceAccount"]&&t.parentPath)){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET","/remote/nextcloud/".concat(t["cozyMetadata.sourceAccount"]).concat((0,p.encodePath)(t.parentPath)));case 3:return r=e.sent,e.abrupt("return",{data:r.data.map(O(t["cozyMetadata.sourceAccount"],t.parentPath,{fromTrash:t.trashed}))});case 5:throw Error("Not implemented");case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroy",value:(n=(0,o.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path)));case 2:if(204!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:throw new h.FetchError(r,r.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"destroyAll",value:(d=(0,o.default)(a.default.mark(function e(t){var r,n,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return v(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(t),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=9;break}return o=n.value,e.next=7,this.destroy(o);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})),function(e){return d.apply(this,arguments)})},{key:"download",value:(f=(0,o.default)(a.default.mark(function e(t){var r,n,o,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("GET","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path),"?Dl=1"));case 2:return r=e.sent,e.next=5,r.blob();case 5:n=e.sent,o=URL.createObjectURL(n),i=t.path.split("/").pop(),(0,p.forceDownload)(o,i);case 9:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"move",value:(y=(0,o.default)(a.default.mark(function e(t,r){var n,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,p.joinPath)(r.path,t.name),e.next=3,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/move").concat((0,p.encodePath)(t.path),"?To=").concat((0,p.encodePath)(n)));case 3:if(204!==(o=e.sent).status){e.next=6;break}return e.abrupt("return",o);case 6:throw new h.FetchError(o,o.json());case 7:case"end":return e.stop()}},e,this)})),function(e,t){return y.apply(this,arguments)})},{key:"moveToCozy",value:(m=(0,o.default)(a.default.mark(function e(t,r){var n,o,i,u=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0!==(n=(u.length>2&&void 0!==u[2]?u[2]:{}).copy)&&n,e.next=3,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/downstream").concat((0,p.encodePath)(t.path),"?To=").concat(r._id).concat(o?"&Copy=true":""));case 3:if(201!==(i=e.sent).status){e.next=6;break}return e.abrupt("return",i);case 6:throw new h.FetchError(i,i.json());case 7:case"end":return e.stop()}},e,this)})),function(e,t){return m.apply(this,arguments)})},{key:"moveFromCozy",value:(g=(0,o.default)(a.default.mark(function e(t,r){var n,o,i,u,c=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0!==(n=(c.length>2&&void 0!==c[2]?c[2]:{}).copy)&&n,i=(0,p.joinPath)(t.path,r.name),e.next=4,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/upstream").concat((0,p.encodePath)(i),"?From=").concat(r._id).concat(o?"&Copy=true":""));case 4:if(204!==(u=e.sent).status){e.next=7;break}return e.abrupt("return",u);case 7:throw new h.FetchError(u,u.json());case 8:case"end":return e.stop()}},e,this)})),function(e,t){return g.apply(this,arguments)})},{key:"restore",value:(w=(0,o.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/restore").concat((0,p.encodePath)(t.path)));case 2:if(204!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:throw new h.FetchError(r,r.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)})},{key:"emptyTrash",value:(k=(0,o.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t,"/trash"));case 2:if(204!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:throw new h.FetchError(r,r.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"deletePermanently",value:(_=(0,o.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path)));case 2:if(204!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:throw new h.FetchError(r,r.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return _.apply(this,arguments)})},{key:"copy",value:(x=(0,o.default)(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/copy/").concat(t.path).concat(r?"?Path=".concat(r.path,"/").concat(t.name):""));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return x.apply(this,arguments)})}]),E}(f.default);t.NextcloudFilesCollection=k},45082:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NOTES_URL_DOCTYPE=t.NOTES_DOCTYPE=void 0;var a=n(r(41)),o=n(r(64512)),i=n(r(68434)),u=n(r(82007)),c=n(r(65105)),s=n(r(19723)),l=n(r(25665)),d=n(r(27952)),f=n(r(12323)),p=n(r(67267)),h=r(26070),y=r(66804),v=r(10223);function m(){var e=(0,a.default)(["/notes/","/open"]);return m=function(){return e},e}function g(){var e=(0,a.default)(["/files/",""]);return g=function(){return e},e}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O="io.cozy.notes";t.NOTES_DOCTYPE=O;var k="io.cozy.notes.url";t.NOTES_URL_DOCTYPE=k;var _=(0,h.normalizeDoctypeJsonApi)(O),x=(0,h.normalizeDoctypeJsonApi)(k),S=function(e){(0,l.default)(b,e);var t,r,n,a,o,p,h=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(b);return e=t?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function b(e){return(0,c.default)(this,b),h.call(this,O,e)}return(0,s.default)(b,[{key:"get",value:(r=(0,u.default)(i.default.mark(function e(t){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/notes/".concat(t));case 2:return r=e.sent,e.abrupt("return",{data:_(r.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"all",value:(n=(0,u.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/notes");case 2:return t=e.sent,e.abrupt("return",w(w({},t),{},{data:t.data.map(_)}));case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"destroy",value:(a=(0,u.default)(i.default.mark(function e(t){var r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,e.next=3,this.stackClient.fetchJSON("DELETE",(0,y.uri)(g(),r));case 3:return n=e.sent,e.abrupt("return",{data:w(w({},_(n.data)),{},{_deleted:!0})});case 5:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"create",value:(o=(0,u.default)(i.default.mark(function e(t){var r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dir_id,e.next=3,this.stackClient.fetchJSON("POST","/notes",{data:{type:"io.cozy.notes.documents",attributes:{title:"",schema:(0,v.getDefaultSchema)(),dir_id:r}}});case 3:return n=e.sent,e.abrupt("return",w(w({},n),{},{data:_(n.data)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"fetchURL",value:(p=(0,u.default)(i.default.mark(function e(t){var r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,e.next=3,this.stackClient.fetchJSON("GET",(0,y.uri)(m(),r));case 3:return n=e.sent,e.abrupt("return",{data:x(n.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"getDefaultSchema",value:function(){return(0,v.getDefaultSchema)()}}]),b}(p.default);S.normalizeDoctype=h.normalizeDoctypeJsonApi,t.default=S},10223:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultSchema=t.marks=t.nodes=void 0;var r=[["doc",{content:"(block)+",marks:"link"}],["paragraph",{content:"inline*",group:"block",marks:"strong code em link strike subsup textColor typeAheadQuery underline",parseDOM:[{tag:"p"}]}],["text",{group:"inline"}],["bulletList",{group:"block",content:"listItem+",parseDOM:[{tag:"ul"}]}],["orderedList",{group:"block",content:"listItem+",parseDOM:[{tag:"ol"}]}],["listItem",{content:"(paragraph ) (paragraph | bulletList | orderedList )*",defining:!0,parseDOM:[{tag:"li"}]}],["heading",{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}]}],["blockquote",{content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}]}],["rule",{group:"block",parseDOM:[{tag:"hr"}]}],["panel",{group:"block",content:"(paragraph | heading | bulletList | orderedList)+",attrs:{panelType:{default:"info"}},parseDOM:[{tag:"div[data-panel-type]"}]}],["confluenceUnsupportedBlock",{group:"block",attrs:{cxhtml:{default:null}},parseDOM:[{tag:'div[data-node-type="confluenceUnsupportedBlock"]'}]}],["confluenceUnsupportedInline",{group:"inline",inline:!0,atom:!0,attrs:{cxhtml:{default:null}},parseDOM:[{tag:'div[data-node-type="confluenceUnsupportedInline"]'}]}],["unsupportedBlock",{inline:!1,group:"block",atom:!0,selectable:!0,attrs:{originalValue:{default:{}}},parseDOM:[{tag:'[data-node-type="unsupportedBlock"]'}]}],["unsupportedInline",{inline:!0,group:"inline",selectable:!0,attrs:{originalValue:{default:{}}},parseDOM:[{tag:'[data-node-type="unsupportedInline"]'}]}],["hardBreak",{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}]}],["table",{content:"tableRow+",attrs:{isNumberColumnEnabled:{default:!1},layout:{default:"default"},__autoSize:{default:!1}},tableRole:"table",isolating:!0,selectable:!1,group:"block",parseDOM:[{tag:"table"}]}],["tableHeader",{content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading )+",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:"header_cell",isolating:!0,marks:"",parseDOM:[{tag:"th"}]}],["tableRow",{content:"(tableCell | tableHeader)+",tableRole:"row",parseDOM:[{tag:"tr"}]}],["tableCell",{content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | unsupportedBlock)+",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:"cell",marks:"",isolating:!0,parseDOM:[{tag:".ak-renderer-table-number-column",ignore:!0},{tag:"td"}]}]];t.nodes=r;var n=[["link",{excludes:"color",group:"link",attrs:{href:{},__confluenceMetadata:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]"}]}],["em",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}]}],["strong",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strong"},{tag:"b"},{style:"font-weight"}]}],["textColor",{attrs:{color:{}},inclusive:!0,group:"color",parseDOM:[{style:"color"}]}],["strike",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strike"},{tag:"s"},{tag:"del"},{style:"text-decoration"}]}],["subsup",{inclusive:!0,group:"fontStyle",attrs:{type:{default:"sub"}},parseDOM:[{tag:"sub",attrs:{type:"sub"}},{tag:"sup",attrs:{type:"sup"}}]}],["underline",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"u"},{style:"text-decoration"}]}],["code",{excludes:"fontStyle link searchQuery color",inclusive:!0,parseDOM:[{tag:"span.code",preserveWhitespace:!0},{tag:"code",preserveWhitespace:!0},{tag:"tt",preserveWhitespace:!0},{tag:"span",preserveWhitespace:!0}]}],["typeAheadQuery",{excludes:"searchQuery",inclusive:!0,group:"searchQuery",parseDOM:[{tag:"span[data-type-ahead-query]"}],attrs:{trigger:{default:""}}}]];t.marks=n,t.getDefaultSchema=function(){return{nodes:r,marks:n}}},29985:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(15500)),o=n(r(68434)),i=n(r(82007)),u=n(r(64512)),c=n(r(80295)),s=n(r(65105)),l=n(r(19723)),d=n(r(25665)),f=n(r(27952)),p=n(r(12323)),h=n(r(29328)),y=n(r(88928)),v=n(r(66605)),m=n(r(45051)),g=n(r(79271));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,u.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=(0,p.default)(e);return r=t?Reflect.construct(n,arguments,(0,p.default)(this).constructor):n.apply(this,arguments),(0,f.default)(this,r)}}var k={clientID:"",clientName:"",clientKind:"",clientSecret:"",clientURI:"",registrationAccessToken:"",redirectURI:"",softwareID:"",softwareVersion:"",logoURI:"",policyURI:"",notificationPlatform:"",notificationDeviceToken:""},_=function(e){(0,d.default)(P,e);var t,r,n,a,u,f,p,h,b,_,S,E=O(P);function P(e){var t,r=e.oauth,n=e.scope,a=e.onTokenRefresh,o=(0,c.default)(e,["oauth","scope","onTokenRefresh"]);return(0,s.default)(this,P),(t=E.call(this,o)).setOAuthOptions(w(w({},k),r)),r.token&&t.setToken(r.token),t.scope=void 0===n?[]:n,t.onTokenRefresh=a,t}return(0,l.default)(P,[{key:"isRegistered",value:function(){return""!==this.oauthOptions.clientID}},{key:"snakeCaseOAuthData",value:function(e){var t={softwareID:"software_id",softwareVersion:"software_version",clientID:"client_id",clientName:"client_name",clientKind:"client_kind",clientURI:"client_uri",logoURI:"logo_uri",policyURI:"policy_uri",notificationPlatform:"notification_platform",notificationDeviceToken:"notification_device_token",redirectURI:"redirect_uris"},r={};return Object.keys(e).forEach(function(n){var a=t[n]||n,o=e[n];r[a]=o}),r.redirect_uris&&r.redirect_uris instanceof Array==!1&&(r.redirect_uris=[r.redirect_uris]),r}},{key:"camelCaseOAuthData",value:function(e){var t={client_id:"clientID",client_name:"clientName",client_secret:"clientSecret",registration_access_token:"registrationAccessToken",software_id:"softwareID",redirect_uris:"redirectURI"},r={};return Object.keys(e).forEach(function(n){var a=t[n]||n,o=e[n];r[a]=o}),r}},{key:"doRegistration",value:function(){return this.fetchJSON("POST","/auth/register",this.snakeCaseOAuthData({redirectURI:this.oauthOptions.redirectURI,clientName:this.oauthOptions.clientName,softwareID:this.oauthOptions.softwareID,clientKind:this.oauthOptions.clientKind,clientURI:this.oauthOptions.clientURI,logoURI:this.oauthOptions.logoURI,policyURI:this.oauthOptions.policyURI,softwareVersion:this.oauthOptions.softwareVersion,notificationPlatform:this.oauthOptions.notificationPlatform,notificationDeviceToken:this.oauthOptions.notificationDeviceToken}))}},{key:"register",value:(t=(0,i.default)(o.default.mark(function e(){var t,r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRegistered()){e.next=2;break}throw Error("Client already registered");case 2:if(t=["redirectURI"],r=Object.keys(this.oauthOptions),!((n=t.filter(function(e){return r[e]})).length>0)){e.next=7;break}throw Error("Can't register client : missing ".concat(n," fields"));case 7:return e.next=9,this.doRegistration();case 9:return a=e.sent,this.setOAuthOptions(w(w({},this.oauthOptions),{},{client_id:a.client_id,client_name:a.client_name,client_secret:a.client_secret,registration_access_token:a.registration_access_token,software_id:a.software_id})),e.abrupt("return",this.oauthOptions);case 12:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"unregister",value:(r=(0,i.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new x;case 2:return t=this.oauthOptions.clientID,this.oauthOptions.clientID="",e.abrupt("return",this.fetchJSON("DELETE","/auth/register/".concat(t),null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"fetchInformation",value:(n=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new x;case 2:return e.abrupt("return",this.fetchJSON("GET","/auth/register/".concat(this.oauthOptions.clientID),null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"updateInformation",value:(a=(0,i.default)(o.default.mark(function e(t){var r,n,a,i,u=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]&&u[1],this.isRegistered()){e.next=3;break}throw new x;case 3:return n={clientID:this.oauthOptions.clientID,clientName:this.oauthOptions.clientName,redirectURI:this.oauthOptions.redirectURI,softwareID:this.oauthOptions.softwareID},a=this.snakeCaseOAuthData(w(w({},n),t)),r&&(a.client_secret=this.oauthOptions.clientSecret),e.next=8,this.fetchJSON("PUT","/auth/register/".concat(this.oauthOptions.clientID),a,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}});case 8:return i=e.sent,this.setOAuthOptions(w(w({},a),i)),e.abrupt("return",this.oauthOptions);case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"generateStateCode",value:function(){var e;if("undefined"!=typeof window&&void 0!==window.crypto&&"function"==typeof window.crypto.getRandomValues)e=new Uint8Array(16),window.crypto.getRandomValues(e);else{e=Array(16);for(var t=0;t<e.length;t++)e[t]=Math.floor(255*Math.random())}return btoa(String.fromCharCode.apply(null,e)).replace(/=+$/,"").replace(/\//g,"_").replace(/\+/g,"-")}},{key:"getAuthCodeURL",value:function(e){var t=e.stateCode,r=e.scopes,n=void 0===r?this.scope:r,a=e.sessionCode,o=void 0===a?void 0:a,i=e.codeChallenge,u=void 0===i?void 0:i;if(!this.isRegistered())throw new x;var c={client_id:this.oauthOptions.clientID,redirect_uri:this.oauthOptions.redirectURI,state:t,response_type:"code",scope:n.join(" ")};return this.oauthOptions.registerToken&&(c=w(w({},c),{},{registerToken:this.oauthOptions.registerToken})),o&&(c=w(w({},c),{},{session_code:o})),u&&(c=w(w({},c),{},{code_challenge:u,code_challenge_method:"S256"})),"".concat(this.uri,"/auth/authorize?").concat(this.dataToQueryString(c))}},{key:"dataToQueryString",value:function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}},{key:"getAccessCodeFromURL",value:function(e,t){if(!t)throw Error("Missing state code");var r=new URL(e).searchParams,n=r.get("state"),a=r.get("access_code");if(t!==n)throw Error("Given state does not match url query state");return a}},{key:"fetchAccessToken",value:(u=(0,i.default)(o.default.mark(function e(t,r,n,a){var i,u,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isRegistered()&&!r)){e.next=2;break}throw new x;case 2:return u={grant_type:"authorization_code",code:t,client_id:(i=r||this.oauthOptions).clientID,client_secret:i.clientSecret},a&&(u=w(w({},u),{},{code_verifier:a})),e.next=7,this.fetchJSON("POST",(n||"")+"/auth/access_token",this.dataToQueryString(u),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:return c=e.sent,e.abrupt("return",new y.default(c));case 9:case"end":return e.stop()}},e,this)})),function(e,t,r,n){return u.apply(this,arguments)})},{key:"fetchKonnectorToken",value:(f=(0,i.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchJSON("POST","/auth/tokens/konnectors/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),Error('oAuthClient.fetchKonnectorToken(): Could not create a token for the konnector with slug "'.concat(t,'". \n\n').concat(e.t0));case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return f.apply(this,arguments)})},{key:"fetchSessionCode",value:(p=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchJSON("POST","/auth/session_code"));case 1:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"fetchSessionCodeWithPassword",value:(h=(0,i.default)(o.default.mark(function e(t){var r,n,a,i,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.passwordHash,a=void 0===(n=t.twoFactorToken)?void 0:n,u=void 0===(i=t.twoFactorPasscode)?void 0:i,e.abrupt("return",this.fetchJSON("POST","/auth/session_code",{passphrase:r,two_factor_token:a,two_factor_passcode:u}));case 2:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"loginFlagship",value:(b=(0,i.default)(o.default.mark(function e(t){var r,n,a,i,u,c,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===(r=t.emailVerifiedCode)?void 0:r,a=t.passwordHash,u=void 0===(i=t.twoFactorToken)?void 0:i,s=void 0===(c=t.twoFactorPasscode)?void 0:c,e.abrupt("return",this.fetchJSON("POST","/auth/login/flagship",{client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret,email_verified_code:n,passphrase:a,two_factor_token:u,two_factor_passcode:s}));case 2:case"end":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"refreshToken",value:(_=(0,i.default)(o.default.mark(function e(){var t,r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new x;case 2:if(this.token){e.next=4;break}throw Error("No token to refresh");case 4:return t={grant_type:"refresh_token",refresh_token:this.token.refreshToken,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},e.prev=5,e.next=8,this.fetchJSONWithCurrentToken("POST","/auth/access_token",this.dataToQueryString(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 8:return r=e.sent,n=new y.default(w({refresh_token:this.token.refreshToken},r)),this.setToken(n),this.onTokenRefresh&&"function"==typeof this.onTokenRefresh&&this.onTokenRefresh(n),e.abrupt("return",n);case 15:if(e.prev=15,e.t0=e.catch(5),!this.isRevocationError(e.t0)){e.next=21;break}throw this.onRevocationChange(!0),g.default.warn("Client has been revoked. Please authenticate again."),e.t0;case 21:if(!(m.default.EXPIRED_TOKEN.test(e.t0.message)||m.default.INVALID_TOKEN.test(e.t0.message)||m.default.INVALID_TOKEN_ALT.test(e.t0.message))){e.next=28;break}return e.next=24,this.checkForRevocation();case 24:if(!e.sent){e.next=28;break}throw g.default.warn("Client has been revoked. Please authenticate again."),e.t0;case 28:throw e.t0;case 29:case"end":return e.stop()}},e,this,[[5,15]])})),function(){return _.apply(this,arguments)})},{key:"exchangeOAuthSecret",value:function(e,t){return this.fetchJSON("POST",e+"/auth/secret_exchange",{secret:t})}},{key:"setToken",value:function(e){e?this.token=e instanceof y.default?e:new y.default(e):this.token=null}},{key:"setCredentials",value:function(e){return(0,v.default)("setCredentials is deprecated, please replace by setToken"),this.setToken(e)}},{key:"setOAuthOptions",value:function(e){this.oauthOptions=this.camelCaseOAuthData(e)}},{key:"resetClientId",value:function(){this.oauthOptions.clientID=""}},{key:"resetClient",value:function(){this.resetClientId(),this.setUri(null),this.setToken(null)}},{key:"registrationAccessTokenToAuthHeader",value:function(){if(!this.oauthOptions.registrationAccessToken)throw Error("No registration access token");return"Bearer "+this.oauthOptions.registrationAccessToken}},{key:"setPassphraseFlagship",value:function(e){var t=e.registerToken,r=e.passwordHash,n=e.hint,a=e.key,o=e.publicKey,i=e.privateKey,u=e.iterations;return this.fetchJSON("POST","/settings/passphrase/flagship",{register_token:t,passphrase:r,hint:n,key:a,public_key:o,private_key:i,iterations:u,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}})}},{key:"checkForRevocation",value:(S=(0,i.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchInformation();case 3:case 11:return e.abrupt("return",!1);case 6:if(e.prev=6,e.t0=e.catch(0),!this.isRevocationError(e.t0)){e.next=11;break}return this.onRevocationChange(!0),e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return S.apply(this,arguments)})}]),P}(h.default),x=function(e){(0,d.default)(r,e);var t=O(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Client not registered or missing OAuth information";return(0,s.default)(this,r),(e=t.call(this,n)).message=n,e.name="NotRegisteredException",e}return r}((0,a.default)(Error));t.default=_},54348:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OAUTH_CLIENTS_DOCTYPE=void 0;var o=a(r(68434)),i=a(r(64512)),u=a(r(41)),c=a(r(82007)),s=a(r(65105)),l=a(r(19723)),d=a(r(25665)),f=a(r(27952)),p=a(r(12323)),h=a(r(27361)),y=a(r(67267)),v=r(26070),m=r(66804),g=n(r(93726)),b=r(78140),w=r(45051);function O(){var e=(0,u.default)(["/settings/clients/",""]);return O=function(){return e},e}function k(){var e=(0,u.default)(["/settings/clients/",""]);return k=function(){return e},e}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(){var e=(0,u.default)(["/settings/clients"]);return S=function(){return e},e}var E="io.cozy.oauth.clients";t.OAUTH_CLIENTS_DOCTYPE=E;var P=(0,v.normalizeDoctypeJsonApi)(E),C=function(e){(0,d.default)(u,e);var t,r,n,a,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,p.default)(u);return e=t?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,e)});function u(e){return(0,s.default)(this,u),i.call(this,E,e)}return(0,l.default)(u,[{key:"all",value:(r=(0,c.default)(o.default.mark(function e(){var t,r,n,a,i,u,c,s,l,d,f,p,y,v,w=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===(r=(t=w.length>0&&void 0!==w[0]?w[0]:{}).limit)?100:r,a=t.bookmark,i=t.keys,u={"page[limit]":n,"page[cursor]":a},c=(0,m.uri)(S()),s=g.buildURL(c,u),e.prev=5,e.next=8,this.stackClient.fetchJSON("GET",s);case 8:l=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",(0,b.dontThrowNotFoundError)(e.t0));case 14:if(d=(0,h.default)(l,"links.next",""),p=void 0!==(f=new URL("".concat(this.stackClient.uri).concat(d)).searchParams.get("page[cursor]")||void 0),!i){e.next=24;break}return y=l.data.filter(function(e){return i.includes(e.id)}).map(function(e){return P(e)}),v=x(x({},l.meta),{},{count:y.length}),e.abrupt("return",{data:y,meta:v,next:i.length>y.length&&p,bookmark:f});case 24:return e.abrupt("return",{data:l.data.map(function(e){return P(e)}),meta:l.meta,next:p,bookmark:f});case 25:case"end":return e.stop()}},e,this,[[5,11]])})),function(){return r.apply(this,arguments)})},{key:"get",value:(n=(0,c.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all({keys:[t]});case 2:r=e.sent;case 3:if(!r.next){e.next=9;break}return e.next=6,this.all({keys:[t],bookmark:r.bookmark});case 6:r=e.sent,e.next=3;break;case 9:if(!r.data.length){e.next=13;break}return e.abrupt("return",{data:P(r.data[0])});case 13:throw r.url=(0,m.uri)(k(),t),r.status="404",new w.FetchError(r,"Not Found");case 16:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"destroy",value:(a=(0,c.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id,e.next=3,this.stackClient.fetchJSON("DELETE",(0,m.uri)(O(),r));case 3:return e.abrupt("return",{data:x(x({},P(t)),{},{_deleted:!0})});case 4:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})}]),u}(y.default);C.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=C},96302:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getPermissionsFor=void 0;var a=n(r(98235)),o=n(r(64512)),i=n(r(80295)),u=n(r(68434)),c=n(r(41)),s=n(r(82007)),l=n(r(65105)),d=n(r(19723)),f=n(r(25665)),p=n(r(27952)),h=n(r(12323)),y=n(r(67267)),v=r(26070),m=r(49129),g=r(66804),b=n(r(79271));function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(){var e=(0,c.default)(["/permissions/doctype/","/shared-by-link"]);return O=function(){return e},e}function k(){var e=(0,c.default)(["/permissions/",""]);return k=function(){return e},e}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(){var e=(0,c.default)(["/permissions/",""]);return S=function(){return e},e}var E=function(e){return(0,v.normalizeDoc)(e,"io.cozy.permissions")},P=function(e){(0,f.default)(D,e);var t,r,n,o,c,y,v,m,_,P,j,T,M=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,h.default)(D);return e=t?Reflect.construct(r,arguments,(0,h.default)(this).constructor):r.apply(this,arguments),(0,p.default)(this,e)});function D(){return(0,l.default)(this,D),M.apply(this,arguments)}return(0,d.default)(D,[{key:"get",value:(r=(0,s.default)(u.default.mark(function e(t){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,g.uri)(S(),t));case 2:return r=e.sent,e.abrupt("return",{data:E(r.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"create",value:(n=(0,s.default)(u.default.mark(function e(t){var r,n,a,o,c,s,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._id,t._type,n=void 0===(r=t.codes)?"code":r,a=t.ttl,o=t.tiny,c=(0,i.default)(t,["_id","_type","codes","ttl","tiny"]),(s=new URLSearchParams).append("codes",n),a&&s.append("ttl",a),o&&s.append("tiny",!0),e.next=7,this.stackClient.fetchJSON("POST","/permissions?".concat(s),{data:{type:"io.cozy.permissions",attributes:c}});case 7:return l=e.sent,e.abrupt("return",{data:E(l.data)});case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"add",value:(o=(0,s.default)(u.default.mark(function e(t,r){var n,a,o,i,c,s,l,d=arguments;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>2&&void 0!==d[2]?d[2]:{},e.t0=t._type,e.next="io.cozy.apps"===e.t0?4:"io.cozy.konnectors"===e.t0?6:"io.cozy.permissions"===e.t0?8:10;break;case 4:return a="/permissions/apps/".concat(t.slug),e.abrupt("break",11);case 6:return a="/permissions/konnectors/".concat(t.slug),e.abrupt("break",11);case 8:return a="/permissions/".concat(t._id),e.abrupt("break",11);case 10:throw Error("Permissions can only be added on existing permissions, apps and konnectors.");case 11:return o=n.expiresAt,c=(i=n.password)||""===i,s=o||""===o,e.next=16,this.stackClient.fetchJSON("PATCH",a,{data:{type:"io.cozy.permissions",attributes:x(x({permissions:r},c&&{password:i}),s&&{expires_at:o})}});case 16:return l=e.sent,e.abrupt("return",{data:E(l.data)});case 18:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"destroy",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,g.uri)(k(),e.id))}},{key:"findLinksByDoctype",value:(c=(0,s.default)(u.default.mark(function e(t){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,g.uri)(O(),t));case 2:return r=e.sent,e.abrupt("return",x(x({},r),{},{data:r.data.map(E)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"findApps",value:(y=(0,s.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.default.warn("PermissionCollection.findApps will be removed in next version of cozy-client. \n\n      You can use AppCollection.all() instead \n\n      or even better client.query(Q('io.cozy.apps'), {as: 'io.cozy.apps'})"),e.next=3,this.stackClient.fetchJSON("GET","/apps/");case 3:return t=e.sent,e.abrupt("return",x(x({},t),{},{data:t.data.map(function(e){return x({_id:e.id},e)})}));case 5:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"createSharingLink",value:(v=(0,s.default)(u.default.mark(function e(t){var r,n,a,o,i,c,s,l,d,f=arguments;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=f.length>1&&void 0!==f[1]?f[1]:{}).ttl,a=r.password,o=r.verbs,i=r.tiny,s=void 0===(c=r.codes)?"code":c,(l=new URLSearchParams).append("codes",s),n&&l.append("ttl",n),i&&l.append("tiny",!0),e.next=8,this.stackClient.fetchJSON("POST","/permissions?".concat(l),{data:{type:"io.cozy.permissions",attributes:x({permissions:C(t,!0,o?{verbs:o}:{})},a&&{password:a})}});case 8:return d=e.sent,e.abrupt("return",{data:E(d.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"fetchPermissionsByLink",value:(m=(0,s.default)(u.default.mark(function e(t){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.links&&t.links.next)){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET",t.links.next);case 3:return r=e.sent,e.abrupt("return",x(x({},r),{},{data:r.data.map(E)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"fetchAllLinks",value:(_=(0,s.default)(u.default.mark(function e(t){var r,n,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findLinksByDoctype(t._type);case 2:n=r=e.sent;case 4:if(!(n.links&&n.links.next)){e.next=11;break}return e.next=7,this.fetchPermissionsByLink(n);case 7:n=e.sent,(o=r.data).push.apply(o,(0,a.default)(n.data)),e.next=4;break;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}},e,this)})),function(e){return _.apply(this,arguments)})},{key:"revokeSharingLink",value:(P=(0,s.default)(u.default.mark(function e(t){var r,n,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLinks(t);case 2:r=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return w(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(e.sent.data.filter(function(e){return A(e,t)})),e.prev=5,r.s();case 7:if((n=r.n()).done){e.next=13;break}return a=n.value,e.next=11,this.destroy(a);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[5,15,18,21]])})),function(e){return P.apply(this,arguments)})},{key:"getOwnPermissions",value:(j=(0,s.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.default.warn("getOwnPermissions is deprecated, please use fetchOwnPermissions instead"),e.abrupt("return",this.fetchOwnPermissions());case 2:case"end":return e.stop()}},e,this)})),function(){return j.apply(this,arguments)})},{key:"fetchOwnPermissions",value:(T=(0,s.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/permissions/self");case 2:return t=e.sent,e.abrupt("return",{data:E(t.data),included:t.included?t.included.map(E):[]});case 4:case"end":return e.stop()}},e,this)})),function(){return T.apply(this,arguments)})}]),D}(y.default),C=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e._id,a=e._type,o=r.verbs?r.verbs:t?["GET"]:["ALL"];return(0,m.isFile)(e)?{files:{type:"io.cozy.files",verbs:o,values:[n]}}:{collection:{type:a,verbs:o,values:[n]},files:{type:"io.cozy.files",verbs:o,values:["".concat(a,"/").concat(n)],selector:"referenced_by"}}};t.getPermissionsFor=C;var A=function(e,t){var r=t._id;return(0,m.isFile)(t)?-1!==e.attributes.permissions.files.values.indexOf(r):-1!==e.attributes.permissions.collection.values.indexOf(r)};t.default=P},96727:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeSettings=t.SETTINGS_DOCTYPE=void 0;var a=n(r(41)),o=n(r(68434)),i=n(r(64512)),u=n(r(82007)),c=n(r(65105)),s=n(r(19723)),l=n(r(25665)),d=n(r(27952)),f=n(r(12323)),p=n(r(67267)),h=n(r(79271)),y=r(66804),v=r(26070);function m(){var e=(0,a.default)(["/data/","/",""]);return m=function(){return e},e}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var b="io.cozy.settings";t.SETTINGS_DOCTYPE=b;var w=(0,v.normalizeDoctypeJsonApi)(b);t.normalizeSettings=w;var O=function(e){(0,l.default)(v,e);var t,r,n,a,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(v);return e=t?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function v(e){return(0,c.default)(this,v),p.call(this,b,e)}return(0,s.default)(v,[{key:"get",value:(r=(0,u.default)(o.default.mark(function e(t){var r,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("io.cozy.settings.bitwarden"!==t){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET","/data/io.cozy.settings/io.cozy.settings.bitwarden");case 3:return r=e.sent,e.abrupt("return",{data:w(r)});case 5:return t.startsWith("io.cozy.settings.")?n=t.substring(17):(h.default.warn("Deprecated: in next versions of cozy-client, it will not be possible to query settings with an incomplete id\n\n- Q('io.cozy.settings').getById('instance')\n+ Q('io.cozy.settings').getById('io.cozy.settings.instance')"),n=t),e.next=8,this.stackClient.fetchJSON("GET","/settings/".concat(n));case 8:return a=e.sent,e.abrupt("return",{data:w(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({id:"/settings/".concat(n)},a.data))});case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"update",value:(n=(0,u.default)(o.default.mark(function e(t){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("io.cozy.settings.instance"!==t._id){e.next=6;break}return e.next=3,this.stackClient.fetchJSON("PUT","/settings/instance",{data:t});case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,this.stackClient.fetchJSON("PUT",(0,y.uri)(m(),this.doctype,t._id),t);case 8:r=e.sent;case 9:return e.abrupt("return",{data:w(r.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"updateLastSynced",value:(a=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetchJSON("POST","/settings/synchronized"));case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}]),v}(p.default);O.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=O},67207:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getSharingRules=t.BITWARDEN_CIPHERS_DOCTYPE=t.BITWARDEN_ORGANIZATIONS_DOCTYPE=t.SHARING_DOCTYPE=void 0;var a=n(r(68434)),o=n(r(64512)),i=n(r(41)),u=n(r(82007)),c=n(r(65105)),s=n(r(19723)),l=n(r(25665)),d=n(r(27952)),f=n(r(12323)),p=n(r(67267)),h=r(26070),y=r(49129),v=r(66804);function m(){var e=(0,i.default)(["/sharings/","/recipients"]);return m=function(){return e},e}function g(){var e=(0,i.default)(["/sharings/","/recipients/self"]);return g=function(){return e},e}function b(){var e=(0,i.default)(["/sharings/","/groups/",""]);return b=function(){return e},e}function w(){var e=(0,i.default)(["/sharings/","/recipients/",""]);return w=function(){return e},e}function O(){var e=(0,i.default)(["/sharings/","/recipients"]);return O=function(){return e},e}function k(){var e=(0,i.default)(["/sharings/",""]);return k=function(){return e},e}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(){var e=(0,i.default)(["/sharings/doctype/",""]);return S=function(){return e},e}var E="io.cozy.sharings";t.SHARING_DOCTYPE=E;var P="com.bitwarden.organizations";t.BITWARDEN_ORGANIZATIONS_DOCTYPE=P;var C="com.bitwarden.ciphers";t.BITWARDEN_CIPHERS_DOCTYPE=C;var A=(0,h.normalizeDoctypeJsonApi)(E),j=function(e){(0,l.default)(h,e);var t,r,n,o,i,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,f.default)(h);return e=t?Reflect.construct(r,arguments,(0,f.default)(this).constructor):r.apply(this,arguments),(0,d.default)(this,e)});function h(){return(0,c.default)(this,h),p.apply(this,arguments)}return(0,s.default)(h,[{key:"findByDoctype",value:(r=(0,u.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,v.uri)(S(),t));case 2:return r=e.sent,e.abrupt("return",x(x({},r),{},{data:r.data.map(A)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"get",value:(n=(0,u.default)(a.default.mark(function e(t){var r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,v.uri)(k(),t),e.next=3,this.stackClient.fetchJSON("GET",r);case 3:return n=e.sent,e.abrupt("return",{data:A(n.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"create",value:(o=(0,u.default)(a.default.mark(function e(t){var r,n,o,i,u,c,s,l,d,f,p,h,y,v;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.document,n=t.description,o=t.previewPath,i=t.rules,c=void 0===(u=t.recipients)?[]:u,l=void 0===(s=t.readOnlyRecipients)?[]:s,d=t.openSharing,f=t.appSlug,p=t.sharedDrive,h={description:n,preview_path:o,open_sharing:d,rules:i||T(r,{sharedDrive:p})},y={},f&&(y.app_slug=f),p&&(y.drive=p),e.next=7,this.stackClient.fetchJSON("POST","/sharings/",{data:{type:"io.cozy.sharings",attributes:x(x({},h),y),relationships:x(x({},c.length>0&&{recipients:{data:c.map(z)}}),l.length>0&&{read_only_recipients:{data:l.map(z)}})}});case 7:return v=e.sent,e.abrupt("return",{data:A(v.data)});case 9:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"getDiscoveryLink",value:function(e,t,r){var n=(r||{}).shortcut,a=new URLSearchParams;return a.append("sharecode",t),n&&a.append("shortcut",!0),this.stackClient.fullpath("/sharings/".concat(e,"/discovery?").concat(a))}},{key:"addRecipients",value:(i=(0,u.default)(a.default.mark(function e(t){var r,n,o,i,u,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.document,o=void 0===(n=t.recipients)?[]:n,u=void 0===(i=t.readOnlyRecipients)?[]:i,e.next=3,this.stackClient.fetchJSON("POST",(0,v.uri)(O(),r._id),{data:{type:"io.cozy.sharings",id:r._id,relationships:x(x({},o.length>0&&{recipients:{data:o.map(z)}}),u.length>0&&{read_only_recipients:{data:u.map(z)}})}});case 3:return c=e.sent,e.abrupt("return",{data:A(c.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"revokeRecipient",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(w(),e._id,t))}},{key:"revokeGroup",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(b(),e._id,t))}},{key:"revokeSelf",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(g(),e._id))}},{key:"revokeAllRecipients",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(m(),e._id))}}]),h}(p.default);j.normalizeDoctype=h.normalizeDoctypeJsonApi;var T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.sharedDrive?N(e):(0,y.isFile)(e)?I(e):e._type===P?L(e):M(e)};t.getSharingRules=T;var M=function(e){var t=e._id,r=e._type;return[x({title:"collection",doctype:r,values:[t]},R()),x({title:"items",doctype:"io.cozy.files",values:["".concat(r,"/").concat(t)],selector:"referenced_by"},D())]},D=function(){return{add:"sync",update:"sync",remove:"sync"}},R=function(){return{update:"sync",remove:"revoke"}},I=function(e){var t=e._id;return[x({title:e.name,doctype:"io.cozy.files",values:[t]},F(e))]},N=function(e){var t=e._id;return[{title:e.name,doctype:"io.cozy.files",values:[t],add:"none",update:"none",remove:"none"}]},F=function(e){return(0,y.isDirectory)(e)?{add:"sync",update:"sync",remove:"sync"}:{update:"sync",remove:"revoke"}},L=function(e){var t=e._id;return[{title:e.name,doctype:P,values:[t],add:"sync",update:"sync",remove:"revoke"},{title:"Ciphers",doctype:C,values:[t],add:"sync",update:"sync",remove:"sync",selector:"organization_id"}]},z=function(e){return{id:e._id,type:e._type}};t.default=j},86247:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SHORTCUTS_DOCTYPE=void 0;var a=n(r(68434)),o=n(r(41)),i=n(r(82007)),u=n(r(65105)),c=n(r(19723)),s=n(r(25665)),l=n(r(27952)),d=n(r(12323)),f=n(r(64512)),p=n(r(67267)),h=r(26070),y=r(66804),v=r(77069);function m(){var e=(0,o.default)(["/shortcuts/",""]);return m=function(){return e},e}function g(){var e=(0,o.default)(["/shortcuts"]);return g=function(){return e},e}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,f.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var O="io.cozy.files.shortcuts";t.SHORTCUTS_DOCTYPE=O;var k=(0,h.normalizeDoctypeJsonApi)(O),_=function(e){return w(w({},k(e)),{},{_id:e._id})},x=function(e){(0,s.default)(f,e);var t,r,n,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,d.default)(f);return e=t?Reflect.construct(r,arguments,(0,d.default)(this).constructor):r.apply(this,arguments),(0,l.default)(this,e)});function f(e){return(0,u.default)(this,f),o.call(this,O,e)}return(0,c.default)(f,[{key:"create",value:(r=(0,i.default)(a.default.mark(function e(t){var r,n,o,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type||(t.type=O),!(!t.name||!t.name.trim()||!t.url||!t.dir_id)){e.next=3;break}throw Error("you need at least a name, an url and a dir_id attributes to create a shortcut");case 3:if("."!==(r=t.name.trim())&&".."!==r){e.next=6;break}throw Error("Invalid filename: ".concat(r));case 6:if(!(n=(0,v.getIllegalCharacters)(r)).length){e.next=9;break}throw Error("Invalid filename containing illegal character(s): ".concat(n));case 9:return o=(0,y.uri)(g()),e.next=12,this.stackClient.fetchJSON("POST",o,{data:{attributes:t,type:"io.cozy.files.shortcuts"}});case 12:return i=e.sent,e.abrupt("return",{data:_(i.data)});case 14:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"get",value:(n=(0,i.default)(a.default.mark(function e(t){var r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,y.uri)(m(),t),e.next=3,this.stackClient.fetchJSON("GET",r);case 3:return n=e.sent,e.abrupt("return",{data:_(n.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),f}(p.default);x.normalizeDoctype=h.normalizeDoctypeJsonApi,t.default=x},54026:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isForAccount=t.isForKonnector=t.normalizeTrigger=t.TRIGGERS_DOCTYPE=t.JOBS_DOCTYPE=void 0;var o=a(r(80295)),i=a(r(64512)),u=a(r(41)),c=a(r(68434)),s=a(r(82007)),l=a(r(65105)),d=a(r(19723)),f=a(r(59655)),p=a(r(25665)),h=a(r(27952)),y=a(r(12323)),v=n(r(78140)),m=r(26070),g=r(54056),b=r(66804),w=a(r(67267));function O(){var e=(0,u.default)(["/jobs/triggers/","/launch"]);return O=function(){return e},e}function k(){var e=(0,u.default)(["/jobs/triggers/",""]);return k=function(){return e},e}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(){var e=(0,u.default)(["/jobs/triggers/",""]);return S=function(){return e},e}function E(){var e=(0,u.default)(["/jobs/triggers"]);return E=function(){return e},e}r(45051),t.JOBS_DOCTYPE="io.cozy.jobs";var P="io.cozy.triggers";t.TRIGGERS_DOCTYPE=P;var C=(0,m.normalizeDoctypeJsonApi)(P);t.normalizeTrigger=C,t.isForKonnector=function(e,t){return"konnector"===e.worker&&e.message.konnector==t},t.isForAccount=function(e,t){return e.message.account==t};var A=function(e,t){var r=new URLSearchParams;return e&&(Array.isArray(e.$in)?r.set("Worker",e.$in.join(",")):r.set("Worker",e)),t&&(Array.isArray(t.$in)?r.set("Type",t.$in.join(",")):r.set("Type",t)),r.toString()},j=function(e){(0,p.default)(j,e);var t,r,n,a,i,u,m,w,_=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,y.default)(j);return e=t?Reflect.construct(r,arguments,(0,y.default)(this).constructor):r.apply(this,arguments),(0,h.default)(this,e)});function j(e){return(0,l.default)(this,j),_.call(this,P,e)}return(0,d.default)(j,[{key:"all",value:(r=(0,s.default)(c.default.mark(function e(){var t,r=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]&&r[0],e.prev=1,e.next=4,this.stackClient.fetchJSON("GET","/jobs/triggers");case 4:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return C(e)}),meta:{count:t.data.length},next:!1,skip:0});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",(0,v.dontThrowNotFoundError)(e.t0));case 11:case"end":return e.stop()}},e,this,[[1,8]])})),function(){return r.apply(this,arguments)})},{key:"create",value:(n=(0,s.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,b.uri)(E()),e.next=3,this.stackClient.fetchJSON("POST",r,{data:{attributes:t}});case 3:return n=e.sent,e.abrupt("return",{data:C(n.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"destroy",value:(a=(0,s.default)(c.default.mark(function e(t){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t._id){e.next=3;break}throw Error("TriggerCollection.destroy needs a document with an _id");case 3:return e.next=5,this.stackClient.fetchJSON("DELETE",(0,b.uri)(S(),r));case 5:return e.abrupt("return",{data:C(x(x({},t),{},{_deleted:!0}))});case 6:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"find",value:(i=(0,s.default)(c.default.mark(function e(){var t,r,n,a,i,u,s=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=s.length>1&&void 0!==s[1]?s[1]:{},n=t.worker,a=t.type,!(0===Object.keys((0,o.default)(t,["worker","type"])).length&&!r.partialFilter)){e.next=18;break}return i="/jobs/triggers?".concat(A(n,a)),e.prev=6,e.next=9,this.stackClient.fetchJSON("GET",i);case 9:return u=e.sent,e.abrupt("return",{data:u.data.map(function(e){return C(e)}),meta:{count:u.data.length},next:!1,skip:0});case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",(0,v.dontThrowNotFoundError)(e.t0));case 16:e.next=19;break;case 18:return e.abrupt("return",(0,f.default)((0,y.default)(j.prototype),"find",this).call(this,t,r));case 19:case"end":return e.stop()}},e,this,[[6,13]])})),function(){return i.apply(this,arguments)})},{key:"get",value:(u=(0,s.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.default.get(this.stackClient,(0,b.uri)(k(),t),{normalize:C}));case 1:case"end":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"launch",value:(m=(0,s.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,b.uri)(O(),t._id),e.next=3,this.stackClient.fetchJSON("POST",r);case 3:return n=e.sent,e.abrupt("return",{data:(0,g.normalizeJob)(n.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"update",value:(w=(0,s.default)(c.default.mark(function e(t){var r,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=c.default.keys(t);case 1:if((e.t1=e.t0()).done){e.next=7;break}if(["_id","_rev","_type","arguments","message","cozyMetadata"].includes(e.t1.value)){e.next=5;break}throw Error("TriggerCollection.update only works for 'arguments', and 'message' attributes.");case 5:e.next=1;break;case 7:return r=x(x({},t.arguments?{arguments:t.arguments}:{}),t.message?{message:t.message}:{}),e.next=10,this.stackClient.fetchJSON("PATCH","/jobs/triggers/".concat(t._id),{data:{attributes:r}});case 10:return n=e.sent,e.abrupt("return",{data:C(n.data)});case 12:case"end":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)})}]),j}(w.default);j.normalizeDoctype=m.normalizeDoctypeJsonApi,t.default=j},45051:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.FetchError=t.default=void 0;var a=n(r(65105)),o=n(r(8997)),i=n(r(25665)),u=n(r(27952)),c=n(r(12323)),s=n(r(15500)),l=/the client must be registered/;t.default={EXPIRED_TOKEN:/Expired token/,CLIENT_NOT_FOUND:/Client not found/,INVALID_TOKEN:/Invalid JWT token/,INVALID_TOKEN_ALT:/Invalid token/,UNREGISTERED_CLIENT:l};var d=/invalid_token/,f=/access_token_expired/,p=function(e){var t,r=null===(t=e.headers)||void 0===t?void 0:t.get("www-authenticate");if(r){if(f.test(r))return"Expired token";if(d.test(r))return"Invalid token"}},h=function(e){(0,i.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(n);return e=t?Reflect.construct(r,arguments,(0,c.default)(this).constructor):r.apply(this,arguments),(0,u.default)(this,e)});function n(e,t){if((0,a.default)(this,n),u=r.call(this),null===(i=Error.captureStackTrace)||void 0===i||i.call(Error,(0,o.default)(u),u.constructor),u.name="FetchError",u.response=e,u.url=e.url,u.status=e.status,u.reason=t,null===t)throw Error("FetchError received a ".concat(e.status," error without a Response Body when calling ").concat(e.url));var i,u,c=p(e);return Object.defineProperty((0,o.default)(u),"message",{value:("string"==typeof t.error&&l.test(t.error)?t.error:void 0)||t.message||c||("string"==typeof t?t:JSON.stringify(t))}),u}return n}((0,s.default)(Error));t.FetchError=h},79954:function(e,t,r){"use strict";var n,a,o=r(14746),i=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getIconURL=t.default=t._getIconURL=void 0;var u=i(r(68434)),c=i(r(82007));r(79312);var s=o(r(23355));function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e,t,r,n){if(!r)throw Error("Cannot fetch icon: missing domain");var a=f(e,t,r,n);if(!a)throw Error("Cannot get icon source for app ".concat(e.name));return a},f=function(e,t,r,n){var a=e&&e.links&&e.links.icon||p(e,t);return a?"".concat(n,"//").concat(r).concat(a):null},p=function(e,t){return t?"/registry/".concat(t,"/icon"):e&&e.latest_version&&e.latest_version.version&&"/registry/".concat(e.slug,"/").concat(e.latest_version.version,"/icon")},h={gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},y=function(e){if(!e.icon)throw Error("".concat(e.name,": Cannot detect icon mime type since app has no icon"));var t=e.icon.split(".").pop();if(!t)throw Error("".concat(e.name,": Unable to detect icon mime type from extension (").concat(e.icon,")"));return t},v=(n=(0,c.default)(u.default.mark(function e(t,r){var n,a,o,i,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}}(e))){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,i=!0,u=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==a.return||a.return()}finally{if(u)throw o}}}}(t),e.prev=1,a.s();case 3:if((o=a.n()).done){e.next=18;break}return i=o.value,e.prev=5,e.next=8,i();case 8:return c=e.sent,r&&r(c),e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(5),n=e.t0;case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),a.e(e.t1);case 23:return e.prev=23,a.f(),e.finish(23);case 26:throw n;case 27:case"end":return e.stop()}},e,null,[[1,20,23,26],[5,13]])})),function(e,t){return n.apply(this,arguments)}),m=(a=(0,c.default)(u.default.mark(function e(t,r){var n,a,o,i,c,s,l,f,p,m,g,b,w,O;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.type,a=r.slug,o=r.appData,c=void 0===(i=r.priority)?"stack":i,!t.oauthOptions){e.next=29;break}return s=[function(){return t.fetch("GET","/".concat(n,"s/").concat(a,"/icon"))},function(){return t.fetch("GET","/registry/".concat(a,"/icon"))}],"registry"===c&&s.reverse(),e.next=6,v(s,function(e){if(!e.ok)throw Error("Error while fetching icon ".concat(e.statusText))});case 6:return l=e.sent,e.next=9,l.blob();case 9:if((f=e.sent).type){e.next=26;break}if(m=[function(){var e,r;return e=n,r=a,t.fetchJSON("GET","/".concat(e,"s/").concat(r)).then(function(e){return e.data.attributes})},function(){var e;return e=a,t.fetchJSON("GET","/registry/".concat(e)).then(function(e){return e.latest_version.manifest})}],"registry"===c&&m.reverse(),e.t1=o,e.t1){e.next=18;break}return e.next=17,v(m);case 17:e.t1=e.sent;case 18:if(e.t0=e.t1,e.t0){e.next=21;break}e.t0={};case 21:if(h[g=y(p=e.t0)]){e.next=25;break}throw Error('Unknown image extension "'.concat(g,'" for app ').concat(p.name));case 25:f=new Blob([f],{type:h[g]});case 26:return e.abrupt("return",URL.createObjectURL(f));case 29:return e.prev=29,w=(b=new URL(t.uri)).host,O=b.protocol,e.abrupt("return",d(o,a,w,O));case 34:throw e.prev=34,e.t2=e.catch(29),Error("Cannot fetch icon: invalid stackClient.uri: ".concat(e.t2.message));case 37:case"end":return e.stop()}},e,null,[[29,34]])})),function(e,t){return a.apply(this,arguments)});t._getIconURL=m;var g=function(){return m.apply(this,arguments).catch(function(){return new s.ErrorReturned})};t.getIconURL=g;var b=(0,s.default)(g,{maxDuration:3e5,key:function(e,t){var r=t.type,n=t.slug,a=t.priority;return e.uri+NaN+r+":"+n+":"+a}});t.default=b},77069:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIllegalCharacters=void 0,t.getIllegalCharacters=function(e){var t=e.match(/\/|\x00|\n|\r/g);return t?t.join(" "):""}},60359:function(e,t,r){"use strict";var n=r(14746),a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"OAuthClient",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"errors",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"FetchError",{enumerable:!0,get:function(){return u.FetchError}}),Object.defineProperty(t,"normalizeDoc",{enumerable:!0,get:function(){return c.normalizeDoc}});var o=a(r(29328)),i=a(r(29985)),u=n(r(45051)),c=r(26070)},66605:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(79271));t.default=function(){a.default.warn.apply(a.default,arguments)}},79271:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(60732)),o=(0,a.default)("cozy-stack-client");a.default.suggest.deny("cozy-stack-client","info"),t.default=o},35946:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.makeOperatorsExplicit=t.isMatchingIndex=t.getIndexFields=t.transformSort=t.getIndexNameFromFields=t.makeKeyFromPartialFilter=t.normalizeDesignDoc=void 0;var a=n(r(98235)),o=n(r(90402)),i=n(r(64512)),u=n(r(91175)),c=n(r(27361)),s=n(r(18446)),l=n(r(13218));function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}t.normalizeDesignDoc=function(e){var t=e._id||e.id;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({id:t,_id:t},e.doc)};var f=function e(t){return"object"!=typeof t||null===t?String(t):Object.entries(t).map(function(t){var r=(0,o.default)(t,2),n=r[0],a=r[1];return Array.isArray(a)&&a.every(function(e){return"string"==typeof e})?"".concat(n,"_(").concat(a.join("_"),")"):Array.isArray(a)?"(".concat(a.map(function(t){return"".concat(e(t))}).join(")_".concat(n,"_(")),")"):"object"==typeof a?"".concat(n,"_").concat(e(a)):"".concat(n,"_").concat(a)}).join(")_and_(")};t.makeKeyFromPartialFilter=f,t.getIndexNameFromFields=function(e,t){var r="by_".concat(e.join("_and_"));return t?"".concat(r,"_filter_(").concat(f(t),")"):r},t.transformSort=function(e){if(!e||Array.isArray(e))return e;throw Error('Passing an object to the "sort" is not supported')},t.getIndexFields=function(e){var t=e.selector,r=e.partialFilter,n=e.sort;return Array.from(new Set([].concat((0,a.default)((void 0===n?[]:n).map(function(e){return(0,u.default)(Object.keys(e))})),(0,a.default)(t?Object.keys(t):[]),(0,a.default)(r?Object.keys(r):[]))))},t.isMatchingIndex=function(e,t,r){var n=Object.keys((0,c.default)(e,"views"))[0],a=Object.keys((0,c.default)(e,"views.".concat(n,".map.fields")));if((0,s.default)(a,t)){var o=(0,c.default)(e,"views.".concat(n,".map.partial_filter_selector"));if(!r&&!o)return!0;var i=p(null!=r?r:{});if((0,s.default)(i,o))return!0}return!1};var p=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.entries(t).reduce(function(t,n){var a,u=(0,o.default)(n,2),c=u[0],s=u[1];return"$nor"===c?t.$and=s.map(function(e){return Object.entries(e).reduce(function(e,t){var r=(0,o.default)(t,2),n=r[0],a=r[1];return"string"==typeof a?e[n]={$ne:a}:e[n]=p(a,!0),e},{})}).sort(h):null!==(a=s.$or)&&void 0!==a&&a.every(function(e){return"string"==typeof e})?t.$or=s.$or.map(function(t){return e((0,i.default)({},c,t),r)}).sort(h):Array.isArray(s)&&s.every(l.default)?t[c]=s.map(function(t){return e(t,r)}).sort(h):(0,l.default)(s)&&!Array.isArray(s)?t[c]=e(s,r):r&&"$eq"===c?t.$ne=s:c.startsWith("$")?t[c]=s:t[c]={$eq:s},t},{}),a=Object.keys(n).sort();return 1===a.length?n:{$and:a.map(function(e){return(0,i.default)({},e,n[e])})}};t.makeOperatorsExplicit=p;var h=function(e,t){var r=Object.keys(e)[0],n=Object.keys(t)[0];return r.localeCompare(n)}},23355:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReturned=t.default=void 0;var a=n(r(65105)),o=n(r(25665)),i=n(r(27952)),u=n(r(12323)),c=function(e){(0,o.default)(n,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(n);return e=t?Reflect.construct(r,arguments,(0,u.default)(this).constructor):r.apply(this,arguments),(0,i.default)(this,e)});function n(){return(0,a.default)(this,n),r.apply(this,arguments)}return n}((0,n(r(15500)).default)(String));t.ErrorReturned=c;var s=function(e,t){for(var r=Date.now(),n=0,a=Object.keys(e);n<a.length;n++){var o=a[n];r-e[o].date>t&&delete e[o]}};t.default=function(e,t){var r={};return function(){var n=t.key.apply(null,arguments);s(r,t.maxDuration);var a=r[n];if(a)return a.result;var o=e.apply(this,arguments);return r[n]={result:o,date:Date.now()},"object"==typeof o&&"function"==typeof o.then&&o.then(function(e){e instanceof c&&delete r[n]}).catch(function(e){delete r[n]}),o}}},26070:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeDoc=u,t.normalizeDoctypeJsonApi=function(e){return function(t,r){var n=u(t,e);return i(i({},n),n.attributes||{})}},t.normalizeDoctypeRawApi=function(e){return function(t,r){var n=u(r,e);return i(i({},n),n.attributes||{})}};var a=n(r(64512));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e._id||e.id;return i({id:r,_id:r,_type:t},e)}},20368:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(68434)),o=n(r(82007)),i=n(r(65105)),u=n(r(19723)),c=function(){var e;function t(){(0,i.default)(this,t),this.pending={}}return(0,u.default)(t,[{key:"exec",value:(e=(0,o.default)(a.default.mark(function e(t,r){var n,o,i,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r(),(o=this.pending[n])?i=o:(i=t(),this.pending[n]=i),e.prev=3,e.next=6,i;case 6:return u=e.sent,e.abrupt("return",u);case 8:return e.prev=8,this.pending[n]=null,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(t,r){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=e(),r=this.pending[t];return r||null}}]),t}();t.default=c},93726:function(e,t,r){"use strict";var n=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.buildURL=t.encode=void 0;var a=n(r(90402)),o=n(r(35937)),i=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(t)?"["+t.map(function(t){return e(t,!0)}).join(",")+"]":r?encodeURIComponent('"'.concat(t,'"')):encodeURIComponent(t)},u=function(e){return Object.entries(e).map(function(e){var t=(0,a.default)(e,2),r=t[0],n=i(t[1]);return"".concat(r,"=").concat(n)}).join("&")};t.encode=u,t.buildURL=function(e,t){var r=u((0,o.default)(t));return r?"".concat(e,"?").concat(r):e}},79312:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={}},66804:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinPath=function(e,t){return"".concat(e).concat(e.endsWith("/")?"":"/").concat(t)},t.encodePath=t.forceDownload=t.formatBytes=t.slugify=t.sleep=t.attempt=t.uri=void 0,t.uri=function(e){for(var t=[e[0]],r=0;r<(arguments.length<=1?0:arguments.length-1);r++)t.push(encodeURIComponent(r+1<1||arguments.length<=r+1?void 0:arguments[r+1])+e[r+1]);return t.join("")},t.attempt=function(e){return e.then(function(){return!0}).catch(function(){return!1})},t.sleep=function(e,t){return new Promise(function(r){setTimeout(r,e,t)})},t.slugify=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},t.formatBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]},t.forceDownload=function(e,t){var r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},t.encodePath=function(e){return e.split("/").map(function(e){return encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29")}).join("/")}},38558:function(e,t,r){"use strict";var n,a=r(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldXMLHTTPRequestBeUsed=t.fetchWithXMLHttpRequest=void 0;var o=a(r(68434)),i=a(r(90402)),u=a(r(82007)),c=a(r(88306)),s=(n=(0,u.default)(o.default.mark(function e(t,r){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,n){var a=new XMLHttpRequest;r.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",r.onUploadProgress,!1),a.onload=function(){4==this.readyState?e(this):n(this)},a.onerror=function(e){n(e)},a.open(r.method,t,!0),a.withCredentials=!0;for(var o=0,u=Object.entries(r.headers);o<u.length;o++){var c=(0,i.default)(u[o],2),s=c[0],l=c[1];a.setRequestHeader(s,l)}a.send(r.body)});case 2:return n=e.sent,e.abrupt("return",{headers:new Headers(n.getAllResponseHeaders().split("\r\n").map(function(e){return e.split(":",2)}).filter(function(e){return 2==e.length})),ok:n.status>=200&&n.status<300,text:function(){var e=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.responseText);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),json:function(){var e=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(n.responseText));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),status:n.status,statusText:n.statusText});case 4:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});t.fetchWithXMLHttpRequest=s;var l=(0,c.default)(function(){var e=new XMLHttpRequest;return"onload"in e&&"onprogress"in e});t.shouldXMLHTTPRequestBeUsed=function(e,t,r){return!!r.onUploadProgress&&l()}},62831:function(e,t,r){"use strict";var n=r(42124),a=r(21924),o=n("%TypeError%"),i=r(84490),u=r(12125),c=r(61131),s=r(72308),l=r(76333),d=r(17147),f=r(7681),p=r(29981),h=a("String.prototype.split"),y=Object("a"),v="a"!==y[0]||!(0 in y);e.exports=function(e){var t,r=d(this),n=v&&p(this)?h(this,""):r,a=l(n);if(!s(e))throw new o("Array.prototype.forEach callback must be a function");arguments.length>1&&(t=arguments[1]);for(var y=0;y<a;){var m=f(y);c(n,m)&&i(e,t,[u(n,m),y,n]),y+=1}}},28554:function(e,t,r){"use strict";var n=r(83739),a=r(55559),o=r(21924),i=r(80891),u=r(62831),c=r(52750),s=c(),l=r(23495),d=o("Array.prototype.slice"),f=a.apply(s),p=function(e,t){return i(e),f(e,d(arguments,1))};n(p,{getPolyfill:c,implementation:u,shim:l}),e.exports=p},52750:function(e,t,r){"use strict";var n=r(72868),a=r(62831);e.exports=function(){var e=Array.prototype.forEach;return n(e)?e:a}},23495:function(e,t,r){"use strict";var n=r(83739),a=r(52750);e.exports=function(){var e=a();return n(Array.prototype,{forEach:e},{forEach:function(){return Array.prototype.forEach!==e}}),e}},83739:function(e,t,r){"use strict";var n=r(82215),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,i=Array.prototype.concat,u=Object.defineProperty,c=r(31044)(),s=u&&c,l=function(e,t,r,n){if(t in e){if(!0===n){if(e[t]===r)return}else{if("function"!=typeof n||"[object Function]"!==o.call(n)||!n())return}}s?u(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},d=function(e,t){var r=arguments.length>2?arguments[2]:{},o=n(t);a&&(o=i.call(o,Object.getOwnPropertySymbols(t)));for(var u=0;u<o.length;u+=1)l(e,o[u],t[o[u]],r[o[u]])};d.supportsDescriptors=!!s,e.exports=d},40657:function(e,t,r){"use strict";var n=r(82215),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,i=Array.prototype.concat,u=Object.defineProperty,c=r(31044)(),s=u&&c,l=function(e,t,r,n){(!(t in e)||"function"==typeof n&&"[object Function]"===o.call(n)&&n())&&(s?u(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},d=function(e,t){var r=arguments.length>2?arguments[2]:{},o=n(t);a&&(o=i.call(o,Object.getOwnPropertySymbols(t)));for(var u=0;u<o.length;u+=1)l(e,o[u],t[o[u]],r[o[u]])};d.supportsDescriptors=!!s,e.exports=d},38882:function(e,t,r){"use strict";var n,a=SyntaxError,o=Function,i=TypeError,u=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var s=function(){throw new i},l=c?function(){try{return arguments.callee,s}catch(e){try{return c(arguments,"callee").get}catch(e){return s}}}():s,d=r(41405)(),f=Object.getPrototypeOf||function(e){return e.__proto__},p={},h="undefined"==typeof Uint8Array?n:f(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":d?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?f(f([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?f(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?f(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?f(""[Symbol.iterator]()):n,"%Symbol%":d?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":l,"%TypedArray%":h,"%TypeError%":i,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},v=function e(t){var r;if("%AsyncFunction%"===t)r=u("async function () {}");else if("%GeneratorFunction%"===t)r=u("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=u("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(r=f(a.prototype))}return y[t]=r,r},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},g=r(58612),b=r(17642),w=g.call(Function.call,Array.prototype.concat),O=g.call(Function.apply,Array.prototype.splice),k=g.call(Function.call,String.prototype.replace),_=g.call(Function.call,String.prototype.slice),x=g.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,P=function(e){var t=_(e,0,1),r=_(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return k(e,S,function(e,t,r,a){n[n.length]=r?k(a,E,"$1"):t||e}),n},C=function(e,t){var r,n=e;if(b(m,n)&&(n="%"+(r=m[n])[0]+"%"),b(y,n)){var o=y[n];if(o===p&&(o=v(n)),void 0===o&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new i('"allowMissing" argument must be a boolean');if(null===x(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=P(e),n=r.length>0?r[0]:"",o=C("%"+n+"%",t),u=o.name,s=o.value,l=!1,d=o.alias;d&&(n=d[0],O(r,w([0,1],d)));for(var f=1,p=!0;f<r.length;f+=1){var h=r[f],v=_(h,0,1),m=_(h,-1);if(('"'===v||"'"===v||"`"===v||'"'===m||"'"===m||"`"===m)&&v!==m)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&p||(l=!0),n+="."+h,b(y,u="%"+n+"%"))s=y[u];else if(null!=s){if(!(h in s)){if(!t)throw new i("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&f+1>=r.length){var g=c(s,h);s=(p=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:s[h]}else p=b(s,h),s=s[h];p&&!l&&(y[u]=s)}}return s}},10860:function(e,t,r){"use strict";var n=r(88996),a=r(61189),o=r(21924)("String.prototype.replace"),i=/^\s$/.test("᠎"),u=i?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,c=i?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){return o(o(a(n(this)),u,""),c,"")}},14238:function(e,t,r){"use strict";var n=r(55559),a=r(40657),o=r(88996),i=r(10860),u=r(15126),c=r(34916),s=n(u()),l=function(e){return o(e),s(e)};a(l,{getPolyfill:u,implementation:i,shim:c}),e.exports=l},15126:function(e,t,r){"use strict";var n=r(10860);e.exports=function(){return String.prototype.trim&&"​"==="​".trim()&&"᠎"==="᠎".trim()&&"_᠎"==="_᠎".trim()&&"᠎_"==="᠎_".trim()?String.prototype.trim:n}},34916:function(e,t,r){"use strict";var n=r(40657),a=r(15126);e.exports=function(){var e=a();return n(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},42124:function(e,t,r){"use strict";var n,a=SyntaxError,o=Function,i=TypeError,u=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var s=function(){throw new i},l=c?function(){try{return arguments.callee,s}catch(e){try{return c(arguments,"callee").get}catch(e){return s}}}():s,d=r(41405)(),f=r(28185)(),p=Object.getPrototypeOf||(f?function(e){return e.__proto__}:null),h={},y="undefined"!=typeof Uint8Array&&p?p(Uint8Array):n,v={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":d&&p?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d&&p?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d&&p?p(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d&&p?p(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d&&p?p(""[Symbol.iterator]()):n,"%Symbol%":d?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":l,"%TypedArray%":y,"%TypeError%":i,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet};if(p)try{null.error}catch(e){var m=p(p(e));v["%Error.prototype%"]=m}var g=function e(t){var r;if("%AsyncFunction%"===t)r=u("async function () {}");else if("%GeneratorFunction%"===t)r=u("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=u("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&p&&(r=p(a.prototype))}return v[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=r(58612),O=r(17642),k=w.call(Function.call,Array.prototype.concat),_=w.call(Function.apply,Array.prototype.splice),x=w.call(Function.call,String.prototype.replace),S=w.call(Function.call,String.prototype.slice),E=w.call(Function.call,RegExp.prototype.exec),P=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,A=function(e){var t=S(e,0,1),r=S(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return x(e,P,function(e,t,r,a){n[n.length]=r?x(a,C,"$1"):t||e}),n},j=function(e,t){var r,n=e;if(O(b,n)&&(n="%"+(r=b[n])[0]+"%"),O(v,n)){var o=v[n];if(o===h&&(o=g(n)),void 0===o&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new i('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=A(e),n=r.length>0?r[0]:"",o=j("%"+n+"%",t),u=o.name,s=o.value,l=!1,d=o.alias;d&&(n=d[0],_(r,k([0,1],d)));for(var f=1,p=!0;f<r.length;f+=1){var h=r[f],y=S(h,0,1),m=S(h,-1);if(('"'===y||"'"===y||"`"===y||'"'===m||"'"===m||"`"===m)&&y!==m)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&p||(l=!0),n+="."+h,O(v,u="%"+n+"%"))s=v[u];else if(null!=s){if(!(h in s)){if(!t)throw new i("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&f+1>=r.length){var g=c(s,h);s=(p=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:s[h]}else p=O(s,h),s=s[h];p&&!l&&(v[u]=s)}}return s}},58622:function(e,t,r){"use strict";var n,a=r(28554),o=r(23631),i=r(42473),u=r(17642),c=r(77784),s=function(e){i(!1,e)},l=String.prototype.replace,d=String.prototype.split,f="||||",p=function(e){var t=e%100,r=t%10;return 11!==t&&1===r?0:2<=r&&r<=4&&!(t>=12&&t<=14)?1:2},h={pluralTypes:{arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:p,chinese:function(){return 0},croatian:p,french:function(e){return+(e>=2)},german:function(e){return+(1!==e)},russian:p,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return+(e%10!=1||e%100==11)},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3},romanian:function(e){if(1===e)return 0;var t=e%100;return 0===e||t>=2&&t<=19?1:2}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"]}};function y(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var v=(n={},function(e,t){var r,i,u,c=n[t];return c&&!e.pluralTypes[c]&&(c=null,n[t]=c),!c&&(c=(r=e.pluralTypeToLanguages,i={},a(o(r),function(e){var t=e[0];a(e[1],function(e){i[e]=t})}),u=i)[t]||u[d.call(t,/-/,1)[0]]||u.en)&&(n[t]=c),c}),m=/%\{(.*?)\}/g;function g(e,t,r,n,a,o){if("string"!=typeof e)throw TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var i=e,s=o||l,p="number"==typeof t?{smart_count:t}:t;if(null!=p.smart_count&&e){var y,g=a||h,b=d.call(e,f),w=v(g,r||"en");i=c(b[y=p.smart_count,g.pluralTypes[w](y)]||b[0])}return s.call(i,n||m,function(e,t){return u(p,t)&&null!=p[t]?p[t]:e})}function b(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var r=t.allowMissing?g:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:r,this.warn=t.warn||s,this.replaceImplementation=t.replace||l,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",r=e&&e.suffix||"}";if(t===f||r===f)throw RangeError('"'+f+'" token is reserved for pluralization');return RegExp(y(t)+"(.*?)"+y(r),"g")}(t.interpolation),this.pluralRules=t.pluralRules||h}b.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},b.prototype.extend=function(e,t){a(o(e||{}),function(e){var r=e[0],n=e[1],a=t?t+"."+r:r;"object"==typeof n?this.extend(n,a):this.phrases[a]=n},this)},b.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:a(o(e||{}),function(e){var r=e[0],n=e[1],a=t?t+"."+r:r;"object"==typeof n?this.unset(n,a):delete this.phrases[a]},this)},b.prototype.clear=function(){this.phrases={}},b.prototype.replace=function(e){this.clear(),this.extend(e)},b.prototype.t=function(e,t){var r,n,a=null==t?{}:t;return"string"==typeof this.phrases[e]?r=this.phrases[e]:"string"==typeof a._?r=a._:this.onMissingKey?n=(0,this.onMissingKey)(e,a,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation):(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof r&&(n=g(r,a,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),n},b.prototype.has=function(e){return u(this.phrases,e)},b.transformPhrase=function(e,t,r){return g(e,t,r)},e.exports=b},83774:function(e,t,r){var n="function"==typeof Map&&Map.prototype,a=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&a&&"function"==typeof a.get?a.get:null,i=n&&Map.prototype.forEach,u="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&u?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=u&&c&&"function"==typeof c.get?c.get:null,l=u&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,y=Object.prototype.toString,v=Function.prototype.toString,m=String.prototype.match,g=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,O=String.prototype.toLowerCase,k=RegExp.prototype.test,_=Array.prototype.concat,x=Array.prototype.join,S=Array.prototype.slice,E=Math.floor,P="function"==typeof BigInt?BigInt.prototype.valueOf:null,C=Object.getOwnPropertySymbols,A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,j="function"==typeof Symbol&&"object"==typeof Symbol.iterator,T="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===j?"object":"symbol")?Symbol.toStringTag:null,M=Object.prototype.propertyIsEnumerable,D=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function R(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||k.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-E(-e):E(e);if(n!==e){var a=String(n),o=g.call(t,a.length+1);return b.call(a,r,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var I=r(14061),N=I.custom,F=U(N)?N:null;function L(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function z(e){return"[object Array]"===Z(e)&&(!T||!("object"==typeof e&&T in e))}function B(e){return"[object RegExp]"===Z(e)&&(!T||!("object"==typeof e&&T in e))}function U(e){if(j)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!A)return!1;try{return A.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,a){var u,c,y,w,k,E=r||{};if(G(E,"quoteStyle")&&"single"!==E.quoteStyle&&"double"!==E.quoteStyle)throw TypeError('option "quoteStyle" must be "single" or "double"');if(G(E,"maxStringLength")&&("number"==typeof E.maxStringLength?E.maxStringLength<0&&E.maxStringLength!==1/0:null!==E.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var C=!G(E,"customInspect")||E.customInspect;if("boolean"!=typeof C&&"symbol"!==C)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(E,"indent")&&null!==E.indent&&"	"!==E.indent&&!(parseInt(E.indent,10)===E.indent&&E.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(E,"numericSeparator")&&"boolean"!=typeof E.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var N=E.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,r){if(t.length>r.maxStringLength){var n=t.length-r.maxStringLength;return e(g.call(t,0,r.maxStringLength),r)+("... "+n)+" more character"+(n>1?"s":"")}return L(b.call(b.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,q),"single",r)}(t,E);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var H=String(t);return N?R(t,H):H}if("bigint"==typeof t){var $=String(t)+"n";return N?R(t,$):$}var X=void 0===E.depth?5:E.depth;if(void 0===n&&(n=0),n>=X&&X>0&&"object"==typeof t)return z(t)?"[Array]":"[Object]";var ee=function(e,t){var r;if("	"===e.indent)r="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;r=x.call(Array(e.indent+1)," ")}return{base:r,prev:x.call(Array(t+1),r)}}(E,n);if(void 0===a)a=[];else if(W(a,t)>=0)return"[Circular]";function et(t,r,o){if(r&&(a=S.call(a)).push(r),o){var i={depth:E.depth};return G(E,"quoteStyle")&&(i.quoteStyle=E.quoteStyle),e(t,i,n+1,a)}return e(t,E,n+1,a)}if("function"==typeof t&&!B(t)){var er=function(e){if(e.name)return e.name;var t=m.call(v.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),en=K(t,et);return"[Function"+(er?": "+er:" (anonymous)")+"]"+(en.length>0?" { "+x.call(en,", ")+" }":"")}if(U(t)){var ea=j?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):A.call(t);return"object"!=typeof t||j?ea:V(ea)}if((eo=t)&&"object"==typeof eo&&("undefined"!=typeof HTMLElement&&eo instanceof HTMLElement||"string"==typeof eo.nodeName&&"function"==typeof eo.getAttribute)){for(var eo,ei,eu="<"+O.call(String(t.nodeName)),ec=t.attributes||[],es=0;es<ec.length;es++){eu+=" "+ec[es].name+"="+L((ei=ec[es].value,b.call(String(ei),/"/g,"&quot;")),"double",E)}return eu+=">",t.childNodes&&t.childNodes.length&&(eu+="..."),eu+="</"+O.call(String(t.nodeName))+">"}if(z(t)){if(0===t.length)return"[]";var el=K(t,et);return ee&&!function(e){for(var t=0;t<e.length;t++)if(W(e[t],"\n")>=0)return!1;return!0}(el)?"["+Y(el,ee)+"]":"[ "+x.call(el,", ")+" ]"}if("[object Error]"===Z(u=t)&&(!T||!("object"==typeof u&&T in u))){var ed=K(t,et);return"cause"in Error.prototype||!("cause"in t)||M.call(t,"cause")?0===ed.length?"["+String(t)+"]":"{ ["+String(t)+"] "+x.call(ed,", ")+" }":"{ ["+String(t)+"] "+x.call(_.call("[cause]: "+et(t.cause),ed),", ")+" }"}if("object"==typeof t&&C){if(F&&"function"==typeof t[F]&&I)return I(t,{depth:X-n});if("symbol"!==C&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ef=[];return i&&i.call(t,function(e,r){ef.push(et(r,t,!0)+" => "+et(e,t))}),J("Map",o.call(t),ef,ee)}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ep=[];return l&&l.call(t,function(e){ep.push(et(e,t))}),J("Set",s.call(t),ep,ee)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Q("WeakMap");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Q("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Q("WeakRef");if("[object Number]"===Z(c=t)&&(!T||!("object"==typeof c&&T in c)))return V(et(Number(t)));if(function(e){if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}(t))return V(et(P.call(t)));if("[object Boolean]"===Z(y=t)&&(!T||!("object"==typeof y&&T in y)))return V(h.call(t));if("[object String]"===Z(w=t)&&(!T||!("object"==typeof w&&T in w)))return V(et(String(t)));if(!("[object Date]"===Z(k=t)&&(!T||!("object"==typeof k&&T in k)))&&!B(t)){var eh=K(t,et),ey=D?D(t)===Object.prototype:t instanceof Object||t.constructor===Object,ev=t instanceof Object?"":"null prototype",em=!ey&&T&&Object(t)===t&&T in t?g.call(Z(t),8,-1):ev?"Object":"",eg=(ey||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(em||ev?"["+x.call(_.call([],em||[],ev||[]),": ")+"] ":"");return 0===eh.length?eg+"{}":ee?eg+"{"+Y(eh,ee)+"}":eg+"{ "+x.call(eh,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return H.call(e,t)}function Z(e){return y.call(e)}function W(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}function q(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function V(e){return"Object("+e+")"}function Q(e){return e+" { ? }"}function J(e,t,r,n){return e+" ("+t+") {"+(n?Y(r,n):x.call(r,", "))+"}"}function Y(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+x.call(e,","+r)+"\n"+t.prev}function K(e,t){var r,n=z(e),a=[];if(n){a.length=e.length;for(var o=0;o<e.length;o++)a[o]=G(e,o)?t(e[o],e):""}var i="function"==typeof C?C(e):[];if(j){r={};for(var u=0;u<i.length;u++)r["$"+i[u]]=i[u]}for(var c in e){if(G(e,c)&&(!n||String(Number(c))!==c||!(c<e.length)))!(j&&r["$"+c]instanceof Symbol)&&(k.call(/[^\w$]/,c)?a.push(t(c,e)+": "+t(e[c],e)):a.push(c+": "+t(e[c],e)))}if("function"==typeof C)for(var s=0;s<i.length;s++)M.call(e,i[s])&&a.push("["+t(i[s])+"]: "+t(e[i[s]],e));return a}},78706:function(e,t,r){"use strict";var n=r(80891),a=r(21924),o=a("Object.prototype.propertyIsEnumerable"),i=a("Array.prototype.push");e.exports=function(e){var t=n(e),r=[];for(var a in t)o(t,a)&&i(r,[a,t[a]]);return r}},23631:function(e,t,r){"use strict";var n=r(83739),a=r(55559),o=r(78706),i=r(75242),u=r(91693),c=a(i(),Object);n(c,{getPolyfill:i,implementation:o,shim:u}),e.exports=c},75242:function(e,t,r){"use strict";var n=r(78706);e.exports=function(){return"function"==typeof Object.entries?Object.entries:n}},91693:function(e,t,r){"use strict";var n=r(75242),a=r(83739);e.exports=function(){var e=n();return a(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e}},67154:function(e,t,r){"use strict";var n=r(80891),a=r(7681),o=r(21924)("String.prototype.replace"),i=/^\s$/.test("᠎"),u=i?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,c=i?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){return o(o(a(n(this)),u,""),c,"")}},77784:function(e,t,r){"use strict";var n=r(55559),a=r(83739),o=r(80891),i=r(67154),u=r(19343),c=r(24101),s=n(u()),l=function(e){return o(e),s(e)};a(l,{getPolyfill:u,implementation:i,shim:c}),e.exports=l},19343:function(e,t,r){"use strict";var n=r(67154);e.exports=function(){return String.prototype.trim&&"​"==="​".trim()&&"᠎"==="᠎".trim()&&"_᠎"==="_᠎".trim()&&"᠎_"==="᠎_".trim()?String.prototype.trim:n}},24101:function(e,t,r){"use strict";var n=r(83739),a=r(19343);e.exports=function(){var e=a();return n(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},89197:function(e,t,r){"use strict";r.d(t,{KJ:()=>b,_:()=>w,hk:()=>g,ww:()=>A,yM:()=>O});var n,a,o,i,u,c,s,l,d=r(48079),f=r(91888),p=r(55552),h=r.n(p),y=r(74915),v=r(67348);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.filter(Boolean).map(function(e){var r=e(t),n=r.name||e.name;return(0,f.Z)({},n,r)})},b=function(e){return Object.keys(e)[0]},w=function(e,t){var r="";return e.filter(function(e){var r=Object.values(e)[0];return!r.displayCondition||r.displayCondition(t)}).map(function(e){var t=b(e);return r===t?(r=t,null):(r=t,e)}).filter(Boolean).filter(function(e,t,r){return"hr"!==b(e)&&"divider"!==b(e)||t!==r.length-1})},O=(n=(0,d.Z)(h().mark(function e(t){var r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FileReader).readAsDataURL(t),e.abrupt("return",new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(e){t(e)}}));case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),k=function(e){var t=Math.max(e.height,e.width),r=1;return 3840<t&&(r=3840/t),r},_=(a=(0,d.Z)(h().mark(function e(t){var r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.base64,e.abrupt("return",new Promise(function(e,t){var n=new Image;n.src=r,n.onerror=t,n.onload=function(){var t=document.createElement("canvas"),r=k(n),a=r*n.width,o=r*n.height,i=a>=1920||o>=1920?.35:.75;t.width=a,t.height=o,t.getContext("2d").drawImage(n,0,0,a,o),e(t.toDataURL("image/jpeg",i))}}));case 2:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),x=(o=(0,d.Z)(h().mark(function e(t){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){var n=new FileReader;n.onerror=r,n.onload=function(t){return e(t.target.result)},n.readAsDataURL(t)}));case 1:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),S=(i=(0,d.Z)(h().mark(function e(t,r){var n,a,o,i,u,c,s;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(r);case 2:return n=e.sent,e.next=5,_({base64:n});case 5:return a=e.sent,e.next=8,t.embedJpg(a);case 8:o=e.sent,c=(u=(i=t.addPage([o.width,o.height])).getSize()).width,s=u.height,i.drawImage(o,{x:c/2-o.width/2,y:s/2-o.height/2,width:o.width,height:o.height});case 12:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)}),E=(u=(0,d.Z)(h().mark(function e(t){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("arrayBuffer"in t)){e.next=4;break}return e.next=3,t.arrayBuffer();case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",new Promise(function(e,r){var n=new FileReader;n.onerror=r,n.onload=function(t){return e(new Uint8Array(t.target.result))},n.readAsArrayBuffer(t)}));case 5:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)}),P=(c=(0,d.Z)(h().mark(function e(t,r){var n,a;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(r);case 2:return n=e.sent,e.next=5,y.PDFDocument.load(n);case 5:return a=e.sent,e.next=8,t.copyPages(a,a.getPageIndices());case 8:e.sent.forEach(function(e){return t.addPage(e)});case 10:case"end":return e.stop()}},e)})),function(e,t){return c.apply(this,arguments)}),C=(s=(0,d.Z)(h().mark(function e(t,r){var n;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("application/pdf"!==r.type){e.next=5;break}return e.next=3,P(t,r);case 3:e.next=7;break;case 5:return e.next=7,S(t,r);case 7:return e.next=9,t.save();case 9:return n=e.sent,e.abrupt("return",n);case 11:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)}),A=(l=(0,d.Z)(h().mark(function e(t,r){var n,a,o,i,u,c;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.PDFDocument.create();case 2:n=e.sent,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(r),e.prev=4,a.s();case 6:if((o=a.n()).done){e.next=15;break}return i=o.value,e.next=10,(0,v.fetchBlobFileById)(t,i._id);case 10:return u=e.sent,e.next=13,C(n,u);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.next=25,n.save();case 25:return c=new Blob([new Uint8Array(e.sent)],{type:"application/pdf"}),e.abrupt("return",c);case 29:case"end":return e.stop()}},e,null,[[4,17,20,23]])})),function(e,t){return l.apply(this,arguments)})},53207:function(e,t,r){"use strict";r.r(t),r.d(t,{makeActions:()=>n.hk,emailTo:()=>A,viewInDrive:()=>en,removeFromFavorites:()=>$,viewInContacts:()=>ee,download:()=>B,modify:()=>_,divider:()=>i,addToFavorites:()=>q,smsTo:()=>S,editAttribute:()=>es,call:()=>P,print:()=>F,others:()=>ed,copyToClipboard:()=>ei});var n=r(89197),a=r(67294),o=r(20958),i=function(){return{name:"divider",Component:(0,a.forwardRef)(function(e,t){return a.createElement(o.default,{className:"u-mv-half",ref:t})})}},u=r(51894),c=r(16396),s=r(36956),l=r(34378),d=r(79233),f=function(e){var t=document.querySelector("[role=application]"),r={dataset:{cozy:JSON.stringify({locale:localStorage.getItem("lang")||e})}},n=JSON.parse((t||r).dataset.cozy).locale;return/^\{\{\..*\}\}$/.test(n)?e:n},p=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.DEFAULT_LANG,a=e||f(n),o=(0,d.QE)(a,t,r,n),i=(0,l.NW)(a);return{t:o.t.bind(o),f:i,lang:a}},h=r(91888),y={en:{viewInContacts:"View in Cozy Contacts",viewInDrive:"Open",modify:"Modify",emailTo:"Send an email",smsTo:"Send a message",print:"Print",download:"Download",favorites:{add:{label:"Add to favorites",success:"%{filename} has been added to favorites |||| These items have been added to favorites"},remove:{label:"Remove from favorites",success:"%{filename} has been removed from favorites |||| These items have been removed from favorites"},error:"An error occurred, please try again."},others:"Others",editAttribute:"Edit attribute",copyToClipboard:{copy:"Copy",success:"Copied to clipboard",error:"Cannot copy to clipboard"},call:"Call"},fr:{viewInContacts:"Voir dans Cozy Contacts",viewInDrive:"Ouvrir",modify:"Modifier",emailTo:"Envoyer un e-mail",smsTo:"Envoyer un message",print:"Imprimer",download:"T\xe9l\xe9charger",favorites:{add:{label:"Ajouter aux favoris",success:"%{filename} a \xe9t\xe9 ajout\xe9 aux favoris |||| Ces \xe9l\xe9ments ont \xe9t\xe9 ajout\xe9s aux favoris"},remove:{label:"Retirer des favoris",success:"%{filename} a \xe9t\xe9 retir\xe9 des favoris |||| Ces \xe9l\xe9ments ont \xe9t\xe9 retir\xe9s des favoris"},error:"Une erreur est survenue, merci de r\xe9essayer."},others:"Autres",editAttribute:"Editer l'attribut",copyToClipboard:{copy:"Copier",success:"Copi\xe9 dans le presse-papier",error:"Impossible de copier dans le presse-papier"},call:"Appeler"}},v=function(){return p(void 0,function(e){return y[e]})},m=r(32419),g=r(92951);let b=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M.889 16a.86.86 0 01-.633-.256.86.86 0 01-.256-.633v-2.155a1.755 1.755 0 01.511-1.245L11.733.511c.178-.163.374-.289.59-.378a1.836 1.836 0 011.366 0c.222.09.415.223.578.4l1.222 1.245c.178.163.307.355.389.578a1.925 1.925 0 010 1.344 1.666 1.666 0 01-.39.589l-11.2 11.2A1.755 1.755 0 013.045 16H.89zM12.978 4.267l1.244-1.245-1.244-1.244-1.245 1.244 1.245 1.245z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("defs",null,a.createElement("path",{id:"pen_svg__a",d:"M9.5 3.5l3 3L3.04 16H0v-2.97L9.5 3.5zM14.91.92l.18.17c.77.78.78 2.05 0 2.84L14.03 5 11 2 12.09.91a2 2 0 012.82 0z"})),a.createElement("use",{fillRule:"evenodd",xlinkHref:"#pen_svg__a"}))};var w=r(96105),O=r(11075),k=r(73355),_=function(){var e=(0,v().t)("modify");return{name:"modify",icon:b,label:e,action:function(e,t){var r=t.client,n=e[0]._id,a=(0,c.generateWebLink)({slug:"contacts",cozyUrl:r.getStackClient().uri,subDomainType:r.getInstanceOptions().subdomain,pathname:"/",hash:"/".concat(n,"/edit")});window.open(a,"_blank")},Component:(0,a.forwardRef)(function(t,r){return a.createElement(k.default,(0,u.Z)({ref:r},t),a.createElement(w.default,null,a.createElement(m.default,{icon:b})),a.createElement(O.default,{primary:e}))})}};let x=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M2 2h16v12H3.17L2 15.17V2zm0-2C.9 0 .01.9.01 2L0 20l4-4h14c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2H2zm2 10h8v2H4v-2zm0-3h12v2H4V7zm0-3h12v2H4V4z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M0 .999A.997.997 0 011 0h14a1 1 0 011 .999V12c0 .552-.453.999-.997.999H8l-6 3v-3H1A1 1 0 010 12V1zM4 5c0 .556.446 1 .997 1h6.006c.544 0 .997-.448.997-1 0-.556-.446-1-.997-1H4.997C4.453 4 4 4.448 4 5zm0 3c0 .556.444 1 .99 1h4.02A1 1 0 0010 8c0-.556-.444-1-.99-1H4.99A1 1 0 004 8z"}))};var S=function(){var e=(0,v().t)("smsTo");return{name:"smsTo",icon:x,label:e,action:function(e){var t,r,n,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(r=t.phone)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.number;a&&window.open("sms:".concat(a),"_self")},Component:(0,a.forwardRef)(function(t,r){return a.createElement(k.default,(0,u.Z)({},t,{ref:r}),a.createElement(w.default,null,a.createElement(m.default,{icon:x})),a.createElement(O.default,{primary:e}))})}};let E=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M15.067 16c-1.852 0-3.682-.404-5.49-1.211-1.807-.807-3.451-1.952-4.933-3.433C3.163 9.874 2.02 8.23 1.211 6.422.404 4.615 0 2.785 0 .933 0 .667.089.444.267.267A.905.905 0 01.933 0h3.6c.208 0 .393.07.556.211.163.14.26.308.289.5l.578 3.111c.03.237.022.437-.023.6a.935.935 0 01-.244.422L3.533 7.022a10.75 10.75 0 001.056 1.59c.407.51.855 1.003 1.344 1.477.46.46.941.885 1.445 1.278.503.392 1.037.751 1.6 1.077l2.089-2.088c.133-.134.307-.234.522-.3a1.43 1.43 0 01.633-.056l3.067.622c.207.06.378.167.511.322.133.156.2.33.2.523v3.6a.904.904 0 01-.267.666.904.904 0 01-.666.267z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M5.88 4.655a1.68 1.68 0 00.001-2.377L4.097.492a1.685 1.685 0 00-2.38 0l-.98.979A2.521 2.521 0 00.42 4.646 39.038 39.038 0 0011.356 15.58c.999.662 2.328.53 3.175-.316l.979-.979a1.681 1.681 0 000-2.379l-1.785-1.784a1.679 1.679 0 00-2.379 0l-.594.593A40.017 40.017 0 015.285 5.25l.595-.595z"}))};var P=function(){var e=(0,v().t)("call");return{name:"call",icon:E,label:e,action:function(e){var t,r,n,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(r=t.phone)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.number;a&&window.open("tel:".concat(a),"_self")},Component:(0,a.forwardRef)(function(t,r){return a.createElement(k.default,(0,u.Z)({},t,{ref:r}),a.createElement(w.default,null,a.createElement(m.default,{icon:E})),a.createElement(O.default,{primary:e}))})}},C=r(75410),A=function(){var e=v().t,t=C.default,r=e("emailTo");return{name:"emailTo",icon:t,label:r,action:function(e){var t,r,n,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(r=t.email)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.address;a&&window.open("mailto:".concat(a),"_self")},Component:(0,a.forwardRef)(function(e,n){return a.createElement(k.default,(0,u.Z)({},e,{ref:n}),a.createElement(w.default,null,a.createElement(m.default,{icon:t})),a.createElement(O.default,{primary:r}))})}},j=r(48079),T=r(55552),M=r.n(T),D=r(67348),R=r(33918),I=r.n(R);let N=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 15"},e),a.createElement("path",{d:"M13.6 4h-.8V0H3.2v4h-.8A2.397 2.397 0 000 6.4v4.8h3.2v3.2h9.6v-3.2H16V6.4C16 5.072 14.928 4 13.6 4zM4.8 1.6h6.4V4H4.8V1.6zm6.4 11.2H4.8V9.6h6.4v3.2zm1.6-3.2V8H3.2v1.6H1.6V6.4c0-.44.36-.8.8-.8h11.2c.44 0 .8.36.8.8v3.2h-1.6z"}),a.createElement("path",{d:"M12.8 7.6a.8.8 0 100-1.6.8.8 0 000 1.6z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M13 12v3c0 .552-.456 1-.995 1h-8.01A.995.995 0 013 15v-3H1c-.552 0-1-.438-1-1.003V6.003A1 1 0 011 5h14c.552 0 1 .438 1 1.003v4.994A1 1 0 0115 12h-2zM3 1.01C3 .451 3.456 0 3.995 0h8.01c.55 0 .995.443.995 1.01V4H3V1.01zM5 10v4h6v-4H5zm9-2a1 1 0 100-2 1 1 0 000 2z"}))};var F=function(){var e,t=(0,v().t)("print");return{name:"print",icon:N,label:t,disabled:function(e){return 0===e.length},displayCondition:function(e){return e.every(function(e){return(0,D.isFile)(e)})},action:(e=(0,j.Z)(M().mark(function e(t,r){var a,o,i,u,c,s,l,d;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.client,o=r.webviewIntent,i=1===t.length,u=t[0],e.prev=3,!o){e.next=19;break}if(!i){e.next=11;break}return e.next=8,(0,D.fetchBlobFileById)(a,u._id);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,(0,n.ww)(a,t);case 13:e.t0=e.sent;case 14:return c=e.t0,e.next=17,(0,n.yM)(c);case 17:return s=e.sent,e.abrupt("return",o.call("print",s));case 19:if(l="",!i){e.next=26;break}return e.next=23,a.collection("io.cozy.files").getDownloadLinkById(u._id,u.name);case 23:l=e.sent,e.next=30;break;case 26:return e.next=28,(0,n.ww)(a,t);case 28:d=e.sent,l=URL.createObjectURL(d);case 30:setTimeout(function(){window.open(l,"_blank")}),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(3),I().error("Error trying to print document ".concat(o?"inside flagship appp":"outside flagship app",": ").concat(JSON.stringify(e.t1)));case 36:case"end":return e.stop()}},e,null,[[3,33]])})),function(t,r){return e.apply(this,arguments)}),Component:(0,a.forwardRef)(function(e,r){return a.createElement(k.default,(0,u.Z)({},e,{ref:r}),a.createElement(w.default,null,a.createElement(m.default,{icon:N})),a.createElement(O.default,{primary:t}))})}};let L=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M14 11v3H2v-3H0v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4l-1.41-1.41L9 8.17V0H7v8.17L4.41 5.59 3 7l5 5 5-5z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M7 9.586L5.707 8.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L9 9.586V2a1 1 0 10-2 0v7.586zM1 14h14a1 1 0 110 2H1a1 1 0 110-2z"}))};var z=function(e,t){var r=(0,a.forwardRef)(function(r,n){return a.createElement(k.default,(0,u.Z)({},r,{ref:n}),a.createElement(w.default,null,a.createElement(m.default,{icon:t})),a.createElement(O.default,{primary:e}))});return r.displayName="download",r},B=function(e){var t=e.encryptedUrl,r=(0,v().t)("download");return{name:"download",icon:L,label:r,Component:z(r,L),action:function(e,r){var n=r.client,a=r.webviewIntent;return(0,D.downloadFile)({client:n,file:e[0],url:t,webviewIntent:a})}}};let U=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 17"},e),a.createElement("path",{d:"M16 6.692l-5.752-.496L8 .9 5.752 6.204 0 6.692l4.368 3.784L3.056 16.1 8 13.116l4.944 2.984-1.304-5.624L16 6.692zM8 11.62l-3.008 1.816.8-3.424-2.656-2.304 3.504-.304L8 4.18l1.368 3.232 3.504.304-2.656 2.304.8 3.424L8 11.62z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.305l2.71 1.425-.517-3.018 2.192-2.137-3.03-.44L8 3.389 6.645 6.135l-3.03.44 2.193 2.137-.518 3.018L8 10.305zm-4.702 4.167l.898-5.236L.392 5.528l5.257-.764L8 0l2.351 4.764 5.257.764-3.804 3.708.898 5.236L8 12l-4.702 2.472z"}))};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(t){(0,h.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var W=function(e,t){var r=(0,a.forwardRef)(function(r,n){return a.createElement(k.default,(0,u.Z)({},r,{ref:n}),a.createElement(w.default,null,a.createElement(m.default,{icon:t})),a.createElement(O.default,{primary:e}))});return r.displayName="addToFavorites",r},q=function(e){var t,r=e.showAlert,n=v().t,a=n("favorites.add.label");return{name:"addToFavorites",icon:U,label:a,displayCondition:function(e){return e.length>0&&e.every(function(e){var t;return!(null!==(t=e.cozyMetadata)&&void 0!==t&&t.favorite)})},Component:W(a,U),action:(t=(0,j.Z)(M().mark(function e(t,a){var o,i,u,c;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=a.client,e.prev=1,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Z(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(t),e.prev=3,i.s();case 5:if((u=i.n()).done){e.next=11;break}return c=u.value,e.next=9,o.save(G(G({},c),{},{cozyMetadata:G(G({},c.cozyMetadata),{},{favorite:!0})}));case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),i.e(e.t0);case 16:return e.prev=16,i.f(),e.finish(16);case 19:r({message:n("favorites.add.success",{filename:(0,D.splitFilename)(t[0]).filename,smart_count:t.length}),severity:"success"}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),r({message:n("favorites.error"),severity:"error"});case 26:case"end":return e.stop()}},e,null,[[1,23],[3,13,16,19]])})),function(e,r){return t.apply(this,arguments)})}};let V=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 12.216l4.944 2.984-1.312-5.624L16 5.792l-5.752-.488L8 0 5.752 5.304 0 5.792l4.368 3.784L3.056 15.2 8 12.216z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M8 12l-4.702 2.472.898-5.236L.392 5.528l5.257-.764L8 0l2.351 4.764 5.257.764-3.804 3.708.898 5.236z"}))};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach(function(t){(0,h.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e,t){var r=(0,a.forwardRef)(function(r,n){return a.createElement(k.default,(0,u.Z)({},r,{ref:n}),a.createElement(w.default,null,a.createElement(m.default,{icon:t})),a.createElement(O.default,{primary:e}))});return r.displayName="removeFromFavorites",r},$=function(e){var t,r=e.showAlert,n=v().t,a=n("favorites.remove.label");return{name:"removeFromFavorites",icon:V,label:a,displayCondition:function(e){return e.length>0&&e.every(function(e){var t;return null===(t=e.cozyMetadata)||void 0===t?void 0:t.favorite})},Component:K(a,V),action:(t=(0,j.Z)(M().mark(function e(t,a){var o,i,u,c;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=a.client,e.prev=1,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Y(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}}(e))){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(t),e.prev=3,i.s();case 5:if((u=i.n()).done){e.next=11;break}return c=u.value,e.next=9,o.save(J(J({},c),{},{cozyMetadata:J(J({},c.cozyMetadata),{},{favorite:!1})}));case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),i.e(e.t0);case 16:return e.prev=16,i.f(),e.finish(16);case 19:r({message:n("favorites.success.remove",{filename:(0,D.splitFilename)(t[0]).filename,smart_count:t.length}),severity:"success"}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),r({message:n("favorites.error"),severity:"error"});case 26:case"end":return e.stop()}},e,null,[[1,23],[3,13,16,19]])})),function(e,r){return t.apply(this,arguments)})}};let X=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 14"},e),a.createElement("path",{d:"M14.546.452H1.455C.655.452 0 1.106 0 1.906v2.902h1.455V1.892h13.09v10.203H1.456V9.172H0v2.916c0 .8.655 1.44 1.455 1.44h13.09c.8 0 1.455-.64 1.455-1.44V1.906C16 1.1 15.345.452 14.546.452zM7.273 9.899l2.909-2.91-2.91-2.908v2.182H0v1.454h7.273V9.9zM14.546.452H1.455C.655.452 0 1.106 0 1.906v2.902h1.455V1.892h13.09v10.203H1.456V9.172H0v2.916c0 .8.655 1.44 1.455 1.44h13.09c.8 0 1.455-.64 1.455-1.44V1.906C16 1.1 15.345.452 14.546.452zM7.273 9.899l2.909-2.91-2.91-2.908v2.182H0v1.454h7.273V9.9z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 2H2v3H0V2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2v-3h2v3h12V2zM7.293 4.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L8.586 9H1a1 1 0 110-2h7.586L7.293 5.707a1 1 0 010-1.414z"}))};var ee=function(){var e=(0,v().t)("viewInContacts");return{name:"viewInContacts",icon:X,label:e,action:function(e,t){var r=t.client,n=e[0]._id,a=(0,c.generateWebLink)({slug:"contacts",cozyUrl:r.getStackClient().uri,subDomainType:r.getInstanceOptions().subdomain,pathname:"/",hash:"/".concat(n)});window.open(a,"_blank")},Component:(0,a.forwardRef)(function(t,r){return a.createElement(k.default,(0,u.Z)({ref:r},t),a.createElement(w.default,null,a.createElement(m.default,{icon:X})),a.createElement(O.default,{primary:e}))})}};let et=function(e){return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M0 13V3a2 2 0 012-2h3.172a2 2 0 011.414.586l.828.828A2 2 0 008.828 3H12a2 2 0 012 2H3.5a.5.5 0 00-.474.342l-2 6a.5.5 0 10.948.316L3.86 6h11.142a1 1 0 01.952 1.304l-2.01 6.304A2 2 0 0112.039 15H2a2 2 0 01-2-2z"}))};var er=function(e,t){var r=(0,a.forwardRef)(function(r,n){return a.createElement(k.default,(0,u.Z)({},r,{ref:n}),a.createElement(w.default,null,a.createElement(m.default,{icon:t})),a.createElement(O.default,{primary:e}))});return r.displayName="viewInDrive",r},en=function(){var e=(0,v().t)("viewInDrive");return{name:"viewInDrive",icon:et,label:e,Component:er(e,et),action:function(e,t){var r=t.client,n=e[0].dir_id,a=(0,c.generateWebLink)({slug:"drive",cozyUrl:r.getStackClient().uri,subDomainType:r.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(n)});window.open(a,"_blank")}}};let ea=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 14 16"},e),a.createElement("path",{d:"M10.182 0H1.455C.655 0 0 .655 0 1.455v10.181h1.455V1.455h8.727V0zm-.727 2.91H4.364c-.8 0-1.448.654-1.448 1.454L2.91 14.545c0 .8.647 1.455 1.447 1.455h8.008c.8 0 1.454-.655 1.454-1.454V7.273L9.455 2.909zM4.364 14.545V4.364h4.363V8h3.637v6.546h-8z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 0a2 2 0 012 2v8a2 2 0 01-2 2h-2v2a2 2 0 01-2 2H3a2 2 0 01-2-2V6a2 2 0 012-2h2V2a2 2 0 012-2h7zm-4 6H3v8h7V6zm4-4H7v2h3a2 2 0 012 2v4h2V2z"}))};var eo=function(e,t){var r=(0,a.forwardRef)(function(r,n){return a.createElement(k.default,(0,u.Z)({},r,{ref:n}),a.createElement(w.default,null,a.createElement(m.default,{icon:t})),a.createElement(O.default,{primary:e}))});return r.displayName="copyToClipboard",r},ei=function(){var e,t=v().t,r=t("copyToClipboard.copy");return{name:"copyToClipboard",icon:ea,label:r,Component:eo(r,ea),action:(e=(0,j.Z)(M().mark(function e(r,n){var a,o;return M().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.showAlert,o=n.copyValue){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,navigator.clipboard.writeText(o);case 6:a({message:t("copyToClipboard.success"),severity:"success",variant:"filled"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a({message:t("copyToClipboard.error"),severity:"error",variant:"filled"});case 12:case"end":return e.stop()}},e,null,[[3,9]])})),function(t,r){return e.apply(this,arguments)})}};let eu=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 14"},e),a.createElement("path",{d:"M0 3.53h9.706v1.764H0V3.53zm0-1.765h9.706V0H0v1.765zm0 7.059h6.177V7.059H0v1.765zm13.245-2.762l.626-.626a.879.879 0 011.244 0l.627.626c.344.344.344.9 0 1.244l-.627.627-1.87-1.871zm-.627.627l-4.676 4.676v1.87h1.87L14.49 8.56l-1.87-1.87z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 3h7.172l2-2H2a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2V6.828l-2 2V14H2V3zm3 7v2h2l7.146-7.146-2-2L5 10zm10.5-6.5l-.646.646-2-2L13.5 1.5a1.414 1.414 0 112 2z"}))};var ec=function(e,t){var r=(0,a.forwardRef)(function(r,n){return a.createElement(k.default,(0,u.Z)({},r,{ref:n}),a.createElement(w.default,null,a.createElement(m.default,{icon:t})),a.createElement(O.default,{primary:e}))});return r.displayName="editAttribute",r},es=function(){var e=(0,v().t)("editAttribute");return{name:"editAttribute",icon:eu,label:e,Component:ec(e,eu),action:function(e,t){(0,t.editAttributeCallback)(e)}}};let el=function(e){if((0,g.g)())return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 4"},e),a.createElement("path",{d:"M2 0C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM8 0C6.9 0 6 .9 6 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}));return a.createElement("svg",(0,u.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M2 10a2 2 0 100-4 2 2 0 000 4zm12 0a2 2 0 100-4 2 2 0 000 4zm-6 0a2 2 0 100-4 2 2 0 000 4z"}))};var ed=function(){return{name:"others",label:(0,v().t)("others"),icon:el}}},47868:function(e,t,r){"use strict";r.r(t),r.d(t,{actionsItemsComponentPropTypes:()=>m,default:()=>g});var n=r(51894),a=r(91888),o=r(65691),i=r(45697),u=r.n(i),c=r(67294),s=r(16396),l=r(22960),d=r(89197),f=r(36956),p=["docs","actions","actionOptions","component","onClick"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v=(0,c.forwardRef)(function(e,t){var r=e.docs,a=e.actions,i=e.actionOptions,u=e.component,h=e.onClick,v=(0,o.Z)(e,p),m=(0,s.useClient)(),g=(0,l.useWebviewIntent)(),b=(0,f.useI18n)().t;return(0,c.useMemo)(function(){return(0,d._)(a,r)},[a,r]).map(function(e,a){var o=(0,d.KJ)(e),s=Object.values(e)[0],l=s.Component,f=s.action,p=s.disabled;return c.createElement(null!=u?u:l,(0,n.Z)({},v,{ref:t,key:o+a,action:s,docs:r,autoFocus:0===a,disabled:null==p?void 0:p(r),onClick:function(e){null==f||f(r,y(y({client:m,t:b,webviewIntent:g},i),e)),null==h||h()}}))})});v.propTypes={docs:u().array,component:u().object,actions:u().array,actionOptions:u().object,onClick:u().func};var m={docs:u().array,action:u().object,autoFocus:u().bool,disabled:u().bool,onClick:u().func};let g=v},73355:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>z});var n=r(51894),a=r(65691),o=r(94184),i=r.n(o),u=r(57557),c=r.n(u),s=r(45697),l=r.n(s),d=r(67294),f=r(91888),p=r(19258),h=r(60988),y=r(82492),v=r.n(y),m=r(41120),g=function(e){var t,r;return e?(null===(t=e.type)||void 0===t?void 0:t.displayName)||(null===(r=e.type)||void 0===r?void 0:r.name)||"Node":null},b=function(e){var t=d.Children.toArray(e.children);return d.Children.count(t)>0?t:null},w=function(e){var t=b(e);return d.Children.count(t)||null},O=function(e){var t=b(e);if(!t)return null;var r=t[t.length-1];return r.type===d.Fragment?b(r.props)[0]:r},k=["gutters"],_=["gutters"],x=["gutters","ellipsis"],S=["className","gutters","ellipsis","componentElement"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,f.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var C=(0,m.Z)({gutters:{paddingLeft:function(e){return e.guttersValue.left},paddingRight:function(e){return e.guttersValue.right}},secondaryAction:{paddingRight:function(e){return e.secondaryActionPaddingRight}}}),A=function(e){var t=e.gutters,r=O((0,a.Z)(e,k));return r&&(0,h.default)(r,["ListItemSecondaryAction"])?48*w(r.props)+("double"===t?24:8):0},j=function(e){var t=e.gutters,r=(0,a.Z)(e,_),n="double"===t?32:16,o=O(r);return{left:n,right:o&&g(o).includes("ListItemIcon")?n-8:n}},T=function(e){var t=e.gutters,r=e.ellipsis,n=(0,a.Z)(e,x),o=b(n),i=w(n);return d.Children.map(o,function(e,n){var a=n===i-1&&(0,h.default)(e,["ListItemSecondaryAction"])||!1,o=g(e).includes("ListItemText");return a&&"double"===t?d.cloneElement(e,{className:"".concat(e.props.className," u-mr-1")}):o?d.cloneElement(e,{ellipsis:r}):e})},M=(0,d.forwardRef)(function(e,t){var r=e.className,o=e.gutters,u=e.ellipsis,c=e.componentElement,s=(0,a.Z)(e,S),l=C({secondaryActionPaddingRight:A(P({gutters:o},s)),guttersValue:j(P({gutters:o},s))}),f=T(P({gutters:o,ellipsis:u},s));return d.createElement(p.Z,(0,n.Z)({},s,{component:c||s.component,ref:t,classes:v()(s.classes,l),className:i()(r,s.size),disableGutters:s.disableGutters||"disabled"===o}),f)});M.displayName="ListItem",M.defaultProps={gutters:"default",size:"medium"};var D={gutters:l().oneOf(["disabled","double","default"]),size:l().oneOf(["small","medium","large"]),ellipsis:l().bool,componentElement:l().elementType};M.propTypes=D;var R=r(85639),I=["component"],N=(0,d.forwardRef)(function(e,t){var r=e.component,o=(0,a.Z)(e,I);return d.createElement(R.Z,(0,n.Z)({ref:t,component:M,componentElement:r,gutters:"disabled"},o))});N.displayName="MenuItem",N.propTypes=D;var F=["isListItem","className"],L=(0,d.forwardRef)(function(e,t){var r=e.isListItem,o=e.className,u=(0,a.Z)(e,F),s=r?M:N,l=c()(u,["docs","action","t","f","lang"]);return d.createElement(s,(0,n.Z)({},l,{className:i()(o,"cozyActionsItem"),ref:t,button:!0,ellipsis:!1}))});L.displayName="ActionsMenuItem",L.propTypes={className:l().string,isListItem:l().bool};let z=L},72518:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>ek});var n,a,o=r(51894),i=r(65691),u=r(45697),c=r.n(u),s=r(67294),l=r(47868),d=r(14106),f=r(31573),p=r(91888),h=r(73637),y=r(76234),v=r(83942),m=r(89150),g=r(36499),b=r(99589),w=r(94184),O=r.n(w),k=r(41120),_=["isOver"],x=(0,k.Z)({isOver:{zIndex:"calc(var(--zIndex-modal-toolbar) + 1)"}}),S=function(e){var t=e.isOver,r=(0,i.Z)(e,_),n=x();return s.createElement(b.Z,(0,o.Z)({},r,{className:O()((0,p.Z)({},n.isOver,t),r.className)}))};S.propTypes={isOver:c().bool};let E=function(e){var t=e.showBackdrop,r=e.onClick,n=e.children,a=t?S:s.Fragment;return s.createElement(a,t?{open:t,onClick:r}:void 0,n)};var P=function(e){return parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-".concat(e)))},C=r(32202),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ref,r=e.height,n=1;return r?n=r:t&&t.current&&(n=t.current.offsetHeight),n+((0,C.ym)().statusBarHeight||0)+P("top")},j=function(e){var t=A(e);return window.innerHeight-t},T=function(e){var t=e.backdrop,r=e.maxHeight,n=e.mediumHeight,a=e.mediumHeightRatio,o=e.innerContentHeight,i=e.bottomSpacerHeight,u=e.offset,c=n||Math.round(r*a);return t?c<o?c<r?c:r:o>r?r:o+i:o<c?o+u:c>r?r:c},M=function(e){var t=e.isClosable,r=e.isOpenMin,n=e.headerRef,a=e.offset,o=e.actionButtonsHeight,i=e.actionButtonsBottomMargin;return t&&!r?0:n.current.offsetHeight+(void 0===a?0:a)+o+i+((0,C.ym)().navbarHeight||0)+P("bottom")},D=function(e){var t=e.snapIndex,r=e.peekHeights,n=e.isTopPosition,a=e.setIsTopPosition,o=r.length-1;t>o&&a(!0),t!==o||n||a(!0),t<o&&n&&a(!1)},R=function(e){var t=e.snapIndex,r=e.isBottomPosition,n=e.setIsBottomPosition;0!==t||r||n(!0),0!==t&&r&&n(!1)},I=function(e){var t=e.backdrop,r=e.setCurrentIndex,n=e.setIsTopPosition,a=e.setIsBottomPosition,o=e.handleClose;t&&(r(0),n(!1),a(!0),setTimeout(o,250))},N=function(e){var t=e.backdrop,r=e.maxHeight,n=e.innerContentHeight,a=e.toolbarProps,o=e.offset;return r-n<=0?o+A(a):t?o:r-n},F=function(e,t){return e?parseFloat(getComputedStyle(e).getPropertyValue(t)):0},L=r(9758),z=["spacing","tag"],B={"Stack--m":"styles__Stack--m___1tSpV","Stack--xs":"styles__Stack--xs___2R5lW","Stack--s":"styles__Stack--s___22WMg","Stack--l":"styles__Stack--l___3oxCJ","Stack--xl":"styles__Stack--xl___3qy-m","Stack--xxl":"styles__Stack--xxl___2KAsb"},U=function(e){var t=e.spacing,r=e.tag,n=(0,i.Z)(e,z);return s.createElement(r,(0,o.Z)({},n,{className:O()(n.className,t&&B["Stack--"+t])}))},H=c().oneOf(["xs","s","m","l","xl","xxl"]);U.propTypes={spacing:H},U.defaultProps={spacing:"m",tag:"div"};var G=r(6557),Z=r.n(G),W=r(41609),q=r.n(W),V=r(13218),Q=r.n(V),J=r(35937),Y=r.n(J),K=r(22960);(n=a||(a={})).Dark="dark",n.Light="light";var $=function(e,t,r){var n=Q()(t)?Y()(t,Z()):void 0,a=!q()(n)&&n;(0,C.wn)(n),e&&a&&e.call("setFlagshipUI",a,r)},X=function(e,t,r){var n=(0,K.useWebviewIntent)();(0,s.useEffect)(function(){return $(n,e,"".concat(r||"unknown"," (onMount)")),function(){return $(n,t,"".concat(r||"unknown"," (onUnmount)"))}},[n])},ee=r(24060),et=["portalProps"];function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach(function(t){(0,p.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ea={renderSaferAnim:"styles__renderSaferAnim___2rNtc"},eo=function(e){var t=e.showBackdrop,r=e.children;return t?s.createElement("div",{style:{position:"fixed",zIndex:"var(--zIndex-modal)",inset:0}},r):r},ei=function(e){var t=e.isTopPosition,r=e.hasToolbarProps,n=e.offset,a=e.renderSaferHeight,o=e.isBottomPosition;return{root:en({borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",transition:"border-radius 0.5s",boxShadow:"0 -0.5px 0px 0 rgba(0, 0, 0, 0.10), 0 -2px 2px 0 rgba(0, 0, 0, 0.02), 0 -4px 4px 0 rgba(0, 0, 0, 0.02), 0 -8px 8px 0 rgba(0, 0, 0, 0.02), 0 -16px 16px 0 rgba(0, 0, 0, 0.02)",backgroundColor:"var(--paperBackgroundColor)",zIndex:"var(--zIndex-modal)"},t&&{borderTopLeftRadius:0,borderTopRightRadius:0,boxShadow:r?"0 0 1px 0 rgba(0, 0, 0, 0.5)":"0 -1px 0 0 rgba(255, 255, 255, 1)"}),indicator:{width:"4rem",height:"0.25rem",borderRadius:"99px",backgroundColor:"var(--secondaryTextColor)"},stack:{backgroundColor:"var(--defaultBackgroundColor)"},bounceSafer:{height:50,width:"100%",position:"fixed",bottom:0,left:0,backgroundColor:"var(--paperBackgroundColor)"},flagshipImmersive:{backgroundColor:"var(--paperBackgroundColor)",bottom:0,content:"",height:"var(--flagship-bottom-height)",position:"fixed",width:"100%",zIndex:"var(--zIndex-modal)"},offsetSafer:{opacity:+!o,height:"".concat(n,"px"),width:"100%",position:"fixed",bottom:0,left:0,backgroundColor:"var(--paperBackgroundColor)",zIndex:"calc(var(--zIndex-modal) + 10)",transition:"opacity ".concat(250,"ms")},renderSafer:{height:a,width:"100%",position:"fixed",bottom:0,pointerEvents:"none"}}},eu={mediumHeightRatio:.75,mediumHeight:null,hasMinHeightOffset:!1,isOpenMin:!1},ec=(0,s.memo)(function(e){var t=e.toolbarProps,r=e.settings,n=e.backdrop,a=e.skipAnimation,o=e.onClose,i=e.offset,u=e.children,c=en(en({},eu),r),l=c.mediumHeightRatio,p=c.mediumHeight,y=c.isOpenMin,b=c.hasMinHeightOffset,w=(0,s.useRef)(),O=(0,s.useRef)(),k=(0,s.useRef)(),_=(0,s.useState)(!1),x=(0,f.Z)(_,2),S=x[0],P=x[1],A=(0,s.useState)(!1),z=(0,f.Z)(A,2),B=z[0],H=z[1],G=(0,s.useState)(!1),Z=(0,f.Z)(G,2),W=Z[0],q=Z[1],V=(0,s.useState)(n),Q=(0,f.Z)(V,2),J=Q[0],Y=Q[1],K=(0,s.useState)(null),$=(0,f.Z)(K,2),et=$[0],er=$[1],ec=(0,s.useState)(1),es=(0,f.Z)(ec,2),el=es[0],ed=es[1],ef=(0,s.useState)(0),ep=(0,f.Z)(ef,2),eh=ep[0],ey=ep[1],ev=(0,s.useState)(0),em=(0,f.Z)(ev,2),eg=em[0],eb=em[1],ew=(0,s.useRef)(),eO=(0,s.useState)(0),ek=(0,f.Z)(eO,2),e_=ek[0],ex=ek[1],eS=!!Object.keys(t).length,eE=!!o||n,eP=eg<ew.current?ew.current-16:0,eC=0!==ew.current&&ew.current>eg,eA=ei({isTopPosition:S,hasToolbarProps:eS,offset:i,renderSaferHeight:eP,isBottomPosition:B}),ej=s.Children.map(u,function(e){var t,r;return(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.name)==="BottomSheetHeader"||(null==e?void 0:null===(r=e.type)||void 0===r?void 0:r.displayName)==="BottomSheetHeader"?s.cloneElement(e,{headerContentRef:k}):e});if(n&&!o)throw Error("BottomSheet must have `onClose` method to work properly when setting `backdrop` to `true`");var eT=(0,s.useCallback)(function(){Y(!1),q(!0),o&&o()},[o]);(0,m.I)(w,function(){ex(function(e){return e+1})}),(0,s.useEffect)(function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="auto"}},[]),(0,g.q)(function(){return eT()},250,eE&&B),(0,s.useEffect)(function(){var e=k.current,r=w.current.offsetHeight,a=F(e,"height"),o=F(e,"padding-bottom"),u=j(t),c=N({backdrop:n,maxHeight:u,innerContentHeight:r,toolbarProps:t,offset:i}),s=M({isClosable:eE,isOpenMin:y,headerRef:O,offset:b?i:0,actionButtonsHeight:a,actionButtonsBottomMargin:o}),f=y&&a>0?s+1:T({backdrop:n,maxHeight:u,mediumHeight:p,mediumHeightRatio:l,innerContentHeight:r,bottomSpacerHeight:c,offset:i}),h=(0,d.Z)(new Set([s,f,u])),v=(null==et?void 0:et.toString())!==(null==h?void 0:h.toString())&&S?el-1-(el-(h.length-1)):el;ed(v),er(h),ew.current=eg,eb(f),D({snapIndex:v,peekHeights:h,isTopPosition:S,setIsTopPosition:P}),ey(c)},[w,t,l,p,J,n,eE,i,e_]);var eM=(0,ee.useCozyTheme)().isLight;return X({bottomTheme:eM?"dark":"light"},{bottomTheme:(0,C.ym)().immersive||!eM?"light":"dark"},"cozy-ui/BottomSheet"),s.createElement(eo,{showBackdrop:J},(0,C.ym)().immersive&&s.createElement("span",{style:eA.flagshipImmersive}),s.createElement(E,{showBackdrop:J,onClick:function(){return I({backdrop:n,setCurrentIndex:ed,setIsTopPosition:P,setIsBottomPosition:H,handleClose:eT})}}),s.createElement(v.R,{peekHeights:et,defaultHeight:eg,backdrop:!1,fullHeight:!eS,currentIndex:el,onIndexChange:function(e){ed(e),D({snapIndex:e,peekHeights:et,isTopPosition:S,setIsTopPosition:P}),R({snapIndex:e,isBottomPosition:B,setIsBottomPosition:H})},styles:{root:eA.root},threshold:0,springConfig:{tension:165,friction:17,clamp:!0},disabledClosing:!o,hidden:W,snapPointSeekerMode:"next",skipAnimation:a},s.createElement("div",{ref:w},s.createElement(L.default,{"data-testid":"bottomSheet-header",className:"u-w-100 u-h-3 u-pos-relative u-flex u-flex-items-center u-flex-justify-center",ref:O,elevation:0,square:!0},s.createElement("div",{style:eA.indicator})),s.createElement(U,{style:eA.stack,className:"u-flex u-flex-column u-ov-hidden",spacing:"s"},ej)),s.createElement("div",{style:{height:eh}})),eC&&s.createElement("div",{style:eA.renderSafer},s.createElement(L.default,{className:ea.renderSaferAnim,elevation:0,square:!0})),!B&&s.createElement(s.Fragment,null,s.createElement(h.Z,{in:!0,timeout:250},s.createElement("div",{style:eA.bounceSafer}))),!!i&&s.createElement(h.Z,{in:!0,timeout:250},s.createElement("div",{id:"bottomSheet-offsetSafer",style:eA.offsetSafer})))});ec.displayName="BottomSheet",ec.defaultProps={classes:{},toolbarProps:{},backdrop:!1,offset:(0,C.ym)().immersive&&(0,C.ym)().navbarHeight||0},ec.propTypes={toolbarProps:c().shape({ref:c().object,height:c().number}),settings:c().shape({mediumHeight:c().number,mediumHeightRatio:c().number,hasMinHeightOffset:c().bool,isOpenMin:c().bool}),backdrop:c().bool,skipAnimation:c().bool,offset:c().number,onClose:c().func};var es=(0,s.forwardRef)(function(e,t){var r=e.portalProps,n=(0,i.Z)(e,et),a=(0,ee.useCozyTheme)().variant,u=null!=r&&r.disablePortal?s.Fragment:ee.default,c=null!=r&&r.disablePortal?void 0:{variant:a};return s.createElement(y.Z,r,s.createElement(u,c,s.createElement(ec,(0,o.Z)({ref:t},n))))});es.displayName="BottomSheetPortal";let el=r(49186).Z;var ed=r(8920),ef=r(25976),ep=function(e){var t=document.getElementById("sidebar");return t?getComputedStyle(t).getPropertyValue("background-color"):e.palette.background.paper},eh=(0,ef.isFlagshipApp)()||C.q6?function(){var e=(0,ed.Z)(),t=(0,ee.useCozyTheme)().isLight;X({bottomBackground:e.palette.background.paper,bottomTheme:t?"dark":"light",topOverlay:"rgba(0, 0, 0, 0.5)",topBackground:e.palette.background.paper,topTheme:"light"},{bottomBackground:ep(e),bottomTheme:t?"dark":"light",topOverlay:"transparent",topBackground:e.palette.background.paper,topTheme:t?"dark":"light"},"cozy-ui/ActionMenu")}:function(){},ey=r(41170),ev=r(72339),em=["children","autoClose","open","onClose"],eg=function(e){var t=e.children,r=e.autoClose,n=e.open,a=e.onClose,u=(0,i.Z)(e,em),c=(0,ev.default)().isMobile;eh();var l=function(e){return function(t){var n;null===(n=e.onClick)||void 0===n||n.call(e,t),r&&(null==a||a())}};return c&&n?s.createElement(es,{skipAnimation:(0,ey.Z)(),backdrop:!0,onClose:a},s.createElement(L.default,{square:!0},s.Children.map(t,function(e){return s.isValidElement(e)?s.cloneElement(e,{isListItem:!0,size:"small",onClick:l(e.props)}):null}))):s.createElement(el,(0,o.Z)({},u,{open:n,onClose:a}),s.Children.map(t,function(e,r){var n,a,o=s.Children.toArray(t)[0],i=(null==o?void 0:null===(n=o.type)||void 0===n?void 0:n.name)||(null==o?void 0:null===(a=o.type)||void 0===a?void 0:a.displayName);return s.isValidElement(e)?s.cloneElement(e,{autoFocus:"ActionsMenuMobileHeader"===i&&1===r||void 0,onClick:l(e.props)}):null}))};eg.propTypes={autoClose:c().bool,onClose:c().func};var eb=["docs","actions","anchorOrigin","children","componentsProps","onClose"],ew=function(e){var t=e.vertical;return{vertical:"bottom"===t?"top":"top"===t?"bottom":t,horizontal:e.horizontal}},eO=(0,s.forwardRef)(function(e,t){var r=e.docs,n=e.actions,a=e.anchorOrigin,u=e.children,c=e.componentsProps,d=e.onClose,f=(0,i.Z)(e,eb),p=ew(a);return s.createElement(eg,(0,o.Z)({},f,{anchorEl:t.current,getContentAnchorEl:null,anchorOrigin:a,transformOrigin:p,keepMounted:!0,onClose:d}),u,s.createElement(l.default,(0,o.Z)({},c.actionsItems,{docs:r,actions:n})))});eO.defaultProps={anchorOrigin:{vertical:"bottom",horizontal:"left"},autoClose:!0,componentsProps:{}},eO.propTypes={open:c().bool,docs:c().array,actions:c().array,anchorOrigin:c().shape({vertical:c().oneOf(["bottom","center","top"]),horizontal:c().oneOf(["left","center","right"])}),autoClose:c().bool,componentsProps:c().shape({actionsItems:c().shape({actionOptions:c().object,onClick:c().func})}),onClose:c().func};let ek=eO},4733:function(e,t,r){"use strict";r.r(t),r.d(t,{AppIcon:()=>Y,default:()=>K});var n=r(48079),a=r(59172),o=r(34871),i=r(28457),u=r(99494),c=r(3868),s=r(88035),l=r(91888),d=r(55552),f=r.n(d),p=r(94184),h=r.n(p),y=r(45697),v=r.n(y),m=r(67294),g=r(16396);r(27361);var b={FILE:"file"},w={SHORTCUT:"shortcut"},O=function(e){return!!e&&e.type===b.FILE&&e.class===w.SHORTCUT},k=r(32419),_=r(51894),x=r(65691),S=["iconRef"];let E=function(e){var t=e.iconRef,r=(0,x.Z)(e,S);return m.createElement("svg",(0,_.Z)({viewBox:"0 0 15 16"},r,{ref:t}),m.createElement("path",{d:"M14.4 4L7.2 0 0 4v8l7.2 4 7.2-4V4zM7.2 1.832l4.728 2.624L9.52 5.792a3.213 3.213 0 00-4.64 0L2.472 4.456 7.2 1.832zm-.8 11.896l-4.8-2.664V5.808L4.104 7.2A3.193 3.193 0 006.4 11.096v2.632zM5.6 8c0-.88.72-1.6 1.6-1.6.88 0 1.6.72 1.6 1.6 0 .88-.72 1.6-1.6 1.6-.88 0-1.6-.72-1.6-1.6zM8 13.728v-2.624a3.193 3.193 0 002.4-3.096c0-.28-.032-.552-.104-.808L12.8 5.808v5.256L8 13.728z"}))};var P=r(92951),C=["iconRef"];function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let j=function(e){var t=e.iconRef,r=(0,x.Z)(e,C);return(0,P.g)()?E(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,l.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({iconRef:t},r)):m.createElement("svg",(0,_.Z)({viewBox:"0 0 16 16"},r,{ref:t}),m.createElement("path",{d:"M1 11.009V5.5c0-.55.39-.773.872-.498l5.256 3.003c.476.272.872.944.872 1.495v5.508c0 .549-.39.772-.872.497l-5.256-3.003C1.396 12.231 1 11.56 1 11.01zm15 0c0 .55-.396 1.222-.872 1.494l-5.256 3.003c-.481.275-.872.052-.872-.497V9.5c0-.55.396-1.223.872-1.495l5.256-3.003c.481-.275.872-.052.872.498v5.508zM9.35 6.982c-.47.288-1.237.284-1.7 0l-4.8-2.954c-.47-.29-.463-.732.027-.995L7.623.477c.485-.261 1.264-.264 1.754 0l4.746 2.556c.485.26.49.71.027.995l-4.8 2.954z"}))},T={coolGrey:"var(--coolGrey)",puertoRico:"#0DCBCF",emerald:"#35CE68",seafoamGreen:"#3DA67E",brightSun:"#FFC644",fuchsia:"#FC4C83",pomegranate:"#F52D2D",azure:"#1FA8F1",melon:"#FD7461",blazeOrange:"#FC6D00",mango:"#FF962F",pumpkinOrange:"#FF7F1B",lavender:"#C2ADF4",darkPeriwinkle:"#6984CE",purpley:"#7F6BEE",lightishPurple:"#B449E7",weirdGreen:"#40DE8E"};var M=[T.azure,T.melon,T.blazeOrange,T.pomegranate,T.mango,T.pumpkinOrange,T.darkPeriwinkle,T.purpley,T.lightishPurple,T.weirdGreen,T.puertoRico,T.emerald,T.seafoamGreen,T.lavender,T.brightSun,T.fuchsia],D=Object.values({sunrise:"linear-gradient(136deg, #F8D280 14.84%, #F2AC69 96.03%)",downy:"linear-gradient(136deg, #81EAD4 14.84%, #62C6B7 96.03%)",sugarCoral:"linear-gradient(136deg, #F19E86 14.84%, #F95967 96.03%)",pinkBonnet:"linear-gradient(136deg, #E4ABF0 14.84%, #D96EED 96.03%)",blueMana:"linear-gradient(136deg, #85D9FD 14.84%, #2A9EFC 96.03%)",nightBlue:"linear-gradient(136deg, #80AEFF 39.32%, #883DFE 96.03%)",snowPea:"linear-gradient(136deg, #BDF4A1 14.84%, #52CE64 96.03%)",pluviophile:"linear-gradient(136deg, #A1D6F4 14.84%, #52CEC2 96.03%)",cornflower:"linear-gradient(135deg, #86D9D3 0%, #1CCFB4 100%)",paleGreen:"linear-gradient(135deg, #E2FA17 0%, #75D8CB 100%)",moonBlue:"linear-gradient(136deg, #6DCFFF 14.84%, #3D88F8 96.03%)",undefined:""}).filter(Boolean),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,P.g)()?D:M,r=Array.from(e.toUpperCase()).map(function(e){return e.charCodeAt(0)}).reduce(function(e,t){return e+t},0)%t.length;return t[r]},I=r(32692),N=["children","className","tag","isSecondary"],F=function(e){var t=e.children,r=e.className,n=e.tag,a=e.isSecondary,o=(0,x.Z)(e,N);return m.createElement(n,(0,_.Z)({className:h()("styles__Tile___2SqRi",(0,l.Z)({},"styles__Tile-secondary___2zYdn",a),r)},o),t)},L=function(e){var t=e.children,r=e.className,n=e.isMultiline;return m.createElement(I.Z,{variant:"h6",className:h()("styles__Tile-title___3gbq-",(0,l.Z)({},"styles__Tile-title-multiline___17HPx",n),r)},t)},z=function(e){var t=e.children,r=e.className,n=e.isAccent;return m.createElement(I.Z,{variant:"caption",className:h()("styles__Tile-status___33VkE",(0,l.Z)({},"styles__Tile-status-accent___an9au",n),r)},t)},B=function(e){var t=e.children;return m.createElement("div",{className:"styles__Tile-icon-wrapper___24AzZ"},t)};L.propTypes={className:v().string,isMultiline:v().bool},L.defaultProps={isMultiline:!1},z.propTypes={className:v().string,isAccent:v().bool},z.defaultProps={isAccent:!1},F.propTypes={className:v().string,isSecondary:v().bool,tag:v().string},F.defaultProps={isSecondary:!1,tag:"div"};var U=r(41120),H={"AppTile-icon":"styles__AppTile-icon___1f0c0"},G=(0,U.Z)({letter:{color:"white",margin:"auto"},letterWrapper:{backgroundColor:function(e){return R(e.name)}}}),Z=function(e){var t,r,n,a,o=e.file,i=G({name:o.name}),u=null===(t=o.attributes)||void 0===t?void 0:null===(r=t.metadata)||void 0===r?void 0:r.icon,c=null===(n=o.attributes)||void 0===n?void 0:null===(a=n.metadata)||void 0===a?void 0:a.iconMimeType;return u?m.createElement(B,null,m.createElement("img",{className:H["AppTile-icon"],src:c?"data:".concat(c,";base64,").concat(u):"data:image/svg+xml;base64,".concat(window.btoa(u)),width:48,height:48,alt:o.name})):m.createElement(B,null,m.createElement("div",{className:i.letterWrapper},m.createElement(I.Z,{className:i.letter,variant:"h2",align:"center"},o.name[0].toUpperCase())))},W=v().shape({name:v().string,slug:v().string,developer:v().object,links:v().shape({icon:v().string}),latest_version:v().shape({version:v().string})});v().shape({_id:v().string,class:v().string,mime:v().string,name:v().string});var q={"c-loading-placeholder":"styles__c-loading-placeholder___3L6Gz","c-app-icon":"styles__c-app-icon___2_O40","c-app-icon-default":"styles__c-app-icon-default___3CEmt"},V="done",Q="errored",J="fetching",Y=function(e){(0,u.Z)(p,e);var t,r,d=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(p);return e=t?Reflect.construct(r,arguments,(0,s.Z)(this).constructor):r.apply(this,arguments),(0,c.Z)(this,e)});function p(e,t){var r;return(0,a.Z)(this,p),r=d.call(this,e,t),(0,l.Z)((0,i.Z)(r),"state",{error:null,icon:null,status:r.props.client?J:Q}),r.isUnmounting=!1,r.handleError=r.handleError.bind((0,i.Z)(r)),r.fetchIcon=r.fetchIcon.bind((0,i.Z)(r)),r}return(0,o.Z)(p,[{key:"componentWillUnmount",value:function(){this.isUnmounting=!0}},{key:"componentDidMount",value:function(){this.isUnmounting=!1,this.load()}},{key:"componentDidUpdate",value:function(e){this.props.fetchIcon!==e.fetchIcon&&this.load()}},{key:"fetchIcon",value:function(){var e=this.props,t=e.app,r=e.type,n=e.priority,a=e.client;if(!O(t))return a.getStackClient().getIconURL({type:r,slug:t.slug||t,appData:t,priority:n})}},{key:"handleError",value:function(){this.setState({status:Q})}},{key:"load",value:(r=(0,n.Z)(f().mark(function e(){var t,r,n,a,o,i,u,c,s,l,d;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=this.props).app,n=t.fetchIcon,a=t.onReady,o=t.client,i=n||this.fetchIcon,e.prev=2,o&&(s=(d=new URL(o.getStackClient().uri)).host,l="https:"===d.protocol),e.next=6,i(r,s,l);case 6:u=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c=e.t0;case 12:this.isUnmounting||(this.setState({error:c,icon:u,status:c?Q:V}),"function"==typeof a&&a());case 13:case"end":return e.stop()}},e,this,[[2,9]])})),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.alt,r=e.className,n=e.fallbackIcon,a=this.state,o=a.icon,i=a.status;if(O(this.props.app))return m.createElement(Z,{file:this.props.app});switch(i){case J:return m.createElement("div",{role:"progressbar",className:h()(q["c-loading-placeholder"],q["c-app-icon"],r)});case V:return m.createElement("img",{alt:t,className:h()(q["c-app-icon"],r),onError:this.handleError,ref:this.props.iconRef,src:o});default:return m.createElement(k.default,{className:h()(q["c-app-icon"],q["c-app-icon-default"],r),height:"100%",icon:n||j,width:"100%",color:T.coolGrey,iconRef:this.props.iconRef})}}}]),p}(m.Component);Y.propTypes={alt:v().string,app:v().oneOfType([W,v().string]),fallbackIcon:k.iconPropType,fetchIcon:v().func,client:v().object.isRequired,className:v().string,onReady:v().func,type:v().oneOf(["app","konnector"]),priority:v().oneOf(["stack","registry"])},Y.defaultProps={type:"app",priority:"stack"};let K=(0,g.withClient)(Y)},79475:function(e,t,r){"use strict";r.r(t),r.d(t,{AppLinker:()=>S,default:()=>E,generateUniversalLink:()=>_,generateWebLink:()=>k,getUniversalLinkDomain:()=>O});var n=r(59172),a=r(34871),o=r(28457),i=r(99494),u=r(3868),c=r(88035),s=r(91888),l=r(45697),d=r.n(l),f=r(67294),p=r(16396),h=r(25976),y=r(22960),v=r(33918),m=r.n(v),g=r(65691),b=["nativePath"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var O=function(){return"https://links.mycozy.cloud"},k=function(e){var t=e.nativePath,r=(0,g.Z)(e,b);return console.warn("Deprecated: you should use generateWebLink from cozy-client instead"),(0,p.generateWebLink)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({pathname:"/",hash:t},r))},_=function(e){var t=e.slug,r=e.cozyUrl,n=e.subDomainType,a=e.fallbackUrl,o=e.nativePath;if(o=(0,p.ensureFirstSlash)(o),!r&&!a)throw Error("Must have either cozyUrl or fallbackUrl to generate universal link.");r&&!a&&(a=(0,p.generateWebLink)({cozyUrl:r,pathname:"/",hash:o,slug:t,subDomainType:n}));var i=new URL(O(r)+"/"+t+o);return i.searchParams.append("fallback",a),i.toString()};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var S=function(e){(0,i.Z)(l,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(l);return e=t?Reflect.construct(r,arguments,(0,c.Z)(this).constructor):r.apply(this,arguments),(0,u.Z)(this,e)});function l(e){var t;return(0,n.Z)(this,l),t=r.call(this,e),(0,s.Z)((0,o.Z)(t),"state",{imgRef:null}),(0,s.Z)((0,o.Z)(t),"setImgRef",function(e){t.imgRef=e,t.setState({imgRef:t.imgRef})}),t}return(0,a.Z)(l,[{key:"render",value:function(){var e=this.props.children,t=l.getOnClickHref(this.props,this.context,this.state.imgRef),r=t.href,n=t.onClick;return e({iconRef:this.setImgRef,onClick:n,href:r})}}],[{key:"getSlug",value:function(e){return e.app.slug}},{key:"getOnClickHref",value:function(e,t,r){var n=e.app,a=e.client,o=e.href;if((0,h.isFlagshipApp)()){var i=(a?a.getInstanceOptions():void 0).app;if(void 0===i||n.slug!==i.slug){var u=r&&JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r.getBoundingClientRect().toJSON()));return{onClick:function(e){e.preventDefault(),t?t.call("openApp",o,n,u):m().error('Failed to "openApp('.concat(n,')". WebviewService has the following falsy value "').concat(t,"\" in AppLinker's context."))},href:"#"}}}return{href:o,onClick:null}}},{key:"onAppSwitch",value:function(e){"function"==typeof e&&e()}},{key:"openWeb",value:function(e){l.onAppSwitch(e.onAppSwitch)}}]),l}(f.Component);(0,s.Z)(S,"contextType",y.WebviewContext),S.propTypes={href:d().string,onAppSwitch:d().func,app:d().shape({slug:d().string.isRequired}).isRequired};let E=(0,p.withClient)(S)},41496:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(51894),a=r(91888),o=r(65691),i=r(282),u=r(94184),c=r.n(u),s=r(45697),l=r.n(s),d=r(67294),f=r(32419),p=r(4314),h=["variant","className","color","label","busy","disabled","endIcon"],y=["variant","className"],v=["success","error","warning","info"],m=(0,d.forwardRef)(function(e,t){var r=e.variant,u=e.className,s=e.color,l=e.label,y=e.busy,m=e.disabled,g=e.endIcon,b=(0,o.Z)(e,h),w=v.includes(s)?s:"primary",O="text"!==r||v.includes(s)?"primary":s;return d.createElement(i.Z,(0,n.Z)({},b,{variant:r,ref:t,className:c()((0,a.Z)({},"customColor-".concat(w),w),u),color:O,disabled:m||y,endIcon:y?d.createElement(f.default,{icon:p.Z,spin:!0,"aria-hidden":!0,focusable:"false"}):g,disableElevation:!0}),l)});m.displayName="DefaultButton",m.defaultProps={variant:"contained",color:"primary"};var g=(0,d.forwardRef)(function(e,t){var r=e.variant,a=e.className,i=void 0===a?"":a,u=(0,o.Z)(e,y);switch(r){case"ghost":return d.createElement(m,(0,n.Z)({className:"ghost ".concat(i),variant:"outlined"},u,{ref:t}));case"secondary":return d.createElement(m,(0,n.Z)({variant:"outlined",className:i},u,{ref:t}));case"text":return d.createElement(m,(0,n.Z)({variant:"text",className:i},u,{ref:t}));default:return d.createElement(m,(0,n.Z)({className:i},u,{ref:t}))}});g.displayName="Buttons",g.propTypes={variant:l().oneOf(["primary","secondary","ghost","text"]),color:l().oneOf(["default","inherit","primary","secondary","success","error","warning","info"])},g.defaultProps={variant:"primary"};let b=g},20958:function(e,t,r){"use strict";r.r(t),r.d(t,{DeprecatedDivider:()=>k,default:()=>b});var n=r(91888),a=r(51894),o=r(55517),i=r(67294),u=r(65691),c=r(94184),s=r.n(c),l=r(45697),d=r.n(l),f=r(32692),p=["color","variant","textAlign","children","className"],h={divider:"styles__divider___SuA5q",center:"styles__center___3K8dw"},y=function(e){var t=e.color,r=e.variant,n=e.textAlign,o=e.children,c=e.className,l=(0,u.Z)(e,p);return i.createElement(f.Z,(0,a.Z)({color:void 0===t?"textPrimary":t,variant:void 0===r?"body2":r,className:s()(h.divider,h[n],c)},l),o)};y.propTypes={textAlign:d().oneOf(["center"])};var v=r(68893);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var g=(0,i.forwardRef)(function(e,t){return"string"==typeof e.children?i.createElement(y,(0,a.Z)({},e,{ref:t})):i.createElement(o.Z,(0,a.Z)({},e,{ref:t}))});g.displayName="Divider",g.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},y.propTypes);let b=g;var w={padding:16},O={padding:32},k=(0,v.Z)(function(e){var t;return{root:(t={},(0,n.Z)(t,e.breakpoints.down("md"),{width:"calc(100% + ".concat(w.padding,"*2px)"),marginLeft:"-".concat(w.padding,"px")}),(0,n.Z)(t,e.breakpoints.up("md"),{width:"calc(100% + ".concat(O.padding,"*2px)"),marginLeft:"-".concat(O.padding,"px")}),t)}})(g)},32419:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>v,iconPropType:()=>y});var n=r(91888),a=r(51894),o=r(65691),i=r(94184),u=r.n(i),c=r(45697),s=r.n(c),l=r(67294),d=["icon","width","height","color","style","className","preserveColor","rotate","size","spin"],f={"icon--spin":"styles__icon--spin___ybfC1",spin:"styles__spin___2Vvw3",icon:"styles__icon___23x3R","icon--preserveColor":"styles__icon--preserveColor___3gBz6",shake:"styles__shake___wT_3z"};function p(e){return e instanceof Function}function h(e){var t,r=e.icon,i=e.width,c=e.height,s=e.color,y=e.style,v=e.className,m=e.preserveColor,g=e.rotate,b=e.size,w=e.spin,O=(0,o.Z)(e,d);if(!r)return null;var k=r.type===h,_="img"===r.type;if(k||_)return r;if("string"==typeof r&&r.includes(".png"))return l.createElement("img",(0,a.Z)({src:r,className:v,style:y,width:i||b||"16",height:c||b||"16"},O));var x=p(r)?r:(t=r.id?"#".concat(r.id):"#"===r[0]?r:"#"+r)?function(e){return l.createElement("svg",e,l.createElement("use",{xlinkHref:t}))}:(console.warn("Icon not found ".concat(r,".")),null),S=y;S=Object.assign({},S),s&&(S.fill=s),g&&(S.transform="rotate(".concat(g,"deg)"));var E=u()(v,f[m?"icon--preserveColor":"icon"],(0,n.Z)({},f["icon--spin"],w));return x?l.createElement(x,(0,a.Z)({className:E,style:S,width:i||b||"16",height:c||b||"16"},O)):null}h.isProperIcon=function(e){var t=e&&!!e.id,r="string"==typeof e,n=p(e);return t||r||n};var y=s().oneOfType([s().string,s().object,s().func]);h.propTypes={icon:y,width:s().oneOfType([s().string,s().number]),height:s().oneOfType([s().string,s().number]),color:s().oneOfType([s().string,s().object]),style:s().object,className:s().string,preserveColor:s().bool,size:s().oneOfType([s().string,s().number]),rotate:s().number,spin:s().bool},h.defaultProps={spin:!1};let v=h},70923:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M4.175 5L8 8.817 11.825 5 13 6.175l-5 5-5-5L4.175 5z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 24 24"},e),a.createElement("path",{d:"M3.968 6.175a1.571 1.571 0 00-2.222 2.222l9.429 9.428a1.571 1.571 0 002.222 0l9.428-9.428a1.571 1.571 0 00-2.222-2.222l-8.317 8.317-8.318-8.317z",fillRule:"evenodd"}))}},72336:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(51894),a=r(67294);let o=function(e){return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("defs",null,a.createElement("path",{d:"M164 261a4 4 0 118 0 4 4 0 110 8h-8a4 4 0 110-8zm1.146 3.854c.155.154.423.368.793.58.618.353 1.31.566 2.061.566.75 0 1.443-.213 2.06-.566.371-.212.64-.426.794-.58a.5.5 0 10-.708-.708 2.934 2.934 0 01-.582.42A3.136 3.136 0 01168 265a3.136 3.136 0 01-1.564-.434 2.934 2.934 0 01-.582-.42.5.5 0 10-.708.708z",id:"cloud_svg__a"})),a.createElement("g",{fillRule:"evenodd",transform:"translate(-160 -255)"},a.createElement("use",{xlinkHref:"#cloud_svg__a"})))}},73690:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M.889 3.556H15.11v1.777H.89V3.556zm0 5.333H15.11V7.11H.89v1.78zm0 3.555H7.11v-1.777H.89v1.777zm0 3.556H7.11v-1.778H.89V16zm10.142-2.516l-1.253-1.262-1.254 1.254L11.031 16l4.08-4.071-1.262-1.262-2.818 2.817zM.89 0v1.778h14.22V0H.89z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.5 4h-3a.5.5 0 010-1h3a.5.5 0 010 1zm0 3h-3a.5.5 0 010-1h3a.5.5 0 010 1zm0 3h-9a.5.5 0 010-1h9a.5.5 0 010 1zm0 3h-9a.5.5 0 010-1h9a.5.5 0 010 1zM3 5V2h4v6L5 6 3 8V5zm11-5H2c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"}))}},78975:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(51894),a=r(67294);let o=function(e){return a.createElement("svg",(0,n.Z)({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm2 0c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0s10 4.477 10 10zm-8.59 1.206c.134.086.33.046.417-.085a.28.28 0 00-.087-.396c-.116-.073-.125-.223-.125-.223a.296.296 0 00-.3-.282h-.006a.306.306 0 00-.21.087.283.283 0 00-.085.21.895.895 0 00.029.183 1.682 1.682 0 01-2.087.004c.03-.11.03-.189.03-.191a.294.294 0 00-.291-.292.285.285 0 00-.213.076.289.289 0 00-.098.204s-.008.15-.126.225a.282.282 0 00-.085.396.315.315 0 00.442.068l.007-.005c.392.295.874.455 1.375.455a2.29 2.29 0 001.379-.456l.033.022zm.766-5.313c.521.502.845 1.153.932 1.856C14.726 7.892 16 9.236 16 10.869 16 12.594 14.574 14 12.822 14H7.177C5.425 14 4 12.595 4 10.868c0-.823.322-1.601.906-2.19a3.179 3.179 0 011.893-.92c.085-.707.41-1.36.933-1.865A3.18 3.18 0 019.954 5a3.18 3.18 0 012.222.893z"}))}},88191:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 12"},e),a.createElement("path",{d:"M2.667 2h12V.667h-12c-.734 0-1.334.6-1.334 1.333v7.333H0v2h9.333v-2H2.667V2zm12.666 1.333h-4c-.366 0-.666.3-.666.667v6.667c0 .366.3.666.666.666h4c.367 0 .667-.3.667-.666V4c0-.367-.3-.667-.667-.667zm-.666 6H12V4.667h2.667v4.666z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M9.734 5.995c0-.55.45-.995.99-.995h4.02a1 1 0 01.99.995v8.01c0 .55-.451.995-.99.995h-4.02a1 1 0 01-.99-.995v-8.01zm2 1.005v6h2V7h-2zm-11-5.002c0-.551.447-.998.998-.998h11.003c.552 0 .999.444.999 1v1h-11v6h5v4H.73c-.55 0-.858-.417-.68-.95L.733 10V1.998z"}))}},75410:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 13"},e),a.createElement("path",{d:"M16 1.6c0-.88-.72-1.6-1.6-1.6H1.6C.72 0 0 .72 0 1.6v9.6c0 .88.72 1.6 1.6 1.6h12.8c.88 0 1.6-.72 1.6-1.6V1.6zm-1.6 0L8 5.6l-6.4-4h12.8zm0 9.6H1.6v-8l6.4 4 6.4-4v8z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M0 2.999A.998.998 0 011 2h14c.552 0 1 .443 1 .999V5L8 8 0 5V2.999zM0 7l8 3 8-3v7.003c0 .55-.445.997-1 .997H1c-.552 0-1-.453-1-.997V7z"}))}},3387:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 17 16"},e),a.createElement("path",{d:"M7.245 16a.748.748 0 01-.52-.2.797.797 0 01-.26-.5l-.24-1.86a3.042 3.042 0 01-.49-.24 6.571 6.571 0 01-.45-.3l-1.74.72a.787.787 0 01-1-.32l-1.48-2.58a.752.752 0 01-.1-.56c.04-.2.14-.36.3-.48l1.5-1.14a1.91 1.91 0 01-.02-.27v-.54c0-.087.007-.177.02-.27l-1.5-1.14a.768.768 0 01-.3-.48.752.752 0 01.1-.56l1.48-2.58a.787.787 0 011-.32l1.74.72c.147-.107.3-.207.46-.3.16-.093.32-.173.48-.24L6.465.7a.797.797 0 01.26-.5.75.75 0 01.52-.2h3c.2 0 .374.067.52.2.147.133.234.3.26.5l.24 1.86c.174.067.337.147.49.24.154.093.304.193.45.3l1.74-.72a.787.787 0 011 .32l1.48 2.58a.75.75 0 01.1.56c-.04.2-.14.36-.3.48l-1.5 1.14c.014.093.02.183.02.27v.54a.984.984 0 01-.04.27l1.5 1.14c.16.12.26.28.3.48a.75.75 0 01-.1.56l-1.48 2.56a.832.832 0 01-.45.36.766.766 0 01-.57-.02l-1.7-.72a5.44 5.44 0 01-.46.3c-.16.093-.32.173-.48.24l-.24 1.86a.798.798 0 01-.26.5.748.748 0 01-.52.2h-3zm.7-1.6h1.58l.28-2.12a4.486 4.486 0 001.15-.47c.354-.207.677-.457.97-.75l1.98.82.78-1.36-1.72-1.3a2.83 2.83 0 00.14-.59 4.93 4.93 0 000-1.26 2.83 2.83 0 00-.14-.59l1.72-1.3-.78-1.36-1.98.84a4.445 4.445 0 00-.97-.77 4.486 4.486 0 00-1.15-.47l-.26-2.12h-1.58l-.28 2.12a4.484 4.484 0 00-1.15.47 4.78 4.78 0 00-.97.75l-1.98-.82-.78 1.36 1.72 1.28c-.066.2-.113.4-.14.6a4.848 4.848 0 000 1.26c.027.2.074.4.14.6l-1.72 1.3.78 1.36 1.98-.84c.294.307.617.563.97.77a4.5 4.5 0 001.15.47l.26 2.12zm.84-3.6c.774 0 1.434-.273 1.98-.82.547-.547.82-1.207.82-1.98 0-.773-.273-1.433-.82-1.98a2.698 2.698 0 00-1.98-.82c-.786 0-1.45.273-1.99.82A2.715 2.715 0 005.985 8c0 .773.27 1.433.81 1.98.54.547 1.204.82 1.99.82z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M14.25 7.078c.051.26.077.568.077.926 0 .358-.026.665-.078.925l1.62 1.333c.131.086.163.203.099.352-.325.95-.859 1.826-1.602 2.628-.104.124-.229.155-.37.094l-2.032-.668c-.52.396-1.08.705-1.68.926l-.409 2c-.026.146-.117.233-.273.258-.56.1-1.094.148-1.602.148a9.21 9.21 0 01-1.601-.148c-.157-.024-.248-.11-.274-.259l-.409-1.999a5.98 5.98 0 01-1.68-.926l-2.03.668c-.145.062-.268.03-.372-.094C.892 12.44.359 11.565.032 10.614c-.065-.148-.032-.266.098-.352L1.751 8.93a4.761 4.761 0 01-.078-.925c0-.358.026-.667.078-.926L.131 5.746C0 5.66-.034 5.542.031 5.394c.326-.95.86-1.826 1.602-2.627.104-.123.228-.154.371-.093l2.031.667a5.99 5.99 0 011.68-.926l.41-1.999c.025-.148.116-.234.273-.259a8.221 8.221 0 013.202 0c.156.024.247.111.273.26l.41 1.998c.6.223 1.159.53 1.68.926l2.03-.667c.143-.062.267-.03.371.093.742.802 1.276 1.678 1.602 2.627.064.148.032.266-.098.352l-1.62 1.332zM8 4.5a3.5 3.5 0 100 7 3.5 3.5 0 000-7z",fillRule:"evenodd"}))}},73806:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 0C3.584 0 0 3.584 0 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zM1.6 8c0-.488.064-.968.168-1.424L5.592 10.4v.8c0 .88.72 1.6 1.6 1.6v1.544C4.048 13.944 1.6 11.256 1.6 8zm11.112 4.32a1.594 1.594 0 00-1.52-1.12h-.8V8.8c0-.44-.36-.8-.8-.8h-4.8V6.4h1.6c.44 0 .8-.36.8-.8V4h1.6c.88 0 1.6-.72 1.6-1.6v-.328A6.403 6.403 0 0114.4 8a6.393 6.393 0 01-1.688 4.32z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M7.889 13.999L7 10 6 9 4 6l-.355-2.128A6 6 0 007.888 14zm.238-11.998L10 3.5V5L8 6.5l-1.5 1 .5 1 3 .5 1 1v1.5l-1.549 2.323A6 6 0 008.127 2.001zM8 16A8 8 0 118 0a8 8 0 010 16z"}))}},16385:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8.8 0v2.424c2.712.392 4.8 2.712 4.8 5.536 0 .72-.144 1.4-.384 2.032l2.08 1.224A7.9 7.9 0 0016 7.96C16 3.816 12.84.4 8.8 0zM8 13.56a5.596 5.596 0 01-5.6-5.6c0-2.824 2.088-5.144 4.8-5.536V0A7.993 7.993 0 000 7.96c0 4.416 3.576 8 7.992 8a7.98 7.98 0 006.448-3.272l-2.08-1.224A5.56 5.56 0 018 13.56z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M7 16A7 7 0 017 2v7h7a7 7 0 01-7 7zm2-9V0a7 7 0 017 7H9z"}))}},3473:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 13 16"},e),a.createElement("path",{d:"M12.413 4.667a1.667 1.667 0 00-2-1.634v-.366A1.667 1.667 0 008.3 1.06 1.673 1.673 0 006.746 0c-.82 0-1.5.593-1.64 1.373A1.667 1.667 0 003.08 3v3.927a1.935 1.935 0 00-.813-.44l-.513-.14a1.315 1.315 0 00-1.46.553c-.253.38-.267.873-.1 1.3L1.9 12.487A5.57 5.57 0 007.08 16a5.332 5.332 0 005.333-5.333v-6zm-1.333 6c0 2.206-1.794 4-4 4-1.74 0-3.3-1.06-3.94-2.674l-1.734-4.36.354.094c.306.08.553.306.666.6L3.08 10h1.333V3a.33.33 0 01.333-.333A.33.33 0 015.08 3v5h1.333V1.667a.33.33 0 01.333-.334.33.33 0 01.334.334V8h1.333V2.667a.33.33 0 01.333-.334.33.33 0 01.334.334V8h1.333V4.667a.33.33 0 01.333-.334.33.33 0 01.334.334v6z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 15 16"},e),a.createElement("path",{d:"M14.992 8V5a1.001 1.001 0 00-2 0v3h-1V2a1.001 1.001 0 00-2 0v5h-1V1a1.001 1.001 0 00-2 0v6h-1V2c0-.551-.45-1-1-1-.551 0-1 .449-1 1v6.5a.5.5 0 01-.88.325L1.1 6.125c-.222-.182-.64-.166-.897.091a.7.7 0 00-.075.898c.064.117 1.542 4.144 3.227 6.798A4.486 4.486 0 007.156 16h3.336c2.48 0 4.5-2.019 4.5-4.5V8z"}))}},58896:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 0C3.584 0 0 3.584 0 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm.8 13.6H7.2V12h1.6v1.6zm1.656-6.2l-.72.736C9.16 8.72 8.8 9.2 8.8 10.4H7.2V10c0-.88.36-1.68.936-2.264l.992-1.008C9.424 6.44 9.6 6.04 9.6 5.6 9.6 4.72 8.88 4 8 4c-.88 0-1.6.72-1.6 1.6H4.8a3.2 3.2 0 116.4 0c0 .704-.288 1.344-.744 1.8z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M8 16A8 8 0 118 0a8 8 0 010 16zm1-7.198C10.122 8.355 11 7.21 11 6c0-1.552-1.448-3-3-3S5 4.448 5 6h2c0-.448.552-1 1-1 .448 0 1 .552 1 1 0 .448-.552 1-1 1a1 1 0 00-1 1v2h2V8.802zM7 11v2h2v-2H7z"}))}},26712:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8.8 4.664A2.413 2.413 0 0010.264 3.2H12.8l-2.4 5.6c0 1.328 1.256 2.4 2.8 2.4 1.544 0 2.8-1.072 2.8-2.4l-2.4-5.6h1.6V1.6h-4.936A2.392 2.392 0 008 0a2.392 2.392 0 00-2.264 1.6H.8v1.6h1.6L0 8.8c0 1.328 1.256 2.4 2.8 2.4 1.544 0 2.8-1.072 2.8-2.4L3.2 3.2h2.536c.24.68.784 1.224 1.464 1.464V13.6H0v1.6h16v-1.6H8.8V4.664zM14.696 8.8h-2.992L13.2 5.312 14.696 8.8zm-10.4 0H1.304L2.8 5.312 4.296 8.8zM8 3.2c-.44 0-.8-.36-.8-.8 0-.44.36-.8.8-.8.44 0 .8.36.8.8 0 .44-.36.8-.8.8z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0c1.306 0 2.418.835 2.83 2H14a1 1 0 01.139 1.99l1.825 3.824a.499.499 0 01.036.198V8.5a2.5 2.5 0 01-5 0v-.49a.5.5 0 01.036-.196L12.857 4H10.83A3.008 3.008 0 019 5.83V13h6a1 1 0 110 2H1a1 1 0 110-2h6V5.83A3.008 3.008 0 015.17 4H3.144l1.821 3.814A.498.498 0 015 8.012V8.5a2.5 2.5 0 01-5 0v-.49a.498.498 0 01.036-.196l1.826-3.823A1 1 0 012 2h3.17A3.001 3.001 0 018 0zm5.5 5.346L14.935 8h-2.87L13.5 5.346zM1.065 8h2.87L2.5 5.346 1.065 8zM8 4a1 1 0 100-2 1 1 0 000 2z"}))}},43738:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M12.444 4.444l-1.253 1.254 1.405 1.413H5.333V8.89h7.263l-1.405 1.404 1.253 1.263L16 8l-3.556-3.556zM1.778 1.778H8V0H1.778C.8 0 0 .8 0 1.778v12.444C0 15.2.8 16 1.778 16H8v-1.778H1.778V1.778z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.586 9H5a1 1 0 110-2h7.586l-1.293-1.293a1 1 0 111.414-1.414l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L12.586 9zM0 1a1 1 0 112 0v14a1 1 0 01-2 0V1z"}))}},19034:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M14.222 14.222H1.778V1.778H8V0H1.778C.79 0 0 .8 0 1.778v12.444C0 15.2.791 16 1.778 16h12.444C15.2 16 16 15.2 16 14.222V8h-1.778v6.222zM9.778 0v1.778h3.19l-8.737 8.738 1.253 1.253 8.738-8.738v3.191H16V0H9.778z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M9 0v2h3.5L6 8.5 7.5 10 14 3.5V7h2V1.003A.996.996 0 0014.997 0H9zM7 2V0H1.003A1 1 0 000 1v14c0 .552.445 1 1 1h14c.552 0 1-.438 1-1.003V9h-2v5H2V2h5z",fillRule:"evenodd"}))}},41286:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 16c-4.408 0-8-3.592-8-8 0-4.408 3.592-8 8-8 4.408 0 8 3.232 8 7.2 0 2.648-2.152 4.8-4.8 4.8H9.784c-.224 0-.4.176-.4.4 0 .096.04.184.104.264.328.376.512.848.512 1.336a2 2 0 01-2 2zM8 1.6A6.408 6.408 0 001.6 8c0 3.528 2.872 6.4 6.4 6.4.224 0 .4-.176.4-.4a.433.433 0 00-.112-.28 1.986 1.986 0 01-.504-1.32 2 2 0 012-2H11.2a3.2 3.2 0 003.2-3.2c0-3.088-2.872-5.6-6.4-5.6z"}),a.createElement("path",{d:"M3.6 8.8a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zM6 5.6a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zm4 0a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zm2.4 3.2a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.889 8a1.333 1.333 0 110-2.667 1.333 1.333 0 010 2.667zm-2.667-3.556a1.333 1.333 0 110-2.666 1.333 1.333 0 010 2.666zm-4.444 0a1.333 1.333 0 110-2.666 1.333 1.333 0 010 2.666zM3.11 8a1.333 1.333 0 110-2.667A1.333 1.333 0 013.11 8zM8 0a8 8 0 100 16c.736 0 1.333-.597 1.333-1.333a1.31 1.31 0 00-.346-.89 1.333 1.333 0 01.996-2.222h1.573A4.444 4.444 0 0016 7.112C16 3.182 12.418 0 8 0z"}))}},43068:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 1.9a2.1 2.1 0 110 4.2 2.1 2.1 0 010-4.2zm0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H1.9V13c0-.64 3.13-2.1 6.1-2.1zM8 0C5.79 0 4 1.79 4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M8 9c2.21 0 4-2.015 4-4.5S10.21 0 8 0 4 2.015 4 4.5 5.79 9 8 9zm-8 5c0-1 2-4 4-4s1 1 4 1 2-1 4-1 4 3 4 4 0 2-1 2H1c-1 0-1-1-1-2z"}))}},4314:function(e,t,r){"use strict";r.d(t,{Z:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e,{role:"progressbar","aria-busy":"true"}),a.createElement("path",{d:"M8 16a7.74 7.74 0 01-3.1-.63 8.114 8.114 0 01-2.55-1.72A8.115 8.115 0 01.63 11.1 7.74 7.74 0 010 8c0-1.107.21-2.143.63-3.11a8.146 8.146 0 011.72-2.54A8.114 8.114 0 014.9.63 7.74 7.74 0 018 0c.227 0 .417.077.57.23.153.153.23.343.23.57a.774.774 0 01-.23.57.774.774 0 01-.57.23c-1.773 0-3.283.623-4.53 1.87C2.223 4.717 1.6 6.227 1.6 8c0 1.773.623 3.283 1.87 4.53C4.717 13.777 6.227 14.4 8 14.4c1.773 0 3.283-.623 4.53-1.87C13.777 11.283 14.4 9.773 14.4 8c0-.227.077-.417.23-.57a.774.774 0 01.57-.23c.227 0 .417.077.57.23.153.153.23.343.23.57a7.74 7.74 0 01-.63 3.1 8.115 8.115 0 01-1.72 2.55 8.146 8.146 0 01-2.54 1.72A7.72 7.72 0 018 16z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 32 32"},e,{role:"progressbar","aria-busy":"true"}),a.createElement("path",{opacity:.25,d:"M16 0a16 16 0 000 32 16 16 0 000-32m0 4a12 12 0 010 24 12 12 0 010-24"}),a.createElement("path",{d:"M16 0a16 16 0 0116 16h-4A12 12 0 0016 4z"}))}},3745:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(51894),a=r(67294),o=r(92951);let i=function(e){if((0,o.g)())return a.createElement("svg",(0,n.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M3.41 11.705L8 7.125l4.59 4.58 1.41-1.41-6-6-6 6 1.41 1.41z"}));return a.createElement("svg",(0,n.Z)({viewBox:"0 0 24 24"},e),a.createElement("path",{d:"M20.603 17.825a1.571 1.571 0 002.222-2.222l-9.428-9.428a1.571 1.571 0 00-2.222 0l-9.429 9.428a1.571 1.571 0 002.222 2.222l8.318-8.317 8.317 8.317z",fillRule:"evenodd"}))}},24546:function(e,t,r){"use strict";r.r(t),r.d(t,{BorderedList:()=>a,default:()=>o});var n=r(62822),a=(0,r(68893).Z)({root:{borderTop:"1px solid var(--silver)"}})(n.Z);let o=n.Z},96105:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>h,largeSize:()=>f,mediumSize:()=>d,smallSize:()=>l});var n=r(51894),a=r(65691),o=r(46869),i=r(94184),u=r.n(i),c=r(67294),s=["className"],l=16,d=24,f=32,p=(0,c.forwardRef)(function(e,t){var r=e.className,i=(0,a.Z)(e,s);return c.createElement(o.Z,(0,n.Z)({},i,{ref:t,className:u()(r,"cozyListItemIcon")}))});p.displayName="ListItemIcon";let h=p},11075:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>g});var n=r(51894),a=r(65691),o=r(91888),i=r(95757),u=r(94184),c=r.n(u),s=r(51463),l=r.n(s),d=r(67294),f=["primaryText","secondaryText","primaryTextClassName","secondaryTextClassName","primary","secondary","ellipsis"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var h=l()(function(){console.warn('primaryText/primaryTextClassName and secondaryText/secondaryTextClassName are deprecated. Please use directly the primary prop : primary={<span className="u-error">Error</span>} for example.')}),y={variant:"caption"},v=function(e,t,r){return t||r?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({classes:{root:c()(t,r&&"u-db u-ellipsis")}},e):e},m=(0,d.forwardRef)(function(e,t){var r=e.primaryText,o=e.secondaryText,u=e.primaryTextClassName,c=e.secondaryTextClassName,s=e.primary,l=e.secondary,p=e.ellipsis,m=(0,a.Z)(e,f);(0,d.useEffect)(function(){(r||o||u||c)&&h()},[r,o,u,c]);var g=s||r,b=l||o,w=e.primaryTypographyProps,O=e.secondaryTypographyProps;return w=(0,d.useMemo)(function(){return v(w,u,p)},[w,u,p]),O=(0,d.useMemo)(function(){return v(O||y,c,p)},[O,c,p]),d.createElement(i.Z,(0,n.Z)({ref:t,primary:g,secondary:b,primaryTypographyProps:w,secondaryTypographyProps:O},m))});m.displayName="ListItemText",m.defaultProps={ellipsis:!0};let g=m},9758:function(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>n});let n=r(79895).Z},96716:function(e,t,r){"use strict";r.r(t),r.d(t,{CircularProgress:()=>a.Z,LinearProgress:()=>n.Z});var n=r(33681),a=r(95477)},32692:function(e,t,r){"use strict";r.d(t,{Z:()=>c});var n=r(51894),a=r(65691),o=r(22318),i=r(67294),u=["color","variant","children"];let c=(0,i.forwardRef)(function(e,t){var r=e.color,c=e.variant,s=e.children,l=(0,a.Z)(e,u);return i.createElement(o.Z,(0,n.Z)({ref:t,variant:c,color:r||("caption"===c?"textSecondary":"textPrimary")},l),s)})},36198:function(e,t,r){"use strict";r.r(t),r.d(t,{Button:()=>k,ButtonLink:()=>_,default:()=>x});var n=r(51894),a=r(65691),o=r(91888),i=r(94184),u=r.n(i),c=r(45697),s=r.n(c),l=r(67294),d=r(32419),f=r(4314),p=["busy","disabled"],h=["children","icon","iconOnly","label","subtle","className","extension","round","size","theme","align","extraRight","tag"],y={"c-btn":"styles__c-btn___3kXsk","c-btn--regular":"styles__c-btn--regular___1ilYT","c-btn--ghost":"styles__c-btn--ghost___Md7mm","c-btn--highlight":"styles__c-btn--highlight___GlDOj","c-btn--alpha":"styles__c-btn--alpha___2-bRT","c-btn--action":"styles__c-btn--action___3z98K","c-btn--close":"styles__c-btn--close___C19bl","c-btn--danger":"styles__c-btn--danger___wzHFo","c-btn--secondary":"styles__c-btn--secondary___1hLVM","c-btn--danger-outline":"styles__c-btn--danger-outline___BCng5","c-btn--text":"styles__c-btn--text___33vmu","c-btn--left":"styles__c-btn--left___3f1zH","c-btn--center":"styles__c-btn--center___Nny0n","c-btn--right":"styles__c-btn--right___1B9Tn","c-btn--tiny":"styles__c-btn--tiny___fK37G","c-btn--small":"styles__c-btn--small___9JKyq","c-btn--large":"styles__c-btn--large___3PnsT","c-btn--full":"styles__c-btn--full___1VumB","c-btn--narrow":"styles__c-btn--narrow___erKsd","c-btn--round":"styles__c-btn--round___35GfW","c-btn--subtle":"styles__c-btn--subtle___2rRQ0",spin:"styles__spin___3VrS0",shake:"styles__shake___1yyjR"},v=function(e){var t,r=e.className,n=e.extension,a=e.size,i=e.theme,c=e.variant,s=e.round,l=e.align;return u()(y["c-btn"],(t={},(0,o.Z)(t,y["c-btn--".concat(i)],i),(0,o.Z)(t,y["c-btn--".concat(a)],"normal"!==a),(0,o.Z)(t,y["c-btn--".concat(c)],c),(0,o.Z)(t,y["c-btn--".concat(n)],n),(0,o.Z)(t,y["c-btn--".concat(l)],l),(0,o.Z)(t,y["c-btn--round"],s),t),r)},m=function(e){return function(t){var r=t.busy,n=t.disabled,o=(0,a.Z)(t,p);return r&&(o["aria-busy"]=!0),n&&(o["aria-disabled"]=!0),"button"===e&&n&&(o.disabled=!0),o}},g={button:m("button"),a:m("a")},b=function(e){return e},w={tiny:8,small:12,large:18},O=function(e){var t=e.children,r=e.icon,o=e.iconOnly,i=e.label,u=e.subtle,c=e.className,s=e.extension,p=e.round,y=e.size,m=e.theme,O=e.align,k=e.extraRight,_=e.tag,x=(0,a.Z)(e,h),S=g[_]||b,E=o?i:null;return l.createElement(_,(0,n.Z)({},S(x),{className:v({extension:s,align:O,round:p,size:y,theme:m,className:c,variant:u&&"subtle"}),title:E}),l.createElement("span",null,d.default.isProperIcon(r)?l.createElement(d.default,{size:w[y],icon:r,"aria-hidden":!0,focusable:"false"}):r,i&&l.createElement("span",{className:o?"u-visuallyhidden":null},i),t,k&&l.createElement("span",{className:"u-ml-auto"},k),x.busy&&l.createElement(d.default,{size:w[y],icon:f.Z,spin:!0,className:"u-ml-half","aria-hidden":!0,focusable:"false"})))},k=function(e){return l.createElement(O,e)},_=function(e){return l.createElement(O,e)};let x=function(e){return e.tag?l.createElement(O,e):l.createElement(k,e)};k.propTypes={children:s().node,label:s().node.isRequired,icon:s().oneOfType([s().node,d.iconPropType]),iconOnly:s().bool,theme:s().string,size:s().oneOf(["tiny","small","large","normal"]),extension:s().oneOf(["narrow","full"]),align:s().oneOf(["left","right","center"]),round:s().bool,className:s().string,onClick:s().func,extraRight:s().PropTypes.node,busy:s().bool,disabled:s().bool,type:s().oneOf(["button","reset","submit"]),subtle:s().bool},k.defaultProps={type:"submit",tag:"button",size:"normal",align:"center"},_.defaultProps={tag:"a"}},41170:function(e,t,r){"use strict";r.d(t,{Z:()=>n});let n=function(){return navigator&&navigator.userAgent&&navigator.userAgent.includes("Argos")}},92951:function(e,t,r){"use strict";r.d(t,{g:()=>a});var n=r(71400),a=function(){return(0,n.default)("ui.theme-twake.enabled")||"Twake"===localStorage.getItem("ui-theme-name")}},32202:function(e,t,r){"use strict";r.d(t,{q6:()=>a,wn:()=>i,ym:()=>o});var n=r(25976),a=!!document.getElementById("rsg-root"),o=a?function(){var e,t=(null===(e=JSON.parse(localStorage.getItem("flagship-app")))||void 0===e?void 0:e.contained)==="on";return{immersive:!t,statusBarHeight:40*!t,navbarHeight:40*!t}}:n.getFlagshipMetadata,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topBackground,r=e.topOverlay,n=e.topTheme,o=e.bottomBackground,i=e.bottomOverlay,u=e.bottomTheme;if(a){var c=document.getElementsByTagName("body")[0];t&&c.style.setProperty("--flagship-top-bgcolor",t),r&&c.style.setProperty("--flagship-top-overlay",r),n&&c.style.setProperty("--flagship-top-color","dark"===n?"black":"white"),o&&c.style.setProperty("--flagship-bottom-bgcolor",o),i&&c.style.setProperty("--flagship-bottom-overlay",i),u&&c.style.setProperty("--flagship-bottom-color","dark"===u?"black":"white")}}},72339:function(e,t,r){"use strict";r.r(t),r.d(t,{useBreakpoints:()=>h,default:()=>y,BreakpointsProvider:()=>p});var n=r(31573),a=r(23493),o=r.n(a),i=r(67294),u=r(66604),c=r.n(u),s=function(e){var t=window.innerWidth;return c()(e,function(e){var r=(0,n.Z)(e,2),a=r[0],o=r[1];return t>=a&&(void 0===o||t<=o)})};let l={isExtraLarge:[1201],isLarge:[1024,1200],isMedium:[769,1023],isSmall:[544,768],isTiny:[0,543],isDesktop:[1024],isTablet:[769,1023],isMobile:[0,768]};var d=function(){return s(l)},f=(0,i.createContext)(null),p=function(e){var t=e.children,r=(0,i.useState)(d()),a=(0,n.Z)(r,2),u=a[0],c=a[1];return(0,i.useEffect)(function(){var e=o()(function(){c(d())},100);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),i.createElement(f.Provider,{value:u},t)},h=function(){var e=(0,i.useContext)(f);if(null===e)throw Error("Cannot use useBreakpoints without BreakpointsProvider. The component must have a BreakpointsProvider above it.");return e};let y=h},24060:function(e,t,r){"use strict";r.r(t),r.d(t,{CozyThemeContext:()=>eo,default:()=>ec,useCozyTheme:()=>ei});var n=r(65691),a=r(45697),o=r.n(a),i=r(67294),u=r(33918),c=r.n(u),s=r(51894),l=r(16396),d=r(91888),f=r(94184),p=r.n(f),h=r(14106),y=r(59693),v=r(92951),m=function(e,t){var r=(0,v.g)()?"Twake":"Cozy";return"".concat(r,"Theme--").concat(e,"-").concat(t)},g=function(e,t){var r=m(e,t);return document.getElementsByClassName(r)[0]},b=function(e,t){if(!g(e,t)){var r=document.createElement("div");r.className=m(e,t),r.style.display="none",document.body.prepend(r)}},w=function(e,t,r){var n=g(t,r);return window.getComputedStyle(n).getPropertyValue("--".concat(e)).trim()},O=function(e,t,r){return w(e,t,r)},k=function(e){var t=e.theme,r=e.severity;return{standard:(0,y.Fq)(t.palette[r].main,t.palette.background.contrastOpacity),outlined:t.palette[r].main,filled:t.palette[r].main}},_=function(e,t){return{"&-standard":{color:e.palette.text.primary,backgroundColor:k({theme:e,severity:t}).standard,"& $icon":{color:"secondary"===t?e.palette.text.primary:e.palette[t].main},"& $action":{'& button[title="Close"]':{color:e.palette.text.secondary}}},"&-outlined":{color:e.palette.text.primary,border:"1px solid ".concat(k({theme:e,severity:t}).outlined),"& $icon":{color:"secondary"===t?e.palette.text.primary:e.palette[t].main}},"&-filled":{color:e.palette[t].contrastText,backgroundColor:k({theme:e,severity:t}).filled,"& $action":{'& button[title="Close"]':{color:e.palette[t].contrastText}}}}},x=function(e,t){return{color:e.palette.text[t]||e.palette[t].main,borderColor:"primary"===t?e.palette.border.main:(0,y.Fq)(e.palette[t].main,e.palette.border.opacity),"&$clickable, &$deletable":{"&:hover, &:focus":{borderColor:"primary"===t?e.palette.border.main:(0,y.Fq)(e.palette[t].main,e.palette.border.opacity),backgroundColor:"primary"===t?e.palette.action.hover:(0,y.Fq)(e.palette[t].main,e.palette.action.hoverOpacity)}},"& $icon":{color:"primary"===t?e.palette.text.icon:e.palette[t].main,fill:"primary"===t?e.palette.text.icon:e.palette[t].main},"& $deleteIcon":{color:"primary"===t?e.palette.text.secondary:e.palette[t].main,fill:"primary"===t?e.palette.text.secondary:e.palette[t].main},"&$colorPrimary":{padding:"0 1px",color:e.palette[t].contrastText,backgroundColor:e.palette[t].main,"& $icon, & $deleteIcon":{color:e.palette[t].contrastText,fill:e.palette[t].contrastText},"&$disabled":{opacity:1,color:e.palette.text.disabled,backgroundColor:e.palette.action.disabledBackground,"& $icon, & $deleteIcon":{color:e.palette.text.disabled,fill:e.palette.text.disabled}},"&$clickable, &$deletable":{"&:hover, &:focus":{backgroundColor:e.palette[t].dark}}},"&.ghost":{borderWidth:"1px",borderStyle:"dashed","&:not($disabled)":{color:e.palette[t].main,borderColor:(0,y.Fq)(e.palette[t].main,e.palette.border.ghostOpacity),backgroundColor:(0,y.Fq)(e.palette[t].main,e.palette.action.ghostOpacity),"& $icon, & $deleteIcon":{color:e.palette[t].main,fill:e.palette[t].main}},"&$clickable, &$deletable":{"&:hover, &:focus":{borderColor:(0,y.Fq)(e.palette[t].main,e.palette.border.ghostOpacity),backgroundColor:(0,y.Fq)(e.palette[t].main,e.palette.action.hoverGhostOpacity)}}}}},S=function(e,t){return{color:e.palette[t].main,borderColor:e.palette[t].main,"&:hover":{backgroundColor:(0,y.Fq)(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&.ghost":{backgroundColor:(0,y.Fq)(e.palette[t].main,e.palette.action.ghostOpacity),"&:hover":{backgroundColor:(0,y.Fq)(e.palette[t].main,e.palette.action.hoverGhostOpacity),"@media (hover: none)":{backgroundColor:(0,y.Fq)(e.palette[t].main,e.palette.action.ghostOpacity)}}}}},E=function(e,t){return{color:e.palette[t].main,"&:hover":{backgroundColor:(0,y.Fq)(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}},P=function(e,t){return{color:e.palette[t].contrastText,backgroundColor:e.palette[t].main,"&:hover":{backgroundColor:e.palette[t].dark,"@media (hover: none)":{backgroundColor:e.palette[t].main}}}},C=function(e){return"var(--flagship-".concat(e,"-height, 0px)")},A=r(82492),j=r.n(A),T={light:{normal:{action:{hoverOpacity:.04,selectedOpacity:.08,disabledOpacity:.32,focusOpacity:.12,activatedOpacity:.12,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.32,ghostOpacity:.48},background:{contrastOpacity:.12}},inverted:{action:{hoverOpacity:.08,selectedOpacity:.16,disabledOpacity:.32,focusOpacity:.25,activatedOpacity:.24,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.48,ghostOpacity:.48},background:{contrastOpacity:.24}}},dark:{normal:{action:{hoverOpacity:.08,selectedOpacity:.16,disabledOpacity:.32,focusOpacity:.24,activatedOpacity:.24,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.48,ghostOpacity:.48},background:{contrastOpacity:.24}},inverted:{action:{hoverOpacity:.04,selectedOpacity:.08,disabledOpacity:.32,focusOpacity:.12,activatedOpacity:.12,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.32,ghostOpacity:.48},background:{contrastOpacity:.12}}}},M=function(e,t){var r={type:e,variant:t,primary:{light:O("primaryColorLight",e,t),main:O("primaryColor",e,t),dark:O("primaryColorDark",e,t),contrastText:O("primaryContrastTextColor",e,t)},secondary:{light:O("secondaryColorLight",e,t),main:O("secondaryColor",e,t),dark:O("secondaryColorDark",e,t),contrastText:O("secondaryContrastTextColor",e,t)},error:{light:O("errorColorLight",e,t),main:O("errorColor",e,t),dark:O("errorColorDark",e,t),contrastText:O("errorColorContrastText",e,t)},warning:{light:O("warningColorLight",e,t),main:O("warningColor",e,t),dark:O("warningColorDark",e,t),contrastText:O("warningColorContrastText",e,t)},success:{light:O("successColorLight",e,t),main:O("successColor",e,t),dark:O("successColorDark",e,t),contrastText:O("successColorContrastText",e,t)},info:{light:O("infoColorLight",e,t),main:O("infoColor",e,t),dark:O("infoColorDark",e,t),contrastText:O("infoColorContrastText",e,t)},text:{primary:O("primaryTextColor",e,t),secondary:O("secondaryTextColor",e,t),disabled:O("disabledTextColor",e,t),hint:O("hintTextColor",e,t),icon:O("iconTextColor",e,t)},grey:{50:O("grey50",e,t),100:O("grey100",e,t),200:O("grey200",e,t),300:O("grey300",e,t),400:O("grey400",e,t),500:O("grey500",e,t),600:O("grey600",e,t),700:O("grey700",e,t),800:O("grey800",e,t),900:O("grey900",e,t),A100:O("greyA100",e,t),A200:O("greyA200",e,t),A400:O("greyA400",e,t),A700:O("greyA700",e,t)},divider:O("dividerColor",e,t),action:{active:O("actionColorActive",e,t),hover:O("actionColorHover",e,t),selected:O("actionColorSelected",e,t),disabled:O("actionColorDisabled",e,t),disabledBackground:O("actionColorDisabledBackground",e,t),focus:O("actionColorFocus",e,t),ghost:O("actionColorGhost",e,t),hoverGhost:O("actionColorHoverGhost",e,t)},border:{main:O("borderMainColor",e,t),disabled:O("borderDisabledColor",e,t),ghost:O("borderGhostColor",e,t),ghostDisabled:O("borderGhostDisabledColor",e,t)},background:{default:O("defaultBackgroundColor",e,t),paper:O("paperBackgroundColor",e,t),contrast:O("contrastBackgroundColor",e,t),selected:"#F5FAFF"}};return j()(r,T[e][t])};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){(0,d.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I=function(e){var t,r,n,a;return{MuiSelect:{iconOutlined:{top:"auto",right:14},outlined:{"&&":{paddingRight:39}}},MuiOutlinedInput:{root:{borderRadius:4,"&$disabled":{background:e.palette.background.contrast},"&$focused $notchedOutline":{borderWidth:"0.0625rem"},"&$error $notchedOutline":{borderColor:(0,y.Fq)(e.palette.error.main,e.palette.border.opacity)},"&$focused&$error $notchedOutline":{borderColor:e.palette.error.main},"&:hover $notchedOutline":{borderColor:e.palette.text.hint},"&:hover&$error $notchedOutline":{borderColor:e.palette.error.main}},notchedOutline:{borderColor:e.palette.border.main,transition:"border-color ".concat(e.transitions.duration.shorter,"ms")},input:{textAlign:"left",padding:"18.5px 16px"},inputMarginDense:{paddingTop:14,paddingBottom:15}},MuiInputLabel:{outlined:{"&$marginDense":{transform:"translate(14px, 14px) scale(1)"},"&:not($shrink)":{"&$error":{color:e.palette.text.secondary}}}},MuiButton:{root:{borderRadius:2,height:"2.5rem",lineHeight:"normal",padding:"0 1rem","&.ghost":{borderStyle:"dashed !important","&:hover":{borderStyle:"dashed !important"}}},sizeSmall:{height:"2rem",padding:"0 0.75rem","&$text":{padding:"8px 6px"}},sizeLarge:{height:"3rem",padding:"0 1.25rem","&$text":{padding:"14px 10px"}},text:{minWidth:"auto",padding:"11px 8px","&:not($disabled)":{"&.customColor":{"&-success":E(e,"success"),"&-warning":E(e,"warning"),"&-error":E(e,"error"),"&-info":E(e,"info")}}},outlined:{"&:not($disabled)":{"&.ghost":{backgroundColor:(0,y.Fq)(e.palette.primary.main,e.palette.action.ghostOpacity),"&:hover":{backgroundColor:(0,y.Fq)(e.palette.primary.main,e.palette.action.hoverGhostOpacity),"@media (hover: none)":{backgroundColor:(0,y.Fq)(e.palette.primary.main,e.palette.action.ghostOpacity)}}},"&.customColor":{"&-primary":{color:e.palette.text.primary,borderColor:e.palette.border.main,"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.ghost":{color:e.palette.primary.main,borderColor:(0,y.Fq)(e.palette.primary.main,e.palette.border.ghostOpacity)}},"&-success":S(e,"success"),"&-warning":S(e,"warning"),"&-error":S(e,"error"),"&-info":S(e,"info")}}},contained:{boxShadow:0,"&:not($disabled)":{"&.customColor":{"&-success":P(e,"success"),"&-warning":P(e,"warning"),"&-error":P(e,"error"),"&-info":P(e,"info")}}},startIcon:{marginLeft:"0 !important"}},MuiTabs:{root:{"&.segmented":{borderRadius:"99px",backgroundColor:e.palette.background.contrast,overflow:"visible",minHeight:"2.5rem","& $indicator":{top:"1px",height:"calc(100% - 2px)",transform:"scale(0.99)",borderRadius:"99px",zIndex:0,boxShadow:e.shadows[1],backgroundColor:e.palette.background.paper},"& $fixed":{overflow:"visible !important"},"& $scrollButtons":{borderRadius:"99px"}}}},MuiTab:{root:R(R({},e.typography.subtitle2),{},{"&:hover":{color:e.palette.text.primary,opacity:1},"&:focus":{color:e.palette.text.primary},"&.narrowed":(0,d.Z)({minWidth:"auto"},e.breakpoints.up("sm"),{minWidth:"auto"}),"&.segmented":R(R({},e.typography.body2),{},{textTransform:"initial",zIndex:1,borderRadius:"99px",minHeight:"2.5rem","&$selected":{color:e.palette.text.primary}})})},MuiAccordion:{rounded:{borderRadius:e.shape.borderRadius},root:{boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.08)",borderWidth:"0.0625rem",borderStyle:"solid",borderColor:e.palette.border.main,overflow:"hidden",marginBottom:"1rem"}},MuiAccordionSummary:{expanded:{},root:{backgroundColor:e.palette.grey[100],textTransform:"uppercase",fontWeight:"bold",fontSize:"0.875rem",minHeight:"3.5rem",padding:0,color:e.palette.text.primary,"&$expanded":{minHeight:"3.5rem"}},expandIcon:{order:0,"&&":{marginLeft:"0.3125rem"},transform:"rotate(-90deg)","&$expanded":{marginLeft:"0.3125rem",transform:"rotate(0)"}},content:{margin:"0.75rem 0",paddingLeft:"0.5rem",paddingRight:"0.25rem",order:1,"& > :last-child":{paddingRight:0},"&$expanded":{margin:"0.75rem 0"}}},MuiAccordionDetails:{root:{padding:0,borderTop:"0.0625rem solid ".concat(e.palette.border.main)}},MuiStepConnector:{line:{borderColor:e.palette.divider}},MuiStepContent:{root:{borderColor:e.palette.divider}},MuiStepLabel:{label:R(R({},e.typography.body1),{},{"&$active":R({},e.typography.h6),"&$completed":R({},e.typography.h6)})},MuiListItemIcon:{root:{minWidth:"auto",width:32,height:32,alignItems:"center",justifyContent:"center",color:e.palette.text.icon}},MuiListItem:{root:{gap:16,paddingTop:12,paddingBottom:12,minHeight:56,"&.small":{paddingTop:8,paddingBottom:8,minHeight:48},"&.large":{paddingTop:16,paddingBottom:16,minHeight:64},"&.cozyActionsItem":{wordBreak:"break-word"}},dense:{paddingTop:8,paddingBottom:8,minHeight:48,"&.small":{paddingTop:4,paddingBottom:4,minHeight:40},"&.large":{paddingTop:12,paddingBottom:12,minHeight:56}}},MuiListSubheader:{root:R(R({},e.typography.subtitle2),{},{paddingBottom:8,paddingTop:8,marginBottom:"0.5rem",backgroundColor:e.palette.background.contrast}),sticky:{backgroundColor:e.palette.background.default}},MuiListItemText:{root:{marginTop:1,marginBottom:1},multiline:{marginTop:1,marginBottom:1},secondary:{marginTop:1}},MuiListItemSecondaryAction:{root:{right:0}},MuiMenu:{paper:{maxWidth:320}},MuiMenuItem:{root:(t={whiteSpace:"normal",overflow:"auto",wordBreak:"break-word",paddingTop:4,paddingBottom:4},(0,d.Z)(t,e.breakpoints.up("sm"),{minHeight:40}),(0,d.Z)(t,"&.cozyActionsItem",{minWidth:256}),(0,d.Z)(t,"& .cozyListItemIcon",{width:16,height:16}),t),gutters:{paddingLeft:16,paddingRight:16}},MuiFormLabel:{root:{color:e.palette.text.secondary,"&$disabled&$error":{color:e.palette.text.disabled}}},MuiFormHelperText:{root:{fontStyle:"italic",fontSize:"0.875rem",marginTop:4,"&$disabled&$error":{color:e.palette.text.disabled}}},MuiDialog:{paper:{"&.small":(0,d.Z)({width:"480px",maxWidth:"480px"},e.breakpoints.down("md"),{margin:"16px",padding:"0 8px 8px",height:"auto",maxHeight:"calc(100% - 32px)",borderRadius:"6px","& .divider--dialog":{marginLeft:"-8px",marginRight:"-8px"}}),"&.medium":(0,d.Z)({},e.breakpoints.up("md"),{width:"544px",maxWidth:"544px"}),"&.large":(0,d.Z)({},e.breakpoints.up("md"),{width:"800px",maxWidth:"800px"}),"&.full":{width:"100%",maxWidth:"100%"},"&.overflow":{overflowY:"visible !important","& .cozyDialogContent":{overflowY:"visible !important"}}},scrollPaper:{"&.alignTop":{alignItems:"start"}},paperFullScreen:{"& .cozyDialogActions":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(C("bottom"),")")},'& [class*="DialogCloseButton"]':{transform:"translateY(".concat(C("top"),")")},'& [class*="DialogBackButton"]':{transform:"translateY(".concat(C("top"),")")},".flagship-app & .cozyDialogTitle":{paddingTop:"calc(".concat(C("top")," + 0.75rem) !important")},".flagship-app & .cozyDialogContent":{marginBottom:"".concat(C("bottom")," !important")}}},MuiDialogTitle:{root:R(R({},e.typography.h3),{},(r={boxSizing:"border-box",width:"100%",padding:"1.5rem 2rem"},(0,d.Z)(r,e.breakpoints.down("sm"),R(R({},e.typography.h4),{},{padding:"0.75rem 1rem"})),(0,d.Z)(r,"&.dialogTitleWithBack",(0,d.Z)({paddingLeft:"4rem"},e.breakpoints.down("sm"),{paddingLeft:"3rem"})),(0,d.Z)(r,"&.dialogTitleWithClose",(0,d.Z)({paddingRight:"4rem"},e.breakpoints.down("sm"),{paddingRight:"3rem"})),(0,d.Z)(r,"&.dialogTitleFluid",{paddingTop:0}),r))},MuiDialogContent:{root:(n={padding:"24px 32px 0"},(0,d.Z)(n,e.breakpoints.down("sm"),{padding:"24px 16px 0"}),(0,d.Z)(n,"&.disableGutters",{padding:0,"& .dialogContentInner":{marginBottom:0},"& .dialogTitleFluidContainer":{marginLeft:0,marginRight:0,marginTop:0}}),(0,d.Z)(n,"& .dialogContentInner",{marginBottom:"24px","&.withFluidActions":(0,d.Z)({},e.breakpoints.down("sm"),{marginBottom:0,display:"flex",flexDirection:"column",height:"100%","& .dialogContentWrapper":{flexGrow:1,"&:not(.withActions)":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(C("bottom")," + 16px)")}},"& .cozyDialogActions":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(C("bottom")," + 16px)")}}),"& .dialogTitleFluidContainer":(0,d.Z)({marginLeft:"-2rem",marginRight:"-2rem"},e.breakpoints.down("sm"),{marginLeft:"-1rem",marginRight:"-1rem",marginTop:"-0.75rem"})}),n)},MuiDialogActions:{root:(a={margin:"16px 32px",padding:0},(0,d.Z)(a,e.breakpoints.down("sm"),{margin:"8px 16px","& button":{flexGrow:1}}),(0,d.Z)(a,"&.dialogActionsFluid",{margin:"24px 0 0"}),(0,d.Z)(a,"&.columnLayout",{display:"flex",flexDirection:"column-reverse","& button":{width:"100%",margin:0,"&:not(:first-child)":{marginBottom:"8px"}}}),(0,d.Z)(a,"&:not(.columnLayout) > :not(:first-child):not(:first-child)",{marginLeft:4}),a)},MuiDivider:{inset:{marginLeft:64,"&.divider--dialog":{marginLeft:80}}},MuiCheckbox:{colorSecondary:{"&$checked":{color:e.palette.error.main}}},MuiSwitch:{checked:{"& + $track$track":{opacity:1}},switchBase:{top:1,"&$checked":{transform:"translateX(15px)"}},thumb:{width:16,height:16,backgroundColor:e.palette.common.white},track:{width:25,height:12,opacity:1,backgroundColor:e.palette.text.disabled},colorSecondary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.main}}},disabled:{"&$checked + $track":{backgroundColor:"".concat(e.palette.grey[200]," !important")},"& $thumb":{backgroundColor:e.palette.common.white}}},MuiTooltip:{tooltip:{borderRadius:"8px",fontSize:"1rem",lineHeight:"1.3",padding:"16px"}},MuiIconButton:{root:{color:e.palette.text.secondary,"&.small":{padding:3},"&.medium":{padding:12},"&.large":{padding:16},"&.dialogIconButton":{backgroundColor:e.palette.background.paper,"&:hover":{backgroundColor:e.palette.action.selected}},"&.cozyStyles":{"&-error":{color:e.palette.error.main,"&:hover":{backgroundColor:(0,y.Fq)(e.palette.error.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}}},MuiBadge:{badge:{boxSizing:"content-box",padding:0,"&.badgeBorder":{border:"2px solid ".concat(e.palette.background.paper)},"&.badgeSizeLarge":{fontSize:".6875rem",height:"1rem",minWidth:"1rem"},"&.badgeSizeMedium":{height:".875rem",minWidth:".875rem",fontSize:".625rem"},"&.badgeSizeSmall":{height:".75rem",minWidth:".75rem",fontSize:".5rem"}},colorPrimary:{"&.colorSuccess":{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText},"&.colorWarning":{backgroundColor:e.palette.warning.main,color:e.palette.warning.contrastText},"&.colorInfo":{backgroundColor:e.palette.info.main,color:e.palette.info.contrastText}},anchorOriginTopRightRectangular:{transform:"scale(1) translate(37%, -37%)"},anchorOriginBottomRightRectangular:{transform:"scale(1) translate(37%, 37%)"},anchorOriginBottomLeftRectangular:{transform:"scale(1) translate(-37%, 37%)"},anchorOriginTopLeftRectangular:{transform:"scale(1) translate(-37%, -37%)"},dot:{borderRadius:"100%",padding:0,"&.badgeSizeLarge":{height:".625rem",minWidth:".625rem"},"&.badgeSizeMedium":{height:".5rem",minWidth:".5rem"},"&.badgeSizeSmall":{height:".375rem",minWidth:".375rem"}}},MuiRadio:{root:{padding:"12px","&$disabled svg":{borderRadius:"50%",backgroundColor:e.palette.background.contrast,fill:e.palette.border.disabled},"&:not($checked) svg":{fill:e.palette.border.main}},colorPrimary:{"&$checked svg":{fill:e.palette.primary.main},"&$disabled&$checked svg":{fill:e.palette.text.disabled}},colorSecondary:{"&$checked svg":{fill:e.palette.error.main},"&$disabled&$checked svg":{fill:e.palette.text.disabled}}},MuiChip:{root:{"&.noLabel":{width:"32px","& $label":{display:"none"},"& $icon":{margin:0}},"&.customColor":{"&-primary":x(e,"primary"),"&-success":x(e,"success"),"&-error":x(e,"error"),"&-warning":x(e,"warning"),"&-info":x(e,"info")}}},MuiAlert:{root:{padding:"8px 16px","&.cozyStyles":{"&-primary":_(e,"primary"),"&-secondary":_(e,"secondary"),"&-success":_(e,"success"),"&-error":_(e,"error"),"&-warning":_(e,"warning"),"&-info":_(e,"info")},"& $icon":{paddingTop:"9px"},"&.block":{flexWrap:"wrap","& $action":{width:"100%",paddingLeft:0,justifyContent:"end"}}},message:{flex:"auto",display:"flex",alignItems:"center",flexWrap:"wrap"},action:{marginRight:"-8px"}},MuiAlertTitle:{root:{width:"100%",fontWeight:"bold"}},MuiSnackbarContent:{root:{padding:"4px 12px",backgroundColor:e.palette.grey[600]}},MuiFab:{root:{color:e.palette.text.primary,backgroundColor:e.palette.background.paper,"&:hover":{backgroundColor:(0,y._j)(e.palette.background.paper,.05)},"@media (hover: none)":{backgroundColor:e.palette.background.paper}},extended:{borderRadius:28,height:56,minWidth:56,padding:"0 20px","&$sizeSmall":{borderRadius:20,height:40,minWidth:40,padding:"0 12px"},"&$sizeMedium":{borderRadius:24,height:48,minWidth:48,padding:"0 16px"}}},MuiMobileStepper:{root:{background:"transparent",height:40,padding:0},dot:{backgroundColor:"transparent",width:"10px",height:"10px",margin:"0 3px",border:"1px solid ".concat(e.palette.border.main),boxSizing:"border-box"},dotActive:{border:"none"}}}},N=function(e){return j()(I(e),{MuiLinearProgress:{colorPrimary:{backgroundColor:"rgba(255,255,255,0.2)"},colorSecondary:{backgroundColor:"rgba(255,255,255,0.2)"}},MuiSnackbarContent:{root:{backgroundColor:e.palette.grey[200]}},MuiTabs:{root:{"&.segmented":{"& $indicator":{backgroundColor:e.palette.primary.main}}}},MuiTab:{root:{"&.segmented":{"&$selected":{color:e.palette.primary.contrastText}}}},MuiSwitch:{switchBase:{color:e.palette.grey[100]},colorPrimary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.dark}}},colorSecondary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.dark}}}}})},F=function(e){return j()(I(e),{MuiCheckbox:{root:{padding:8}},MuiButton:{root:{borderRadius:100,padding:"10px 24px","&.ghost":{border:0,"&:hover":{border:0}}},sizeSmall:{height:"2.25rem",padding:"10px 16px","&$text":{padding:"8px 16px"}},sizeLarge:{padding:"14px 32px"},text:{padding:"10px 8px"},outlined:{"&:not($disabled)":{"&.ghost":{backgroundColor:e.palette.background.default,"&:hover":{backgroundColor:(0,y._j)(e.palette.background.default,.05),"@media (hover: none)":{backgroundColor:(0,y._j)(e.palette.background.default,.05)}}},"&.customColor":{"&-primary":{color:e.palette.primary.main,borderColor:e.palette.primary.main,"&:hover":{backgroundColor:(0,y.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.ghost":{color:e.palette.text.primary,borderColor:e.palette.background.default}}}}}},MuiIconButton:{root:{"&.small":{padding:8},"&.xlarge":{padding:20}}},MuiTooltip:{tooltip:{backgroundColor:(0,y.Fq)(e.palette.grey[800],.9),borderRadius:"4px",padding:"8px 12px"}},MuiFab:{root:{borderRadius:28,width:96,height:96},primary:{color:e.palette.primary.dark,backgroundColor:e.palette.primary.light,"&:hover":{backgroundColor:(0,y._j)(e.palette.primary.light,.05),"@media (hover: none)":{backgroundColor:e.palette.primary.light}}},extended:{borderRadius:16,"&$sizeSmall":{borderRadius:16,height:42,minWidth:42},"&$sizeMedium":{borderRadius:16}},sizeSmall:{borderRadius:12},sizeMedium:{borderRadius:16,width:56,height:56}},MuiAvatar:{root:{fontWeight:600,"&.size":{"&-xs":{width:16,height:16,fontSize:8,"& svg":{width:10,height:10}},"&-s":{width:24,height:24,fontSize:11,"& svg":{width:16,height:16}},"&-m":{width:32,height:32,fontSize:16,"& svg":{width:20,height:20}},"&-l":{width:48,height:48,fontSize:24,"& svg":{width:28,height:28}},"&-xl":{width:64,height:64,fontSize:32,"& svg":{width:36,height:36}}},"&.disabled":{color:e.palette.primary.contrastText,background:e.palette.action.disabledBackground}},colorDefault:{backgroundColor:e.palette.background.paper,color:e.palette.text.secondary}}})},L=function(e){return j()(F(e),{MuiLinearProgress:{colorPrimary:{backgroundColor:"rgba(255,255,255,0.2)"},colorSecondary:{backgroundColor:"rgba(255,255,255,0.2)"}},MuiSnackbarContent:{root:{backgroundColor:e.palette.grey[200]}},MuiTabs:{root:{"&.segmented":{"& $indicator":{backgroundColor:e.palette.primary.main}}}},MuiTab:{root:{"&.segmented":{"&$selected":{color:e.palette.primary.contrastText}}}},MuiSwitch:{switchBase:{color:e.palette.grey[100]},colorPrimary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.dark}}},colorSecondary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.dark}}}}})},z=r(41170),B=r(9839);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(t){(0,d.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var G=H({shape:{borderRadius:6},breakpoints:{values:{xs:0,sm:480,md:768,lg:1023,xl:1200}},zIndex:{modal:"var(--zIndex-modal)"},textShadows:["none","0px 2px 8px rgba(29, 33, 42, 0.16), 0px 0px 1px rgba(29, 33, 42, 0.48)"]},(0,z.Z)()&&{transitions:{create:function(){return"none"}}}),Z=function(e,t){var r,n,a=(0,v.g)()?"Twake":"Cozy";b(e,t);var o=M(e,t),i=(0,B.Z)(H(H({},G),{},{typography:"Cozy"===a?{fontFamily:"var(--primaryFont)",h1:{fontSize:48,fontWeight:"bold",lineHeight:1.087,letterSpacing:-.8},h2:{fontSize:32,fontWeight:"bold",lineHeight:1.313,letterSpacing:-.4},h3:{fontSize:24,fontWeight:"bold",lineHeight:1.167},h4:{fontSize:20,fontWeight:"bold",lineHeight:1.167},h5:{fontSize:18,fontWeight:"bold",lineHeight:1.313},h6:{fontSize:16,fontWeight:"bold",lineHeight:1.313},subtitle1:{fontWeight:"bold",fontSize:14,lineHeight:1.358,textTransform:"uppercase"},subtitle2:{fontWeight:"bold",fontSize:12,lineHeight:1.334,textTransform:"uppercase"},body1:{fontSize:16,lineHeight:1.313},body2:{fontSize:14,lineHeight:1.313},button:{fontWeight:"bold",fontSize:14,lineHeight:1.313},caption:{fontSize:12,lineHeight:1.313,color:o.text.secondary,display:"block"}}:{fontFamily:"var(--primaryFont)",h1:{fontSize:45,fontWeight:600,lineHeight:1.087},h2:{fontSize:32,fontWeight:600,lineHeight:1.313},h3:{fontSize:24,fontWeight:600,lineHeight:1.167},h4:{fontSize:22,fontWeight:600,lineHeight:1.167},h5:{fontSize:16,fontWeight:500,lineHeight:1.313,letterSpacing:"0.15px"},h6:{fontSize:14,fontWeight:500,lineHeight:1.313,letterSpacing:"0.1px"},subtitle1:{fontSize:14,fontWeight:500,lineHeight:1.358,letterSpacing:"0.1px"},subtitle2:{fontSize:14,fontWeight:600,lineHeight:1.334,letterSpacing:"0.25px"},body1:{fontSize:16,fontWeight:400,lineHeight:1.313,letterSpacing:"-0.15px"},body2:{fontSize:14,fontWeight:500,lineHeight:1.313,letterSpacing:"0.25px"},button:{fontSize:16,fontWeight:500,lineHeight:1.313,textTransform:"inherit"},caption:{fontSize:12,fontWeight:500,lineHeight:1.313,letterSpacing:"0.5px"},overline:{fontSize:12,fontWeight:500,lineHeight:"16px",letterSpacing:"0.4px",textTransform:"inherit"}},shadows:(0,h.Z)(Array(26)).map(function(r,n){return O("shadow".concat(n),e,t)}),palette:o})),u="Cozy"===a?({light:{normal:I(r=i),inverted:N(r)},dark:{normal:I(r),inverted:N(r)}})[e][t]:({light:{normal:F(n=i),inverted:L(n)},dark:{normal:F(n),inverted:L(n)}})[e][t];return H(H({},i),{},{overrides:u})},W={light:{normal:Z("light","normal"),inverted:Z("light","inverted")},dark:{normal:Z("dark","normal"),inverted:Z("dark","inverted")}},q=function(e,t){var r,n=null===(r=W[e])||void 0===r?void 0:r[t];if(!n){var a=Object.keys(W).join(", ");throw Error("[MuiCozyTheme] Unknown theme variant: ".concat(t,". Possible variants are ").concat(a))}return n},V=r(13457),Q=function(e){var t=e.type,r=e.variant,n=e.children,a=q(t,r);return i.createElement(V.Z,{theme:a},n)};Q.propTypes={type:o().oneOf(["light","dark"]),variant:o().oneOf(["normal","inverted"])},Q.defaultProps={type:"light",variant:"normal"};var J=r(63457);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){(0,d.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var $=function(e){var t,r,n=e.variant,a=e.className,o=e.ignoreItself,u=e.settingsThemeType,c=e.children,s=localStorage.getItem("ui-theme-type"),l=localStorage.getItem("ui-theme-variant"),f=(0,v.g)()?"Twake":"Cozy",h=(t="(prefers-color-scheme: dark)",(0,J.Z)(t,K(K({},void 0),{},{noSsr:!0})))?"dark":"light",y=["light","dark"].includes(u)?u:void 0,m=s||y||h,g=l||n;return i.createElement(eo.Provider,{value:{type:m,variant:g,isLight:"light"===m}},i.createElement(Q,{type:m,variant:g},i.createElement("div",{className:p()(a,(r={},(0,d.Z)(r,"".concat(f,"Theme--").concat(m,"-").concat(g),!!g),(0,d.Z)(r,"u-dc",o),r))},c)))};$.propTypes={variant:o().oneOf(["normal","inverted"]),ignoreItself:o().bool,className:o().string,settingsThemeType:o().oneOf(["light","dark","auto"]),children:o().node};var X="io.cozy.settings",ee=l.fetchPolicies.olderThan(3e5),et=["data"];let er=function(e){var t={definition:(0,l.Q)(X).getById("io.cozy.settings.instance"),options:{as:"".concat(X,"/io.cozy.settings.instance"),fetchPolicy:ee,singleDocData:!0}},r=(0,l.useQuery)(t.definition,t.options),a=r.data,o=(0,n.Z)(r,et);return(0,l.isQueryLoading)(o)&&!(0,l.hasQueryBeenLoaded)(o)?null:i.createElement($,(0,s.Z)({},e,{settingsThemeType:null==a?void 0:a.colorScheme}))};var en=r(32202),ea=["ignoreCozySettings"],eo=(0,i.createContext)(),ei=function(){var e=(0,i.useContext)(eo);return e||(c()("error","`CozyThemeContext` is missing. `useCozyTheme()` must be used within a `<CozyTheme>`. `light normal` is returned as fallback value."),{type:"light",variant:"normal",isLight:!0})},eu=function(e){var t=e.ignoreCozySettings,r=(0,n.Z)(e,ea),a=t||en.q6?$:er;return i.createElement(a,r)};eu.propTypes={variant:o().oneOf(["normal","inverted"]),ignoreItself:o().bool,ignoreCozySettings:o().bool,className:o().string,children:o().node},eu.defaultProps={variant:"normal",ignoreCozySettings:!1,ignoreItself:!0};let ec=eu},34378:function(e,t,r){"use strict";r.d(t,{NW:()=>p});var n=r(91888),a=r(86168),o=r(11218),i=r(99580),u=r(38490),c=r(36956);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var l=function(e){switch(e){case"en":return o.Z;case"fr":return i.Z;case"es":return u.Z;default:throw Error("Locale not found")}},d=function(e){return'The "'.concat(e,"\" locale isn't supported by date-fns or has not been included in the build. Check if you have configured a ContextReplacementPlugin that is too restrictive.")},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.DEFAULT_LANG;try{return l(e)}catch(t){console.warn(d(e))}try{return l(t)}catch(e){console.warn(d(t))}},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.DEFAULT_LANG;return function(r,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=f(e,t),c=r&&"string"==typeof r?new Date(r):r;try{return(0,a.Z)(c,o,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({locale:u},i))}catch(e){console.error("Error in initFormat",e)}}}},36956:function(e,t,r){"use strict";r.r(t),r.d(t,{extend:()=>h.l7,translate:()=>v,DEFAULT_LANG:()=>k,initTranslation:()=>h.QE,I18n:()=>S,useExtendI18n:()=>O,createUseI18n:()=>b,default:()=>E,useI18n:()=>x,I18nContext:()=>_});var n=r(59172),a=r(34871),o=r(28457),i=r(99494),u=r(3868),c=r(88035),s=r(91888),l=r(45697),d=r.n(l),f=r(67294),p=r(34378),h=r(79233),y=r(51894);let v=function(){return function(e){var t=(0,f.forwardRef)(function(t,r){var n=(0,f.useContext)(_);return f.createElement(e,(0,y.Z)({},t,{ref:r,t:n&&n.t,f:n&&n.f,lang:n&&n.lang}))});return t.displayName="withI18n(".concat(e.displayName||e.name,")"),t}};var m=r(58622),g=r.n(m);let b=function(e){return function(){var t=(x()||{lang:k}).lang;return(0,f.useMemo)(function(){var r=new(g())({locale:k,phrases:e[k]});if(t&&t!==k)try{r.locale(t),r.extend(e[t])}catch(e){console.warn('The dict phrases for "'.concat(t,"\" can't be loaded"))}var n=(0,p.NW)(t);return{t:r.t.bind(r),f:n,lang:t}},[t])}};var w=r(31573);let O=function(e){var t=x(),r=t.lang,n=t.polyglot,a=(0,f.useState)(""),o=(0,w.Z)(a,2),i=o[0],u=o[1];if(e&&r&&n&&i!==r){var c=new(g())({phrases:e[r],locale:r});(0,h.l7)(n.phrases,c),(0,h.l7)(c.phrases,n),u(r)}};var k="en",_=f.createContext(),x=function(){var e=(0,f.useContext)(_);if(!e)throw Error("`I18nContext` is missing. `useI18n()` must be used within a `<I18n>`");return e},S=function(e){(0,i.Z)(l,e);var t,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(l);return e=t?Reflect.construct(r,arguments,(0,c.Z)(this).constructor):r.apply(this,arguments),(0,u.Z)(this,e)});function l(e){var t;return(0,n.Z)(this,l),t=r.call(this,e),(0,s.Z)((0,o.Z)(t),"UNSAFE_componentWillReceiveProps",function(e){e.lang!==t.props.lang&&t.init(e)}),t.init(t.props),t}return(0,a.Z)(l,[{key:"init",value:function(e){var t=e.polyglot,r=e.lang,n=e.dictRequire,a=e.context,o=e.defaultLang;this.translator=t||(0,h.QE)(r,n,a,o),this.format=(0,p.NW)(r,o),this.t=this.translator.t.bind(this.translator),this.contextValue=this.getContextValue(e)}},{key:"getContextValue",value:function(e){return{t:this.t,f:this.format,polyglot:(e||this.props).polyglot||this.translator,lang:(e||this.props).lang}}},{key:"getChildContext",value:function(){return this.contextValue}},{key:"render",value:function(){return f.createElement(_.Provider,{value:this.contextValue},this.props.children)}}]),l}(f.Component);S.propTypes={lang:d().string.isRequired,polyglot:d().object,dictRequire:d().func,context:d().string,defaultLang:d().string},S.defaultProps={defaultLang:k},S.childContextTypes={t:d().func,f:d().func,polyglot:d().object,lang:d().string};let E=S},79233:function(e,t,r){"use strict";r.d(t,{QE:()=>u,l7:()=>c});var n,a=r(58622),o=r.n(a),i=r(36956),u=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.DEFAULT_LANG;if(n=new(o())({phrases:t(a),locale:a}),e&&e!==a)try{var u=t(e);n.extend(u),n.locale(e)}catch(t){console.warn('The dict phrases for "'.concat(e,"\" can't be loaded"))}if(r)try{var c=t(e,r);n.extend(c)}catch(t){console.warn("The context ".concat(r," cannot be loaded for lang ").concat(e))}return n},c=function(e,t){var r;return null===(r=t||n)||void 0===r?void 0:r.extend(e)}},45484:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},89810:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},81786:function(e,t,r){var n=r(45484);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},80595:function(e){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},10687:function(e){function t(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){r(e);return}u.done?t(c):Promise.resolve(c).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(a,o){var i=e.apply(r,n);function u(e){t(i,a,o,u,c,"next",e)}function c(e){t(i,a,o,u,c,"throw",e)}u(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},89679:function(e){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},19165:function(e,t,r){var n=r(22894),a=r(1776);function o(t,r,i){return a()?e.exports=o=Reflect.construct.bind():e.exports=o=function(e,t,r){var a=[null];a.push.apply(a,t);var o=new(Function.bind.apply(e,a));return r&&n(o,r.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports,o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},59422:function(e,t,r){var n=r(267);function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}e.exports=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},85660:function(e,t,r){var n=r(267);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},21929:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},39438:function(e,t,r){var n=r(80167);function a(){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get.bind():e.exports=a=function(e,t,r){var a=n(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports,a.apply(this,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},34771:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},11806:function(e,t,r){var n=r(22894);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},99338:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},16452:function(e,t,r){var n=r(55489).default;function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=i?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o},e.exports.__esModule=!0,e.exports.default=e.exports},17272:function(e){e.exports=function(e){return -1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},1776:function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},70712:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},81639:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return u}},e.exports.__esModule=!0,e.exports.default=e.exports},48495:function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8109:function(e){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},15572:function(e,t,r){var n=r(63322);e.exports=function(e,t){if(null==e)return{};var r,a,o=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},63322:function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},73035:function(e,t,r){var n=r(55489).default,a=r(80595);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},16904:function(e,t,r){var n=r(55489).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a,o,u,c,s=Object.create((t&&t.prototype instanceof y?t:y).prototype);return i(s,"_invoke",{value:(a=e,o=r,u=new E(n||[]),c="suspendedStart",function(e,t){if("executing"===c)throw Error("Generator is already running");if("completed"===c){if("throw"===e)throw t;return C()}for(u.method=e,u.arg=t;;){var r=u.delegate;if(r){var n=function e(t,r){var n=r.method,a=t.iterator[n];if(void 0===a)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),h;var o=p(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):i:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,u);if(n){if(n===h)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var i=p(a,o,u);if("normal"===i.type){if(c=u.done?"completed":"suspendedYield",i.arg===h)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(c="completed",u.method="throw",u.arg=i.arg)}})}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h={};function y(){}function v(){}function m(){}var g={};d(g,c,function(){return this});var b=Object.getPrototypeOf,w=b&&b(b(P([])));w&&w!==r&&o.call(w,c)&&(g=w);var O=m.prototype=y.prototype=Object.create(g);function k(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;i(this,"_invoke",{value:function(a,i){function u(){return new t(function(r,u){!function r(a,i,u,c){var s=p(e[a],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,u,c)},function(e){r("throw",e,u,c)}):t.resolve(d).then(function(e){l.value=e,u(l)},function(e){return r("throw",e,u,c)})}c(s.arg)}(a,i,r,u)})}return r=r?r.then(u,u):u()}})}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=m,i(O,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:v,configurable:!0}),v.displayName=d(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(_.prototype),d(_.prototype,s,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(f(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(O),d(O,l,"Generator"),d(O,c,function(){return this}),d(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},22894:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},61874:function(e,t,r){var n=r(89810),a=r(81639),o=r(3799),i=r(48495);e.exports=function(e,t){return n(e)||a(e,t)||o(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},80167:function(e,t,r){var n=r(34771);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},78619:function(e,t,r){var n=r(89810),a=r(70712),o=r(3799),i=r(48495);e.exports=function(e){return n(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},75888:function(e,t,r){var n=r(81786),a=r(70712),o=r(3799),i=r(8109);e.exports=function(e){return n(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},72241:function(e,t,r){var n=r(55489).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},267:function(e,t,r){var n=r(55489).default,a=r(72241);e.exports=function(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},55489:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3799:function(e,t,r){var n=r(45484);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}},e.exports.__esModule=!0,e.exports.default=e.exports},4003:function(e,t,r){var n=r(34771),a=r(22894),o=r(17272),i=r(19165);function u(t){var r="function"==typeof Map?new Map:void 0;return e.exports=u=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return i(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,u(t)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},11449:function(e,t,r){var n=r(16904)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},4495:function(e,t,r){var n=r(12244).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a,o,u,c,s=Object.create((t&&t.prototype instanceof y?t:y).prototype);return i(s,"_invoke",{value:(a=e,o=r,u=new E(n||[]),c="suspendedStart",function(e,t){if("executing"===c)throw Error("Generator is already running");if("completed"===c){if("throw"===e)throw t;return C()}for(u.method=e,u.arg=t;;){var r=u.delegate;if(r){var n=function e(t,r){var n=r.method,a=t.iterator[n];if(void 0===a)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),h;var o=p(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):i:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,u);if(n){if(n===h)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if("suspendedStart"===c)throw c="completed",u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c="executing";var i=p(a,o,u);if("normal"===i.type){if(c=u.done?"completed":"suspendedYield",i.arg===h)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(c="completed",u.method="throw",u.arg=i.arg)}})}),s}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h={};function y(){}function v(){}function m(){}var g={};d(g,c,function(){return this});var b=Object.getPrototypeOf,w=b&&b(b(P([])));w&&w!==r&&o.call(w,c)&&(g=w);var O=m.prototype=y.prototype=Object.create(g);function k(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var r;i(this,"_invoke",{value:function(a,i){function u(){return new t(function(r,u){!function r(a,i,u,c){var s=p(e[a],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==n(d)&&o.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,u,c)},function(e){r("throw",e,u,c)}):t.resolve(d).then(function(e){l.value=e,u(l)},function(e){return r("throw",e,u,c)})}c(s.arg)}(a,i,r,u)})}return r=r?r.then(u,u):u()}})}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=m,i(O,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:v,configurable:!0}),v.displayName=d(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},k(_.prototype),d(_.prototype,s,function(){return this}),t.AsyncIterator=_,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new _(f(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(O),d(O,l,"Generator"),d(O,c,function(){return this}),d(O,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},12244:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},55552:function(e,t,r){var n=r(4495)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},84490:function(e,t,r){"use strict";var n=r(42124),a=r(21924),o=n("%TypeError%"),i=r(51080),u=n("%Reflect.apply%",!0)||a("Function.prototype.apply");e.exports=function(e,t){var r=arguments.length>2?arguments[2]:[];if(!i(r))throw new o("Assertion failed: optional `argumentsList`, if provided, must be a List");return u(e,t,r)}},12125:function(e,t,r){"use strict";var n=r(42124)("%TypeError%"),a=r(83774),o=r(69987),i=r(14148);e.exports=function(e,t){if("Object"!==i(e))throw new n("Assertion failed: Type(O) is not Object");if(!o(t))throw new n("Assertion failed: IsPropertyKey(P) is not true, got "+a(t));return e[t]}},61131:function(e,t,r){"use strict";var n=r(42124)("%TypeError%"),a=r(69987),o=r(14148);e.exports=function(e,t){if("Object"!==o(e))throw new n("Assertion failed: `O` must be an Object");if(!a(t))throw new n("Assertion failed: `P` must be a Property Key");return t in e}},51080:function(e,t,r){"use strict";e.exports=r(82201)},72308:function(e,t,r){"use strict";e.exports=r(95320)},69987:function(e){"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},76333:function(e,t,r){"use strict";var n=r(42124)("%TypeError%"),a=r(12125),o=r(75337),i=r(14148);e.exports=function(e){if("Object"!==i(e))throw new n("Assertion failed: `obj` must be an Object");return o(a(e,"length"))}},80891:function(e,t,r){"use strict";e.exports=r(59578)},32396:function(e,t,r){"use strict";var n=r(42124),a=n("%Number%"),o=n("%RegExp%"),i=n("%TypeError%"),u=n("%parseInt%"),c=r(21924),s=r(79246),l=c("String.prototype.slice"),d=s(/^0b[01]+$/i),f=s(/^0o[0-7]+$/i),p=s(/^[-+]0x[0-9a-f]+$/i),h=s(new o("[\x85​￾]","g")),y=r(14238),v=r(14148);e.exports=function e(t){if("String"!==v(t))throw new i("Assertion failed: `argument` is not a String");if(d(t))return a(u(l(t,2),2));if(f(t))return a(u(l(t,2),8));if(h(t)||p(t))return NaN;var r=y(t);return r!==t?e(r):a(t)}},96614:function(e,t,r){"use strict";var n=r(92336),a=r(45383),o=r(20944),i=r(95074);e.exports=function(e){var t=n(e);return o(t)||0===t?0:i(t)?a(t):t}},75337:function(e,t,r){"use strict";var n=r(57475),a=r(96614);e.exports=function(e){var t=a(e);return t<=0?0:t>n?n:t}},92336:function(e,t,r){"use strict";var n=r(42124),a=n("%TypeError%"),o=n("%Number%"),i=r(86222),u=r(46200),c=r(32396);e.exports=function(e){var t=i(e)?e:u(e,o);if("symbol"==typeof t)throw new a("Cannot convert a Symbol value to a number");if("bigint"==typeof t)throw new a("Conversion from 'BigInt' to 'number' is not allowed.");return"string"==typeof t?c(t):o(t)}},17147:function(e,t,r){"use strict";var n=r(42124)("%Object%"),a=r(80891);e.exports=function(e){return a(e),n(e)}},46200:function(e,t,r){"use strict";var n=r(41503);e.exports=function(e){return arguments.length>1?n(e,arguments[1]):n(e)}},7681:function(e,t,r){"use strict";var n=r(42124),a=n("%String%"),o=n("%TypeError%");e.exports=function(e){if("symbol"==typeof e)throw new o("Cannot convert a Symbol value to a string");return a(e)}},14148:function(e,t,r){"use strict";var n=r(92309);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":n(e)}},15169:function(e,t,r){"use strict";var n=r(14148),a=Math.floor;e.exports=function(e){return"BigInt"===n(e)?e:a(e)}},45383:function(e,t,r){"use strict";var n=r(42124),a=r(15169),o=n("%TypeError%");e.exports=function(e){if("number"!=typeof e&&"bigint"!=typeof e)throw new o("argument must be a Number or a BigInt");var t=e<0?-a(-e):a(e);return 0===t?0:t}},59578:function(e,t,r){"use strict";var n=r(42124)("%TypeError%");e.exports=function(e,t){if(null==e)throw new n(t||"Cannot call method on "+e);return e}},92309:function(e){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},82201:function(e,t,r){"use strict";var n=r(42124)("%Array%"),a=!n.isArray&&r(21924)("Object.prototype.toString");e.exports=n.isArray||function(e){return"[object Array]"===a(e)}},95074:function(e,t,r){"use strict";var n=r(20944);e.exports=function(e){return("number"==typeof e||"bigint"==typeof e)&&!n(e)&&e!==1/0&&e!==-1/0}},20944:function(e){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},86222:function(e){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},57475:function(e,t,r){"use strict";var n=r(42124),a=n("%Math%"),o=n("%Number%");e.exports=o.MAX_SAFE_INTEGER||a.pow(2,53)-1},88996:function(e,t,r){"use strict";e.exports=r(24567)},61189:function(e,t,r){"use strict";var n=r(38882),a=n("%String%"),o=n("%TypeError%");e.exports=function(e){if("symbol"==typeof e)throw new o("Cannot convert a Symbol value to a string");return a(e)}},24567:function(e,t,r){"use strict";var n=r(38882)("%TypeError%");e.exports=function(e,t){if(null==e)throw new n(t||"Cannot call method on "+e);return e}},79273:function(e,t,r){"use strict";r.r(t),r.d(t,{createEndpoint:()=>a,expose:()=>l,finalizer:()=>i,proxy:()=>w,proxyMarker:()=>n,releaseProxy:()=>o,transfer:()=>b,transferHandlers:()=>s,windowEndpoint:()=>O,wrap:()=>f});let n=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),i=Symbol("Comlink.finalizer"),u=Symbol("Comlink.thrown"),c=e=>"object"==typeof e&&null!==e||"function"==typeof e,s=new Map([["proxy",{canHandle:e=>c(e)&&e[n],serialize(e){let{port1:t,port2:r}=new MessageChannel;return l(e,t),[r,[r]]},deserialize:e=>(e.start(),f(e))}],["throw",{canHandle:e=>c(e)&&u in e,serialize({value:e}){let t;return[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function l(e,t=globalThis,r=["*"]){t.addEventListener("message",function n(a){let o;if(!a||!a.data)return;if(!function(e,t){for(let r of e)if(t===r||"*"===r||r instanceof RegExp&&r.test(t))return!0;return!1}(r,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}let{id:c,type:s,path:f}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(_);try{let t=f.slice(0,-1).reduce((e,t)=>e[t],e),r=f.reduce((e,t)=>e[t],e);switch(s){case"GET":o=r;break;case"SET":t[f.slice(-1)[0]]=_(a.data.value),o=!0;break;case"APPLY":o=r.apply(t,p);break;case"CONSTRUCT":{let e=new r(...p);o=w(e)}break;case"ENDPOINT":{let{port1:t,port2:r}=new MessageChannel;l(e,r),o=b(t,[t])}break;case"RELEASE":o=void 0;break;default:return}}catch(e){o={value:e,[u]:0}}Promise.resolve(o).catch(e=>({value:e,[u]:0})).then(r=>{let[a,o]=k(r);t.postMessage(Object.assign(Object.assign({},a),{id:c}),o),"RELEASE"===s&&(t.removeEventListener("message",n),d(t),i in e&&"function"==typeof e[i]&&e[i]())}).catch(e=>{let[r,n]=k({value:TypeError("Unserializable return value"),[u]:0});t.postMessage(Object.assign(Object.assign({},r),{id:c}),n)})}),t.start&&t.start()}function d(e){"MessagePort"===e.constructor.name&&e.close()}function f(e,t){return function e(t,r=[],n=function(){}){let i=!1,u=new Proxy(n,{get(n,a){if(p(i),a===o)return()=>{v&&v.unregister(u),h(t),i=!0};if("then"===a){if(0===r.length)return{then:()=>u};let e=x(t,{type:"GET",path:r.map(e=>e.toString())}).then(_);return e.then.bind(e)}return e(t,[...r,a])},set(e,n,a){p(i);let[o,u]=k(a);return x(t,{type:"SET",path:[...r,n].map(e=>e.toString()),value:o},u).then(_)},apply(n,o,u){p(i);let c=r[r.length-1];if(c===a)return x(t,{type:"ENDPOINT"}).then(_);if("bind"===c)return e(t,r.slice(0,-1));let[s,l]=m(u);return x(t,{type:"APPLY",path:r.map(e=>e.toString()),argumentList:s},l).then(_)},construct(e,n){p(i);let[a,o]=m(n);return x(t,{type:"CONSTRUCT",path:r.map(e=>e.toString()),argumentList:a},o).then(_)}});return!function(e,t){let r=(y.get(t)||0)+1;y.set(t,r),v&&v.register(e,t,e)}(u,t),u}(e,[],t)}function p(e){if(e)throw Error("Proxy has been released and is not useable")}function h(e){return x(e,{type:"RELEASE"}).then(()=>{d(e)})}let y=new WeakMap,v="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(y.get(e)||0)-1;y.set(e,t),0===t&&h(e)});function m(e){var t;let r=e.map(k);return[r.map(e=>e[0]),(t=r.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let g=new WeakMap;function b(e,t){return g.set(e,t),e}function w(e){return Object.assign(e,{[n]:!0})}function O(e,t=globalThis,r="*"){return{postMessage:(t,n)=>e.postMessage(t,r,n),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function k(e){for(let[t,r]of s)if(r.canHandle(e)){let[n,a]=r.serialize(e);return[{type:"HANDLER",name:t,value:n},a]}return[{type:"RAW",value:e},g.get(e)||[]]}function _(e){switch(e.type){case"HANDLER":return s.get(e.name).deserialize(e.value);case"RAW":return e.value}}function x(e,t,r){return new Promise(n=>{let a=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",function t(r){r.data&&r.data.id&&r.data.id===a&&(e.removeEventListener("message",t),n(r.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),r)})}},13797:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:()=>n})},28457:function(e,t,r){"use strict";function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{Z:()=>n})},48079:function(e,t,r){"use strict";function n(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){r(e);return}u.done?t(c):Promise.resolve(c).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function u(e){n(i,a,o,u,c,"next",e)}function c(e){n(i,a,o,u,c,"throw",e)}u(void 0)})}}r.d(t,{Z:()=>a})},59172:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}r.d(t,{Z:()=>n})},34871:function(e,t,r){"use strict";r.d(t,{Z:()=>o});var n=r(60012);function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,n.Z)(a.key),a)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},91888:function(e,t,r){"use strict";r.d(t,{Z:()=>a});var n=r(60012);function a(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},51894:function(e,t,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{Z:()=>n})},88035:function(e,t,r){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{Z:()=>n})},99494:function(e,t,r){"use strict";function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}r.d(t,{Z:()=>a})},65691:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}r.d(t,{Z:()=>n})},3868:function(e,t,r){"use strict";r.d(t,{Z:()=>o});var n=r(5977),a=r(28457);function o(e,t){if(t&&("object"===(0,n.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}},31573:function(e,t,r){"use strict";r.d(t,{Z:()=>a});var n=r(27183);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return u}}(e,t)||(0,n.Z)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},14106:function(e,t,r){"use strict";r.d(t,{Z:()=>o});var n=r(13797),a=r(27183);function o(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},60012:function(e,t,r){"use strict";r.d(t,{Z:()=>a});var n=r(5977);function a(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==(0,n.Z)(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,n.Z)(t)?t:String(t)}},5977:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{Z:()=>n})},27183:function(e,t,r){"use strict";r.d(t,{Z:()=>a});var n=r(13797);function a(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return(0,n.Z)(e,t)}}},58609:function(e){"use strict";e.exports=["apps","context"]},94157:function(e){"use strict";e.exports=JSON.parse('{"drawer":"Show menu drawer","profile":"Profile","appearance":"Appearance","plans":"Plans","permissions":"Permissions","connectedDevices":"Connected devices","connections":"Connections","storage":"Storage","storage_phrase":"%{diskUsage} GB of %{diskQuota} GB used","help":"FAQ","contact":"Contact us","logout":"Log out","soon":"soon","termsOfService":"Terms of Service","legalNotice":"Legal notice","error_UnavailableStack":"The stack is unreachable (connection timed-out).","error_UnauthorizedStack":"Some permissions are missing, the application can\'t access the requested resource on the stack.","no_apps":"No applications found on the Cozy.","menu":{"apps":"Apps","settings":"Settings","home_mobile":"Back to dashboard...","home":"Back to dashboard","home_title":"Home"},"Categories":{"cozy":"Cozy apps","partners":"Partners apps","ptnb":"expPTNB","others":"Other apps"},"permsModal":{"title":"Access your whole Cozy from your application","description":"Authorize %{app} to display your Cozy applications on this device","button":"Authorize access"},"comingSoon":{"store":{"title":"The Store application will be available soon in your Cozy.","description":"Thanks to Cozy Store you will be able to install the applications that you want in your Cozy."}},"banner":{"tos-updated":{"description":"To comply with the GDPR, Cozy Cloud has updated its Terms of Services that have taken effect on May 25, 2018","CTA":"Read now"},"moved":{"description":"The Cozy has been moved to a new address"}}}')},13585:function(e){"use strict";e.exports=JSON.parse('{"drawer":"Mostrar el menu lateral","profile":"Perfil","connectedDevices":"Aparatos conectados","storage":"Espacio en el disco","storage_phrase":"%{diskUsage} Go de %{diskQuota} Go","view_offers":"Ver ofertas","view_my_offer":"Mi oferta","help":"Ayuda","logout":"Desconectar","soon":"pronto","error_UnavailableStack":"Conexi\xf3n a la stack imposible ( se agot\xf3 el tiempo para la conexi\xf3n ).","error_UnauthorizedStack":"Faltan algunos permisos, la aplicaci\xf3n no puede acceder a los recursos solicitados.","no_apps":"No se han encontrado aplicaciones en su Cozy.","menu":{"apps":"Aplicaciones","settings":"Par\xe1metros","home_mobile":"Regresar a Inicio...","home":"Regresar a Inicio","home_title":"Inicio"},"Categories":{"cozy":"Aplicaciones Cozy","partners":"Aplicaciones de asociados","ptnb":"expPTNB","others":"Otras aplicaciones"},"permsModal":{"title":"Acceder a su Cozy desde su aplicaci\xf3n","description":"Autorizar a %{app} para mostrar sus aplicaciones Cozy en este aparato","button":"Autorizar el acceso"},"comingSoon":{"store":{"title":"En breve, la aplicaci\xf3n Store estar\xe1 disponible en su Cozy","description":"Gracias a Cozy Store usted podr\xe1 instalar en su Cozy las aplicaciones que desee."}},"banner":{"tos-updated":{"description":"Para cumplir con el RGPD, Cozy Cloud ha actualizado sus Condiciones de utilizaci\xf3n que entraron en vigor desde el 25 de mayo de 2018.","CTA":"Leerlo ahora"}}}')},18670:function(e){"use strict";e.exports=JSON.parse('{"drawer":"Afficher le menu lat\xe9ral","profile":"Profil","appearance":"Apparence","plans":"Offres et options","permissions":"Permissions","connectedDevices":"Appareils connect\xe9s","connections":"Connexions","storage":"Stockage","storage_phrase":"%{diskUsage} Go sur %{diskQuota} Go","help":"Manuel d\'utilisation","contact":"Nous contacter","logout":"D\xe9connexion","soon":"\xe0 venir","termsOfService":"Conditions g\xe9n\xe9rales d’utilisation","legalNotice":"Mentions l\xe9gales","error_UnavailableStack":"Connexion \xe0 la stack impossible (connection timed-out)","error_UnauthorizedStack":"Des permissions sont manquante, l\'application ne peut acc\xe9der aux ressources demand\xe9es.","no_apps":"Pas d\'applications Cozy trouv\xe9es.","menu":{"apps":"Applications","settings":"Param\xe8tres","home_mobile":"Retour vers le tableau de bord...","home":"Retour vers le tableau de bord","home_title":"Accueil "},"Categories":{"cozy":"Apps Cozy","partners":"Exp\xe9rimentation MesInfos","ptnb":"Exp\xe9rimentation Carnet du logement","others":"Autres apps"},"permsModal":{"title":"Acc\xe9der \xe0 ton Cozy \xe0 partir de ton application","description":"Autoriser %{app} \xe0 afficher les applications de ton Cozy sur cet appareil","button":"Autoriser l\'acc\xe8s"},"comingSoon":{"store":{"title":"L\'application Store sera bient\xf4t disponible dans votre Cozy","description":"Gr\xe2ce \xe0 cozy Store vous pourrez installer les applications que vous souhaitez sur votre Cozy."}},"banner":{"tos-updated":{"description":"Dans le cadre du RGPD, Cozy Cloud met \xe0 jour ses Conditions G\xe9n\xe9rales d\'Utilisation qui ont pris effet le 25 Mai 2018","CTA":"Lire maintenant"},"moved":{"description":"Ce Cozy a \xe9t\xe9 d\xe9plac\xe9 vers une nouvelle adresse"}}}')},37504:function(e){"use strict";e.exports=JSON.parse('{"qualifications":[{"label":"identity_photo","purpose":"attestation","subjects":["identity"]},{"label":"national_id_card","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity"]},{"label":"passport","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity"]},{"label":"residence_permit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"immigration","subjects":["permit","identity"]},{"label":"family_record_book","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"birth_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity","family"]},{"label":"driver_license","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"transport","subjects":["permit","driving"]},{"label":"other_identity_document","purpose":"attestation","subjects":["identity"]},{"label":"wedding","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"pacs","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"divorce","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"large_family_card","purpose":"attestation","sourceCategory":"transport","subjects":["right"]},{"label":"caf","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"family","subjects":["right"]},{"label":"other_family_document","subjects":["family"]},{"label":"diploma","purpose":"attestation","sourceCategory":"education","subjects":["achievement"]},{"label":"work_contract","purpose":"contract","sourceCategory":"employer","subjects":["work","employment"]},{"label":"pay_sheet","purpose":"attestation","sourceCategory":"employer","subjects":["work","revenues"]},{"label":"fidelity_card","sourceCategory":"shopping"},{"label":"single_parent_benefit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"family","subjects":["revenues"]},{"label":"transport_card","sourceCategory":"transport","subjects":["vehicule"]},{"label":"electoral_card","sourceCategory":"gov"},{"label":"employment_center_certificate","purpose":"attestation","sourceCategory":"gov","subjects":["employment"]},{"label":"unemployment_benefit","purpose":"attestation","sourceCategory":"gov","subjects":["revenues"]},{"label":"pension","purpose":"attestation","sourceCategory":"gov","subjects":["revenues"]},{"label":"other_revenue","purpose":"attestation","subjects":["revenues"]},{"label":"gradebook","purpose":"report","sourceCategory":"education","subjects":["history"]},{"label":"student_card","purpose":"attestation","sourceCategory":"education","subjects":["identity","right","employment","education"]},{"label":"resume","purpose":"description","subjects":["employment"]},{"label":"motivation_letter","purpose":"description","subjects":["employment"]},{"label":"other_work_document","purpose":"employment"},{"label":"health_book","purpose":"attestation","sourceCategory":"health","subjects":["capacity","vaccine"]},{"label":"health_certificate","purpose":"attestation","sourceCategory":"health","subjects":["capacity","vaccine"]},{"label":"pregnancy_medical_certificate","purpose":"attestation","sourceCategory":"health","subjects":["pregnancy"]},{"label":"work_disability_recognition","purpose":"attestation","sourceCategory":"health","subjects":["right"]},{"label":"national_health_insurance_card","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"health","subjects":["insurance"]},{"label":"national_health_insurance_right_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"health","subjects":["right","insurance"]},{"label":"health_insurance_card","purpose":"attestation","sourceCategory":"insurance","sourceSubCategory":"health","subjects":["insurance"]},{"label":"prescription","purpose":"attestation","sourceCategory":"health","subjects":["right","medecine"]},{"label":"health_invoice","purpose":"invoice","sourceCategory":"health"},{"label":"other_health_document","subjects":["health"]},{"label":"vehicle_registration","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"transport","subjects":["vehicule","identity","right"]},{"label":"car_insurance","purpose":"attestation","sourceCategory":"insurance","sourceSubCategory":"transport","subjects":["insurance","car"]},{"label":"mechanic_invoice","purpose":"invoice","sourceCategory":"transport"},{"label":"transport_invoice","purpose":"invoice","sourceCategory":"transport"},{"label":"other_transport_document","sourceCategory":"transport"},{"label":"house_sale_agreeement","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"real_estate_tax","purpose":"invoice","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["tax","house"]},{"label":"building_permit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["permit","house"]},{"label":"technical_diagnostic_record","purpose":"report","sourceCategory":"real_estate","subjects":["compliance","house"]},{"label":"lease","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"rent_receipt","purpose":"invoice","sourceCategory":"real_estate","subjects":["house"]},{"label":"house_insurance","purpose":"contract","sourceCategory":"insurance","sourceSubCategory":"real_estate","subjects":["insurance","house"]},{"label":"work_quote","purpose":"description","sourceCategory":"building","subjects":["building","house"]},{"label":"work_invoice","purpose":"invoice","sourceCategory":"building","subjects":["building","house"]},{"label":"other_house_document","subjects":["house"]},{"label":"phone_invoice","purpose":"invoice","sourceCategory":"telecom","sourceSubCategory":"mobile"},{"label":"isp_invoice","purpose":"invoice","sourceCategory":"telecom","sourceSubCategory":"internet","subjects":["subscription"]},{"label":"telecom_invoice","purpose":"invoice","sourceCategory":"telecom"},{"label":"energy_invoice","purpose":"invoice","sourceCategory":"energy"},{"label":"water_invoice","purpose":"invoice","sourceCategory":"water"},{"label":"energy_contract","purpose":"contract","sourceCategory":"energy"},{"label":"appliance_invoice","purpose":"invoice","sourceCategory":"retail"},{"label":"web_service_invoice","purpose":"invoice","sourceCategory":"web"},{"label":"restaurant_invoice","purpose":"invoice","sourceCategory":"alimentation"},{"label":"grocery_invoice","purpose":"invoice","sourceCategory":"shopping"},{"label":"other_invoice","purpose":"invoice"},{"label":"tax_certificate","purpose":"attestation","sourceCategory":"gov","subjects":["tax"]},{"label":"tax_return","purpose":"report","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"tax_notice","purpose":"invoice","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"tax_timetable","purpose":"report","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"other_tax_document","subjects":["tax"]},{"label":"bank_details","purpose":"attestation","sourceCategory":"bank","subjects":["bank_account"]},{"label":"bank_statement","purpose":"report","sourceCategory":"bank","subjects":["history"]},{"label":"loan_agreement","purpose":"contract","sourceCategory":"bank"},{"label":"other_bank_document","sourceCategory":"bank"},{"label":"receipt","purpose":"report"},{"label":"payment_proof_family_allowance","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["subvention"]},{"label":"school_attendance_certificate","purpose":"attestation","sourceCategory":"education","subjects":["identity","right","education"]},{"label":"school_insurance_certificate","purpose":"attestation","sourceCategory":"education","subjects":["education","insurance"]},{"label":"unfit_for_habitation_declaration","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["compliance"]},{"label":"accommodation_proof","purpose":"attestation","sourceCategory":"individual","subjects":["address"]},{"label":"citizen_registration_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["achievement","education"]},{"label":"personal_sporting_licence","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"sport","subjects":["permit","invoice"]},{"label":"other_activity_document","sourceSubCategory":"sport","subjects":["permit","invoice"]},{"label":"real_estate_insurance","purpose":"contract","sourceCategory":"insurance","sourceSubCategory":"real_estate","subjects":["insurance"]},{"label":"person_insurance","purpose":"contract","sourceCategory":"insurance","subjects":["insurance"]},{"label":"other_administrative_document"},{"label":"expense_claim","purpose":"invoice"},{"label":"fine","purpose":"invoice","sourceCategory":"gov"},{"label":"condition_report","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"note_identity_document"},{"label":"note_family_document"},{"label":"note_work_document"},{"label":"note_health_document"},{"label":"note_house_document"},{"label":"note_transport_document"},{"label":"note_activity_document"},{"label":"note_finance"},{"label":"note_invoice"}],"purposeKnownValues":["attestation","contract","invoice","report","description","evaluation","employment"],"sourceCategoryKnownValues":["bank","insurance","retail","telecom","energy","water","health","gov","association","education","employer","transport","goods","alimentation","building","real_estate","web","individual","shopping"],"sourceSubCategoryKnownValues":["civil_registration","immigration","transport","family","tax","health","real_estate","mobile","internet","citizen","sport"],"subjectsKnownValues":["identity","permit","family","address","driving","right","subvention","achievement","degree","work","employment","revenues","history","insurance","medical_act","vehicule","car","moto","truck","boat","subscription","buy/sale","house","compliance","building","food","real_estate","tax","address","education","statement","course","internet","phone","vaccine","capacity","health","drugs","child","pregnancy","bank_account"]}')},20455:function(e){"use strict";e.exports=JSON.parse('{"nationalities":{"AD":"Andorran","AE":"Emirian","AF":"Afghan","AG":"Antiguans","AL":"Albanian","AM":"Armenian","AO":"Angolan","AR":"Argentinean","AT":"Austrian","AU":"Australian","AX":"\xc5land Islands","AZ":"Azerbaijani","BA":"Bosnian - Herzegovinian","BB":"Barbadian","BD":"Bangladeshi","BE":"Belgian","BF":"Burkinabe","BG":"Bulgarian","BH":"Bahraini","BI":"Burundian","BJ":"Beninese","BL":"Saint Barth\xe9lemy","BM":"Bermuda","BN":"Bruneian","BO":"Bolivian","BQ":"Bonaire, Sint Eustatius and Saba","BR":"Brazilian","BS":"Bahamian","BT":"Bhutanese","BV":"Bouvet Island","BW":"Batswana","BY":"Belarusian","BZ":"Belizean","CA":"Canadian","CC":"Cocos (Keeling) Islands","CD":"Congolese (Democratic Republic of the Congo)","CF":"Central African","CG":"Congolese (Republic of the Congo)","CH":"Swiss","CI":"Ivorian","CK":"Cook Islands","CL":"Chilean","CM":"Cameroonian","CN":"Chinese","CO":"Colombian","CR":"Costa Rican","CU":"Cuban","CV":"Cape Verdean","CW":"Cura\xe7ao","CX":"Christmas Island","CY":"Cypriot","CZ":"Czech","DE":"German","DJ":"Djibouti","DK":"Danish","DM":"Dominican (Dominica)","DO":"Dominican (Dominican Republic)","DZ":"Algerian","EC":"Ecuadorean","EE":"Estonian","EG":"Egyptian","EH":"Western Sahara","ER":"Eritrean","ES":"Spanish","ET":"Ethiopian","FI":"Finnish","FJ":"Fijian","FK":"Falkland Islands (Malvinas)","FM":"Micronesian","FO":"Faroe Islands","FR":"French","GA":"Gabonese","GB":"British","GD":"Grenadian","GE":"Georgian","GF":"French (French Guiana)","GG":"Guernsey","GH":"Ghanaian","GI":"Gibraltar","GL":"Greenland","GM":"Gambian","GN":"Guinean","GP":"Guadeloupe","GQ":"Equatorial Guinean","GR":"Greek","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemalan","GU":"Guam","GW":"Guinea-Bissauan","GY":"Guyanese","HK":"Hong Kong","HM":"Heard Island and Mcdonald Islands","HN":"Honduran","HR":"Croatian","HT":"Haitian","HU":"Hungarian","ID":"Indonesian","IE":"Irish","IL":"Israeli","IM":"Manx","IN":"Indian","IO":"British Indian Ocean Territory","IQ":"Iraqi","IR":"Iranian","IS":"Icelandic","IT":"Italian","JE":"Jersey","JM":"Jamaican","JO":"Jordanian","JP":"Japanese","KE":"Kenyan","KG":"Kyrgyz","KH":"Cambodian","KI":"I-Kiribati","KM":"Comoran","KN":"Kittian and Nevisian","KP":"North Korean","KR":"South Korean","KW":"Kuwaiti","KY":"Cayman Islands","KZ":"Kazakhstani","LA":"Laotian","LB":"Lebanese","LC":"Saint Lucian","LI":"Liechtensteiner","LK":"Sri Lankan","LR":"Liberian","LS":"Mosotho","LT":"Lithuanian","LU":"Luxembourger","LV":"Latvian","LY":"Libyan","MA":"Moroccan","MC":"Monacan","MD":"Moldovan","ME":"Montenegrin","MF":"Saint Martin (French part)","MG":"Malagasy","MH":"Marshallese","MK":"Macedonian","ML":"Malian","MM":"Burmese","MN":"Mongolian","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritanian","MS":"Montserrat","MT":"Maltese","MU":"Mauritian","MV":"Maldivan","MW":"Malawian","MX":"Mexican","MY":"Malaysian","MZ":"Mozambican","NA":"Namibian","NC":"New Caledonia","NE":"Nigerien","NF":"Norfolk Island","NG":"Nigerian","NI":"Nicaraguan","NL":"Dutch","NO":"Norwegian","NP":"Nepalese","NR":"Nauruan","NU":"Niue","NZ":"New Zealander","OM":"Omani","PA":"Panamanian","PE":"Peruvian","PF":"French (French Polynesia)","PG":"Papua New Guinea","PH":"Filipino","PK":"Pakistani","PL":"Polish","PM":"Saint Pierre and Miquelon","PN":"Pitcairn","PR":"Puerto Rico","PS":"Palestinian Territory, Occupied","PT":"Portuguese","PW":"Palauan","PY":"Paraguayan","QA":"Qatari","RE":"Reunion","RO":"Romanian","RS":"Serbian","RU":"Russian","RW":"Rwandan","SA":"Saudi","SB":"Solomon Islander","SC":"Seychellois","SD":"Sudanese","SE":"Swedish","SG":"Singaporean","SH":"Saint Helena","SI":"Slovenian","SJ":"Svalbard and Jan Mayen","SK":"Slovakian","SL":"Sierra Leonean","SM":"San Marinese","SN":"Senegalese","SO":"Somali","SR":"Surinamer","SS":"South Sudan","ST":"Sao Tomean","SV":"Salvadoran","SX":"Sint Maarten (Dutch part)","SY":"Syrian","SZ":"Swazi","TC":"Turks and Caicos Islands","TD":"Chadian","TF":"French (French Southern Territories)","TG":"Togolese","TH":"Thai","TJ":"Tajik","TK":"Tokelau","TL":"East Timorese","TM":"Turkmenistan","TN":"Tunisian","TO":"Tongan","TR":"Turkish","TT":"Trinidadian or Tobagonian","TV":"Tuvaluan","TW":"Taiwanese","TZ":"Tanzanian","UA":"Ukrainian","UG":"Ugandan","UM":"United States Minor Outlying Islands","US":"American","UY":"Uruguayan","UZ":"Uzbekistani","VA":"Holy See (Vatican City State)","VC":"Saint Vincent and the Grenadines","VE":"Venezuelan","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","VN":"Vietnamese","VU":"Vanuatu","WF":"Welsh","WS":"Samoan","YE":"Yemenite","YT":"Mayotte","ZA":"South African","ZM":"Zambian","ZW":"Zimbabwean"},"countries":{"AD":"Andorra","AE":"United Arab Emirates","AF":"Afghanistan","AG":"Antigua and Barbuda","AL":"Albania","AM":"Armenia","AO":"Angola","AR":"Argentina","AT":"Austria","AU":"Australia","AX":"\xc5land Islands","AZ":"Azerbaijan","BA":"Bosnia and Herzegovina","BB":"Barbados","BD":"Bangladesh","BE":"Belgium","BF":"Burkina Faso","BG":"Bulgaria","BH":"Bahrain","BI":"Burundi","BJ":"Benin","BL":"Saint Barth\xe9lemy","BM":"Bermuda","BN":"Brunei Darussalam","BO":"Bolivia","BQ":"Bonaire, Sint Eustatius and Saba","BR":"Brazil","BS":"Bahamas","BT":"Bhutan","BV":"Bouvet Island","BW":"Botswana","BY":"Belarus","BZ":"Belize","CA":"Canada","CC":"Cocos (Keeling) Islands","CD":"Democratic Republic of the Congo","CF":"Central African Republic","CG":"Republic of the Congo","CH":"Switzerland","CI":"Ivory Coast","CK":"Cook Islands","CL":"Chile","CM":"Cameroon","CN":"People\'s Republic of China","CO":"Colombia","CR":"Costa Rica","CU":"Cuba","CV":"Cape Verde","CW":"Cura\xe7ao","CX":"Christmas Island","CY":"Cyprus","CZ":"Czech Republic","DE":"Germany","DJ":"Djibouti","DK":"Denmark","DM":"Dominica","DO":"Dominican Republic","DZ":"Algeria","EC":"Ecuador","EE":"Estonia","EG":"Egypt","EH":"Western Sahara","ER":"Eritrea","ES":"Spain","ET":"Ethiopia","FI":"Finland","FJ":"Fiji","FK":"Falkland Islands (Malvinas)","FM":"Micronesia, Federated States of","FO":"Faroe Islands","FR":"France","GA":"Gabon","GB":"United Kingdom","GD":"Grenada","GE":"Georgia","GF":"French Guiana","GG":"Guernsey","GH":"Ghana","GI":"Gibraltar","GL":"Greenland","GM":"Gambia","GN":"Guinea","GP":"Guadeloupe","GQ":"Equatorial Guinea","GR":"Greece","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemala","GU":"Guam","GW":"Guinea-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"Heard Island and McDonald Islands","HN":"Honduras","HR":"Croatia","HT":"Haiti","HU":"Hungary","ID":"Indonesia","IE":"Ireland","IL":"Israel","IM":"Isle of Man","IN":"India","IO":"British Indian Ocean Territory","IQ":"Iraq","IR":"Iran","IS":"Iceland","IT":"Italy","JE":"Jersey","JM":"Jamaica","JO":"Jordan","JP":"Japan","KE":"Kenya","KG":"Kyrgyzstan","KH":"Cambodia","KI":"Kiribati","KM":"Comoros","KN":"Saint Kitts and Nevis","KP":"North Korea","KR":"South Korea","KW":"Kuwait","KY":"Cayman Islands","KZ":"Kazakhstan","LA":"Lao People\'s Democratic Republic","LB":"Lebanon","LC":"Saint Lucia","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Liberia","LS":"Lesotho","LT":"Lithuania","LU":"Luxembourg","LV":"Latvia","LY":"Libya","MA":"Morocco","MC":"Monaco","MD":"Moldova, Republic of","ME":"Montenegro","MF":"Saint Martin (French part)","MG":"Madagascar","MH":"Marshall Islands","MK":"North Macedonia","ML":"Mali","MM":"Myanmar","MN":"Mongolia","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritania","MS":"Montserrat","MT":"Malta","MU":"Mauritius","MV":"Maldives","MW":"Malawi","MX":"Mexico","MY":"Malaysia","MZ":"Mozambique","NA":"Namibia","NC":"New Caledonia","NE":"Niger","NF":"Norfolk Island","NG":"Nigeria","NI":"Nicaragua","NL":"Netherlands","NO":"Norway","NP":"Nepal","NR":"Nauru","NU":"Niue","NZ":"New Zealand","OM":"Oman","PA":"Panama","PE":"Peru","PF":"French Polynesia","PG":"Papua New Guinea","PH":"Philippines","PK":"Pakistan","PL":"Poland","PM":"Saint Pierre and Miquelon","PN":"Pitcairn Islands","PR":"Puerto Rico","PS":"Palestine","PT":"Portugal","PW":"Palau","PY":"Paraguay","QA":"Qatar","RE":"Reunion","RO":"Romania","RS":"Serbia","RU":"Russia","RW":"Rwanda","SA":"Saudi Arabia","SB":"Solomon Islands","SC":"Seychelles","SD":"Sudan","SE":"Sweden","SG":"Singapore","SH":"Saint Helena","SI":"Slovenia","SJ":"Svalbard and Jan Mayen","SK":"Slovakia","SL":"Sierra Leone","SM":"San Marino","SN":"Senegal","SO":"Somalia","SR":"Suriname","SS":"South Sudan","ST":"Sao Tome and Principe","SV":"El Salvador","SX":"Sint Maarten (Dutch part)","SY":"Syrian Arab Republic","SZ":"Eswatini","TC":"Turks and Caicos Islands","TD":"Chad","TF":"French Southern Territories","TG":"Togo","TH":"Thailand","TJ":"Tajikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkmenistan","TN":"Tunisia","TO":"Tonga","TR":"Turkey","TT":"Trinidad and Tobago","TV":"Tuvalu","TW":"Taiwan","TZ":"United Republic of Tanzania","UA":"Ukraine","UG":"Uganda","UM":"United States Minor Outlying Islands","US":"United States of America","UY":"Uruguay","UZ":"Uzbekistan","VA":"Holy See (Vatican City State)","VC":"Saint Vincent and the Grenadines","VE":"Venezuela","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis and Futuna","WS":"Samoa","YE":"Yemen","YT":"Mayotte","ZA":"South Africa","ZM":"Zambia","ZW":"Zimbabwe"}}')},40883:function(e){"use strict";e.exports=JSON.parse('{"nationalities":{"AD":"Andorran","AE":"\xc9mirien","AF":"Afghan","AG":"Antiguayen","AL":"Albanais","AM":"Arm\xe9nien","AO":"Angolais","AR":"Argentin","AT":"Autrichien","AU":"Australien","AX":"\xceles Aland","AZ":"Azerba\xefdjanais","BA":"Bosnien","BB":"Barbadien","BD":"Bangladais","BE":"Belge","BF":"Burkinab\xe9","BG":"Bulgare","BH":"Bahre\xefnien","BI":"Burundais","BJ":"B\xe9ninois","BL":"Saint-Barth\xe9lemy","BM":"Bermudien","BN":"Brun\xe9ien","BO":"Bolivien","BQ":"Pays-Bas Carib\xe9ens","BR":"Br\xe9silien","BS":"Bahamien","BT":"Bhoutanais","BV":"\xcele Bouvet","BW":"Botswanais","BY":"Bi\xe9lorusse","BZ":"B\xe9lizien","CA":"Canadien","CC":"\xceles Cocos","CD":"Congolais (R\xe9publique d\xe9mocratique du Congo)","CF":"Centrafricain","CG":"Congolais (R\xe9publique du Congo)","CH":"Suisse","CI":"Ivoirien","CK":"\xceles Cook","CL":"Chilien","CM":"Camerounais","CN":"Chinois","CO":"Colombien","CR":"Costaricain","CU":"Cubain","CV":"Cap verdien","CW":"Curacien","CX":"L\'\xeele Christmas","CY":"Chypriote","CZ":"Tch\xe8que","DE":"Allemand","DJ":"Djiboutien","DK":"Danois","DM":"Dominicain (Dominique)","DO":"Dominicain (R\xe9publique dominicaine)","DZ":"Alg\xe9rien","EC":"\xc9quatorien","EE":"Estonien","EG":"\xc9gyptien","EH":"Sahara Occidental","ER":"\xc9rythr\xe9en","ES":"Espagnol","ET":"\xc9thiopien","FI":"Finlandais","FJ":"Fidjien","FK":"Malouin","FM":"Micron\xe9sien","FO":"F\xe9ro\xefen","FR":"Fran\xe7ais","GA":"Gabonais","GB":"Britannique","GD":"Grenadien","GE":"G\xe9orgien","GF":"Fran\xe7ais (Guyane)","GG":"Guernesiais","GH":"Ghan\xe9en","GI":"Gibraltariens","GL":"Groenlandais","GM":"Gambien","GN":"Guin\xe9en","GP":"Guadeloup\xe9en","GQ":"\xc9quato-guin\xe9en","GR":"Grec","GS":"G\xe9orgie du Sud et les \xeeles Sandwich du Sud","GT":"Guat\xe9malt\xe8que","GU":"Guam","GW":"Bissaoguin\xe9en","GY":"Guyanais","HK":"Hongkongais","HM":"\xceles Heard-et-MacDonald","HN":"Hondurien","HR":"Croate","HT":"Ha\xeftien","HU":"Hongrois","ID":"Indon\xe9sien","IE":"Irlandais","IL":"Isra\xe9lien","IM":"\xcele de Man","IN":"Indien","IO":"Territoire britannique de l\'oc\xe9an Indien","IQ":"Irakien","IR":"Iranien","IS":"Islandais","IT":"Italien","JE":"Jersiais","JM":"Jama\xefquain","JO":"Jordanien","JP":"Japonais","KE":"K\xe9nyan","KG":"Kirghiz","KH":"Cambodgien","KI":"Kiribatiens","KM":"Comorien","KN":"Afro-Kittitien et Afro-Nevisien","KP":"Nord cor\xe9en","KR":"Sud cor\xe9en","KW":"Kowe\xeftien","KY":"Ca\xefmanien","KZ":"Kazakhstanais","LA":"Laotien","LB":"Libanais","LC":"Saint-Lucien","LI":"Liechtensteinois","LK":"Sri Lankais","LR":"Liberian","LS":"Mosotho","LT":"Lituanien","LU":"Luxembourgeois","LV":"Letton","LY":"Libyen","MA":"Marocain","MC":"Mon\xe9gasque","MD":"Moldave","ME":"Mont\xe9n\xe9grin","MF":"Saint-Martinois (France)","MG":"Malgache","MH":"Marshallais","MK":"Mac\xe9donien","ML":"Malien","MM":"Birman","MN":"Mongol","MO":"Macan\xe9en","MP":"\xceles Mariannes du Nord","MQ":"Martiniquais","MR":"Mauritanien","MS":"Montserratien","MT":"Maltais","MU":"Mauricien","MV":"Maldivien","MW":"Malawien","MX":"Mexicain","MY":"Malaisien","MZ":"Mozambicain","NA":"Namibien","NC":"N\xe9o-Cal\xe9donien","NE":"Nig\xe9rien","NF":"Norfolkais","NG":"Nig\xe9rian","NI":"Nicaraguayen","NL":"N\xe9erlandais","NO":"Norv\xe9gien","NP":"N\xe9palais","NR":"Nauruan","NU":"Niu\xe9en","NZ":"N\xe9o-Z\xe9landais","OM":"Omanais","PA":"Panam\xe9en","PE":"P\xe9ruvien","PF":"Fran\xe7ais (Polyn\xe9sie fran\xe7aise)","PG":"Papouasien","PH":"Philippin","PK":"Pakistanais","PL":"Polonais","PM":"Saint-Pierrais ou Miquelonais","PN":"\xceles Pitcairn","PR":"Portoricain","PS":"Territoires Palestiniens, Occup\xe9s","PT":"Portugais","PW":"Palauan","PY":"Paraguayen","QA":"Qatarien","RE":"R\xe9unionnais","RO":"Roumain","RS":"Serbe","RU":"Russe","RW":"Rwandais","SA":"Saoudien","SB":"Salomonais","SC":"Seychellois","SD":"Soudanais","SE":"Su\xe9dois","SG":"Singapourien","SH":"Sainte H\xe9l\xe8ne","SI":"Slov\xe8ne","SJ":"Svalbard et Jan Mayen","SK":"Slovaque","SL":"Sierra L\xe9onais","SM":"Saint-Marinais","SN":"S\xe9n\xe9galais","SO":"Somalien","SR":"Surinamais","SS":"Sud-Soudanais","ST":"Santom\xe9en","SV":"Salvadorien","SX":"Saint-Martinois (Pays-Bas)","SY":"Syrien","SZ":"Swazi","TC":"\xceles Turques-et-Ca\xefques","TD":"Tchadien","TF":"Fran\xe7ais (TAAF)","TG":"Togolais","TH":"Tha\xeflandais","TJ":"Tadjik","TK":"Tok\xe9laou","TL":"Est-Timorais","TM":"Turkm\xe8ne","TN":"Tunisien","TO":"Tongien","TR":"Turc","TT":"Trinidadien ou Tobagonien","TV":"Tuvalais","TW":"Ta\xefwanais","TZ":"Tanzanien","UA":"Ukrainien","UG":"Ougandais","UM":"\xceles mineures \xe9loign\xe9es des \xc9tats-Unis","US":"Am\xe9ricain","UY":"Uruguayen","UZ":"Ouzbek","VA":"Saint-Si\xe8ge (\xc9tat de la cit\xe9 du Vatican)","VC":"Vincentais","VE":"V\xe9n\xe9zu\xe9lien","VG":"\xceles Vierges Britanniques","VI":"\xceles Vierges Am\xe9ricaines","VN":"Vietnamien","VU":"Vanuatais","WF":"Gallois","WS":"Samoan","YE":"Y\xe9m\xe9nite","YT":"Mahorais","ZA":"Sud Africain","ZM":"Zambien","ZW":"Zimbabw\xe9en"},"countries":{"AD":"Andorre","AE":"\xc9mirats Arabes Unis","AF":"Afghanistan","AG":"Antigua-et-Barbuda","AL":"Albanie","AM":"Arm\xe9nie","AO":"Angola","AR":"Argentine","AT":"Autriche","AU":"Australie","AX":"\xc5land","AZ":"Azerba\xefdjan","BA":"Bosnie-Herz\xe9govine","BB":"Barbade","BD":"Bangladesh","BE":"Belgique","BF":"Burkina Faso","BG":"Bulgarie","BH":"Bahre\xefn","BI":"Burundi","BJ":"B\xe9nin","BL":"Saint-Barth\xe9lemy","BM":"Bermudes","BN":"Brunei Darussalam","BO":"Bolivie","BQ":"Bonaire, Saint-Eustache et Saba","BR":"Br\xe9sil","BS":"Bahamas","BT":"Bhoutan","BV":"\xcele Bouvet","BW":"Botswana","BY":"Bi\xe9lorussie","BZ":"Belize","CA":"Canada","CC":"\xceles Cocos","CD":"R\xe9publique d\xe9mocratique du Congo","CF":"R\xe9publique Centrafricaine","CG":"R\xe9publique du Congo","CH":"Suisse","CI":"C\xf4te-d\'Ivoire","CK":"\xceles Cook","CL":"Chili","CM":"Cameroun","CN":"Chine","CO":"Colombie","CR":"Costa Rica","CU":"Cuba","CV":"Cap-Vert","CW":"Cura\xe7ao","CX":"\xcele Christmas","CY":"Chypre","CZ":"R\xe9publique Tch\xe8que","DE":"Allemagne","DJ":"Djibouti","DK":"Danemark","DM":"Dominique","DO":"R\xe9publique Dominicaine","DZ":"Alg\xe9rie","EC":"\xc9quateur","EE":"Estonie","EG":"\xc9gypte","EH":"Sahara occidental","ER":"\xc9rythr\xe9e","ES":"Espagne","ET":"\xc9thiopie","FI":"Finlande","FJ":"Fidji","FK":"\xceles Malouines","FM":"Micron\xe9sie","FO":"\xceles F\xe9ro\xe9","FR":"France","GA":"Gabon","GB":"Royaume-Uni","GD":"Grenade","GE":"G\xe9orgie","GF":"Guyane fran\xe7aise","GG":"Guernesey","GH":"Ghana","GI":"Gibraltar","GL":"Groenland","GM":"Gambie","GN":"Guin\xe9e","GP":"Guadeloupe","GQ":"Guin\xe9e \xe9quatoriale","GR":"Gr\xe8ce","GS":"G\xe9orgie du Sud-et-les \xceles Sandwich du Sud","GT":"Guatemala","GU":"Guam","GW":"Guin\xe9e-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"\xceles Heard-et-MacDonald","HN":"Honduras","HR":"Croatie","HT":"Ha\xefti","HU":"Hongrie","ID":"Indon\xe9sie","IE":"Irlande","IL":"Isra\xebl","IM":"\xcele de Man","IN":"Inde","IO":"Oc\xe9an Indien Britannique","IQ":"Irak","IR":"Iran","IS":"Islande","IT":"Italie","JE":"Jersey","JM":"Jama\xefque","JO":"Jordanie","JP":"Japon","KE":"Kenya","KG":"Kirghizistan","KH":"Cambodge","KI":"Kiribati","KM":"Comores","KN":"Saint-Christophe-et-Ni\xe9v\xe8s","KP":"Cor\xe9e du Nord","KR":"Cor\xe9e du Sud","KW":"Kowe\xeft","KY":"\xceles Ca\xefmans","KZ":"Kazakhstan","LA":"Laos","LB":"Liban","LC":"Sainte-Lucie","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Lib\xe9ria","LS":"Lesotho","LT":"Lituanie","LU":"Luxembourg","LV":"Lettonie","LY":"Libye","MA":"Maroc","MC":"Monaco","MD":"Moldavie","ME":"Mont\xe9n\xe9gro","MF":"Saint-Martin (partie fran\xe7aise)","MG":"Madagascar","MH":"\xceles Marshall","MK":"Mac\xe9doine du Nord","ML":"Mali","MM":"Myanmar","MN":"Mongolie","MO":"Macao","MP":"\xceles Mariannes du Nord","MQ":"Martinique","MR":"Mauritanie","MS":"Montserrat","MT":"Malte","MU":"Maurice","MV":"Maldives","MW":"Malawi","MX":"Mexique","MY":"Malaisie","MZ":"Mozambique","NA":"Namibie","NC":"Nouvelle-Cal\xe9donie","NE":"Niger","NF":"\xcele Norfolk","NG":"Nig\xe9ria","NI":"Nicaragua","NL":"Pays-Bas","NO":"Norv\xe8ge","NP":"N\xe9pal","NR":"Nauru","NU":"Niu\xe9","NZ":"Nouvelle-Z\xe9lande","OM":"Oman","PA":"Panama","PE":"P\xe9rou","PF":"Polyn\xe9sie fran\xe7aise","PG":"Papouasie-Nouvelle-Guin\xe9e","PH":"Philippines","PK":"Pakistan","PL":"Pologne","PM":"Saint-Pierre-et-Miquelon","PN":"\xceles Pitcairn","PR":"Porto Rico","PS":"Palestine","PT":"Portugal","PW":"Palaos","PY":"Paraguay","QA":"Qatar","RE":"R\xe9union","RO":"Roumanie","RS":"Serbie","RU":"Russie","RW":"Rwanda","SA":"Arabie Saoudite","SB":"\xceles Salomon","SC":"Seychelles","SD":"Soudan","SE":"Su\xe8de","SG":"Singapour","SH":"Sainte-H\xe9l\xe8ne","SI":"Slov\xe9nie","SJ":"Svalbard et \xcele Jan Mayen","SK":"Slovaquie","SL":"Sierra Leone","SM":"Saint-Marin","SN":"S\xe9n\xe9gal","SO":"Somalie","SR":"Suriname","SS":"Soudan du Sud","ST":"S\xe3o Tom\xe9-et-Principe","SV":"El Salvador","SX":"Saint-Martin (partie n\xe9erlandaise)","SY":"Syrie","SZ":"Royaume d\'Eswatini","TC":"\xceles Turques-et-Ca\xefques","TD":"Tchad","TF":"Terres australes fran\xe7aises","TG":"Togo","TH":"Tha\xeflande","TJ":"Tadjikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkm\xe9nistan","TN":"Tunisie","TO":"Tonga","TR":"Turquie","TT":"Trinit\xe9-et-Tobago","TV":"Tuvalu","TW":"Ta\xefwan","TZ":"R\xe9publique unie de Tanzanie","UA":"Ukraine","UG":"Ouganda","UM":"\xceles mineures \xe9loign\xe9es des \xc9tats-Unis","US":"\xc9tats-Unis d\'Am\xe9rique","UY":"Uruguay","UZ":"Ouzb\xe9kistan","VA":"Saint-Si\xe8ge (Vatican)","VC":"Saint-Vincent-et-les-Grenadines","VE":"Venezuela","VG":"\xceles vierges britanniques","VI":"\xceles vierges am\xe9ricaines","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis-et-Futuna","WS":"Samoa","YE":"Y\xe9men","YT":"Mayotte","ZA":"Afrique du Sud","ZM":"Zambie","ZW":"Zimbabwe"}}')},28330:function(e){"use strict";e.exports=JSON.parse('{"country":{"foreign":"Foreign"},"Scan":{"scan_a_doc":"Scan a doc","save_doc":"Save the doc","filename":"Filename","save":"Save","cancel":"Cancel","qualify":"Describe","apply":"Apply","error":{"offline":"You are currently offline and you can\'t use this functionality. Please, try again later.","uploading":"You are already uploading a file. Please wait until the end of this upload and try again.","generic":"Something went wrong. Please try again."},"successful":{"qualified_ok":"You just have successfully described your file! "},"items":{"accommodation_proof":"Proof of accommodation |||| Proof of accommodations","appliance_invoice":"Appliance invoice |||| Appliance invoices","bank_details":"Bank detail |||| Bank details","bank_statement":"Bank statement |||| Bank statements","birth_certificate":"Birth certificate |||| Birth certificates","building_permit":"Building permit |||| Building permits","caf":"Social benefit rate |||| Social benefit rates","car_insurance":"Car insurance certificate |||| Car insurance certificates","citizen_registration_certificate":"Certificate of citizen registration |||| Certificates of citizen registration","condition_report":"Condition report |||| Condition reports","diploma":"Diploma |||| Diplomas","divorce":"Divorce |||| Divorces","driver_license":"Driving license |||| Driving licenses","electoral_card":"Electoral card |||| Electoral cards","employment_center_certificate":"Employment center certificate |||| Employment center certificates","energy_contract":"Energy provider contract |||| Energy provider contracts","energy_invoice":"Energy invoice |||| Energy invoices","expense_claim":"Expense claim |||| Expense claims","family_record_book":"Family record book |||| Family record books","family":"Family","fidelity_card":"Benefit card |||| Benefit cards","fine":"Fine |||| Fines","gradebook":"Gradebook |||| Gradebooks","grocery_invoice":"Grocery invoice |||| Grocery invoices","health_book":"Health book |||| Health books","health_certificate":"Health/Vaccination certificate |||| Health/Vaccination certificates","health_insurance_card":"Insurance card |||| Insurance cards","health_invoice":"Health invoice |||| Health invoices","health":"Health","home":"Home","house_insurance":"Home insurance |||| Home insurances","house_sale_agreeement":"House sale agreement |||| House sale agreements","identity_photo":"Identity photo |||| Identity photos","identity":"Identity","invoice":"Invoice |||| Invoices","isp_invoice":"ISP invoice |||| ISP invoices","large_family_card":" Large Family Card |||| Large Family Cards","lease":"Lease |||| Leases","loan_agreement":"Loan agreement |||| Loan agreements","mechanic_invoice":"Repair bill |||| Repair bills","motivation_letter":"Motivation letter |||| Motivation letters","national_health_insurance_card":"National health insurance card |||| National health insurance cards","national_health_insurance_right_certificate":"National health insurance right certificate |||| National health insurance right certificates","national_id_card":"ID card |||| ID cards","note_identity_document":"Note Identity |||| Notes Identity","note_family_document":"Note Family |||| Notes Family","note_work_document":"Note Work & Study |||| Notes Work & Study","note_health_document":"Note Health |||| Notes Health","note_house_document":"Note Home |||| Notes Home","note_transport_document":"Note Transport |||| Notes Transport","note_activity_document":"Note Activities |||| Notes Activities","note_finance":"Note Finance |||| Notes Finance","note_invoice":"Note Invoice |||| Notes Invoice","other_activity_document":"Other activities document |||| Other activities documents","other_bank_document":"Other financial document |||| Other financial documents","other_family_document":"Other family document |||| Other family documents","other_health_document":"Other health document |||| Other health documents","other_house_document":"Other house document |||| Other house documents","other_identity_document":"Other document of identity |||| Other documents of identity","other_invoice":"Other invoice |||| Other invoices","other_revenue":"Other revenue |||| Other revenues","other_tax_document":"Other tax document |||| Other tax documents","other_transport_document":"Other transport document |||| Other transport documents","other_work_document":"Other work document |||| Other work documents","other_administrative_document":"Other administrative document |||| Other administrative documents","others":"Others","pacs":"Civil union |||| Civil unions","passport":"Passeport |||| Passeports","pay_sheet":"Pay sheet |||| Pay sheets","payment_proof_family_allowance":"family allowance payment proof |||| family allowance payment proofs","pension":"Pension |||| Pensions","person_insurance":"Individual insurance certificate |||| Individual insurance certificates","personal_sporting_licence":"Sporting licence |||| Sporting licences","phone_invoice":"Phone invoice |||| Phone invoices","pregnancy_medical_certificate":"Certificate of pregnancy |||| Certificates of pregnancy","prescription":"Prescription |||| Prescriptions","real_estate_insurance":"Real estate insurance certificate |||| Real estate insurance certificates","real_estate_tax":"Real estate tax |||| Real estate taxes","receipt":"Receipt |||| Receipts","rent_receipt":"Rent receipt |||| Rent receipts","residence_permit":"Residence permit |||| Residence permits","restaurant_invoice":"Restaurant invoice |||| Restaurant invoices","resume":"Resume |||| Resumes","school_attendance_certificate":"Certificate of school attendance |||| Certificates of school attendance","school_insurance_certificate":"Certificate of school insurance |||| Certificates of school insurance","single_parent_benefit":"Single parent benefit |||| Single parent benefits","student_card":"Student card |||| Student cards","tax_certificate":"Tax certificate |||| Tax certificates","tax_notice":"Tax notice |||| Tax notices","tax_return":"Tax return |||| Tax returns","tax_timetable":"Payment Plans Installment Agreement |||| Payment Plans Installment Agreements","technical_diagnostic_record":"Technical diagnostic record |||| Technical diagnostic records","telecom_invoice":"Telecom invoice |||| Telecom invoices","transport_card":"Transport card |||| Transport cards","transport_invoice":"Transport invoice |||| Transport invoices","transport":"Transport","unemployment_benefit":"Unemployment benefit |||| Unemployment benefits","unfit_for_habitation_declaration":"Declaration of unfit for habitation |||| Declarations of unfit for habitation","vehicle_registration":"Vehicle registration |||| Vehicle registrations","water_invoice":"Water invoice |||| Water invoices","web_service_invoice":"Web service invoice |||| Web service invoices","wedding":"Wedding contract |||| Wedding contracts","work_contract":"Work contract |||| Work contracts","work_disability_recognition":"Recognition of disability |||| Recognitions of disability","work_invoice":"Work invoice |||| Work invoices","work_quote":"Work quote |||| Work quotes","work_study":"Work & Study"},"attributes":{"contractType":{"cdi":"CDI","cdd":"CDD","alternate":"Alternate","internship":"Internship","other":"Other"},"noticePeriod":{"oneWeek":"1 week before","oneMonth":"1 month before","threeMonth":"3 months before","oneYear":"1 year before","custom":"Custom","noAlert":"Do not be alerted"}},"themes":{"none":"None","activity":"Activities","family":"Family","finance":"Finance","health":"Health","home":"Home","identity":"Identity","invoice":"Invoice","others":"Others","transport":"Transport","undefined":"Undefined","work_study":"Work & Study"},"expiration":{"expired":"Expired","expiresIn":"Expires in %{duration}","description":"This document expires in %{duration}, consider renewing it"},"qualification":{"date":{"title":{"datetime":"Added on","AObtentionDate":"License A, delivered on","BObtentionDate":"License B, delivered on","CObtentionDate":"License C, delivered on","DObtentionDate":"License D, delivered on","issueDate":"Delivered on","expirationDate":"Expiration date","referencedDate":"Referenced date","shootingDate":"Shooting date","obtentionDate":"Date obtained","date":"Document date"}},"information":{"title":{"fine":{"number":"Amount of the fine"},"fidelity_card":{"number":"Card number"},"caf":{"number":"CAF file number"},"payment_proof_family_allowance":{"number":"CAF file number"},"vehicle":{"licenseNumber":"Vehicle registration number","confidentialNumber":"Confidential vehicle registration code"},"vehicle_registration":{"number":"Vehicle registration number (VIN)"},"national_id_card":{"number":"National ID card number"},"bank_details":{"number":"IBAN number"},"passport":{"number":"Passport number"},"driver_license":{"number":"License number"},"residence_permit":{"number":"License number"},"national_health_insurance_card":{"number":"National health insurance card number"},"pay_sheet":{"number":"Gross remuneration"},"tax_return":{"number":"Reference tax number"},"tax_notice":{"number":"Reference tax number"},"real_estate_tax":{"number":"Reference tax number"},"tax_timetable":{"number":"Reference tax number"},"country":"Document issuing country","refTaxIncome":"Reference tax income","contractType":"Contract type","noticePeriod":"Expiration alert","netSocialAmount":"Net social amount","employerName":"Name of employer","employer":"Name of employer","amount":"Amount of expenditure","subtype":"Purpose of expenditure","bicNumber":"BIC number"},"day":"day |||| days"},"contact":"Owner","page":"Side of the document","front":"Front side","back":"Back side","qualification":"Qualification","noInfo":"No information"}},"MagicFolders":{"administrative":"Administrative","photos":"Photos"}}')},6765:function(e){"use strict";e.exports=JSON.parse('{"country":{"foreign":"\xc9tranger"},"Scan":{"scan_a_doc":"Num\xe9riser un doc","save_doc":"Enregistrer le document","filename":"Nom du fichier","save":"Sauvegarder","cancel":"Annuler","qualify":"Qualifier","apply":"Appliquer","error":{"offline":"Vous \xeates actuellement d\xe9connect\xe9, vous ne pouvez donc pas utiliser cette fonctionnalit\xe9. Connectez-vous \xe0 internet et recommencez. ","uploading":"Vous avez d\xe9j\xe0 un fichier en cours de t\xe9l\xe9chargement. Attendez la fin et recommencez.","generic":"Un probl\xe8me est survenu. Veuillez r\xe9essayer. "},"successful":{"qualified_ok":"Vous venez de qualifier votre fichier avec succ\xe8s !"},"items":{"accommodation_proof":"Attestation d\'h\xe9bergement |||| Attestations d\'h\xe9bergement","appliance_invoice":"Facture d\'\xe9lectrom\xe9nager |||| Factures d\'\xe9lectrom\xe9nager","bank_details":"RIB","bank_statement":"Relev\xe9 de compte |||| Relev\xe9s de compte","birth_certificate":"Acte de naissance |||| Actes de naissance","building_permit":"Permis de construire","caf":"Attestation de quotient familial CAF |||| Attestations de quotient familial CAF","car_insurance":"Attestation d\'assurance auto |||| Attestations d\'assurance auto","citizen_registration_certificate":"Attestation de recensement citoyen |||| Attestations de recensement citoyen","condition_report":"\xc9tat des lieux - Entr\xe9e/Sortie |||| \xc9tats des lieux - Entr\xe9e/Sortie","diploma":"Dipl\xf4me |||| Dipl\xf4mes","divorce":"Attestation de divorce |||| Attestations de divorce","driver_license":"Permis de conduire","electoral_card":"Carte \xe9lectorale |||| Cartes \xe9lectorales","employment_center_certificate":"Attestation de France Travail |||| Attestations de France Travail","energy_contract":"Contrat de fournisseur d\'\xe9nergies |||| Contrats de fournisseur d\'\xe9nergies","energy_invoice":"Facture d\'\xe9nergie |||| Factures d\'\xe9nergie","expense_claim":"Note de frais |||| Notes de frais","family_record_book":"Livret de famille |||| Livrets de famille","family":"Famille","fidelity_card":"Carte avantage |||| Cartes avantages","fine":"Amende |||| Amendes","gradebook":"Bulletin de notes |||| Bulletins de notes","grocery_invoice":"Facture de courses |||| Factures de courses","health_book":"Carnet de sant\xe9 |||| Carnets de sant\xe9","health_certificate":"Certificat de sant\xe9/vaccination |||| Certificats de sant\xe9/vaccination","health_insurance_card":"Carte de mutuelle |||| Cartes de mutuelle","health_invoice":"Facture m\xe9dicale |||| Factures m\xe9dicales","health":"Sant\xe9","home":"Logement","house_insurance":"Assurance logement |||| Assurances logement","house_sale_agreeement":"Compromis de vente","identity_photo":"Photo d\'identit\xe9 |||| Photos d\'identit\xe9","identity":"Identit\xe9","invoice":"Facture |||| Factures","isp_invoice":"Facture d\'internet |||| Factures d\'internet","large_family_card":"Carte famille nombreuse |||| Cartes famille nombreuse","lease":"Bail |||| Baux","loan_agreement":"Contrat de pr\xeat |||| Contrats de pr\xeat","mechanic_invoice":"Facture de r\xe9paration |||| Factures de r\xe9paration","motivation_letter":"Lettre de motivation |||| Lettres de motivation","national_health_insurance_card":"Carte vitale |||| Cartes vitales","national_health_insurance_right_certificate":"Attestation de droits de l\'Assurance Maladie |||| Attestations de droits de l\'Assurance Maladie","national_id_card":"Carte d\'identit\xe9 |||| Cartes d\'identit\xe9","note_identity_document":"Note Identit\xe9 |||| Notes Identit\xe9","note_family_document":"Note Famille |||| Notes Famille","note_work_document":"Note Travail & \xc9tudes |||| Notes Travail & \xc9tudes","note_health_document":"Note Sant\xe9 |||| Notes Sant\xe9","note_house_document":"Note Logement |||| Notes Logement","note_transport_document":"Note Transport |||| Notes Transport","note_activity_document":"Note Activit\xe9s & loisirs |||| Notes Activit\xe9s & loisirs","note_finance":"Note Finances |||| Notes Finances","note_invoice":"Note Factures |||| Notes Factures","other_activity_document":"Autre document de loisirs |||| Autres documents de loisirs","other_bank_document":"Autre document financier |||| Autres documents financiers","other_family_document":"Autre document de famille |||| Autres documents de famille","other_health_document":"Autre document de sant\xe9 |||| Autres documents de sant\xe9","other_house_document":"Autre document de logement |||| Autres documents de logement","other_identity_document":"Autre document d\'identit\xe9 |||| Autres documents d\'identit\xe9","other_invoice":"Autre facture |||| Autres factures","other_revenue":"Autre revenu |||| Autres revenus","other_tax_document":"Imp\xf4ts - Autre document |||| Imp\xf4ts - Autres documents","other_transport_document":"Autre document de transport |||| Autres documents de transport","other_work_document":"Autre document de travail |||| Autres documents de travail","other_administrative_document":"Autre document administratif |||| Autres documents administratifs","others":"Autres","pacs":"Attestation de PACS |||| Attestations de PACS","passport":"Passeport |||| Passeports","pay_sheet":"Fiche de paie |||| Fiches de paie","payment_proof_family_allowance":"Attestation de paiement CAF |||| Attestations de paiement CAF","pension":"Retraite |||| Retraites","person_insurance":"Attestation d\'assurance individuelle |||| Attestations d\'assurance individuelle","personal_sporting_licence":"Licence sportive |||| Licences sportives","phone_invoice":"Facture de t\xe9l\xe9phone |||| Factures de t\xe9l\xe9phone","pregnancy_medical_certificate":"Certificat de grossesse |||| Certificats de grossesse","prescription":"Ordonnance |||| Ordonnances","real_estate_insurance":"Attestation d\'assurance immobili\xe8re |||| Attestations d\'assurance immobili\xe8re","real_estate_tax":"Imp\xf4ts - Taxe fonci\xe8re |||| Imp\xf4ts - Taxes fonci\xe8res","receipt":"Accus\xe9 de r\xe9ception |||| Accus\xe9s de r\xe9ception","rent_receipt":"Quittance de loyer |||| Quittances de loyer","residence_permit":"Titre de s\xe9jour |||| Titres de s\xe9jour","restaurant_invoice":"Facture de restaurant |||| Factures de restaurant","resume":"CV","school_attendance_certificate":"Certificat de scolarit\xe9 |||| Certificats de scolarit\xe9","school_insurance_certificate":"Attestation d\'assurance scolaire |||| Attestations d\'assurance scolaire","single_parent_benefit":"Allocation parent isol\xe9 |||| Allocations parent isol\xe9","student_card":"Carte d\'\xe9tudiant |||| Cartes d\'\xe9tudiant","tax_certificate":"Attestation fiscale |||| Attestations fiscales","tax_notice":"Imp\xf4ts - Avis d\'imposition","tax_return":"Imp\xf4ts - D\xe9claration de revenus |||| Imp\xf4ts - D\xe9clarations de revenus","tax_timetable":"Imp\xf4ts - Ech\xe9ancier |||| Imp\xf4ts - Ech\xe9anciers","technical_diagnostic_record":"Dossier de diagnostic technique |||| Dossiers de diagnostic technique","telecom_invoice":"Facture de t\xe9l\xe9com |||| Factures de t\xe9l\xe9com","transport_card":"Carte de transport |||| Cartes de transport","transport_invoice":"Facture de transport |||| Factures de transport","transport":"Transport","unemployment_benefit":"Allocation ch\xf4mage |||| Allocations ch\xf4mage","unfit_for_habitation_declaration":"Arr\xeat\xe9 d\'insalubrit\xe9 |||| Arr\xeat\xe9s d\'insalubrit\xe9","vehicle_registration":"Carte grise |||| Cartes grises","water_invoice":"Facture d\'eau |||| Factures d\'eau","web_service_invoice":"Facture de service web |||| Factures de service web","wedding":"Contrat de mariage |||| Contrats de mariage","work_contract":"Contrat de travail |||| Contrats de travail","work_disability_recognition":"Reconnaissance de handicap - RQTH |||| Reconnaissances de handicap - RQTH","work_invoice":"Facture de travaux |||| Factures de travaux","work_quote":"Devis de travaux","work_study":"Travail & \xc9tudes"},"attributes":{"contractType":{"cdi":"CDI","cdd":"CDD","alternate":"Alternance","internship":"Stage","other":"Autre"},"noticePeriod":{"oneWeek":"1 semaine avant","oneMonth":"1 mois avant","threeMonth":"3 mois avant","oneYear":"1 an avant","custom":"Personnalis\xe9","noAlert":"Ne pas \xeatre alert\xe9"}},"themes":{"none":"Aucun","activity":"Activit\xe9s & loisirs","family":"Famille","finance":"Finances","health":"Sant\xe9","home":"Logement","identity":"Identit\xe9","invoice":"Factures","others":"Autres","transport":"Transport","undefined":"Ind\xe9fini","work_study":"Travail & \xc9tudes"},"expiration":{"expired":"Expir\xe9","expiresIn":"Expire dans %{duration}","description":"Ce document expire dans %{duration}, pensez \xe0 le renouveler"},"qualification":{"date":{"title":{"datetime":"Ajout\xe9 le","AObtentionDate":"Permis A, d\xe9livr\xe9 le","BObtentionDate":"Permis B, d\xe9livr\xe9 le","CObtentionDate":"Permis C, d\xe9livr\xe9 le","DObtentionDate":"Permis D, d\xe9livr\xe9 le","issueDate":"D\xe9livr\xe9 le","expirationDate":"Date d\'expiration","referencedDate":"Date de r\xe9f\xe9rence","shootingDate":"Date de prise de vue","obtentionDate":"Date d\'obtention","date":"Date du document"}},"information":{"title":{"fine":{"number":"Montant de l\'amende"},"fidelity_card":{"number":"Num\xe9ro de la carte"},"caf":{"number":"Num\xe9ro de dossier CAF"},"payment_proof_family_allowance":{"number":"Num\xe9ro de dossier CAF"},"vehicle":{"licenseNumber":"Num\xe9ro d\'immatriculation","confidentialNumber":"Code confidentiel de la carte grise"},"vehicle_registration":{"number":"Num\xe9ro de la carte grise (VIN)"},"national_id_card":{"number":"Num\xe9ro de la carte d\'identit\xe9"},"bank_details":{"number":"Num\xe9ro d\'IBAN"},"passport":{"number":"Num\xe9ro du passeport"},"driver_license":{"number":"Num\xe9ro du permis"},"residence_permit":{"number":"Num\xe9ro du permis"},"national_health_insurance_card":{"number":"Num\xe9ro de s\xe9curit\xe9 sociale"},"pay_sheet":{"number":"R\xe9mun\xe9ration brute"},"tax_return":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"tax_notice":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"real_estate_tax":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"tax_timetable":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"country":"Pays \xe9metteur du document","refTaxIncome":"Revenu fiscal de r\xe9f\xe9rence","contractType":"Type de contrat","noticePeriod":"Alerte d’expiration","netSocialAmount":"Montant net social","employerName":"Nom de l\'employeur","employer":"Nom de l\'employeur","amount":"Montant de la d\xe9pense","subtype":"Objet de la d\xe9pense","bicNumber":"Num\xe9ro BIC"},"day":"jour |||| jours"},"contact":"Titulaire","page":"Face du document","front":"Face avant","back":"Face arri\xe8re","qualification":"Qualification","noInfo":"Non renseign\xe9(e)"}},"MagicFolders":{"administrative":"Administratif","photos":"Photos"}}')}}]);