/*! For license information please see cozy.628b5429.js.LICENSE.txt */
(self.webpackChunktwakemail=self.webpackChunktwakemail||[]).push([["465"],{98049:function(){},66566:function(e,t,n){"use strict";n.r(t)},59507:function(){},78893:function(){},4978:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppItem=void 0;var a=r(n(25460)),i=r(n(51012)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(27361)),s=r(n(71871)),u=n(16396),l=r(n(32869)),d=r(n(79475)),f=r(n(67597)),p=n(5171),h=r(n(8620));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var v=(0,c.default)(u.models,"applications.getAppDisplayName",function(e){return e.namePrefix&&"cozy"!==e.namePrefix.toLowerCase()?"".concat(e.namePrefix," ").concat(e.name):e.name}),y=t.AppItem=function(e){var t=e.onAppSwitch,n=e.useHomeIcon,r=e.app,c=e.isInvertedTheme,s=(0,o.useState)(),u=(0,i.default)(s,2),p=u[0],m=u[1];(0,o.useEffect)(function(){return function(){p&&clearTimeout(p)}},[p]);var y=r.slug?"icon-".concat(r.slug):"",b=v(r);return o.default.createElement(d.default,{onAppSwitch:function(){"function"==typeof t&&m(setTimeout(function(){t()},1e3))},href:r.href||"",app:r},function(e){var t=e.onClick,i=e.href;return o.default.createElement("li",{className:"coz-nav-apps-item".concat(r.isCurrentApp?" coz-nav-apps-item--current":"")},o.default.createElement("a",{role:"menuitem",href:i,"data-icon":y,title:b,onClick:t},n?o.default.createElement(f.default,{className:"coz-nav-apps-item-icon",isInvertedTheme:c}):o.default.createElement(l.default,(0,a.default)({app:r,className:"coz-nav-apps-item-icon",key:r.slug},h.default.get.iconProps())),o.default.createElement("p",{className:"coz-label"},b)))})};y.propTypes={app:p.appShape.isRequired,useHomeIcon:s.default.bool,isInvertedTheme:s.default.bool,onAppSwitch:s.default.func},t.default=y},85976:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppItemPlaceholder=void 0;var a=r(n(67294)),i=t.AppItemPlaceholder=function(){return a.default.createElement("li",{className:"coz-nav-apps-item"},a.default.createElement("span",{role:"menuitem",disabled:!0},a.default.createElement("div",{className:"coz-nav-apps-item-icon coz-loading-placeholder"}),a.default.createElement("p",{className:"coz-label coz-loading-placeholder"})))};t.default=i},93001:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(66254),o=r(n(71871)),c=r(n(70923)),s=r(n(32419)),u=r(n(3745)),l=n(48263),d=n(54910),f=r(n(66470)),p=function(e){var t=e.homeApp,n=e.handleClick,r=e.appName,i=e.appNamePrefix,o=e.appSlug,d=e.iconPath,p=e.isInvertedTheme,h=e.isFetchingApps,m=e.isPublic,v=e.opened,y=(0,f.default)().t,b=t&&t.isCurrentApp;if(!m&&h)return a.default.createElement("div",{className:"coz-nav-apps-btns coz-nav-apps-btns--loading"},a.default.createElement("div",{className:"coz-nav-apps-btns-home coz-loading-placeholder"}),a.default.createElement("div",{className:"coz-nav-apps-btns-main coz-loading-placeholder"}));var g=!b&&i?[y("".concat(o,".name_prefix"),{_:i}),y("".concat(o,".name"),{_:r})].join(" "):y("".concat(o,".name"),{_:r}),x=!m&&t&&t.href;return a.default.createElement("div",{className:"coz-nav-apps-btns".concat(b?" coz-nav-apps-btns--currentHome":"")},a.default.createElement(l.ButtonCozyHome,{homeHref:x,isInvertedTheme:p}),!b&&a.default.createElement("span",{className:"coz-nav-apps-btns-sep"}),a.default.createElement("button",{type:"button",onClick:m?null:n,className:"coz-nav-apps-btns-main","aria-controls":"coz-nav-pop--apps","data-tutorial":"apps",disabled:m},!b&&a.default.createElement("img",{className:"coz-bar-hide-sm",src:d,width:"28",alt:""}),a.default.createElement("span",{className:"coz-nav-app-name"},g),!m&&a.default.createElement(s.default,{icon:v?u.default:c.default,color:"var(--secondaryTextColor)",size:"12"})))};p.propTypes={homeApp:o.default.shape({isCurrentApp:o.default.bool,slug:o.default.string,href:o.default.string}),handleClick:o.default.func,appName:o.default.string,appNamePrefix:o.default.string,appSlug:o.default.string,iconPath:o.default.string,isInvertedTheme:o.default.bool,isFetchingApps:o.default.bool,isPublic:o.default.bool,opened:o.default.bool},t.default=(0,i.connect)(function(e){return{homeApp:(0,d.getHomeApp)(e),isFetchingApps:(0,d.isFetchingApps)(e)}},function(){return{}})(p)},24904:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppsContent=void 0;var a=r(n(67294)),i=n(66254),o=r(n(71871)),c=r(n(32419)),s=r(n(24221)),u=r(n(72339)),l=n(54910),d=r(n(4978)),f=r(n(85976)),p=r(n(66470)),h=t.AppsContent=function(e){var t=e.apps,n=e.homeApp,r=e.isFetchingApps,i=e.onAppSwitch,o=e.isInvertedTheme,l=(0,p.default)().t,h=(0,u.default)().isMobile,v=m(l),y=n&&n.isCurrentApp,b=n&&n.slug;return r||t&&t.length?a.default.createElement("div",{className:"coz-nav-pop-content"},a.default.createElement("ul",{className:"coz-nav-group"},h&&n&&a.default.createElement(d.default,{app:n,useHomeIcon:!0,onAppSwitch:i,isInvertedTheme:o}),r?[,,,].fill({}).map(function(e,t){return a.default.createElement(f.default,{key:t})}):t.filter(function(e){return e.slug!==b}).sort(function(e,t){return v(e)>v(t)}).map(function(e,t){return a.default.createElement(d.default,{app:e,key:t,onAppSwitch:i,isInvertedTheme:o})})),n&&!h&&!y&&a.default.createElement("a",{role:"menuitem",href:n.href,className:"coz-apps-home-btn"},a.default.createElement(c.default,{icon:s.default}),l("menu.home"))):a.default.createElement("p",{className:"coz-nav--error coz-nav-group"},l("no_apps"))};h.propTypes={homeApp:o.default.shape({isCurrentApp:o.default.bool,slug:o.default.string,href:o.default.string}),apps:o.default.array,isFetchingApps:o.default.bool.isRequired,onAppSwitch:o.default.func,isInvertedTheme:o.default.bool};var m=function(e){return function(t){var n=t.namePrefix?e("".concat(t.slug,".namePrefix"),{_:t.namePrefix}):null,r=e("".concat(t.slug,".name"),{_:t.name});return n?"".concat(n," ").concat(r):"".concat(r)}};t.default=(0,i.connect)(function(e){return{apps:(0,l.getApps)(e),homeApp:(0,l.getHomeApp)(e),isFetchingApps:(0,l.isFetchingApps)(e)}})(h)},48263:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonCozyHome=void 0;var a=r(n(67294)),i=r(n(71871)),o=r(n(71400)),c=n(25976),s=n(22960),u=r(n(67597));(t.ButtonCozyHome=function(e){var t=e.homeHref,n=e.isInvertedTheme,r=(0,s.useWebviewIntent)();return(0,c.isFlagshipApp)()||(0,o.default)("flagship.debug")?a.default.createElement("a",{onClick:function(){r.call("backToHome")},className:"coz-nav-apps-btns-home coz-nav-apps-btns-home--is-flagship","data-testid":"buttonCozyHome"},a.default.createElement(u.default,{className:"coz-nav-apps-btns-home-svg",isInvertedTheme:n})):t?a.default.createElement("a",{href:t,className:"coz-nav-apps-btns-home"},a.default.createElement(u.default,{className:"coz-nav-apps-btns-home-svg",isInvertedTheme:n})):a.default.createElement("span",{className:"coz-nav-apps-btns-home"},a.default.createElement(u.default,{className:"coz-nav-apps-btns-home-svg",isInvertedTheme:n}))}).propTypes={homeHref:i.default.string,isInvertedTheme:i.default.bool}},67597:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(25460)),i=r(n(67294)),o=r(n(71871)),c=r(n(32869)),s=r(n(8620)),u=n(92951),l=n(72339),d=r(n(32419)),f=r(n(81842));function p(e){return i.default.createElement("svg",(0,a.default)({width:32,height:32},e),i.default.createElement("g",{fill:"none",fillRule:"evenodd"},i.default.createElement("circle",{fill:"#297EF2",fillRule:"nonzero",cx:16,cy:16,r:16}),i.default.createElement("path",{d:"M19.314 17.561a.555.555 0 01-.82.12 4.044 4.044 0 01-2.499.862 4.04 4.04 0 01-2.494-.86.557.557 0 01-.815-.12.547.547 0 01.156-.748c.214-.14.229-.421.229-.424a.555.555 0 01.176-.385.504.504 0 01.386-.145.544.544 0 01.528.553c0 .004 0 .153-.054.36a2.954 2.954 0 003.784-.008 1.765 1.765 0 01-.053-.344.546.546 0 01.536-.561h.01c.294 0 .538.237.545.532 0 0 .015.282.227.422a.544.544 0 01.158.746m2.322-6.369a5.94 5.94 0 00-1.69-3.506A5.651 5.651 0 0015.916 6a5.648 5.648 0 00-4.029 1.687 5.936 5.936 0 00-1.691 3.524 5.677 5.677 0 00-3.433 1.737 5.966 5.966 0 00-1.643 4.137C5.12 20.347 7.704 23 10.882 23h10.236c3.176 0 5.762-2.653 5.762-5.915 0-3.083-2.31-5.623-5.244-5.893",fill:"#FFF"})))}var h=function(e){var t=e.className,n=e.isInvertedTheme,r=(0,l.useBreakpoints)().isMobile;return(0,u.isTwakeTheme)()?i.default.createElement(d.default,{icon:f.default,size:r?28:32,className:r?"u-ml-half":void 0}):i.default.createElement(c.default,{fetchIcon:function(){return n?"".concat(s.default.get.cozyURL(),"/assets/images/icon-cozy-home-inverted.svg"):"".concat(s.default.get.cozyURL(),"/assets/images/icon-cozy-home.svg")},fallbackIcon:p,className:t})};h.propTypes={className:o.default.string,isInvertedTheme:o.default.bool},t.default=h},55098:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(51012)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=r(n(71871)),c=r(n(24904)),s=r(n(93001));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var l=function(e){var t=e.appName,n=e.appNamePrefix,r=e.appSlug,o=e.iconPath,u=e.isPublic,l=e.isInvertedTheme,d=(0,i.useState)(),f=(0,a.default)(d,2),p=f[0],h=f[1],m=(0,i.useRef)(),v=(0,i.useRef)(),y=(0,i.useCallback)(function(e){!p||m.current.contains(e.target)||v.current.contains(e.target)||(h(!1),e.stopPropagation())},[p]);return(0,i.useEffect)(function(){return document.body.addEventListener("click",y),v.current=document.getElementById("cozy-bar-modal-dom-place"),function(){document.body.removeEventListener("click",y)}},[y]),i.default.createElement("nav",{className:"coz-nav coz-nav-apps",ref:m},i.default.createElement(s.default,{appName:t,appNamePrefix:n,appSlug:r,iconPath:o,handleClick:function(){h(!p)},opened:p,isPublic:u,isInvertedTheme:l}),i.default.createElement("div",{className:"coz-nav-pop coz-nav-pop--apps",id:"coz-nav-pop--apps","aria-hidden":!p},i.default.createElement(c.default,{isInvertedTheme:l})))};l.propTypes={appName:o.default.string,appNamePrefix:o.default.string,appSlug:o.default.string,iconPath:o.default.string,isPublic:o.default.bool,isInvertedTheme:o.default.bool},t.default=l},926:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppsMenuContent=void 0;var a=r(n(67294)),i=n(66254),o=r(n(71871)),c=r(n(32692)),s=n(23963),u=r(n(13031)),l=r(n(69576)),d=r(n(66470)),f=n(54910),p={"apps-menu-grid":"apps-menu-grid"},h=t.AppsMenuContent=function(e){var t,n=e.isFetchingApps,r=e.apps,i=e.homeApp,o=(0,d.default)().t;if(!n&&(!r||!r.length))return a.default.createElement(c.default,{className:"u-mh-half",color:"error"},o("no_apps"));if(n)return a.default.createElement("div",{className:p["apps-menu-grid"]},a.default.createElement(l.default,{key:"1"}),a.default.createElement(l.default,{key:"2"}),a.default.createElement(l.default,{key:"3"}));var f=i&&i.slug,h=r.filter(function(e){return e.slug!==f}).sort((t=s.getAppDisplayName,function(e,n){return t(e)>t(n)}));return a.default.createElement("div",{className:p["apps-menu-grid"]},h.map(function(e,t){return a.default.createElement(u.default,{key:t,app:e})}))};h.propTypes={apps:o.default.array,isFetchingApps:o.default.bool.isRequired,homeApp:o.default.shape({isCurrentApp:o.default.bool,slug:o.default.string,href:o.default.string}),className:o.default.string},t.default=(0,i.connect)(function(e){return{isFetchingApps:(0,f.isFetchingApps)(e),apps:(0,f.getApps)(e),homeApp:(0,f.getHomeApp)(e)}})(h)},13031:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppItem=void 0;var a=r(n(25460)),i=r(n(67294)),o=n(23963),c=r(n(41496)),s=r(n(32869)),u=r(n(79475)),l=r(n(32692)),d=r(n(94184)),f=n(5171),p=r(n(8620)),h=t.AppItem=function(e){var t=e.app,n=(0,o.getAppDisplayName)(t);return i.default.createElement(u.default,{href:t.href||"",app:t},function(e){var r=e.onClick,o=e.href;return i.default.createElement(c.default,{height:"auto",component:"a",variant:"text",href:o,title:n,onClick:r,className:(0,d.default)("apps-menu-grid-item-wrapper","u-bdrs-5"),label:i.default.createElement("div",{className:"apps-menu-grid-item"},i.default.createElement(s.default,(0,a.default)({app:t,key:t.slug},p.default.get.iconProps())),i.default.createElement(l.default,{variant:"subtitle1",noWrap:!0,className:"u-mt-half"},n))})})};h.propTypes={app:f.appShape.isRequired},t.default=h},69576:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppItemPlaceholder=void 0;var a=r(n(67294)),i=r(n(61941)),o=t.AppItemPlaceholder=function(){return a.default.createElement(i.default,{variant:"rect",width:48,height:48,className:"u-m-1 u-bdrs-5"})};t.default=o},75625:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(51012)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=r(n(926)),c=r(n(9047)),s=r(n(32419)),u=r(n(24584)),l=r(n(90843)),d=n(72339),f=n(44318);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}t.default=function(){var e=(0,i.useState)(!1),t=(0,a.default)(e,2),n=t[0],r=t[1],p=(0,i.useRef)(),h=(0,i.useRef)(),m=(0,d.useBreakpoints)().isMobile,v=function(){r(!n)};return i.default.createElement("nav",{ref:p},i.default.createElement(c.default,{ref:h,onClick:v,className:"u-p-half"},i.default.createElement(s.default,{icon:l.default,size:"18"})),m?i.default.createElement(f.ConfirmDialog,{open:n,onClose:v,content:i.default.createElement(o.default,null)}):i.default.createElement(u.default,{open:n,anchorEl:h.current,container:p.current,getContentAnchorEl:null,onClose:v,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:-10,horizontal:0}},i.default.createElement(o.default,null)))}},60381:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(51012)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(36198),c=r(n(66470));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}t.default=function(e){var t=e.code,n=e.links,r=(0,c.default)().t,s=(0,i.useState)(!0),u=(0,a.default)(s,2),l=u[0],d=u[1],f=(0,i.useCallback)(function(){return setTimeout(function(){d(!1)},100)},[d]);return(0,i.useEffect)(function(){f()},[f]),i.default.createElement("div",{className:"coz-bar-banner".concat(l?" unmounted":"")},i.default.createElement("p",null,r("banner.".concat(t,".description"))),n&&i.default.createElement(o.ButtonLink,{className:"coz-bar-banner-button",size:"tiny",href:n,label:r("banner.".concat(t,".CTA"))}))}},94200:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.mapStateToProps=t.mapDispatchToProps=t.default=t.Bar=void 0;var a=r(n(51012)),i=r(n(25460)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(66254),s=r(n(71871)),u=r(n(11571)),l=r(n(20958)),d=n(72339),f=r(n(32419)),p=r(n(72685)),h=n(25976),m=r(n(71400)),v=n(92951),y=n(48263),b=r(n(60381)),g=r(n(86220)),x=r(n(1453)),w=r(n(55098)),k=r(n(75625)),O=r(n(32452)),_=r(n(90363)),E=n(54910),S=r(n(66470)),C=n(16396),P=n(64822),j=r(n(71995)),A=r(n(94184));function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}function T(e){return o.default.createElement("svg",(0,i.default)({width:16,height:16},e),o.default.createElement("path",{d:"M0 0h4v4H0V0zm0 6h4v4H0V6zm0 6h4v4H0v-4zM6 0h4v4H6V0zm0 6h4v4H6V6zm0 6h4v4H6v-4zm6-12h4v4h-4V0zm0 6h4v4h-4V6zm0 6h4v4h-4v-4z",fillRule:"evenodd"}))}var M=t.Bar=function(e){var t,n=e.fetchContext,r=e.fetchSettingsData,c=e.fetchApps,s=e.isPublic,E=e.onDrawer,D=e.barLeft,M=e.barRight,R=e.barCenter,I=e.barSearch,N=e.onLogOut,F=e.userActionRequired,z=e.searchOptions,L=e.isInvertedTheme,B=e.appName,U=e.appNamePrefix,H=e.appSlug,G=e.iconPath,W=e.hasFetchedApps,q=e.homeApp,V=e.componentsProps,Q=(0,C.useClient)(),Z=(0,S.default)().t,Y=(0,d.useBreakpoints)().isMobile,J=(0,o.useState)(!1),K=(0,a.default)(J,2),$=K[0],X=K[1],ee=!s&&Y&&!(0,v.isTwakeTheme)(),et=!s&&!Y,en=(0,o.useCallback)(function(){s||(n(),r(!1),W||c())},[c,n,r,W,s]);(0,o.useEffect)(function(){var e=function(){en()};return en(),Q.on("tokenRefreshed",e),function(){Q.removeListener("tokenRefreshed",e)}},[Q,en]),(0,o.useEffect)(function(){!W&&$&&c()},[$,c,W]);var er=function(){E(!$),X(!$)};return o.default.createElement("div",(0,i.default)({},null==V?void 0:V.Wrapper,{className:(0,A.default)("coz-bar-wrapper",null==V||null===(t=V.Wrapper)||void 0===t?void 0:t.className),"data-testid":"coz-bar-wrapper"}),o.default.createElement("div",{id:"cozy-bar-modal-dom-place"}),o.default.createElement("div",{className:"coz-bar-container"},D||function(){if((0,h.isFlagshipApp)()||(0,m.default)("flagship.debug"))return o.default.createElement(y.ButtonCozyHome,{isInvertedTheme:L});if((0,v.isTwakeTheme)()){var e=!s&&q&&q.href;if(Y)return o.default.createElement(y.ButtonCozyHome,{homeHref:e});var t="home"===H;return o.default.createElement(u.default,{container:!0,alignItems:"center",className:"u-w-auto"},!t&&o.default.createElement(o.default.Fragment,null,o.default.createElement(y.ButtonCozyHome,{homeHref:e}),o.default.createElement(l.default,{orientation:"vertical",className:"u-mr-half",flexItem:!0})),o.default.createElement(p.default,{slug:H}))}return ee?o.default.createElement("button",{type:"button",className:"coz-bar-btn coz-bar-burger",onClick:er,"data-tutorial":"apps-mobile"},o.default.createElement(f.default,{icon:T,width:16,height:16,color:"currentColor"}),o.default.createElement("span",{className:"u-visuallyhidden"},Z("drawer"))):null}(),R||((0,v.isTwakeTheme)()?null:o.default.createElement(w.default,{appName:B,appNamePrefix:U,appSlug:H,iconPath:G,isPublic:s,isInvertedTheme:L})),o.default.createElement("div",{className:"u-flex-grow"},I||(z.enabled&&!Y?o.default.createElement("div",{className:"u-flex-grow u-mh-2"},o.default.createElement(P.AssistantDesktop,{componentsProps:{SearchBarDesktop:{size:"small"}}})):null)),z.enabled&&Y?o.default.createElement(j.default,null):null,(0,v.isTwakeTheme)()?o.default.createElement(o.default.Fragment,null,M,"drive"===H&&Y&&I?null:o.default.createElement(o.default.Fragment,null,o.default.createElement(_.default,null),o.default.createElement(k.default,null),o.default.createElement(O.default,{onLogOut:N}))):M||(et?o.default.createElement(x.default,{onLogOut:N}):null),ee?o.default.createElement(g.default,{visible:$,onClose:er,drawerListener:function(){return E($)},onLogOut:N,isInvertedTheme:L}):null),F&&o.default.createElement(b.default,F))};M.propTypes={appName:s.default.string,appNamePrefix:s.default.string,appSlug:s.default.string,iconPath:s.default.string,isPublic:s.default.bool,isInvertedTheme:s.default.bool,onLogOut:s.default.func,onDrawer:s.default.func,userActionRequired:s.default.object,componentsProps:s.default.shape({Wrapper:s.default.shape({className:s.default.string})})};var R=t.mapStateToProps=function(e){return{hasFetchedApps:(0,E.hasFetched)(e),homeApp:(0,E.getHomeApp)(e)}},I=t.mapDispatchToProps=function(e){return{fetchApps:function(){return e((0,E.fetchApps)())},fetchContext:function(){return e((0,E.fetchContext)())},fetchSettingsData:function(t){return e((0,E.fetchSettingsData)(t))}}};t.default=(0,c.connect)(R,I)(M)},70914:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarCenter=function(e){var t=e.children,n=(0,a.useBarContext)();return(0,r.useEffect)(function(){if(n&&void 0!==n.setBarCenter)return n.setBarCenter(t),function(){n.setBarCenter(null)};console.warn("You should not use BarCenter outside of a BarProvider")},[n,t]),null};var r=n(67294),a=n(70082)},9296:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.BarComponent=void 0;var a=r(n(25460)),i=r(n(51012)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(73935),s=n(54910),u=n(75934),l=r(n(94200)),d=n(66254),f=n(16396),p=n(25976),h=r(n(24060)),m=r(n(8620)),v=n(70082);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}var b=function(){var e=(0,p.isMobileApp)()?"mobile":"browser",t=document.createElement("div");return t.setAttribute("id","coz-bar"),t.setAttribute("role","banner"),t.classList.add("coz-target--".concat(e)),t},g=function(){var e=b(),t=document.querySelector(u.APP_SELECTOR);return t?(document.body.insertBefore(e,t),document.body.classList.add("has-banner"),e):(console.warn('Cozy-bar is looking for a "'.concat(u.APP_SELECTOR,"\" tag that contains your application and can't find it :'(… The BAR is now disabled")),null)};function x(e){var t=e.children,n=e.wrapperElement,r=e.setWrapperElement,a=e.wrapperId,i=void 0===a?"cozy-bar":a;return((0,o.useLayoutEffect)(function(){var e=document.getElementById(i),t=!1;return e||(t=!0,e=g(i)),r(e),function(){t&&e.parentNode&&e.parentNode.removeChild(e)}},[r,i]),null===n)?null:(0,c.createPortal)(t,n)}t.BarComponent=function(e){var t,r=e.appName,c=void 0===r?(0,u.getAppName)():r,p=e.appNamePrefix,y=void 0===p?(0,u.getAppNamePrefix)():p,b=e.appSlug,g=void 0===b?(0,u.getAppSlug)():b,w=e.iconPath,k=void 0===w?(0,u.getDefaultIcon)():w,O=e.isInvertedTheme,_=e.isPublic,E=void 0!==_&&_,S=e.onLogOut,C=e.disableInternalStore,P=void 0!==C&&C,j=e.searchOptions,A=e.componentsProps,D=(0,v.useBarContext)()||{},T=D.barSearch,M=D.barLeft,R=D.barCenter,I=D.barRight,N=D.themeVariant,F=(0,o.useState)(null),z=(0,i.default)(F,2),L=z[0],B=z[1],U=(0,f.useClient)(),H=!E&&/^\/public/.test(window.location.pathname),G=n(49145).default;t=P?U.store:G(),(0,o.useEffect)(function(){t.dispatch((0,s.setInfos)(c,y,g)),m.default.init({cozyClient:U,onCreate:function(e){return t.dispatch((0,s.onRealtimeCreate)(e))},onDelete:function(e){return t.dispatch((0,s.onRealtimeDelete)(e))}})},[c,y,g,U,t]);var W={appName:c,isInvertedTheme:O,appNamePrefix:y,appSlug:g,cozyClient:U,iconPath:k,isPublic:H||E,onLogOut:S,userActionRequired:(0,u.getUserActionRequired)(),searchOptions:void 0===j?{enabled:!1}:j,componentsProps:void 0===A?{}:A,onDrawer:function(e){L.dataset.visible=e}};return o.default.createElement(x,{wrapperElement:L,setWrapperElement:B},o.default.createElement(h.default,{variant:N,ignoreCozySettings:W.isPublic},P?o.default.createElement(l.default,(0,a.default)({},W,{barSearch:T,barLeft:M,barCenter:R,barRight:I})):o.default.createElement(d.Provider,{store:t},o.default.createElement(l.default,(0,a.default)({},W,{barSearch:T,barLeft:M,barCenter:R,barRight:I})))))}},65039:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarLeft=function(e){var t=e.children,n=(0,a.useBarContext)();return(0,r.useEffect)(function(){if(n&&void 0!==n.setBarLeft)return n.setBarLeft(t),function(){n.setBarLeft(null)};console.warn("You should not use BarLeft outside of a BarProvider")},[n,t]),null};var r=n(67294),a=n(70082)},70082:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.useBarContext=t.default=t.BarContext=void 0;var a=r(n(51012)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(r,i,c):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var c=t.BarContext=(0,i.createContext)();t.useBarContext=function(){return(0,i.useContext)(c)},t.default=(0,i.memo)(function(e){var t=e.children,n=(0,i.useState)(null),r=(0,a.default)(n,2),o=r[0],s=r[1],u=(0,i.useState)(null),l=(0,a.default)(u,2),d=l[0],f=l[1],p=(0,i.useState)(null),h=(0,a.default)(p,2),m=h[0],v=h[1],y=(0,i.useState)(null),b=(0,a.default)(y,2),g=b[0],x=b[1],w=(0,i.useState)("normal"),k=(0,a.default)(w,2),O=k[0],_=k[1],E=(0,i.useMemo)(function(){return{barCenter:o,setBarCenter:s,barRight:d,setBarRight:f,barLeft:m,setBarLeft:v,barSearch:g,setBarSearch:x,themeVariant:O,setThemeVariant:_}},[o,m,d,g,O]);return i.default.createElement(c.Provider,{value:E},t)})},21797:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarRight=function(e){var t=e.children,n=(0,a.useBarContext)();return(0,r.useEffect)(function(){if(n&&void 0!==n.setBarRight)return n.setBarRight(t),function(){n.setBarRight(null)};console.warn("You should not use BarRight outside of a BarProvider")},[n,t]),null};var r=n(67294),a=n(70082)},36599:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.BarRoutes=void 0;var a=r(n(67294)),i=n(16396),o=n(64822),c=n(79655);t.BarRoutes=[a.default.createElement(c.Route,{key:"assistant/:conversationId",path:"assistant/:conversationId",element:a.default.createElement(a.default.Fragment,null,a.default.createElement(i.RealTimeQueries,{doctype:"io.cozy.ai.chat.conversations"}),a.default.createElement(o.AssistantDialog,null))}),a.default.createElement(c.Route,{key:"search",path:"search",element:a.default.createElement(o.SearchDialog,null)})]},89718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarSearch=function(e){var t=e.children,n=(0,a.useBarContext)();return(0,r.useEffect)(function(){if(n&&void 0!==n.setBarSearch)return n.setBarSearch(t),function(){n.setBarSearch(null)};console.warn("You should not use BarSearch outside of a BarProvider")},[n,t]),null};var r=n(67294),a=n(70082)},48208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarTheme=function(e){var t=e.variant,n=(0,a.useBarContext)();return(0,r.useEffect)(function(){if(n&&void 0!==n.setTheme)return n.setThemeVariant(t),function(){n.setThemeVariant("normal")};console.warn("You should not use BarTheme outside of a BarProvider")},[n,t]),null};var r=n(67294),a=n(70082)},86220:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Drawer=void 0;var a=r(n(65556)),i=r(n(79300)),o=r(n(76100)),c=r(n(33207)),s=r(n(68603)),u=r(n(57604)),l=r(n(14297)),d=r(n(13251)),f=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),p=n(66254),h=r(n(50840)),m=r(n(71871)),v=r(n(20958)),y=r(n(24546)),b=r(n(9758)),g=r(n(24904)),x=r(n(29e3)),w=n(54910);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O=function(){return!!e})()}var _=t.Drawer=function(e){var t;function n(e){var t,r,c,l;return(0,o.default)(this,n),r=n,c=[e],r=(0,u.default)(r),t=(0,s.default)(this,O()?Reflect.construct(r,c||[],(0,u.default)(this).constructor):r.apply(this,c)),(0,d.default)(t,"onDrawerClick",function(e){e.target===t.wrapperRef&&t.close()}),(0,d.default)(t,"onTransitionEnd",function(){t.props.visible?(t.gesturesHandler||t.attachGestures(),t.preventBackgroundScrolling()):(t.restoreBackgroundScrolling(),t.setState({isClosing:!1})),t.props.drawerListener()}),(0,d.default)(t,"UNSAFE_componentWillReceiveProps",(l=(0,i.default)(a.default.mark(function e(n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t.props.visible&&n.visible)){e.next=3;break}return e.next=3,t.props.fetchSettingsData();case 3:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)})),(0,d.default)(t,"close",function(){t.state.isClosing||(t.detachGestures(),t.setState(function(){return{isClosing:!0}}),t.turnTransitionsOn(),t.props.onClose(),t.asideRef.style.transform="")}),t.state={isScrolling:!1,isClosing:!1},t}return(0,l.default)(n,e),(0,c.default)(n,[{key:"componentDidMount",value:(t=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.turnTransitionsOn();case 1:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"turnTransitionsOn",value:function(){this.asideRef.classList.add("with-transition"),this.asideRef.addEventListener("transitionend",this.onTransitionEnd)}},{key:"turnTransitionsOff",value:function(){this.asideRef.classList.remove("with-transition"),this.asideRef.removeEventListener("transitionend",this.onTransitionEnd)}},{key:"preventBackgroundScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"restoreBackgroundScrolling",value:function(){document.body.style.overflow="auto"}},{key:"detachGestures",value:function(){this.gesturesHandler.destroy(),this.gesturesHandler=null}},{key:"attachGestures",value:function(){var e=this;this.gesturesHandler=new h.default.Manager(document.documentElement,{recognizers:[[h.default.Pan,{direction:h.default.DIRECTION_ALL}]]});var t=this.asideRef.getBoundingClientRect().width,n=null;this.gesturesHandler.on("panstart",function(t){e.state.isClosing||("panup"===t.additionalEvent||"pandown"===t.additionalEvent?e.setState({isScrolling:!0}):(e.turnTransitionsOff(),n=0))}),this.gesturesHandler.on("pan",function(r){e.state.isClosing||e.state.isScrolling||(n=-r.deltaX/t,e.applyTransformation(n))}),this.gesturesHandler.on("panend",function(n){if(!e.state.isClosing){if(e.state.isScrolling){e.setState({isScrolling:!1});return}var r=-n.deltaX/t>=.4,a=n.velocity<0&&Math.abs(n.velocity)>=.2;r||a?e.close():(e.turnTransitionsOn(),e.applyTransformation(0))}})}},{key:"applyTransformation",value:function(e){e=Math.min(1.1,Math.max(0,e)),this.asideRef.style.transform="translateX(-"+100*e+"%)"}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,r=t.isInvertedTheme,a=t.onLogOut;return f.default.createElement("div",{className:"coz-drawer-wrapper",onClick:this.onDrawerClick,"aria-hidden":n?"false":"true",ref:function(t){e.wrapperRef=t}},f.default.createElement("aside",{ref:function(t){e.asideRef=t}},f.default.createElement("nav",{className:"coz-drawer--apps"},f.default.createElement(g.default,{onAppSwitch:this.close,isInvertedTheme:r})),f.default.createElement(v.default,null),f.default.createElement("nav",{className:"coz-drawer--settings"},f.default.createElement(b.default,{elevation:0,square:!0},f.default.createElement(y.default,null,f.default.createElement(x.default,{isDrawer:!0,onLogOut:a}))))))}}])}(f.Component);_.propTypes={visible:m.default.bool,onClose:m.default.func,onLogOut:m.default.func,isInvertedTheme:m.default.bool,fetchSettingsData:m.default.func},t.default=(0,p.connect)(null,function(e){return{fetchSettingsData:function(){return e((0,w.fetchSettingsData)())}}})(_)},90363:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(9047)),o=r(n(32419)),c=r(n(16735));t.default=function(){return a.default.createElement(i.default,{component:"a",href:"https://support.cozy.io/",target:"_blank",rel:"noopener, noreferrer",className:"u-p-half"},a.default.createElement(o.default,{icon:c.default,size:"18"}))}},71995:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),i=n(79655),o=r(n(32419)),c=r(n(9047)),s=r(n(4230));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.default=function(){var e=(0,i.useNavigate)(),t=(0,i.useLocation)().pathname,n=(0,a.useCallback)(function(){e("/search?returnPath=".concat(t))},[e,t]);return a.default.createElement(c.default,{onClick:n},a.default.createElement(o.default,{icon:s.default}))}},29e3:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(25460)),i=r(n(54060)),o=r(n(67294)),c=r(n(71871)),s=n(16396),u=n(39614),l=r(n(69560)),d=r(n(47868)),f=n(12568),p=n(85764),h=n(21272),m=r(n(66470)),v=["isLoaded"],y=function(e){var t=e.anchorRef,n=e.instanceInfo,r=e.onLogOut,a=e.isDrawer,i=e.onClose,c=(0,m.default)().t,s=(0,u.makeActions)([f.profile,f.appearance,f.plans,f.storage,u.divider,f.permissions,f.connectedDevices,f.connections,u.divider,f.help,f.contact,h.legalNotice,p.termsOfService,f.logout],{t:c,instanceInfo:n,onLogOut:r});return a?o.default.createElement(d.default,{actions:s}):o.default.createElement(l.default,{ref:t,open:!0,docs:[],actions:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoClose:!0,onClose:i})};y.propTypes={instanceInfo:c.default.object,onLogOut:c.default.func,isDrawer:c.default.bool};var b=function(e){var t=(0,s.useInstanceInfo)(),n=t.isLoaded,r=(0,i.default)(t,v);return n?o.default.createElement(y,(0,a.default)({instanceInfo:r},e)):null};b.defaultProps={isDrawer:!1},b.propTypes={onLogOut:c.default.func,isDrawer:c.default.bool},t.default=b},37629:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(16396),o=n(5499),c=n(96716),s=r(n(66470));t.default=function(){var e=(0,s.default)().t,t=(0,i.useInstanceInfo)(),n=t.isLoaded,r=t.diskUsage;if(!n)return null;var u=(0,o.makeDiskInfos)(r.data.used,r.data.quota||Math.max(1e12,10*parseInt(r.data.used,10)));return a.default.createElement(a.default.Fragment,null,e("storage_phrase",{diskUsage:u.humanDiskUsage,diskQuota:u.humanDiskQuota}),a.default.createElement(c.LinearProgress,{style:{width:"85%"},className:"u-mt-half",variant:"determinate",value:parseInt(u.percentUsage)}))}},93313:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.appearance=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(41286)),f=n(96121),p=["action"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,p);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label}))});m.displayName="AppearanceAction",t.appearance=function(e){var t=e.t;return{name:"appearance",icon:d.default,label:t("appearance"),action:function(e,t){var n=t.client,r=(0,f.getSettingsLink)({client:n,hash:"appearance"});window.open(r,"_self")},Component:m}}},26038:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.connectedDevices=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(88191)),f=n(96121),p=["action"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,p);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label}))});m.displayName="ConnectedDevicesAction",t.connectedDevices=function(e){var t=e.t;return{name:"connectedDevices",icon:d.default,label:t("connectedDevices"),action:function(e,t){var n=t.client,r=(0,f.getSettingsLink)({client:n,hash:"connectedDevices"});window.open(r,"_self")},Component:m}}},91132:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.connections=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(73806)),f=n(96121),p=["action"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,p);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label}))});m.displayName="ConnectionsAction",t.connections=function(e){var t=e.t;return{name:"connections",icon:d.default,label:t("connections"),action:function(e,t){var n=t.client,r=(0,f.getSettingsLink)({client:n,hash:"sessions"});window.open(r,"_self")},Component:m}}},85127:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.contact=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(75410)),f=n(96121),p=["action"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,p);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label}))});m.displayName="ContactAction",t.contact=function(e){var t=e.t;return{name:"contact",icon:d.default,label:t("contact"),action:function(e,t){var n=t.client,r=(0,f.getSettingsLink)({client:n,hash:"support"});window.open(r,"_self")},Component:m}}},58714:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.help=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(58896)),f=r(n(19034)),p=["action"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,p);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:f.default})))});m.displayName="HelpAction",t.help=function(e){var t=e.t;return{name:"help",icon:d.default,label:t("help"),action:function(){window.open("https://support.cozy.io/","_blank","noopener, noreferrer")},Component:m}}},12568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"appearance",{enumerable:!0,get:function(){return r.appearance}}),Object.defineProperty(t,"connectedDevices",{enumerable:!0,get:function(){return a.connectedDevices}}),Object.defineProperty(t,"connections",{enumerable:!0,get:function(){return i.connections}}),Object.defineProperty(t,"contact",{enumerable:!0,get:function(){return o.contact}}),Object.defineProperty(t,"help",{enumerable:!0,get:function(){return c.help}}),Object.defineProperty(t,"logout",{enumerable:!0,get:function(){return s.logout}}),Object.defineProperty(t,"permissions",{enumerable:!0,get:function(){return u.permissions}}),Object.defineProperty(t,"plans",{enumerable:!0,get:function(){return l.plans}}),Object.defineProperty(t,"profile",{enumerable:!0,get:function(){return d.profile}}),Object.defineProperty(t,"storage",{enumerable:!0,get:function(){return f.storage}});var r=n(93313),a=n(26038),i=n(91132),o=n(85127),c=n(58714),s=n(63535),u=n(52149),l=n(96316),d=n(59373),f=n(8827)},21272:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.legalNotice=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(26712)),f=r(n(19034)),p=["action"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,p);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:f.default})))});m.displayName="LegalNoticeAction",t.legalNotice=function(e){var t=e.t,n=e.instanceInfo;return{name:"legalNotice",icon:d.default,label:t("legalNotice"),displayCondition:function(){return!!n.instance.data.legal_notice_url},action:function(){window.open(n.instance.data.legal_notice_url,"_blank","noopener, noreferrer")},Component:m}}},63535:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.logout=void 0;var a=r(n(65556)),i=r(n(79300)),o=r(n(25460)),c=r(n(54060)),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),u=n(25976),l=r(n(95587)),d=r(n(96105)),f=r(n(11075)),p=r(n(32419)),h=r(n(43738)),m=["action"];function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}var y=(0,s.forwardRef)(function(e,t){var n=e.action,r=(0,c.default)(e,m);return s.default.createElement(l.default,(0,o.default)({},r,{ref:t}),s.default.createElement(d.default,null,s.default.createElement(p.default,{icon:n.icon})),s.default.createElement(f.default,{primary:n.label}))});y.displayName="LogoutAction",t.logout=function(e){var t,n=e.t,r=e.onLogOut;return{name:"logout",icon:h.default,label:n("logout"),action:(t=(0,i.default)(a.default.mark(function e(t,n){var i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.client,o=n.webviewIntent,!(r&&"function"==typeof r)){e.next=8;break}if(!((c=r())instanceof Promise)){e.next=6;break}return e.next=6,c;case 6:e.next=11;break;case 8:return e.next=10,i.logout();case 10:return e.abrupt("return",(0,u.isFlagshipApp)()&&o?o.call("logout"):window.location.reload());case 11:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),Component:y}}},52149:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.permissions=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(71400)),s=r(n(95587)),u=r(n(96105)),l=r(n(11075)),d=r(n(32419)),f=r(n(3473)),p=n(96121),h=["action"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var v=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,h);return o.default.createElement(s.default,(0,a.default)({},r,{ref:t}),o.default.createElement(u.default,null,o.default.createElement(d.default,{icon:n.icon})),o.default.createElement(l.default,{primary:n.label}))});v.displayName="PermissionsAction",t.permissions=function(e){var t=e.t;return{name:"permissions",icon:f.default,label:t("permissions"),displayCondition:function(){return(0,c.default)("settings.permissions-dashboard")},action:function(e,t){var n=t.client,r=(0,p.getSettingsLink)({client:n,hash:"permissions/slug"});window.open(r,"_self")},Component:v}}},96316:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.plans=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(71400)),s=n(16396),u=n(5499),l=r(n(95587)),d=r(n(96105)),f=r(n(11075)),p=r(n(32419)),h=r(n(78975)),m=r(n(19034)),v=["action"];function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}var b=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,v);return o.default.createElement(l.default,(0,a.default)({},r,{ref:t}),o.default.createElement(d.default,null,o.default.createElement(p.default,{icon:n.icon})),o.default.createElement(f.default,{primary:n.label}),!(0,c.default)("settings.subscription")&&o.default.createElement(d.default,null,o.default.createElement(p.default,{icon:m.default})))});b.displayName="PlansAction",t.plans=function(e){var t=e.t,n=e.instanceInfo;return{name:"plans",icon:h.default,label:t("plans"),displayCondition:function(){return(0,u.shouldDisplayOffers)(n)||(0,u.hasAnOffer)(n)},action:function(e,t){var r=t.client,a=(0,c.default)("settings.subscription")&&r?(0,s.generateWebLink)({cozyUrl:r.getStackClient().uri,hash:"/subscription",pathname:"/",slug:"settings",subDomainType:r.getInstanceOptions().subdomain}):(0,u.buildPremiumLink)(n);window.open(a,"_self")},Component:b}}},59373:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.profile=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(43068)),f=n(96121),p=["action"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,p);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t,color:"primary"}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label}))});m.displayName="ProfileAction",t.profile=function(e){var t=e.t;return{name:"profile",icon:d.default,label:t("profile"),action:function(e,t){var n=t.client,r=(0,f.getSettingsLink)({client:n,hash:"profile"});window.open(r,"_self")},Component:m}}},8827:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.storage=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(16385)),f=r(n(37629)),p=n(96121),h=["action"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var v=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,h);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label,secondary:o.default.createElement(f.default,null),secondaryTypographyProps:{variant:"body1",color:"textSecondary",component:"div"}}))});v.displayName="StorageAction",t.storage=function(e){var t=e.t;return{name:"storage",icon:d.default,label:t("storage"),action:function(e,t){var n=t.client,r=(0,p.getSettingsLink)({client:n,hash:"storage"});window.open(r,"_self")},Component:v}}},85764:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.termsOfService=void 0;var a=r(n(25460)),i=r(n(54060)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=r(n(95587)),s=r(n(96105)),u=r(n(11075)),l=r(n(32419)),d=r(n(73690)),f=r(n(19034)),p=["action"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=(0,o.forwardRef)(function(e,t){var n=e.action,r=(0,i.default)(e,p);return o.default.createElement(c.default,(0,a.default)({},r,{ref:t}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:n.icon})),o.default.createElement(u.default,{primary:n.label}),o.default.createElement(s.default,null,o.default.createElement(l.default,{icon:f.default})))});m.displayName="TermsOfServiceAction",t.termsOfService=function(e){var t=e.t,n=e.instanceInfo;return{name:"termsOfService",icon:d.default,label:t("termsOfService"),action:function(){window.open("https://files.cozycloud.cc/TOS".concat(n.instance.data.tos?"-".concat(n.instance.data.tos):"-201711",".pdf"),"_blank","noopener, noreferrer")},Component:m}}},96121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFetchingQueries=t.getSettingsLink=void 0;var r=n(16396);t.isFetchingQueries=function(e){return e.some(function(e){return"loading"===e.fetchStatus})},t.getSettingsLink=function(e){var t=e.client,n=e.hash;return(0,r.generateWebLink)({cozyUrl:t.getStackClient().uri,slug:"settings",hash:n,subDomainType:t.getInstanceOptions().subdomain})}},1453:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(51012)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(16396),c=r(n(41496)),s=r(n(32419)),u=r(n(3387)),l=r(n(29e3)),d=r(n(66470));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onLogOut,n=(0,i.useState)(!1),r=(0,a.default)(n,2),f=r[0],p=r[1],h=(0,i.useRef)(),m=(0,d.default)().t,v=(0,o.useInstanceInfo)().isLoaded;return i.default.createElement(i.default.Fragment,null,i.default.createElement(c.default,{ref:h,variant:"text","aria-controls":"simple-menu","aria-haspopup":"true",color:"default",busy:!v,startIcon:i.default.createElement(s.default,{icon:u.default}),label:m("menu.settings"),onClick:function(){return p(function(e){return!e})}}),f&&i.default.createElement(l.default,{anchorRef:h,onLogOut:t,onClose:function(){return p(!1)}}))}},56807:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UserMenuContent=void 0;var a=r(n(67294)),i=r(n(94184)),o=r(n(71400)),c=n(22960),s=n(16396),u=n(5499),l=r(n(24546)),d=r(n(10059)),f=r(n(96105)),p=r(n(11075)),h=r(n(78504)),m=r(n(12954)),v=r(n(43738)),y=r(n(32756)),b=r(n(88188)),g=r(n(32736)),x=r(n(32419)),w=r(n(20958)),k=r(n(41496)),O=r(n(32692)),_=n(72339),E=r(n(66470)),S=r(n(8558)),C=n(44745),P={"user-menu-content":"user-menu-content","user-menu-content-add-account":"user-menu-content-add-account"},j=t.UserMenuContent=function(e){var t=e.onLogOut,n=e.instance,r=e.diskUsage,j=(0,c.useWebviewIntent)(),A=(0,s.useClient)(),D=(0,E.default)().t,T=(0,_.useBreakpoints)().isMobile,M=n.data,R=M.public_name,I=M.email,N=(0,u.makeDiskInfos)(r.data.used,r.data.quota),F=N.humanDiskQuota,z=N.humanDiskUsage,L=(0,C.getSettingsLink)({client:A,hash:"profile"}),B=(0,C.getSettingsLink)({client:A,hash:"storage"}),U=T?"disabled":void 0;return a.default.createElement("div",{className:(0,i.default)(P["user-menu-content"],"u-flex u-flex-column")},a.default.createElement("div",{className:"u-flex u-flex-column u-flex-items-center u-mt-half"},a.default.createElement(S.default,{className:"u-mb-half"}),a.default.createElement(O.default,{variant:"h4"},R),a.default.createElement(O.default,{variant:"body2"},I),(0,o.default)("cozy.b2b.enabled")&&a.default.createElement(k.default,{label:D("userMenu.addAccount"),variant:"secondary",startIcon:a.default.createElement(x.default,{icon:h.default}),className:(0,i.default)(P["user-menu-content-add-account"],"u-mt-1")})),a.default.createElement(l.default,{className:"u-pb-0"},a.default.createElement(d.default,{button:!0,gutters:U,size:"small",component:"a",href:L},a.default.createElement(f.default,null,a.default.createElement(x.default,{icon:m.default})),a.default.createElement(p.default,{primary:D("userMenu.manageProfile")})),(0,o.default)("cozy.b2b.enabled")&&a.default.createElement(d.default,{button:!0,gutters:U,size:"small"},a.default.createElement(f.default,null,a.default.createElement(x.default,{icon:b.default})),a.default.createElement(p.default,{primary:D("userMenu.createBusinessAccount")})),a.default.createElement(d.default,{button:!0,gutters:U,size:"small",component:"a",href:B},a.default.createElement(f.default,null,a.default.createElement(x.default,{icon:y.default})),a.default.createElement(p.default,{primary:D("userMenu.storage"),secondary:D("userMenu.storageAvailable",F-z)}),a.default.createElement(f.default,null,a.default.createElement(x.default,{icon:g.default}))),a.default.createElement(w.default,{component:"li",variant:"inset"}),a.default.createElement(d.default,{button:!0,gutters:U,size:"small",onClick:function(){return(0,C.logOut)({client:A,webviewIntent:j,onLogOut:t})}},a.default.createElement(f.default,null,a.default.createElement(x.default,{icon:v.default})),a.default.createElement(p.default,{primary:D("userMenu.logOut")}))))};t.default=j},8558:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(16396),o=n(40996),c=r(n(88230)),s=r(n(61941)),u=n(5848);t.default=function(e){var t=e.className,n=e.size,r=(0,u.buildMyselfQuery)(),l=(0,i.useQuery)(r.definition,r.options),d=l.fetchStatus,f=l.data;if("loaded"!==d)return a.default.createElement(s.default,{variant:"circle",width:32,height:32});var p=f[0];if(p){var h=(0,o.getInitials)(p);return a.default.createElement(c.default,{className:t,size:void 0===n?"m":n},h)}}},44745:function(e,t,n){"use strict";var r,a=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.logOut=t.getSettingsLink=void 0;var i=a(n(65556)),o=a(n(79300)),c=n(16396),s=n(25976);t.getSettingsLink=function(e){var t=e.client,n=e.hash;return(0,c.generateWebLink)({cozyUrl:t.getStackClient().uri,slug:"settings",hash:n,subDomainType:t.getInstanceOptions().subdomain})},t.logOut=(r=(0,o.default)(i.default.mark(function e(t){var n,r,a,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.webviewIntent,!((a=t.onLogOut)&&"function"==typeof a)){e.next=8;break}if(!((o=a())instanceof Promise)){e.next=6;break}return e.next=6,o;case 6:e.next=11;break;case 8:return e.next=10,n.logout();case 10:return e.abrupt("return",(0,s.isFlagshipApp)()&&r?r.call("logout"):window.location.reload());case 11:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})},32452:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(51012)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=r(n(9047)),c=r(n(24584)),s=n(72339),u=n(44318),l=n(16396),d=r(n(56807)),f=r(n(8558));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}t.default=function(e){var t=e.onLogOut,n=(0,i.useState)(!1),r=(0,a.default)(n,2),p=r[0],h=r[1],m=(0,i.useRef)(),v=(0,i.useRef)(),y=(0,s.useBreakpoints)().isMobile,b=(0,l.useInstanceInfo)(),g=b.isLoaded,x=b.instance,w=b.diskUsage,k=function(){h(!p)};return i.default.createElement("nav",{ref:m},i.default.createElement(o.default,{ref:v,onClick:k,disabled:!g,className:"u-p-0 u-ml-half"},i.default.createElement(f.default,{size:y?"s":"m"})),y?i.default.createElement(u.ConfirmDialog,{open:p,onClose:k,content:i.default.createElement(d.default,{onLogOut:t,instance:x,diskUsage:w})}):i.default.createElement(c.default,{open:p,anchorEl:v.current,container:m.current,getContentAnchorEl:null,onClose:k,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:-10,horizontal:0}},i.default.createElement(d.default,{onLogOut:t,instance:x,diskUsage:w})))}},66470:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(96122),i=r(n(94157)),o=r(n(18670)),c=r(n(13585)),s={en:i.default,fr:o.default,es:c.default},u=(0,a.createUseI18n)(s);t.default=u},75934:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserActionRequired=t.getDefaultIcon=t.getAppSlug=t.getAppNamePrefix=t.getAppName=t.APP_SELECTOR=void 0;var n=t.APP_SELECTOR="[role=application]",r=function(){var e=document.querySelector(n);return e&&e.dataset?e.dataset:{}},a=function(){var e=r();return e.cozy?JSON.parse(e.cozy):{app:{}}};t.getDefaultIcon=function(){var e=a(),t=r();return e.app.icon?e.app.icon:t.cozyIconPath?t.cozyIconPath:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},t.getAppName=function(){var e=a(),t=r();return e.app.name||t.cozyAppName||null},t.getAppNamePrefix=function(){var e=a(),t=r();return e.app.prefix||t.cozyAppNamePrefix||null},t.getAppSlug=function(){var e=a(),t=r();return e.app.slug||t.cozyAppSlug||null},t.getUserActionRequired=function(){var e=document.querySelector("meta[name=user-action-required]"),t=e&&e.dataset;if(t){var n=t.title,r=t.code,a=t.detail,i=t.links;if(r)return{title:n,code:r,detail:a,links:i}}}},62330:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"BarCenter",{enumerable:!0,get:function(){return i.BarCenter}}),Object.defineProperty(t,"BarComponent",{enumerable:!0,get:function(){return a.BarComponent}}),Object.defineProperty(t,"BarProvider",{enumerable:!0,get:function(){return o.default}}),n(66566);var a=n(9296),i=(n(65039),n(21797),n(70914)),o=(n(48208),n(89718),n(36599),r(n(70082)));n(54910)},2320:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.UnavailableStackException=t.UnauthorizedStackException=t.ServerErrorException=t.NotFoundException=t.MethodNotAllowedException=t.ForbiddenException=void 0;var a=r(n(33207)),i=r(n(76100)),o=r(n(68603)),c=r(n(57604)),s=r(n(14297)),u=r(n(87487));function l(e,t,n){return t=(0,c.default)(t),(0,o.default)(e,d()?Reflect.construct(t,n||[],(0,c.default)(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}t.ForbiddenException=function(e){function t(e){var n;return(0,i.default)(this,t),(n=l(this,t)).name="Forbidden",n.status=403,n.message=e||"The application does not have permission to access this resource.",n.stack=Error().stack,n}return(0,s.default)(t,e),(0,a.default)(t)}((0,u.default)(Error)),t.ServerErrorException=function(e){function t(e){var n;return(0,i.default)(this,t),(n=l(this,t)).name="ServerError",n.status=500,n.message=e||"A server error occurred",n.stack=Error().stack,n}return(0,s.default)(t,e),(0,a.default)(t)}((0,u.default)(Error)),t.NotFoundException=function(e){function t(e){var n;return(0,i.default)(this,t),(n=l(this,t)).name="NotFound",n.status=404,n.message=e||"The ressource was not found",n.stack=Error().stack,n}return(0,s.default)(t,e),(0,a.default)(t)}((0,u.default)(Error)),t.MethodNotAllowedException=function(e){function t(e){var n;return(0,i.default)(this,t),(n=l(this,t)).name="MethodNotAllowed",n.status=405,n.message=e||"Method not allowed",n.stack=Error().stack,n}return(0,s.default)(t,e),(0,a.default)(t)}((0,u.default)(Error)),t.UnavailableStackException=function(e){function t(e){var n;return(0,i.default)(this,t),(n=l(this,t)).name="UnavailableStack",n.message=e||"The stack is temporarily unavailable",n.stack=Error().stack,n}return(0,s.default)(t,e),(0,a.default)(t)}((0,u.default)(Error)),t.UnauthorizedStackException=function(e){function t(e){var n;return(0,i.default)(this,t),(n=l(this,t)).name="UnauthorizedStack",n.status=401,n.message=e||"The app is not allowed to access to the requested resource",n.stack=Error().stack,n}return(0,s.default)(t,e),(0,a.default)(t)}((0,u.default)(Error))},73854:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s.apply(this,arguments)};var a=r(n(65556)),i=r(n(79300)),o={},c={gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"};function s(){return(s=(0,i.default)(a.default.mark(function e(t){var n,r,i,s,u,l,d,f=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:{},!((r=!(f.length>2)||void 0===f[2]||f[2])&&o.icons&&o.icons[i])){e.next=4;break}return e.abrupt("return",o.icons[i]);case 4:if(i=n.links&&n.links.icon){e.next=7;break}return e.abrupt("return","");case 7:return e.prev=7,e.next=10,t(i);case 10:if((u=e.sent).ok){e.next=13;break}throw Error("Error while fetching icon ".concat(u.statusText,": ").concat(i));case 13:return e.next=15,u.blob();case 15:s=e.sent,e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(7),e.t0;case 21:if(s.type){e.next=30;break}if(n.icon){e.next=24;break}throw Error("".concat(n.name,": Cannot detect mime type for icon ").concat(i));case 24:if(l=n.icon.split(".").pop()){e.next=27;break}throw Error("".concat(n.name,": Unable to detect icon mime type from extension (").concat(n.icon,")"));case 27:if(c[l]){e.next=29;break}throw Error("".concat(n.name,": 'Unexpected icon extension (").concat(n.icon,")"));case 29:s=new Blob([s],{type:c[l]});case 30:if(!s.type.match(/^image\/.*$/)){e.next=34;break}return d=URL.createObjectURL(s),r&&(o.icons=o.icons||{},o.icons[i]=d),e.abrupt("return",d);case 34:throw Error("".concat(n.name,": icon ").concat(i," is not an image."));case 35:case"end":return e.stop()}},e,null,[[7,18]])}))).apply(this,arguments)}},44841:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(71400)),i=r(n(60732));(0,r(n(31468)).default)(window,"cozy.debug.flagship",function(){return(0,a.default)("flagship.debug",!0)});var o=window.minilog||i.default,c=o("cozy-bar");(0,a.default)("bar.debug")||o.suggest.deny("cozy-bar","info"),t.default=c},5848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMyselfQuery=void 0;var r=n(16396);t.buildMyselfQuery=function(){return{definition:(0,r.Q)("io.cozy.contacts").where({me:!0}),options:{as:"io.cozy.contacts/myself",fetchPolicy:r.fetchPolicies.olderThan(36e5)}}}},73535:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65556)),i=r(n(79300)),o="io.cozy.apps";t.default=function(e){var t,n=e.getApp,r=e.onCreate,c=e.onDelete,s=e.cozyClient,u=(t=(0,i.default)(a.default.mark(function e(t){var i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t.slug);case 3:i=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),Error("Cannot fetch app ".concat(t.slug,": ").concat(e.t0.message));case 9:"function"==typeof r&&r(i);case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return t.apply(this,arguments)});try{var l=s.plugins.realtime;if(!l)throw Error("You must include the realtime plugin to use cozy-bar realtime features.");l.subscribe("created",o,u),l.subscribe("deleted",o,function(e){"function"==typeof c&&c(e)})}catch(e){console.warn("Cannot initialize realtime in Cozy-bar: ".concat(e.message))}}},38717:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.setInfos=t.setDefaultApp=t.receiveApp=t.isFetchingApps=t.isCurrentApp=t.hasFetched=t.getHomeApp=t.getApps=t.fetchApps=t.deleteApp=t.default=void 0;var a=r(n(65556)),i=r(n(13251)),o=r(n(79300)),c=r(n(8620)),s=r(n(17083)),u=r(n(71400));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f="DELETE_APP",p="RECEIVE_APP",h="RECEIVE_APP_LIST",m="RECEIVE_HOME_APP",v="FETCH_APPS",y="FETCH_APPS_FAILURE",b="SET_INFOS",g=t.isCurrentApp=function(e,t){return t.slug===e.appSlug};t.getApps=function(e){return e.apps?e.apps:[]},t.getHomeApp=function(e){return e.homeApp},t.isFetchingApps=function(e){return!!e&&e.isFetching},t.hasFetched=function(e){return e.hasFetched},t.deleteApp=function(e){return{type:f,app:e}},t.receiveApp=function(e){return{type:p,app:e}},t.setInfos=function(e,t,n){return{type:b,appName:e,appNamePrefix:t,appSlug:n}},t.fetchApps=function(){var e;return e=(0,o.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:v}),e.next=4,c.default.get.apps();case 4:if(n=e.sent,r=(0,u.default)("apps.hidden")||[],i=n.map(k).filter(function(e){return!r.includes(e.slug)}),n.length){e.next=9;break}throw Error("No installed apps found by the bar");case 9:return e.next=11,t(x(i));case 11:return e.next=13,t({type:h,apps:i});case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),t({type:y}),console.warn(e.t0.message?e.t0.message:e.t0);case 19:case"end":return e.stop()}},e,null,[[0,15]])})),function(t){return e.apply(this,arguments)}};var x=t.setDefaultApp=function(e){var t;return t=(0,o.default)(a.default.mark(function t(n){var r;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=O("home",e))){t.next=5;break}return t.abrupt("return",n({type:m,homeApp:r}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("Cozy-bar cannot fetch home app data: ".concat(t.t0.message));case 10:case"end":return t.stop()}},t,null,[[0,7]])})),function(e){return t.apply(this,arguments)}},w={apps:[],homeApp:null,isFetching:!0,appName:null,appNamePrefix:null,appSlug:null,hasFetched:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return d(d({},e),{},{isFetching:!0});case"FETCH_APPS_SUCCESS":case y:return d(d({},e),{},{isFetching:!1});case p:return d(d({},e),{},{apps:(0,s.default)(e.apps,[k(t.app)],function(e,t){return e.slug===t.slug})});case h:var n=t.apps.map(function(t){return d(d({},t),{},{isCurrentApp:g(e,t)})});return d(d({},e),{},{isFetching:!1,hasFetched:!0,apps:n});case m:var r=t.homeApp;return g(e,r)?d(d({},e),{},{homeApp:d(d({},r),{},{isCurrentApp:!0})}):d(d({},e),{},{homeApp:r});case f:return d(d({},e),{},{apps:e.apps.filter(function(e){return e.slug!==t.app.slug})});case b:return d(d({},e),{},{appName:t.appName,appNamePrefix:t.appNamePrefix,appSlug:t.appSlug});default:return e}};var k=function(e){var t;return d(d(d({},e),!!(t=e.attributes)&&Object.keys(t).reduce(function(e,n){return e[n.split("_").map(function(e,t){return t?e.charAt(0).toUpperCase()+e.slice(1):e}).join("")]=t[n],e},{})),{},{href:e.links&&e.links.related})},O=function(e,t){return t.find(function(t){return t.slug===e})}},99545:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpLink=t.fetchContext=t.default=void 0;var a=r(n(65556)),i=r(n(13251)),o=r(n(79300)),c=r(n(8620)),s=n(52803);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d="FETCH_CONTEXT",f="FETCH_CONTEXT_SUCCESS",p="RECEIVE_NO_CONTEXT";t.getHelpLink=function(e){return e.helpLink},t.fetchContext=function(){var e;return e=(0,o.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:d}),!n().cozyBar.context.contextNotExist){e.next=3;break}return e.abrupt("return",t({type:f,context:null}));case 3:return e.prev=3,e.next=6,c.default.get.context();case 6:return r=e.sent,e.abrupt("return",t({type:f,context:r}));case 10:return e.prev=10,e.t0=e.catch(3),e.t0.status&&404===e.t0.status&&t({type:p}),console.warn("Cannot get Cozy context"),e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[3,10]])})),function(t,n){return e.apply(this,arguments)}};var h={contextNotExist:!1,helpLink:null,isFetching:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return l(l({},e),{},{isFetching:!0});case f:var n=t.context&&t.context.data&&t.context.data.attributes;return l(l({},e),{},{helpLink:n&&n.help_link||null,isFetching:!1,contextNotExist:!1});case p:return l(l({},e),{},{contextNotExist:!0});case s.LOG_OUT:return h;default:return e}}},54910:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setInfos=t.reducers=t.onRealtimeDelete=t.onRealtimeCreate=t.logOut=t.isSettingsBusy=t.isFetchingSettings=t.isFetchingApps=t.isCurrentApp=t.hasFetched=t.getStorageData=t.getHomeApp=t.getHelpLink=t.getApps=t.fetchSettingsData=t.fetchContext=t.fetchApps=t.default=void 0;var r=n(98116),a=s(n(38717)),i=s(n(52803)),o=s(n(99545));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&({}).hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}var u=function(e,t){return function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.apply(void 0,[n.cozyBar[e]].concat(a))}};t.fetchApps=a.fetchApps,t.setInfos=a.setInfos,t.fetchSettingsData=i.fetchSettingsData,t.logOut=i.logOut,t.fetchContext=o.fetchContext,t.getApps=u("apps",a.getApps),t.getHomeApp=u("apps",a.getHomeApp),t.isFetchingApps=u("apps",a.isFetchingApps),t.isCurrentApp=u("apps",a.isCurrentApp),t.hasFetched=u("apps",a.hasFetched),t.getStorageData=u("settings",i.getStorageData),t.isSettingsBusy=u("settings",i.isSettingsBusy),t.isFetchingSettings=u("settings",i.isFetchingSettings),t.getHelpLink=u("context",o.getHelpLink),t.onRealtimeCreate=a.receiveApp,t.onRealtimeDelete=a.deleteApp;var l=t.reducers={cozyBar:(0,r.combineReducers)({apps:a.default,context:o.default,settings:i.default})};t.default=(0,r.combineReducers)(l)},52803:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.logOut=t.isSettingsBusy=t.isFetchingSettings=t.getStorageData=t.fetchSettingsData=t.default=t.LOG_OUT=void 0;var a=r(n(65556)),i=r(n(13251)),o=r(n(79300)),c=r(n(8620));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l="FETCH_SETTINGS",d="FETCH_SETTINGS_BUSY",f="FETCH_SETTINGS_SUCCESS",p="RECEIVE_STORAGE",h=t.LOG_OUT="LOG_OUT";t.getStorageData=function(e){return e.storageData},t.isSettingsBusy=function(e){return e.isBusy},t.isFetchingSettings=function(e){return e.isFetching};var m=function(){var e;return e=(0,o.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.default.get.storageData();case 3:return n=e.sent,e.abrupt("return",t({type:p,storageData:n}));case 7:return e.prev=7,e.t0=e.catch(0),console.warn&&console.warn("Cannot get Cozy storage informations"),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(t){return e.apply(this,arguments)}};t.fetchSettingsData=function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e=(0,o.default)(a.default.mark(function e(n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:l}),r=setTimeout(function(){t&&n({type:d})},450),e.next=4,n(m());case 4:clearTimeout(r),n({type:f});case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}},t.logOut=function(){var e;return e=(0,o.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:h}),e.prev=1,e.next=4,c.default.logout();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.warn("Error while logging out in the cozy-bar",e.t0);case 9:case"end":return e.stop()}},e,null,[[1,6]])})),function(t){return e.apply(this,arguments)}};var v={contextNotExist:!1,isFetching:!1,isBusy:!1,storageData:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return u(u({},e),{},{isFetching:!0});case d:return u(u({},e),{},{isBusy:!0});case f:return u(u({},e),{},{isFetching:!1,isBusy:!1});case"RECEIVE_NO_CONTEXT":return u(u({},e),{},{contextNotExist:!0});case p:return u(u({},e),{},{storageData:t.storageData});case h:return v;default:return e}}},86659:function(e,t,n){"use strict";var r,a,i,o,c=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(n(65556)),u=c(n(79300)),l=n(9420),d=c(n(73854)),f=c(n(73535)),p=n(2320),h=n(25976),m={401:p.UnauthorizedStackException,403:p.ForbiddenException,404:p.NotFoundException,405:p.MethodNotAllowedException,500:p.ServerErrorException},v=function(){return o.getStackClient()},y=function(){return new URL(v().uri)},b=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.headers=r.headers||{};return a.Accept="application/json","GET"===e||"HEAD"===e||void 0===n||a["Content-Type"]||(a["Content-Type"]="application/json",n=JSON.stringify(n)),v().fetch(e,t,n,r).then(function(e){if("function"==typeof m[e.status])throw new m[e.status];if(!e.headers.get("content-type").includes("json"))throw Error("Server response not in JSON");return e.json()})},g=function(e){if(!e)throw Error("Missing slug");return b("GET","/apps/".concat(e)).then(function(e){if(e.error)throw Error(e.error);return e.data})},x=function(e){return v().fetch("GET",e)};t.default={get:{app:g,apps:function(){return b("GET","/apps/").then(function(e){if(e.error)throw Error(e.error);return e.data})},context:(r=function(){return b("GET","/settings/context")},a={},i=void 0,(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==i){e.next=10;break}return e.prev=1,e.next=4,r();case 4:i=e.sent,e.next=10;break;case 7:var t;e.prev=7,e.t0=e.catch(1),i=["NotFoundException","NotFound","FetchError"].includes((t=e.t0).name)&&t.status&&404===t.status?a:void 0;case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))),storageData:function(){return b("GET","/settings/disk-usage").then(function(e){var t=parseInt(e.data.attributes.used,10),n=parseInt(e.data.attributes.quota,10)||Math.max(1e12,10*t);return{usage:t,quota:n,isLimited:e.data.attributes.is_limited}}).catch(function(){throw new p.UnavailableStackException})},iconProps:function(){var e={domain:y().host,secure:"https:"===y().protocol};return(0,h.isMobileApp)()?{fetchIcon:function(e){return(0,d.default)(x,e,!0)}}:e},cozyURL:function(){return y().origin},intents:function(){return new l.Intents({client:o})}},updateAccessToken:function(){throw Error("updateAccessToken should not be used with a cozy-client instance initialization")},cozyFetchJSON:function(e,t,n,r){return b(t,n,r).then(function(e){var t=Object.assign({},e.data);return t.id&&(t._id=t.id),t})},logout:function(){return v().fetch("DELETE","/auth/login").then(function(e){if(401===e.status)throw new p.UnauthorizedStackException;return 204===e.status&&window.location.reload(),!0}).catch(function(){throw new p.UnavailableStackException})},init:function(e){var t=e.cozyClient,n=e.onCreate,r=e.onDelete;(o=t).isLogged&&(0,f.default)({getApp:g,onCreate:n,onDelete:r,cozyClient:o})}}},8620:function(e,t,n){"use strict";var r,a=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.getIntents=t.default=t.cozyFetchJSON=void 0;var i=a(n(86659)),o=function(){if(!r)throw Error("client not initialized in cozy-bar");return r},c={init:function(e){return(r=i.default).init(e)},get:{app:function(){var e;return(e=o().get).app.apply(e,arguments)},apps:function(){var e;return(e=o().get).apps.apply(e,arguments)},context:function(){var e;return(e=o().get).context.apply(e,arguments)},storageData:function(){var e;return(e=o().get).storageData.apply(e,arguments)},iconProps:function(){var e;return(e=o().get).iconProps.apply(e,arguments)},cozyURL:function(){var e;return(e=o().get).cozyURL.apply(e,arguments)}},updateAccessToken:function(){var e;return(e=o()).updateAccessToken.apply(e,arguments)},logout:function(){var e;return(e=o()).logout.apply(e,arguments)},cozyFetchJSON:function(){var e;return(e=o()).cozyFetchJSON.apply(e,arguments)},getStack:o,getIntents:function(){return o().get.intents()}};t.default=c,t.cozyFetchJSON=c.cozyFetchJSON,t.getIntents=c.getIntents},49145:function(e,t,n){"use strict";var r,a=n(3971);t.default=void 0;var i=a(n(13251)),o=n(98116),c=a(n(18691)),s=n(25613),u=n(54910),l=n(94500),d=a(n(76734)),f=a(n(58609)),p=a(n(44841)),h=a(n(71400));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var v={storage:d.default,key:"cozy-bar",whitelist:f.default},y=(0,l.createLogger)({logger:p.default}),b=(0,s.persistCombineReducers)(v,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},u.reducers)),g=[c.default];(0,h.default)("bar.debug")&&g.push(y),t.default=function(){return r||(r=(0,o.createStore)(b,o.applyMiddleware.apply(null,g)),(0,s.persistStore)(r)),r}},5171:function(e,t,n){"use strict";var r=n(3971);Object.defineProperty(t,"__esModule",{value:!0}),t.appShape=void 0;var a=r(n(71871));t.appShape=a.default.shape({slug:a.default.string.isRequired,name:a.default.string.isRequired,namePrefix:a.default.string,comingSoon:a.default.bool,href:a.default.string,links:a.default.shape({icon:a.default.string.isRequired})})},61612:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},8383:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},11602:function(e){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},79300:function(e){function t(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise(function(a,i){var o=e.apply(n,r);function c(e){t(o,a,i,c,s,"next",e)}function s(e){t(o,a,i,c,s,"throw",e)}c(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},76100:function(e){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},14425:function(e,t,n){var r=n(93741),a=n(40878);function i(t,n,o){return a()?e.exports=i=Reflect.construct:e.exports=i=function(e,t,n){var a=[null];a.push.apply(a,t);var i=new(Function.bind.apply(e,a));return n&&r(i,n.prototype),i},e.exports.__esModule=!0,e.exports.default=e.exports,i.apply(null,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},33207:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},13251:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},25460:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},57604:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},14297:function(e,t,n){var r=n(93741);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},3971:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},41404:function(e){e.exports=function(e){return -1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},40878:function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9913:function(e){e.exports=function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],o=!0,c=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){c=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(c)throw r}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},11137:function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},54060:function(e,t,n){var r=n(34892);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},34892:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},68603:function(e,t,n){var r=n(55145).default,a=n(11602);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},93741:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},51012:function(e,t,n){var r=n(8383),a=n(9913),i=n(45452),o=n(11137);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},55145:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},45452:function(e,t,n){var r=n(61612);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}},e.exports.__esModule=!0,e.exports.default=e.exports},87487:function(e,t,n){var r=n(57604),a=n(93741),i=n(41404),o=n(14425);function c(t){var n="function"==typeof Map?new Map:void 0;return e.exports=c=function(e){if(null===e||!i(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,c(t)}e.exports=c,e.exports.__esModule=!0,e.exports.default=e.exports},65556:function(e,t,n){e.exports=n(35666)},79391:function(e,t,n){"use strict";var r=n(67361);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},71871:function(e,t,n){e.exports=n(79391)()},67361:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},27162:function(e,t){"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,c=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,g=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===c||e===o||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===s||e.$$typeof===u||e.$$typeof===f||e.$$typeof===b||e.$$typeof===g||e.$$typeof===x||e.$$typeof===y)}},92588:function(e,t,n){"use strict";e.exports=n(27162)},66254:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.r(t),n.d(t,{connect:()=>J,connectAdvanced:()=>N,createProvider:()=>w,Provider:()=>k});var i,o,c,s,u,l,d,f,p,h,m,v=n(67294),y=n(8549),b=n.n(y),g=b().shape({trySubscribe:b().func.isRequired,tryUnsubscribe:b().func.isRequired,notifyNestedSubs:b().func.isRequired,isSubscribed:b().func.isRequired}),x=b().shape({subscribe:b().func.isRequired,dispatch:b().func.isRequired,getState:b().func.isRequired});function w(e){void 0===e&&(e="store");var t,n=e+"Subscription",r=function(t){a(i,t);var r=i.prototype;function i(n,r){var a;return(a=t.call(this,n,r)||this)[e]=n.store,a}return r.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},r.render=function(){return v.Children.only(this.props.children)},i}(v.Component);return r.propTypes={store:x.isRequired,children:b().element.isRequired},r.childContextTypes=((t={})[e]=x.isRequired,t[n]=g,t),r}let k=w();function O(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var S=n(8679),C=n.n(S),P=n(41143),j=n.n(P),A=n(92588),D={notify:function(){}},T=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=D}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return!!this.unsubscribe},t.trySubscribe=function(){if(!this.unsubscribe){var e,t;this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=null,e=null},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&null!==e&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}})}},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=D)},e}(),M=0,R={};function I(){}function N(e,t){void 0===t&&(t={});var n,r,i=t,o=i.getDisplayName,c=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,s=i.methodName,u=void 0===s?"connectAdvanced":s,l=i.renderCountProp,d=void 0===l?void 0:l,f=i.shouldHandleStateChanges,p=void 0===f||f,h=i.storeKey,m=void 0===h?"store":h,y=i.withRef,b=void 0!==y&&y,w=E(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),k=m+"Subscription",S=M++,P=((n={})[m]=x,n[k]=g,n),D=((r={})[k]=g,r);return function(t){j()((0,A.isValidElementType)(t),"You must pass a component to the function returned by "+u+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",r=c(n),i=_({},w,{getDisplayName:c,methodName:u,renderCountProp:d,shouldHandleStateChanges:p,storeKey:m,withRef:b,displayName:r,wrappedComponentName:n,WrappedComponent:t}),o=function(n){function o(e,t){var a;return(a=n.call(this,e,t)||this).version=S,a.state={},a.renderCount=0,a.store=e[m]||t[m],a.propsMode=!!e[m],a.setWrappedInstance=a.setWrappedInstance.bind(O(O(a))),j()(a.store,'Could not find "'+m+'" in either the context or props of "'+r+'". Either wrap the root component in a <Provider>, '+('or explicitly pass "'+m+'" as a prop to "')+r+'".'),a.initSelector(),a.initSubscription(),a}a(o,n);var c=o.prototype;return c.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[k]=t||this.context[k],e},c.componentDidMount=function(){p&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.componentWillReceiveProps=function(e){this.selector.run(e)},c.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=I,this.store=null,this.selector.run=I,this.selector.shouldComponentUpdate=!1},c.getWrappedInstance=function(){return j()(b,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+u+"() call."),this.wrappedInstance},c.setWrappedInstance=function(e){this.wrappedInstance=e},c.initSelector=function(){var t,n,r=e(this.store.dispatch,i);this.selector=(t=this.store,n={run:function(e){try{var a=r(t.getState(),e);(a!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=a,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}}),this.selector.run(this.props)},c.initSubscription=function(){if(p){var e=(this.propsMode?this.props:this.context)[k];this.subscription=new T(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(R)):this.notifyNestedSubs()},c.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.isSubscribed=function(){return!!this.subscription&&this.subscription.isSubscribed()},c.addExtraProps=function(e){if(!b&&!d&&!(this.propsMode&&this.subscription))return e;var t=_({},e);return b&&(t.ref=this.setWrappedInstance),d&&(t[d]=this.renderCount++),this.propsMode&&this.subscription&&(t[k]=this.subscription),t},c.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,!e.error)return(0,v.createElement)(t,this.addExtraProps(e.props));throw e.error},o}(v.Component);return o.WrappedComponent=t,o.displayName=r,o.childContextTypes=D,o.contextTypes=P,o.propTypes=P,C()(o,t)}}var F=Object.prototype.hasOwnProperty;function z(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function L(e,t){if(z(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!F.call(t,n[a])||!z(e[n[a]],t[n[a]]))return!1;return!0}var B=n(98116);function U(e){return function(t,n){var r=e(t,n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function H(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?!!e.dependsOnOwnProps:1!==e.length}function G(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=H(e);var a=r(t,n);return"function"==typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=H(a),a=r(t,n)),a},r}}let W=[function(e){return"function"==typeof e?G(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:U(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?U(function(t){return(0,B.bindActionCreators)(e,t)}):void 0}],q=[function(e){return"function"==typeof e?G(e,"mapStateToProps"):void 0},function(e){return e?void 0:U(function(){return{}})}];function V(e,t,n){return _({},n,e,t)}let Q=[function(e){return"function"==typeof e?function(t,n){n.displayName;var r,a=n.pure,i=n.areMergedPropsEqual,o=!1;return function(t,n,c){var s=e(t,n,c);return o?a&&i(s,r)||(r=s):(o=!0,r=s),r}}:void 0},function(e){return e?void 0:function(){return V}}];function Z(e,t,n){for(var r=t.length-1;r>=0;r--){var a=t[r](e);if(a)return a}return function(t,r){throw Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function Y(e,t){return e===t}let J=(c=void 0===(o=(i={}).connectHOC)?N:o,u=void 0===(s=i.mapStateToPropsFactories)?q:s,d=void 0===(l=i.mapDispatchToPropsFactories)?W:l,p=void 0===(f=i.mergePropsFactories)?Q:f,m=void 0===(h=i.selectorFactory)?function(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,a=t.initMergeProps,i=E(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,i),c=r(e,i),s=a(e,i);return(i.pure?function(e,t,n,r,a){var i,o,c,s,u,l=a.areStatesEqual,d=a.areOwnPropsEqual,f=a.areStatePropsEqual,p=!1;return function(a,h){var m,v,y,b,g,x;return p?(m=a,g=!d(v=h,o),x=!l(m,i),(i=m,o=v,g&&x)?(c=e(i,o),t.dependsOnOwnProps&&(s=t(r,o)),u=n(c,s,o)):g?(e.dependsOnOwnProps&&(c=e(i,o)),t.dependsOnOwnProps&&(s=t(r,o)),u=n(c,s,o)):x?(b=!f(y=e(i,o),c),c=y,b&&(u=n(c,s,o)),u):u):(c=e(i=a,o=h),s=t(r,o),u=n(c,s,o),p=!0,u)}}:function(e,t,n,r){return function(a,i){return n(e(a,i),t(r,i),i)}})(o,c,s,e,i)}:h,function(e,t,n,r){void 0===r&&(r={});var a=r,i=a.pure,o=a.areStatesEqual,s=a.areOwnPropsEqual,l=void 0===s?L:s,f=a.areStatePropsEqual,h=void 0===f?L:f,v=a.areMergedPropsEqual,y=void 0===v?L:v,b=E(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),g=Z(e,u,"mapStateToProps"),x=Z(t,d,"mapDispatchToProps"),w=Z(n,p,"mergeProps");return c(m,_({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:!!e,initMapStateToProps:g,initMapDispatchToProps:x,initMergeProps:w,pure:void 0===i||i,areStatesEqual:void 0===o?Y:o,areOwnPropsEqual:l,areStatePropsEqual:h,areMergedPropsEqual:y},b))})},89311:function(e,t,n){"use strict";var r=n(50894);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var c=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},8549:function(e,t,n){e.exports=n(89311)()},50894:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},18691:function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"==typeof a?a(n,r,e):t(a)}}}}n.r(t),n.d(t,{default:()=>i});var a=r();a.withExtraArgument=r;let i=a},18621:function(e,t,n){"use strict";var r=n(34155),a=n(14746),i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(54765)),c=i(n(90402)),s=i(n(98235)),u=i(n(80295)),l=i(n(68434)),d=i(n(82007)),f=i(n(65105)),p=i(n(19723)),h=i(n(64512)),m=i(n(66604)),v=i(n(17204)),y=i(n(85564)),b=i(n(45578)),g=i(n(4788)),x=i(n(84486)),w=i(n(27361)),k=i(n(37203)),O=a(n(60359)),_=n(87941),E=i(n(97619)),S=n(25367),C=n(11282),P=n(72004),j=n(71450),A=n(18118),D=i(n(20057)),T=a(n(65972)),M=i(n(39268)),R=i(n(42189)),I=n(37130),N=i(n(31344)),F=n(12196),z=n(325),L=i(n(22853)),B=n(76305),U=i(n(67266)),H=i(n(25888)),G=n(23864),W=n(13820);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,h.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Q(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return Z(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Y=function(e){return{get:function(t,n){return L.default.warn(e),t[n]}}},J=function(e){var t;if(e&&"undefined"!=typeof window&&null!==(t=window.cozy)&&void 0!==t&&t.isSecureProtocol){var n,r=new URL(e);return r.protocol="https:",(n=r.toString()).endsWith("/")?n.slice(0,-1):n}return e},K="creation",$="update",X=function(){var e,t,n,a,i,k,M,q,Z,X,ee,et,en,er,ea,ei,eo,ec,es,eu,el,ed,ef,ep;function eh(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,eh),(0,h.default)(this,"fetchQueryAndGetFromState",(e=(0,d.default)(l.default.mark(function e(t){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.definition,a=t.options,e.prev=1,e.next=4,n.query(r,a);case 4:return e.abrupt("return",n.getQueryFromState(a.as,a));case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}},e,null,[[1,7]])})),function(t){return e.apply(this,arguments)}));var a=r.link,i=r.links,o=r.schema,c=r.appMetadata,s=r.capabilities,p=r.performanceApi,m=(0,u.default)(r,["link","links","schema","appMetadata","capabilities","performanceApi"]);a&&L.default.warn("`link` is deprecated, use `links`"),this.performanceApi=p||F.defaultPerformanceApi,this.appMetadata=void 0===c?{}:c,this.loginPromise=null,m.uri=J(m.uri),this.options=m,this.queryIdGenerator=new B.QueryIDGenerator,this.isLogged=!1,this.instanceOptions={},this.handleRevocationChange=this.handleRevocationChange.bind(this),this.handleTokenRefresh=this.handleTokenRefresh.bind(this),this.createClient();var v=this.getStackClient();if(v.on("error",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.emit.apply(n,["error"].concat(t))}),this.setLinks(Array.isArray(t=a||i||new E.default({performanceApi:this.performanceApi}))?t:[t]),this.schema=new R.default(void 0===o?{}:o,v),this.capabilities=s||null,this.plugins={},!(this.stackClient instanceof O.OAuthClient))try{this.loadInstanceOptionsFromDOM()}catch(e){}this._promiseCache=new H.default,m.uri&&m.token&&this.login(),this.storeAccesors=null,!1!==m.store&&this.ensureStore()}return(0,p.default)(eh,[{key:"emit",value:function(){}},{key:"on",value:function(){}},{key:"removeListener",value:function(){}},{key:"registerPlugin",value:function(e,t){if(!e.pluginName)throw Error("Cannot register a plugin whose class does not have `pluginName` attribute.");if(this.plugins[e.pluginName])throw Error("Cannot register plugin ".concat(e.pluginName,". A plugin with the same name has already been registered."));var n=new e(this,t);return this.plugins[e.pluginName]=n,n}},{key:"addSchema",value:function(e){this.schema.add(e)}},{key:"registerClientOnLinks",value:function(){var e,t=Q(this.links);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.registerClient)try{n.registerClient(this)}catch(e){L.default.warn(e)}}}catch(e){t.e(e)}finally{t.f()}}},{key:"login",value:function(e){return this.isLogged&&!this.isRevoked?(L.default.warn("CozyClient is already logged."),this.loginPromise):this.loginPromise=this._login(e)}},{key:"_login",value:(e=(0,d.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.emit("beforeLogin"),this.registerClientOnLinks(),t&&(t.uri&&this.stackClient.setUri(t.uri),t.token&&this.stackClient.setToken(t.token)),n=Q(this.links),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=13;break}if(!(a=r.value).onLogin){e.next=11;break}return e.next=11,a.onLogin();case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:if(this.isLogged=!0,this.isRevoked=!1,!(this.stackClient instanceof O.OAuthClient)){e.next=26;break}return e.next=26,this.loadInstanceOptionsFromStack();case 26:this.emit("login");case 27:case"end":return e.stop()}},e,this,[[4,15,18,21]])})),function(t){return e.apply(this,arguments)})},{key:"logout",value:(t=(0,d.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLogged){e.next=3;break}return L.default.warn("CozyClient isn't logged."),e.abrupt("return");case 3:if(this.emit("beforeLogout"),this.isLogged=!1,!(this.stackClient instanceof O.OAuthClient)){e.next=17;break}if(e.prev=6,!(this.stackClient.unregister&&(!this.stackClient.isRegistered||this.stackClient.isRegistered()))){e.next=10;break}return e.next=10,this.stackClient.unregister();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),L.default.warn("Impossible to unregister client on stack: ".concat(e.t0));case 15:case 20:e.next=25;break;case 17:return e.prev=17,e.next=20,this.stackClient.fetch("DELETE","/auth/login");case 22:e.prev=22,e.t1=e.catch(17),L.default.warn("Impossible to log out: ".concat(e.t1));case 25:t=Q(this.links),e.prev=26,t.s();case 28:if((n=t.n()).done){e.next=41;break}if(!(r=n.value).reset){e.next=39;break}return e.prev=31,e.next=34,r.reset();case 34:e.next=39;break;case 36:e.prev=36,e.t2=e.catch(31),L.default.warn(e.t2);case 39:e.next=28;break;case 41:e.next=46;break;case 43:e.prev=43,e.t3=e.catch(26),t.e(e.t3);case 46:return e.prev=46,t.f(),e.finish(46);case 49:this.store&&this.dispatch((0,T.resetState)()),this.emit("logout");case 51:case"end":return e.stop()}},e,this,[[6,12],[17,22],[26,43,46,49],[31,36]])})),function(){return t.apply(this,arguments)})},{key:"collection",value:function(e){return this.getStackClient().collection(e)}},{key:"fetch",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getStackClient().fetch(e,t,n,r)}},{key:"all",value:function(e){return L.default.warn("\nclient.all is deprecated, prefer to use the Q helper to build a new QueryDefinition.\n\nimport { Q } from 'cozy-client'\nclient.query(Q('io.cozy.bills'))"),(0,j.Q)(e)}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return L.default.warn("client.find(doctype, selector) is deprecated, please use Q(doctype).where(selector) to build the same query."),new j.QueryDefinition({doctype:e,selector:t})}},{key:"get",value:function(e,t){return L.default.warn("client.get(".concat(e,", id) is deprecated, please use Q(").concat(e,").getById(id) to build the same query.")),new j.QueryDefinition({doctype:e,id:t})}},{key:"create",value:(n=(0,d.default)(l.default.mark(function e(t,n,r){var a,i,o=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},n._type,i=V({_type:t},(0,u.default)(n,["_type"])),e.next=5,this.schema.validate(i);case 5:if(!0===e.sent){e.next=8;break}throw Error("Validation failed");case 8:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(i,r),a));case 9:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"validate",value:function(e){return this.schema.validate(e)}},{key:"save",value:(a=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=t._type,a=(0,u.default)(t,["_type"]),r){e.next=4;break}throw Error("The document must have a `_type` property");case 4:return i=V({_type:r},a),e.next=7,this.schema.validate(i);case 7:if(!0===e.sent){e.next=10;break}throw Error("Validation failed");case 10:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(i),n));case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"saveAll",value:(i=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o=this,c=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},1===Array.from(new Set(t.map(function(e){return e._type}))).length){e.next=4;break}throw Error("saveAll can only save documents with the same doctype");case 4:return e.next=6,Promise.all(t.map(function(e){return o.schema.validate(e)}));case 6:if(!((r=e.sent.filter(function(e){return!0!==e})).length>0)){e.next=11;break}throw L.default.warn("There has been some validation errors while bulk saving",r),Error("Validation failed for at least one doc");case 11:return a=t.map(function(e){return o.prepareDocumentForSave(e)}),i=j.Mutations.updateDocuments(a),e.abrupt("return",this.mutate(i,n));case 14:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"ensureCozyMetadata",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{event:K};if(void 0===this.appMetadata)return e;if(e._type){var r=this.schema.getDoctypeSchema(e._type);t=(0,w.default)(r,"doctypeVersion")}var a=this.appMetadata,i=a.slug,o=a.sourceAccount,c=a.sourceAccountIdentifier,u=a.version,l=new Date().toISOString(),d=(0,w.default)(e,"cozyMetadata",{});return n.event===K?d=V({metadataVersion:1,doctypeVersion:t,createdByApp:i,sourceAccount:o,sourceAccountIdentifier:c,createdAt:l,createdByAppVersion:u,updatedAt:l,updatedByApps:i?[{date:l,slug:i,version:u}]:[]},d):n.event===$&&(d=V(V({},d),{},{updatedAt:l,updatedByApps:[{date:l,slug:i,version:u}].concat((0,s.default)((0,w.default)(e,"cozyMetadata.updatedByApps",[]).filter(function(e){return e.slug!==i})))})),V(V({},e),{},{cozyMetadata:d})}},{key:"prepareDocumentForSave",value:function(e){var t=!e._rev;return this.ensureCozyMetadata((0,P.dehydrate)(e),{event:t?K:$})}},{key:"getDocumentSavePlan",value:function(e,t){var n=this,r=!e._rev,a=this.prepareDocumentForSave(e),i=r?j.Mutations.createDocument(a):j.Mutations.updateDocument(a);if(!(t&&Object.values(t).filter(function(e){return Array.isArray(e)?e.length>0:e}).length>0))return i;for(var o=0,s=Object.keys(t);o<s.length;o++){var u,l,d=s[o],f=e._type,p=this.schema.getRelationship(f,d);if(!((u=p.type).prototype.addReferences&&u.prototype.removeReferences))throw l=p.name,Error('The "'.concat(l,'" relationship does not support references. If you need to add references to a document, its relationship class must have the methods {add,remove}References'))}if(t&&!r)throw Error("Unable to save external relationships on a not-new document");return[i,function(e){var r=n.hydrateDocument(e.data);return Object.entries(t).map(function(e){var t=(0,c.default)(e,2),n=t[0],a=t[1];return r[n].addReferences(a)})}]}},{key:"triggerHook",value:function(e,t){if(eh.hooks){var n,r=Q((eh.hooks[t._type]||{})[e]||[]);try{for(r.s();!(n=r.n()).done;)(0,n.value)(this,t)}catch(e){r.e(e)}finally{r.f()}}}},{key:"destroy",value:(k=(0,d.default)(l.default.mark(function e(t){var n,r,a=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.triggerHook("before:destroy",t);case 3:return e.next=5,this.mutate(j.Mutations.deleteDocument(t),n);case 5:return r=e.sent,e.next=8,this.triggerHook("after:destroy",t);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"upload",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.mutate(j.Mutations.uploadFile(e,t),n)}},{key:"ensureQueryExists",value:function(e,t,n){this.ensureStore(),"loaded"===(0,T.getQueryFromState)(this.store.getState(),e).fetchStatus&&(t.skip||t.bookmark)||this.dispatch((0,T.initQuery)(e,t,n))}},{key:"query",value:(M=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o,c,s,d,f,p,h=this,m=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=m.length>1&&void 0!==m[1]?m[1]:{}).update,a=n.executeFromStore,i=(0,u.default)(n,["update","executeFromStore"]),o=this.performanceApi.mark("client.query(".concat(t.doctype,")")),this.ensureStore(),c=i.as||this.queryIdGenerator.generateId(t),s=this.getQueryFromState(c,i),void 0===i.enabled||"boolean"==typeof i.enabled){e.next=9;break}throw Error("option.enabled should be a boolean for this query: ".concat(JSON.stringify(t)));case 9:if(!i.fetchPolicy){e.next=15;break}if(i.as){e.next=12;break}throw Error("Cannot use `fetchPolicy` without naming the query, please use `as` to name the query");case 12:if(i.fetchPolicy(s)){e.next=15;break}return e.abrupt("return");case 15:if(!(s&&Object.keys(s).length>0)||"loading"!==s.fetchStatus){e.next=18;break}return e.abrupt("return",this._promiseCache.get(function(){return(0,U.default)(t)}));case 18:return this.ensureQueryExists(c,t,i),e.prev=19,d=void 0!==i.backgroundFetching?i.backgroundFetching:this.options.backgroundFetching,this.dispatch((0,T.loadQuery)(c,{backgroundFetching:d})),f=a?function(){return Promise.resolve((0,T.executeQueryFromState)(h.store.getState(),t))}:function(){return h.requestQuery(t,i)},e.next=25,this._promiseCache.exec(f,function(){return(0,U.default)(t)});case 25:return p=e.sent,this.dispatch((0,T.receiveQueryResult)(c,p,{update:r,backgroundFetching:d})),this.performanceApi.measure({markName:o,measureName:"".concat(o," success"),color:"primary"}),e.abrupt("return",p);case 31:if(e.prev=31,e.t0=e.catch(19),this.performanceApi.measure({markName:o,measureName:"".concat(o," error"),color:"error"}),this.dispatch((0,T.receiveQueryError)(c,e.t0)),!i.onError){e.next=39;break}i.onError(e.t0),e.next=44;break;case 39:if(!this.options.onError){e.next=43;break}this.options.onError(e.t0),e.next=44;break;case 43:throw e.t0;case 44:case"end":return e.stop()}},e,this,[[19,31]])})),function(e){return M.apply(this,arguments)})},{key:"queryAll",value:(q=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o,c,u=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=u.length>1&&void 0!==u[1]?u[1]:{}).as||this.queryIdGenerator.generateId(t),a=V(V({},n),{},{as:r}),e.prev=3,e.next=6,this.query(t,a);case 6:o=(i=e.sent).data;case 8:if(!(i&&i.next)){e.next=22;break}if(!i.bookmark){e.next=15;break}return e.next=12,this.query(t.offsetBookmark(i.bookmark),a);case 12:i=e.sent,e.next=19;break;case 15:return c=(0,T.getRawQueryFromState)(this.store.getState(),r),e.next=18,this.query(t.offset(c.data.length),a);case 18:i=e.sent;case 19:o.push.apply(o,(0,s.default)(i.data)),e.next=8;break;case 22:return e.abrupt("return",o);case 25:return e.prev=25,e.t0=e.catch(3),L.default.log("queryAll error for ".concat(e.t0.toString())),e.abrupt("return",[]);case 29:case"end":return e.stop()}},e,this,[[3,25]])})),function(e){return q.apply(this,arguments)})},{key:"watchQuery",value:function(){return L.default.warn("client.watchQuery is deprecated, please use client.makeObservableQuery."),this.makeObservableQuery.apply(this,arguments)}},{key:"makeObservableQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ensureStore();var n=t.as||this.queryIdGenerator.generateId(e);return this.ensureQueryExists(n,e),new N.default(n,e,this,t)}},{key:"mutate",value:(Z=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o,c,s=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=s.length>1&&void 0!==s[1]?s[1]:{}).update,a=n.updateQueries,i=(0,u.default)(n,["update","updateQueries"]),this.ensureStore(),o=i.as||this.queryIdGenerator.generateId(t),this.dispatch((0,T.initMutation)(o,t)),e.prev=5,e.next=8,this.requestMutation(t,i);case 8:return c=e.sent,this.dispatch((0,T.receiveMutationResult)(o,c,{update:r,updateQueries:a},t)),e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(5),this.dispatch((0,T.receiveMutationError)(o,e.t0,t)),e.t0;case 17:case"end":return e.stop()}},e,this,[[5,13]])})),function(e){return Z.apply(this,arguments)})},{key:"requestQuery",value:(X=(0,d.default)(l.default.mark(function e(t,n){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chain.request(t,n);case 2:return r=e.sent,e.next=5,(0,W.persistVirtualDocuments)(this,t,r.data);case 5:if(t.includes){e.next=7;break}return e.abrupt("return",r);case 7:return e.next=9,this.fetchRelationships(r,this.getIncludesRelationships(t));case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return X.apply(this,arguments)})},{key:"persistVirtualDocuments",value:(ee=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=["io.cozy.files.shortcuts"].includes(t.doctype),"io.cozy.apps_registry"!==t.doctype){e.next=6;break}return e.next=5,this.persistVirtualDocument({_type:"io.cozy.apps_registry",_id:t.id,cozyPouchData:n},r);case 5:return e.abrupt("return",e.sent);case 6:if(Array.isArray(n)){e.next=11;break}return e.next=9,this.persistVirtualDocument(n,r);case 9:e.next=29;break;case 11:a=Q(n.filter(function(e){var t;return!!e&&!e.cozyLocalOnly&&((null===(t=e.meta)||void 0===t||!t.rev)&&!e._rev||!!r)})),e.prev=13,a.s();case 15:if((i=a.n()).done){e.next=21;break}return o=i.value,e.next=19,this.persistVirtualDocument(o,r);case 19:e.next=15;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(13),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:case"end":return e.stop()}},e,this,[[13,23,26,29]])})),function(e,t){return ee.apply(this,arguments)})},{key:"persistVirtualDocument",value:(et=(0,d.default)(l.default.mark(function e(t,n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.cozyLocalOnly)){e.next=2;break}return e.abrupt("return");case 2:if(!(!(null!==(r=t.meta)&&void 0!==r&&r.rev)&&!t._rev||n)){e.next=5;break}return e.next=5,this.chain.persistCozyData(t);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return et.apply(this,arguments)})},{key:"fetchRelationships",value:(en=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,o,s,u,d,f,p,h,m,v,w,k,O,_,E,S,P,A=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=!Array.isArray(t.data))||0!==t.data.length){e.next=3;break}return e.abrupt("return",t);case 3:return a=r?[t.data]:t.data,i=new Map,o=[],s=[],a.forEach(function(e){return(0,x.default)(n,function(t,n){try{var r=t.type.query(e,A,t),a=e._id;i.set(r,[a,n]),r instanceof j.QueryDefinition?s.push(r):o.push(r)}catch(e){}})}),u=(0,D.default)(s),e.next=11,Promise.all(u.map(function(e){return A.chain.request(e)}));case 11:d=e.sent,f=(0,b.default)((0,y.default)(o),"_id"),p=(0,y.default)(d.map(function(e){return e.included||e.data})).concat(f).filter(Boolean),h={},m=Q((0,g.default)(u,d));try{for(m.s();!(v=m.n()).done;)k=(w=(0,c.default)(v.value,2))[0],O=w[1],(_=i.get(k))&&(S=(E=(0,c.default)(_,2))[0],P=E[1],h[S]=h[S]||{},h[S][P]=(0,C.responseToRelationship)(O))}catch(e){m.e(e)}finally{m.f()}return e.abrupt("return",V(V({},(0,C.attachRelationships)(t,h)),{},{included:p}));case 18:case"end":return e.stop()}},e)})),function(e,t){return en.apply(this,arguments)})},{key:"requestMutation",value:(er=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,c,s=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=8;break}return a=(r=(0,o.default)(t))[0],i=r.slice(1),e.next=4,this.requestMutation(a);case 4:return c=e.sent,e.next=7,Promise.all(i.map(function(e){var t="function"==typeof e?e(c):e;return s.requestMutation(t)}));case 7:return e.abrupt("return",c);case 8:return e.abrupt("return",this.chain.request(t,n));case 9:case"end":return e.stop()}},e,this)})),function(e,t){return er.apply(this,arguments)})},{key:"getIncludesRelationships",value:function(e){var t=this,n=e.includes,r=e.doctype;return n?(0,v.default)(n.map(function(e){return[e,t.schema.getRelationship(r,e)]})):{}}},{key:"hydrateDocuments",value:function(e,t){var n=this;if(!1===this.options.autoHydrate)return t;var r=this.schema.getDoctypeSchema(e);return r.relationships?t.map(function(e){return n.hydrateDocument(e,r)}):t}},{key:"hydrateDocument",value:function(e,t){if(!e)return e;var n=t||this.schema.getDoctypeSchema(e._type);return V(V({},e),this.hydrateRelationships(e,n.relationships))}},{key:"hydrateRelationships",value:function(e,t){var n=this.getRelationshipStoreAccessors();return(0,m.default)(t,function(t,r){return(0,S.create)(e,t,n)})}},{key:"makeNewDocument",value:function(e){return this.hydrateDocument({_type:e})}},{key:"generateRandomId",value:function(){return this.queryIdGenerator.generateRandomId()}},{key:"getAssociation",value:function(e,t){return(0,S.create)(e,this.schema.getRelationship(e._type,t),this.getRelationshipStoreAccessors())}},{key:"getRelationshipStoreAccessors",value:function(){var e=this;return this.storeAccesors||(this.storeAccessors={get:this.getDocumentFromState.bind(this),save:function(t,n){return e.save.call(e,t,n)},dispatch:this.dispatch.bind(this),query:function(t,n){return e.query.call(e,t,n)},mutate:function(t,n){return e.mutate.call(e,t,n)}}),this.storeAccessors}},{key:"getCollectionFromState",value:function(e){try{return(0,T.getCollectionFromState)(this.store.getState(),e)}catch(t){return L.default.warn("Could not getCollectionFromState",e,t.message),null}}},{key:"getDocumentFromState",value:function(e,t){try{return(0,T.getDocumentFromState)(this.store.getState(),e,t)}catch(n){return L.default.warn("Could not getDocumentFromState",e,t,n.message),null}}},{key:"getQueryFromState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hydrated||!1,r=t.singleDocData||!1;try{var a=(0,T.getQueryFromState)(this.store.getState(),e),i=a.definition&&a.definition.doctype,o=a.definition&&a.definition.id;if(!n&&!r)return a;var c=n&&i?this.hydrateDocuments(i,a.data):a.data;return V(V({},a),{},{data:o&&r?c[0]:c})}catch(t){return L.default.warn("Could not get query from state. queryId: ".concat(e,", error: ").concat(t.message)),null}}},{key:"register",value:function(e){return this.getStackClient().setUri(e),this.startOAuthFlow(A.authFunction)}},{key:"isReactNative",value:function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product}},{key:"startOAuthFlow",value:(ea=(0,d.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getStackClient(),e.next=3,n.register();case 3:return e.next=5,this.certifyFlagship();case 5:return e.abrupt("return",this.authorize({openURLCallback:t}));case 6:case"end":return e.stop()}},e,this)})),function(e){return ea.apply(this,arguments)})},{key:"certifyFlagship",value:(ei=(0,d.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getStackClient()).oauthOptions.shouldRequireFlagshipPermissions){e.next=4;break}return e.next=4,(0,G.certifyFlagship)(t.oauthOptions.certificationConfig,this);case 4:case"end":return e.stop()}},e,this)})),function(){return ei.apply(this,arguments)})},{key:"authorize",value:(eo=(0,d.default)(l.default.mark(function e(){var t,n,r,a,i,o,c,s,u,d,f,p,h,m,v,y=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(t=y.length>0&&void 0!==y[0]?y[0]:{}).openURLCallback)?A.authFunction:n,i=void 0===(a=t.sessionCode)?void 0:a,c=void 0===(o=t.pkceCodes)?{}:o,e.prev=1,s=c.codeVerifier,u=c.codeChallenge,f=(d=this.getStackClient()).generateStateCode(),p=d.getAuthCodeURL({stateCode:f,scopes:void 0,sessionCode:i,codeChallenge:u}),e.next=8,r(p);case 8:return h=e.sent,m=d.getAccessCodeFromURL(h,f),e.next=12,d.fetchAccessToken(m,void 0,void 0,s);case 12:return v=e.sent,d.setToken(v),e.abrupt("return",{token:v,infos:d.oauthOptions,client:d.oauthOptions});case 17:throw e.prev=17,e.t0=e.catch(1),e.t0.message===_.REGISTRATION_ABORT&&this.getStackClient().unregister(),e.t0;case 21:case"end":return e.stop()}},e,this,[[1,17]])})),function(){return eo.apply(this,arguments)})},{key:"renewAuthorization",value:function(){return this.authorize({openURLCallback:A.authFunction})}},{key:"setStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.force;if(void 0===e)throw Error("Store is undefined");if(this.store&&!(void 0!==n&&n))throw Error("Client already has a store, it is forbidden to change store.\nsetStore must be called before any query is executed. Try to\ncall setStore earlier in your code, preferably just after the\ninstantiation of the client.");this.store=e}},{key:"ensureStore",value:function(){this.store||this.setStore((0,T.createStore)(this.performanceApi))}},{key:"checkForRevocation",value:(ec=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.stackClient instanceof O.OAuthClient)){e.next=4;break}return e.abrupt("return",this.stackClient.checkForRevocation());case 4:throw"checkForRevocation is only implemented for OAutClient";case 5:case"end":return e.stop()}},e,this)})),function(){return ec.apply(this,arguments)})},{key:"handleRevocationChange",value:function(e){e?(this.isRevoked=!0,this.emit("revoked")):(this.isRevoked=!1,this.emit("unrevoked"))}},{key:"handleTokenRefresh",value:function(e){this.emit("tokenRefreshed"),this.options.onTokenRefresh&&(Y("Using onTokenRefresh is deprecated, please use events like this: cozyClient.on('tokenRefreshed', token => console.log('Token has been refreshed', token)). https://git.io/fj3M3"),this.options.onTokenRefresh(e))}},{key:"createClient",value:function(){this.options.client&&L.default.warn("CozyClient: Using options.client is deprecated, please use options.stackClient.");var e=void 0===this.options.warningForCustomHandlers||this.options.warningForCustomHandlers,t=this.options.client||this.options.stackClient,n={onRevocationChange:this.handleRevocationChange,onTokenRefresh:this.handleTokenRefresh};if(t){this.stackClient=t,t.options||(t.options={});for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];t.options[i]?e&&L.default.warn("You passed a stackClient with its own ".concat(i,". It is not supported, unexpected things might happen.")):t.options[i]=n[i]}}else{var o=V(V({},this.options),n);this.stackClient=this.options.oauth?new O.OAuthClient(o):new O.default(o)}this.client=new Proxy(this.stackClient,Y("Using cozyClient.client is deprecated, please use cozyClient.stackClient."))}},{key:"getClient",value:function(){return L.default.warn("CozyClient: getClient() is deprecated, please use getStackClient()."),this.getStackClient()}},{key:"getStackClient",value:function(){return this.stackClient||this.createClient(),this.stackClient}},{key:"reducer",value:function(){return(0,T.default)(this.performanceApi)}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"getInstanceOptions",value:function(){return this.instanceOptions}},{key:"loadInstanceOptionsFromDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[role=application]",t=document.querySelector(e);if(!(t instanceof HTMLElement))throw Error("The selector that is passed does not return an HTMLElement");var n=t.dataset,r=n.cozy,a=(0,u.default)(n,["cozy"]);this.instanceOptions=V(V({},JSON.parse(void 0===r?"{}":r)),a),this.capabilities=this.instanceOptions.capabilities||null}},{key:"loadInstanceOptionsFromStack",value:(es=(0,d.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.query((0,j.Q)("io.cozy.settings").getById("io.cozy.settings.capabilities")),this.query((0,j.Q)("io.cozy.settings").getById("io.cozy.settings.instance"))]);case 2:n=(t=e.sent)[0].data,r=t[1].data,this.instanceOptions={capabilities:n,locale:r.locale,tracking:r.tracking},this.capabilities=this.instanceOptions.capabilities||null;case 7:case"end":return e.stop()}},e,this)})),function(){return es.apply(this,arguments)})},{key:"setData",value:function(e){var t=this;this.ensureStore(),Object.entries(e).forEach(function(e){var n=(0,c.default)(e,2),r=(n[0],n[1]);t.dispatch((0,T.receiveQueryResult)(null,{data:r}))})}},{key:"setOnError",value:function(e){if(this.options&&this.options.onError)throw Error("On Error is already defined");this.options.onError=e}},{key:"toJSON",value:function(){return new z.CozyClient({uri:this.options.uri})}},{key:"setAppMetadata",value:function(e){this.appMetadata=V(V({},this.appMetadata),e)}},{key:"setLinks",value:(eu=(0,d.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.links=t||[new E.default({performanceApi:this.performanceApi})],this.registerClientOnLinks(),this.chain=(0,I.chain)(this.links),!this.isLogged){e.next=22;break}n=Q(this.links),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=14;break}if(!(a=r.value).onLogin){e.next=12;break}return e.next=12,a.onLogin();case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:case"end":return e.stop()}},e,this,[[5,16,19,22]])})),function(e){return eu.apply(this,arguments)})},{key:"getSettings",value:(el=(0,d.default)(l.default.mark(function e(t,n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.getSettings)(this,t,n));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return el.apply(this,arguments)})},{key:"saveAfterFetchSettings",value:(ed=(0,d.default)(l.default.mark(function e(t,n,r){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.saveAfterFetchSettings)(this,t,n,r));case 1:case"end":return e.stop()}},e,this)})),function(e,t,n){return ed.apply(this,arguments)})},{key:"resetQuery",value:(ef=(0,d.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(0,T.isQueryExisting)(this.store.getState(),t)){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:return this.dispatch((0,T.resetQuery)(t)),n=this.getQueryFromState(t),e.next=7,this.query(n.definition,{as:t});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(e){return ef.apply(this,arguments)})}],[{key:"fromOldClient",value:function(e,t){return new eh(V({uri:e._url,token:e._token.token},t))}},{key:"fromOldOAuthClient",value:(ep=(0,d.default)(l.default.mark(function e(t,n){var r,a,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._oauth){e.next=12;break}return e.next=3,t.authorize();case 3:if(a={oauth:(r=e.sent).client,token:r.token,scope:r.token.scope},!(i=new eh(V(V({uri:t._url},a),n))).loginPromise){e.next=9;break}return e.next=9,i.loginPromise;case 9:return e.abrupt("return",i);case 12:throw Error("Cannot instantiate a new client: old client is not an OAuth client. CozyClient.fromOldClient might be more suitable.");case 13:case"end":return e.stop()}},e)})),function(e,t){return ep.apply(this,arguments)})},{key:"fromEnv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e||(void 0!==r?r.env:{}),a=n.COZY_URL,i=n.COZY_CREDENTIALS;if(!a||!i)throw Error("Env used to instantiate CozyClient must have COZY_URL and COZY_CREDENTIALS");try{t.oauth=JSON.parse(i)}catch(e){t.token=i.trim()}return t.uri=a.trim(),new eh(V({},t))}},{key:"fromDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[role=application]",n=document.querySelector(t);if(!(n instanceof HTMLElement))throw Error("Cannot find an HTMLElement corresponding to ".concat(t));if(!n||!n.dataset)throw Error("Found no data in ".concat(t," to instantiate cozyClient"));var r=n.dataset.cozy?JSON.parse(n.dataset.cozy):V({},n.dataset),a=r.domain,i=r.token;if(a&&i||(a=a||r.cozyDomain,i=i||r.cozyToken),!a||!i)throw Error("Found no data in ".concat(n.dataset," to instantiate cozyClient"));return new eh(V({uri:"".concat(window.location.protocol,"//").concat(a),token:i,capabilities:r.capabilities},e))}},{key:"registerHook",value:function(e,t,n){var r=eh.hooks[e]=eh.hooks[e]||{};r[t]=r[t]||[],r[t].push(n)}}]),eh}();X.hooks=X.hooks||{},X.fetchPolicies=M.default,X.version="57.6.0",k.default.mixin(X),t.default=X},37130:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.chain=t.default=void 0;var a=r(n(98235)),i=r(n(68434)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=function(){var e,t,n;function r(e,t){(0,c.default)(this,r),"function"==typeof e&&(this.request=e),"function"==typeof t&&(this.persistCozyData=t)}return(0,s.default)(r,[{key:"request",value:(e=(0,o.default)(i.default.mark(function e(t,n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("request is not implemented");case 1:case"end":return e.stop()}},e)})),function(t,n,r,a){return e.apply(this,arguments)})},{key:"persistCozyData",value:(t=(0,o.default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("persistCozyData is not implemented");case 1:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})},{key:"reset",value:(n=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("reset is not implemented");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),r}();t.default=u;var l=function(e){return"function"==typeof e?new u(e):e},d=new u(function(e,t,n){if(n)return n;if(e.execute)return e.execute();throw Error("No link could handle operation ".concat(JSON.stringify(e)))},function(e,t){});t.chain=function(e){return[].concat((0,a.default)(e),[d]).map(l).reduce(f)};var f=function(e,t){return new u(function(n,r,a,i){return e.request(n,r,a,function(e,n,r){return t.request(e,n,r,i)})},function(n,r){return e.persistCozyData(n,function(e){return t.persistCozyData(e,r)})})}},31344:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(64512)),c=r(n(27361)),s=n(65972),u=Object.prototype.hasOwnProperty,l=function(){function e(t,n,r,i){var c=this;if((0,a.default)(this,e),(0,o.default)(this,"handleStoreChange",function(){var e=c.currentRawResult();!function(e,t){if(d(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!u.call(t,n[a])||!d(e[n[a]],t[n[a]]))return!1;return!0}(e,c.lastResult)&&(c.lastResult=e,c.notifyObservers())}),!t||!n||!r)throw Error("ObservableQuery takes 3 arguments: queryId, definition and client");this.queryId=t,this.definition=n,this.client=r,this.observers={},this.idCounter=1,this.lastResult=this.currentRawResult(),this.options=i}return(0,i.default)(e,[{key:"currentResult",value:function(){return this.client.getQueryFromState(this.queryId,{hydrated:(0,c.default)(this.options,"hydrated",!0),singleDocData:!0})}},{key:"fetch",value:function(){return this.client.query(this.definition,{as:this.queryId})}},{key:"fetchMore",value:function(){var e=this.currentRawResult();return e.bookmark?this.client.query(this.definition.offsetBookmark(e.bookmark),{as:this.queryId}):this.client.query(this.definition.offset(e.data.length),{as:this.queryId})}},{key:"currentRawResult",value:function(){return(0,s.getRawQueryFromState)(this.getStore().getState(),this.queryId)}},{key:"notifyObservers",value:function(){var e=this;Object.keys(this.observers).forEach(function(t){return e.observers[t]()})}},{key:"subscribeToStore",value:function(){if(this._unsubscribeStore)throw Error("ObservableQuery instance is already subscribed to store.");this._unsubscribeStore=this.getStore().subscribe(this.handleStoreChange)}},{key:"unsubscribeFromStore",value:function(){if(!this._unsubscribeStore)throw Error("ObservableQuery instance is not subscribed to store");this._unsubscribeStore()}},{key:"subscribe",value:function(e){var t=this,n=this.idCounter;return this.idCounter++,this.observers[n]=e,1===Object.keys(this.observers).length&&this.subscribeToStore(),function(){return t.unsubscribe(n)}}},{key:"unsubscribe",value:function(e){if(!this.observers[e])throw Error("Cannot unsubscribe unknown callbackId ".concat(e));delete this.observers[e],0===Object.keys(this.observers).length&&(this.unsubscribeFromStore(),this._unsubscribeStore=null)}},{key:"getStore",value:function(){return this.client.store}}]),e}();function d(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.default=l},63384:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(65105)),o=a(n(19723)),c=a(n(25665)),s=a(n(27952)),u=a(n(12323)),l=a(n(64512)),d=r(n(67294)),f=a(n(45697)),p=a(n(54028)),h=f.default.shape({subscribe:f.default.func.isRequired,dispatch:f.default.func.isRequired,getState:f.default.func.isRequired}),m=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(e,t){var a;if((0,i.default)(this,r),a=n.call(this,e,t),!e.client)throw Error("CozyProvider was not passed a client instance.");return e.store&&e.client.setStore(e.store),a}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{store:this.props.store||this.context.store||this.props.client.store,client:this.props.client}}},{key:"render",value:function(){return d.default.createElement(p.default.Provider,{value:this.getChildContext()},this.props.children)}}]),r}(d.Component);t.default=m,(0,l.default)(m,"propTypes",{store:h,client:f.default.object.isRequired,children:f.default.oneOfType([f.default.element,f.default.arrayOf(f.default.element)]).isRequired}),(0,l.default)(m,"childContextTypes",{store:f.default.object,client:f.default.object.isRequired}),(0,l.default)(m,"contextTypes",{store:f.default.object})},18597:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.computeChildrenArgs=t.getQueryAttributes=t.default=t.fetchQuery=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(8997)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(64512)),d=r(n(80295)),f=n(67294);r(n(18621));var p=r(n(45697));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}r(n(31344));var v={},y=function(e,t){return t.fetch?t.fetch():e.query(t.definition,{as:t.queryId})};t.fetchQuery=y;var b=function(e,t){var n=e.create.bind(e),r=e.save.bind(e),a=e.destroy.bind(e),i=e.getAssociation.bind(e),o="function"==typeof t.query?t.query(e,t):t.query,c=e.makeObservableQuery(o,t),s=c.fetchMore.bind(c),u=t.mutations,l=(0,d.default)(t,["mutations"]),f="function"==typeof u?u(e,c,l):u,p=c.fetch?c.fetch.bind(c):null;return{client:e,observableQuery:c,queryDefinition:o,createDocument:n,saveDocument:r,deleteDocument:a,getAssociation:i,fetchMore:s,fetch:p,mutations:f}};t.getQueryAttributes=b;var g=function(e){var t=e.observableQuery,n=e.fetchMore,r=e.fetch,a=e.createDocument,i=e.saveDocument,o=e.deleteDocument,c=e.getAssociation,s=e.mutations;return[m({fetchMore:n,fetch:r},t.currentResult()),m({createDocument:a,saveDocument:i,deleteDocument:o,getAssociation:c},s)]};t.computeChildrenArgs=g;var x=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(e,t){(0,a.default)(this,r),i=n.call(this,e,t),(0,l.default)((0,o.default)(i),"onQueryChange",function(){i.recomputeChildrenArgs(),i.setState(v)});var i,c=t.client;if(!t.client)throw Error("Query should be used with client in context (use CozyProvider to set context)");return i.client=c,i.observableQuery=null,i.queryUnsubscribe=null,Object.assign((0,o.default)(i),b(c,e)),i.recomputeChildrenArgs(),i}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.queryUnsubscribe=this.observableQuery.subscribe(this.onQueryChange),!1!==this.props.enabled&&this.executeQueryRespectingFetchPolicy()}},{key:"executeQueryRespectingFetchPolicy",value:function(){if(this.props.fetchPolicy){var e=this.client.getQueryFromState(this.props.as);this.props.fetchPolicy&&"function"==typeof this.props.fetchPolicy&&this.props.fetchPolicy(e)&&y(this.client,this.observableQuery)}else y(this.client,this.observableQuery)}},{key:"componentDidUpdate",value:function(e){!1===e.enabled&&!1!==this.props.enabled&&this.executeQueryRespectingFetchPolicy()}},{key:"componentWillUnmount",value:function(){this.queryUnsubscribe&&this.queryUnsubscribe()}},{key:"recomputeChildrenArgs",value:function(){this.childrenArgs=g(this)}},{key:"render",value:function(){return(0,this.props.children)(this.childrenArgs[0],this.childrenArgs[1])}}]),r}(f.Component);t.default=x,x.contextTypes={client:p.default.object,store:p.default.object};var w=p.default.object;x.propTypes={query:p.default.oneOfType([p.default.func,w]).isRequired,enabled:p.default.bool,as:p.default.string,children:p.default.func.isRequired,fetchPolicy:p.default.func},x.defaultProps={enabled:!0}},1153:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=n(67294),c=r(n(26726)),s=n(45330),u=n(14932),l=(0,o.memo)(function(e){var t=e.doctype,n=(0,c.default)();return(0,o.useEffect)(function(){var e,r=n.plugins.realtime;if(!r)throw Error("You must include the realtime plugin to use RealTimeQueries");var o={};"io.cozy.files"===t&&(o.enhanceDocFn=u.ensureFilePath);var c=function(e){(0,s.dispatchCreate)(n,t,e,o)},l=function(e){(0,s.dispatchUpdate)(n,t,e,o)},d=function(e){(0,s.dispatchDelete)(n,t,e,o)};return(e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.subscribe("created",t,c);case 2:return e.next=4,r.subscribe("updated",t,l);case 4:return e.next=6,r.subscribe("deleted",t,d);case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})(),function(){r.unsubscribe("created",t,c),r.unsubscribe("updated",t,l),r.unsubscribe("deleted",t,d)}},[n,t]),null});t.default=l},42189:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(64512)),u=r(n(24350)),l=r(n(66604)),d=r(n(82492)),f=r(n(84238)),p=r(n(71843)),h=n(25367);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){var t=(0,l.default)(e.relationships||{},function(e,t){return v(v({},e),{},{name:t,type:(0,h.resolveClass)(e.doctype,e.type)})});return v(v({},e),{},{relationships:(0,f.default)(t)>0?(0,u.default)(t,"name"):null})},b=function(e,t){if(!e)throw Error(t)},g=function(e,t){var n=(0,p.default)(e,t,function(e){return e.name});b(0===n.length,"Duplicated names in schemas being added: ".concat(n.map(function(e){return e.name}).join(", ")));var r=(0,p.default)(e,t,function(e){return e.doctype});b(0===r.length,"Duplicated doctypes in schemas being added: ".concat(r.map(function(e){return e.name}).join(", ")))},x=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,o.default)(this,n),this.byDoctype={},this.add(e),this.client=t}return(0,c.default)(n,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.default)(e,function(e,t){return v({name:t},y(e))});g(Object.values(t),Object.values(this.byDoctype)),(0,d.default)(this.byDoctype,(0,u.default)(t,function(e){return e.doctype}))}},{key:"getDoctypeSchema",value:function(e){var t=this.byDoctype[e];return t||(t=y({name:e,doctype:e}),this.byDoctype[e]=t),t}},{key:"getRelationship",value:function(e,t){if(!e)throw TypeError("Invalid doctype ".concat(e));var n=this.getDoctypeSchema(e);if(!n)throw Error("Cannot find doctype ".concat(e," in schema"));if(!n.relationships)throw Error("Schema for doctype ".concat(e," has no relationships"));return n.relationships[t]}},{key:"validate",value:(e=(0,i.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},r=this.byDoctype[t._type]){e.next=4;break}return e.abrupt("return",!0);case 4:if(r.attributes){e.next=6;break}return e.abrupt("return",!0);case 6:e.t0=a.default.keys(r.attributes);case 7:if((e.t1=e.t0()).done){e.next=15;break}return i=e.t1.value,e.next=11,this.validateAttribute(t,i,r.attributes[i]);case 11:!0!==(o=e.sent)&&(n[i]=o),e.next=7;break;case 15:if(0!==Object.keys(n).length){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"validateAttribute",value:(t=(0,i.default)(a.default.mark(function e(t,n,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.unique&&this.client)){e.next=6;break}return e.next=3,this.client.collection(t._type).checkUniquenessOf(n,t[n]);case 3:if(!0===e.sent){e.next=6;break}return e.abrupt("return","must be unique");case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})}]),n}();t.default=x},97619:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.transformBulkDocsResponse=void 0;var a=r(n(80295)),i=r(n(68434)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=r(n(25665)),l=r(n(27952)),d=r(n(12323)),f=r(n(64512)),p=r(n(35905)),h=n(71450),m=r(n(37130)),v=n(87941),y=n(29822),b=r(n(22853)),g=n(88930),x=n(12196);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=function(e){var t=e.selector,n=e.partialFilter,r=e.sort,a=e.fields;return!!t||!!n||!!r||!!a},_=function(e,t){var n=(0,p.default)(e,t,function(e,t){return e.ok?k(k({},t),{},{_id:e.id,_rev:e.rev}):t});if(e.find(function(e){return!e.ok}))throw new y.BulkEditError(e,n);return{data:n}};t.transformBulkDocsResponse=_;var E=function(e){(0,u.default)(y,e);var t,n,r,f,p,m=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(y);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.client,r=t.stackClient,a=t.platform,i=t.performanceApi;return(0,c.default)(this,y),e=m.call(this),n&&b.default.warn("Using options.client is deprecated, prefer options.stackClient"),e.stackClient=r||n,e.isOnline=null==a?void 0:a.isOnline,e.performanceApi=i||x.defaultPerformanceApi,e}return(0,s.default)(y,[{key:"registerClient",value:function(e){this.stackClient=e.stackClient||e.client}},{key:"reset",value:(n=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.stackClient=null;case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"request",value:(r=(0,o.default)(i.default.mark(function e(t,n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(null!=n&&n.forceStack)&&this.isOnline,!e.t0){e.next=5;break}return e.next=4,this.isOnline();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",a(t,n));case 7:if(e.prev=7,!t.mutationType){e.next=12;break}return e.next=11,this.executeMutation(t,n,r,a);case 11:case 14:return e.abrupt("return",e.sent);case 12:return e.next=14,this.executeQuery(t);case 17:if(e.prev=17,e.t1=e.catch(7),!(!(null!=n&&n.forceStack)&&(0,g.isReactNativeOfflineError)(e.t1))){e.next=21;break}return e.abrupt("return",a(t,n));case 21:throw e.t1;case 22:case"end":return e.stop()}},e,this,[[7,17]])})),function(e,t,n,a){return r.apply(this,arguments)})},{key:"persistCozyData",value:(f=(0,o.default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(t));case 1:case"end":return e.stop()}},e)})),function(e,t){return f.apply(this,arguments)})},{key:"executeQuery",value:function(e){var t=e.doctype,n=e.selector,r=e.id,i=e.ids,o=e.referenced,c=(0,a.default)(e,["doctype","selector","id","ids","referenced"]);if(!t)throw b.default.warn("Bad query",e),Error("No doctype found in a query definition");var s=this.stackClient.collection(t);return r?s.get(r,e):i?s.getAll(i):o?s.findReferencedBy(o,c):O(e)?s.find(n,c):s.all(c)}},{key:"executeMutation",value:(p=(0,o.default)(i.default.mark(function e(t,n,r,o){var c,s,u,l,d;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=t.mutationType,s=t.document,u=t.documents,l=(0,a.default)(t,["mutationType","document","documents"]),e.t0=c,e.next=e.t0===h.MutationTypes.CREATE_DOCUMENT?4:e.t0===h.MutationTypes.UPDATE_DOCUMENTS?5:e.t0===h.MutationTypes.UPDATE_DOCUMENT?9:e.t0===h.MutationTypes.DELETE_DOCUMENT?10:e.t0===h.MutationTypes.ADD_REFERENCES_TO?11:e.t0===h.MutationTypes.REMOVE_REFERENCES_TO?12:e.t0===h.MutationTypes.ADD_REFERENCED_BY?13:e.t0===h.MutationTypes.REMOVE_REFERENCED_BY?18:e.t0===h.MutationTypes.UPLOAD_FILE?23:24;break;case 4:return e.abrupt("return",this.stackClient.collection(s._type).create(s));case 5:return e.next=7,this.stackClient.collection(u[0]._type).updateAll(u);case 7:return d=e.sent,e.abrupt("return",_(d,u));case 9:return e.abrupt("return",this.stackClient.collection(s._type).update(s));case 10:return e.abrupt("return",this.stackClient.collection(s._type).destroy(s));case 11:return e.abrupt("return",this.stackClient.collection(l.referencedDocuments[0]._type).addReferencesTo(s,l.referencedDocuments));case 12:return e.abrupt("return",this.stackClient.collection(l.referencedDocuments[0]._type).removeReferencesTo(s,l.referencedDocuments));case 13:if(s._type!==v.DOCTYPE_FILES){e.next=17;break}return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).addReferencedBy(s,l.referencedDocuments));case 17:case 22:throw Error("The document type should be io.cozy.files");case 18:if(s._type!==v.DOCTYPE_FILES){e.next=22;break}return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).removeReferencedBy(s,l.referencedDocuments));case 23:return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).upload(l.file,l.dirPath));case 24:return e.abrupt("return",o(t,n,r));case 25:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return p.apply(this,arguments)})}]),y}(m.default);t.default=E},62946:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(25665)),u=r(n(27952)),l=r(n(12323)),d=function(e){(0,s.default)(p,e);var t,n,r,d,f=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.default)(p);return e=t?Reflect.construct(n,arguments,(0,l.default)(this).constructor):n.apply(this,arguments),(0,u.default)(this,e)});function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.webviewIntent;return(0,o.default)(this,p),(e=f.call(this)).webviewIntent=n,e}return(0,c.default)(p,[{key:"registerClient",value:function(e){}},{key:"reset",value:(n=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"request",value:(r=(0,i.default)(a.default.mark(function e(t,n,r,i){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webviewIntent.call("flagshipLinkRequest",t,n));case 1:case"end":return e.stop()}},e,this)})),function(e,t,n,a){return r.apply(this,arguments)})},{key:"persistCozyData",value:(d=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}},e)})),function(e,t){return d.apply(this,arguments)})}]),p}(r(n(37130)).default);t.default=d},28187:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723));n(71450);var o=function(){function e(t,n,r,i){(0,a.default)(this,e);var o=i.dispatch,c=i.get,s=i.query,u=i.mutate,l=i.save;this.target=t,this.name=n,this.doctype=r,this.get=c,this.query=s,this.mutate=u,this.save=l,this.dispatch=o}return(0,i.default)(e,[{key:"raw",get:function(){throw Error("A relationship must define its raw getter")}},{key:"data",get:function(){throw Error("A relationship must define its data getter")}}],[{key:"query",value:function(e,t,n){throw Error("A custom relationship must define its query() function")}}]),e}();t.default=o},13965:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.updateRelationship=t.updateHasManyItem=t.removeHasManyItem=t.setHasManyItem=t.getHasManyItems=t.getHasManyItem=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(8997)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(64512)),d=r(n(98235)),f=r(n(27361)),p=r(n(82492)),h=n(71450),m=n(65972),v=r(n(28187)),y=r(n(22853));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=function(e,t,n){var r=-1===t?e.length:t;return[].concat((0,d.default)(e.slice(0,r)),[n],(0,d.default)(e.slice(r+1)))},w=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){var e;(0,a.default)(this,r);for(var t=arguments.length,i=Array(t),c=0;c<t;c++)i[c]=arguments[c];return e=n.call.apply(n,[this].concat(i)),(0,l.default)((0,o.default)(e),"updateRelationshipData",function(t){return function(n,r){var a=(0,m.getDocumentFromState)(r(),e.target._type,e.target._id);n((0,m.receiveQueryResult)(null,{data:g(g({},a),{},{relationships:g(g({},a.relationships),{},(0,l.default)({},e.name,t(a.relationships[e.name])))})}))}}),e}return(0,i.default)(r,[{key:"fetchMore",value:function(){throw"Not implemented"}},{key:"exists",value:function(e){return this.existsById(e._id)}},{key:"containsById",value:function(e){return void 0!==this.getRelationship().data.find(function(t){return e===t._id})}},{key:"existsById",value:function(e){return!!(this.containsById(e)&&this.get(this.doctype,e))}},{key:"add",value:function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){return e._id});return this.addById(t)}},{key:"remove",value:function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){return e._id});return this.removeById(t)}},{key:"addTargetRelationships",value:function(e){var t,n=this;this.target.relationships||(this.target.relationships={}),this.target.relationships[this.name]||(this.target.relationships[this.name]={data:[]});var r=(Array.isArray(e)?e:[e]).filter(function(e){return!n.existsById(e)}).map(function(e){return{_id:e,_type:n.doctype}});(t=this.target.relationships[this.name].data).push.apply(t,(0,d.default)(r)),this.updateMetaCount()}},{key:"addById",value:function(e){return this.addTargetRelationships(e),this.save(this.target)}},{key:"removeTargetRelationships",value:function(e){var t=Array.isArray(e)?e:[e];this.target.relationships[this.name].data=this.target.relationships[this.name].data.filter(function(e){var n=e._id;return!t.includes(n)}),this.updateMetaCount()}},{key:"removeById",value:function(e){return this.removeTargetRelationships(e),this.save(this.target)}},{key:"updateMetaCount",value:function(){void 0!==(0,f.default)(this.target.relationships[this.name],"meta.count")&&(this.target.relationships[this.name].meta=g(g({},this.target.relationships[this.name].meta),{},{count:this.target.relationships[this.name].data.length}))}},{key:"getRelationship",value:function(){var e=this.target[this.name],t=(0,f.default)(this.target,"relationships.".concat(this.name));return t||(e&&e.length&&y.default.warn("You're trying to access data on a relationship that appear to not be loaded yet. You may want to use 'include()' on your query"),{data:[],next:!0,meta:{count:0}})}},{key:"updateTargetRelationship",value:function(e,t){var n=e.readDocument(this.target._type,this.target._id);e.writeDocument(this.updateRelationship(n,t))}},{key:"updateRelationship",value:function(e,t){return r.updateRelationship(e,this.name,t)}},{key:"dehydrate",value:function(e){return g(g({},e),{},{relationships:g(g({},e.relationships),{},(0,l.default)({},this.name,{data:this.raw}))})}},{key:"raw",get:function(){return this.getRelationship().data}},{key:"data",get:function(){var e=this;return this.getRelationship().data.map(function(t){var n=t._id,r=t._type;return e.get(r,n)}).filter(Boolean)}},{key:"hasMore",get:function(){return this.getRelationship().next}},{key:"count",get:function(){var e=this.getRelationship();return e.meta?e.meta.count:e.data.length}}],[{key:"query",value:function(e,t,n){var r=(0,f.default)(e,"relationships.".concat(n.name,".data"),[]).map(function(e){return e._id});return new h.QueryDefinition({doctype:n.doctype,ids:r})}}]),r}(v.default),k=w.getHasManyItem=function(e,t,n){return(0,f.default)(e,"relationships.".concat(t,".data"),[]).find(function(e){return e._id==n})};t.getHasManyItem=k;var O=w.getHasManyItems=function(e,t){return(0,f.default)(e,"relationships.".concat(t,".data"),[])};t.getHasManyItems=O;var _=w.setHasManyItem=function(e,t,n,r){var a=w.getHasManyItems(e,t),i=a.findIndex(function(e){return e._id===n}),o=(0,p.default)({},a[i],r),c=x(a,i,o);return w.updateRelationship(e,t,function(e){return(0,p.default)({},e,{data:c})})};t.setHasManyItem=_;var E=w.removeHasManyItem=function(e,t,n){var r=w.getHasManyItems(e,t).filter(function(e){return e._id!==n});return w.updateRelationship(e,t,function(){return{data:r}})};t.removeHasManyItem=E;var S=w.updateHasManyItem=function(e,t,n,r){var a=r(w.getHasManyItem(e,t,n));return w.setHasManyItem(e,t,n,a)};t.updateHasManyItem=S;var C=w.updateRelationship=function(e,t,n){return g(g({},e),{},{relationships:g(g({},e.relationships),{},(0,l.default)({},t,g(g({},e.relationships?e.relationships[t]:{}),n(e.relationships?e.relationships[t]:{}))))})};t.updateRelationship=C,t.default=w},32349:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getFileDatetime=void 0;var a=r(n(68434)),i=r(n(98235)),o=r(n(64512)),c=r(n(82007)),s=r(n(65105)),u=r(n(19723)),l=r(n(59655)),d=r(n(25665)),f=r(n(27952)),p=r(n(12323)),h=r(n(90402)),m=r(n(27361)),v=r(n(57557)),y=r(n(44908)),b=n(71450),g=n(65972),x=n(87941);r(n(28187));var w=r(n(13965));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _=function(e,t){var n=(0,h.default)(e,3),r=n[0],a=n[1],i=n[2];return[i?[r,a,i]:[r,a],t]},E=function(e){var t;return(null===(t=e.metadata)||void 0===t?void 0:t.datetime)||e.created_at};t.getFileDatetime=E;var S=function(e){(0,d.default)(w,e);var t,n,r,o,h=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,p.default)(w);return e=t?Reflect.construct(n,arguments,(0,p.default)(this).constructor):n.apply(this,arguments),(0,f.default)(this,e)});function w(){return(0,s.default)(this,w),h.apply(this,arguments)}return(0,u.default)(w,[{key:"fetchMore",value:(n=(0,c.default)(a.default.mark(function e(){var t,n,r,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.QueryDefinition({doctype:x.DOCTYPE_FILES}),r=(n=this.getRelationship().data)[n.length-1],e.next=5,this.dispatch(function(){var e=(0,c.default)(a.default.mark(function e(c,s){var u,l,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=E((0,g.getDocumentFromState)(s(),r._type,r._id)),l=_([o.target._type,o.target._id,u],n[n.length-1]._id),e.next=5,o.query(t.referencedBy(o.target).offsetCursor(l));case 5:return(d=e.sent).data.shift(),e.next=9,o.dispatch(o.updateRelationshipData(function(e){return O(O({},e),{},{data:[].concat((0,i.default)(e.data),(0,i.default)(d.data)),next:d.next})}));case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"addById",value:(r=(0,c.default)(a.default.mark(function e(t){var n,r,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t:[t],this.addTargetRelationships(n),r=n.map(function(e){return{_id:e,_type:i.doctype}}),e.next=5,this.mutate(this.addReferences(r));case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"removeById",value:(o=(0,c.default)(a.default.mark(function e(t){var n,r,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t:[t],this.removeTargetRelationships(t),r=n.map(function(e){return{_id:e,_type:i.doctype}}),e.next=5,this.mutate(this.removeReferences(r));case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"addReferences",value:function(e){if(this.target._type===x.DOCTYPE_FILES)return b.Mutations.addReferencedBy(this.target,e);if(e[0]._type===x.DOCTYPE_FILES)return b.Mutations.addReferencesTo(this.target,e);throw Error("Either the document or the references should be io.cozy.files")}},{key:"removeReferences",value:function(e){if(this.target._type===x.DOCTYPE_FILES)return b.Mutations.removeReferencedBy(this.target,e);if(e[0]._type===x.DOCTYPE_FILES)return b.Mutations.removeReferencesTo(this.target,e);throw Error("Either the document or the references should be io.cozy.files")}},{key:"dehydrate",value:function(e){return(0,v.default)(e,[this.name,"relationships.".concat(this.name)])}},{key:"data",get:function(){var e=this;return this.target._type===x.DOCTYPE_FILES?(0,m.default)(this.target,"referenced_by",[]).map(function(t){var n=t.id,r=t.type;return e.get(r,n)}).filter(Boolean):(0,l.default)((0,p.default)(w.prototype),"data",this)}}],[{key:"query",value:function(e,t,n){if(e._type===x.DOCTYPE_FILES){var r=(0,m.default)(e,"relationships.referenced_by.data",[]),a=(0,y.default)(r.filter(function(e){return e.type===n.doctype}).map(function(e){return e.id}));return a.length>0?(0,b.Q)(n.doctype).getByIds(a):null}var i=_([e._type,e._id],"");return(0,b.Q)(n.doctype).referencedBy(e).offsetCursor(i)}}]),w}(w.default);t.default=S},23433:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=n(71450);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){return(0,i.default)(this,r),n.apply(this,arguments)}return(0,o.default)(r,[{key:"addById",value:function(e){this.getRelationship().push(e)}},{key:"removeById",value:function(e){var t=this.getRelationship(),n=t.indexOf(e);-1!==n&&t.splice(n,1)}},{key:"existsById",value:function(e){return -1!==this.getRelationship().indexOf(e)}},{key:"getRelationship",value:function(){return this.target[this.name]=this.target[this.name]||[],this.target[this.name]}},{key:"dehydrate",value:function(e){return f(f({},e),{},(0,a.default)({},this.name,this.raw||[]))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){var e=this,t=this.doctype;return(this.raw||[]).map(function(n){return e.get(t,n)})}}],[{key:"query",value:function(e,t,n){var r=e[n.name];return r&&r>0?(0,l.Q)(n.doctype).getByIds(r):null}}]),r}(r(n(28187)).default);t.default=p},1715:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(59655)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(13965)),d=n(71450),f=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){return(0,a.default)(this,r),n.apply(this,arguments)}return(0,i.default)(r,[{key:"data",get:function(){var e=this;return(0,o.default)((0,u.default)(r.prototype),"data",this).filter(function(t){return t.slug===e.target.slug})}}],[{key:"query",value:function(e,t){return(0,d.Q)("io.cozy.triggers").where({worker:"konnector"})}}]),r}(l.default);t.default=f},95760:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(27361)),d=r(n(36968)),f=n(71450),p=r(n(28187)),h=r(n(22853));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){return(0,i.default)(this,r),n.apply(this,arguments)}return(0,o.default)(r,[{key:"add",value:function(e){return this.setRelationship(e),this.save(this.target)}},{key:"remove",value:function(){return this.setRelationship(void 0),this.save(this.target)}},{key:"setRelationship",value:function(e){if(e&&e._type!==this.doctype)throw Error("Tried to associate a ".concat(e._type," document to a HasOne relationship on ").concat(this.doctype," document"));var t="relationships[".concat(this.name,"].data");e?(0,d.default)(this.target,t,{_id:e._id,_type:e._type}):(0,d.default)(this.target,t,void 0)}},{key:"set",value:function(e){h.default.warn("set is deprecated for has-one relationships. Use `add` instead."),this.setRelationship(e)}},{key:"unset",value:function(){h.default.warn("unset is deprecated for has-one relationships. Use `remove` instead."),this.setRelationship(void 0)}},{key:"dehydrate",value:function(e){return this.raw?v(v({},e),{},{relationships:v(v({},e.relationships),{},(0,a.default)({},this.name,{data:this.raw}))}):e}},{key:"raw",get:function(){return(0,l.default)(this.target,"relationships[".concat(this.name,"].data"),null)}},{key:"data",get:function(){return this.raw?this.get(this.doctype,this.raw._id):null}}],[{key:"query",value:function(e,t,n){var r=(0,l.default)(e,"relationships.".concat(n.name,".data"),{});return r&&r._id?(0,f.Q)(n.doctype).getById(r._id):null}}]),r}(p.default);t.default=y},13846:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.BelongsToInPlace=t.default=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(28187)),d=n(71450);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){return(0,i.default)(this,r),n.apply(this,arguments)}return(0,o.default)(r,[{key:"dehydrate",value:function(e){return p(p({},e),{},(0,a.default)({},this.name,this.raw||void 0))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){return this.get(this.doctype,this.raw)}}],[{key:"query",value:function(e,t,n){var r=e[n.name];return t.getDocumentFromState(n.doctype,r)||(0,d.Q)(n.doctype).getById(r)}}]),r}(l.default);t.default=h,t.BelongsToInPlace=h},11282:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getReferencedById=t.getReferencedBy=t.isReferencedById=t.isReferencedBy=t.create=t.resolveClass=t.attachRelationships=t.responseToRelationship=t.pickTypeAndId=void 0;var a=r(n(64512)),i=r(n(78718)),o=r(n(35937)),c=r(n(28187)),s=r(n(95760)),u=r(n(13846)),l=r(n(13965)),d=r(n(23433)),f=r(n(32349));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e){return(0,i.default)(e,"_type","_id")};t.pickTypeAndId=m,t.responseToRelationship=function(e){var t;return(0,o.default)({data:Array.isArray(t=e.data)?t.map(m):m(t),meta:e.meta,next:e.next,skip:e.skip,bookmark:e.bookmark})};var v=function(e,t){return h(h({},e),{},{relationships:h(h({},e.relationships),t)})};t.attachRelationships=function(e,t){if(Array.isArray(e.data))return h(h({},e),{},{data:e.data.map(function(e){return v(e,t[e._id])})});var n=e.data;return h(h({},e),{},{data:v(n,t[n._id])})};var y={"io.cozy.files:has-many":f.default,"has-many":l.default,"belongs-to-in-place":u.default,"has-one":s.default,"has-one-in-place":u.default,"has-many-in-place":d.default};t.resolveClass=function(e,t){if(void 0===t)throw Error("Undefined type for "+e);if("string"!=typeof t)return t;var n=y["".concat(e,":").concat(t)]||y[t];if(n)return n;throw Error("Unknown association '".concat(t,"'"))},t.create=function(e,t,n){var r=t.name,a=t.type,i=t.doctype;if(e[r]instanceof c.default)throw Error("Association ".concat(r," already exists"));return new a(e,r,i,n)},t.isReferencedBy=function(e,t){var n,r;return((null==e?void 0:null===(n=e.relationships)||void 0===n?void 0:null===(r=n.referenced_by)||void 0===r?void 0:r.data)||(null==e?void 0:e.referenced_by)||[]).some(function(e){return e.type===t})},t.isReferencedById=function(e,t,n){var r,a;return((null==e?void 0:null===(r=e.relationships)||void 0===r?void 0:null===(a=r.referenced_by)||void 0===a?void 0:a.data)||(null==e?void 0:e.referenced_by)||[]).some(function(e){return e.type===t&&e.id===n})},t.getReferencedBy=function(e,t){var n,r;return((null==e?void 0:null===(n=e.relationships)||void 0===n?void 0:null===(r=n.referenced_by)||void 0===r?void 0:r.data)||(null==e?void 0:e.referenced_by)||[]).filter(function(e){return e.type===t})},t.getReferencedById=function(e,t,n){var r,a;return((null==e?void 0:null===(r=e.relationships)||void 0===r?void 0:null===(a=r.referenced_by)||void 0===a?void 0:a.data)||(null==e?void 0:e.referenced_by)||[]).filter(function(e){return e.type===t&&e.id===n})}},25367:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"HasManyFiles",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"resolveClass",{enumerable:!0,get:function(){return d.resolveClass}}),Object.defineProperty(t,"create",{enumerable:!0,get:function(){return d.create}}),Object.defineProperty(t,"isReferencedBy",{enumerable:!0,get:function(){return d.isReferencedBy}}),Object.defineProperty(t,"isReferencedById",{enumerable:!0,get:function(){return d.isReferencedById}}),Object.defineProperty(t,"getReferencedBy",{enumerable:!0,get:function(){return d.getReferencedBy}}),Object.defineProperty(t,"getReferencedById",{enumerable:!0,get:function(){return d.getReferencedById}});var a=r(n(32349)),i=r(n(13965)),o=r(n(95760)),c=r(n(13846)),s=r(n(23433)),u=r(n(1715)),l=r(n(28187)),d=n(11282)},18118:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authFunction=void 0,t.authFunction=function(){throw"Not implemented"}},87941:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOCTYPE_FILES_ENCRYPTION=t.DOCTYPE_PERMISSIONS=t.DOCTYPE_FILES=t.REGISTRATION_ABORT=void 0,t.REGISTRATION_ABORT="REGISTRATION_ABORT",t.DOCTYPE_FILES="io.cozy.files",t.DOCTYPE_PERMISSIONS="io.cozy.permissions",t.DOCTYPE_FILES_ENCRYPTION="io.cozy.files.encryption"},20538:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_TYPE=void 0,t.APP_TYPE={KONNECTOR:"konnector",WEBAPP:"webapp"}},54028:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.clientContext=void 0;var a=n(67294);r(n(18621));var i=(0,a.createContext)({client:null,store:null});t.clientContext=i,t.default=i},29822:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.BulkEditError=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(15500)),d=r(n(35905));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(e,t){var a;return(0,i.default)(this,r),(a=n.call(this,"Error while bulk saving")).name="BulkEditError",a.results=(0,d.default)(e,t,function(e,t){return p(p({},e),{},{doc:t})}),a}return(0,o.default)(r,[{key:"getUpdatedDocuments",value:function(){return this.results.filter(function(e){return e.ok}).map(function(e){return e.doc})}},{key:"getErrors",value:function(){return this.results.filter(function(e){return!e.ok})}}]),r}((0,l.default)(Error));t.BulkEditError=h},23864:function(e,t,n){"use strict";var r,a,i,o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.certifyFlagship=void 0;var c=o(n(68434)),s=o(n(82007));o(n(18621));var u=n(79166),l=(r=(0,s.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.getStackClient(),e.next=4,n.fetchJSON("POST","/auth/clients/".concat(n.oauthOptions.clientID,"/challenge"),null,{headers:{Authorization:n.registrationAccessTokenToAuthHeader()}});case 4:return r=e.sent,e.abrupt("return",r.nonce);case 8:throw e.prev=8,e.t0=e.catch(0),Error("[FLAGSHIP_CERTIFICATION] Something went wrong while requesting a challenge from CozyStack:\n"+e.t0.message);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)}),d=(a=(0,s.default)(c.default.mark(function e(t,n,r){var a,i,o,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.platform,i=t.attestation,o=t.keyId,s=t.issuer,u=r.getStackClient(),e.next=5,u.fetchJSON("POST","/auth/clients/".concat(u.oauthOptions.clientID,"/attestation"),{platform:a,attestation:i,challenge:n,keyId:o,issuer:s},{headers:{Authorization:u.registrationAccessTokenToAuthHeader()}});case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),Error("[FLAGSHIP_CERTIFICATION] Something went wrong while giving attestation to CozyStack:\n"+e.t0.message);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return a.apply(this,arguments)}),f=(i=(0,s.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("[FLAGSHIP_CERTIFICATION] Certification configuration is not set");case 2:return e.prev=2,e.next=5,l(n);case 5:return r=e.sent,e.next=8,(0,u.getAppAttestationFromStore)(r,t);case 8:return a=e.sent,e.next=11,d(a,r,n);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn('[FLAGSHIP_CERTIFICATION] Automatic certification for URI "'.concat(n.stackClient.uri,'" failed. This is expected on dev environments and non-official phones. Cozy-stack will continue with manual certification through 2FA')),console.warn(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[2,13]])})),function(e,t){return i.apply(this,arguments)});t.certifyFlagship=f},79166:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getAppAttestationFromStore=void 0;var i=a(n(68434)),o=(r=(0,a(n(82007)).default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("getAppAttestationFromStore can only be called from a React Native container");case 1:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.getAppAttestationFromStore=o},78133:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.dehydrate=void 0;var a=r(n(90402)),i=n(25367);t.dehydrate=function(e){return Object.entries(e).reduce(function(e,t){var n=(0,a.default)(t,2),r=n[0],o=n[1],c=e;if(o instanceof i.Association){if(o.dehydrate)c=o.dehydrate(c);else throw Error("Association on key ".concat(r," should have a dehydrate method"))}else c[r]=o;return c},{})}},72004:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"deconstructCozyWebLinkWithSlug",{enumerable:!0,get:function(){return r.deconstructCozyWebLinkWithSlug}}),Object.defineProperty(t,"deconstructRedirectLink",{enumerable:!0,get:function(){return r.deconstructRedirectLink}}),Object.defineProperty(t,"generateWebLink",{enumerable:!0,get:function(){return r.generateWebLink}}),Object.defineProperty(t,"ensureFirstSlash",{enumerable:!0,get:function(){return r.ensureFirstSlash}}),Object.defineProperty(t,"rootCozyUrl",{enumerable:!0,get:function(){return r.rootCozyUrl}}),Object.defineProperty(t,"InvalidRedirectLinkError",{enumerable:!0,get:function(){return r.InvalidRedirectLinkError}}),Object.defineProperty(t,"InvalidCozyUrlError",{enumerable:!0,get:function(){return r.InvalidCozyUrlError}}),Object.defineProperty(t,"InvalidProtocolError",{enumerable:!0,get:function(){return r.InvalidProtocolError}}),Object.defineProperty(t,"BlockedCozyError",{enumerable:!0,get:function(){return r.BlockedCozyError}}),Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return a.dehydrate}}),Object.defineProperty(t,"editSettings",{enumerable:!0,get:function(){return i.editSettings}}),Object.defineProperty(t,"getQuery",{enumerable:!0,get:function(){return i.getQuery}}),Object.defineProperty(t,"getSettings",{enumerable:!0,get:function(){return i.getSettings}}),Object.defineProperty(t,"normalizeSettings",{enumerable:!0,get:function(){return i.normalizeSettings}}),Object.defineProperty(t,"saveAfterFetchSettings",{enumerable:!0,get:function(){return i.saveAfterFetchSettings}});var r=n(77304),a=n(78133),i=n(56200)},14932:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.ensureFilePath=void 0;var i=a(n(68434)),o=a(n(64512)),c=a(n(82007)),s=n(71450),u=a(n(18621));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var d=function(e){return{definition:function(){return(0,s.Q)("io.cozy.files").getById(e)},options:{as:"io.cozy.files/".concat(e),singleDocData:!0,fetchPolicy:u.default.fetchPolicies.olderThan(3e4)}}},f=(r=(0,c.default)(i.default.mark(function e(t){var n,r,a,c,s=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:{},!t.path){e.next=3;break}return e.abrupt("return",t);case 3:return r=d(t.dir_id),e.next=6,n.client.fetchQueryAndGetFromState({definition:r.definition(),options:r.options});case 6:if(!(!(a=e.sent).data||!a.data.path)){e.next=9;break}throw Error("Could not define a file path for ".concat(t._id||t.id));case 9:return c=a.data.path+"/"+t.name,e.abrupt("return",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({path:c},t));case 11:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.ensureFilePath=f},56200:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getQuery=t.extractKeys=t.editSettings=t.normalizeSettings=t.saveAfterFetchSettings=t.getSettings=void 0;var o=i(n(90402)),c=i(n(64512)),s=i(n(68434)),u=i(n(82007));i(n(18621));var l=i(n(39268)),d=n(71450);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=l.default.olderThan(36e5),v=(r=(0,u.default)(s.default.mark(function e(t,n,r){var a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=O(n),e.next=3,t.fetchQueryAndGetFromState({definition:a.definition,options:a.options});case 3:return i=b(e.sent.data),e.abrupt("return",k(i,r));case 6:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.getSettings=v;var y=(a=(0,u.default)(s.default.mark(function e(t,n,r,a){var i,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=O(n),e.next=3,t.fetchQueryAndGetFromState({definition:i.definition,options:i.options});case 3:return o=b(e.sent.data),c=void 0,c="function"==typeof r?r(k(o,a)):h(h({},k(o,Object.keys(r))),r),u=g(n,o,c),e.next=10,t.save(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)})),function(e,t,n,r){return a.apply(this,arguments)});t.saveAfterFetchSettings=y;var b=function(e){return(Array.isArray(e)?e[0]:e)||{}};t.normalizeSettings=b;var g=function(e,t,n){var r=S(e);return"instance"===e?x(t,n):w(t,r,n)};t.editSettings=g;var x=function(e,t){for(var n=h(h({_id:e._id,_type:e._type,_rev:e.meta.rev},e),{},{attributes:h({},e.attributes)}),r=0,a=Object.entries(t);r<a.length;r++){var i=(0,o.default)(a[r],2),c=i[0],s=i[1];n[c]=s,n.attributes[c]=s}return n},w=function(e,t,n){for(var r=h({_type:t},e),a=0,i=Object.entries(n);a<i.length;a++){var c=(0,o.default)(i[a],2),s=c[0],u=c[1];r[s]=u}return r},k=function(e,t){var n,r={},a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;r[i]=e[i]}}catch(e){a.e(e)}finally{a.f()}return r};t.extractKeys=k;var O=function(e){return"instance"===e?E(e):"passwords"===e?E("bitwarden"):_(e)};t.getQuery=O;var _=function(e){var t=S(e);return{definition:(0,d.Q)(t).limitBy(1),options:{as:t,fetchPolicy:m,singleDocData:!0}}},E=function(e){var t="io.cozy.settings",n=S(e);return{definition:(0,d.Q)(t).getById(n),options:{as:"".concat(t,"/").concat(n),fetchPolicy:m,singleDocData:!0}}},S=function(e){return["instance","bitwarden"].includes(e)?"io.cozy.settings.".concat(e):"passwords"===e?"io.cozy.settings.bitwarden":"io.cozy.".concat(e,".settings")}},77304:function(e,t,n){"use strict";var r,a,i,o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.rootCozyUrl=t.InvalidCozyUrlError=t.BlockedCozyError=t.InvalidProtocolError=t.InvalidRedirectLinkError=t.deconstructRedirectLink=t.deconstructCozyWebLinkWithSlug=t.generateWebLink=t.ensureFirstSlash=void 0;var c=o(n(98235)),s=o(n(54765)),u=o(n(68434)),l=o(n(82007)),d=o(n(65105)),f=o(n(25665)),p=o(n(27952)),h=o(n(12323)),m=o(n(15500)),v=o(n(90402));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);return n=t?Reflect.construct(r,arguments,(0,h.default)(this).constructor):r.apply(this,arguments),(0,p.default)(this,n)}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){return e?e.startsWith("/")?e:"/"+e:"/"};t.ensureFirstSlash=g,t.generateWebLink=function(e){var t=e.cozyUrl,n=e.searchParams,r=e.pathname,a=e.hash,i=e.slug,o=e.subDomainType,c=new URL(t);c.host="nested"===o?"".concat(i,".").concat(c.host):c.host.split(".").map(function(e,t){return 0===t?e+"-"+i:e}).join("."),c.pathname=g(r),c.hash=g(a);var s,u=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(n||[]);try{for(u.s();!(s=u.n()).done;){var l=(0,v.default)(s.value,2),d=l[0],f=l[1];c.searchParams.set(d,f)}}catch(e){u.e(e)}finally{u.f()}return c.toString()},t.deconstructCozyWebLinkWithSlug=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flat",n=new URL(e),r="nested"===t?n.host.split(".")[0]:n.host.split(".")[0].split("-")[1],a="nested"===t?n.host.split(".")[1]:n.host.split(".")[0].split("-")[0];return{cozyBaseDomain:n.host.split(".").slice("nested"===t?2:1).join("."),cozyName:a,pathname:n.pathname,hash:n.hash,protocol:n.protocol,searchParams:n.searchParams.toString(),slug:r}},t.deconstructRedirectLink=function(e){var t=e.split("#"),n=(0,v.default)(t,2),r=n[0],a=n[1],i=r.split(/\/(.*)/),o=(0,v.default)(i,2),c=o[0],s=o[1];if(!c.match(/^[a-z0-9]+$/))throw new x(e);return{slug:c,pathname:s,hash:a}};var x=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Invalid redirect link ".concat(e))).redirectLink=e,r}return n}((0,m.default)(Error));t.InvalidRedirectLinkError=x;var w=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Invalid URL protocol ".concat(e.protocol))).url=e,r}return n}((0,m.default)(Error));t.InvalidProtocolError=w;var k=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Blocked cozy ".concat(e.toString()))).url=e,r}return n}((0,m.default)(Error));t.BlockedCozyError=k;var O=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"URL ".concat(e.toString()," does not seem to be a valid Cozy URL"))).url=e,r}return n}((0,m.default)(Error));t.InvalidCozyUrlError=O;var _=function(e){var t=e.protocol,n=e.hostname,r=e.port;return(""!==t?"".concat(t,"//"):"https://")+n+(""!==r?":".concat(r):"")},E=(r=(0,l.default)(u.default.mark(function e(t){var n,r,a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_(t)+"/.well-known/change-password");case 2:if(r=(n=e.sent).status,a=n.url,404!==r){e.next=6;break}throw new O(t);case 6:return e.next=8,C(n);case 8:if(!e.sent){e.next=10;break}throw new k(t);case 10:return i=t.origin!==new URL(a).origin,e.abrupt("return",200===r&&!i);case 12:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),S=(a=(0,l.default)(u.default.mark(function e(t){var n,r,a,i,o,l,d,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(["http:","https:"].includes(t.protocol)){e.next=2;break}throw new w(t);case 2:return e.next=4,E(t);case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",new URL(_({protocol:t.protocol,hostname:t.hostname,port:t.port})));case 6:if(!/^[^.-][^.]+-[^.-]+\./.test(t.hostname)){e.next=14;break}return n=t.hostname.split("."),a=(r=(0,s.default)(n))[0],i=r.slice(1),o=[a.replace(/-.+/,"")].concat((0,c.default)(i)).join("."),l=new URL(_({protocol:t.protocol,hostname:o,port:t.port})),e.next=12,E(l);case 12:if(!e.sent){e.next=14;break}return e.abrupt("return",l);case 14:return d=t.hostname.split(".").splice(1).join("."),f=new URL(_({protocol:t.protocol,hostname:d,port:t.port})),e.next=18,E(f);case 18:if(!e.sent){e.next=20;break}return e.abrupt("return",f);case 20:throw new O(t);case 21:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.rootCozyUrl=S;var C=(i=(0,l.default)(u.default.mark(function e(t){var n,r,a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(503===t.status){e.next=2;break}return e.abrupt("return",!1);case 2:return a=(r=t.headers.get("content-type"))&&r.indexOf("json")>=0,e.next=6,a?t.json():t.text();case 6:if(!(null!=(i=e.sent)&&null!==(n=i.some)&&void 0!==n&&n.call(i,function(e){return"Blocked"===e.title}))){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},378:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.queryConnectFlat=t.queryConnect=t.withClient=void 0;var i=a(n(64512)),o=a(n(95297)),c=r(n(67294)),s=a(n(45697)),u=a(n(47745)),l=a(n(18597)),d=a(n(26726)),f=n(72403),p=a(n(22853));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.withClient=function(e){var t=function(t){var n=(0,d.default)();return c.default.createElement(e,(0,o.default)({},t,{client:n}))};return t.displayName="withClient(".concat(e.displayName||e.name,")"),t};var v=function(e,t,n){if(!t)throw Error("withQuery has no options for ".concat(e," (wrapping ").concat(n.name,")"));return function(n){var r=function(r,a){if(!a.client)throw Error("Should be used with client in context (use CozyProvider to set context)");var o="function"==typeof t?t(r):t;return t.doc?(p.default.warn("queryOpts.doc is deprecated"),c.default.createElement(n,m((0,i.default)({},e,o.doc),r))):c.default.createElement(l.default,o,function(t){return c.default.createElement(n,m((0,i.default)({},e,t),r))})};return r.contextTypes={client:s.default.object},r.displayName="withQuery(".concat(n.displayName||n.name,")"),r}};t.queryConnect=function(e){return function(t){var n=Object.keys(e).map(function(n){return v(n,e[n],t)});return u.default.apply(null,n)(t)}},t.queryConnectFlat=function(e){return function(t){var n=function(n){var r=(0,f.useQueries)(e);return c.default.createElement(t,(0,o.default)({},n,r))};return n.displayName="queryConnectFlat(".concat(t.displayName||t.name,")"),n}}},54277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(67294);t.default=function(){var e=(0,r.useRef)();return(0,r.useEffect)(function(){return e.current=!0,function(){e.current=!1}},[]),e}},29568:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(90402)),i=n(67294),o=r(n(54277));t.default=function(e){var t=(0,o.default)(),n=(0,i.useState)(e),r=(0,a.default)(n,2),c=r[0],s=r[1];return[c,(0,i.useCallback)(function(e){t.current&&s(e)},[])]}},63786:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useAppLinkWithStoreFallback",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"useCapabilities",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"useFetchShortcut",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"useClient",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"useQuery",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"useQueries",{enumerable:!0,get:function(){return u.useQueries}}),Object.defineProperty(t,"useAppsInMaintenance",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"useQueryAll",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"useMutation",{enumerable:!0,get:function(){return f.useMutation}}),Object.defineProperty(t,"useInstanceInfo",{enumerable:!0,get:function(){return p.useInstanceInfo}}),Object.defineProperty(t,"useSettings",{enumerable:!0,get:function(){return h.useSettings}});var i=a(n(25199)),o=a(n(56733)),c=a(n(90797)),s=a(n(26726)),u=r(n(72403)),l=a(n(82475)),d=a(n(71747)),f=n(34607),p=n(22380),h=n(74108)},25199:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=n(71450),u=n(23963);t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,c.useState)("loading"),l=(0,o.default)(r,2),d=l[0],f=l[1],p=(0,c.useState)(!0),h=(0,o.default)(p,2),m=h[0],v=h[1],y=(0,c.useState)(null),b=(0,o.default)(y,2),g=b[0],x=b[1];return(0,c.useEffect)(function(){var r;(r=(0,i.default)(a.default.mark(function r(){var i,o,c;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.query((0,s.Q)("io.cozy.apps"));case 3:i=r.sent,o={slug:e},v(!!(c=(0,u.isInstalled)(i.data,o))),c?x((0,u.getUrl)(c)+n):x((0,u.getStoreURL)(i.data,o)),f("loaded"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),f("errored");case 14:case"end":return r.stop()}},r,null,[[0,11]])})),function(){return r.apply(this,arguments)})()},[t,e,n]),{fetchStatus:d,isInstalled:m,url:g}}},82475:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(72403)),i=n(71450),o=r(n(18621));t.default=function(){return(0,a.default)((0,i.Q)("io.cozy.apps_registry").getById("maintenance"),{as:"io.cozy.apps_registry/maintenance",fetchPolicy:o.default.fetchPolicies.olderThan(6e5),singleDocData:!1}).data||[]}},56733:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=r(n(27361)),u=n(71450);t.default=function(e){var t=(0,c.useState)(),n=(0,o.default)(t,2),r=n[0],l=n[1],d=(0,c.useState)("idle"),f=(0,o.default)(d,2),p=f[0],h=f[1];return(0,c.useEffect)(function(){var t,n=(t=(0,i.default)(a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h("loading"),t.prev=1,t.next=4,e.query((0,u.Q)("io.cozy.settings").getById("io.cozy.settings.capabilities"));case 4:n=t.sent,l((0,s.default)(n,"data",{})),h("loaded"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),h("failed");case 12:case"end":return t.stop()}},t,null,[[1,9]])})),function(){return t.apply(this,arguments)});e.capabilities?(l(e.capabilities),h("loaded")):n()},[e]),{capabilities:r,fetchStatus:p}}},26726:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(67294),i=r(n(54028));r(n(18621)),t.default=function(){return(0,a.useContext)(i.default).client}},90797:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=n(71450),u=r(n(18621));t.default=function(e,t){var n=(0,c.useState)(null),r=(0,o.default)(n,2),l=r[0],d=r[1],f=(0,c.useState)(null),p=(0,o.default)(f,2),h=p[0],m=p[1],v=(0,c.useState)("idle"),y=(0,o.default)(v,2),b=y[0],g=y[1];return(0,c.useEffect)(function(){var n;(n=(0,i.default)(a.default.mark(function n(){var r,i,o,c,l,f;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return g("loading"),n.prev=1,n.next=4,e.fetchQueryAndGetFromState({definition:(0,s.Q)("io.cozy.files.shortcuts").getById(t),options:{as:"io.cozy.files.shortcuts/".concat(t),fetchPolicy:u.default.fetchPolicies.olderThan(6e5),singleDocData:!0}});case 4:if(!(l=null==(c=n.sent)?void 0:null===(r=c.data)||void 0===r?void 0:null===(i=r.metadata)||void 0===i?void 0:null===(o=i.target)||void 0===o?void 0:o.app)){n.next=13;break}return n.next=9,e.getStackClient().getIconURL({type:"app",slug:l,priority:"stack"});case 9:m(n.sent),n.next=16;break;case 13:f=new URL(c.data.url),m("".concat(e.getStackClient().uri,"/bitwarden/icons/").concat(f.host,"/icon.png"));case 16:d({data:c.data}),g("loaded"),n.next=23;break;case 20:n.prev=20,n.t0=n.catch(1),g("failed");case 23:case"end":return n.stop()}},n,null,[[1,20]])})),function(){return n.apply(this,arguments)})()},[e,t]),{shortcutInfos:l,shortcutImg:h,fetchStatus:b}}},22380:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useInstanceInfo=void 0;var a=r(n(72403)),i=r(n(18621)),o=n(71450),c=n(88930);t.useInstanceInfo=function(){var e=s("io.cozy.settings.instance"),t=(0,a.default)(e.definition,e.options),n=s("io.cozy.settings.context"),r=(0,a.default)(n.definition,n.options),i=s("io.cozy.settings.disk-usage"),o=(0,a.default)(i.definition,i.options);return{isLoaded:null!==(0,c.hasQueryBeenLoaded)(t)&&null!==(0,c.hasQueryBeenLoaded)(r)&&null!==(0,c.hasQueryBeenLoaded)(o),instance:{data:t.data},context:{data:r.data},diskUsage:{data:o.data}}};var s=function(e){return{definition:(0,o.Q)("io.cozy.settings").getById(e),options:{as:"io.cozy.settings/".concat(e),fetchPolicy:i.default.fetchPolicies.olderThan(54e4),singleDocData:!0}}}},34607:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useMutation=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=r(n(45697)),u=r(n(26726)),l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onSuccess,r=void 0===n?void 0:n,s=t.onError,l=void 0===s?void 0:s,d=(0,u.default)(),f=(0,c.useState)("pending"),p=(0,o.default)(f,2),h=p[0],m=p[1],v=(0,c.useState)(),y=(0,o.default)(v,2),b=y[0],g=y[1],x=(0,c.useState)(),w=(0,o.default)(x,2),k=w[0],O=w[1];return{mutate:(0,c.useCallback)((e=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g(void 0),m("loading"),e.prev=2,e.next=5,d.save(t);case 5:if(O((n=e.sent).data),"function"!=typeof r){e.next=10;break}return e.next=10,r(n.data);case 10:m("loaded"),e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(2),m("failed"),g(e.t0),"function"!=typeof l){e.next=20;break}return e.next=20,l(e.t0);case 20:case"end":return e.stop()}},e,null,[[2,13]])})),function(t){return e.apply(this,arguments)}),[d,l,r]),mutationStatus:h,error:b,data:k}};t.useMutation=l,l.propTypes={onSuccess:s.default.func,onError:s.default.func}},72403:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useQueries=void 0;var a=r(n(90402)),i=r(n(64512)),o=n(67294),c=n(17999),s=r(n(27361)),u=r(n(26726)),l=r(n(22853)),d=n(54028);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(71450);var h=(0,c.createSelectorHook)(d.clientContext),m=function(e,t){if(!h)throw Error("You must use react-redux > 7.1.0 to use useQuery (uses useSelector) under the hood");if(!e)throw l.default.warn("Bad query",e),Error("Bad query");var n=t.as,r=t.enabled,a=void 0===r||r,i=a?"function"==typeof e?e():e:null;if(!n)throw Error("You must specify options.as when using useQuery");var c=(0,u.default)(),d=h(function(){return void 0===t.singleDocData&&null!=i&&i.id&&l.default.warn("useQuery options.singleDocData will pass to true in a next version of cozy-client, please add it now to prevent any problem in the future."),c.getQueryFromState(n,{hydrated:(0,s.default)(t,"hydrated",!0),singleDocData:(0,s.default)(t,"singleDocData",!1)})});(0,o.useEffect)(function(){!1!==a&&c.query(i,t)},[n,a]);var f=(0,o.useCallback)(function(){var e=c.getQueryFromState(n);return c.query(e.bookmark?e.definition.offsetBookmark(e.bookmark):e.definition.offset(e.data.length),{as:n})},[n,c]),m=(0,o.useCallback)(function(){return c.query(i,t)},[c,i,t]);return p(p({},d),{},{fetchMore:f,fetch:m})};t.useQueries=function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=(0,a.default)(r[n],2),o=i[0],c=i[1];t[o]=m(c.query,c)}return t},t.default=m},71747:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294);n(71450);var s=r(n(72403)),u=r(n(29568));t.default=function(e,t){var n=(0,u.default)(!1),r=(0,o.default)(n,2),l=r[0],d=r[1],f=(0,s.default)(e,t);return(0,c.useEffect)(function(){var e;(e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("loaded"===f.fetchStatus&&f.hasMore&&!l)){e.next=5;break}return d(!0),e.next=4,f.fetchMore();case 4:d(!1);case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[f.hasMore,f.fetchStatus,l]),f}},74108:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useSettings=void 0;var a=r(n(80295)),i=n(67294),o=n(72004),c=n(34607),s=r(n(72403)),u=n(88930),l=n(56200);t.useSettings=function(e,t){var n=(0,o.getQuery)(e),r=(0,s.default)(n.definition,n.options),d=r.data,f=(0,a.default)(r,["data"]),p=(0,c.useMutation)(),h=p.mutate,m=(0,a.default)(p,["mutate"]),v=(0,i.useCallback)(function(t){var n=(0,o.normalizeSettings)(d);return h((0,o.editSettings)(e,n,t))},[h,d,e]),y=(0,o.normalizeSettings)(d),b=(0,u.hasQueryBeenLoaded)(f)?(0,l.extractKeys)(y,t):void 0;return{query:f,values:b,save:v,mutation:m}}},16396:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0});var i={CozyLink:!0,StackLink:!0,WebFlagshipLink:!0,compose:!0,QueryDefinition:!0,Q:!0,Mutations:!0,MutationTypes:!0,getDoctypeFromOperation:!0,Association:!0,HasMany:!0,HasOne:!0,HasOneInPlace:!0,HasManyInPlace:!0,HasManyTriggers:!0,isReferencedBy:!0,isReferencedById:!0,getReferencedBy:!0,getReferencedById:!0,deconstructCozyWebLinkWithSlug:!0,deconstructRedirectLink:!0,dehydrate:!0,generateWebLink:!0,ensureFirstSlash:!0,rootCozyUrl:!0,InvalidRedirectLinkError:!0,InvalidCozyUrlError:!0,InvalidProtocolError:!0,BlockedCozyError:!0,cancelable:!0,isQueryLoading:!0,hasQueryBeenLoaded:!0,isQueriesLoading:!0,hasQueriesBeenLoaded:!0,getQueryFromState:!0,dispatchCreate:!0,dispatchUpdate:!0,dispatchDelete:!0,Registry:!0,RealTimeQueries:!0,manifest:!0,CozyProvider:!0,withMutation:!0,withMutations:!0,Query:!0,queryConnect:!0,queryConnectFlat:!0,withClient:!0,models:!0,fetchPolicies:!0,BulkEditError:!0,webPerformanceApi:!0,defaultPerformanceApi:!0};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"CozyLink",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"StackLink",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"WebFlagshipLink",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"compose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"QueryDefinition",{enumerable:!0,get:function(){return d.QueryDefinition}}),Object.defineProperty(t,"Q",{enumerable:!0,get:function(){return d.Q}}),Object.defineProperty(t,"Mutations",{enumerable:!0,get:function(){return d.Mutations}}),Object.defineProperty(t,"MutationTypes",{enumerable:!0,get:function(){return d.MutationTypes}}),Object.defineProperty(t,"getDoctypeFromOperation",{enumerable:!0,get:function(){return d.getDoctypeFromOperation}}),Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return f.Association}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return f.HasMany}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return f.HasOne}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return f.HasOneInPlace}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return f.HasManyInPlace}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return f.HasManyTriggers}}),Object.defineProperty(t,"isReferencedBy",{enumerable:!0,get:function(){return p.isReferencedBy}}),Object.defineProperty(t,"isReferencedById",{enumerable:!0,get:function(){return p.isReferencedById}}),Object.defineProperty(t,"getReferencedBy",{enumerable:!0,get:function(){return p.getReferencedBy}}),Object.defineProperty(t,"getReferencedById",{enumerable:!0,get:function(){return p.getReferencedById}}),Object.defineProperty(t,"deconstructCozyWebLinkWithSlug",{enumerable:!0,get:function(){return h.deconstructCozyWebLinkWithSlug}}),Object.defineProperty(t,"deconstructRedirectLink",{enumerable:!0,get:function(){return h.deconstructRedirectLink}}),Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return h.dehydrate}}),Object.defineProperty(t,"generateWebLink",{enumerable:!0,get:function(){return h.generateWebLink}}),Object.defineProperty(t,"ensureFirstSlash",{enumerable:!0,get:function(){return h.ensureFirstSlash}}),Object.defineProperty(t,"rootCozyUrl",{enumerable:!0,get:function(){return h.rootCozyUrl}}),Object.defineProperty(t,"InvalidRedirectLinkError",{enumerable:!0,get:function(){return h.InvalidRedirectLinkError}}),Object.defineProperty(t,"InvalidCozyUrlError",{enumerable:!0,get:function(){return h.InvalidCozyUrlError}}),Object.defineProperty(t,"InvalidProtocolError",{enumerable:!0,get:function(){return h.InvalidProtocolError}}),Object.defineProperty(t,"BlockedCozyError",{enumerable:!0,get:function(){return h.BlockedCozyError}}),Object.defineProperty(t,"cancelable",{enumerable:!0,get:function(){return m.cancelable}}),Object.defineProperty(t,"isQueryLoading",{enumerable:!0,get:function(){return m.isQueryLoading}}),Object.defineProperty(t,"hasQueryBeenLoaded",{enumerable:!0,get:function(){return m.hasQueryBeenLoaded}}),Object.defineProperty(t,"isQueriesLoading",{enumerable:!0,get:function(){return m.isQueriesLoading}}),Object.defineProperty(t,"hasQueriesBeenLoaded",{enumerable:!0,get:function(){return m.hasQueriesBeenLoaded}}),Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return v.getQueryFromState}}),Object.defineProperty(t,"dispatchCreate",{enumerable:!0,get:function(){return v.dispatchCreate}}),Object.defineProperty(t,"dispatchUpdate",{enumerable:!0,get:function(){return v.dispatchUpdate}}),Object.defineProperty(t,"dispatchDelete",{enumerable:!0,get:function(){return v.dispatchDelete}}),Object.defineProperty(t,"Registry",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"RealTimeQueries",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"CozyProvider",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"withMutation",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"withMutations",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"Query",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"queryConnect",{enumerable:!0,get:function(){return _.queryConnect}}),Object.defineProperty(t,"queryConnectFlat",{enumerable:!0,get:function(){return _.queryConnectFlat}}),Object.defineProperty(t,"withClient",{enumerable:!0,get:function(){return _.withClient}}),Object.defineProperty(t,"fetchPolicies",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"BulkEditError",{enumerable:!0,get:function(){return j.BulkEditError}}),Object.defineProperty(t,"webPerformanceApi",{enumerable:!0,get:function(){return A.webPerformanceApi}}),Object.defineProperty(t,"defaultPerformanceApi",{enumerable:!0,get:function(){return D.defaultPerformanceApi}}),t.models=t.manifest=void 0;var o=a(n(18621)),c=a(n(37130)),s=a(n(97619)),u=a(n(62946)),l=a(n(59242)),d=n(71450),f=n(25367),p=n(11282),h=n(72004),m=n(88930),v=n(65972),y=a(n(10513)),b=a(n(1153)),g=r(n(86092));t.manifest=g;var x=a(n(63384)),w=a(n(43592)),k=a(n(18428)),O=a(n(18597)),_=n(378),E=r(n(4034));t.models=E;var S=a(n(39268)),C=n(24424);Object.keys(C).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e))&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))});var P=n(63786);Object.keys(P).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e))&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))});var j=n(29822),A=n(86465),D=n(12196)},22853:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i=(0,a.default)("cozy-client");a.default.suggest.deny("cozy-client","info"),t.default=i},24424:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.createFakeClient=t.createMockClient=void 0;var a=r(n(90402)),i=r(n(68434)),o=r(n(82007)),c=r(n(64512)),s=r(n(80295)),u=r(n(82492)),l=r(n(18621)),d=n(65972),f=n(60359),p=n(71450);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=function(e,t,n){var r=n.definition,a=n.doctype,i=n.data,o=n.queryError,u=(0,s.default)(n,["definition","doctype","data","queryError"]);e.store.dispatch((0,d.initQuery)(t,r||(0,p.Q)(a))),o?e.store.dispatch((0,d.receiveQueryError)(t,o)):e.store.dispatch((0,d.receiveQueryResult)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({data:i?i.map(function(e){return(0,f.normalizeDoc)(e,a)}):i},u)))},v=function(e){var t;return t=(0,o.default)(i.default.mark(function t(n){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",{data:null});case 2:if(!e[n.doctype]){t.next=6;break}return t.abrupt("return",{data:e[n.doctype]});case 6:return t.abrupt("return",{data:[]});case 7:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}};t.createMockClient=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queries,n=e.remote,r=e.clientOptions,a=e.clientFunctions,i=jest.fn().mockImplementation(v(n));return y({queries:t,remote:n,clientOptions:r,clientFunctions:(0,u.default)({query:i,save:jest.fn(),saveAll:jest.fn(),stackClient:{fetchJSON:jest.fn()}},a)})};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queries,n=e.remote,r=e.clientOptions,i=e.clientFunctions,o=new l.default(r||{});o.ensureStore();for(var c=0,s=Object.entries(t||{});c<s.length;c++){var d=(0,a.default)(s[c],2);m(o,d[0],d[1])}return o.query=v(n),(0,u.default)(o,i),o};t.createFakeClient=y},94564:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isAccountWithTrigger=t.buildAccount=t.getAccountName=t.getAccountLogin=t.setContractSyncStatusInAccount=t.getContractSyncStatusFromAccount=t.muteError=t.getMutedErrors=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(64512)),s=a(n(82492)),u=n(71450),l=n(13965),d=n(86092);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e){return(null==e?void 0:e.mutedErrors)||[]};t.getMutedErrors=m,t.muteError=function(e,t){var n=m(e);return n.push({type:t,mutedAt:new Date().toISOString()}),h(h({},e),{},{mutedErrors:n})},t.getContractSyncStatusFromAccount=function(e,t){var n,r,a=(0,l.getHasManyItem)(e,"contracts",t);if(!a)throw Error("Cannot find contrat ".concat(t," in account"));return null===(n=null==a?void 0:null===(r=a.metadata)||void 0===r?void 0:r.imported)||void 0===n||n},t.setContractSyncStatusInAccount=function(e,t,n){return(0,l.updateHasManyItem)(e,"contracts",t,function(e){if(void 0===e)throw Error("Cannot find contrat ".concat(t," in account"));return(0,s.default)({},e,{metadata:{imported:n}})})};var v=function(e){if(e.identifier)return e.auth[e.identifier];if(e&&e.auth){var t,n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(d.legacyLoginFields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.auth[r])return e.auth[r]}}catch(e){n.e(e)}finally{n.f()}}return null};t.getAccountLogin=v,t.getAccountName=function(e){return e?e.auth&&(e.auth.accountName||v(e))||e._id:null},t.buildAccount=function(e,t){return{auth:t,account_type:e.slug,identifier:(0,d.getIdentifier)(e.fields),state:null}};var y=(r=(0,o.default)(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,u.Q)("io.cozy.triggers").where({"message.account":n._id}).indexFields(["message.account"]).limitBy(1));case 2:return r=e.sent,e.abrupt("return",r.data.length>0);case 4:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.isAccountWithTrigger=y},23963:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getAppDisplayName=t.getUrl=t.isInstalled=t.getStoreInstallationURL=t.getStoreURL=void 0;var a=r(n(27361)),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.slug)throw Error("Expected app / konnector with the defined slug");var n=o(e,{slug:"store"});if(!n)return null;var r=n.links&&n.links.related;return r?"".concat(r,"#/discover/").concat(t.slug):null};t.getStoreURL=i,t.getStoreInstallationURL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i(e,t);return n?"".concat(n,"/install"):null};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.find(function(e){return e.slug===t.slug})};t.isInstalled=o,t.getUrl=function(e){return e.links&&e.links.related},t.getAppDisplayName=function(e,t){var n=(0,a.default)(e,"name_prefix"),r=(0,a.default)(e,"name"),i=(0,a.default)(e,["locales",t,"name"],r),o=(0,a.default)(e,["locales",t,"name_prefix"],n);return o&&"cozy"!==o.toLowerCase()?"".concat(o," ").concat(i):i}},88842:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.hasExtensionInstalledAttribute=void 0;var i=a(n(68434)),o=a(n(82007)),c=n(71450),s=(r=(0,o.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchQueryAndGetFromState({definition:(0,c.Q)("io.cozy.settings").getById("io.cozy.settings.bitwarden"),options:{as:"io.cozy.settings/io.cozy.settings.bitwarden",singleDocData:!0}});case 3:return n=e.sent.data.extension_installed,e.abrupt("return",!!n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)});t.hasExtensionInstalledAttribute=s},47978:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMagicLink=t.isOIDC=void 0,t.isOIDC=function(e){var t;return null!==(t=e.capabilities.can_auth_with_oidc)&&void 0!==t&&t},t.isMagicLink=function(e){var t;return null!==(t=e.capabilities.can_auth_with_magic_links)&&void 0!==t&&t}},40996:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isContact=t.getIndexByFamilyNameGivenNameEmailCozyUrl=t.getDefaultSortIndexValue=t.makeDefaultSortIndexValue=t.getDisplayName=t.makeDisplayName=t.getFullname=t.makeFullname=t.getPrimaryAddress=t.getPrimaryPhone=t.getPrimaryCozyDomain=t.getPrimaryCozy=t.getPrimaryEmail=t.getInitials=t.getPrimaryOrFirst=t.CONTACTS_DOCTYPE=void 0;var a=r(n(27361)),i=r(n(41609)),o=r(n(22853)),c="io.cozy.contacts";t.CONTACTS_DOCTYPE=c;var s=function(e){return function(t){return t&&t[e]&&0!==t[e].length&&t[e][0]?t[e].find(function(e){return e.primary})||t[e][0]:""}};t.getPrimaryOrFirst=s,t.getInitials=function(e){if(null!=e&&null!==(t=e.name)&&void 0!==t&&t.givenName||null!=e&&null!==(n=e.name)&&void 0!==n&&n.familyName)return["givenName","familyName"].map(function(t){return(0,a.default)(e,["name",t,0],"")}).join("").toUpperCase();var t,n,r=u(e);if(r)return r[0].toUpperCase();var i=d(e);return i?i[0].toUpperCase():""};var u=function(e){return Array.isArray(e.email)?s("email")(e).address||"":e.email};t.getPrimaryEmail=u;var l=function(e){return Array.isArray(e.cozy)?s("cozy")(e).url||"":e.url};t.getPrimaryCozy=l;var d=function(e){try{return new URL(l(e)).hostname.replace(/^(www.)/g,"")}catch(t){return l(e)}};t.getPrimaryCozyDomain=d,t.getPrimaryPhone=function(e){return s("phone")(e).number||""},t.getPrimaryAddress=function(e){return s("address")(e).formattedAddress||""};var f=["namePrefix","givenName","additionalName","familyName","nameSuffix"],p=function(e,t){var n=(null==t?void 0:t.attributesFullname)||f;return e.name?n.map(function(t){return e.name[t]}).filter(function(e){return void 0!==e}).join(" ").trim():""};t.makeFullname=p,t.getFullname=function(e){return(0,a.default)(e,"fullname")?e.fullname:p(e)};var h=function(e,t){var n=p(e,t),r=u(e),a=d(e);return n&&n.length>0?n:r&&r.length>0?r:a&&a.length>0?a:""};t.makeDisplayName=h,t.getDisplayName=function(e){return(0,a.default)(e,"displayName")?e.displayName:h(e)};var m=function(e){var t=[(0,a.default)(e,"name.familyName",""),(0,a.default)(e,"name.givenName",""),u(e),d(e)].join("").trim().toLowerCase();return 0===t.length?null:t};t.makeDefaultSortIndexValue=m;var v=function(e){var t=(0,a.default)(e,"indexes.byFamilyNameGivenNameEmailCozyUrl",null);return null!==t?(0,i.default)(t)?null:t:m(e)};t.getDefaultSortIndexValue=v,t.getIndexByFamilyNameGivenNameEmailCozyUrl=function(e){return o.default.warn("Deprecation: `getIndexByFamilyNameGivenNameEmailCozyUrl` is deprecated, please use `getDefaultSortIndexValue` instead"),v(e)},t.isContact=function(e){return e._type===c}},65314:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getEmojiByCountry=t.getAllNationalities=t.getNationalityByCodeISO=t.getAllCountryNames=t.getCountryNameByCodeISO=t.getAllCountries=t.checkCountryCode=t.isCountryCodeAlpha2=t.isCountryCodeAlpha3=t.isValidCountryCodeTranslation=t.COUNTRIES_ISO=void 0;var a=r(n(98235)),i=n(61774),o=r(n(22853)),c=[{code2:"AF",code3:"AFG",number:"004"},{code2:"AL",code3:"ALB",number:"008"},{code2:"DZ",code3:"DZA",number:"012"},{code2:"AD",code3:"AND",number:"020"},{code2:"AO",code3:"AGO",number:"024"},{code2:"AG",code3:"ATG",number:"028"},{code2:"AR",code3:"ARG",number:"032"},{code2:"AM",code3:"ARM",number:"051"},{code2:"AU",code3:"AUS",number:"036"},{code2:"AT",code3:"AUT",number:"040"},{code2:"AZ",code3:"AZE",number:"031"},{code2:"BS",code3:"BHS",number:"044"},{code2:"BH",code3:"BHR",number:"048"},{code2:"BD",code3:"BGD",number:"050"},{code2:"BB",code3:"BRB",number:"052"},{code2:"BY",code3:"BLR",number:"112"},{code2:"BE",code3:"BEL",number:"056"},{code2:"BZ",code3:"BLZ",number:"084"},{code2:"BJ",code3:"BEN",number:"204"},{code2:"BM",code3:"BMU",number:"060"},{code2:"BT",code3:"BTN",number:"064"},{code2:"BO",code3:"BOL",number:"068"},{code2:"BQ",code3:"BES",number:"535"},{code2:"BA",code3:"BIH",number:"070"},{code2:"BW",code3:"BWA",number:"072"},{code2:"BV",code3:"BVT",number:"074"},{code2:"BR",code3:"BRA",number:"076"},{code2:"IO",code3:"IOT",number:"086"},{code2:"BN",code3:"BRN",number:"096"},{code2:"BG",code3:"BGR",number:"100"},{code2:"BF",code3:"BFA",number:"854"},{code2:"BI",code3:"BDI",number:"108"},{code2:"CV",code3:"CPV",number:"132"},{code2:"KH",code3:"KHM",number:"116"},{code2:"CM",code3:"CMR",number:"120"},{code2:"CA",code3:"CAN",number:"124"},{code2:"KY",code3:"CYM",number:"136"},{code2:"CF",code3:"CAF",number:"140"},{code2:"TD",code3:"TCD",number:"148"},{code2:"CL",code3:"CHL",number:"152"},{code2:"CN",code3:"CHN",number:"156"},{code2:"CX",code3:"CXR",number:"162"},{code2:"CC",code3:"CCK",number:"166"},{code2:"CO",code3:"COL",number:"170"},{code2:"KM",code3:"COM",number:"174"},{code2:"CD",code3:"COD",number:"180"},{code2:"CG",code3:"COG",number:"178"},{code2:"CK",code3:"COK",number:"184"},{code2:"CR",code3:"CRI",number:"188"},{code2:"HR",code3:"HRV",number:"191"},{code2:"CU",code3:"CUB",number:"192"},{code2:"CW",code3:"CUW",number:"531"},{code2:"CY",code3:"CYP",number:"196"},{code2:"CZ",code3:"CZE",number:"203"},{code2:"CI",code3:"CIV",number:"384"},{code2:"DK",code3:"DNK",number:"208"},{code2:"DJ",code3:"DJI",number:"262"},{code2:"DM",code3:"DMA",number:"212"},{code2:"DO",code3:"DOM",number:"214"},{code2:"EC",code3:"ECU",number:"218"},{code2:"EG",code3:"EGY",number:"818"},{code2:"SV",code3:"SLV",number:"222"},{code2:"GQ",code3:"GNQ",number:"226"},{code2:"ER",code3:"ERI",number:"232"},{code2:"EE",code3:"EST",number:"233"},{code2:"SZ",code3:"SWZ",number:"748"},{code2:"ET",code3:"ETH",number:"231"},{code2:"FK",code3:"FLK",number:"238"},{code2:"FO",code3:"FRO",number:"234"},{code2:"FJ",code3:"FJI",number:"242"},{code2:"FI",code3:"FIN",number:"246"},{code2:"FR",code3:"FRA",number:"250"},{code2:"GF",code3:"GUF",number:"254"},{code2:"PF",code3:"PYF",number:"258"},{code2:"TF",code3:"ATF",number:"260"},{code2:"GA",code3:"GAB",number:"266"},{code2:"GM",code3:"GMB",number:"270"},{code2:"GE",code3:"GEO",number:"268"},{code2:"DE",code3:"DEU",number:"276"},{code2:"GH",code3:"GHA",number:"288"},{code2:"GI",code3:"GIB",number:"292"},{code2:"GR",code3:"GRC",number:"300"},{code2:"GL",code3:"GRL",number:"304"},{code2:"GD",code3:"GRD",number:"308"},{code2:"GP",code3:"GLP",number:"312"},{code2:"GU",code3:"GUM",number:"316"},{code2:"GT",code3:"GTM",number:"320"},{code2:"GG",code3:"GGY",number:"831"},{code2:"GN",code3:"GIN",number:"324"},{code2:"GW",code3:"GNB",number:"624"},{code2:"GY",code3:"GUY",number:"328"},{code2:"HT",code3:"HTI",number:"332"},{code2:"HM",code3:"HMD",number:"334"},{code2:"VA",code3:"VAT",number:"336"},{code2:"HN",code3:"HND",number:"340"},{code2:"HK",code3:"HKG",number:"344"},{code2:"HU",code3:"HUN",number:"348"},{code2:"IS",code3:"ISL",number:"352"},{code2:"IN",code3:"IND",number:"356"},{code2:"ID",code3:"IDN",number:"360"},{code2:"IR",code3:"IRN",number:"364"},{code2:"IQ",code3:"IRQ",number:"368"},{code2:"IE",code3:"IRL",number:"372"},{code2:"IM",code3:"IMN",number:"833"},{code2:"IL",code3:"ISR",number:"376"},{code2:"IT",code3:"ITA",number:"380"},{code2:"JM",code3:"JAM",number:"388"},{code2:"JP",code3:"JPN",number:"392"},{code2:"JE",code3:"JEY",number:"832"},{code2:"JO",code3:"JOR",number:"400"},{code2:"KZ",code3:"KAZ",number:"398"},{code2:"KE",code3:"KEN",number:"404"},{code2:"KI",code3:"KIR",number:"296"},{code2:"KP",code3:"PRK",number:"408"},{code2:"KR",code3:"KOR",number:"410"},{code2:"KW",code3:"KWT",number:"414"},{code2:"KG",code3:"KGZ",number:"417"},{code2:"LA",code3:"LAO",number:"418"},{code2:"LV",code3:"LVA",number:"428"},{code2:"LB",code3:"LBN",number:"422"},{code2:"LS",code3:"LSO",number:"426"},{code2:"LR",code3:"LBR",number:"430"},{code2:"LY",code3:"LBY",number:"434"},{code2:"LI",code3:"LIE",number:"438"},{code2:"LT",code3:"LTU",number:"440"},{code2:"LU",code3:"LUX",number:"442"},{code2:"MO",code3:"MAC",number:"446"},{code2:"MG",code3:"MDG",number:"450"},{code2:"MW",code3:"MWI",number:"454"},{code2:"MY",code3:"MYS",number:"458"},{code2:"MV",code3:"MDV",number:"462"},{code2:"ML",code3:"MLI",number:"466"},{code2:"MT",code3:"MLT",number:"470"},{code2:"MH",code3:"MHL",number:"584"},{code2:"MQ",code3:"MTQ",number:"474"},{code2:"MR",code3:"MRT",number:"478"},{code2:"MU",code3:"MUS",number:"480"},{code2:"YT",code3:"MYT",number:"175"},{code2:"MX",code3:"MEX",number:"484"},{code2:"FM",code3:"FSM",number:"583"},{code2:"MD",code3:"MDA",number:"498"},{code2:"MC",code3:"MCO",number:"492"},{code2:"MN",code3:"MNG",number:"496"},{code2:"ME",code3:"MNE",number:"499"},{code2:"MS",code3:"MSR",number:"500"},{code2:"MA",code3:"MAR",number:"504"},{code2:"MZ",code3:"MOZ",number:"508"},{code2:"MM",code3:"MMR",number:"104"},{code2:"NA",code3:"NAM",number:"516"},{code2:"NR",code3:"NRU",number:"520"},{code2:"NP",code3:"NPL",number:"524"},{code2:"NL",code3:"NLD",number:"528"},{code2:"NC",code3:"NCL",number:"540"},{code2:"NZ",code3:"NZL",number:"554"},{code2:"NI",code3:"NIC",number:"558"},{code2:"NE",code3:"NER",number:"562"},{code2:"NG",code3:"NGA",number:"566"},{code2:"NU",code3:"NIU",number:"570"},{code2:"NF",code3:"NFK",number:"574"},{code2:"MP",code3:"MNP",number:"580"},{code2:"NO",code3:"NOR",number:"578"},{code2:"OM",code3:"OMN",number:"512"},{code2:"PK",code3:"PAK",number:"586"},{code2:"PW",code3:"PLW",number:"585"},{code2:"PS",code3:"PSE",number:"275"},{code2:"PA",code3:"PAN",number:"591"},{code2:"PG",code3:"PNG",number:"598"},{code2:"PY",code3:"PRY",number:"600"},{code2:"PE",code3:"PER",number:"604"},{code2:"PH",code3:"PHL",number:"608"},{code2:"PN",code3:"PCN",number:"612"},{code2:"PL",code3:"POL",number:"616"},{code2:"PT",code3:"PRT",number:"620"},{code2:"PR",code3:"PRI",number:"630"},{code2:"QA",code3:"QAT",number:"634"},{code2:"MK",code3:"MKD",number:"807"},{code2:"RO",code3:"ROU",number:"642"},{code2:"RU",code3:"RUS",number:"643"},{code2:"RW",code3:"RWA",number:"646"},{code2:"RE",code3:"REU",number:"638"},{code2:"BL",code3:"BLM",number:"652"},{code2:"SH",code3:"SHN",number:"654"},{code2:"KN",code3:"KNA",number:"659"},{code2:"LC",code3:"LCA",number:"662"},{code2:"MF",code3:"MAF",number:"663"},{code2:"PM",code3:"SPM",number:"666"},{code2:"VC",code3:"VCT",number:"670"},{code2:"WS",code3:"WSM",number:"882"},{code2:"SM",code3:"SMR",number:"674"},{code2:"ST",code3:"STP",number:"678"},{code2:"SA",code3:"SAU",number:"682"},{code2:"SN",code3:"SEN",number:"686"},{code2:"RS",code3:"SRB",number:"688"},{code2:"SC",code3:"SYC",number:"690"},{code2:"SL",code3:"SLE",number:"694"},{code2:"SG",code3:"SGP",number:"702"},{code2:"SX",code3:"SXM",number:"534"},{code2:"SK",code3:"SVK",number:"703"},{code2:"SI",code3:"SVN",number:"705"},{code2:"SB",code3:"SLB",number:"090"},{code2:"SO",code3:"SOM",number:"706"},{code2:"ZA",code3:"ZAF",number:"710"},{code2:"GS",code3:"SGS",number:"239"},{code2:"SS",code3:"SSD",number:"728"},{code2:"ES",code3:"ESP",number:"724"},{code2:"LK",code3:"LKA",number:"144"},{code2:"SD",code3:"SDN",number:"729"},{code2:"SR",code3:"SUR",number:"740"},{code2:"SJ",code3:"SJM",number:"744"},{code2:"SE",code3:"SWE",number:"752"},{code2:"CH",code3:"CHE",number:"756"},{code2:"SY",code3:"SYR",number:"760"},{code2:"TW",code3:"TWN",number:"158"},{code2:"TJ",code3:"TJK",number:"762"},{code2:"TZ",code3:"TZA",number:"834"},{code2:"TH",code3:"THA",number:"764"},{code2:"TL",code3:"TLS",number:"626"},{code2:"TG",code3:"TGO",number:"768"},{code2:"TK",code3:"TKL",number:"772"},{code2:"TO",code3:"TON",number:"776"},{code2:"TT",code3:"TTO",number:"780"},{code2:"TN",code3:"TUN",number:"788"},{code2:"TR",code3:"TUR",number:"792"},{code2:"TM",code3:"TKM",number:"795"},{code2:"TC",code3:"TCA",number:"796"},{code2:"TV",code3:"TUV",number:"798"},{code2:"UG",code3:"UGA",number:"800"},{code2:"UA",code3:"UKR",number:"804"},{code2:"AE",code3:"ARE",number:"784"},{code2:"GB",code3:"GBR",number:"826"},{code2:"UM",code3:"UMI",number:"581"},{code2:"US",code3:"USA",number:"840"},{code2:"UY",code3:"URY",number:"858"},{code2:"UZ",code3:"UZB",number:"860"},{code2:"VU",code3:"VUT",number:"548"},{code2:"VE",code3:"VEN",number:"862"},{code2:"VN",code3:"VNM",number:"704"},{code2:"VG",code3:"VGB",number:"092"},{code2:"VI",code3:"VIR",number:"850"},{code2:"WF",code3:"WLF",number:"876"},{code2:"EH",code3:"ESH",number:"732"},{code2:"YE",code3:"YEM",number:"887"},{code2:"ZM",code3:"ZMB",number:"894"},{code2:"ZW",code3:"ZWE",number:"716"},{code2:"AX",code3:"ALA",number:"248"}];t.COUNTRIES_ISO=c,t.isValidCountryCodeTranslation=function(e,t){var n=(0,i.getLocalizer)(e).polyglot;return u(t)&&n.has("nationalities.".concat(t))&&n.has("countries.".concat(t))};var s=function(e){if(!e)return!1;var t=e.toUpperCase();return c.some(function(e){return e.code3===t})};t.isCountryCodeAlpha3=s;var u=function(e){if(!e)return!1;var t=e.toUpperCase();return c.some(function(e){return e.code2===t})};t.isCountryCodeAlpha2=u,t.checkCountryCode=function(e){return u(e)||s(e)};var l=function(e){var t=(0,i.getLocalizer)(e).t;return c.map(function(e){return{code2:e.code2,code3:e.code3,number:e.number,name:t("countries.".concat(e.code2)),nationality:t("nationalities.".concat(e.code2))}})};t.getAllCountries=l;var d=function(e){return function(t){var n,r=null==e?void 0:null===(n=e.toString())||void 0===n?void 0:n.toUpperCase();return/^[A-Z]{2,3}$/.test(r)?t.code2===r||t.code3===r:!!/^\d+$/.test(r)&&t.number===r}};t.getCountryNameByCodeISO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lang:"en"},n=l(t.lang).find(d(e));return n?n.name:(o.default.warn("Country with code ".concat(e," not found")),null)},t.getAllCountryNames=function(e){return l(e).map(function(e){return e.name})},t.getNationalityByCodeISO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lang:"en"},n=l(t.lang).find(d(e));return n?n.nationality:(o.default.warn("Nationality with code ".concat(e," not found")),null)},t.getAllNationalities=function(e){return l(e).map(function(e){return e.nationality})},t.getEmojiByCountry=function(e){if(!e)return null;if(!/^[a-z]{2}$/i.test(e))return o.default.error("Country argument must be an ISO 3166-1 alpha-2 string, but got '".concat(JSON.stringify(e),"' instead.")),null;if(!c.find(function(t){return t.code2===e.toUpperCase()}))return o.default.error("Country with code ".concat(e," not found in the list of countries")),null;var t=(0,a.default)(e.toUpperCase()).map(function(e){return e.codePointAt(0)+127397});return String.fromCodePoint.apply(String,(0,a.default)(t))}},61774:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizer=void 0;for(var a=r(n(54078)),i=r(n(20455)),o=r(n(40883)),c={en:i.default,fr:o.default},s={},u=0,l=["fr","en"];u<l.length;u++){var d=l[u],f=new a.default;f.extend(c[d]),s[d]=f}t.getLocalizer=function(e){var t=s[e]||s.en;return{t:t.t.bind(t),polyglot:t,lang:e}}},61645:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAggregatesFromDACC=t.buildAggregateParams=t.sendMeasureToDACC=t.checkMeasureParams=t.isCorrectDateFormat=void 0;var o=i(n(68434)),c=i(n(82007)),s=i(n(33918));i(n(18621));var u=function(e){try{return!!new Date(Date.parse(e)).toISOString().startsWith(e)}catch(e){return!1}};t.isCorrectDateFormat=u;var l=function(e){var t=e.createdBy,n=e.measureName,r=e.startDate,a=e.value,i=e.group1,o=e.group2,c=e.group3;if(!t||"string"!=typeof t)throw Error("Missing or wrong type parameter: createdBy");if(!n||"string"!=typeof n)throw Error("Missing or wrong type parameter: measureName");if(!r)throw Error("Missing parameter: startDate");if(!u(r))throw Error("Date should be in YYYY-MM-DD format");if("number"!=typeof a)throw Error("Missing or wrong type parameter: value");if(i&&("object"!=typeof i||0===Object.keys(i).length)||o&&("object"!=typeof o||0===Object.keys(o).length)||c&&("object"!=typeof c||0===Object.keys(c).length))throw Error("Groups should be key-value objects");if(c&&(!o||!i)||o&&!i)throw Error("Group order must be respected")};t.checkMeasureParams=l;var d=(r=(0,c.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(r),e.next=4,t.getStackClient().fetchJSON("POST","/remote/".concat(n),{data:JSON.stringify(r),path:"measure"});case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),(0,s.default)("error","Error while sending measure to remote doctype: ".concat(e.t0.message)),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e,t,n){return r.apply(this,arguments)});t.sendMeasureToDACC=d;var f=function(e){var t=e.measureName;if(!t||"string"!=typeof t)throw Error("Missing or wrong type parameter: measureName");var n=e.startDate||new Date(0).toISOString(),r=e.endDate||new Date(Date.now()).toISOString();if(!u(n)||!u(r))throw(0,s.default)("error","Date should be in YYYY-MM-DD format but received: startDate: ".concat(n," | endDate: ").concat(r)),Error("Date should be in YYYY-MM-DD format");return{measureName:t,startDate:n,endDate:r}};t.buildAggregateParams=f;var p=(a=(0,c.default)(o.default.mark(function e(t,n,r){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=f(r),e.next=4,t.getStackClient().fetchJSON("POST","/remote/".concat(n),{data:JSON.stringify(a),path:"aggregate"});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),(0,s.default)("error","Error while fetching aggregates to remote doctype: ".concat(e.t0.message)),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return a.apply(this,arguments)});t.fetchAggregatesFromDACC=p},60195:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconLabelPairs=t.THEME_OTHERS_LABELS=t.THEME_INVOICE_LABELS=t.THEME_FINANCE_LABELS=t.THEME_ACTIVITY_LABELS=t.THEME_TRANSPORT_LABELS=t.THEME_HOME_LABELS=t.THEME_HEALTH_LABELS=t.THEME_WORK_STUDY_LABELS=t.THEME_FAMILY_LABELS=t.THEME_IDENTITY_LABELS=void 0,t.THEME_IDENTITY_LABELS=["identity_photo","national_id_card","passport","residence_permit","electoral_card","family_record_book","birth_certificate","driver_license","citizen_registration_certificate","note_identity_document","other_identity_document"],t.THEME_FAMILY_LABELS=["family_record_book","birth_certificate","wedding","pacs","single_parent_benefit","divorce","large_family_card","caf","payment_proof_family_allowance","note_family_document","other_family_document","person_insurance"],t.THEME_WORK_STUDY_LABELS=["diploma","work_contract","pay_sheet","unemployment_benefit","employment_center_certificate","pension","work_disability_recognition","gradebook","student_card","school_attendance_certificate","school_insurance_certificate","resume","motivation_letter","expense_claim","note_work_document","other_work_document"],t.THEME_HEALTH_LABELS=["health_certificate","health_book","national_health_insurance_card","national_health_insurance_right_certificate","health_insurance_card","prescription","health_invoice","work_disability_recognition","pregnancy_medical_certificate","note_health_document","other_health_document"],t.THEME_HOME_LABELS=["phone_invoice","isp_invoice","telecom_invoice","energy_invoice","water_invoice","other_invoice","work_invoice","house_sale_agreeement","building_permit","technical_diagnostic_record","unfit_for_habitation_declaration","lease","rent_receipt","accommodation_proof","house_insurance","work_quote","condition_report","note_house_document","other_house_document","real_estate_insurance"],t.THEME_TRANSPORT_LABELS=["driver_license","vehicle_registration","car_insurance","transport_card","mechanic_invoice","transport_invoice","note_transport_document","other_transport_document"],t.THEME_ACTIVITY_LABELS=["personal_sporting_licence","fidelity_card","note_activity_document","other_activity_document"],t.THEME_FINANCE_LABELS=["fine","tax_certificate","tax_return","tax_notice","tax_timetable","real_estate_tax","pay_sheet","receipt","single_parent_benefit","other_tax_document","bank_details","bank_statement","loan_agreement","payment_proof_family_allowance","note_finance","expense_claim","other_bank_document","other_revenue"],t.THEME_INVOICE_LABELS=["phone_invoice","isp_invoice","telecom_invoice","energy_invoice","water_invoice","appliance_invoice","web_service_invoice","restaurant_invoice","work_invoice","transport_invoice","health_invoice","note_invoice","expense_claim","energy_contract","grocery_invoice","other_invoice"],t.THEME_OTHERS_LABELS=["other_administrative_document"],t.iconLabelPairs=[{icon:"bank-check",labels:["bank_details"]},{icon:"bank",labels:["other_administrative_document","other_tax_document","real_estate_tax","tax_certificate","tax_notice","tax_return","tax_timetable"]},{icon:"benefit",labels:["loan_agreement","other_revenue","pay_sheet","payment_proof_family_allowance","pension"]},{icon:"bill",labels:["other_invoice"]},{icon:"car",labels:["car_insurance","driver_license","other_transport_document","transport_card","transport_invoice","vehicle_registration"]},{icon:"child",labels:["birth_certificate"]},{icon:"email",labels:["receipt"]},{icon:"euro",labels:["other_bank_document"]},{icon:"exchange",labels:["bank_statement"]},{icon:"file-type-note",labels:["note_activity_document","note_family_document","note_finance","note_health_document","note_house_document","note_identity_document","note_invoice","note_transport_document","note_work_document"]},{icon:"fitness",labels:["other_activity_document","personal_sporting_licence"]},{icon:"globe",labels:["residence_permit"]},{icon:"gouv",labels:["electoral_card"]},{icon:"heart",labels:["health_book","health_certificate","health_insurance_card","health_invoice","national_health_insurance_card","national_health_insurance_right_certificate","other_health_document","person_insurance","pregnancy_medical_certificate","prescription"]},{icon:"home",labels:["accommodation_proof","building_permit","condition_report","house_insurance","house_sale_agreeement","lease","mechanic_invoice","other_house_document","real_estate_insurance","rent_receipt","technical_diagnostic_record","unfit_for_habitation_declaration","work_invoice","work_quote"]},{icon:"image",labels:["identity_photo"]},{icon:"justice",labels:["fine"]},{icon:"laudry",labels:["appliance_invoice"]},{icon:"lightning",labels:["energy_contract","energy_invoice"]},{icon:"people",labels:["national_id_card","other_identity_document","resume","work_disability_recognition"]},{icon:"plane",labels:["passport"]},{icon:"remboursement",labels:["expense_claim"]},{icon:"restaurant",labels:["restaurant_invoice"]},{icon:"school",labels:["diploma","gradebook"]},{icon:"shop",labels:["fidelity_card","grocery_invoice"]},{icon:"team",labels:["caf","citizen_registration_certificate","divorce","family_record_book","large_family_card","other_family_document","pacs","single_parent_benefit","wedding"]},{icon:"telecom",labels:["isp_invoice","telecom_invoice","web_service_invoice"]},{icon:"telephone",labels:["phone_invoice"]},{icon:"water",labels:["water_invoice"]},{icon:"work",labels:["employment_center_certificate","motivation_letter","other_work_document","school_attendance_certificate","school_insurance_certificate","student_card","unemployment_benefit","work_contract"]}]},48536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themesList=void 0;var r=n(60195),a=n(34259),i=function(e){return e.map(function(e){try{return a.Qualification.getByLabel(e)}catch(e){return console.log("error",e),null}}).filter(function(e){return e})},o=[{id:"theme1",label:"identity",icon:"people",items:i(r.THEME_IDENTITY_LABELS),defaultItems:["birth_certificate"]},{id:"theme2",label:"family",icon:"team",items:i(r.THEME_FAMILY_LABELS),defaultItems:["family_record_book"]},{id:"theme3",label:"work_study",icon:"work",items:i(r.THEME_WORK_STUDY_LABELS)},{id:"theme4",label:"health",icon:"heart",items:i(r.THEME_HEALTH_LABELS)},{id:"theme5",label:"home",icon:"home",items:i(r.THEME_HOME_LABELS)},{id:"theme6",label:"transport",icon:"car",items:i(r.THEME_TRANSPORT_LABELS),defaultItems:["driver_license"]},{id:"theme7",label:"activity",icon:"chess",items:i(r.THEME_ACTIVITY_LABELS)},{id:"theme8",label:"finance",icon:"bank",items:i(r.THEME_FINANCE_LABELS)},{id:"theme9",label:"invoice",icon:"bill",items:i(r.THEME_INVOICE_LABELS)},{id:"theme10",label:"others",icon:"dots",items:i(r.THEME_OTHERS_LABELS)}];t.themesList=o},29444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQualificationNote=t.getThemeByItem=void 0;var r=n(48536);t.getThemeByItem=function(e){var t=r.themesList.find(function(t){return t.defaultItems&&t.defaultItems.includes(e.label)});return t||r.themesList.find(function(t){return t.items.some(function(t){return t.label===e.label})})},t.isQualificationNote=function(e){return e.label.toLowerCase().startsWith("note_")}},41818:function(e,t,n){"use strict";var r=n(14746);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Qualification",{enumerable:!0,get:function(){return a.Qualification}}),Object.defineProperty(t,"setQualification",{enumerable:!0,get:function(){return a.setQualification}}),Object.defineProperty(t,"getQualification",{enumerable:!0,get:function(){return a.getQualification}}),t.helpers=t.themes=t.locales=void 0;var a=n(34259),i=r(n(92984));t.locales=i;var o=r(n(48536));t.themes=o;var c=r(n(29444));t.helpers=c},92984:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizer=t.getBoundT=void 0;var a=r(n(64512)),i=r(n(54078)),o=r(n(28330)),c=r(n(6765)),s=n(65314);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}for(var d={en:o.default,fr:c.default},f={},p=0,h=["fr","en"];p<h.length;p++){var m=h[p],v=new i.default;v.extend(d[m]),f[m]=v}t.getBoundT=function(e){var t=y(e);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l(l({},n),{},{smart_count:(null==n?void 0:n.smart_count)||1}),a=null==n?void 0:n.country,i="foreign"!==a?(0,s.getEmojiByCountry)(a):null,o="foreign"===a?t("country.foreign"):null;return i||o?"".concat(t(e,r)," ").concat(i||o):t(e,r)}};var y=function(e){var t=f[e]||f.en;return t.t.bind(t)};t.getLocalizer=y},34259:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.hasSupportedQualification=t.isSupportedQualification=t.getIconByLabel=t.getQualification=t.setQualification=t.Qualification=void 0;var i=a(n(64512)),o=a(n(65105)),c=a(n(19723)),s=a(n(36968)),u=a(n(91966)),l=r(n(37504)),d=a(n(22853)),f=n(60195);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e);var r=l.qualifications.find(function(e){return e.label===t});if(r){this.icon=n.icon||y(t),this.label=r.label;var a=n.purpose||r.purpose;a&&(this.purpose=a);var i=n.sourceCategory||r.sourceCategory;i&&(this.sourceCategory=i);var c=n.sourceSubCategory||r.sourceSubCategory;c&&(this.sourceSubCategory=c);var s=n.subjects||r.subjects;s&&(this.subjects=s)}else throw Error("No qualification found for the label ".concat(t))}return(0,c.default)(e,[{key:"checkAttributes",value:function(e){if(this.purpose!==e.purpose){if(this.purpose)throw Error("The purpose for the label ".concat(this.label," should be ").concat(this.purpose,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.purposeKnownValues.includes(e.purpose)||d.default.info("This purpose is not listed among the known values: ".concat(e.purpose,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if(this.sourceCategory!==e.sourceCategory){if(this.sourceCategory)throw Error("The sourceCategory for the label ".concat(this.label," should be ").concat(this.sourceCategory,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.sourceCategoryKnownValues.includes(e.sourceCategory)||d.default.info("This sourceCategory is not listed among the known values: ".concat(e.sourceCategory,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if(this.sourceSubCategory!==e.sourceSubCategory){if(this.sourceSubCategory)throw Error("The sourceSubCategory for the label ".concat(this.label," should be ").concat(this.sourceSubCategory,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.sourceSubCategoryKnownValues.includes(e.sourceSubCategory)||d.default.info("This sourceSubCategory is not listed among the known values: ".concat(e.sourceSubCategory,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if((0,u.default)(this.subjects,e.subjects).length>0)throw Error("The subjects for the label ".concat(this.label," should include ").concat(this.subjects,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");var t=(0,u.default)(e.subjects,this.subjects);if(t.length>0){var n=(0,u.default)(t,l.subjectsKnownValues);n.length>0&&d.default.info("These subjects are not listed among the known values: ".concat(n,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}}},{key:"setPurpose",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{purpose:t}))}},{key:"setSourceCategory",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{sourceCategory:t}))}},{key:"setSourceSubCategory",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{sourceSubCategory:t}))}},{key:"setSubjects",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{subjects:t}))}},{key:"setIcon",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{icon:t}))}},{key:"toQualification",value:function(){return{icon:this.icon,label:this.label,purpose:this.purpose,sourceCategory:this.sourceCategory,sourceSubCategory:this.sourceSubCategory,subjects:this.subjects}}}]),e}();t.Qualification=v,v.getByLabel=function(e){return new v(e)},t.setQualification=function(e,t){if(t.label){var n=t;return new v(t.label).checkAttributes(t),t.icon||(n=new v(t.label,t).setIcon(y(t.label))),(0,s.default)(e,"metadata.qualification",n)}throw Error("You must set a label to qualify")},t.getQualification=function(e){var t,n=null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.qualification;return n?new v(n.label,n.qualification).toQualification():null};var y=function(e){var t,n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(f.iconLabelPairs);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.labels.includes(e))return r.icon}}catch(e){n.e(e)}finally{n.f()}return d.default.info("The ".concat(e," qualification does not seem to have an icon.\n    Please open an issue on https://github.com/cozy/cozy-client/issues")),""};t.getIconByLabel=y;var b=function(e){return l.qualifications.some(function(t){return t.label===e})};t.isSupportedQualification=b,t.hasSupportedQualification=function(e){var t,n;return b(null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label)}},67348:function(e,t,n){"use strict";var r,a,i,o,c,s,u,l,d,f=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=function(e){var t=e._id||e.id;return S({_id:t,id:t,_type:e._type||O.DOCTYPE_FILES},e)},t.ensureFilePath=function(e,t){if(e.path)return e;if(!t||!t.path)throw Error("Could not define a file path for ".concat(e._id||e.id));return S({path:t.path+"/"+e.name},e)},t.getParentFolderId=function(e){var t=(0,y.default)(e,"attributes.dir_id");return""===t?null:t},t.downloadFile=t.copy=t.fetchBlobFileById=t.isFromKonnector=t.hasCertifications=t.hasQualifications=t.isPlainText=t.uploadFileWithConflictStrategy=t.generateFileNameForRevision=t.generateNewFileNameOnConflict=t.overrideFileForPath=t.move=t.getFullpath=t.hasMetadataAttribute=t.fetchFilesByQualificationRules=t.saveFileQualification=t.isSharingShorcutNew=t.isSharingShortcutNew=t.isSharingShorcut=t.isSharingShortcut=t.getSharingShortcutTargetDoctype=t.getSharingShortcutTargetMime=t.getSharingShortcutStatus=t.isShortcut=t.shouldBeOpenedByOnlyOffice=t.isOnlyOfficeFile=t.isEncryptedFileOrFolder=t.isEncryptedFolder=t.getEncryptiondRef=t.isEncrypted=t.isNote=t.isDirectory=t.isFile=t.splitFilename=t.ALBUMS_DOCTYPE=void 0;var p=f(n(68434)),h=f(n(82007)),m=f(n(64512)),v=n(25976),y=f(n(27361)),b=f(n(47037)),g=f(n(18721)),x=f(n(10691)),w=n(34259),k=n(71450),O=n(87941);f(n(18621));var _=f(n(22853));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,m.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C="file";t.ALBUMS_DOCTYPE="io.cozy.photos.albums";var P=/(.+)(\..*)$/,j=function(e){if(!(0,b.default)(e.name))throw Error("file should have a name property");if("file"===e.type){var t=e.name.match(P);if(t)return{filename:t[1],extension:t[2]}}return{filename:e.name,extension:""}};t.splitFilename=j;var A=function(e){return e&&e.type===C};t.isFile=A,t.isDirectory=function(e){return e&&"directory"===e.type};var D=function(e){return!!(e&&e.name&&e.name.endsWith(".cozy-note"))&&e.type===C&&!!e.metadata&&void 0!==e.metadata.title&&void 0!==e.metadata.version};t.isNote=D;var T=function(e){return!!e.encrypted};t.isEncrypted=T;var M=function(e){return(0,y.default)(e,"referenced_by",[]).find(function(e){return e.type===O.DOCTYPE_FILES_ENCRYPTION})};t.getEncryptiondRef=M;var R=function(e){return!!M(e)};t.isEncryptedFolder=R,t.isEncryptedFileOrFolder=function(e){return R(e)||T(e)};var I=function(e){return A(e)&&!D(e)&&("text"===e.class||"spreadsheet"===e.class||"slide"===e.class)};t.isOnlyOfficeFile=I,t.shouldBeOpenedByOnlyOffice=function(e){return I(e)&&!e.name.endsWith(".txt")&&!e.name.endsWith(".md")},t.isShortcut=function(e){return e&&"shortcut"===e.class};var N=function(e){return(0,y.default)(e,"metadata.sharing.status")};t.getSharingShortcutStatus=N,t.getSharingShortcutTargetMime=function(e){return(0,y.default)(e,"metadata.target.mime")},t.getSharingShortcutTargetDoctype=function(e){return(0,y.default)(e,"metadata.target._type")};var F=function(e){return!!N(e)};t.isSharingShortcut=F,t.isSharingShorcut=function(e){return _.default.warn("Deprecation: `isSharingShorcut` is deprecated, please use `isSharingShortcut` instead"),F(e)};var z=function(e){return"new"===N(e)};t.isSharingShortcutNew=z,t.isSharingShorcutNew=function(e){return _.default.warn("Deprecation: `isSharingShorcutNew` is deprecated, please use `isSharingShortcutNew` instead"),z(e)};var L=(r=(0,h.default)(p.default.mark(function e(t,n,r){var a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,w.setQualification)(n,r),e.abrupt("return",t.collection(O.DOCTYPE_FILES).updateMetadataAttribute(n._id,a.metadata));case 2:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.saveFileQualification=L;var B=(a=(0,h.default)(p.default.mark(function e(t,n){var r,a,i,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rules,a=n.count,i=(0,k.Q)(O.DOCTYPE_FILES).where(S({},r)).partialIndex({trashed:!1}).indexFields(["cozyMetadata.updatedAt","metadata.qualification"]).sortBy([{"cozyMetadata.updatedAt":"desc"}]).limitBy(a||1),e.next=4,t.query(i);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.fetchFilesByQualificationRules=B,t.hasMetadataAttribute=function(e){var t=e.file,n=e.attribute;return(0,g.default)(t,"metadata.".concat(n))};var U=(i=(0,h.default)(p.default.mark(function e(t,n,r){var a,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw Error("You must provide a dirId");case 2:return e.next=4,t.query((0,k.Q)(O.DOCTYPE_FILES).getById(n));case 4:return a=e.sent.data,i=(0,x.default)(a.path,"/"),e.abrupt("return","".concat(i,"/").concat(r));case 8:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)});t.getFullpath=U;var H=(o=(0,h.default)(p.default.mark(function e(t,n,r){var a,i,o,c,s,u=arguments;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(u.length>3&&void 0!==u[3]?u[3]:{force:!1}).force,e.prev=1,"io.cozy.remote.nextcloud.files"!==n._type){e.next=10;break}if("io.cozy.remote.nextcloud.files"!==r._type){e.next=7;break}return e.next=6,t.collection("io.cozy.remote.nextcloud.files").move(n,r);case 6:case 9:case 13:return e.abrupt("return",{moved:void 0,deleted:null});case 7:return e.next=9,t.collection("io.cozy.remote.nextcloud.files").moveToCozy(n,r);case 10:if("io.cozy.remote.nextcloud.files"!==r._type){e.next=14;break}return e.next=13,t.collection("io.cozy.remote.nextcloud.files").moveFromCozy(r,n);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(1),e.t0;case 19:return e.prev=19,e.next=22,t.collection(O.DOCTYPE_FILES).updateFileMetadata(n._id,{dir_id:r._id});case 22:return i=e.sent,e.abrupt("return",{moved:i.data,deleted:null});case 26:if(e.prev=26,e.t1=e.catch(19),!(409===e.t1.status&&a)){e.next=43;break}return e.next=31,U(t,r._id,n.name);case 31:return o=e.sent,e.next=34,t.collection(O.DOCTYPE_FILES).statByPath(o);case 34:return c=e.sent,e.next=37,t.collection(O.DOCTYPE_FILES).destroy(c.data);case 37:return e.next=39,t.collection(O.DOCTYPE_FILES).updateFileMetadata(n._id,{dir_id:r._id});case 39:return s=e.sent,e.abrupt("return",{moved:s.data,deleted:c.data.id});case 43:throw e.t1;case 44:case"end":return e.stop()}},e,null,[[1,16],[19,26]])})),function(e,t,n){return o.apply(this,arguments)});t.move=H;var G=(c=(0,h.default)(p.default.mark(function e(t,n,r,a){var i,o,c,s,u,l,d,f;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=n).endsWith("/")||(i+="/"),o=t.collection(O.DOCTYPE_FILES),e.prev=3,e.next=6,o.statByPath(i+r.name);case 6:return s=(c=e.sent.data).id,u=c.dir_id,e.next=10,o.updateFile(r,{dirId:u,fileId:s,metadata:a});case 10:return l=e.sent,e.abrupt("return",l);case 14:if(e.prev=14,e.t0=e.catch(3),!/Not Found/.test(e.t0)){e.next=24;break}return e.next=19,o.ensureDirectoryExists(i);case 19:return d=e.sent,e.next=22,o.createFile(r,{dirId:d,metadata:a});case 22:return f=e.sent,e.abrupt("return",f);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,null,[[3,14]])})),function(e,t,n,r){return c.apply(this,arguments)});t.overrideFileForPath=G;var W=function(e,t){var n=(null==t?void 0:t.delimiter)||"_",r=new RegExp("(".concat(n,")([0-9]+)$")),a=e.match(r);if(!a)return"".concat(e).concat(n,"1");var i=parseInt(a[2]);return i++,e.replace(new RegExp("(".concat(n,")([0-9]+)$")),"".concat(n).concat(i))};t.generateNewFileNameOnConflict=W,t.generateFileNameForRevision=function(e,t,n){var r=j(e),a=r.filename,i=r.extension;return"".concat(a,"_").concat(n(t.updated_at,"DD MMMM - HH[h]mm")).concat(i)};var q=(s=(0,h.default)(p.default.mark(function e(t,n,r){var a,i,o,c,s,u,l,d,f,h,m;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.name,i=r.dirId,o=r.conflictStrategy,c=r.conflictOptions,e.prev=1,e.next=4,U(t,i,a);case 4:return s=e.sent,e.next=7,t.collection(O.DOCTYPE_FILES).statByPath(s);case 7:if(u=e.sent.data.id,"erase"!==o){e.next=16;break}return e.next=12,t.collection(O.DOCTYPE_FILES).updateFile(n,S(S({},r),{},{fileId:u}));case 12:return l=e.sent,e.abrupt("return",l);case 16:return f=(d=j({name:a,type:"file"})).filename,h=d.extension,m=W(f,c)+h,e.abrupt("return",q(t,n,S(S({},r),{},{name:m})));case 19:e.next=26;break;case 21:if(e.prev=21,e.t0=e.catch(1),!/Not Found/.test(e.t0.message)){e.next=25;break}return e.abrupt("return",t.collection(O.DOCTYPE_FILES).createFile(n,r));case 25:throw e.t0;case 26:case"end":return e.stop()}},e,null,[[1,21]])})),function(e,t,n){return s.apply(this,arguments)});t.uploadFileWithConflictStrategy=q,t.isPlainText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?/^text\//.test(e):/\.(txt|md)$/.test(t)},t.hasQualifications=function(e){return!!(0,y.default)(e,"metadata.qualification")},t.hasCertifications=function(e){return(0,y.default)(e,"metadata.carbonCopy",!1)||(0,y.default)(e,"metadata.electronicSafe",!1)},t.isFromKonnector=function(e){return(0,g.default)(e,"cozyMetadata.sourceAccount")};var V=(u=(0,h.default)(p.default.mark(function e(t,n){var r,a,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.collection(O.DOCTYPE_FILES),e.next=3,r.fetchFileContentById(n);case 3:return a=e.sent,e.next=6,a.blob();case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e)})),function(e,t){return u.apply(this,arguments)});t.fetchBlobFileById=V;var Q=(l=(0,h.default)(p.default.mark(function e(t,n,r){var a,i,o,c;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"io.cozy.remote.nextcloud.files"!==n._type||"io.cozy.remote.nextcloud.files"!==r._type){e.next=6;break}return e.next=4,t.collection("io.cozy.remote.nextcloud.files").copy(n,r);case 4:return a=e.sent,e.abrupt("return",a);case 6:if("io.cozy.remote.nextcloud.files"!==n._type||"io.cozy.files"!==r._type){e.next=11;break}return e.next=9,t.collection("io.cozy.remote.nextcloud.files").moveToCozy(n,r,{copy:!0});case 9:return i=e.sent,e.abrupt("return",i);case 11:if("io.cozy.remote.nextcloud.files"!==r._type){e.next=16;break}return e.next=14,t.collection("io.cozy.remote.nextcloud.files").moveFromCozy(r,n,{copy:!0});case 14:return o=e.sent,e.abrupt("return",o);case 16:return e.next=18,t.collection(O.DOCTYPE_FILES).copy(n._id,void 0,r._id);case 18:return c=e.sent,e.abrupt("return",c);case 22:throw e.prev=22,e.t0=e.catch(0),e.t0;case 25:case"end":return e.stop()}},e,null,[[0,22]])})),function(e,t,n){return l.apply(this,arguments)});t.copy=Q;var Z=(d=(0,h.default)(p.default.mark(function e(t){var n,r,a,i,o,c;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.file,a=t.url,i=t.webviewIntent,o=n.collection(O.DOCTYPE_FILES),!((0,v.isFlagshipApp)()&&i&&!T(r))){e.next=19;break}return e.next=5,null==i?void 0:i.call("isAvailable","downloadFile");case 5:if(e.t1=c=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==c;case 9:if(!e.t0){e.next=13;break}e.t2=c,e.next=14;break;case 13:e.t2=!1;case 14:if(!e.t2){e.next=19;break}return e.next=18,i.call("downloadFile",r);case 18:return e.abrupt("return",e.sent);case 19:if(!T(r)){e.next=21;break}return e.abrupt("return",o.forceFileDownload(a,r.name));case 21:return e.abrupt("return",o.download(r));case 22:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)});t.downloadFile=Z},27899:function(e,t,n){"use strict";var r,a,i,o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getReferencedFolder=t.createFolderWithReference=t.ensureMagicFolder=t.MAGIC_FOLDERS=void 0;var c=o(n(68434)),s=o(n(82007)),u=o(n(89734));o(n(18621));var l=n(87941),d=n(71450),f="io.cozy.apps",p="administrative",h="photos",m={ADMINISTRATIVE:"".concat(f,"/").concat(p),PHOTOS:"".concat(f,"/").concat(h),PHOTOS_BACKUP:"".concat(f,"/").concat(h,"/mobile"),PHOTOS_UPLOAD:"".concat(f,"/").concat(h,"/upload"),NOTES:"".concat(f,"/notes"),HOME:"".concat(f,"/home"),PAPERS:"".concat(f,"/").concat(p,"/papers"),COACH_CO2:"".concat(f,"/").concat(p,"/coachco2")};t.MAGIC_FOLDERS=m;var v=(r=(0,s.default)(c.default.mark(function e(t,n,r){var a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={_type:f,_id:n},e.next=3,b(t,a);case 3:if(!(i=e.sent)){e.next=6;break}return e.abrupt("return",i);case 6:if((o=Object.values(m)).includes(n)){e.next=9;break}throw Error("Cannot create Magic folder with id ".concat(n,". Allowed values are ").concat(o.join(", "),"."));case 9:if(r){e.next=11;break}throw Error("Magic folder default path must be defined");case 11:return e.abrupt("return",y(t,r,a));case 12:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.ensureMagicFolder=v;var y=(a=(0,s.default)(c.default.mark(function e(t,n,r){var a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collection(l.DOCTYPE_FILES),e.next=3,a.ensureDirectoryExists(n);case 3:return i=e.sent,e.next=6,a.addReferencesTo(r,[{_id:i}]);case 6:return e.next=8,a.get(i);case 8:return o=e.sent.data,e.abrupt("return",o);case 11:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)});t.createFolderWithReference=y;var b=(i=(0,s.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,d.Q)(l.DOCTYPE_FILES).partialIndex({type:"directory",trashed:!1}).referencedBy(n));case 2:return r=e.sent.included,e.abrupt("return",r.length>0?(0,u.default)(r,"created_at").pop():null);case 5:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)});t.getReferencedFolder=b},93829:function(e,t){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.deltaLatitude=t.deltaLongitude=t.computeSphericalCenter=t.geodesicDistance=t.computeSpeed=void 0,t.computeSpeed=function(e,t){return e&&t?Math.round(e/t*100)/100:0};var r=function(e){return e*Math.PI/180},a=function(e){return 180*e/Math.PI},i=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n};t.geodesicDistance=function(e,t){if((null==e?void 0:e.lon)===void 0||(null==e?void 0:e.lat)===void 0||(null==t?void 0:t.lon)===void 0||(null==t?void 0:t.lat)===void 0)return null;var n=r(e.lon),a=r(e.lat),o=r(t.lon),c=r(t.lat);return i(6378137*(2*Math.asin(Math.sqrt(Math.pow(Math.sin((c-a)/2),2)+Math.cos(a)*Math.cos(c)*Math.pow(Math.sin((o-n)/2),2)))),2)},t.computeSphericalCenter=function(e){if(e.length<1)return null;if(1===e.length)return e[0];var t,o=0,c=0,s=0,u=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(e))){i&&(e=i);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,c=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==i.return||i.return()}finally{if(s)throw o}}}}(e);try{for(u.s();!(t=u.n()).done;){var l=t.value,d=r(l.lon),f=r(l.lat),p=Math.cos(f)*Math.cos(d),h=Math.cos(f)*Math.sin(d),m=Math.sin(f);o+=p,c+=h,s+=m}}catch(e){u.e(e)}finally{u.f()}var v=o/e.length,y=c/e.length,b=s/e.length,g=a(Math.atan2(y,v));return{lat:i(a(Math.atan2(b,Math.sqrt(v*v+y*y))),13),lon:i(g,13)}},t.deltaLongitude=function(e,t){return i(a(t/(6378137*Math.cos(r(e)))),13)},t.deltaLatitude=function(e){return i(e/(40075e3/360),13)}},4034:function(e,t,n){"use strict";var r=n(14746);Object.defineProperty(t,"__esModule",{value:!0}),t.geo=t.user=t.paper=t.dacc=t.sharing=t.timeseries=t.document=t.contact=t.utils=t.permission=t.note=t.account=t.konnectorFolder=t.folder=t.file=t.applications=t.instance=t.trigger=t.accounts=t.triggers=void 0;var a=r(n(20786));t.trigger=a;var i=r(n(5499));t.instance=i;var o=r(n(23963));t.applications=o;var c=r(n(67348));t.file=c;var s=r(n(27899));t.folder=s;var u=r(n(3857));t.konnectorFolder=u;var l=r(n(94564));t.account=l;var d=r(n(49666));t.note=d;var f=r(n(13001));t.permission=f;var p=r(n(1028));t.utils=p;var h=r(n(40996));t.contact=h;var m=r(n(41818));t.document=m;var v=r(n(48398));t.timeseries=v;var y=r(n(32672));t.sharing=y;var b=r(n(61645));t.dacc=b;var g=r(n(87067));t.paper=g;var x=r(n(51398));t.user=x;var w=r(n(93829));t.geo=w,t.triggers=a,t.accounts=l},5499:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiskInfos=t.hasPasswordDefinedAttribute=t.buildPremiumLink=t.hasAnOffer=t.shouldDisplayOffers=t.getUuid=t.isFreemiumUser=t.arePremiumLinksEnabled=t.isSelfHosted=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(27361)),s=n(71450),u=function(e){return!(0,c.default)(e,"context.data.manager_url")};t.isSelfHosted=u;var l=function(e){return!!(0,c.default)(e,"context.data.enable_premium_links")};t.arePremiumLinksEnabled=l;var d=function(e){return 5e10>=parseInt((0,c.default)(e,"diskUsage.data.quota",!1))};t.isFreemiumUser=d;var f=function(e){return(0,c.default)(e,"instance.data.uuid")};t.getUuid=f,t.shouldDisplayOffers=function(e){return!u(e)&&l(e)&&f(e)&&d(e)},t.hasAnOffer=function(e){return!u(e)&&l(e)&&f(e)&&!d(e)},t.buildPremiumLink=function(e){var t=(0,c.default)(e,"context.data.manager_url",!1),n=f(e);return t&&n?"".concat(t,"/cozy/instances/").concat(n,"/premium"):null};var p=(r=(0,o.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchQueryAndGetFromState({definition:(0,s.Q)("io.cozy.settings").getById("io.cozy.settings.instance"),options:{as:"io.cozy.settings/io.cozy.settings.instance",singleDocData:!0}});case 3:return n=e.sent.data.password_defined,e.abrupt("return",!!n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)});t.hasPasswordDefinedAttribute=p;var h=function(e){return 1e-9*e},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"".concat(e%1?e.toFixed(t):e)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return{diskQuota:h(t),diskUsage:h(e),percentUsage:e/t*100}};t.makeDiskInfos=function(e,t){var n=v(+e,t?+t:void 0),r=n.diskQuota,a=n.diskUsage,i=n.percentUsage;return{humanDiskQuota:m(r),humanDiskUsage:m(a),percentUsage:Math.round(i).toString()}}},3857:function(e,t,n){"use strict";var r,a,i,o,c,s,u,l=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.findKonnectorAccountFolderByReference=t.buildFolderPermission=t.buildMainFolderPath=t.buildFolderPath=t.statDirectoryByPath=t.createDirectoryByPath=t.ensureKonnectorFolder=void 0;var d=l(n(68434)),f=l(n(90402)),p=l(n(82007)),h=n(27899);l(n(18621));var m=n(94564),v=n(92984),y=n(71450),b="io.cozy.files",g=(r=(0,p.default)(d.default.mark(function e(t,n){var r,a,i,o,c,s,u,l,p,y,b,g,_,E,S;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.konnector,a=n.account,i=n.lang,o=t.collection("io.cozy.permissions"),c=(0,v.getLocalizer)(i),e.next=5,Promise.all([(0,h.ensureMagicFolder)(t,h.MAGIC_FOLDERS.ADMINISTRATIVE,c("MagicFolders.administrative")),(0,h.ensureMagicFolder)(t,h.MAGIC_FOLDERS.PHOTOS,c("MagicFolders.photos"))]);case 5:return s=e.sent,l=(u=(0,f.default)(s,2))[0],p=u[1],y=(0,m.getAccountName)(a),e.next=12,N({client:t,slug:r.slug,sourceAccountIdentifier:y});case 12:if(!(b=e.sent)){e.next=15;break}return e.abrupt("return",b);case 15:return e.next=17,F({client:t,slug:r.slug});case 17:if(!(g=e.sent)){e.next=22;break}return e.next=21,function(e){return z.apply(this,arguments)}({client:t,mainFolder:g,konnector:r,sourceAccountIdentifier:y});case 21:return e.abrupt("return",e.sent);case 22:return _=O(r,{administrative:l.path,photos:p.path}),e.next=25,w(t,_);case 25:if(e.t0=e.sent,e.t0){e.next=30;break}return e.next=29,x(t,_);case 29:e.t0=e.sent;case 30:return R({client:t,folder:e.t0,konnector:r}),E=k(r,a,{administrative:l.path,photos:p.path}),e.next=35,w(t,E);case 35:if(e.t1=e.sent,e.t1){e.next=40;break}return e.next=39,x(t,E);case 39:e.t1=e.sent;case 40:return S=e.t1,e.next=43,Promise.all([o.add(r,A(S)),R({client:t,folder:S,konnector:r}),I({client:t,folder:S,sourceAccountIdentifier:y})]);case 43:return e.abrupt("return",S);case 44:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.ensureKonnectorFolder=g;var x=(a=(0,p.default)(d.default.mark(function e(t,n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(b).createDirectoryByPath(n);case 2:return r=e.sent.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.createDirectoryByPath=x;var w=(i=(0,p.default)(d.default.mark(function e(t,n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.collection(b).statByPath(n);case 3:if(!(r=e.sent).data.trashed){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",r.data);case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0&&404===e.t0.status)){e.next=13;break}return e.abrupt("return",null);case 13:throw Error(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[0,9]])})),function(e,t){return i.apply(this,arguments)});t.statDirectoryByPath=w;var k=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=D(((null==e?void 0:null===(n=e.folders)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.defaultDir)||"$administrative/$konnector/$account").replace(/(\/+)/g,"/"),"/");_(i)||(i="$administrative/"+i);var o=i.split("/",1),c=S(i,o[0]),s=C(o[0],a),u=P(c,{konnector:e.name,account:(0,m.getAccountName)(t).replace(j,"-")});return"/".concat(s,"/").concat(u)};t.buildFolderPath=k;var O=function(e){var t,n,r,a,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=D(((null==e?void 0:null===(t=e.folders)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:null===(r=n.defaultDir)||void 0===r?void 0:null===(a=r.split("/"))||void 0===a?void 0:null===(i=a.slice(0,-1))||void 0===i?void 0:i.join("/"))||"$administrative/$konnector").replace(/(\/+)/g,"/"),"/");_(c)||(c="$administrative/"+c);var s=c.split("/",1),u=S(c,s[0]),l=C(s[0],o),d=P(u,{konnector:e.name});return"/".concat(l,"/").concat(d)};t.buildMainFolderPath=O;var _=function(e){return E.some(function(t){return e.startsWith(t)})},E=["$administrative","$photos"],S=function(e,t){var n=e.substring(t.length);return""===n&&(n="$konnector/$account"),n},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D((t[e.slice(1)]||"Administrative").replace(/(\/+)/g,"/"),"/")},P=function(e,t){return D(e.replace(/(\/+)/g,"/"),"/").split("/").map(function(e){return(null==t?void 0:t[e.slice(1)])||e}).join("/")},j=/\//g,A=function(e){return{saveFolder:{type:b,values:[e._id],verbs:["GET","PATCH","POST"]}}};t.buildFolderPermission=A;var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\\s";return e.replace(new RegExp("^([".concat(t,"]*)(.*?)([").concat(t,"]*)$")),"$2")},T=function(e,t){var n;return!!(null===(n=e.referenced_by)||void 0===n?void 0:n.find(function(e){return"io.cozy.konnectors"===e.type&&e.id==="io.cozy.konnectors/"+t}))},M=function(e,t){var n;return!!(null===(n=e.referenced_by)||void 0===n?void 0:n.find(function(e){return"io.cozy.accounts.sourceAccountIdentifier"===e.type&&(!t||e.id===t)}))},R=(o=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.folder,a=t.konnector,i=n.collection(b),T(r,a.slug)){e.next=5;break}return e.next=5,i.addReferencesTo(a,[r]);case 5:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),I=(c=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.folder,a=t.sourceAccountIdentifier,i=n.collection(b),M(r,a)){e.next=5;break}return e.next=5,i.addReferencesTo({_id:a,_type:"io.cozy.accounts.sourceAccountIdentifier"},[r]);case 5:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)}),N=(s=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.slug,a=t.sourceAccountIdentifier,e.next=3,n.query((0,y.Q)(b).partialIndex({type:"directory",trashed:!1}).referencedBy({_type:"io.cozy.konnectors",_id:"io.cozy.konnectors/".concat(r)}));case 3:return i=e.sent.included,e.abrupt("return",i.find(function(e){return M(e,a)}));case 6:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)});t.findKonnectorAccountFolderByReference=N;var F=(u=(0,p.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.slug,e.next=3,n.query((0,y.Q)(b).partialIndex({type:"directory",trashed:!1}).referencedBy({_type:"io.cozy.konnectors",_id:"io.cozy.konnectors/".concat(r)}));case 3:return a=e.sent.included,e.abrupt("return",a.find(function(e){return!M(e)}));case 6:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)});function z(){return(z=(0,p.default)(d.default.mark(function e(t){var n,r,a,i,o,c;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.mainFolder,a=t.konnector,i=t.sourceAccountIdentifier,o=r.path+"/"+i,e.next=4,w(n,o);case 4:if(e.t0=e.sent,e.t0){e.next=9;break}return e.next=8,x(n,o);case 8:e.t0=e.sent;case 9:return c=e.t0,e.next=12,R({client:n,folder:c,konnector:a});case 12:return e.next=14,I({client:n,folder:c,sourceAccountIdentifier:i});case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}},86092:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeCategories=h,t.areTermsValid=m,t.isPartnershipValid=v,t.sanitize=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return!e.categories&&e.category&&"string"==typeof e.category&&(t.categories=[e.category],delete t.category),t.categories=h(t.categories),"object"==typeof e.name&&(t.name=e.name.en),e.available_version&&(t.availableVersion=e.available_version,delete t.available_version),e.latest_version&&(t.latestVersion=e.latestVersion,delete t.latest_version),t.terms&&!m(t.terms)&&delete t.terms,t.partnership&&!v(t.partnership)&&delete t.partnership,t.fields&&(t.fields=b(e.fields)),t},t.getIdentifier=t.sanitizeIdentifier=t.legacyLoginFields=t.ROLE_IDENTIFIER=void 0;var a=r(n(64512)),i=r(n(59242)),o=r(n(50361)),c=r(n(70894));function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var l="identifier";t.ROLE_IDENTIFIER=l;var d=["login","identifier","new_identifier","email"];t.legacyLoginFields=d;var f=["secret","dob","code","answer","access_token","refresh_token","appSecret"],p=["banking","cozy","energy","health","host_provider","insurance","isp","mes_infos","online_services","others","partners","press","productivity","ptnb","public_service","shopping","social","telecom","transport"];function h(e){if(!e)return["others"];var t=e.filter(function(e){return p.includes(e)});return t.length?t:["others"]}function m(e){return!!(e&&e.id&&e.url&&e.version)}function v(e){return!!(e&&e.description)}var y=function(e){var t=(0,o.default)(e),n=!1;for(var r in t)t[r].role===l&&(n?delete t[r].role:n=!0);if(n)return t;var a,i=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(d);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(t[c])return t[c].role=l,t}}catch(e){i.e(e)}finally{i.f()}for(var u in t)if("password"!==t[u].type){t[u].role=l;break}return t};t.sanitizeIdentifier=y,t.getIdentifier=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.default)(y(e),function(e){return e.role===l})||null};var b=(0,i.default)([function(e){var t=(0,o.default)(e);return delete t.advancedFields,t},y,function(e){var t=(0,o.default)(e);for(var n in t){var r=t[n],a=void 0===r.required?r.isRequired:r.required;t[n].required="boolean"!=typeof a||a}return t},function(e){var t=(0,o.default)(e);for(var n in t){var r=t[n];"boolean"!=typeof r.encrypted&&(r.encrypted="password"===r.type||f.includes(n))}return t}])},49666:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchURL=t.generateUrlForNote=t.generatePrivateUrl=void 0;var i=a(n(68434)),o=a(n(82007)),c=n(72004),s=a(n(22853)),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.returnUrl,a=new URL(e);return r&&a.searchParams.set("returnUrl",r),a.hash="#/n/".concat(t.id),a.toString()};t.generatePrivateUrl=u,t.generateUrlForNote=function(e,t){return s.default.warn("generateUrlForNote is deprecated. Please use models.note.generatePrivateUrl instead"),u(e,t)};var l=(r=(0,o.default)(i.default.mark(function e(t,n){var r,a,o,s,u,l,d,f,p,h,m,v=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>2&&void 0!==v[2]?v[2]:{},e.next=3,t.getStackClient().collection("io.cozy.notes").fetchURL({_id:n.id});case 3:if(o=(a=e.sent.data).note_id,s=a.subdomain,u=a.protocol,l=a.instance,d=a.sharecode,f=a.public_name,!d){e.next=18;break}return(h=[["id",o]]).push(["sharecode",d]),f&&h.push(["username",f]),e.abrupt("return",(0,c.generateWebLink)({cozyUrl:"".concat(u,"://").concat(l),searchParams:h,pathname:null!==(p=r.pathname)&&void 0!==p?p:"/public/",slug:"notes",subDomainType:s}));case 18:return e.abrupt("return",(0,c.generateWebLink)({cozyUrl:"".concat(u,"://").concat(l),pathname:null!==(m=r.pathname)&&void 0!==m?m:"",slug:"notes",subDomainType:s,hash:"/n/".concat(o)}));case 19:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.fetchURL=l},87067:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isForeignPaper=t.makeExpirationDescription=t.makeExpiresInMessage=t.makeExpiredMessage=t.formatContactValue=t.getTranslatedNameForContact=t.formatOtherMetadataValue=t.getTranslatedNameForOtherMetadata=t.formatInformationMetadataValue=t.getTranslatedNameForInformationMetadata=t.formatDateMetadataValue=t.getTranslatedNameForDateMetadata=t.getMetadataQualificationType=t.formatMetadataQualification=t.makeMetadataQualification=t.isExpiringSoon=t.isExpired=t.computeExpirationNoticeLink=t.computeExpirationNoticeDate=t.computeExpirationDate=t.isExpiring=t.KNOWN_BILLS_ATTRIBUTES_NAMES=t.KNOWN_OTHER_METADATA_NAMES=t.KNOWN_INFORMATION_METADATA_NAMES=t.KNOWN_DATE_METADATA_NAMES=void 0;var a=r(n(98235)),i=r(n(29422)),o=r(n(27546)),c=r(n(94581)),s=r(n(99580)),u=n(92984),l=n(61774),d=n(40996),f=r(n(27361)),p=n(65314),h={national_id_card:"https://www.service-public.fr/particuliers/vosdroits/N358",residence_permit:"https://www.service-public.fr/particuliers/vosdroits/N110",passport:"https://www.service-public.fr/particuliers/vosdroits/N360",driver_license:"https://permisdeconduire.ants.gouv.fr/demarches-en-ligne/perte-vol-deterioration-fin-de-validite-ou-changement-d-etat-civil"},m=["AObtentionDate","BObtentionDate","CObtentionDate","DObtentionDate","obtentionDate","expirationDate","referencedDate","issueDate","shootingDate","date","datetime"];t.KNOWN_DATE_METADATA_NAMES=m;var v=["number","bicNumber","country","refTaxIncome","contractType","netSocialAmount","employerName","vehicle.licenseNumber","vehicle.confidentialNumber","noticePeriod"];t.KNOWN_INFORMATION_METADATA_NAMES=v;var y=["contact","page","qualification"];t.KNOWN_OTHER_METADATA_NAMES=y;var b=["amount","subtype","employer"];t.KNOWN_BILLS_ATTRIBUTES_NAMES=b;var g=function(e){var t,n,r,a,i,o=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label,c=null===(r=e.metadata)||void 0===r?void 0:r.country,s=null===(a=e.metadata)||void 0===a?void 0:a.expirationDate,u=null===(i=e.metadata)||void 0===i?void 0:i.noticePeriod;return"national_id_card"===o&&(!c||"fr"===c)&&!!s&&!!u},x=function(e){var t,n,r=null===(t=e.metadata)||void 0===t?void 0:t.expirationDate,a=null===(n=e.metadata)||void 0===n?void 0:n.noticePeriod;return!!r&&!!a},w=function(e){var t,n,r,a=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label,i=null===(r=e.metadata)||void 0===r?void 0:r.referencedDate,o=e.created_at;return"personal_sporting_licence"===a&&(!!i||!!o)};t.isExpiring=function(e){return!!(g(e)||x(e)||w(e))};var k=function(e){if(g(e)||x(e)){var t;return new Date(null===(t=e.metadata)||void 0===t?void 0:t.expirationDate)}if(w(e)){var n,r=null===(n=e.metadata)||void 0===n?void 0:n.referencedDate,a=e.created_at;return(0,i.default)(new Date(null!=r?r:a),{days:365})}return null};t.computeExpirationDate=k;var O=function(e){if(g(e)||x(e)){var t;return parseInt(null===(t=e.metadata)||void 0===t?void 0:t.noticePeriod,10)}return w(e)?15:null},_=function(e){var t=k(e);if(null==t)return null;var n=O(e);return null==n?null:(0,o.default)(t,{days:n})};t.computeExpirationNoticeDate=_,t.computeExpirationNoticeLink=function(e){var t,n,r=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label;return r&&h[r]||null},t.isExpired=function(e){var t=new Date,n=k(e);return null!=n&&n<=t},t.isExpiringSoon=function(e){var t=new Date,n=k(e),r=_(e);return null!=n&&null!=r&&r<=t&&t<n};var E=function(e){var t=e.metadata,n=e.knownMetadataPath,r=e.value||(0,f.default)(t,n,null)||null;return Object.keys(t).some(function(e){return n.startsWith(e)})||"contact"===n?{name:n,value:r}:null};t.makeMetadataQualification=E,t.formatMetadataQualification=function(e){var t=m.map(function(t){return E({metadata:e,knownMetadataPath:t})}).filter(Boolean).filter(function(e,t,n){return n.length>1?"datetime"!==e.name:e}),n=v.map(function(t){return E({metadata:e,knownMetadataPath:t})}).filter(Boolean),r=y.map(function(t){var n,r="qualification"===t?null===(n=e[t])||void 0===n?void 0:n.label:e[t];return E({metadata:e,knownMetadataPath:t,value:r})}).filter(Boolean);return[].concat((0,a.default)(t),(0,a.default)(n),(0,a.default)(r))},t.getMetadataQualificationType=function(e){return m.includes(e)?"date":v.includes(e)?"information":y.includes(e)?"contact"===e?"contact":"other":b.includes(e)?"bills":null},t.getTranslatedNameForDateMetadata=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.qualification.date.title.".concat(e))},t.formatDateMetadataValue=function(e,t){var n=t.lang,r=t.f,a=(0,u.getLocalizer)(n);return e?r(e,"en"===n?"LL/dd/yyyy":"dd/LL/yyyy"):a("Scan.qualification.noInfo")},t.getTranslatedNameForInformationMetadata=function(e,t){var n=t.lang,r=t.qualificationLabel,a=(0,u.getLocalizer)(n);return a("number"===e?"Scan.qualification.information.title.".concat(r,".").concat(e):"Scan.qualification.information.title.".concat(e))},t.formatInformationMetadataValue=function(e,t){var n=t.lang,r=t.name,a=t.qualificationLabel,i=(0,u.getLocalizer)(n),o=(0,l.getLocalizer)(n).t;return"number"==typeof e||e?"noticePeriod"===r?"".concat(e," ").concat(i("Scan.qualification.information.day",{smart_count:e})):"contractType"===r?i("Scan.attributes.contractType.".concat(e),{_:e}):"refTaxIncome"===r||"netSocialAmount"===r||"amount"===r||"number"===r&&"pay_sheet"===a?"".concat(e," €"):"country"===r&&(0,p.isValidCountryCodeTranslation)(n,e)?o("countries.".concat(e)):e:i("Scan.qualification.noInfo")},t.getTranslatedNameForOtherMetadata=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.qualification.".concat(e))},t.formatOtherMetadataValue=function(e,t){var n=t.lang,r=t.name,a=(0,u.getLocalizer)(n);return"qualification"===r?a("Scan.items.".concat(e),{smart_count:1}):a("Scan.qualification.".concat(e))},t.getTranslatedNameForContact=function(e){var t=e.lang;return(0,u.getLocalizer)(t)("Scan.qualification.contact")},t.formatContactValue=function(e){return e&&e.length>0?e.map(function(e){return"".concat((0,d.getDisplayName)(e))}).join(", "):""},t.makeExpiredMessage=function(e){var t=e.lang;return(0,u.getLocalizer)(t)("Scan.expiration.expired")},t.makeExpiresInMessage=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.expiration.expiresIn",{duration:(0,c.default)(new Date(e),{locale:"fr"===n?s.default:void 0})})},t.makeExpirationDescription=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.expiration.description",{duration:(0,c.default)(new Date(e),{locale:"fr"===n?s.default:void 0})})},t.isForeignPaper=function(e){var t;return null!==(t=e.metadata)&&void 0!==t&&!!t.country&&"fr"!==e.metadata.country.toLowerCase()}},13001:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isReadOnly=v,t.fetchOwn=y,t.isForType=g,t.isDocumentReadOnly=function(e){return w.apply(this,arguments)},t.isShortcutCreatedOnTheRecipientCozy=void 0;var a=r(n(64512)),i=r(n(68434)),o=r(n(82007)),c=r(n(98235)),s=r(n(25325)),u=r(n(27361));r(n(18621));var l=n(71450),d=n(67348),f=n(87941),p=r(n(22853));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.writability;return e.verbs&&e.verbs.length>0&&0===(0,s.default)(e.verbs,["ALL"].concat((0,c.default)(void 0===n?["PATCH","POST","PUT","DELETE"]:n))).length}function y(e){return b.apply(this,arguments)}function b(){return(b=(0,o.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collection("io.cozy.permissions"),e.next=3,n.fetchOwnPermissions();case 3:if(r=e.sent,a=(0,u.default)(r,"data.attributes.permissions")){e.next=7;break}throw"Can't get self permissions";case 7:return e.abrupt("return",Object.values(a));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e,t){return e.type===t||e.type+".*"===t}function x(){return(x=(0,o.default)(i.default.mark(function e(t){var n,r,a,c,s,u,p,h,v,b,x;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x=function(){return(x=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.doc,r=t.client,!(o=(a=t.perms).find(function(e){if(!e.values)return!0;var t=n[e.selector||"id"];return e.values.includes(t)}))){e.next=6;break}return e.abrupt("return",o);case 6:if(s!==f.DOCTYPE_FILES){e.next=16;break}if(c=(0,d.getParentFolderId)(n),e.t0=c,!e.t0){e.next=13;break}return e.next=12,h(c);case 12:e.t0=e.sent;case 13:if(!(u=e.t0)){e.next=16;break}return e.abrupt("return",b({doc:u,perms:a,client:r}));case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)},b=function(e){return x.apply(this,arguments)},v=function(){return(v=(0,o.default)(i.default.mark(function e(t){var n,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.Q)(f.DOCTYPE_FILES).getById(t),e.next=3,r.query(n);case 3:return a=e.sent,e.abrupt("return",a&&a.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)},h=function(e){return v.apply(this,arguments)},n=t.document,r=t.client,a=t.permissions,c=n._id||n.id,s=n._type||n.type,u=m(m({},n),{},{id:c,type:s}),!a){e.next=12;break}e.t0=a,e.next=15;break;case 12:return e.next=14,y(r);case 14:e.t0=e.sent;case 15:return p=e.t0.filter(function(e){return g(e,s)}),e.abrupt("return",b({doc:u,client:r,perms:p}));case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.document,r=t.client,a=t.writability,void 0!==(o=t.permissions)){e.next=10;break}return e.next=7,y(r);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=o;case 11:if(!((c=e.t0).length<=1)){e.next=16;break}e.t1=c[0],e.next=19;break;case 16:return e.next=18,function(e){return x.apply(this,arguments)}({document:n,client:r,permissions:c});case 18:e.t1=e.sent;case 19:if(!(s=e.t1)){e.next=24;break}return e.abrupt("return",v(s,{writability:a}));case 24:return p.default.warn("can't find the document in current attached permissions"),e.abrupt("return",void 0);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.isShortcutCreatedOnTheRecipientCozy=function(e){if(!e.included)return!1;var t=e.included.find(function(e){return"io.cozy.sharings.members"===e.type});return!!t&&!!t.attributes.instance}},32672:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingLink=void 0;var i=a(n(68434)),o=a(n(64512)),c=a(n(82007)),s=n(87941);a(n(18621));var u=n(72004);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=(r=(0,c.default)(i.default.mark(function e(t,n){var r,a,o,c,l,f,p,h,m,v,y=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=(o=y.length>2&&void 0!==y[2]?y[2]:{}).ttl,l=o.password,p=void 0===(f=o.verbs)?["GET"]:f,h=d(d({_type:s.DOCTYPE_PERMISSIONS,permissions:{files:{type:s.DOCTYPE_FILES,values:n,verbs:p}}},c&&{ttl:c}),l&&{password:l}),e.next=4,t.save(h);case 4:return m=e.sent.data,v=(0,u.generateWebLink)({cozyUrl:t.getStackClient().uri,searchParams:[["sharecode",null==m?void 0:null===(r=m.attributes)||void 0===r?void 0:null===(a=r.shortcodes)||void 0===a?void 0:a.code]],pathname:"/public",slug:"drive",subDomainType:t.capabilities.flat_subdomains?"flat":"nested"}),e.abrupt("return",v);case 8:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.makeSharingLink=f},48398:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTimeSeriesByIntervalAndSource=t.saveTimeSeries=void 0;var o=i(n(68434)),c=i(n(82007)),s=n(71450),u=function(e){if(!e.startDate||!e.endDate)throw Error("You must specify a startDate and endDate for the time serie");if(!Date.parse(e.startDate)||!Date.parse(e.endDate))throw Error("Invalid date format for the time serie");if(!e.dataType)throw Error("You must specify a dataType for the time serie");if(!e.series||!Array.isArray(e.series))throw Error("You must specify a series array for the time serie")},l=(r=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,c,s,l,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dataType,a=n.series,i=n.startDate,c=n.endDate,s=n.source,l=n.theme,u({dataType:r,series:a,startDate:i,endDate:c,source:s}),d={_type:"io.cozy.timeseries.".concat(r),startDate:i,endDate:c,source:s,theme:l,series:a},e.abrupt("return",t.save(d));case 5:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.saveTimeSeries=l;var d=(a=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,c,u,l,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.startDate,a=n.endDate,i=n.dataType,c=n.source,u=n.limit,l="io.cozy.timeseries.".concat(i),d=(0,s.Q)(l).where({source:c,startDate:{$gte:r},endDate:{$lte:a}}).indexFields(["source","startDate","endDate"]).sortBy([{source:"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(u||5),e.abrupt("return",t.query(d));case 4:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.fetchTimeSeriesByIntervalAndSource=d},20786:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.triggers=t.triggerStates=void 0;var a=r(n(64512)),i=n(94564),o=r(n(22853));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=["CHALLENGE_ASKED","DISK_QUOTA_EXCEEDED","TERMS_VERSION_MISMATCH","USER_ACTION_NEEDED","USER_ACTION_NEEDED.CHANGE_PASSWORD","USER_ACTION_NEEDED.ACCOUNT_REMOVED","USER_ACTION_NEEDED.WEBAUTH_REQUIRED","USER_ACTION_NEEDED.SCA_REQUIRED","LOGIN_FAILED"],l={getLastExecution:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_execution},getLastSuccess:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_success},getLastsuccess:function(e){var t;return o.default.warn("Deprecated, please use getLastSuccess instead of getLastsuccess"),null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_success},isErrored:function(e){var t;return(null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.status)==="errored"},getLastErrorType:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_error}};t.triggerStates=l;var d={isKonnectorWorker:function(e){return"konnector"===e.worker},isKonnector:function(e){return"konnector"===e.worker||"client"===e.worker},getKonnector:function(e){return d.isKonnector(e)?e.message&&e.message.konnector?e.message.konnector:e.message&&e.message.Data?JSON.parse(atob(e.message.Data)).konnector:void 0:null},getAccountId:function(e){var t,n,r=null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.Data;return r?JSON.parse(atob(r)).account:null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.account},isLatestErrorMuted:function(e,t){var n=l.getLastErrorType(e),r=l.getLastSuccess(e),a=r?new Date(r):new Date;return(0,i.getMutedErrors)(t).some(function(e){return e.type===n&&(!r||new Date(e.mutedAt)>a)})},hasActionableError:function(e){var t;return u.includes(null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_error)},buildTriggerAttributes:function(e){var t=e.account,n=e.cron,r=e.folder,a=e.konnector,i={account:t._id,konnector:a.slug};r&&(i.folder_to_save=r._id);var o=a.clientSide?{type:"@client"}:{type:"@cron",arguments:void 0===n?"0 0 0 * * 0":n};return s(s({},{worker:"konnector",message:i}),o)}};t.triggers=d},51398:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPassword=void 0;var i=a(n(68434)),o=a(n(82007)),c=n(5499),s=n(88842),u=n(47978),l=(r=(0,o.default)(i.default.mark(function e(t){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.hasExtensionInstalledAttribute)(t);case 2:return n=e.sent,e.next=5,(0,c.hasPasswordDefinedAttribute)(t);case 5:return r=e.sent,e.abrupt("return",!((0,u.isMagicLink)(t)||(0,u.isOIDC)(t))||n||r);case 7:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.hasPassword=l},1028:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getFlagshipDownloadLink=t.getCreatedByApp=t.hasBeenUpdatedByApp=void 0;var a=r(n(27361)),i=n(25976),o=r(n(71400));t.hasBeenUpdatedByApp=function(e,t){var n=(0,a.default)(e,"cozyMetadata.updatedByApps");return!!(n&&n.find(function(e){return e.slug===t}))},t.getCreatedByApp=function(e){return(0,a.default)(e,"cozyMetadata.createdByApp")},t.getFlagshipDownloadLink=function(e){if((0,i.isAndroid)()){var t=(0,o.default)("flagship.playstore-id")||"io.cozy.flagship.mobile";return"https://play.google.com/store/apps/details?id=".concat(t,"&hl=").concat(e)}if((0,i.isIOS)()){var n=(0,o.default)("flagship.appstore-id")||"id1600636174";return"https://apps.apple.com/".concat(e,"/app/").concat(n)}return(0,o.default)("flagship.download-link")||"https://cozy.io/".concat(e,"/download")}},12196:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPerformanceApi=void 0,t.defaultPerformanceApi={measure:function(e){},mark:function(e){return e}}},86465:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.webPerformanceApi=void 0;var a=r(n(73955));t.webPerformanceApi={measure:function(e){var t=e.measureName,n=e.markName,r=e.category,a=e.color,i=null!=t?t:n;performance.measure(i,{start:n,detail:{devtools:{track:null!=r?r:"CozyClient",color:null!=a?a:"secondary"}}})},mark:function(e){var t="".concat((0,a.default)()," ").concat(e);return performance.mark(t),t}}},39268:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={olderThan:function(e){return function(t){return!t||!t.lastUpdate||Date.now()-t.lastUpdate>e}},noFetch:function(){return!1}}},25888:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=function(){var e;function t(){(0,o.default)(this,t),this.pending={}}return(0,c.default)(t,[{key:"exec",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),(i=this.pending[r])?o=i:(o=t(),this.pending[r]=o),e.prev=3,e.next=6,o;case 6:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,this.pending[r]=null,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(t,n){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=e(),n=this.pending[t];return n||null}}]),t}();t.default=s},71450:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryDefinition=t.MutationTypes=t.Mutations=t.getDoctypeFromOperation=t.uploadFile=t.removeReferencedBy=t.addReferencedBy=t.removeReferencesTo=t.addReferencesTo=t.deleteDocument=t.updateDocuments=t.updateDocument=t.createDocument=t.isAGetByIdQuery=t.Q=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(70894)),s=r(n(22853));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.doctype=t.doctype,this.id=t.id,this.ids=t.ids,this.selector=t.selector,this.fields=t.fields,this.indexedFields=t.indexedFields,this.partialFilter=t.partialFilter,this.sort=t.sort,this.includes=t.includes,this.referenced=t.referenced,this.limit=t.limit,this.skip=t.skip,this.cursor=t.cursor,this.bookmark=t.bookmark}return(0,o.default)(e,[{key:"checkSortOrder",value:function(e){var t=e.sort,n=e.selector,r=e.indexedFields,a=this.sort||t,i=this.selector||n||{},o=this.indexedFields||r;if(a){var c=o||Object.keys(i);if(c&&!(c.length<1)){if(a.length>c.length){s.default.warn("You should not sort on non-indexed fields.\n\n        Sort: ".concat(JSON.stringify(a),"\n\n        Indexed fields: ").concat(c));return}for(var u=0;u<a.length;u++)if(Object.keys(a[u])[0]!==c[u]){s.default.warn("The sort order should be the same than the indexed fields.\n\n          Sort: ".concat(JSON.stringify(a),"\n\n          Indexed fields: ").concat(c,"\n"));return}}}}},{key:"checkSelector",value:function(e){(0,c.default)(e,["$exists",!1])&&s.default.warn('The "$exists: false" predicate should be defined as a partial index for better performance.\n\n        Selector: '.concat(JSON.stringify(e))),(0,c.default)(e,"$ne")&&s.default.info("The use of the $ne operator is more efficient with a partial index.\n\n        Selector: ".concat(JSON.stringify(e)));var t=(0,c.default)(e,function(e){return Array.isArray(e)});if(t&&!t.startsWith("$"))throw Error("You pass ".concat(JSON.stringify(e),", this is a valid mango operation, \n\n        but sift doesn't support it so CozyClient can not evaluate \n\n        the request in memory. You must use a MongoDB operator \n\n        like $in or $or operator instead, preferably in a partial index, \n\n        to avoid costly full-scan"))}},{key:"checkSelectFields",value:function(e){var t=e.fields,n=e.selector,r=e.partialFilter,a=this.fields||t,i=this.selector||n,o=this.partialFilter||r;if(a&&(i||o)&&!Object.keys(l(l({},i),o)).every(function(e){return a.includes(e)}))throw Error("The .select should includes all the fields used in where or partialIndex.\n        Please fix this query: fields: ".concat(JSON.stringify(this.toDefinition())))}},{key:"getById",value:function(t){if(!t)throw Error("getById called with undefined id");return new e(l(l({},this.toDefinition()),{},{id:t}))}},{key:"getByIds",value:function(t){return new e(l(l({},this.toDefinition()),{},{ids:t}))}},{key:"where",value:function(t){return this.checkSortOrder({selector:t}),this.checkSelector(t),this.checkSelectFields({selector:t}),new e(l(l({},this.toDefinition()),{},{selector:t}))}},{key:"select",value:function(t){return this.checkSelectFields({fields:t}),new e(l(l({},this.toDefinition()),{},{fields:t}))}},{key:"indexFields",value:function(t){return this.checkSortOrder({indexedFields:t}),new e(l(l({},this.toDefinition()),{},{indexedFields:t}))}},{key:"partialIndex",value:function(t){return this.checkSelectFields({partialFilter:t}),new e(l(l({},this.toDefinition()),{},{partialFilter:t}))}},{key:"sortBy",value:function(t){if(!Array.isArray(t))throw Error('Invalid sort, should be an array ([{ label: "desc"}, { name: "asc"}]), you passed '.concat(JSON.stringify(t),"."));return this.checkSortOrder({sort:t}),new e(l(l({},this.toDefinition()),{},{sort:t}))}},{key:"include",value:function(t){if(!Array.isArray(t))throw Error("include() takes an array of relationship names");return new e(l(l({},this.toDefinition()),{},{includes:t}))}},{key:"limitBy",value:function(t){return new e(l(l({},this.toDefinition()),{},{limit:t}))}},{key:"UNSAFE_noLimit",value:function(){return new e(l(l({},this.toDefinition()),{},{limit:null}))}},{key:"offset",value:function(t){return new e(l(l({},this.toDefinition()),{},{bookmark:void 0,cursor:void 0,skip:t}))}},{key:"offsetCursor",value:function(t){return new e(l(l({},this.toDefinition()),{},{bookmark:void 0,skip:void 0,cursor:t}))}},{key:"offsetBookmark",value:function(t){return new e(l(l({},this.toDefinition()),{},{skip:void 0,cursor:void 0,bookmark:t}))}},{key:"referencedBy",value:function(t){return new e(l(l({},this.toDefinition()),{},{referenced:t}))}},{key:"toDefinition",value:function(){return{doctype:this.doctype,id:this.id,ids:this.ids,selector:this.selector,fields:this.fields,indexedFields:this.indexedFields,partialFilter:this.partialFilter,sort:this.sort,includes:this.includes,referenced:this.referenced,limit:this.limit,skip:this.skip,cursor:this.cursor,bookmark:this.bookmark}}}]),e}();t.QueryDefinition=d,t.Q=function(e){return new d({doctype:e})},t.isAGetByIdQuery=function(e){if(!e)return!1;var t=Object.values(e);return 0!==t.length&&2===t.filter(function(e){return void 0!==e}).length&&void 0!==e.id};var f="CREATE_DOCUMENT",p="UPDATE_DOCUMENT",h="UPDATE_DOCUMENTS",m="DELETE_DOCUMENT",v="ADD_REFERENCES_TO",y="UPLOAD_FILE",b=function(e){return{mutationType:C.CREATE_DOCUMENT,document:e}};t.createDocument=b;var g=function(e){return{mutationType:C.UPDATE_DOCUMENT,document:e}};t.updateDocument=g;var x=function(e){return{mutationType:C.UPDATE_DOCUMENTS,documents:e}};t.updateDocuments=x;var w=function(e){return{mutationType:C.DELETE_DOCUMENT,document:e}};t.deleteDocument=w;var k=function(e,t){return{mutationType:C.ADD_REFERENCES_TO,referencedDocuments:t,document:e}};t.addReferencesTo=k;var O=function(e,t){return{mutationType:C.REMOVE_REFERENCES_TO,referencedDocuments:t,document:e}};t.removeReferencesTo=O;var _=function(e,t){return{mutationType:C.ADD_REFERENCED_BY,referencedDocuments:t,document:e}};t.addReferencedBy=_;var E=function(e,t){return{mutationType:C.REMOVE_REFERENCED_BY,referencedDocuments:t,document:e}};t.removeReferencedBy=E;var S=function(e,t){return{mutationType:C.UPLOAD_FILE,file:e,dirPath:t}};t.uploadFile=S,t.getDoctypeFromOperation=function(e){if(!e.mutationType)return e.doctype;var t=e.mutationType;switch(t){case f:case p:return e.document._type;case h:return e.documents[0]._type;case m:return e.document._type;case v:case y:throw Error("Not implemented");default:throw Error("Unknown mutationType ".concat(t))}},t.Mutations={createDocument:b,updateDocument:g,updateDocuments:x,deleteDocument:w,addReferencesTo:k,removeReferencesTo:O,addReferencedBy:_,removeReferencedBy:E,uploadFile:S};var C={CREATE_DOCUMENT:f,UPDATE_DOCUMENT:p,UPDATE_DOCUMENTS:h,DELETE_DOCUMENT:m,ADD_REFERENCES_TO:v,REMOVE_REFERENCES_TO:"REMOVE_REFERENCES_TO",ADD_REFERENCED_BY:"ADD_REFERENCED_BY",REMOVE_REFERENCED_BY:"REMOVE_REFERENCED_BY",UPLOAD_FILE:y};t.MutationTypes=C},20057:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(66604)),i=r(n(7739)),o=r(n(85564)),c=r(n(18446)),s=r(n(44908)),u=r(n(87185)),l=n(71450),d=function(e){var t=(0,i.default)(e,function(e){return e.id||e.ids?"idQueries":"others"}),n=t.idQueries,r=void 0===n?[]:n,a=t.others,d=r.length>0?new l.QueryDefinition({doctype:e[0].doctype,ids:(0,s.default)((0,o.default)(r.map(function(e){return e.id||e.ids})))}):[];return(0,u.default)(void 0===a?[]:a,c.default).concat(d)};t.default=function(e){var t=(0,i.default)(e,function(e){return e.doctype});return(0,o.default)(Object.values((0,a.default)(t,d)))}},10513:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.registryEndpoint=t.transformRegistryFormatToStackFormat=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(64512)),u=r(n(27361));n(35449);var l=r(n(47064)),d=n(20538);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.transformRegistryFormatToStackFormat=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:(0,u.default)(e,"latest_version.manifest.source"),attributes:(0,u.default)(e,"latest_version.manifest")},e)},t.registryEndpoint="/registry/";var p=function(e){var t=new URLSearchParams(e).toString();return t?"?".concat(t):""},h=function(e){var t=e.type,n=t===d.APP_TYPE.KONNECTOR||"node"===t?"konnectors":"apps";return"/".concat(n)},m=function(){var e,t,n;function r(e){if((0,o.default)(this,r),!e.client)throw Error("Need to pass a client to instantiate a Registry API.");this.client=e.client}return(0,c.default)(r,[{key:"installApp",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c,s,u,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.slug,i=t.terms,o={},(c=t.installed)&&(o.PermissionsAcked=c),n&&(o.Source=n),s=p(o),!i){e.next=9;break}return e.next=9,l.default.save(this.client,i);case 9:return u=t.installed?"PUT":"POST",d=h(t),e.abrupt("return",this.client.stackClient.fetchJSON(u,"".concat(d,"/").concat(r).concat(s)));case 12:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"uninstallApp",value:(t=(0,i.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slug,r=h(t),e.abrupt("return",this.client.stackClient.fetchJSON("DELETE","".concat(r,"/").concat(n)));case 3:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"fetchApps",value:(n=(0,i.default)(a.default.mark(function e(t){var n,r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channel,r=t.type,o=new URLSearchParams({limit:void 0===(i=t.limit)?"200":i,versionsChannel:n,latestChannelVersion:n}).toString(),r&&(o+="&filter[type]=".concat(r)),e.next=6,this.client.stackClient.fetchJSON("GET","/registry?".concat(o));case 6:return c=e.sent.data,e.abrupt("return",c);case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"fetchAppsInMaintenance",value:function(){return this.client.stackClient.fetchJSON("GET","/registry/maintenance")}},{key:"fetchApp",value:function(e){return this.client.stackClient.fetchJSON("GET","/registry/".concat(e))}},{key:"fetchAppVersion",value:function(e){if(!e.slug)throw Error("Need to pass a slug to use fetchAppVersion");var t=e.slug,n=e.channel,r=e.version,a=n||r&&"latest"!==r?n:"stable",i="/registry/".concat(t,"/");return a?i+="".concat(a,"/").concat(r||"latest"):i+="".concat(r),this.client.stackClient.fetchJSON("GET",i)}}]),r}();t.default=m},13820:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.persistVirtualDocuments=t.shouldDocumentBePersisted=t.shouldEnforcePersist=t.ENFORCE_LIST=void 0;var o=i(n(68434)),c=i(n(82007));function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}i(n(18621)),n(71450);var u=["io.cozy.files.shortcuts"];t.ENFORCE_LIST=u;var l=function(e){return u.includes(e.doctype)};t.shouldEnforcePersist=l;var d=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!e&&!e.cozyLocalOnly&&((null===(t=e.meta)||void 0===t||!t.rev)&&!e._rev||!!n)};t.shouldDocumentBePersisted=d;var f=(r=(0,c.default)(o.default.mark(function e(t,n,r){var a,i,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l(n),"io.cozy.apps_registry"!==n.doctype){e.next=5;break}return e.next=4,p(t,{_type:"io.cozy.apps_registry",_id:n.id,cozyPouchData:r},a);case 4:return e.abrupt("return",e.sent);case 5:if(Array.isArray(r)){e.next=10;break}return e.next=8,p(t,r,a);case 8:e.next=28;break;case 10:i=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(r.filter(function(e){return d(e,a)})),e.prev=12,i.s();case 14:if((c=i.n()).done){e.next=20;break}return u=c.value,e.next=18,p(t,u,a);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:case"end":return e.stop()}},e,null,[[12,22,25,28]])})),function(e,t,n){return r.apply(this,arguments)});t.persistVirtualDocuments=f;var p=(a=(0,c.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d(n,r)){e.next=3;break}return e.next=3,t.chain.persistCozyData(n);case 3:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)})},94158:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndMergeDocument=t.getCollectionFromSlice=t.getDocumentsFromSlice=t.getDocumentFromSlice=t.default=t.mergeDocumentsWithRelationships=void 0;var a=r(n(64512)),i=r(n(27361)),o=r(n(57557)),c=r(n(64063)),s=r(n(39560)),u=r(n(22853)),l=n(76305),d=n(71450),f=n(22249),p=n(98829);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=(0,s.default)(),y=function(e,t){var n=t._type;if(!n)throw Error("Document without _type");if(!(0,p.properId)(t))throw Error("Document without id");var r=(0,i.default)(e,[n,(0,p.properId)(t)]);return(0,c.default)(r,t)?e:m(m({},e),{},(0,a.default)({},n,m(m({},e[n]),{},(0,a.default)({},(0,p.properId)(t),b(r,t)))))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m(m({},e),t);return(e.relationships||t.relationships)&&(n.relationships=m(m({},e.relationships),t.relationships)),n};t.mergeDocumentsWithRelationships=b,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!(0,l.isReceivingData)(t)&&!(0,f.isReceivingMutationResult)(t))return e;if(t&&t.definition&&t.definition.mutationType===d.MutationTypes.DELETE_DOCUMENT){var n=t.definition.document._id,r=t.definition.document._type;return m(m({},e),{},(0,a.default)({},r,(0,o.default)(e[r],n)))}var i=t.response,c=i.data,s=i.included;if(!c||Array.isArray(c)&&0===c.length)return e;var u=s?s.reduce(y,e):e;return Array.isArray(c)?g(c,u):y(u,c)},t.getDocumentFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!t)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");if(!n)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined id");return e[t]&&e[t][n]?e[t][n]:null},t.getDocumentsFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!t)throw Error("getDocumentsFromSlice: Cannot retrieve documents with undefined doctype");if(!n||n.length<1)throw Error("getDocumentsFromSlice: Cannot retrieve documents with undefined ids");return e[t]?n.map(function(n){return e[t][n]}).filter(Boolean):[]},t.getCollectionFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");return e[t]?Object.values(e[t]):null};var g=function(e,t){var n=e[0]._type;if(!n)throw u.default.info("Document without _type",e[0]),Error("Document without _type");var r=new Map(e.map(function(e){return[(0,p.properId)(e),e]})),a=Object.assign({},t);a[n]=Object.assign({},t[n]),a[n]||(a[n]={});var i=!1;return(r.forEach(function(e,t){var r=a[n][t];r?(0,c.default)(r,e)||(a[n][t]=v(a[n][t],e),i=!0):(a[n][t]=e,i=!0)}),i)?a:t};t.extractAndMergeDocument=g},98829:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.properId=void 0,t.properId=function(e){return e.id||e._id}},65972:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"initQuery",{enumerable:!0,get:function(){return f.initQuery}}),Object.defineProperty(t,"loadQuery",{enumerable:!0,get:function(){return f.loadQuery}}),Object.defineProperty(t,"resetQuery",{enumerable:!0,get:function(){return f.resetQuery}}),Object.defineProperty(t,"receiveQueryResult",{enumerable:!0,get:function(){return f.receiveQueryResult}}),Object.defineProperty(t,"receiveQueryError",{enumerable:!0,get:function(){return f.receiveQueryError}}),Object.defineProperty(t,"executeQueryFromState",{enumerable:!0,get:function(){return f.executeQueryFromState}}),Object.defineProperty(t,"initMutation",{enumerable:!0,get:function(){return p.initMutation}}),Object.defineProperty(t,"receiveMutationResult",{enumerable:!0,get:function(){return p.receiveMutationResult}}),Object.defineProperty(t,"receiveMutationError",{enumerable:!0,get:function(){return p.receiveMutationError}}),Object.defineProperty(t,"getStateRoot",{enumerable:!0,get:function(){return h.getStateRoot}}),Object.defineProperty(t,"getCollectionFromState",{enumerable:!0,get:function(){return h.getCollectionFromState}}),Object.defineProperty(t,"getDocumentFromState",{enumerable:!0,get:function(){return h.getDocumentFromState}}),Object.defineProperty(t,"getQueryFromStore",{enumerable:!0,get:function(){return h.getQueryFromStore}}),Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return h.getQueryFromState}}),Object.defineProperty(t,"getRawQueryFromState",{enumerable:!0,get:function(){return h.getRawQueryFromState}}),Object.defineProperty(t,"isQueryExisting",{enumerable:!0,get:function(){return h.isQueryExisting}}),Object.defineProperty(t,"dispatchCreate",{enumerable:!0,get:function(){return m.dispatchCreate}}),Object.defineProperty(t,"dispatchUpdate",{enumerable:!0,get:function(){return m.dispatchUpdate}}),Object.defineProperty(t,"dispatchDelete",{enumerable:!0,get:function(){return m.dispatchDelete}}),t.resetState=t.createStore=t.default=t.StoreProxy=void 0;var i=a(n(64512)),o=a(n(65105)),c=a(n(19723)),s=a(n(71400)),u=n(98116),l=a(n(53894)),d=a(n(94158)),f=r(n(76305)),p=n(22249),h=n(76790),m=n(45330);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b="COZY_CLIENT.RESET_STATE";t.resetState=function(){return{type:b}};var g=function(){function e(t){(0,o.default)(this,e),this.state=t}return(0,c.default)(e,[{key:"readDocument",value:function(e,t){return this.state.documents[e][t]}},{key:"writeDocument",value:function(e){this.setState(function(t){return y(y({},t),{},{documents:y(y({},t.documents),{},(0,i.default)({},e._type,y(y({},t.documents[e._type]),{},(0,i.default)({},e._id,e))))})})}},{key:"setState",value:function(e){this.state=e(this.state)}},{key:"getState",value:function(){return this.state}}]),e}();t.StoreProxy=g;var x={documents:{},queries:{}},w=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,n=arguments.length>1?arguments[1]:void 0,r=e.mark("combinedReducer");if(n.type==b)return e.measure({markName:r,measureName:"".concat(r," reset"),category:"CozyClientStore"}),x;if(!(0,f.isQueryAction)(n)&&!(0,p.isMutationAction)(n))return e.measure({markName:r,measureName:"".concat(r," no query nor mutate action"),category:"CozyClientStore"}),t;if(n.update){var a=new g(t);n.update(a,n.response);var i={documents:a.getState().documents,queries:(0,f.default)(e,a.getState().queries,n,a.getState().documents)};return e.measure({markName:r,measureName:"".concat(r," update action"),category:"CozyClientStore"}),i}var o=(0,d.default)(t.documents,n),c=o!==t.documents,s={documents:o,queries:(0,f.default)(e,t.queries,n,o,c)};return e.measure({markName:r,measureName:"".concat(r," queries"),category:"CozyClientStore"}),s}};t.default=w;var k=(0,s.default)("debug")&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.compose;t.createStore=function(e){return(0,u.createStore)((0,u.combineReducers)({cozy:w(e)}),k((0,u.applyMiddleware)(l.default)))}},22249:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMutationError=t.receiveMutationResult=t.initMutation=t.isReceivingMutationResult=t.isMutationAction=void 0;var a=r(n(64512));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c="INIT_MUTATION",s="RECEIVE_MUTATION_RESULT",u="RECEIVE_MUTATION_ERROR";t.isMutationAction=function(e){return -1!==[c,s,u].indexOf(e.type)},t.isReceivingMutationResult=function(e){return e.type===s},t.initMutation=function(e,t){return{type:c,mutationId:e,definition:t}},t.receiveMutationResult=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(o({type:s,mutationId:e,response:t},n),{},{definition:r})},t.receiveMutationError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:u,mutationId:e,error:t,definition:n}}},76305:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryIDGenerator=t.getQueryFromSlice=t.resetQuery=t.receiveQueryError=t.receiveQueryResult=t.loadQuery=t.initQuery=t.default=t.updateData=t.makeSorterFromDefinition=t.executeQueryFromState=t.mergeSelectorAndPartialIndex=t.convert$gtNullSelectors=t.sortAndLimitDocsIds=t.isReceivingData=t.isQueryAction=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(90402)),c=r(n(64512)),s=r(n(98235)),u=r(n(66604)),l=r(n(7739)),d=r(n(91966)),f=r(n(25325)),p=r(n(57043)),h=r(n(68630)),m=r(n(44908)),v=r(n(75472)),y=r(n(47037)),b=r(n(27361)),g=r(n(14328)),x=r(n(71400)),w=n(94158),k=n(22249),O=n(98829),_=n(71450),E=r(n(22853)),S=n(76790);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j="INIT_QUERY",A="LOAD_QUERY",D="RECEIVE_QUERY_RESULT",T="RECEIVE_QUERY_ERROR",M="RESET_QUERY",R=(0,x.default)("debug"),I=function(e){return -1!==[j,A,D,T,M].indexOf(e.type)};t.isQueryAction=I,t.isReceivingData=function(e){return e.type===D};var N={id:null,definition:null,fetchStatus:"pending",isFetching:null,lastFetch:null,lastUpdate:null,lastErrorUpdate:null,lastError:null,hasMore:!1,count:0,fetchedPagesCount:0,data:[],bookmark:null},F=function(e,t,n,r){var a,i=r.count,o=r.fetchedPagesCount,c=(0,s.default)(n);if(e.definition.sort&&t){var u=q(e.definition),l=t[e.definition.doctype];c=u(l?c.map(function(e){return l[e]}).filter(Boolean):[]).map(O.properId)}var d=e.definition.limit;return d&&(a=i<d?o>1?d*(o-1)+i:i:d*o,c=c.slice(0,a)),c};t.sortAndLimitDocsIds=F;var z=function(e,t,n,r){var a=r.count,i=r.fetchedPagesCount,o=(0,m.default)([].concat((0,s.default)(e.data),(0,s.default)(t.data.map(O.properId))));return F(e,n,o,{count:a,fetchedPagesCount:i})},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;switch(n.type){case j:if(t.lastUpdate&&t.id===n.queryId&&t.definition===n.queryDefinition)return t;return P(P({},t),{},{id:n.queryId,definition:n.queryDefinition,options:n.options,fetchStatus:t.lastUpdate?t.fetchStatus:"pending"});case A:if("loading"===t.fetchStatus)return t;if("loaded"===t.fetchStatus&&n.backgroundFetching)return P(P({},t),{},{fetchStatus:"loaded",isFetching:!0});return P(P({},t),{},{fetchStatus:"loading"});case D:var a=e.mark("RECEIVE_QUERY_RESULT"),i=n.response;if(!i.data)return e.measure({markName:a,measureName:"".concat(a," with no data"),category:"CozyClientStore"}),P(P({},t),{},{fetchStatus:"loaded",isFetching:!n.backgroundFetching&&null,lastFetch:Date.now(),lastUpdate:Date.now()});var o=P({fetchStatus:"loaded",isFetching:!n.backgroundFetching&&null,lastFetch:Date.now(),lastUpdate:Date.now()},R&&{execution_stats:i.execution_stats});if(!Array.isArray(i.data))return e.measure({markName:a,measureName:"".concat(a," with object"),category:"CozyClientStore"}),P(P(P({},t),o),{},{hasMore:!1,count:1,data:[(0,O.properId)(i.data)]});var c=i.meta&&i.meta.count?i.meta.count:i.data.length;if(n.backgroundFetching)return e.measure({markName:a,measureName:"".concat(a," with background fetching"),category:"CozyClientStore"}),P(P(P({},t),o),{},{bookmark:i.bookmark||null,hasMore:void 0!==i.next?i.next:t.hasMore,count:c,data:i.data.map(O.properId)});var s=t.fetchedPagesCount+1,u=z(t,i,r,{count:c,fetchedPagesCount:s});return e.measure({markName:a,measureName:"".concat(a," default"),category:"CozyClientStore"}),P(P(P({},t),o),{},{bookmark:i.bookmark||null,hasMore:void 0!==i.next?i.next:t.hasMore,count:c,fetchedPagesCount:s,data:u});case T:return P(P({},t),{},{id:n.queryId,fetchStatus:"failed",isFetching:!n.backgroundFetching&&null,lastError:n.error,lastErrorUpdate:Date.now()});case M:return P(P({},N),{},{id:n.queryId,definition:t.definition,options:t.options});default:return t}},B=function e(t){for(var n={},r=0,a=Object.entries(t);r<a.length;r++){var i=(0,o.default)(a[r],2),c=i[0],s=i[1],u=(0,h.default)(s)?e(s):s;n["$gt"===c&&null===u?"$gtnull":c]=u}return n};t.convert$gtNullSelectors=B;var U=function(e){return P(P({},(0,b.default)(e,"selector")),(0,b.default)(e,"partialFilter"))};t.mergeSelectorAndPartialIndex=U;var H=function(e){if(e.selector||e.partialFilter){var t=U(e);return g.default.use({$gtnull:function(e,t){return!!t}}),(0,g.default)(B(t))}if(e.id){var n={_id:e.id};return(0,g.default)(n)}if(!e.ids)return null;var r={_id:{$in:e.ids}};return(0,g.default)(r)};t.executeQueryFromState=function(e,t){var n,r=!!t.id;if(t.id){var a=(0,S.getDocumentFromState)(e,t.doctype,t.id);n=a?[a]:[]}else if(t.ids)n=(0,S.getDocumentsFromState)(e,t.doctype,t.ids);else{var i=(0,S.getCollectionFromState)(e,t.doctype);n=null==i?void 0:i.filter(G(t))}return!n||n.length<1?{data:r?null:[]}:r?{data:n[0]}:{data:q(t)(n)}};var G=function(e){var t=e.doctype,n=H(e);return function(e){return e._type===t&&!e._deleted&&(!n||!!n(e))}},W=function(e){return function(t){var n=(0,b.default)(t,e);return(0,y.default)(n)?n.toLowerCase():n}},q=function(e){var t=e.sort;if(!t)return function(e){return e};if(!Array.isArray(e.sort))return E.default.warn("Correct update of queries with a sort that is not an array is not supported. Use an array as argument of QueryDefinition::sort"),function(e){return e};var n=t.map(function(e){return Object.entries(e)[0]}),r=n.map(function(e){return e[0]}).map(W),a=n.map(function(e){return e[1]});return function(e){return(0,v.default)(e,r,a)}};t.makeSorterFromDefinition=q;var V=function(e,t,n){var r=G(e.definition),a=(0,u.default)((0,l.default)(t,r),function(e){return e.map(O.properId)}),i=a.true,o=void 0===i?[]:i,c=a.false,s=e.data,h=e.options&&e.options.autoUpdate,m=!h||!1!==h.remove,v=!h||!1!==h.add,y=!h||!1!==h.update,b=m?(0,f.default)(s,void 0===c?[]:c):[],g=v?(0,d.default)(o,s):[],x=y?(0,f.default)(s,o):[],w=b.length||g.length||x.length,k=(0,d.default)((0,p.default)(s,g),b),_=e.fetchedPagesCount,E=F(e,n,k,{count:k.length,fetchedPagesCount:_});return P(P({},e),{},{data:E,count:E.length,fetchedPagesCount:_,lastUpdate:w?Date.now():e.lastUpdate})};t.updateData=V;var Q=function(e,t){return function(n){var r=(0,b.default)(e,"response.data")||(0,b.default)(e,"definition.document");return r&&(Array.isArray(r)||(r=[r]),r.length&&n.definition.doctype===r[0]._type)?V(n,r,t):n}};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if(n.type==j){var i=L(e,t[n.queryId],n,r);return i===t[n.queryId]?t:P(P({},t),{},(0,c.default)({},n.queryId,i))}if(I(n)){var o=Q(n,r);return(0,u.default)(t,function(t){return t.id==n.queryId?L(e,t,n,r):a?o(t):t})}if((0,k.isReceivingMutationResult)(n)){var s=n.updateQueries?function(e){var t=n.updateQueries,a=n.response,i=t[e.id];if(!i)return e;var o=i(Z(r,e.definition.doctype,e.data),a).map(O.properId);return P(P({},e),{},{data:o,count:o.length,lastUpdate:Date.now()})}:Q(n,r);return(0,u.default)(t,s)}return t},t.initQuery=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.doctype)throw Error("Cannot init query with no doctype");return{type:j,queryId:e,queryDefinition:t,options:n}},t.loadQuery=function(e,t){return P({type:A,queryId:e},t)},t.receiveQueryResult=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P({type:D,queryId:e,response:t},n)},t.receiveQueryError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P({type:T,queryId:e,error:t},n)},t.resetQuery=function(e){return{type:M,queryId:e}};var Z=function(e,t,n){return n.map(function(n){return(0,w.getDocumentFromSlice)(e,t,n)})};t.getQueryFromSlice=function(e,t,n){if(!e||!e[t])return P(P({},N),{},{id:t,data:null});var r=e[t];return n?P(P({},r),{},{data:Z(n,r.definition.doctype,r.data)}):r};var Y=function(){function e(){(0,a.default)(this,e),this.idCounter=1}return(0,i.default)(e,[{key:"generateRandomId",value:function(){var e=this.idCounter;return this.idCounter++,e.toString()}},{key:"generateId",value:function(e){if(!(0,_.isAGetByIdQuery)(e))return this.generateRandomId();var t=e.id,n=e.doctype;return"".concat(n,"/").concat(t)}}]),e}();t.QueryIDGenerator=Y,Y.UNNAMED="unnamed"},45330:function(e,t,n){"use strict";var r,a,i,o,c=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchDelete=t.dispatchUpdate=t.dispatchCreate=void 0;var s=c(n(68434)),u=c(n(82007)),l=c(n(64512)),d=n(71450),f=n(22249);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e,t){return h({id:e._id,_type:t},e)},v=(r=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof n.enhanceDocFn){e.next=4;break}return e.next=3,n.enhanceDocFn(t,{client:n.client});case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),y=function(e,t,n){e.dispatch((0,f.receiveMutationResult)(e.generateRandomId(),{data:t},{},n(t)))},b=(a=(0,u.default)(s.default.mark(function e(t,n,r){var a,i,o=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=m(r,n),e.next=4,v(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.createDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)});t.dispatchCreate=b;var g=(i=(0,u.default)(s.default.mark(function e(t,n,r){var a,i,o=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=m(r,n),e.next=4,v(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.updateDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)});t.dispatchUpdate=g;var x=(o=(0,u.default)(s.default.mark(function e(t,n,r){var a,i,o=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=m(h(h({},r),{},{_deleted:!0}),n),e.next=4,v(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.deleteDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return o.apply(this,arguments)});t.dispatchDelete=x},76790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryExisting=t.getRawQueryFromState=t.getQueryFromState=t.getQueryFromStore=t.getDocumentsFromState=t.getDocumentFromState=t.getCollectionFromState=t.getStateRoot=void 0;var r=n(94158),a=n(76305),i=function(e){return e.cozy||{}};t.getStateRoot=i,t.getCollectionFromState=function(e,t){return(0,r.getCollectionFromSlice)(i(e).documents,t)},t.getDocumentFromState=function(e,t,n){return(0,r.getDocumentFromSlice)(i(e).documents,t,n)},t.getDocumentsFromState=function(e,t,n){return(0,r.getDocumentsFromSlice)(i(e).documents,t,n)},t.getQueryFromStore=function(e,t){return o(e.getState(),t)};var o=function(e,t){return(0,a.getQueryFromSlice)(i(e).queries,t,i(e).documents)};t.getQueryFromState=o,t.getRawQueryFromState=function(e,t){return(0,a.getQueryFromSlice)(i(e).queries,t)},t.isQueryExisting=function(e,t){return void 0!==i(e).queries[t]}},47064:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(64512)),o=r(n(80295)),c=r(n(82007));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l="io.cozy.terms";function d(){return(d=(0,c.default)(a.default.mark(function e(t,n){var r,i,c,s,d,f;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=(0,o.default)(n,["id"]),e.next=3,t.query({doctype:l,selector:{termsId:r,version:i.version},limit:1});case 3:if(!((c=e.sent.data)&&c.length)){e.next=13;break}if((s=c[0]).termsId!=r||s.version!=i.version||s.url==i.url){e.next=11;break}return d=u(u({_type:l},s),{},{url:i.url}),e.next=11,t.save(d);case 11:e.next=16;break;case 13:return f=u(u({_type:l},i),{},{termsId:r,accepted:!0,acceptedAt:new Date}),e.next=16,t.save(f);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.default={save:function(e,t){return d.apply(this,arguments)}}},325:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.CozyClient=void 0;var a=r(n(25665)),i=r(n(27952)),o=r(n(12323)),c=r(n(65105)),s=function(e){(0,a.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,o.default)(r);return e=t?Reflect.construct(n,arguments,(0,o.default)(this).constructor):n.apply(this,arguments),(0,i.default)(this,e)});function r(){return(0,c.default)(this,r),n.apply(this,arguments)}return r}(function e(t){(0,c.default)(this,e),Object.assign(this,t)});t.CozyClient=s},41315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(71450),t.default={}},88930:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeOfflineError=t.hasQueriesBeenLoaded=t.isQueriesLoading=t.hasQueryBeenLoaded=t.isQueryLoading=t.cancelable=void 0;var a=r(n(22853));t.cancelable=function(e){var t,n=new Promise(function(n,r){t=r,e.then(n),e.catch(r)});return n.cancel=function(){t({canceled:!0})},n};var i=function(e){return e?"loading"===e.fetchStatus||"pending"===e.fetchStatus:(a.default.warn("isQueryLoading called on falsy value."),!1)};t.isQueryLoading=i;var o=function(e){return e.lastFetch};t.hasQueryBeenLoaded=o,t.isQueriesLoading=function(e){return Object.values(e).some(function(e){return i(e)})},t.hasQueriesBeenLoaded=function(e){return Object.values(e).some(function(e){return o(e)})},t.isReactNativeOfflineError=function(e){return"Network request failed"===e.message}},43592:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(95297)),o=a(n(65105)),c=a(n(19723)),s=a(n(8997)),u=a(n(25665)),l=a(n(27952)),d=a(n(12323)),f=a(n(64512)),p=r(n(67294)),h=a(n(45697));t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.displayName||n.name||"Component",a=function(a){(0,u.default)(v,a);var h,m=(h=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,d.default)(v);return e=h?Reflect.construct(t,arguments,(0,d.default)(this).constructor):t.apply(this,arguments),(0,l.default)(this,e)});function v(n,a){var i;if((0,o.default)(this,v),i=m.call(this,n,a),(0,f.default)((0,s.default)(i),"mutate",function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return i.client.mutate(e.apply(null,r),t)}),i.client=n.client||a.client,!i.client)throw Error('Could not find "client" in either the context or props of '.concat(r));return i}return(0,c.default)(v,[{key:"render",value:function(){var e=(0,f.default)({},t.name||"mutate",this.mutate);return p.default.createElement(n,(0,i.default)({},e,this.props))}}]),v}(p.Component);return(0,f.default)(a,"contextTypes",{client:h.default.object}),a.displayName="WithMutation(".concat(r,")"),a}}},18428:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(95297)),o=a(n(65105)),c=a(n(19723)),s=a(n(25665)),u=a(n(27952)),l=a(n(12323)),d=a(n(64512)),f=a(n(98235)),p=a(n(82492)),h=r(n(67294)),m=a(n(45697)),v=a(n(22853));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=e.displayName||e.name||"Component",r=function(r){(0,s.default)(b,r);var a,m=(a=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,l.default)(b);return e=a?Reflect.construct(t,arguments,(0,l.default)(this).constructor):t.apply(this,arguments),(0,u.default)(this,e)});function b(e,r){(0,o.default)(this,b),a=m.call(this,e,r);var a,i=e.client||r.client;if(v.default.warn("Deprecation: withMutations will be removed in the near future, prefer to use withClient to access the client. See https://github.com/cozy/cozy-client/pull/638 for more information."),!i)throw Error('Could not find "client" in either the context or props of '.concat(n));return a.mutations=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({createDocument:i.create.bind(i),saveDocument:i.save.bind(i),deleteDocument:i.destroy.bind(i)},p.default.apply(void 0,(0,f.default)(t.map(function(t){return"function"==typeof t?t(i,e):t})))),a}return(0,c.default)(b,[{key:"render",value:function(){return h.default.createElement(e,(0,i.default)({},this.mutations,this.props))}}]),b}(h.Component);return(0,d.default)(r,"contextTypes",{client:m.default.object}),r.displayName="WithMutations(".concat(n,")"),r}}},21896:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useDataProxy=t.DataProxyProvider=t.DataProxyContext=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=h(n(72802)),s=h(n(67294)),u=n(16396),l=n(25976),d=r(n(71400)),f=n(22960);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}var m=(0,r(n(74450)).default)("\uD83D\uDC77‍♂️ [DataProxyProvider]"),v=s.default.createContext();t.DataProxyContext=v,t.useDataProxy=function(){var e=(0,s.useContext)(v);if(!e)throw Error("useDataProxy must be used within a DataProxyProvider");return e};var y=s.default.memo(function(e){var t,n=e.children,r=e.options,p=void 0===r?{}:r,h=(0,u.useClient)(),y=(0,f.useWebviewIntent)(),b=(0,s.useState)(),g=(0,o.default)(b,2),x=g[0],w=g[1],k=(0,s.useState)(),O=(0,o.default)(k,2),_=O[0],E=O[1],S=(0,s.useState)(void 0),C=(0,o.default)(S,2),P=C[0],j=C[1];(0,s.useEffect)(function(){if(h){var e,t,n=(e=(0,i.default)(a.default.mark(function e(){var t,n,r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m.log("Initializing DataProxy intent"),e.next=4,h.stackClient.fetchJSON("POST","/intents",{data:{type:"io.cozy.intents",attributes:{action:"OPEN",type:"io.cozy.dataproxy",permissions:["GET"]}}});case 4:if(null!==(t=(c=e.sent).data)&&void 0!==t&&null!==(n=t.attributes)&&void 0!==n&&null!==(r=n.services)&&void 0!==r&&null!==(i=r[0])&&void 0!==i&&i.href){e.next=9;break}return m.log("No dataproxy intent available, dataproxy features will be disabled"),j(!1),e.abrupt("return");case 9:w(null===(o=c.data.attributes.services[0])||void 0===o?void 0:o.href),j(!0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),j(!1),m.error("Error while initializing Search intent, dataproxy features will be disabled",e.t0);case 17:case"end":return e.stop()}},e,null,[[0,13]])})),function(){return e.apply(this,arguments)}),r=(t=(0,i.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return");case 3:return m.log("Initializing DataProxy intent in Flagship app"),e.next=6,y.call("isAvailable","search");case 6:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=10;break}e.t0=void 0!==t;case 10:if(!e.t0){e.next=14;break}e.t2=t,e.next=15;break;case 14:e.t2=!1;case 15:if(n=e.t2){e.next=20;break}return m.log("Dataproxy features will be disabled due to feature not supported by Flagship app"),j(!1),e.abrupt("return");case 20:E(function(){return{search:function(e,t){return null==y?void 0:y.call("search",e,t)}}}),j(n),e.next=28;break;case 24:e.prev=24,e.t3=e.catch(0),j(!1),m.error("Error while initializing Flagship's Search, dataproxy features will be disabled",e.t3);case 28:case"end":return e.stop()}},e,null,[[0,24]])})),function(){return t.apply(this,arguments)});if(!(0,d.default)("cozy.search.enabled")){m.log("Dataproxy features will be disabled due to missing feature flags"),j(!1);return}(0,l.isFlagshipApp)()?r():n()}},[h,y]);var A=(t=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.log("Send search query to DataProxy"),e.next=3,_.search(t,p);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});return s.default.createElement(v.Provider,{value:{dataProxyServicesAvailable:P,search:A}},n,x?s.default.createElement("iframe",{id:"DataProxy",src:x,width:0,height:0,style:{width:0,height:0},sandbox:"allow-same-origin allow-scripts",onLoad:function(){var e=document.getElementById("DataProxy"),t=c.wrap(c.windowEndpoint(e.contentWindow));E(function(){return t})}}):void 0)});t.DataProxyProvider=y,y.displayName="DataProxyProvider"},28802:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DataProxyProvider",{enumerable:!0,get:function(){return a.DataProxyProvider}}),Object.defineProperty(t,"SearchEngine",{enumerable:!0,get:function(){return r.SearchEngine}}),Object.defineProperty(t,"useDataProxy",{enumerable:!0,get:function(){return a.useDataProxy}});var r=n(42776),a=n(21896)},42776:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.SearchEngine=void 0;var a=r(n(68434)),i=r(n(98235)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=r(n(64512)),l=n(16396),d=r(n(74450)),f=n(72916),p=n(13542),h=n(9183),m=n(15146),v=n(43051),y=n(35585),b=n(85715),g=n(56051);function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,u.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _=(0,d.default)("\uD83D\uDDC2️ [Indexing]"),E=function(){var e,t,n,r,d,w,k,E;function S(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,c.default)(this,S),(0,u.default)(this,"client",void 0),(0,u.default)(this,"searchIndexes",void 0),(0,u.default)(this,"debouncedReplication",void 0),(0,u.default)(this,"isLocalSearch",void 0),(0,u.default)(this,"storage",void 0),(0,u.default)(this,"performanceApi",void 0),(0,u.default)(this,"engineOptions",void 0),this.client=e,this.searchIndexes={},this.storage=t,this.performanceApi=null!=n?n:l.defaultPerformanceApi,this.engineOptions=O({shouldInit:!0},a),this.isLocalSearch=!!(0,h.getPouchLink)(this.client),_.info("Use local data on trusted device: ",this.isLocalSearch),this.debouncedReplication=function(){var t=(0,h.getPouchLink)(e);t&&t.startReplicationWithDebounce()},this.client.isLogged?this.afterLogin():this.client.on("login",function(){r.afterLogin()})}return(0,s.default)(S,[{key:"afterLogin",value:function(){this.engineOptions.shouldInit&&this.init(),this.handleReplicationEvents()}},{key:"indexDocumentsAtInit",value:(e=(0,o.default)(a.default.mark(function e(){var t,n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client){e.next=2;break}return e.abrupt("return");case 2:return _.info("Initialize indexes..."),t=this.performanceApi.mark("indexDocuments"),e.next=6,(0,b.getExportDate)(this.storage);case 6:if(!(!e.sent||!this.isLocalSearch)){e.next=29;break}n=x(p.SEARCHABLE_DOCTYPES),e.prev=9,n.s();case 11:if((r=n.n()).done){e.next=19;break}return i=r.value,e.next=15,this.indexDocsForSearch(i);case 15:(o=e.sent)&&(this.searchIndexes[i]=o);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),n.e(e.t0);case 24:return e.prev=24,n.f(),e.finish(24);case 27:e.next=31;break;case 29:return e.next=31,this.initSearchWithIndexImport();case 31:this.performanceApi.measure({markName:t,category:"Search"});case 32:case"end":return e.stop()}},e,this,[[9,21,24,27]])})),function(){return e.apply(this,arguments)})},{key:"handleReplicationEvents",value:function(){var e,t=this;if(this.isLocalSearch){var n=0,r=0;this.client.on("pouchlink:doctypesync:end",(e=(0,o.default)(a.default.mark(function e(n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,g.isSearchedDoctype)(n)&&t.searchIndexes[n])){e.next=5;break}return e.next=3,t.indexDocsForSearch(n);case 3:(r=e.sent)&&(t.searchIndexes[n]=r);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})),this.client.on("pouchlink:sync:start",function(){_.debug("Started pouch replication"),n=performance.now()}),this.client.on("pouchlink:sync:end",(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.debug("Ended pouch replication"),r=performance.now(),n>0&&_.debug("Replication took ".concat((r-n).toFixed(2)," ms")),!(Object.keys(t.searchIndexes).length<1)){e.next=7;break}return _.info("No search index found: start indexing"),e.next=7,t.indexDocumentsAtInit();case 7:(0,b.exportSearchIndexes)(t.storage,t.searchIndexes);case 8:case"end":return e.stop()}},e)})))}}},{key:"init",value:(t=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.client.plugins[f.RealtimePlugin.pluginName]||this.client.registerPlugin(f.RealtimePlugin,{}),this.handleUpdatedOrCreatedDoc=this.handleUpdatedOrCreatedDoc.bind(this),this.handleDeletedDoc=this.handleDeletedDoc.bind(this),this.subscribeDoctype(this.client,p.FILES_DOCTYPE),this.subscribeDoctype(this.client,p.CONTACTS_DOCTYPE),this.subscribeDoctype(this.client,p.APPS_DOCTYPE),e.next=8,this.indexDocumentsAtInit();case 8:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"subscribeDoctype",value:function(e,t){var n=e.plugins.realtime;n.subscribe("created",t,this.handleUpdatedOrCreatedDoc),n.subscribe("updated",t,this.handleUpdatedOrCreatedDoc),n.subscribe("deleted",t,this.handleDeletedDoc)}},{key:"handleUpdatedOrCreatedDoc",value:function(e){var t,n=e._type;if((0,g.isSearchedDoctype)(n)){var r=null===(t=this.searchIndexes)||void 0===t?void 0:t[n];r&&(_.debug("[REALTIME] Update doc from index after update : ",e._id),(0,v.indexSingleDoc)(this.client,r.index,e),this.isLocalSearch&&this.debouncedReplication())}}},{key:"handleDeletedDoc",value:function(e){var t,n=e._type;(0,g.isSearchedDoctype)(n)&&(null===(t=this.searchIndexes)||void 0===t?void 0:t[n])&&(_.debug("[REALTIME] Remove doc from index after update : ",e._id),this.searchIndexes[n].index.remove(e._id),this.isLocalSearch&&this.debouncedReplication())}},{key:"initSearchWithIndexImport",value:(n=(0,o.default)(a.default.mark(function e(){var t,n,r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=performance.now(),e.next=3,(0,b.importSearchIndexes)(this.storage);case 3:this.searchIndexes=e.sent,n=performance.now(),_.debug("Index import took ".concat((n-t).toFixed(2)," ms")),r=x(p.SEARCHABLE_DOCTYPES),e.prev=7,r.s();case 9:if((i=r.n()).done){e.next=22;break}if(o=i.value,this.searchIndexes[o]){e.next=17;break}return e.next=15,this.indexDocsForSearch(o);case 15:(c=e.sent)&&(this.searchIndexes[o]=c);case 17:return e.next=19,(0,v.indexOnChanges)(this,this.searchIndexes[o],o);case 19:(0,v.initDoctypeAfterIndexImport)(this.client,o);case 20:e.next=9;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(7),r.e(e.t0);case 27:return e.prev=27,r.f(),e.finish(27);case 30:case"end":return e.stop()}},e,this,[[7,24,27,30]])})),function(){return n.apply(this,arguments)})},{key:"buildSearchIndex",value:function(e,t){var n=performance.now(),r=(0,v.initSearchIndex)(e);(0,v.indexAllDocs)(r,t,this.isLocalSearch);var a=performance.now();return _.debug("Create ".concat(e," index took ").concat((a-n).toFixed(2)," ms")),r}},{key:"getLocalLastSeq",value:(r=(0,o.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLocalSearch){e.next=11;break}if(!(n=(0,h.getPouchLink)(this.client))){e.next=8;break}return e.next=5,n.getDbInfo(t);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=null;case 9:return r=e.t0,e.abrupt("return",(null==r?void 0:r.update_seq)||0);case 11:return e.abrupt("return",-1);case 12:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"initialIndexation",value:(d=(0,o.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.queryLocalOrRemoteDocs)(this.client,t,{isLocalSearch:this.isLocalSearch});case 2:if(!((n=e.sent).length<1)){e.next=5;break}return e.abrupt("return",null);case 5:return r=this.buildSearchIndex(t,n),e.next=8,this.getLocalLastSeq(t);case 8:return i=e.sent,this.searchIndexes[t]={index:r,lastSeq:i,lastUpdated:new Date().toISOString()},e.abrupt("return",this.searchIndexes[t]);case 11:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"incrementalIndexation",value:(w=(0,o.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,v.indexOnChanges)(this,n,t));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return w.apply(this,arguments)})},{key:"indexDocsForSearch",value:(k=(0,o.default)(a.default.mark(function e(t){var n,r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.performanceApi.mark("indexDocsForSearch ".concat(t)),r=this.searchIndexes[t],i=performance.now(),r){e.next=12;break}return e.next=6,this.initialIndexation(t);case 6:if(o=e.sent){e.next=10;break}return this.performanceApi.measure({markName:n,measureName:"".concat(n," initial indexation"),category:"Search"}),e.abrupt("return",null);case 10:e.next=15;break;case 12:return e.next=14,this.incrementalIndexation(t,r);case 14:o=e.sent;case 15:return c=performance.now(),_.debug("Indexing ".concat(t," took ").concat((c-i).toFixed(2)," ms")),this.performanceApi.measure({markName:n,measureName:"".concat(n," incremental indexation"),category:"Search"}),e.abrupt("return",o);case 19:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"search",value:(E=(0,o.default)(a.default.mark(function e(t,n){var r,i,o,c,s,u,l,d,f,p,h,v;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.searchIndexes||Object.keys(this.searchIndexes).length<1)){e.next=3;break}return _.warn("[SEARCH] No search index available"),e.abrupt("return",null);case 3:return r=this.performanceApi.mark("search"),i=this.searchOnIndexes(t,null==n?void 0:n.doctypes),o=this.deduplicateAndFlatten(i),e.next=8,(0,m.enrichResultsWithDocs)(this.client,o);case 8:c=e.sent,s=this.sortSearchResults(c,null==n?void 0:n.doctypes),u=this.limitSearchResults(s),l=[],d=x(u);try{for(d.s();!(f=d.n()).done;)p=f.value,h=(0,m.normalizeSearchResult)(this.client,p,t),l.push(h)}catch(e){d.e(e)}finally{d.f()}return v=l.filter(function(e){return e.title}),this.performanceApi.measure({markName:r,category:"Search"}),e.abrupt("return",v);case 17:case"end":return e.stop()}},e,this)})),function(e,t){return E.apply(this,arguments)})},{key:"searchOnIndexes",value:function(e,t){var n=this,r=[],a=function(a){if(t&&!t.includes(a))return"continue";var i=n.searchIndexes[a];if(!i)return _.warn("[SEARCH] No search index available for ",a),"continue";var o=i.index.search(e,1e4,{limit:1e4,enrich:!1}).map(function(e){return O(O({},e),{},{doctype:a})});r=r.concat(o)};for(var i in this.searchIndexes)if("continue"===a(i))continue;return r}},{key:"deduplicateAndFlatten",value:function(e){var t=e.flatMap(function(e){return e.result.map(function(t){return{id:t.toString(),doctype:e.doctype,field:e.field}})}),n=new Map;return t.forEach(function(e){var t,r=e.id,a=e.field,i=e.doctype;n.has(r)?null===(t=n.get(r))||void 0===t||t.fields.push(a):n.set(r,{id:r,fields:[a],doctype:i})}),(0,i.default)(n.values())}},{key:"compareStrings",value:function(e,t){return e||t?e?t?e.localeCompare(t,void 0,{numeric:!0}):-1:1:0}},{key:"sortSearchResults",value:function(e,t){var n=this;return e.sort(function(e,r){var a,i,o,c,s;return 0!=(a=t?t.findIndex(function(t){return t===e.doctype})-t.findIndex(function(e){return e===r.doctype}):p.DOCTYPE_DEFAULT_ORDER[e.doctype]-p.DOCTYPE_DEFAULT_ORDER[r.doctype])?a:e.doctype===p.APPS_DOCTYPE&&(0,g.isIOCozyApp)(e.doc)&&(0,g.isIOCozyApp)(r.doc)?n.compareStrings(null===(i=e.doc)||void 0===i?void 0:i.slug,null===(o=r.doc)||void 0===o?void 0:o.slug):e.doctype===p.CONTACTS_DOCTYPE&&(0,g.isIOCozyContact)(e.doc)&&(0,g.isIOCozyContact)(r.doc)?n.compareStrings(null===(c=e.doc)||void 0===c?void 0:c.displayName,null===(s=r.doc)||void 0===s?void 0:s.displayName):e.doctype===p.FILES_DOCTYPE&&(0,g.isIOCozyFile)(e.doc)&&(0,g.isIOCozyFile)(r.doc)?n.sortFiles(e,r):0})}},{key:"sortFiles",value:function(e,t){var n,r;return(0,g.isIOCozyFile)(e.doc)&&(0,g.isIOCozyFile)(t.doc)?e.fields.includes("name")&&t.fields.includes("name")?e.doc.type!==t.doc.type?"directory"===e.doc.type?-1:1:this.compareStrings(null===(n=e.doc)||void 0===n?void 0:n.name,null===(r=t.doc)||void 0===r?void 0:r.name):e.fields.includes("name")?-1:1:0}},{key:"limitSearchResults",value:function(e){var t={};return e.filter(function(e){var n=e.doctype;return t[n]?t[n]+=1:t[n]=1,t[n]<=p.LIMIT_DOCTYPE_SEARCH})}}]),S}();t.SearchEngine=E},13542:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_FILE=t.TYPE_DIRECTORY=t.TRASH_DIR_ID=t.SHARED_DRIVES_DIR_ID=t.SEARCH_SCHEMA=t.SEARCHABLE_DOCTYPES=t.ROOT_DIR_ID=t.MIN_DELAY_BEFORE_EXPORT=t.LIMIT_DOCTYPE_SEARCH=t.FILES_DOCTYPE=t.DOCTYPE_DEFAULT_ORDER=t.DATAPROXY_STORAGE_PREFIX=t.CONTACTS_DOCTYPE=t.APPS_DOCTYPE=void 0;var i=a(n(64512));t.SEARCHABLE_DOCTYPES=["io.cozy.files","io.cozy.contacts","io.cozy.apps"],t.SEARCH_SCHEMA={"io.cozy.files":["name","path"],"io.cozy.contacts":["displayName","fullname","email[]:address","address[]:formattedAddress","phone[]:number","cozy[]:url","birthday","company","jobTitle"],"io.cozy.apps":["slug","name"]};var o="io.cozy.files";t.FILES_DOCTYPE=o;var c="io.cozy.contacts";t.CONTACTS_DOCTYPE=c;var s="io.cozy.apps";t.APPS_DOCTYPE=s,t.TYPE_DIRECTORY="directory",t.TYPE_FILE="file",t.ROOT_DIR_ID="io.cozy.files.root-dir",t.TRASH_DIR_ID="io.cozy.files.trash-dir",t.SHARED_DRIVES_DIR_ID="io.cozy.files.shared-drives-dir",t.LIMIT_DOCTYPE_SEARCH=100;var u=(r={},(0,i.default)(r,s,0),(0,i.default)(r,c,1),(0,i.default)(r,o,2),r);t.DOCTYPE_DEFAULT_ORDER=u,t.DATAPROXY_STORAGE_PREFIX="@dataproxy",t.MIN_DELAY_BEFORE_EXPORT=3e5},9183:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getPouchLink=void 0;var a=r(n(70999));t.getPouchLink=function(e){return e&&e.links.find(function(e){return e instanceof a.default})||null}},48489:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.setFilePaths=t.resetAllPaths=t.getFilePath=t.computeFileFullpath=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(64512)),s=a(n(98235)),u=n(13542),l=n(35585),d=n(56051);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=new Map,m=function(e){return e?h.get(e):void 0};t.getFilePath=m;var v=function(e,t){h.set(e,t)};t.resetAllPaths=function(){h.clear()},t.setFilePaths=function(e){var t=(0,s.default)(e),n=t.filter(function(e){return(0,d.isIOCozyFile)(e)});return n.length>0?(n.forEach(function(e){e.type===u.TYPE_DIRECTORY&&v(e._id,e.path||"")}),n.map(function(e){if(e.type===u.TYPE_FILE){var t=m(e.dir_id),n=t?"".concat(t,"/").concat(e.name):"";return v(e._id,n),p(p({},e),{},{path:n})}return e})):t};var y=(r=(0,o.default)(i.default.mark(function e(t,n){var r,a,o,c,s,d,f,h;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.type!==u.TYPE_DIRECTORY){e.next=2;break}return e.abrupt("return",n);case 2:if(!n.path){e.next=7;break}if(!(null!==(r=n.path)&&void 0!==r&&r.includes(n.name))){e.next=5;break}return e.abrupt("return",n);case 5:return a="".concat(n.path,"/").concat(n.name),e.abrupt("return",p(p({},n),{},{path:a}));case 7:if(!(o=m(n._id))){e.next=10;break}return e.abrupt("return",p(p({},n),{},{path:o}));case 10:if(!(c=m(n.dir_id))){e.next=15;break}return s="".concat(c,"/").concat(n.name),v(n._id,s),e.abrupt("return",p(p({},n),{},{path:s}));case 15:return d=p({},n),e.next=18,(0,l.queryDocById)(t,u.FILES_DOCTYPE,n.dir_id);case 18:return null!=(f=e.sent)&&f.path&&(h="".concat(f.path,"/").concat(n.name),d.path=h,v(n.dir_id,f.path),v(n._id,h)),e.abrupt("return",d);case 21:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.computeFileFullpath=y},11020:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSearchEncoder=void 0;var r=n(1465);t.getSearchEncoder=function(){return r.encode}},29315:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldKeepFile=t.normalizeFileWithFolders=void 0;var a=r(n(64512)),i=n(13542);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.normalizeFileWithFolders=function(e,t){var n,r=t.type===i.TYPE_DIRECTORY,a="";if(r)a=null!==(n=t.path)&&void 0!==n?n:"";else{var o=e.find(function(e){return e._id===t.dir_id});a=o&&o.path?o.path:""}return c(c({},t),{},{_type:"io.cozy.files",path:a})},t.shouldKeepFile=function(e){var t,n=!e.trashed&&!/^\/\.cozy_trash/.test(null!==(t=e.path)&&void 0!==t?t:""),r=e._id!==i.ROOT_DIR_ID,a=e._id!==i.SHARED_DRIVES_DIR_ID;return n&&r&&a}},15146:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSearchResult=t.getCleanedFilePath=t.enrichResultsWithDocs=void 0;var i=a(n(68434)),o=a(n(98235)),c=a(n(82007)),s=a(n(64512)),u=n(16396),l=a(n(74450)),d=n(48489),f=n(13542),p=n(35585),h=n(56051);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=(0,l.default)("\uD83D\uDDC2️ [Indexing]");t.normalizeSearchResult=function(e,t,n){var r=g(t.doc),a=k(e,r),i=O(e,r,a),o=_(e,r,i),c=x(r),s=w(e,{fields:t.fields,doc:r,query:n});return{doc:r,slug:a,title:c,subTitle:s,url:i,secondaryUrl:o}};var g=function(e){if(!(0,h.isIOCozyFile)(e))return e;var t=e.path?e.path:(0,d.getFilePath)(e._id);if(!t)return b.warn("No path found for ".concat(e._id,"}")),e;var n=t;return t.endsWith("/".concat(e.name))&&(n=t.slice(0,-e.name.length-1)),y(y({},e),{},{path:n})};t.getCleanedFilePath=g;var x=function(e){return(0,h.isIOCozyFile)(e)?e.name:(0,h.isIOCozyContact)(e)?e.displayName||e.fullname||null:(0,h.isIOCozyApp)(e)?e.name:null},w=function(e,t){var n=t.fields,r=t.doc,a=t.query;if((0,h.isIOCozyFile)(r))return null!==(i=r.path)&&void 0!==i?i:null;if((0,h.isIOCozyContact)(r)){var i,o,c,s,u=n.find(function(e){return"displayName"!==e&&"fullname"!==e});if(!u)return null;if(u.includes("[]:")){var l=u.split("[]:");if(2!==l.length)return null;var d=l[0],p=l[1],m=r[d],v=Array.isArray(m)&&m.find(function(e){var t="object"==typeof e&&null!==e&&p in e&&e[p];return"string"==typeof t&&t.includes(a)});if(!v)return null;s=v[p]}else s=r[u];return null!==(o=null===(c=s)||void 0===c?void 0:c.toString())&&void 0!==o?o:null}if(r._type===f.APPS_DOCTYPE)try{var y=e.getInstanceOptions().locale||"en";if(r.locales[y])return r.locales[y].short_description}catch(e){return r.name}return null},k=function(e,t){if((0,h.isIOCozyFile)(t)){if(u.models.file.isNote(t)){var n,r=e.getStackClient().uri,a=null===(n=t.cozyMetadata)||void 0===n?void 0:n.createdOn;return a&&a!=="".concat(r,"/")?"drive":"notes"}return"drive"}return(0,h.isIOCozyContact)(t)?"contacts":(0,h.isIOCozyApp)(t)?t.slug:null},O=function(e,t,n){var r="";if((0,h.isIOCozyFile)(t)){var a=t.type===f.TYPE_DIRECTORY,i=a?t._id:t.dir_id,o="/folder/".concat(i);r=u.models.file.isNote(t)?"notes"===n?"/n/".concat(t._id):"/note/".concat(t._id):u.models.file.shouldBeOpenedByOnlyOffice(t)?"/onlyoffice/".concat(t._id,"?redirectLink=drive").concat(o):a?o:"".concat(o,"/file/").concat(t._id)}return((0,h.isIOCozyContact)(t)&&(r="/".concat(t._id)),n)?(0,u.generateWebLink)({cozyUrl:e.getStackClient().uri,slug:n,subDomainType:e.getInstanceOptions().subdomain,hash:r,pathname:"",searchParams:[]}):null},_=function(e,t,n){if(!(0,h.isIOCozyFile)(t)||!n)return null;var r="/folder/".concat(t.dir_id);return(0,u.generateWebLink)({cozyUrl:e.getStackClient().uri,slug:"drive",subDomainType:e.getInstanceOptions().subdomain,hash:r,pathname:"",searchParams:[]})},E=(r=(0,c.default)(i.default.mark(function e(t,n){var r,a,c,s,u,l,d,f,h,v,y,g,x,w,k,O,_,E,S;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,o.default)(n),c=n.reduce(function(e,t){var n=t.id,r=t.doctype;return e[r]||(e[r]=[]),e[r].push(n),e},{}),s=[],u=0,l=Object.keys(c);case 4:if(!(u<l.length)){e.next=25;break}return f=c[d=l[u]],h=performance.now(),v=void 0,y=!0,e.next=12,(0,p.queryDocsByIds)(t,d,f,{fromStore:y});case 12:if(!((v=e.sent).length<1)){e.next=19;break}return b.warn("Ids not found on store: query PouchDB"),y=!1,e.next=18,(0,p.queryDocsByIds)(t,d,f,{fromStore:y});case 18:v=e.sent;case 19:g=performance.now(),s=s.concat(v),b.debug("Query took ".concat((g-h).toFixed(2)," ms to retrieve ").concat(f.length," ").concat(d," from store: ").concat(y));case 22:u++,e.next=4;break;case 25:x=new Map(null===(r=s)||void 0===r?void 0:r.map(function(e){return[e._id,e]})),w=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(a);try{for(w.s();!(k=w.n()).done;)_=k.value,E=null===(O=_.id)||void 0===O?void 0:O.toString(),(S=x.get(E))?_.doc=S:b.error("".concat(E," is found in search but not in local data"))}catch(e){w.e(e)}finally{w.f()}return e.abrupt("return",a);case 29:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.enrichResultsWithDocs=E},43051:function(e,t,n){"use strict";var r,a,i,o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.initSearchIndex=t.initDoctypeAfterIndexImport=t.indexSingleDoc=t.indexOnChanges=t.indexAllDocs=void 0;var c=o(n(68434)),s=o(n(64512)),u=o(n(82007)),l=o(n(44921)),d=n(13542),f=n(9183),p=n(48489),h=n(11020),m=n(29315),v=n(35585),y=n(56051);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.initSearchIndex=function(e){var t=d.SEARCH_SCHEMA[e];return new l.default.Document({tokenize:"reverse",encode:(0,h.getSearchEncoder)(),minlength:3,document:{id:"_id",index:t,store:!1}})},t.indexAllDocs=function(e,t,n){var r,a=x(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;E(i)?e.add(i):e.remove(i._id)}}catch(e){a.e(e)}finally{a.f()}return n&&(0,p.setFilePaths)(t),e};var k=(r=(0,u.default)(c.default.mark(function e(t,n,r){var a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E(r)){e.next=9;break}if(a=r,!(0,y.isIOCozyFile)(r)){e.next=6;break}return e.next=5,(0,p.computeFileFullpath)(t,r);case 5:a=e.sent;case 6:n.add(a),e.next=10;break;case 9:n.remove(r._id);case 10:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.indexSingleDoc=k;var O=(a=(0,u.default)(c.default.mark(function e(t,n,r){var a,i,o,s,u,l,d;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,f.getPouchLink)(t.client),!(!t.isLocalSearch||!a)){e.next=3;break}return e.abrupt("return",n);case 3:return i=(null==n?void 0:n.lastSeq)||0,e.next=6,a.getChanges(r,{include_docs:!0,since:i});case 6:s=x((o=e.sent).results),e.prev=8,s.s();case 10:if((u=s.n()).done){e.next=21;break}if(!(l=u.value).deleted){e.next=16;break}n.index.remove(l.id),e.next=19;break;case 16:return d=g(g({},l.doc),{},{_type:r}),e.next=19,k(t.client,n.index,d);case 19:e.next=10;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(8),s.e(e.t0);case 26:return e.prev=26,s.f(),e.finish(26);case 29:return n.lastSeq=o.last_seq,n.lastUpdated=new Date().toISOString(),e.abrupt("return",n);case 32:case"end":return e.stop()}},e,null,[[8,23,26,29]])})),function(e,t,n){return a.apply(this,arguments)});t.indexOnChanges=O;var _=(i=(0,u.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.queryLocalOrRemoteDocs)(t,n,{isLocalSearch:!0});case 2:r=e.sent,(0,p.setFilePaths)(r);case 4:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)});t.initDoctypeAfterIndexImport=_;var E=function(e){return!(0,y.isIOCozyFile)(e)||(0,m.shouldKeepFile)(e)}},35585:function(e,t,n){"use strict";var r,a,i,o,c,s=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.queryLocalOrRemoteDocs=t.queryFilesForSearch=t.queryDocsByIds=t.queryDocById=t.queryAllDocs=void 0;var u=s(n(68434)),l=s(n(64512)),d=s(n(82007)),f=n(16396),p=s(n(74450)),h=n(13542),m=n(29315);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var y=(0,p.default)("\uD83D\uDDC2️ [Indexing]"),b=f.fetchPolicies.olderThan(3e5),g=(r=(0,d.default)(u.default.mark(function e(t){var n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getStackClient().fetchJSON("GET","/data/io.cozy.files/_all_docs?Fields=_id,trashed,dir_id,name,path,type,mime,class,metadata.title,metadata.version&DesignDocs=false&include_docs=true");case 2:return r=(n=e.sent.rows.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:e.id},e.doc)})).filter(function(e){return e.type===h.TYPE_DIRECTORY}),a=n.filter(function(e){return(0,m.shouldKeepFile)(e)}).map(function(e){return(0,m.normalizeFileWithFolders)(r,e)}),e.abrupt("return",a);case 8:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.queryFilesForSearch=g;var x=(a=(0,d.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={as:"".concat(n,"/all"),fetchPolicies:b},e.abrupt("return",t.queryAll((0,f.Q)(n).limitBy(null),r));case 2:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.queryAllDocs=x;var w=(i=(0,d.default)(u.default.mark(function e(t,n,r){var a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={as:"".concat(n,"/").concat(r),fetchPolicy:b,singleDocData:!0},e.next=3,t.query((0,f.Q)(n).getById(r),a);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)});t.queryDocById=w;var k=(o=(0,d.default)(u.default.mark(function e(t,n,r){var a,i,o,c=arguments;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0===(a=(c.length>3&&void 0!==c[3]?c[3]:{}).fromStore)||a)){e.next=5;break}return i=t.getCollectionFromState(n).filter(function(e){return e._id&&r.includes(e._id)}),e.abrupt("return",i);case 5:return e.next=7,t.query((0,f.Q)(n).getByIds(r));case 7:return o=e.sent,e.abrupt("return",o.data);case 9:case"end":return e.stop()}},e)})),function(e,t,n){return o.apply(this,arguments)});t.queryDocsByIds=k;var O=(c=(0,d.default)(u.default.mark(function e(t,n,r){var a,i,o,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.isLocalSearch,i=[],o=performance.now(),!(!a&&n===h.FILES_DOCTYPE)){e.next=9;break}return e.next=6,g(t);case 6:i=e.sent,e.next=12;break;case 9:return e.next=11,x(t,n);case 11:i=e.sent;case 12:return c=performance.now(),y.debug("Query ".concat(i.length," ").concat(n," took ").concat((c-o).toFixed(2)," ms")),e.abrupt("return",i);case 15:case"end":return e.stop()}},e)})),function(e,t,n){return c.apply(this,arguments)});t.queryLocalOrRemoteDocs=O},85715:function(e,t,n){"use strict";var r,a,i,o,c=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.persistExportDate=t.importSearchIndexes=t.getExportDate=t.exportSearchIndexes=void 0;var s=c(n(68434)),u=c(n(82007)),l=c(n(74450)),d=n(13542),f=n(43051);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=(0,l.default)("\uD83D\uDDC2️ [Index storage]"),v="searchExportDate",y="searchIndexKeys",b="searchIndexLastSeq",g="searchIndexLastUpdated",x=function(e,t){return"".concat(d.DATAPROXY_STORAGE_PREFIX,":").concat(e,":").concat(t)},w=(r=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date().toISOString(),e.next=3,null==t?void 0:t.storeData("".concat(d.DATAPROXY_STORAGE_PREFIX,":").concat(v),n);case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.persistExportDate=w;var k=(a=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==t?void 0:t.getData("".concat(d.DATAPROXY_STORAGE_PREFIX,":").concat(v)));case 1:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.getExportDate=k;var O=(i=(0,u.default)(s.default.mark(function e(t,n){var r,a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k(t);case 4:if(!(r=e.sent)||!(new Date(r).getTime()+d.MIN_DELAY_BEFORE_EXPORT>new Date().getTime())){e.next=9;break}return m.info("Export already happened earlier, skip it."),e.abrupt("return");case 9:m.info("Start indexes export"),a=s.default.mark(function e(){var r,a,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n[r=o[i]],c=[],e.next=6,a.index.export(function(e,n){c.push(e),JSON.stringify(n)&&t.storeData(x(r,e),n)});case 6:return e.next=8,t.storeData(x(r,y),c);case 8:return e.next=10,t.storeData(x(r,b),a.lastSeq);case 10:return e.next=12,t.storeData(x(r,g),a.lastUpdated);case 12:case"end":return e.stop()}},e)}),i=0,o=Object.keys(n);case 12:if(!(i<o.length)){e.next=17;break}return e.delegateYield(a(),"t0",14);case 14:i++,e.next=12;break;case 17:return e.next=19,w(t);case 19:m.info("Indexes export done");case 20:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)});t.exportSearchIndexes=O;var _=(o=(0,u.default)(s.default.mark(function e(t){var n,r,a,i,o,c,u,l,h,v,w,k,O,_,E;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("Start indexes import"),n={},t){e.next=4;break}return e.abrupt("return",n);case 4:r=p(d.SEARCHABLE_DOCTYPES),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=50;break}return i=a.value,o=(0,f.initSearchIndex)(i),c=performance.now(),e.next=13,t.getData(x(i,y));case 13:if(u=e.sent){e.next=17;break}return m.warn("No keys available to import index ".concat(i)),e.abrupt("continue",48);case 17:l=p(u),e.prev=18,l.s();case 20:if((h=l.n()).done){e.next=30;break}return v=h.value,e.next=24,t.getData(x(i,v));case 24:if(!(w=e.sent)){e.next=28;break}return e.next=28,o.import(v,w);case 28:e.next=20;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(18),l.e(e.t0);case 35:return e.prev=35,l.f(),e.finish(35);case 38:return e.next=40,t.getData(x(i,b));case 40:return k=e.sent,e.next=43,t.getData(x(i,g));case 43:O=e.sent,_={index:o,lastSeq:k,lastUpdated:O},n[i]=_,E=performance.now(),m.debug("".concat(i," import took ").concat((E-c).toFixed(2)," ms"));case 48:e.next=7;break;case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(5),r.e(e.t1);case 55:return e.prev=55,r.f(),e.finish(55);case 58:return e.abrupt("return",n);case 59:case"end":return e.stop()}},e,null,[[5,52,55,58],[18,32,35,38]])})),function(e){return o.apply(this,arguments)});t.importSearchIndexes=_},56051:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSearchedDoctype=t.isIOCozyFile=t.isIOCozyContact=t.isIOCozyApp=void 0;var r=n(13542);t.isIOCozyFile=function(e){return e._type===r.FILES_DOCTYPE},t.isIOCozyContact=function(e){return e._type===r.CONTACTS_DOCTYPE},t.isIOCozyApp=function(e){return e._type===r.APPS_DOCTYPE};var a=Object.keys(r.SEARCH_SCHEMA);t.isSearchedDoctype=function(e){return!!e&&a.includes(e)}},8969:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.startApp=t.default=t.checkApp=void 0;var o=i(n(68434)),c=i(n(82007)),s=n(54878),u=function(){return window.startApp},l=function(e){var t=e.appId,n=e.uri;return(0,s.isAndroidApp)()?{package:t}:n},d={},f=d.startApp=(r=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.startApp,e.next=3,d.checkApp(t);case 3:if(!e.sent){e.next=9;break}return r=l(t),e.abrupt("return",new Promise(function(e,t){if(!u()){t(Error("Cordova plugin 'com.lampa.startapp' is not installed. This plugin is needed to start a native app. Required by cozy-bar"));return}n.set(r).start(e,t)}));case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.startApp=f;var p=d.checkApp=(a=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.startApp,r=l(t),e.abrupt("return",new Promise(function(e,t){if(!u()){t(Error("Cordova plugin 'com.lampa.startapp' is not installed."));return}n.set(r).check(function(t){return e("OK"===t||t)},function(n){!1===n||0===n.indexOf("NameNotFoundException")?e(!1):t(n)})}));case 3:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.checkApp=p,t.default=d},31555:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCordova=void 0,t.isCordova=function(){return"undefined"!=typeof window&&void 0!==window.cordova}},34586:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openDeeplinkOrRedirect=void 0;var n=function(e,t,n){var r=document.createElement("iframe");return r.src=t,r.id="hiddenIframe_".concat(n),r.style.display="none",e.appendChild(r),r},r=function(e,t){var r=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);window.addEventListener("blur",o);var a=n(document.body,"about:blank",r),i=setTimeout(function(){t(),window.removeEventListener("blur",o),a.parentElement.removeChild(a)},500);function o(){clearTimeout(i),window.removeEventListener("blur",o),a.parentElement.removeChild(a)}a.contentWindow.location.href=e},a=function(e,t){for(var n=setTimeout(function(){t(),r.removeEventListener("blur",a)},500),r=window;r!=r.parent;)r=r.parent;function a(){clearTimeout(n),r.removeEventListener("blur",a)}r.addEventListener("blur",a),window.location=e},i=function(e,t){navigator.msLaunchUri(e,void 0,t)},o=function(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=navigator.userAgent.toLowerCase(),n=t.includes("safari")&&!t.includes("chrome")||Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a=r&&(t.includes("os 12_2")||t.includes("os 12_3"));return{isOpera:e,isFirefox:void 0!==window.InstallTrigger,isSafari:n,isChrome:!!window.chrome&&!e,isIOS122:a,isIOS:r}};t.openDeeplinkOrRedirect=function(e,t){if(navigator.msLaunchUri)i(e,t);else{var n=o();n.isChrome||n.isIOS&&!n.isIOS122?a(e,t):n.isSafari&&!n.isIOS122||n.isFirefox?r(e,t):t()}}},26082:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceName=void 0;var a=r(n(48403)),i=n(31555),o=n(28715),c=n(54878),s="Device",u=function(e){for(var t=0,n=["iPhone","iPad","Watch","AppleTV"];t<n.length;t++){var r=n[t];if(e.match(new RegExp(r)))return r}return s};t.getDeviceName=function(){if(!(0,o.hasDevicePlugin)())return(0,i.isCordova)()&&console.warn("You should install `cordova-plugin-device`."),s;var e=window.device,t=e.manufacturer,n=e.model,r=(0,c.isIOSApp)()?u(n):n;return"".concat((0,a.default)(t)," ").concat(r)}},70574:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isFlagshipOfflineSupported=t.isFlagshipApp=t.getFlagshipMetadata=t.FlagshipRoutes=void 0;var o=i(n(33918));t.FlagshipRoutes=a,(r=a||(t.FlagshipRoutes=a={})).Home="home",r.Cozyapp="cozyapp",r.Authenticate="authenticate",r.Onboarding="onboarding",r.Stack="stack";var c=function(){return"undefined"!=typeof window?window:void(0,o.default)("error",'"window" is not defined. This means that getGlobalWindow() shouldn\'t have been called and investigation should be done to prevent this call')};t.getFlagshipMetadata=function(){var e,t,n;return null!==(e=null===(t=c())||void 0===t?void 0:null===(n=t.cozy)||void 0===n?void 0:n.flagship)&&void 0!==e?e:{}},t.isFlagshipApp=function(){var e,t;return(null===(e=c())||void 0===e?void 0:null===(t=e.cozy)||void 0===t?void 0:t.flagship)!==void 0},t.isFlagshipOfflineSupported=function(){var e,t,n;return null===(e=c())||void 0===e?void 0:null===(t=e.cozy)||void 0===t?void 0:null===(n=t.flagship)||void 0===n?void 0:n.offline_available}},25976:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkApp",{enumerable:!0,get:function(){return i.checkApp}}),Object.defineProperty(t,"getDeviceName",{enumerable:!0,get:function(){return a.getDeviceName}}),Object.defineProperty(t,"getFlagshipMetadata",{enumerable:!0,get:function(){return l.getFlagshipMetadata}}),Object.defineProperty(t,"getPlatform",{enumerable:!0,get:function(){return r.getPlatform}}),Object.defineProperty(t,"hasDevicePlugin",{enumerable:!0,get:function(){return o.hasDevicePlugin}}),Object.defineProperty(t,"hasInAppBrowserPlugin",{enumerable:!0,get:function(){return o.hasInAppBrowserPlugin}}),Object.defineProperty(t,"hasNetworkInformationPlugin",{enumerable:!0,get:function(){return o.hasNetworkInformationPlugin}}),Object.defineProperty(t,"hasSafariPlugin",{enumerable:!0,get:function(){return o.hasSafariPlugin}}),Object.defineProperty(t,"isAndroid",{enumerable:!0,get:function(){return r.isAndroid}}),Object.defineProperty(t,"isAndroidApp",{enumerable:!0,get:function(){return r.isAndroidApp}}),Object.defineProperty(t,"isCordova",{enumerable:!0,get:function(){return c.isCordova}}),Object.defineProperty(t,"isFlagshipApp",{enumerable:!0,get:function(){return l.isFlagshipApp}}),Object.defineProperty(t,"isFlagshipOfflineSupported",{enumerable:!0,get:function(){return l.isFlagshipOfflineSupported}}),Object.defineProperty(t,"isIOS",{enumerable:!0,get:function(){return r.isIOS}}),Object.defineProperty(t,"isIOSApp",{enumerable:!0,get:function(){return r.isIOSApp}}),Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return r.isMobile}}),Object.defineProperty(t,"isMobileApp",{enumerable:!0,get:function(){return r.isMobileApp}}),Object.defineProperty(t,"isWebApp",{enumerable:!0,get:function(){return r.isWebApp}}),Object.defineProperty(t,"nativeLinkOpen",{enumerable:!0,get:function(){return s.nativeLinkOpen}}),Object.defineProperty(t,"openDeeplinkOrRedirect",{enumerable:!0,get:function(){return u.openDeeplinkOrRedirect}}),Object.defineProperty(t,"startApp",{enumerable:!0,get:function(){return i.startApp}});var r=n(54878),a=n(26082),i=n(8969),o=n(28715),c=n(31555),s=n(9526),u=n(34586),l=n(70574)},9526:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.nativeLinkOpen=void 0;var i=a(n(68434)),o=a(n(82007)),c=n(28715),s=(r=(0,o.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,(0,c.hasSafariPlugin)();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}e.t0=window.SafariViewController;case 6:if(!e.t0){e.next=10;break}window.SafariViewController.show({url:n,transition:"curl"},function(e){"closed"===e.event&&window.SafariViewController.hide()},function(){window.SafariViewController.hide()}),e.next=11;break;case 10:(0,c.hasInAppBrowserPlugin)()?(r="_blank",a="clearcache=yes,zoom=no",window.cordova.InAppBrowser.open(n,r,a)):window.location=n;case 11:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.nativeLinkOpen=s},54878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebApp=t.isMobileApp=t.isMobile=t.isIOSApp=t.isIOS=t.isAndroidApp=t.isAndroid=t.getPlatform=void 0;var r=n(31555),a=function(){return(0,r.isCordova)()?window.cordova.platformId:"web"};t.getPlatform=a;var i=function(e){return a()===e};t.isIOSApp=function(){return i("ios")},t.isAndroidApp=function(){return i("android")},t.isWebApp=function(){return i("web")},t.isMobileApp=function(){return(0,r.isCordova)()};var o=function(){return window.navigator.userAgent&&window.navigator.userAgent.indexOf("Android")>=0};t.isAndroid=o;var c=function(){return window.navigator.userAgent&&/iPad|iPhone|iPod/.test(window.navigator.userAgent)};t.isIOS=c,t.isMobile=function(){return o()||c()}},28715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSafariPlugin=t.hasNetworkInformationPlugin=t.hasInAppBrowserPlugin=t.hasDevicePlugin=void 0;var r=n(31555);t.hasDevicePlugin=function(){return(0,r.isCordova)()&&void 0!==window.device},t.hasInAppBrowserPlugin=function(){return(0,r.isCordova)()&&void 0!==window.cordova.InAppBrowser},t.hasSafariPlugin=function(){return new Promise(function(e){if(!(0,r.isCordova)()||void 0===window.SafariViewController){e(!1);return}window.SafariViewController.isAvailable(function(t){return e(t)})})},t.hasNetworkInformationPlugin=function(){return(0,r.isCordova)()&&void 0!==window.navigator.connection}},59197:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleRequestParentOrigin=t.extractUrl=void 0,t.extractUrl=function(e){if(!e.startsWith("http"))return e;var t=new URL(e);return t.pathname+t.search+t.hash},t.handleRequestParentOrigin=function(e,t){e.origin===t&&e.source&&"requestParentOrigin"===e.data&&e.source.postMessage("answerParentOrigin",e.origin)}},62857:function(e,t,n){"use strict";var r=n(5751);t.useExternalBridge=void 0;var a=r(n(68434)),i=r(n(82007)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(79273)),c=n(67294),s=n(79655),u=n(16396),l=r(n(71400)),d=n(59197);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var p=function(){var e=document.getElementById("embeddedApp");if(null===e)throw Error("No iframe found");return e},h=function(){var e=(0,s.useLocation)();(0,c.useEffect)(function(){if("/"!==e.pathname||""!==e.hash||""!==e.search){var t=p(),n=new URL(t.src);n.pathname=e.pathname,n.hash=e.hash,n.search=e.search;var r=new URL(t.src);n.toString()!==r.toString()&&(t.src=n.toString())}},[])},m=function(e){var t=(0,u.useClient)();(0,c.useEffect)(function(){if(t){var n=function(t){return(0,d.handleRequestParentOrigin)(t,e)};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}},[t,e])};t.useExternalBridge=function(e){var t=(0,u.useClient)(),n=(0,s.useNavigate)();h(),m(e),(0,c.useEffect)(function(){if(t){var r,c={getContacts:(r=(0,i.default)(a.default.mark(function e(){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,u.Q)("io.cozy.contacts"));case 2:return n=e.sent.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),getFlag:function(e){return(0,l.default)(e)},updateHistory:function(e){var t=(0,d.extractUrl)(e);console.log("\uD83D\uDFE2 Replacing route:",t),n(t,{replace:!0})}};o.expose(c,o.windowEndpoint(p().contentWindow,self,e))}},[n,t,e])}},73221:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(25665)),c=r(n(27952)),s=r(n(12323)),u=r(n(67294)),l=r(n(36049)),d=r(n(24394)),f=function(e){var t=e.name,n=e.onChange;return u.default.createElement("input",{type:"checkbox",checked:(0,d.default)(t),onChange:function(e){return(0,d.default)(t,JSON.parse(e.target.checked))&&n&&n()}})},p=function(e){var t=e.children,n=e.onClick;return u.default.createElement("button",{type:"button",onClick:n,style:{position:"absolute",top:"100%",left:"0"}},t)},h=(0,l.default)(function(){var e=d.default.list();return u.default.createElement("div",null,e.map(function(e){return u.default.createElement("div",{key:e},e.replace(/[a-z][A-Z]/g,function(e){return e[0]+" "+e[1].toLowerCase()})," : ",u.default.createElement(f,{onChange:function(){},name:e}))}))}),m=function(e){(0,o.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(r);return e=t?Reflect.construct(n,arguments,(0,s.default)(this).constructor):n.apply(this,arguments),(0,c.default)(this,e)});function r(e){var t;return(0,a.default)(this,r),(t=n.call(this,e)).state={folded:!0},t}return(0,i.default)(r,[{key:"render",value:function(){var e,t=this;return(0,d.default)("switcher")&&u.default.createElement("div",{className:"flag-switcher",style:(e=this.state,{borderBottomLeftRadius:".5rem",padding:".5rem",position:"absolute",zIndex:1e3,color:"white",background:"rgba(74,68,90,0.85)",top:0,right:0,transform:"translateY(".concat(e.folded?"-100%":"0",")")})},u.default.createElement(p,{onClick:function(){return t.setState(function(e){return{folded:!e.folded}})}},this.state.folded?"Show":"Hide"," flags"),u.default.createElement("button",{onClick:function(){return t.setState({date:Date.now()})}},"refresh"),"\xa0",u.default.createElement("button",{onClick:function(){return d.default.reset()&&(0,d.default)("switcher",!0)&&t.forceUpdate()}},"reset"),u.default.createElement(h,null))}}]),r}(u.default.Component);t.default=m,m.List=h},36049:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(8997)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(64512)),d=r(n(67294)),f=r(n(24394)).default.store;t.default=function(e){var t,n=function(t){(0,c.default)(p,t);var n,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,u.default)(p);return e=n?Reflect.construct(t,arguments,(0,u.default)(this).constructor):t.apply(this,arguments),(0,s.default)(this,e)});function p(){var e;(0,a.default)(this,p);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,l.default)((0,o.default)(e),"handleChange",function(){e.forceUpdate()}),e}return(0,i.default)(p,[{key:"componentDidMount",value:function(){f.on("change",this.handleChange)}},{key:"componentWillUnmount",value:function(){f.removeListener("change",this.handleChange)}},{key:"render",value:function(){return d.default.createElement(e,this.props)}}]),p}(d.default.Component);return(0,l.default)(n,"displayName",void 0),n.displayName="withFlags(".concat(null!==(t=e.displayName)&&void 0!==t?t:e.name,")"),n}},24394:function(e,t,n){"use strict";var r,a,i,o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.resetFlags=t.listFlags=t.initializeFromRemote=t.initializeFromDOM=t.initialize=t.getTemplateData=t.enable=t.default=void 0;var c=o(n(68434)),s=o(n(65105)),u=o(n(19723)),l=o(n(82007)),d=o(n(90402)),f=n(71450);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var h=new(o(n(10916))).default,m=function(e,t){return 1==arguments.length?h.get(e):(h.set(e,t),t)},v=function(){return h.keys().sort()};t.listFlags=v;var y=function(){v().forEach(function(e){return h.remove(e)})};t.resetFlags=y;var b=function(e){if(Array.isArray(e)){if(0===e.length)return;console.log("flags.enable: Deprecation warning: prefer to use an object { flag1: true, flag2: true } instead of an array when using flags.enable"),t=e.map(function(e){return[e,!0]})}else"object"==typeof e&&(t=Object.entries(e));if(t){var t,n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(t);try{for(r.s();!(n=r.n()).done;){var a=(0,d.default)(n.value,2),i=a[0],o=a[1];m(i,o)}}catch(e){r.e(e)}finally{r.f()}}};t.enable=b;var g=(r=(0,l.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,f.Q)("io.cozy.settings").getById("io.cozy.settings.flags"));case 2:b(e.sent.data.attributes);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.initializeFromRemote=g;var x=function(e){if("undefined"==typeof document)return null;var t=document.querySelector("[data-cozy]"),n=document.querySelector("[data-cozy-".concat(e,"]"));try{if(t)return JSON.parse(t.dataset.cozy)[e];if(!n)return null;return console.warn('Prefer to use [data-cozy] to store template data. <div data-cozy="{{.CozyData}}></div>. "'),JSON.parse(n.dataset["cozy".concat(e[0].toUpperCase()+e.slice(1))])}catch(e){return null}};t.getTemplateData=x;var w=(a=(0,l.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x("flags")){e.next=3;break}return e.abrupt("return",!1);case 3:return b(t),e.abrupt("return",!0);case 5:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)});t.initializeFromDOM=w;var k=(i=(0,l.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:if(!1!=e.sent){e.next=6;break}return e.next=6,g(t);case 6:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)});t.initialize=k;var O=function(){var e,t,n;function r(e){(0,s.default)(this,r),this.client=e,this.handleLogin=this.handleLogin.bind(this),this.handleLogout=this.handleLogout.bind(this),this.client.on("login",this.handleLogin),this.client.on("logout",this.handleLogout),this.setupInitializing(),e.isLogged&&this.handleLogin()}return(0,u.default)(r,[{key:"refresh",value:(e=(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.initializeFromRemote(this.client);case 2:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"setupInitializing",value:function(){var e=this;this.initializing=new Promise(function(t){e.resolveInitializing=t})}},{key:"handleLogin",value:(t=(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.initialize(this.client);case 2:this.resolveInitializing(),this.client.emit("plugin:flag:login");case 4:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"handleLogout",value:(n=(0,l.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.reset(),this.setupInitializing(),this.client.emit("plugin:flag:logout");case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),r}();O.pluginName="flags",m.store=h,m.list=v,m.reset=y,m.enable=b,m.initializeFromRemote=g,m.initializeFromDOM=w,m.initialize=k,m.plugin=O,t.default=m},71400:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(73221)),i=r(n(36049)),o=r(n(24394)),c=r(n(99975));o.default.connect=i.default,o.default.FlagSwitcher=a.default,o.default.useFlag=c.default,"undefined"!=typeof __ENABLED_FLAGS__&&o.default.enable(__ENABLED_FLAGS__);var s=o.default;t.default=s},6465:function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.prefix=t.getKey=t.default=void 0;var a="flag__";t.prefix=a;var i=function(e){return a+e};t.getKey=i;var o=function(){return Object.keys(localStorage).filter(function(e){return 0===e.indexOf(a)}).map(function(e){return e.replace(a,"")})},c=function(e){var t=localStorage.getItem(i(e));return t?JSON.parse(t):t},s=function(e){return localStorage.removeItem(i(e))};t.default={getAll:function(){var e,t={},r=n(o());try{for(r.s();!(e=r.n()).done;){var a=e.value;t[a]=c(a)}}catch(e){r.e(e)}finally{r.f()}return t},getItem:c,setItem:function(e,t){var n=JSON.stringify(t);return localStorage.setItem(i(e),n)},clearAll:function(){var e,t=n(o());try{for(t.s();!(e=t.n()).done;){var r=e.value;s(r)}}catch(e){t.e(e)}finally{t.f()}},removeItem:s}},10916:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(90402)),i=r(n(65105)),o=r(n(19723)),c=r(n(37203)),s=r(n(6465)),u=function(){function e(){(0,i.default)(this,e),this.store={},"undefined"!=typeof localStorage&&(this.longtermStore=s.default),this.restore()}return(0,o.default)(e,[{key:"restore",value:function(){if(this.longtermStore)for(var e=this.longtermStore.getAll(),t=0,n=Object.entries(e);t<n.length;t++){var r=(0,a.default)(n[t],2),i=r[0],o=r[1];this.store[i]=o,this.emit("change",i)}}},{key:"keys",value:function(){return Object.keys(this.store)}},{key:"get",value:function(e){if(this.store.hasOwnProperty(e))return this.store[e];if("string"==typeof e)for(var t=e.split("."),n=t.length,r=n-1;r>0;r--){var a=t.slice(0,r).join(".");if(this.store.hasOwnProperty(a))return t.slice(r,n).reduce(function(e,t){return e&&e.hasOwnProperty(t)?e[t]:null},this.store[a])}return null}},{key:"set",value:function(e,t){this.longtermStore&&this.longtermStore.setItem(e,t),this.store[e]=t,this.emit("change",e)}},{key:"remove",value:function(e){delete this.store[e],this.longtermStore&&this.longtermStore.removeItem(e),this.emit("change",e)}}]),e}();c.default.mixin(u),t.default=u},99975:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,i.useState)((0,o.default)(e)),n=(0,a.default)(t,2),r=n[0],c=n[1];return(0,i.useEffect)(function(){var t=function(t){t===e&&c((0,o.default)(e))};return o.default.store.on("change",t),function(){o.default.store.removeListener("change",t)}},[c,e]),r};var a=r(n(90402)),i=n(67294),o=r(n(24394))},96762:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numbers=void 0,t.numbers={maxAttempts:20}},51496:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strings=void 0,t.strings={flagshipButNoRNAPI:"<WebviewIntentProvider /> can not instantiate its service. The application was detected as running in a Flagship webview but has no access to `window.ReactNativeWebView`, which is contradictory.",noListenerFound:"Could not handle event, this `NativeMessenger` instance does not have a listener.",noWebviewFound:'error: no WebView was found when trying to post message. This might mean we exited a CozyApp without waiting the call("backToHome") response.',postMeSignature:"@post-me",webviewIsRendered:"webviewIsRendered",errorRegisterWebview:"Cannot register webview. A webview is already registered into cozy-intent with the uri: ${uri}",errorUnregisterWebview:"Cannot unregister webview. No webview is registered into cozy-intent with the uri: ${uri}",errorEmitMessage:"Cannot emit message. No webview is registered with uri: ${webviewUri}",errorCozyBarAPIMissing:"Cozy-bar was detected by WebviewIntentProvider but the required setWebviewContext() API was not found. Cozy-bar webview intents will not work. Your cozy-bar version is most likely outdated.",errorParentHandshake:'Handshake failed for uri: "${uri}". ConcreteConnection will not be available for this uri\'s messenger, but messages should still work. Error was: "${errorMessage}".',errorNoMessengerToInit:'Could not initialise messenger for uri: "${uri}. No WebView has been registered from react-native with this uri. Please use NativeService.registerWebview(WebviewRef).',logging:{registering:function(e){return'- REGISTERING ▶️ "'.concat(e,'"')},registered:function(e){return'- REGISTERED ▶️ "'.concat(e,'"')},unregistering:function(e){return'- UNREGISTERING ▶️ "'.concat(e,'"')},unregistered:function(e){return'- UNREGISTERED ▶️ "'.concat(e,'"')}}}},55260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96762);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))});var a=n(51496);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var i=n(53060);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var o=n(81334);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var c=n(69855);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))});var s=n(54675);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var u=n(45566);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))});var l=n(59761);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))});var d=n(3463);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))});var f=n(81519);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))});var p=n(81712);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))})},53060:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFlagshipUI=void 0,t.isFlagshipUI=function(e){return"object"==typeof e&&null!==e&&("bottomBackground"in e||"bottomOverlay"in e||"bottomTheme"in e||"topBackground"in e||"topOverlay"in e||"topTheme"in e)}},81334:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebviewSourceBaseUrl=function(e){return!!e.html}},69855:function(){},54675:function(){},45566:function(){},59761:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.NativeMessenger=t.DebugNativeMessenger=void 0;var a=r(n(19723)),i=r(n(65105)),o=r(n(64512)),c=n(97627),s=r(n(74450)),u=n(55260),l=(0,s.default)("cozy-intent");t.logger=l;var d=(0,c.debug)("NativeMessenger"),f=(0,a.default)(function e(t){var n,r=this;(0,i.default)(this,e),(0,o.default)(this,"injectJavaScript",void 0),(0,o.default)(this,"listener",void 0),(0,o.default)(this,"webviewUri",void 0),(0,o.default)(this,"postMessage",function(e){if(e.error){var t;l.warn("Error during intent to ".concat(null!==(t=r.webviewUri)&&void 0!==t?t:"undefined webview"," : "),JSON.stringify(e.error))}try{var n,a="window.postMessage(".concat(JSON.stringify(e),")");null===(n=r.injectJavaScript)||void 0===n||n.call(r,a)}catch(e){d(u.strings.noWebviewFound)}}),(0,o.default)(this,"addMessageListener",function(e){return r.listener=e,function(){return r.listener=void 0}}),(0,o.default)(this,"onMessage",function(e){if(!r.listener)return d(u.strings.noListenerFound);r.listener({data:e})}),this.injectJavaScript=t.injectJavaScript,this.webviewUri=null!==(n=t.props.source.uri)&&void 0!==n?n:t.props.source.baseUrl});t.NativeMessenger=f,t.DebugNativeMessenger=function(e){return{postMessage:function(t){"response"!==t.action&&d("- OUT",t),e.postMessage(t)},addMessageListener:function(t){return e.addMessageListener(t)},onMessage:function(t){d("- IN",t),e.onMessage(t)}}}},3463:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.NativeService=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(64512)),u=n(97627),l=n(55260),d=n(46311);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,u.debug)("NativeService"),m=function(){function e(t){var n,r,c,f=this,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.NativeMessenger;(0,o.default)(this,e),(0,s.default)(this,"messengerService",void 0),(0,s.default)(this,"localMethods",void 0),(0,s.default)(this,"messengerRegister",{}),(0,s.default)(this,"updateLocalMethods",function(e){f.localMethods=e}),(0,s.default)(this,"getUri",function(e){return new URL(e.nativeEvent.url).hostname.toLowerCase()}),(0,s.default)(this,"parseNativeEvent",function(e){return JSON.parse(e.nativeEvent.data)}),(0,s.default)(this,"isPostMeMessage",function(e){return e.type===l.strings.postMeSignature}),(0,s.default)(this,"isInitMessage",function(e){return e.message===l.strings.webviewIsRendered}),(0,s.default)(this,"registerWebview",function(e,t,n){if(h(l.strings.logging.registering(e)),f.messengerRegister[e])return h((0,d.interpolate)(l.strings.errorRegisterWebview,{uri:e}));var r=new f.messengerService(n);f.messengerRegister=p(p({},f.messengerRegister),{},(0,s.default)({},e,{messenger:(0,d.isNativeDevMode)()?(0,l.DebugNativeMessenger)(r):r,slug:t})),h(l.strings.logging.registered(e))}),(0,s.default)(this,"unregisterWebview",function(e){if(h(l.strings.logging.unregistering(e)),!f.messengerRegister[e])return h((0,d.interpolate)(l.strings.errorUnregisterWebview,{uri:e}));delete f.messengerRegister[e],h(l.strings.logging.unregistered(e))}),(0,s.default)(this,"initWebview",(n=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.ParentHandshake)(t,f.localMethods,l.numbers.maxAttempts);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})),(0,s.default)(this,"tryEmit",(r=(0,i.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.isNativeEvent(t)){e.next=2;break}return e.abrupt("return");case 2:if("setFlagshipUI"===(r=f.parseNativeEvent(t)).methodName&&(0,d.isFlagshipUiArgsArray)(r.args)&&(r.args[0].componentId=n),"setTheme"===r.methodName&&Array.isArray(r.args)&&(0,d.isThemeArg)(r.args[0])&&(r.args[0]={homeTheme:r.args[0],componentId:n}),!f.isInitMessage(r)){e.next=9;break}return e.next=8,f.tryInit(t);case 8:return e.abrupt("return",e.sent);case 9:f.isPostMeMessage(r)&&f.tryOnMessage(t,r);case 10:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})),(0,s.default)(this,"tryInit",(c=(0,i.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.getUri(t),r=f.messengerRegister[n],e.prev=2,r){e.next=5;break}throw Error((0,d.interpolate)(l.strings.errorNoMessengerToInit,{uri:n}));case 5:return e.next=7,f.initWebview(r.messenger);case 7:r.connection=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),h((0,d.interpolate)(l.strings.errorParentHandshake,{uri:n,errorMessage:(0,d.getErrorMessage)(e.t0)}));case 13:case"end":return e.stop()}},e,null,[[2,10]])})),function(e){return c.apply(this,arguments)})),(0,s.default)(this,"tryOnMessage",function(e,t){var n,r=f.getUri(e),a=f.messengerRegister[r];if(void 0===a)return h((0,d.interpolate)(l.strings.errorEmitMessage,{webviewUri:r}));null===(n=t.args)||void 0===n||n.unshift({slug:a.slug}),a.messenger.onMessage(t)}),(0,s.default)(this,"getHostname",function(e){try{return new URL(e).hostname.toLowerCase()}catch(t){return e}}),(0,s.default)(this,"call",function(e,t){for(var n,r,a,i=arguments.length,o=Array(i>2?i-2:0),c=2;c<i;c++)o[c-2]=arguments[c];return null===(n=f.messengerRegister[f.getHostname(e)])||void 0===n?void 0:null===(r=n.connection)||void 0===r?void 0:(a=r.remoteHandle()).call.apply(a,[t].concat(o))}),this.messengerService=m,this.localMethods=t}return(0,c.default)(e,[{key:"isNativeEvent",value:function(e){return void 0!==e.nativeEvent.data}}]),e}();t.NativeService=m},81519:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewMessenger=t.DebugWebviewMessenger=void 0;var a=r(n(19723)),i=r(n(65105)),o=r(n(64512)),c=n(97627),s=(0,a.default)(function e(t){var n=this;(0,i.default)(this,e),(0,o.default)(this,"windowRef",void 0),(0,o.default)(this,"postMessage",function(e){var t;return null===(t=n.windowRef)||void 0===t?void 0:t.ReactNativeWebView.postMessage(JSON.stringify(e))}),(0,o.default)(this,"addMessageListener",function(e){var t,r=function(t){return e(t)};return null===(t=n.windowRef)||void 0===t||t.addEventListener("message",r),function(){var e;return null===(e=n.windowRef)||void 0===e?void 0:e.removeEventListener("message",r)}}),this.windowRef=t});t.WebviewMessenger=s,t.DebugWebviewMessenger=function(e){var t=(0,c.debug)("WebviewMessenger");return{postMessage:function(n){"response"!==n.action&&t("- OUT",n),e.postMessage(n)},addMessageListener:function(t){return e.addMessageListener(t)}}}},81712:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewService=void 0;var a=r(n(19723)),i=r(n(65105)),o=r(n(64512)),c=(0,a.default)(function e(t){var n=this;(0,i.default)(this,e),(0,o.default)(this,"close",void 0),(0,o.default)(this,"remoteHandle",void 0),(0,o.default)(this,"call",function(e){for(var t,r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return(t=n.remoteHandle).call.apply(t,[e].concat(a))}),(0,o.default)(this,"closeMessenger",function(){return n.close()}),this.remoteHandle=t.remoteHandle(),this.close=function(){return t.close()}});t.WebviewService=c},22960:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(55260);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))});var a=n(46311);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var i=n(17955);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))})},46311:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isWebDevMode=t.isThemeArg=t.isNativeDevMode=t.isFlagshipUiArgsArray=t.interpolate=t.getErrorMessage=void 0;var a=r(n(36687)),i=n(55260);t.interpolate=function(e,t){if(!t)return e;var n=Object.keys(t),r=Object.values(t),i=(0,a.default)(Function,n.concat(["return `".concat(e,"`;")]));try{return i.apply(void 0,r)}catch(t){return e}},t.isNativeDevMode=function(){try{return!!__DEV__}catch(e){return!1}},t.isWebDevMode=function(){try{return!!__DEVELOPMENT__}catch(e){return!1}},t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.isFlagshipUiArgsArray=function(e){return Array.isArray(e)&&(0,i.isFlagshipUI)(e[0])},t.isThemeArg=function(e){return"string"==typeof e}},40003:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNativeIntentService=t.NativeIntentProvider=void 0;var r,a=n(97627),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(55260),c=n(17955);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var u=(0,a.debug)("NativeIntentProvider");t.getNativeIntentService=function(){if(!r)throw Error("nativeIntentService has not been instantiated in a NativeIntentProvider");return r};var l=function(e){r=e};t.NativeIntentProvider=function(e){var t=e.children,n=e.localMethods,r=(0,i.useRef)(null);return null===r.current&&(r.current=new o.NativeService(n),l(r.current)),(0,i.useEffect)(function(){var e;u("Updating localMethods on nativeIntentService"),null===(e=r.current)||void 0===e||e.updateLocalMethods(n)},[n]),i.default.createElement(c.NativeContext.Provider,{value:r.current},t)}},55319:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewIntentProvider=void 0;var i=a(n(68434)),o=a(n(90402)),c=a(n(82007)),s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),u=n(97627),l=n(55260),d=n(17955),f=n(46311);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var h=(0,u.debug)("WebviewIntentProvider"),m=function(){try{if(cozy.bar&&void 0===cozy.bar.setWebviewContext)return h(l.strings.errorCozyBarAPIMissing);return cozy.bar.setWebviewContext}catch(e){return}},v=(r=(0,c.default)(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var a;return a=l.strings.webviewIsRendered,window.ReactNativeWebView.postMessage(JSON.stringify({type:l.strings.postMeSignature,message:a})),r=new l.WebviewMessenger(window),e.next=4,(0,u.ChildHandshake)((0,f.isWebDevMode)()?(0,l.DebugWebviewMessenger)(r):r,n);case 4:t(e.sent);case 6:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),y=function(){var e;return null!==(e=window.cozy)&&void 0!==e&&!!e.flagship&&(void 0!==window.ReactNativeWebView||(h(l.strings.flagshipButNoRNAPI),!1))};t.WebviewIntentProvider=function(e){var t=e.children,n=e.methods,r=e.setBarContext,a=e.webviewService,i=(0,s.useState)(),c=(0,o.default)(i,2),u=c[0],f=c[1],p=(0,s.useState)(a),b=(0,o.default)(p,2),g=b[0],x=b[1],w=r||m();return(0,s.useEffect)(function(){!u&&!a&&y()&&v(f,n).catch(h)},[u,a,n]),(0,s.useEffect)(function(){!g&&u&&x(new l.WebviewService(u))},[g,u]),(0,s.useEffect)(function(){w&&g&&w(g)},[w,g]),s.default.createElement(d.WebviewContext.Provider,{value:g},t)}},84476:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.NativeContext=void 0;var a=r(n(67294)).default.createContext(void 0);t.NativeContext=a},50108:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewContext=void 0;var a=r(n(67294)).default.createContext(void 0);t.WebviewContext=a},74625:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useIsAvailable=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=n(83224),u=n(46311);t.useIsAvailable=function(e){var t=(0,s.useWebviewIntent)(),n=(0,c.useState)(null),r=(0,o.default)(n,2),l=r[0],d=r[1],f=(0,c.useState)(void 0),p=(0,o.default)(f,2),h=p[0],m=p[1];return(0,c.useEffect)(function(){if(t){var n;(n=(0,i.default)(a.default.mark(function n(){var r;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.call("isAvailable",e);case 3:if("boolean"==typeof(r=n.sent)){n.next=6;break}throw Error("Invalid result from isAvailable method: ".concat(r));case 6:m(void 0),d(r),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),m((0,u.getErrorMessage)(n.t0)),d(!1);case 14:case"end":return n.stop()}},n,null,[[0,10]])})),function(){return n.apply(this,arguments)})()}},[t,e]),{isAvailable:l,error:h}}},55093:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNativeIntent=void 0;var r=n(67294),a=n(17955);t.useNativeIntent=function(){return(0,r.useContext)(a.NativeContext)}},83224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useWebviewIntent=void 0;var r=n(67294),a=n(17955);t.useWebviewIntent=function(){return(0,r.useContext)(a.WebviewContext)}},17955:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40003);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))});var a=n(55319);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var i=n(84476);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var o=n(50108);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var c=n(55093);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))});var s=n(83224);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var u=n(74625);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))})},78043:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.start=function e(t,n,r,a){var d,f,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},h=function(){f&&u.remove(f),d&&d.stopListening()},m=function(){h()},v=new Promise(function(h,v){var y,b=(0,s.pickService)(n,p.filterServices);f=u.insertIntentIframe(n,r,b.href,p.onReadyCallback);var g=b.href.split("/",3).join("/");(d=new l.default({intentId:n.id,origin:g,onReady:function(e){e.source.postMessage(a,e.origin)},onDone:function(e){h(e.data.document),m()},onCancel:function(){h(null),m()},onError:function(e){v(e instanceof Event?s.errorSerializer.deserialize(e.data.error):e),m()},onResize:function(e){var t=e.data,n=t.transition,a=t.dimensions;u.applyStyle(r,(0,c.default)({transition:n},a))},onExposeFrameRemoval:function(e){h({document:e.document,removeIntentIframe:function(){return u.remove(f)}})},onCompose:(y=(0,o.default)(i.default.mark(function n(a){var o,s,l,d,p,h,m,v;return i.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=(o=a.data).action,l=o.doctype,d=o.data,p=a.source,h=a.origin,n.next=4,t(s,l,d);case 4:return m=n.sent,u.hide(f),n.prev=6,n.next=9,e(t,m,r,(0,c.default)({},d,{exposeIntentFrameRemoval:!1}));case 9:v=n.sent,p.postMessage(v,h);case 11:return n.prev=11,u.show(f),n.finish(11);case 14:case"end":return n.stop()}},n,null,[[6,,11,14]])})),function(e){return y.apply(this,arguments)})})).listen()});return v.destroy=h,v};var i=a(n(68434)),o=a(n(82007)),c=a(n(24789)),s=n(75813),u=r(n(69564)),l=a(n(93326))},69564:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hide=function(e){e.style.display="none"},t.show=function(e){e.style.display="block"},t.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.iframeFromIntent=i,t.insertIntentIframe=function(e,t,n,r){a(t);var o=i(e,t,n);return"function"==typeof r&&(o.onload=r),t.appendChild(o),o.focus(),o},t.assertOKForIntentIframe=t.applyStyle=void 0;var n=function(e){return e+"px"},r={width:n,height:n,maxWidth:n,maxHeight:n};t.applyStyle=function(e,t){Object.keys(t).forEach(function(n){var a=t[n];e.style[n]="".concat(r[n]?r[n](a):a)})};var a=function(e){var t=e.ownerDocument;if(!t)throw console.warn("assertProperForIframe: bad node",e),Error("Cannot retrieve document object from given node");if(!t.defaultView)throw console.warn("assertProperForIframe: bad document",t),Error("Cannot retrieve window object from document")};function i(e,t,n){var r=t.ownerDocument;if(!r)throw Error("Cannot retrieve document object from given node");var a=r.createElement("iframe");return a.setAttribute("id","intent-".concat(e.id)),a.setAttribute("src",n),a.classList.add("coz-intent"),a}t.assertOKForIntentIframe=a},75813:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeQueryString=t.buildRedirectionURL=t.pickService=t.errorSerializer=void 0;var n,r=(n=function(e,t){return["name","message"].reduce(function(n,r){return e[r]&&(t[r]=e[r]),n},Object.assign(t,e))},{serialize:function(e){return n(e,{})},deserialize:function(e){return n(e,Error(e.message))}});t.errorSerializer=r,t.pickService=function(e,t){var n=e.attributes.services||[],r=t?n.find(t):n[0];if(!r)throw Error("Unable to find a service");return r},t.buildRedirectionURL=function(e,t){var n=Object.keys(t).filter(function(e){return!["object","function"].includes(typeof t[e])}).map(function(e){return"".concat(e,"=").concat(t[e])});return n.length?"".concat(e,"?").concat(n.join("&")):e},t.removeQueryString=function(e){return e.replace(/\?[^/#]*/,"")}},9420:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"Intents",{enumerable:!0,get:function(){return a.default}});var a=r(n(3633))},3633:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(65105)),s=a(n(19723)),u=r(n(78043)),l=r(n(7295)),d=a(n(98395)),f=n(75813),p=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.client;(0,c.default)(this,n),this.request=new d.default(t),this.create=this.create.bind(this)}return(0,s.default)(n,[{key:"create",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!e)throw Error('Misformed intent, "action" property must be provided');if(!t)throw Error('Misformed intent, "type" property must be provided');var i=this.request.post(e,t,r,a);return i.start=function(e,t){var a,o={filteredServices:r.filteredServices,onReadyCallback:t};delete r.filteredServices;var c=i.then(function(t){return a=u.start(n.create,t,e,r,o)});return c.stop=function(){a&&a.destroy()},c},i}},{key:"createService",value:function(e,t){return l.start(this.request)(e,t)}},{key:"getRedirectionURL",value:(e=(0,o.default)(i.default.mark(function e(t,n){var r,a,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t&&!n)){e.next=2;break}throw Error("Cannot retrieve redirection, at least type or doc must be provided");case 2:return e.next=4,this.create("REDIRECT",t,n);case 4:return r=e.sent,a=(0,f.pickService)(r),o=(0,f.removeQueryString)(a.href),e.abrupt("return",n?(0,f.buildRedirectionURL)(o,n):o);case 8:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"redirect",value:(t=(0,o.default)(i.default.mark(function e(t,n,r){var a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window){e.next=2;break}throw Error("redirect() method can only be called in a browser");case 2:return e.next=4,this.getRedirectionURL(t,n);case 4:if(a=e.sent,!(r&&"function"==typeof r)){e.next=7;break}return e.abrupt("return",r(a));case 7:window.location.href=a;case 8:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})}]),n}();t.default=p},93326:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=/intent-(.*):(.*)/,c=function(){function e(t){(0,a.default)(this,e),this.state={handshaken:!1},this.options=t,this.handleMessageWrapper=this.handleMessageWrapper.bind(this)}return(0,i.default)(e,[{key:"handleMessage",value:function(e){if(e.origin===this.options.origin){var t=e.data.type;if("load"===t){console.warn&&console.warn("Cozy Client ignored MessageEvent having data.type `load`.");return}var n=o.exec(t);if(!n){console.warn("intents: Message type ".concat(t," not matching intent format"));return}var r=n[1];s(r==this.options.intentId,"Invalid event id","eventId: ".concat(r," != listener eventId ").concat(this.options.intentId));var a=n[2];"ready"!==a?s(this.state.handshaken,"Unexpected handshake message from intent service"):this.state.handshaken=!0;var i=this.options["on"+u(a)];if(i)return i(e);console.warn("intents: Unhandled event ".concat(a))}}},{key:"handleMessageWrapper",value:function(e){try{this.handleMessage(e)}catch(e){this.options.onError(e)}}},{key:"listen",value:function(){window.addEventListener("message",this.handleMessageWrapper)}},{key:"stopListening",value:function(){window.removeEventListener("message",this.handleMessageWrapper)}}]),e}();t.default=c;var s=function(e,t,n){if(!e)throw n&&console.warn(n),Error(t)},u=function(e){return e[0].toUpperCase()+e.slice(1)}},98395:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=function(){function e(t){(0,a.default)(this,e),this.stackClient=t.stackClient}return(0,i.default)(e,[{key:"get",value:function(e){return this.stackClient.fetchJSON("GET","/intents/".concat(e)).then(function(e){var t=e.data;return t._id||(t._id=t.id),t})}},{key:"post",value:function(e,t,n,r){return this.stackClient.fetchJSON("POST","/intents",{data:{type:"io.cozy.intents",attributes:{action:e,type:t,data:n,permissions:r}}}).then(function(e){return e.data})}}]),e}();t.default=o},7295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=void 0;var r=n(75813);function a(e){e&&e.style&&(e.style.height="100%")}t.start=function(e){return function(t,n){var i=n||"undefined"!=typeof window&&window;if(!i||!i.document)return Promise.reject(Error("Intent service should be used in browser"));i.addEventListener("load",function(){var e=i.document;[e.documentElement,e.body].forEach(a)});var o=t||i.location.search.split("=")[1];return o?e.get(o).then(function(e){var t=!1,n=function(n){if(t)throw Error("Intent service has already been terminated");i.parent.postMessage(n,e.attributes.client)},a=function(t,r,a){return new Promise(function(o){i.addEventListener("message",function t(n){if(n.origin===e.attributes.client)return i.removeEventListener("message",t),o(n.data)}),n({type:"intent-".concat(e._id,":compose"),action:t,doctype:r,data:a})})},o=function(e){n(e),t=!0},c=function(r,a){if(t)throw Error("Intent service has been terminated");n({type:"intent-".concat(e._id,":resize"),dimensions:r.element?Object.assign({},r,{maxHeight:r.element.clientHeight,maxWidth:r.element.clientWidth}):r,transition:a})},s=function(){o({type:"intent-".concat(e._id,":cancel")})};return i.addEventListener("unload",function(){t||s()}),new Promise(function(t){i.addEventListener("message",function n(r){r.origin===e.attributes.client&&(i.removeEventListener("message",n),t(r.data))}),i.parent.postMessage({type:"intent-".concat(e._id,":ready")},e.attributes.client)}).then(function(t){return{compose:a,getData:function(){return t},getIntent:function(){return e},terminate:function(n){var r=t&&t.exposeIntentFrameRemoval?"exposeFrameRemoval":"done";return o({type:"intent-".concat(e._id,":").concat(r),document:n})},throw:function(t){return o({type:"intent-".concat(e._id,":error"),error:r.errorSerializer.serialize(t)})},resizeClient:c,cancel:s}})}):Promise.reject(Error("Cannot retrieve intent from URL"))}}},46553:function(e){"use strict";var t=function(e){return Object.assign(this,e),this};t.prototype.toString=function(){throw Error("Cannot convert Secret to string")},e.exports=t},33918:function(e,t,n){"use strict";var r=n(34155);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=n(46553),o=n(87593),c=o.filterLevel,s=o.filterSecrets,u=r.env.LOG_LEVEL||"debug",l=n(36865),d=[c,s],f=function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw o}}}}(d);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!1===n.apply(null,arguments))return!0}}catch(e){t.e(e)}finally{t.f()}return!1};function p(e,t,n,r){!f(u,e,t,n,r)&&console.log(l(e,t,n,r))}p.addFilter=function(e){return d.push(e)},p.setLevel=function(e){u=e},["debug","info","warn","error","ok","critical"].forEach(function(e){p[e]=function(t,n,r){return p(e,t,n,r)}}),e.exports=p,p.setNoRetry=function(e){return e?e.no_retry=!0:e={no_retry:!0},e.no_retry},p.Secret=i,p.namespace=function(e){return function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;p(t,n,r,a)}}},87593:function(e,t,n){"use strict";var r={secret:0,debug:10,info:20,warn:30,error:40,ok:50,critical:50},a=n(46553);e.exports={filterSecrets:function(e,t,n){if("secret"!==t&&n instanceof a)throw Error("You should log a secret with log.secret")},filterLevel:function(e,t){return r[t]>=r[e]}}},36865:function(e,t,n){"use strict";n(62481);var r=n(62481);e.exports=r},62481:function(e,t,n){"use strict";var r=n(64530);e.exports=function(e,t,n,a){var i={time:new Date,type:e,label:n,namespace:a};"object"==typeof t?(t&&t.no_retry&&(i.no_retry=t.no_retry),t&&t.message&&(i.message=t.message)):i.message=t,i.message&&i.message.stack&&(i.message=i.message.stack);var o=i;try{o=r(i).substr(0,65535)}catch(e){console.log(e.message,"cozy-logger: Failed to convert message to JSON")}return o}},7756:function(e,t,n){"use strict";var r=n(26465),a={debug:1,info:2,warn:3,error:4};function i(){this.enabled=!0,this.defaultResult=!0,this.clear()}function o(e,t){return e.n.test?e.n.test(t):e.n==t}r.mixin(i),i.prototype.allow=function(e,t){return this._white.push({n:e,l:a[t]}),this},i.prototype.deny=function(e,t){return this._black.push({n:e,l:a[t]}),this},i.prototype.clear=function(){return this._white=[],this._black=[],this},i.prototype.test=function(e,t){var n,r=Math.max(this._white.length,this._black.length);for(n=0;n<r;n++){if(this._white[n]&&o(this._white[n],e)&&a[t]>=this._white[n].l)return!0;if(this._black[n]&&o(this._black[n],e)&&a[t]<=this._black[n].l)return!1}return this.defaultResult},i.prototype.write=function(e,t,n){if(!this.enabled||this.test(e,t))return this.emit("item",e,t,n)},e.exports=i},94731:function(e,t,n){"use strict";var r=n(26465),a=n(7756),i=new r,o=Array.prototype.slice;(t=e.exports=function(e){var n=function(){return i.write(e,void 0,o.call(arguments)),n};return n.debug=function(){return i.write(e,"debug",o.call(arguments)),n},n.info=function(){return i.write(e,"info",o.call(arguments)),n},n.warn=function(){return i.write(e,"warn",o.call(arguments)),n},n.error=function(){return i.write(e,"error",o.call(arguments)),n},n.group=function(){return i.write(e,"group",o.call(arguments)),n},n.groupEnd=function(){return i.write(e,"groupEnd",o.call(arguments)),n},n.log=n.debug,n.suggest=t.suggest,n.format=i.format,n}).defaultBackend=t.defaultFormatter=null,t.pipe=function(e){return i.pipe(e)},t.end=t.unpipe=t.disable=function(e){return i.unpipe(e)},t.Transform=r,t.Filter=a,t.suggest=new a,t.enable=function(){return t.defaultFormatter?i.pipe(t.suggest).pipe(t.defaultFormatter).pipe(t.defaultBackend):i.pipe(t.suggest).pipe(t.defaultBackend)}},26465:function(e,t,n){"use strict";function r(){}n(37203).mixin(r),r.prototype.write=function(e,t,n){this.emit("item",e,t,n)},r.prototype.end=function(){this.emit("end"),this.removeAllListeners()},r.prototype.pipe=function(e){var t=this;function n(){e.write.apply(e,Array.prototype.slice.call(arguments))}function r(){e._isStdio||e.end()}return t.emit("unpipe",e),e.emit("pipe",t),t.on("item",n),t.on("end",r),t.when("unpipe",function(a){var i=a===e||void 0===a;return i&&(t.removeListener("item",n),t.removeListener("end",r),e.emit("unpipe")),i}),e},r.prototype.unpipe=function(e){return this.emit("unpipe",e),this},r.prototype.format=function(){throw Error("Warning: .format() is deprecated in Minilog v2! Use .pipe() instead. For example:\nvar Minilog = require('minilog');\nMinilog\n  .pipe(Minilog.backends.console.formatClean)\n  .pipe(Minilog.backends.console);")},r.mixin=function(e){var t,n=r.prototype;for(t in n)n.hasOwnProperty(t)&&(e.prototype[t]=n[t])},e.exports=r},93601:function(e,t,n){"use strict";var r=n(26465),a=[],i=new r;i.write=function(e,t,n){a.push([e,t,n])},i.get=function(){return a},i.empty=function(){a=[]},e.exports=i},90115:function(e,t,n){"use strict";var r=n(26465),a=/\n+$/,i=new r;i.write=function(e,t,n){var r=n.length-1;if("undefined"!=typeof console&&console.log){if(console.log.apply)return console.log.apply(console,[e,t].concat(n));if(JSON&&JSON.stringify){n[r]&&"string"==typeof n[r]&&(n[r]=n[r].replace(a,""));try{for(r=0;r<n.length;r++)n[r]=JSON.stringify(n[r])}catch(e){}console.log(n.join(" "))}}},i.formatters=["color","minilog"],i.color=n(82035),i.minilog=n(26687),e.exports=i},82035:function(e,t,n){"use strict";var r=n(26465),a=n(20477),i={debug:["cyan"],info:["purple"],warn:["yellow",!0],error:["red",!0]},o=new r;o.write=function(e,t,n){var r=console.log;console[t]&&console[t].apply&&(0,console[t]).apply(console,["%c"+e+" %c"+t,a("gray"),a.apply(a,i[t])].concat(n))},o.pipe=function(){},e.exports=o},26687:function(e,t,n){"use strict";var r=n(26465),a=n(20477),i={debug:["gray"],info:["purple"],warn:["yellow",!0],error:["red",!0]},o=new r;o.write=function(e,t,n){var r=console.log;"debug"!=t&&console[t]&&(r=console[t]);var o=0;if("info"!=t){for(;o<n.length&&"string"==typeof n[o];o++);r.apply(console,["%c"+e+" "+n.slice(0,o).join(" "),a.apply(a,i[t])].concat(n.slice(o)))}else r.apply(console,["%c"+e,a.apply(a,i[t])].concat(n))},o.pipe=function(){},e.exports=o},20477:function(e){"use strict";var t={black:"#000",red:"#c23621",green:"#25bc26",yellow:"#bbbb00",blue:"#492ee1",magenta:"#d338d3",cyan:"#33bbc8",gray:"#808080",purple:"#708"};e.exports=function(e,n){return n?"color: #fff; background: "+t[e]+";":"color: "+t[e]+";"}},74450:function(e,t,n){"use strict";var r=n(94731),a=r.enable,i=r.disable,o="undefined"!=typeof navigator&&/chrome/i.test(navigator.userAgent),c="undefined"!=typeof navigator&&"ReactNative"===navigator.product,s=n(90115);if(r.defaultBackend=o||c?s.minilog:s,"undefined"!=typeof window){try{r.enable(JSON.parse(window.localStorage.minilogSettings))}catch(e){}if(window.location&&window.location.search){var u=RegExp("[?&]minilog=([^&]*)").exec(window.location.search);u&&r.enable(decodeURIComponent(u[1]))}}r.enable=function(){a.call(r,!0);try{window.localStorage.minilogSettings=JSON.stringify(!0)}catch(e){}return this},r.disable=function(){i.call(r);try{delete window.localStorage.minilogSettings}catch(e){}return this},(e.exports=r).backends={array:n(93601),browser:r.defaultBackend,localStorage:n(19377),jQuery:n(85791)}},85791:function(e,t,n){"use strict";var r=n(26465),a=new Date().valueOf().toString(36);function i(e){this.url=e.url||"",this.cache=[],this.timer=null,this.interval=e.interval||3e4,this.enabled=!0,this.jQuery=window.jQuery,this.extras={}}r.mixin(i),i.prototype.write=function(e,t,n){this.timer||this.init(),this.cache.push([e,t].concat(n))},i.prototype.init=function(){if(this.enabled&&this.jQuery){var e=this;this.timer=setTimeout(function(){var t,n,r=[],i=e.url;if(0==e.cache.length)return e.init();for(t=0;t<e.cache.length;t++)try{JSON.stringify(e.cache[t]),r.push(e.cache[t])}catch(e){}e.jQuery.isEmptyObject(e.extras)?(n=JSON.stringify({logs:r}),i=e.url+"?client_id="+a):n=JSON.stringify(e.jQuery.extend({logs:r},e.extras)),e.jQuery.ajax(i,{type:"POST",cache:!1,processData:!1,data:n,contentType:"application/json",timeout:1e4}).success(function(t){t.interval&&(e.interval=Math.max(1e3,t.interval))}).error(function(){e.interval=3e4}).always(function(){e.init()}),e.cache=[]},this.interval)}},i.prototype.end=function(){},i.jQueryWait=function(e){if("undefined"!=typeof window&&(window.jQuery||window.$))return e(window.jQuery||window.$);"undefined"!=typeof window&&setTimeout(function(){i.jQueryWait(e)},200)},e.exports=i},19377:function(e,t,n){"use strict";var r=n(26465),a=!1,i=new r;i.write=function(e,t,n){if("undefined"!=typeof window&&"undefined"!=typeof JSON&&JSON.stringify&&JSON.parse)try{a||(a=window.localStorage.minilog?JSON.parse(window.localStorage.minilog):[]),a.push([new Date().toString(),e,t,n]),window.localStorage.minilog=JSON.stringify(a)}catch(e){}},e.exports=i},16151:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=function(){function e(t){(0,a.default)(this,e),this.tokenType=t.tokenType||t.token_type,this.accessToken=t.accessToken||t.access_token,this.refreshToken=t.refreshToken||t.refresh_token,this.scope=t.scope}return(0,i.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.accessToken}},{key:"toBasicAuth",value:function(){return"user:".concat(this.accessToken,"@")}},{key:"toJSON",value:function(){return{tokenType:this.tokenType,accessToken:this.accessToken,refreshToken:this.refreshToken,scope:this.scope}}}],[{key:"fromJSON",value:function(t){return new e({tokenType:t.tokenType,accessToken:t.accessToken,refreshToken:t.refreshToken,scope:t.scope})}}]),e}();t.default=o},65730:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getReplicationURL=void 0;var i=a(n(98235)),o=a(n(68434)),c=a(n(82007)),s=a(n(65105)),u=a(n(19723)),l=a(n(25665)),d=a(n(27952)),f=a(n(12323)),p=a(n(64512)),h=n(206),m=a(n(34525)),v=a(n(36721)),y=a(n(57557)),b=a(n(91747)),g=a(n(66604)),x=a(n(35905)),w=a(n(23279)),k=a(n(89385)),O=n(12503),_=r(n(71241)),E=a(n(77050)),S=n(54481),C=a(n(1797)),P=n(19820),j=n(2105),A=n(81309),D=n(72763);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,p.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}m.default.plugin(v.default);var I=k.default.find,N=k.default.allDocs,F=k.default.withoutDesignDocuments,z=function(e,t){if(!t.ok)throw Error("Pouch response is not OK");return R(R({},e),(0,y.default)(t,"ok"))},L={replicationInterval:3e4},B=function(e){return(0,y.default)(e,"_type")},U=function(e,t,n){var r=t.toBasicAuth(),a=e.replace("//","//".concat(r));return"".concat(a,"/data/").concat(n)};t.getReplicationURL=U;var H=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},G=function(e){(0,l.default)(eo,e);var t,n,r,a,p,v,M,G,W,q,V,Q,Z,Y,J,K,$,X,ee,et,en,er,ea,ei=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(eo);return e=t?Reflect.construct(n,arguments,(0,f.default)(this).constructor):n.apply(this,arguments),(0,d.default)(this,e)});function eo(e){(0,s.default)(this,eo);var t,n,r=(0,b.default)({},e,L);n=ei.call(this,r);var a=r.doctypes,i=r.doctypesReplicationOptions,o=r.periodicSync,c=r.initialSync,u=r.syncDebounceDelayInMs,l=r.syncDebounceMaxDelayInMs,d=r.performanceApi;if(n.options=r,!a)throw Error("PouchLink must be instantiated with doctypes it manages. Ex: ['io.cozy.bills']");return n.doctypes=a,n.doctypesReplicationOptions=i,n.indexes={},n.storage=new S.PouchLocalStorage((null===(t=r.platform)||void 0===t?void 0:t.storage)||j.platformWeb.storage),n.initialSync=null!=c&&c,n.periodicSync=null==o||o,n.replicationStatus=n.replicationStatus||{},n.startReplicationDebounced=(0,w.default)(n._startReplication,u||1e4,{maxWait:l||6e5}),n.performanceApi=d||h.defaultPerformanceApi,n}return(0,u.default)(eo,[{key:"getReplicationURL",value:function(e){var t=this.client&&this.client.stackClient.uri,n=this.client&&this.client.stackClient.token;if(!n)throw Error("Can't get replication URL since the stack client doesn't have a token");if(!t)throw Error("Can't get replication URL since the stack client doesn't have a URI");return U(t,n,e)}},{key:"registerClient",value:(n=(0,c.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.client=t;case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"migrateAdapter",value:(r=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l,d,f,p,h,v;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.fromAdapter,r=t.toAdapter,a=t.url,i=t.plugins,e.prev=1,c=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return T(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(i);try{for(c.s();!(s=c.n()).done;)u=s.value,m.default.plugin(u)}catch(e){c.e(e)}finally{c.f()}return e.next=6,this.storage.getPersistedSyncedDoctypes();case 6:l=e.sent,d=0,f=Object.keys(l);case 8:if(!(d<f.length)){e.next=19;break}return p=f[d],h=(0,A.getPrefix)(a),v=(0,A.getDatabaseName)(h,p),e.next=14,(0,P.migratePouch)({dbName:v,fromAdapter:n,toAdapter:r});case 14:return e.next=16,this.storage.destroyWarmedUpQueries();case 16:d++,e.next=8;break;case 19:return e.next=21,this.storage.persistAdapterName("indexeddb");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),console.error("PouchLink: PouchDB migration failed. ",e.t0);case 26:case"end":return e.stop()}},e,this,[[1,23]])})),function(e){return r.apply(this,arguments)})},{key:"onLogin",value:(a=(0,c.default)(o.default.mark(function e(){var t,n,r,a,i,c,s=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.client){e.next=3;break}return C.default.warn("PouchLink: no client registered, can't login"),e.abrupt("return");case 3:if(t=this.performanceApi.mark("onLogin"),n=(0,A.getPrefix)(this.client.stackClient.uri),!(this.pouches&&this.pouches.options&&this.pouches.options.prefix!==n)){e.next=16;break}return e.prev=8,e.next=11,this.pouches.destroy();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),C.default.warn("Error while destroying pouch DBs",e.t0);case 16:if(n){e.next=18;break}throw Error("PouchLink: Prefix is required");case 18:if(!(r=null===(a=this.options)||void 0===a?void 0:null===(i=a.pouch)||void 0===i?void 0:null===(c=i.options)||void 0===c?void 0:c.adapter)){e.next=26;break}return e.next=23,this.storage.getAdapterName();case 23:if(e.sent){e.next=26;break}return e.next=26,this.storage.persistAdapterName(r);case 26:return this.pouches=new E.default(this.doctypes,{pouch:this.options.pouch,getReplicationURL:this.getReplicationURL.bind(this),doctypesReplicationOptions:this.doctypesReplicationOptions,onError:function(e){return s.onSyncError(e)},onSync:this.handleOnSync.bind(this),onDoctypeSyncStart:this.handleDoctypeSyncStart.bind(this),onDoctypeSyncEnd:this.handleDoctypeSyncEnd.bind(this),prefix:n,executeQuery:this.executeQuery.bind(this),platform:this.options.platform}),e.next=29,this.pouches.init();case 29:this.client&&this.initialSync&&this.startReplication(),this.performanceApi.measure({markName:t,category:"CozyPouchLink"});case 31:case"end":return e.stop()}},e,this,[[8,13]])})),function(){return a.apply(this,arguments)})},{key:"reset",value:(p=(0,c.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pouches){e.next=3;break}return e.next=3,this.pouches.destroy();case 3:this.pouches=null,this.client=null;case 5:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"handleOnSync",value:function(e){var t,n=(0,g.default)(e,(t=this.client,function(e,n){return e.map(function(e){return _.normalizeDoc(e,n,t)})}));this.client&&this.client.setData(n),this.options.onSync&&this.options.onSync.call(this,n),this.client.emit("pouchlink:sync:end")}},{key:"handleDoctypeSyncStart",value:function(e){this.replicationStatus[e]="replicating",this.client.emit("pouchlink:doctypesync:start",e)}},{key:"handleDoctypeSyncEnd",value:function(e){this.replicationStatus[e]="idle",this.client.emit("pouchlink:doctypesync:end",e)}},{key:"_startReplication",value:function(){this.client.emit("pouchlink:sync:start"),this.periodicSync?this.pouches.startReplicationLoop():this.pouches.replicateOnce(),this.options.onStartReplication&&this.options.onStartReplication.apply(this)}},{key:"startReplication",value:function(){return this.startReplicationDebounced.cancel(),this._startReplication()}},{key:"startReplicationWithDebounce",value:function(){if(this.periodicSync)throw Error("createDebounceableReplication cannot be called when periodic sync is configured");return this.startReplicationDebounced()}},{key:"stopReplication",value:function(){this.pouches.stopReplicationLoop(),this.options.onStopReplication&&this.options.onStopReplication.apply(this),this.client.emit("pouchlink:sync:stop")}},{key:"onSyncError",value:(v=(0,c.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,D.isExpiredTokenError)(t)){e.next=14;break}return e.prev=1,e.next=4,this.client.stackClient.refreshToken();case 4:return this.startReplication(),e.abrupt("return");case 8:e.prev=8,e.t0=e.catch(1),C.default.warn("Could not refresh token, replication has stopped",e.t0),this.options.onSyncError&&this.options.onSyncError.call(this,e.t0);case 12:e.next=16;break;case 14:C.default.warn("CozyPouchLink: Synchronization error",t),this.options.onSyncError&&this.options.onSyncError.call(this,t);case 16:case"end":return e.stop()}},e,this,[[1,8]])})),function(e){return v.apply(this,arguments)})},{key:"getSyncInfo",value:function(e){return this.pouches.getSyncInfo(e)}},{key:"getPouch",value:function(e){return this.pouches.getPouch(e)}},{key:"supportsOperation",value:function(e){var t=(0,h.getDoctypeFromOperation)(e);return(!e.mutationType||!this.doctypesReplicationOptions||!this.doctypesReplicationOptions[t]||"fromRemote"!==this.doctypesReplicationOptions[t].strategy)&&!!this.getPouch(t)}},{key:"request",value:(M=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:null,a=c.length>3&&void 0!==c[3]?c[3]:H,!(null!=n&&n.forceStack)){e.next=4;break}return e.abrupt("return",a(t,n));case 4:if(i=(0,h.getDoctypeFromOperation)(t),this.pouches){e.next=8;break}return e.abrupt("return",a(t,n));case 8:if("not_synced"!==this.pouches.getSyncStatus(i)){e.next=11;break}return e.abrupt("return",a(t,n));case 11:return e.next=13,this.needsToWaitWarmup(i);case 13:if(!e.sent){e.next=16;break}return e.abrupt("return",a(t,n));case 16:if(this.supportsOperation(t)){e.next=19;break}return e.abrupt("return",a(t,n));case 19:if(!t.mutationType){e.next=23;break}return e.abrupt("return",this.executeMutation(t,n,r,a));case 23:return e.abrupt("return",this.executeQuery(t));case 24:case"end":return e.stop()}},e,this)})),function(e,t){return M.apply(this,arguments)})},{key:"getChanges",value:(G=(0,c.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return r=this.getPouch(t),e.abrupt("return",r.changes(n));case 4:case"end":return e.stop()}},e,this)})),function(e,t){return G.apply(this,arguments)})},{key:"getDbInfo",value:(W=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return n=this.getPouch(t),e.abrupt("return",n.info());case 4:case"end":return e.stop()}},e,this)})),function(e){return W.apply(this,arguments)})},{key:"sanitizeJsonApi",value:function(e){var t=B(e);return(0,y.default)(t,["attributes","meta"])}},{key:"persistCozyData",value:(q=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]&&c[1],n=this.performanceApi.mark("persistCozyData"),(r=this.sanitizeJsonApi(t)).cozyLocalOnly=!0,e.next=6,this.getExistingDocument(t._id,t._type);case 6:return(a=e.sent)&&(r._rev=a._rev),i=this.pouches.getPouch(t._type),e.next=11,i.put(r);case 11:this.performanceApi.measure({markName:n,category:"CozyPouchLink"});case 12:case"end":return e.stop()}},e,this)})),function(e){return q.apply(this,arguments)})},{key:"getExistingDocument",value:(V=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,c,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.prev=1,a=this.pouches.getPouch(n),i=this.performanceApi.mark("db.get from getExistingDocument"),e.next=6,a.get(t);case 6:return c=e.sent,this.performanceApi.measure({markName:i,category:"PouchDB"}),e.abrupt("return",c);case 11:if(e.prev=11,e.t0=e.catch(1),!("not_found"===e.t0.name&&!r)){e.next=17;break}return e.abrupt("return",null);case 17:throw e.t0;case 18:case"end":return e.stop()}},e,this,[[1,11]])})),function(e,t){return V.apply(this,arguments)})},{key:"needsToWaitWarmup",value:(Q=(0,c.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.doctypesReplicationOptions&&this.doctypesReplicationOptions[t]&&this.doctypesReplicationOptions[t].warmupQueries)){e.next=4;break}return e.next=3,this.pouches.areQueriesWarmedUp(t,this.doctypesReplicationOptions[t].warmupQueries);case 3:return e.abrupt("return",!e.sent);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e,this)})),function(e){return Q.apply(this,arguments)})},{key:"hasIndex",value:function(e){return!!this.indexes[e]}},{key:"createIndex",value:(Z=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=l.length>1&&void 0!==l[1]?l[1]:{}).partialFilter,a=n.indexName,i=n.doctype,c="".concat(i,"/").concat(a),s=this.pouches.getPouch(i),e.next=5,s.createIndex({index:{fields:t,ddoc:a,indexName:a,partial_filter_selector:r}});case 5:return u=e.sent,this.indexes[c]=u,e.abrupt("return",u);case 8:case"end":return e.stop()}},e,this)})),function(e){return Z.apply(this,arguments)})},{key:"findExistingIndex",value:function(e,t,n){var r="".concat(e,"/").concat(n);return this.indexes[r]}},{key:"ensureIndex",value:(Y=(0,c.default)(o.default.mark(function e(t,n){var r,a,c,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.indexedFields,a=n.partialFilter,r?a&&(r=(r=Array.from(new Set([].concat((0,i.default)(r),(0,i.default)(Object.keys(a)))))).filter(function(e){return"$and"!==e&&"$or"!==e})):r=(0,O.getIndexFields)(n),c=(0,O.getIndexNameFromFields)(r,a),s=this.findExistingIndex(t,n,c)){e.next=10;break}return e.next=7,this.createIndex(r,{partialFilter:a,indexName:c,doctype:t});case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return Y.apply(this,arguments)})},{key:"executeQuery",value:(J=(0,c.default)(o.default.mark(function e(t){var n,r,a,c,s,u,l,d,f,p,h,m,v,y,b,g,x,w,O,E,S,C;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.doctype,r=t.selector,a=t.sort,c=t.fields,s=t.limit,u=t.id,l=t.ids,d=t.skip,f=t.indexedFields,p=t.partialFilter,h=this.performanceApi.mark("executeQuery"),m=this.getPouch(n),!u){e.next=12;break}return b=this.performanceApi.mark("db.get from executeQuery"),e.next=7,m.get(u);case 7:v=e.sent,this.performanceApi.measure({markName:b,category:"PouchDB"}),y=!1,e.next=47;break;case 12:if(!l){e.next=23;break}return g=this.performanceApi.mark("allDocs from executeQuery with ids"),e.next=16,N(m,{include_docs:!0,keys:l});case 16:v=e.sent,this.performanceApi.measure({markName:g,category:"PouchDB"}),(v=F(v)).total_rows=null,y=!0,e.next=47;break;case 23:if(!(!r&&!p&&!c&&!a)){e.next=33;break}return x=this.performanceApi.mark("allDocs from executeQuery"),e.next=27,N(m,{include_docs:!0,limit:s});case 27:v=e.sent,this.performanceApi.measure({markName:x,category:"PouchDB"}),v=F(v),y=!0,e.next=47;break;case 33:return w=k.default.normalizeFindSelector({selector:r,sort:a,indexedFields:f,partialFilter:p}),O={sort:a,selector:w,fields:c?[].concat((0,i.default)(c),["_id","_rev"]):void 0,limit:s,skip:d},e.next=37,this.ensureIndex(n,R(R({},O),{},{indexedFields:f,partialFilter:p}));case 37:return E=e.sent,O.use_index=E.id,S=this.performanceApi.mark("find from executeQuery"),e.next=42,I(m,O);case 42:v=e.sent,this.performanceApi.measure({markName:S,category:"PouchDB"}),v.offset=d,v.limit=s,y=!0;case 47:return C=_.fromPouchResult({res:v,withRows:y,doctype:n,client:this.client}),this.performanceApi.measure({markName:h,category:"CozyPouchLink"}),e.abrupt("return",C);case 50:case"end":return e.stop()}},e,this)})),function(e){return J.apply(this,arguments)})},{key:"executeMutation",value:(K=(0,c.default)(o.default.mark(function e(t,n,r,a){var i,c,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=this.performanceApi.mark("executeMutation"),e.t0=t.mutationType,e.next=e.t0===h.MutationTypes.CREATE_DOCUMENT?4:e.t0===h.MutationTypes.UPDATE_DOCUMENT?8:e.t0===h.MutationTypes.UPDATE_DOCUMENTS?12:e.t0===h.MutationTypes.DELETE_DOCUMENT?16:e.t0===h.MutationTypes.ADD_REFERENCES_TO?20:24;break;case 4:return e.next=6,this.createDocument(t);case 6:case 10:case 14:case 18:case 22:return c=e.sent,e.abrupt("break",25);case 8:return e.next=10,this.updateDocument(t);case 12:return e.next=14,this.updateDocuments(t);case 16:return e.next=18,this.deleteDocument(t);case 20:return e.next=22,this.addReferencesTo(t);case 24:return e.abrupt("return",a(t,n,r));case 25:return s=_.fromPouchResult({res:c,withRows:!1,doctype:(0,h.getDoctypeFromOperation)(t),client:this.client}),this.performanceApi.measure({markName:i,category:"CozyPouchLink"}),e.abrupt("return",s);case 28:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return K.apply(this,arguments)})},{key:"createDocument",value:($=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbMethod("post",t);case 2:return n=e.sent,e.abrupt("return",z(t.document,n));case 4:case"end":return e.stop()}},e,this)})),function(e){return $.apply(this,arguments)})},{key:"updateDocument",value:(X=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbMethod("put",t);case 2:return n=e.sent,e.abrupt("return",z(t.document,n));case 4:case"end":return e.stop()}},e,this)})),function(e){return X.apply(this,arguments)})},{key:"updateDocuments",value:(ee=(0,c.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.documents,e.next=3,this.dbMethod("bulkDocs",t);case 3:if(r=e.sent,a=(0,x.default)(r,n,function(e,t){return R(R({},t),{},{_id:e.id,_rev:e.rev})}),!r.find(function(e){return!e.ok})){e.next=7;break}throw new h.BulkEditError(r,a);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)})),function(e){return ee.apply(this,arguments)})},{key:"deleteDocument",value:(et=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbMethod("remove",t);case 2:return n=e.sent,r=R(R({},t.document),{},{_id:n.id,_rev:n.rev,_deleted:!0}),e.abrupt("return",z(r,n));case 5:case"end":return e.stop()}},e,this)})),function(e){return et.apply(this,arguments)})},{key:"addReferencesTo",value:(en=(0,c.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("addReferencesTo is not implemented in CozyPouchLink");case 1:case"end":return e.stop()}},e)})),function(e){return en.apply(this,arguments)})},{key:"dbMethod",value:(er=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,c,s,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.performanceApi.mark("dbMethod ".concat(t)),a=(0,h.getDoctypeFromOperation)(n),i=n.document,c=n.documents,s=this.getPouch(a),e.prev=4,!c){e.next=11;break}return e.next=8,s[t](c.map(function(e){return B(e)}));case 8:case 14:u=e.sent,e.next=18;break;case 11:if(!i){e.next=17;break}return e.next=14,s[t](B(i));case 17:throw Error("A mutation should either have document or documents member.");case 18:return this.performanceApi.measure({markName:r,category:"PouchDB"}),e.abrupt("return",u);case 22:throw e.prev=22,e.t0=e.catch(4),this.performanceApi.measure({markName:r,measureName:"".concat(r," error"),category:"PouchDB",color:"error"}),Error("Coud not apply mutation: ".concat(e.t0.message));case 26:case"end":return e.stop()}},e,this,[[4,22]])})),function(e,t){return er.apply(this,arguments)})},{key:"syncImmediately",value:(ea=(0,c.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.pouches){e.next=3;break}return C.default.warn("Cannot sync immediately, no PouchManager"),e.abrupt("return");case 3:this.pouches.syncImmediately();case 4:case"end":return e.stop()}},e,this)})),function(){return ea.apply(this,arguments)})}]),eo}(h.CozyLink);(0,p.default)(G,"getPouchAdapterName",function(e){return new S.PouchLocalStorage(e||j.platformWeb.storage).getAdapterName()}),t.default=G},77050:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(17204)),u=r(n(84486)),l=r(n(27361)),d=n(25976),f=n(54481),p=r(n(65826)),h=r(n(1797)),m=n(2105),v=n(51722),y=n(81309),b=function(e){return e.options.as},g=function(){var e,t,n,r,g,x,w,k,O,_;function E(e,t){var n,r,a,i;(0,o.default)(this,E),this.options=t,this.doctypes=e,this.storage=new f.PouchLocalStorage((null===(n=t.platform)||void 0===n?void 0:n.storage)||m.platformWeb.storage),this.PouchDB=(null===(r=t.platform)||void 0===r?void 0:r.pouchAdapter)||m.platformWeb.pouchAdapter,this.isOnline=(null===(a=t.platform)||void 0===a?void 0:a.isOnline)||m.platformWeb.isOnline,this.events=(null===(i=t.platform)||void 0===i?void 0:i.events)||m.platformWeb.events}return(0,c.default)(E,[{key:"init",value:(e=(0,i.default)(a.default.mark(function e(){var t,n,r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.default)(this.options,"pouch.plugins",[]),(n=(0,l.default)(this.options,"pouch.options",{})).view_update_changes_batch_size||(n.view_update_changes_batch_size=1e3),(0,u.default)(t,function(e){return r.PouchDB.plugin(e)}),this.pouches=(0,s.default)(this.doctypes.map(function(e){return[e,new r.PouchDB((0,y.getDatabaseName)(r.options.prefix,e),n)]})),e.next=7,this.storage.getPersistedSyncedDoctypes();case 7:return this.syncedDoctypes=e.sent,e.next=10,this.storage.getPersistedWarmedUpQueries();case 10:this.warmedUpQueries=e.sent,this.getReplicationURL=this.options.getReplicationURL,this.doctypesReplicationOptions=this.options.doctypesReplicationOptions||{},this.listenerLaunched=!1,this.ensureDatabasesExistDone=!1,this.startReplicationLoop=this.startReplicationLoop.bind(this),this.stopReplicationLoop=this.stopReplicationLoop.bind(this),this.replicateOnce=this.replicateOnce.bind(this),this.executeQuery=this.options.executeQuery,this.replications=void 0;case 20:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"addListeners",value:function(){this.listenerLaunched||((0,d.isMobileApp)()&&(this.events.addEventListener("pause",this.stopReplicationLoop),this.events.addEventListener("resume",this.startReplicationLoop)),this.events.addEventListener("online",this.startReplicationLoop),this.events.addEventListener("offline",this.stopReplicationLoop),this.listenerLaunched=!0)}},{key:"removeListeners",value:function(){this.listenerLaunched&&((0,d.isMobileApp)()&&(this.events.removeEventListener("pause",this.stopReplicationLoop),this.events.removeEventListener("resume",this.startReplicationLoop)),this.events.removeEventListener("online",this.startReplicationLoop),this.events.removeEventListener("offline",this.stopReplicationLoop),this.listenerLaunched=!1)}},{key:"destroy",value:(t=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.stopReplicationLoop(),this.removeListeners(),e.next=4,this.clearSyncedDoctypes();case 4:return e.next=6,this.clearWarmedUpQueries();case 6:return e.next=8,this.storage.destroy();case 8:return e.abrupt("return",(0,y.allSettled)(Object.values(this.pouches).map(function(e){return e.destroy()})));case 9:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"ensureDatabasesExist",value:(n=(0,i.default)(a.default.mark(function e(){var t=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ensureDatabasesExistDone){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return e.abrupt("return",Promise.all(Object.values(this.pouches).map(function(e){return e.info()})).then(function(){h.default.info("PouchManager: ensure databases exist done"),t.ensureDatabasesExistDone=!0}));case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"startReplicationLoop",value:(r=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureDatabasesExist();case 2:if(!this.replicationLoop){e.next=5;break}return h.default.warn("Replication loop already started"),e.abrupt("return");case 5:return t=this.options.replicationDelay||3e4,this.replicationLoop=new p.default(this.replicateOnce,t),this.replicationLoop.start(),this.addListeners(),e.abrupt("return",this.replicationLoop);case 11:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"stopReplicationLoop",value:function(){this.replicationLoop&&(h.default.info("PouchManager: Stop replication loop"),this.replicationLoop.stop(),this.replicationLoop=null)}},{key:"syncImmediately",value:function(){if(!this.replicationLoop){h.default.warn("No replication loop, cannot syncImmediately");return}this.replicationLoop.scheduleImmediateTask()}},{key:"replicateOnce",value:(g=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,v.replicateOnce)(this));case 1:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"handleReplicationError",value:function(e){var t="";e instanceof AggregateError&&(t=(0,y.formatAggregatedError)(e)),h.default.warn("PouchManager: Error during replication - ".concat(e.message).concat(t)),this.stopReplicationLoop(),this.options.onError&&this.options.onError(e)}},{key:"cancelCurrentReplications",value:function(){if(!this.replications){h.default.warn("PouchManager: No current replications");return}Object.values(this.replications).forEach(function(e){return e.cancel&&e.cancel()})}},{key:"waitForCurrentReplications",value:function(){return this.replications?Promise.all(Object.values(this.replications)):Promise.resolve()}},{key:"getPouch",value:function(e){return this.pouches[e]}},{key:"updateSyncInfo",value:(x=(0,i.default)(a.default.mark(function e(t){var n,r=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"synced",this.syncedDoctypes[t]={date:new Date().toISOString(),status:n},e.next=4,this.storage.persistSyncedDoctypes(this.syncedDoctypes);case 4:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"getSyncInfo",value:function(e){return this.syncedDoctypes&&this.syncedDoctypes[e]}},{key:"getSyncStatus",value:function(e){var t=this.getSyncInfo(e);return(null==t?void 0:t.status)||"not_synced"}},{key:"clearSyncedDoctypes",value:(w=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.syncedDoctypes={},e.next=3,this.storage.destroySyncedDoctypes();case 3:case"end":return e.stop()}},e,this)})),function(){return w.apply(this,arguments)})},{key:"warmupQueries",value:(k=(0,i.default)(a.default.mark(function e(t,n){var r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.warmedUpQueries[t]||(this.warmedUpQueries[t]=[]),e.prev=1,e.next=4,Promise.all(n.map(function(){var e=(0,i.default)(a.default.mark(function e(n){var i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=b(n),r.warmedUpQueries[t].includes(i)){e.next=5;break}return e.next=4,r.executeQuery(n.definition().toDefinition());case 4:r.warmedUpQueries[t].push(i);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:return e.next=6,this.storage.persistWarmedUpQueries(this.warmedUpQueries);case 6:h.default.log("PouchManager: warmupQueries for "+t+" are done"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),h.default.error("PouchManager: Could not warm up queries for "+t,e.t0),delete this.warmedUpQueries[t];case 13:case"end":return e.stop()}},e,this,[[1,9]])})),function(e,t){return k.apply(this,arguments)})},{key:"checkToWarmupDoctype",value:function(e,t){!this.warmedUpQueries[e]&&t.warmupQueries&&this.warmupQueries(e,t.warmupQueries)}},{key:"areQueriesWarmedUp",value:(O=(0,i.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.getPersistedWarmedUpQueries();case 2:return r=e.sent,e.abrupt("return",n.every(function(e){return r[t]&&r[t].includes(b(e))}));case 4:case"end":return e.stop()}},e,this)})),function(e,t){return O.apply(this,arguments)})},{key:"clearWarmedUpQueries",value:(_=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.warmedUpQueries={},e.next=3,this.storage.destroyWarmedUpQueries();case 3:case"end":return e.stop()}},e,this)})),function(){return _.apply(this,arguments)})}]),E}();t.default=g},72763:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isExpiredTokenError=void 0;var n=/Expired token/,r=/Invalid JWT token/,a=/Invalid token/,i=function(e){var t=e.message,i=e.name;return n.test(t)||n.test(i)||r.test(t)||r.test(i)||a.test(t)||a.test(i)};t.isExpiredTokenError=function(e){return e instanceof AggregateError?e.errors.some(function(e){return i(e)}):i(e)}},89385:function(e,t,n){"use strict";var r,a,i,o,c=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(n(68434)),u=c(n(98235)),l=c(n(82007)),d=c(n(64512)),f=c(n(82492)),p=c(n(10240)),h=c(n(1797));function m(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return v(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g={},x=["cordova-sqlite","websql"];g.isAdapterBugged=function(e){return x.includes(e)},g.withoutDesignDocuments=function(e){var t=e.rows.filter(function(e){return!(0,p.default)(e.id,"_design/")});return b(b({},e),{},{rows:t,total_rows:t.length})},g.getDocs=(r=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o,c,l=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return null===(r=l.length>2&&void 0!==l[2]?l[2]:{}).limit&&delete r.limit,a=r.limit,i="allDocs"===n?"rows":"docs",g.isAdapterBugged(t.adapter)&&(void 0===a||a>999)&&(r.limit=999,r.skip=r.skip||0),e.next=7,t[n](r);case 7:if((o=e.sent)[i].length!==r.limit||(r.skip=(r.skip?r.skip:0)+r.limit,r.limit=a?a-r.limit:void 0,!(r.limit>0||void 0===r.limit))){e.next=16;break}return e.next=14,g.getDocs(t,n,r);case 14:return c=e.sent,e.abrupt("return",b(b({},o),{},(0,d.default)({},i,[].concat((0,u.default)(o[i]),(0,u.default)(c[i])))));case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),g.allDocs=(a=(0,l.default)(s.default.mark(function e(t){var n,r=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",g.getDocs(t,"allDocs",n));case 2:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),g.find=(i=(0,l.default)(s.default.mark(function e(t){var n,r=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",g.getDocs(t,"find",n));case 2:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),g.isDesignDocument=function(e){return(0,p.default)(e._id,"_design")},g.isDeletedDocument=function(e){return e._deleted},g.insertBulkDocs=(o=(0,l.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.bulkDocs(n,{new_edits:!1}));case 1:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)}),g.normalizeFindSelector=function(e){var t=e.selector,n=e.sort,r=e.indexedFields,a=e.partialFilter,i=t||{};if(r){var o,c=m(r);try{for(c.s();!(o=c.n()).done;){var s=o.value;if(!Object.keys(i).includes(s)){var u=JSON.stringify(t);h.default.warn("".concat(s," was missing in selector, it has been automatically added from indexed fields. Please consider adding this field to your query's selector as required by PouchDB. The query's selector is: ").concat(u)),i[s]={$gt:null}}}}catch(e){c.e(e)}finally{c.f()}}if(n){var l,d=m(n.flatMap(function(e){return Object.keys(e)}));try{for(d.s();!(l=d.n()).done;){var p=l.value;if(!Object.keys(i).includes(p)){var v=JSON.stringify(t);h.default.warn("".concat(p," was missing in selector, it has been automatically added from sorted fields. Please consider adding this field to your query's selector as required by PouchDB. The query's selector is: ").concat(v)),i[p]={$gt:null}}}}catch(e){d.e(e)}finally{d.f()}}var y=a?(0,f.default)(b({},i),a):i;return Object.keys(y).length>0?y:{_id:{$gt:null}}},t.default=g},70999:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a.default}});var a=r(n(65730))},71241:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.fromPouchResult=t.normalizeDoc=void 0;var a=r(n(64512)),i=n(206);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=function(e,t,n){var r=e._id||e.id,a=e.relationships,i=e.referenced_by,o=e.rev||e._rev,s=c(c({},e),{},{id:r,_id:r,_rev:o,_type:t,relationships:c(c({},a),{},{referenced_by:i})});return s.rev&&delete s.rev,u(s,t,n),s};t.normalizeDoc=s;var u=function(e,t,n){if("io.cozy.apps"===t){var r=(0,i.generateWebLink)({cozyUrl:n.getStackClient().uri,slug:e.slug,subDomainType:n.capabilities.flat_subdomains?"flat":"nested",pathname:"",hash:"",searchParams:[]});e.links={self:"/apps/".concat(e.slug),related:r,icon:"/apps/".concat(e.slug,"/icon/").concat(e.version)}}},l=function(e){return!!e};t.fromPouchResult=function(e){var t=e.res,n=e.withRows,r=e.doctype,a=e.client;if(t.cozyPouchData)return{data:t.cozyPouchData};if(!n)return{data:Array.isArray(t)?t.map(function(e){return s(e,r,a)}):s(t,r,a)};var i=t.rows?t.rows.map(function(e){return e.doc}).filter(l):t.docs,o=t.offset||0;return{data:i.map(function(e){return s(e,r,a)}),meta:{count:i.length},skip:o,next:o+i.length<t.total_rows||i.length>=t.limit}}},54481:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.PouchLocalStorage=t.LOCALSTORAGE_STORAGE_KEYS=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s={SYNCED:"cozy-client-pouch-link-synced",WARMUPEDQUERIES:"cozy-client-pouch-link-warmupedqueries",LASTSEQUENCES:"cozy-client-pouch-link-lastreplicationsequence",LASTREPLICATEDDOCID:"cozy-client-pouch-link-lastreplicateddocid",ADAPTERNAME:"cozy-client-pouch-link-adaptername"};t.LOCALSTORAGE_STORAGE_KEYS=s;var u=function(){var e,t,n,r,u,d,f,p,h,m,v,y,b,g,x,w,k,O;function _(e){(0,o.default)(this,_),l(e),this.storageEngine=e}return(0,c.default)(_,[{key:"destroy",value:(e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.storageEngine.destroy();case 1:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"persistLastReplicatedDocID",value:(t=(0,i.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllLastReplicatedDocID();case 2:return(r=e.sent)[t]=n,e.next=6,this.storageEngine.setItem(s.LASTREPLICATEDDOCID,JSON.stringify(r));case 6:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"getAllLastReplicatedDocID",value:(n=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.getItem(s.LASTREPLICATEDDOCID);case 2:return t=e.sent,e.abrupt("return",t?JSON.parse(t):{});case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getLastReplicatedDocID",value:(r=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllLastReplicatedDocID();case 2:return n=e.sent,e.abrupt("return",n[t]);case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroyAllLastReplicatedDocID",value:(u=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.removeItem(s.LASTREPLICATEDDOCID);case 2:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"persistSyncedDoctypes",value:(d=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.setItem(s.SYNCED,JSON.stringify(t));case 2:case"end":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)})},{key:"getPersistedSyncedDoctypes",value:(f=(0,i.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.getItem(s.SYNCED);case 2:if("object"==typeof(n=(t=e.sent)?JSON.parse(t):{})){e.next=6;break}return e.abrupt("return",{});case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"destroySyncedDoctypes",value:(p=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.removeItem(s.SYNCED);case 2:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"persistDoctypeLastSequence",value:(h=(0,i.default)(a.default.mark(function e(t,n){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllLastSequences();case 2:return(r=e.sent)[t]=n,e.next=6,this.storageEngine.setItem(s.LASTSEQUENCES,JSON.stringify(r));case 6:case"end":return e.stop()}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"getAllLastSequences",value:(m=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.getItem(s.LASTSEQUENCES);case 2:return t=e.sent,e.abrupt("return",t?JSON.parse(t):{});case 4:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"getDoctypeLastSequence",value:(v=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllLastSequences();case 2:return n=e.sent,e.abrupt("return",n[t]);case 4:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"destroyAllDoctypeLastSequence",value:(y=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.removeItem(s.LASTSEQUENCES);case 2:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"destroyDoctypeLastSequence",value:(b=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllLastSequences();case 2:return n=e.sent,delete n[t],e.next=6,this.storageEngine.setItem(s.LASTSEQUENCES,JSON.stringify(n));case 6:case"end":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"persistWarmedUpQueries",value:(g=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.setItem(s.WARMUPEDQUERIES,JSON.stringify(t));case 2:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"getPersistedWarmedUpQueries",value:(x=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.getItem(s.WARMUPEDQUERIES);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",{});case 5:return e.abrupt("return",JSON.parse(t));case 6:case"end":return e.stop()}},e,this)})),function(){return x.apply(this,arguments)})},{key:"destroyWarmedUpQueries",value:(w=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.removeItem(s.WARMUPEDQUERIES);case 2:case"end":return e.stop()}},e,this)})),function(){return w.apply(this,arguments)})},{key:"getAdapterName",value:(k=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.getItem(s.ADAPTERNAME);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return k.apply(this,arguments)})},{key:"persistAdapterName",value:(O=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storageEngine.setItem(s.ADAPTERNAME,t);case 2:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})}]),_}();t.PouchLocalStorage=u;var l=function(e){var t=["setItem","getItem","removeItem"].filter(function(t){return!e[t]});if(t.length>0){var n=t.join(", ");throw Error("Provided storageEngine is missing the following methods: ".concat(n))}}},1797:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i=(0,a.default)("cozy-pouch-link");a.default.suggest.deny("cozy-pouch-link","info"),t.default=i},65826:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(1797)),u=function(e){return new Promise(function(t){return setTimeout(t,e)})},l=function(){var e,t,n,r,l;function d(e,t,n,r){(0,o.default)(this,d),this.task=e,this.delay=t,this.round=this.round.bind(this),this.immediateTasks=[],this.started=!1,this.afterRound=n,this.sleep=r||u}return(0,c.default)(d,[{key:"start",value:function(){!this.started&&(this.round(),this.started=!0)}},{key:"stop",value:function(){this.started&&(this.currentTask&&this.currentTask.cancel&&this.currentTask.cancel(),clearTimeout(this.timeout),this.clearImmediateTasks(),this.started=!1)}},{key:"waitForCurrent",value:(e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.currentTask;case 2:return e.abrupt("return");case 3:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"runImmediateTasks",value:(t=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.immediateTasks.length>0)){e.next=6;break}return t=this.immediateTasks.shift(),e.next=4,this.runTask(t);case 4:e.next=0;break;case 6:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"scheduleImmediateTask",value:(n=(0,i.default)(a.default.mark(function e(){var t,n=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:null,this.started){e.next=4;break}return s.default.warn("Cannot schedule immediate task, loop is not started"),e.abrupt("return");case 4:this.immediateTasks.push(t||this.task),this.currentTask||(clearTimeout(this.timeout),this.round());case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"clearImmediateTasks",value:function(){this.immediateTasks.splice(0,this.runImmediateTasks.length)}},{key:"runTask",value:(r=(0,i.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.currentTask=t(),e.next=4,this.currentTask;case 4:e.next=11;break;case 6:throw e.prev=6,e.t0=e.catch(0),this.stop(),s.default.warn("Could not runTask, stopped the loop",e.t0),e.t0;case 11:return e.prev=11,this.currentTask=null,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,6,11,14]])})),function(e){return r.apply(this,arguments)})},{key:"round",value:(l=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._rounding){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,this._rounding=!0,!(this.immediateTasks.length>0)){e.next=9;break}return e.next=7,this.runImmediateTasks();case 7:return e.next=9,this.sleep(this.delay);case 9:return e.next=11,this.runTask(this.task);case 11:this.started&&(this.timeout=setTimeout(this.round,this.delay));case 12:return e.prev=12,this._rounding=!1,this.afterRound&&this.afterRound(),e.finish(12);case 16:case"end":return e.stop()}},e,this,[[2,,12,16]])})),function(){return l.apply(this,arguments)})}]),d}();t.default=l},12503:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getIndexFields=t.getIndexNameFromFields=t.makeKeyFromPartialFilter=void 0;var a=r(n(98235)),i=r(n(90402)),o=r(n(91175)),c=function e(t){return"object"!=typeof t||null===t?String(t):Object.entries(t).map(function(t){var n=(0,i.default)(t,2),r=n[0],a=n[1];return Array.isArray(a)&&a.every(function(e){return"string"==typeof e})?"".concat(r,"_(").concat(a.join("_"),")"):Array.isArray(a)?"(".concat(a.map(function(t){return"".concat(e(t))}).join(")_".concat(r,"_(")),")"):"object"==typeof a?"".concat(r,"_").concat(e(a)):"".concat(r,"_").concat(a)}).join(")_and_(")};t.makeKeyFromPartialFilter=c,t.getIndexNameFromFields=function(e,t){var n="by_".concat(e.join("_and_"));return t?"".concat(n,"_filter_(").concat(c(t),")"):n};var s={_id:{$gt:null}};t.getIndexFields=function(e){var t=e.selector,n=void 0===t?s:t,r=e.sort,i=e.partialFilter;return Array.from(new Set([].concat((0,a.default)((void 0===r?[]:r).map(function(e){return(0,o.default)(Object.keys(e))})),(0,a.default)(n?Object.keys(n):[]),(0,a.default)(i?Object.keys(i):[]))))}},19820:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.migratePouch=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(34525)),s=(r=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,s,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dbName,r=t.fromAdapter,a=t.toAdapter,o=new c.default(n,{adapter:r,location:"default"}),s="".concat(n,"_indexeddb"),u=new c.default(s,{adapter:a,location:"default"}),e.next=6,o.replicate.to(u,{batch_size:1e3});case 6:return e.next=8,o.destroy();case 8:return o=null,e.abrupt("return",u);case 10:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.migratePouch=s},2105:function(e,t,n){"use strict";var r,a,i,o,c,s=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.platformWeb=void 0;var u=s(n(68434)),l=s(n(82007)),d=s(n(34525)),f=n(54481),p=(r=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage.getItem(t));case 1:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),h=(a=(0,l.default)(u.default.mark(function e(t,n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage.setItem(t,n));case 1:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)}),m=(i=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.localStorage.removeItem(t));case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),v=(o=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=Object.values(f.LOCALSTORAGE_STORAGE_KEYS);case 1:if(!(t<n.length)){e.next=8;break}return r=n[t],e.next=5,m(r);case 5:t++,e.next=1;break;case 8:case"end":return e.stop()}},e)})),function(){return o.apply(this,arguments)}),y=(c=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.navigator.onLine);case 1:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)}),b={storage:{getItem:p,setItem:h,removeItem:m,destroy:v},events:{addEventListener:function(e,t){document.addEventListener(e,t)},removeEventListener:function(e,t){document.removeEventListener(e,t)}},pouchAdapter:d.default,isOnline:y};t.platformWeb=b},20444:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchRemoteLastSequence=t.fetchRemoteInstance=t.isDatabaseUnradableError=t.isDatabaseNotFoundError=t.DATABASE_RESERVED_DOCTYPE_ERROR=t.DATABASE_NOT_FOUND_ERROR=void 0;var o=i(n(68434)),c=i(n(82007)),s=i(n(16151)),u="Database does not exist";t.DATABASE_NOT_FOUND_ERROR=u;var l="Reserved doctype";t.DATABASE_RESERVED_DOCTYPE_ERROR=l,t.isDatabaseNotFoundError=function(e){return e.message===u},t.isDatabaseUnradableError=function(e){return e.message===l};var d=(r=(0,c.default)(o.default.mark(function e(t){var n,r,a,i,c,d,f=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},r=new s.default({accessToken:t.password}),Object.keys(n).forEach(function(e){t.searchParams.set(e,n[e])}),a="".concat(t.protocol,"//").concat(t.href.substring(t.href.indexOf("@")+1)),(i=new Headers).append("Accept","application/json"),i.append("Content-Type","application/json"),i.append("Authorization",r.toAuthHeader()),e.next=10,fetch(a,{headers:i,credentials:"include"});case 10:return c=e.sent,e.next=13,c.json();case 13:if(d=e.sent,!c.ok){e.next=16;break}return e.abrupt("return",d);case 16:if(404!==c.status){e.next=18;break}throw Error(u);case 18:if(!(403===c.status&&d.error.includes("message=reserved doctype"))){e.next=20;break}throw Error(l);case 20:throw Error("Error (".concat(c.status,") while fetching remote instance: ").concat(JSON.stringify(d)));case 21:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.fetchRemoteInstance=d;var f=(a=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(t,"/_changes")),e.next=3,d(n,{limit:1,descending:!0});case 3:return r=e.sent,e.abrupt("return",r.last_seq);case 5:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.fetchRemoteLastSequence=f},51722:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.replicateOnce=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(17204)),s=a(n(27361)),u=a(n(35161)),l=a(n(10240)),d=a(n(4788)),f=a(n(1797)),p=n(20444),h=n(67927),m=n(81309);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var y=(r=(0,o.default)(i.default.mark(function e(t){var n,r,a,y,b,g,x,w,k,O,_,E,S,C;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.isOnline();case 2:if(e.sent){e.next=5;break}return f.default.info("PouchManager: The device is offline so the replication has been skipped"),e.abrupt("return",Promise.resolve());case 5:return f.default.info("PouchManager: Starting replication iteration"),t.replications=(0,u.default)(t.pouches,function(){var e=(0,o.default)(i.default.mark(function e(n,r){var a,o,c,u,d,m,v;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f.default.info("PouchManager: Starting replication for "+r),a=function(){return t.getReplicationURL(r)},o="synced"!==t.getSyncStatus(r),c=function(e){return!(0,l.default)(e._id,"_design")},u="",!o){e.next=13;break}return e.next=8,(0,p.fetchRemoteLastSequence)(a());case 8:return d=e.sent,e.next=11,t.storage.persistDoctypeLastSequence(r,d);case 11:e.next=16;break;case 13:return e.next=15,t.storage.getDoctypeLastSequence(r);case 15:u=e.sent;case 16:return(m=(0,s.default)(t.doctypesReplicationOptions,r,{})).initialReplication=o,m.filter=c,m.since=u,m.doctype=r,t.options.onDoctypeSyncStart&&t.options.onDoctypeSyncStart(r),e.next=24,(0,h.startReplication)(n,m,a,t.storage);case 24:if(v=e.sent,!u){e.next=28;break}return e.next=28,t.storage.destroyDoctypeLastSequence(r);case 28:return e.next=30,t.updateSyncInfo(r);case 30:return t.checkToWarmupDoctype(r,m),t.options.onDoctypeSyncEnd&&t.options.onDoctypeSyncEnd(r),e.abrupt("return",v);case 33:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),n=Object.keys(t.pouches),r=Object.values(t.replications),e.prev=9,e.next=12,(0,m.allSettled)(r);case 12:if(a=e.sent,!t.options.onSync){e.next=51;break}b=(y=(0,d.default)(n,a)).filter(function(e){return"fulfilled"===e[1].status}).map(function(e){return[e[0],e[1].value]}),g=y.filter(function(e){return"rejected"===e[1].status}).map(function(e){return[e[0],e[1].reason]}),x=a.filter(function(e){return"rejected"===e.status&&!(0,p.isDatabaseNotFoundError)(e.reason)&&!(0,p.isDatabaseUnradableError)(e.reason)}),w=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return v(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(g.filter(function(e){return(0,p.isDatabaseNotFoundError)(e[1])||(0,p.isDatabaseUnradableError)(e[1])})),e.prev=21,w.s();case 23:if((k=w.n()).done){e.next=30;break}return O=k.value[0],e.next=28,t.updateSyncInfo(O,"not_complete");case 28:e.next=23;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(21),w.e(e.t0);case 35:return e.prev=35,w.f(),e.finish(35);case 38:if(!(x.length>0)){e.next=45;break}throw E=(_=x.map(function(e){return e.reason})).join("\n"),f.default.debug("ReplicateOnce's promises failed with the following errors",E),AggregateError(_,"Failed with blocking errors");case 45:f.default.debug("ReplicateOnce's promises succeed with no blocking errors");case 46:S=(0,c.default)(b),C=(0,c.default)(g),f.default.debug("Doctypes replications in error: ",Object.keys(C)),f.default.debug("Doctypes replications in success: ",Object.keys(S)),t.options.onSync(S);case 51:return a.cancel=t.cancelCurrentReplications,e.abrupt("return",a);case 55:e.prev=55,e.t1=e.catch(9),t.handleReplicationError(e.t1);case 58:case"end":return e.stop()}},e,null,[[9,55],[21,32,35,38]])})),function(e){return r.apply(this,arguments)});t.replicateOnce=y},67927:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.replicateAllDocs=t.startReplication=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(64512)),s=a(n(80295)),u=a(n(89385)),l=a(n(10240)),d=a(n(1797)),f=n(20444);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=u.default.isDesignDocument,v=u.default.isDeletedDocument;t.startReplication=function(e,t,n,r){var a,c={},u=new Promise(function(u,l){var f=n(),p=t.strategy,y=t.initialReplication,g=(t.warmupQueries,t.doctype),x=h(h({batch_size:1e3},(0,s.default)(t,["strategy","initialReplication","warmupQueries","doctype"])),{},{selector:{cozyLocalOnly:{$exists:!1}}});if(y&&"toRemote"!==p){(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d.default.info("PouchManager: Start first replication for ".concat(g)),t.next=3,b({db:e,baseUrl:f,doctype:g,storage:r});case 3:return c=t.sent,d.default.info("PouchManager: End first replication for ".concat(g)),t.abrupt("return",u(c));case 8:case"end":return t.stop()}},t)}))();return}(a="fromRemote"===p?e.replicate.from(f,x):"toRemote"===p?e.replicate.to(f,x):e.sync(f,x)).on("change",function(e){var t=e.change?e.change:e;t.docs&&t.docs.filter(function(e){return!m(e)&&!v(e)}).forEach(function(e){c[e._id]=e})}),a.on("error",l).on("complete",function(){u(Object.values(c))})});return u.cancel=function(){a&&a.cancel()},u};var y=function(e){return e.map(function(e){return e.doc}).filter(function(e){return!e._deleted&&!(0,l.default)(e._id,"_design")})},b=(r=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,s,l,d,p,h,m;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.db,r=t.baseUrl,a=t.doctype,o=t.storage,c=new URL("".concat(r,"/_all_docs")),s=1e3,l=!0,e.next=6,o.getLastReplicatedDocID(a);case 6:d=e.sent,p=[];case 8:if(!l){e.next=42;break}if(d){e.next=26;break}return e.next=12,(0,f.fetchRemoteInstance)(c,{limit:s,include_docs:!0});case 12:if(0!==(p=y(e.sent.rows)).length){e.next=18;break}l=!1,e.next=24;break;case 18:return d=p[p.length-1]._id,p.length<s&&(l=!1),e.next=22,u.default.insertBulkDocs(n,p);case 22:return e.next=24,o.persistLastReplicatedDocID(a,d);case 24:e.next=40;break;case 26:return e.next=28,(0,f.fetchRemoteInstance)(c,{include_docs:!0,limit:s,startkey_docid:d});case 28:if(!((m=y((h=e.sent).rows)).length<2)){e.next=32;break}return e.abrupt("return",p);case 32:return m.shift(),d=m[m.length-1]._id,e.next=36,u.default.insertBulkDocs(n,m);case 36:return e.next=38,o.persistLastReplicatedDocID(a,d);case 38:p=p.concat(m),h.rows.length<s&&(l=!1);case 40:e.next=8;break;case 42:return e.abrupt("return",p);case 43:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.replicateAllDocs=b},81309:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allSettled=t.formatAggregatedError=t.getPrefix=t.getDatabaseName=void 0,t.getDatabaseName=function(e,t){return"".concat(e,"_").concat(t)},t.getPrefix=function(e){return e.replace(/^https?:\/\//,"")},t.formatAggregatedError=function(e){return e.errors.map(function(e,t){return"\n["+t+"]: "+e.name+" - "+e.message+"\n"+e.stack}).join("\n")},t.allSettled=function(e){return Promise.all(e.filter(function(e){return!!e}).map(function(e){return e.then(function(e){return{status:"fulfilled",value:e}}).catch(function(e){return{status:"rejected",reason:e}})}))}},88477:function(e,t,n){"use strict";var r=n(34155),a=n(14746),i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(54765)),c=i(n(90402)),s=i(n(98235)),u=i(n(80295)),l=i(n(68434)),d=i(n(82007)),f=i(n(65105)),p=i(n(19723)),h=i(n(64512)),m=i(n(66604)),v=i(n(17204)),y=i(n(85564)),b=i(n(45578)),g=i(n(4788)),x=i(n(84486)),w=i(n(27361)),k=i(n(37203)),O=a(n(2779)),_=n(71791),E=i(n(13945)),S=n(30130),C=n(72887),P=n(64157),j=n(87549),A=n(51245),D=i(n(6436)),T=a(n(72662)),M=i(n(83549)),R=i(n(81390)),I=n(6505),N=i(n(9211)),F=n(67454),z=n(27146),L=i(n(81602)),B=n(77621),U=i(n(67266)),H=i(n(8665)),G=n(48550);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(t){(0,h.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function V(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return Q(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){return{get:function(t,n){return L.default.warn(e),t[n]}}},Y=function(e){var t;if(e&&"undefined"!=typeof window&&null!==(t=window.cozy)&&void 0!==t&&t.isSecureProtocol){var n,r=new URL(e);return r.protocol="https:",(n=r.toString()).endsWith("/")?n.slice(0,-1):n}return e},J="creation",K="update",$=function(){var e,t,n,a,i,k,M,W,Q,$,X,ee,et,en,er,ea,ei,eo,ec,es,eu,el,ed,ef;function ep(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.default)(this,ep),(0,h.default)(this,"fetchQueryAndGetFromState",(e=(0,d.default)(l.default.mark(function e(t){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.definition,a=t.options,e.prev=1,e.next=4,n.query(r,a);case 4:return e.abrupt("return",n.getQueryFromState(a.as,a));case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}},e,null,[[1,7]])})),function(t){return e.apply(this,arguments)}));var a=r.link,i=r.links,o=r.schema,c=r.appMetadata,s=r.capabilities,p=r.performanceApi,m=(0,u.default)(r,["link","links","schema","appMetadata","capabilities","performanceApi"]);a&&L.default.warn("`link` is deprecated, use `links`"),this.performanceApi=p||F.defaultPerformanceApi,this.appMetadata=void 0===c?{}:c,this.loginPromise=null,m.uri=Y(m.uri),this.options=m,this.queryIdGenerator=new B.QueryIDGenerator,this.isLogged=!1,this.instanceOptions={},this.handleRevocationChange=this.handleRevocationChange.bind(this),this.handleTokenRefresh=this.handleTokenRefresh.bind(this),this.createClient();var v=this.getStackClient();if(v.on("error",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.emit.apply(n,["error"].concat(t))}),this.setLinks(Array.isArray(t=a||i||new E.default({performanceApi:this.performanceApi}))?t:[t]),this.schema=new R.default(void 0===o?{}:o,v),this.capabilities=s||null,this.plugins={},!(this.stackClient instanceof O.OAuthClient))try{this.loadInstanceOptionsFromDOM()}catch(e){}this._promiseCache=new H.default,m.uri&&m.token&&this.login(),this.storeAccesors=null,!1!==m.store&&this.ensureStore()}return(0,p.default)(ep,[{key:"emit",value:function(){}},{key:"on",value:function(){}},{key:"removeListener",value:function(){}},{key:"registerPlugin",value:function(e,t){if(!e.pluginName)throw Error("Cannot register a plugin whose class does not have `pluginName` attribute.");if(this.plugins[e.pluginName])throw Error("Cannot register plugin ".concat(e.pluginName,". A plugin with the same name has already been registered."));var n=new e(this,t);return this.plugins[e.pluginName]=n,n}},{key:"addSchema",value:function(e){this.schema.add(e)}},{key:"registerClientOnLinks",value:function(){var e,t=V(this.links);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.registerClient)try{n.registerClient(this)}catch(e){L.default.warn(e)}}}catch(e){t.e(e)}finally{t.f()}}},{key:"login",value:function(e){return this.isLogged&&!this.isRevoked?(L.default.warn("CozyClient is already logged."),this.loginPromise):this.loginPromise=this._login(e)}},{key:"_login",value:(e=(0,d.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.emit("beforeLogin"),this.registerClientOnLinks(),t&&(t.uri&&this.stackClient.setUri(t.uri),t.token&&this.stackClient.setToken(t.token)),n=V(this.links),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=13;break}if(!(a=r.value).onLogin){e.next=11;break}return e.next=11,a.onLogin();case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:if(this.isLogged=!0,this.isRevoked=!1,!(this.stackClient instanceof O.OAuthClient)){e.next=26;break}return e.next=26,this.loadInstanceOptionsFromStack();case 26:this.emit("login");case 27:case"end":return e.stop()}},e,this,[[4,15,18,21]])})),function(t){return e.apply(this,arguments)})},{key:"logout",value:(t=(0,d.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLogged){e.next=3;break}return L.default.warn("CozyClient isn't logged."),e.abrupt("return");case 3:if(this.emit("beforeLogout"),this.isLogged=!1,!(this.stackClient instanceof O.OAuthClient)){e.next=17;break}if(e.prev=6,!(this.stackClient.unregister&&(!this.stackClient.isRegistered||this.stackClient.isRegistered()))){e.next=10;break}return e.next=10,this.stackClient.unregister();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),L.default.warn("Impossible to unregister client on stack: ".concat(e.t0));case 15:case 20:e.next=25;break;case 17:return e.prev=17,e.next=20,this.stackClient.fetch("DELETE","/auth/login");case 22:e.prev=22,e.t1=e.catch(17),L.default.warn("Impossible to log out: ".concat(e.t1));case 25:t=V(this.links),e.prev=26,t.s();case 28:if((n=t.n()).done){e.next=41;break}if(!(r=n.value).reset){e.next=39;break}return e.prev=31,e.next=34,r.reset();case 34:e.next=39;break;case 36:e.prev=36,e.t2=e.catch(31),L.default.warn(e.t2);case 39:e.next=28;break;case 41:e.next=46;break;case 43:e.prev=43,e.t3=e.catch(26),t.e(e.t3);case 46:return e.prev=46,t.f(),e.finish(46);case 49:this.store&&this.dispatch((0,T.resetState)()),this.emit("logout");case 51:case"end":return e.stop()}},e,this,[[6,12],[17,22],[26,43,46,49],[31,36]])})),function(){return t.apply(this,arguments)})},{key:"collection",value:function(e){return this.getStackClient().collection(e)}},{key:"fetch",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getStackClient().fetch(e,t,n,r)}},{key:"all",value:function(e){return L.default.warn("\nclient.all is deprecated, prefer to use the Q helper to build a new QueryDefinition.\n\nimport { Q } from 'cozy-client'\nclient.query(Q('io.cozy.bills'))"),(0,j.Q)(e)}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return L.default.warn("client.find(doctype, selector) is deprecated, please use Q(doctype).where(selector) to build the same query."),new j.QueryDefinition({doctype:e,selector:t})}},{key:"get",value:function(e,t){return L.default.warn("client.get(".concat(e,", id) is deprecated, please use Q(").concat(e,").getById(id) to build the same query.")),new j.QueryDefinition({doctype:e,id:t})}},{key:"create",value:(n=(0,d.default)(l.default.mark(function e(t,n,r){var a,i,o=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},n._type,i=q({_type:t},(0,u.default)(n,["_type"])),e.next=5,this.schema.validate(i);case 5:if(!0===e.sent){e.next=8;break}throw Error("Validation failed");case 8:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(i,r),a));case 9:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"validate",value:function(e){return this.schema.validate(e)}},{key:"save",value:(a=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:{},r=t._type,a=(0,u.default)(t,["_type"]),r){e.next=4;break}throw Error("The document must have a `_type` property");case 4:return i=q({_type:r},a),e.next=7,this.schema.validate(i);case 7:if(!0===e.sent){e.next=10;break}throw Error("Validation failed");case 10:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(i),n));case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"saveAll",value:(i=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o=this,c=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},1===Array.from(new Set(t.map(function(e){return e._type}))).length){e.next=4;break}throw Error("saveAll can only save documents with the same doctype");case 4:return e.next=6,Promise.all(t.map(function(e){return o.schema.validate(e)}));case 6:if(!((r=e.sent.filter(function(e){return!0!==e})).length>0)){e.next=11;break}throw L.default.warn("There has been some validation errors while bulk saving",r),Error("Validation failed for at least one doc");case 11:return a=t.map(function(e){return o.prepareDocumentForSave(e)}),i=j.Mutations.updateDocuments(a),e.abrupt("return",this.mutate(i,n));case 14:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"ensureCozyMetadata",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{event:J};if(void 0===this.appMetadata)return e;if(e._type){var r=this.schema.getDoctypeSchema(e._type);t=(0,w.default)(r,"doctypeVersion")}var a=this.appMetadata,i=a.slug,o=a.sourceAccount,c=a.sourceAccountIdentifier,u=a.version,l=new Date().toISOString(),d=(0,w.default)(e,"cozyMetadata",{});return n.event===J?d=q({metadataVersion:1,doctypeVersion:t,createdByApp:i,sourceAccount:o,sourceAccountIdentifier:c,createdAt:l,createdByAppVersion:u,updatedAt:l,updatedByApps:i?[{date:l,slug:i,version:u}]:[]},d):n.event===K&&(d=q(q({},d),{},{updatedAt:l,updatedByApps:[{date:l,slug:i,version:u}].concat((0,s.default)((0,w.default)(e,"cozyMetadata.updatedByApps",[]).filter(function(e){return e.slug!==i})))})),q(q({},e),{},{cozyMetadata:d})}},{key:"prepareDocumentForSave",value:function(e){var t=!e._rev;return this.ensureCozyMetadata((0,P.dehydrate)(e),{event:t?J:K})}},{key:"getDocumentSavePlan",value:function(e,t){var n=this,r=!e._rev,a=this.prepareDocumentForSave(e),i=r?j.Mutations.createDocument(a):j.Mutations.updateDocument(a);if(!(t&&Object.values(t).filter(function(e){return Array.isArray(e)?e.length>0:e}).length>0))return i;for(var o=0,s=Object.keys(t);o<s.length;o++){var u,l,d=s[o],f=e._type,p=this.schema.getRelationship(f,d);if(!((u=p.type).prototype.addReferences&&u.prototype.removeReferences))throw l=p.name,Error('The "'.concat(l,'" relationship does not support references. If you need to add references to a document, its relationship class must have the methods {add,remove}References'))}if(t&&!r)throw Error("Unable to save external relationships on a not-new document");return[i,function(e){var r=n.hydrateDocument(e.data);return Object.entries(t).map(function(e){var t=(0,c.default)(e,2),n=t[0],a=t[1];return r[n].addReferences(a)})}]}},{key:"triggerHook",value:function(e,t){if(ep.hooks){var n,r=V((ep.hooks[t._type]||{})[e]||[]);try{for(r.s();!(n=r.n()).done;)(0,n.value)(this,t)}catch(e){r.e(e)}finally{r.f()}}}},{key:"destroy",value:(k=(0,d.default)(l.default.mark(function e(t){var n,r,a=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.triggerHook("before:destroy",t);case 3:return e.next=5,this.mutate(j.Mutations.deleteDocument(t),n);case 5:return r=e.sent,e.next=8,this.triggerHook("after:destroy",t);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"upload",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.mutate(j.Mutations.uploadFile(e,t),n)}},{key:"ensureQueryExists",value:function(e,t,n){this.ensureStore(),"loaded"===(0,T.getQueryFromState)(this.store.getState(),e).fetchStatus&&(t.skip||t.bookmark)||this.dispatch((0,T.initQuery)(e,t,n))}},{key:"query",value:(M=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o,c,s,d,f,p,h=this,m=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=m.length>1&&void 0!==m[1]?m[1]:{}).update,a=n.executeFromStore,i=(0,u.default)(n,["update","executeFromStore"]),o=this.performanceApi.mark("client.query(".concat(t.doctype,")")),this.ensureStore(),c=i.as||this.queryIdGenerator.generateId(t),s=this.getQueryFromState(c,i),void 0===i.enabled||"boolean"==typeof i.enabled){e.next=9;break}throw Error("option.enabled should be a boolean for this query: ".concat(JSON.stringify(t)));case 9:if(!i.fetchPolicy){e.next=15;break}if(i.as){e.next=12;break}throw Error("Cannot use `fetchPolicy` without naming the query, please use `as` to name the query");case 12:if(i.fetchPolicy(s)){e.next=15;break}return e.abrupt("return");case 15:if(!(s&&Object.keys(s).length>0)||"loading"!==s.fetchStatus){e.next=18;break}return e.abrupt("return",this._promiseCache.get(function(){return(0,U.default)(t)}));case 18:return this.ensureQueryExists(c,t,i),e.prev=19,d=void 0!==i.backgroundFetching?i.backgroundFetching:this.options.backgroundFetching,this.dispatch((0,T.loadQuery)(c,{backgroundFetching:d})),f=a?function(){return Promise.resolve((0,T.executeQueryFromState)(h.store.getState(),t))}:function(){return h.requestQuery(t,i)},e.next=25,this._promiseCache.exec(f,function(){return(0,U.default)(t)});case 25:return p=e.sent,this.dispatch((0,T.receiveQueryResult)(c,p,{update:r,backgroundFetching:d})),this.performanceApi.measure({markName:o,measureName:"".concat(o," success"),color:"primary"}),e.abrupt("return",p);case 31:if(e.prev=31,e.t0=e.catch(19),this.performanceApi.measure({markName:o,measureName:"".concat(o," error"),color:"error"}),this.dispatch((0,T.receiveQueryError)(c,e.t0)),!i.onError){e.next=39;break}i.onError(e.t0),e.next=44;break;case 39:if(!this.options.onError){e.next=43;break}this.options.onError(e.t0),e.next=44;break;case 43:throw e.t0;case 44:case"end":return e.stop()}},e,this,[[19,31]])})),function(e){return M.apply(this,arguments)})},{key:"queryAll",value:(W=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o,c,u=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=u.length>1&&void 0!==u[1]?u[1]:{}).as||this.queryIdGenerator.generateId(t),a=q(q({},n),{},{as:r}),e.prev=3,e.next=6,this.query(t,a);case 6:o=(i=e.sent).data;case 8:if(!(i&&i.next)){e.next=22;break}if(!i.bookmark){e.next=15;break}return e.next=12,this.query(t.offsetBookmark(i.bookmark),a);case 12:i=e.sent,e.next=19;break;case 15:return c=(0,T.getRawQueryFromState)(this.store.getState(),r),e.next=18,this.query(t.offset(c.data.length),a);case 18:i=e.sent;case 19:o.push.apply(o,(0,s.default)(i.data)),e.next=8;break;case 22:return e.abrupt("return",o);case 25:return e.prev=25,e.t0=e.catch(3),L.default.log("queryAll error for ".concat(e.t0.toString())),e.abrupt("return",[]);case 29:case"end":return e.stop()}},e,this,[[3,25]])})),function(e){return W.apply(this,arguments)})},{key:"watchQuery",value:function(){return L.default.warn("client.watchQuery is deprecated, please use client.makeObservableQuery."),this.makeObservableQuery.apply(this,arguments)}},{key:"makeObservableQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ensureStore();var n=t.as||this.queryIdGenerator.generateId(e);return this.ensureQueryExists(n,e),new N.default(n,e,this,t)}},{key:"mutate",value:(Q=(0,d.default)(l.default.mark(function e(t){var n,r,a,i,o,c,s=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=s.length>1&&void 0!==s[1]?s[1]:{}).update,a=n.updateQueries,i=(0,u.default)(n,["update","updateQueries"]),this.ensureStore(),o=i.as||this.queryIdGenerator.generateId(t),this.dispatch((0,T.initMutation)(o,t)),e.prev=5,e.next=8,this.requestMutation(t,i);case 8:return c=e.sent,this.dispatch((0,T.receiveMutationResult)(o,c,{update:r,updateQueries:a},t)),e.abrupt("return",c);case 13:throw e.prev=13,e.t0=e.catch(5),this.dispatch((0,T.receiveMutationError)(o,e.t0,t)),e.t0;case 17:case"end":return e.stop()}},e,this,[[5,13]])})),function(e){return Q.apply(this,arguments)})},{key:"requestQuery",value:($=(0,d.default)(l.default.mark(function e(t,n){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chain.request(t,n);case 2:return r=e.sent,e.next=5,this.persistVirtualDocuments(t,r.data);case 5:if(t.includes){e.next=7;break}return e.abrupt("return",r);case 7:return e.next=9,this.fetchRelationships(r,this.getIncludesRelationships(t));case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)})),function(e,t){return $.apply(this,arguments)})},{key:"persistVirtualDocuments",value:(X=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=["io.cozy.files.shortcuts"].includes(t.doctype),"io.cozy.apps_registry"!==t.doctype){e.next=6;break}return e.next=5,this.persistVirtualDocument({_type:"io.cozy.apps_registry",_id:t.id,cozyPouchData:n},r);case 5:return e.abrupt("return",e.sent);case 6:if(Array.isArray(n)){e.next=11;break}return e.next=9,this.persistVirtualDocument(n,r);case 9:e.next=28;break;case 11:a=V(n),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=20;break}return o=i.value,e.next=18,this.persistVirtualDocument(o,r);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),a.e(e.t0);case 25:return e.prev=25,a.f(),e.finish(25);case 28:case"end":return e.stop()}},e,this,[[12,22,25,28]])})),function(e,t){return X.apply(this,arguments)})},{key:"persistVirtualDocument",value:(ee=(0,d.default)(l.default.mark(function e(t,n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.cozyLocalOnly)){e.next=2;break}return e.abrupt("return");case 2:if(!(!(null!==(r=t.meta)&&void 0!==r&&r.rev)&&!t._rev||n)){e.next=5;break}return e.next=5,this.chain.persistCozyData(t);case 5:case"end":return e.stop()}},e,this)})),function(e,t){return ee.apply(this,arguments)})},{key:"fetchRelationships",value:(et=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,o,s,u,d,f,p,h,m,v,w,k,O,_,E,S,P,A=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=!Array.isArray(t.data))||0!==t.data.length){e.next=3;break}return e.abrupt("return",t);case 3:return a=r?[t.data]:t.data,i=new Map,o=[],s=[],a.forEach(function(e){return(0,x.default)(n,function(t,n){try{var r=t.type.query(e,A,t),a=e._id;i.set(r,[a,n]),r instanceof j.QueryDefinition?s.push(r):o.push(r)}catch(e){}})}),u=(0,D.default)(s),e.next=11,Promise.all(u.map(function(e){return A.chain.request(e)}));case 11:d=e.sent,f=(0,b.default)((0,y.default)(o),"_id"),p=(0,y.default)(d.map(function(e){return e.included||e.data})).concat(f).filter(Boolean),h={},m=V((0,g.default)(u,d));try{for(m.s();!(v=m.n()).done;)k=(w=(0,c.default)(v.value,2))[0],O=w[1],(_=i.get(k))&&(S=(E=(0,c.default)(_,2))[0],P=E[1],h[S]=h[S]||{},h[S][P]=(0,C.responseToRelationship)(O))}catch(e){m.e(e)}finally{m.f()}return e.abrupt("return",q(q({},(0,C.attachRelationships)(t,h)),{},{included:p}));case 18:case"end":return e.stop()}},e)})),function(e,t){return et.apply(this,arguments)})},{key:"requestMutation",value:(en=(0,d.default)(l.default.mark(function e(t,n){var r,a,i,c,s=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=8;break}return a=(r=(0,o.default)(t))[0],i=r.slice(1),e.next=4,this.requestMutation(a);case 4:return c=e.sent,e.next=7,Promise.all(i.map(function(e){var t="function"==typeof e?e(c):e;return s.requestMutation(t)}));case 7:return e.abrupt("return",c);case 8:return e.abrupt("return",this.chain.request(t,n));case 9:case"end":return e.stop()}},e,this)})),function(e,t){return en.apply(this,arguments)})},{key:"getIncludesRelationships",value:function(e){var t=this,n=e.includes,r=e.doctype;return n?(0,v.default)(n.map(function(e){return[e,t.schema.getRelationship(r,e)]})):{}}},{key:"hydrateDocuments",value:function(e,t){var n=this;if(!1===this.options.autoHydrate)return t;var r=this.schema.getDoctypeSchema(e);return r.relationships?t.map(function(e){return n.hydrateDocument(e,r)}):t}},{key:"hydrateDocument",value:function(e,t){if(!e)return e;var n=t||this.schema.getDoctypeSchema(e._type);return q(q({},e),this.hydrateRelationships(e,n.relationships))}},{key:"hydrateRelationships",value:function(e,t){var n=this.getRelationshipStoreAccessors();return(0,m.default)(t,function(t,r){return(0,S.create)(e,t,n)})}},{key:"makeNewDocument",value:function(e){return this.hydrateDocument({_type:e})}},{key:"generateRandomId",value:function(){return this.queryIdGenerator.generateRandomId()}},{key:"getAssociation",value:function(e,t){return(0,S.create)(e,this.schema.getRelationship(e._type,t),this.getRelationshipStoreAccessors())}},{key:"getRelationshipStoreAccessors",value:function(){var e=this;return this.storeAccesors||(this.storeAccessors={get:this.getDocumentFromState.bind(this),save:function(t,n){return e.save.call(e,t,n)},dispatch:this.dispatch.bind(this),query:function(t,n){return e.query.call(e,t,n)},mutate:function(t,n){return e.mutate.call(e,t,n)}}),this.storeAccessors}},{key:"getCollectionFromState",value:function(e){try{return(0,T.getCollectionFromState)(this.store.getState(),e)}catch(t){return L.default.warn("Could not getCollectionFromState",e,t.message),null}}},{key:"getDocumentFromState",value:function(e,t){try{return(0,T.getDocumentFromState)(this.store.getState(),e,t)}catch(n){return L.default.warn("Could not getDocumentFromState",e,t,n.message),null}}},{key:"getQueryFromState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hydrated||!1,r=t.singleDocData||!1;try{var a=(0,T.getQueryFromState)(this.store.getState(),e),i=a.definition&&a.definition.doctype,o=a.definition&&a.definition.id;if(!n&&!r)return a;var c=n&&i?this.hydrateDocuments(i,a.data):a.data;return q(q({},a),{},{data:o&&r?c[0]:c})}catch(t){return L.default.warn("Could not get query from state. queryId: ".concat(e,", error: ").concat(t.message)),null}}},{key:"register",value:function(e){return this.getStackClient().setUri(e),this.startOAuthFlow(A.authFunction)}},{key:"isReactNative",value:function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product}},{key:"startOAuthFlow",value:(er=(0,d.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getStackClient(),e.next=3,n.register();case 3:return e.next=5,this.certifyFlagship();case 5:return e.abrupt("return",this.authorize({openURLCallback:t}));case 6:case"end":return e.stop()}},e,this)})),function(e){return er.apply(this,arguments)})},{key:"certifyFlagship",value:(ea=(0,d.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getStackClient()).oauthOptions.shouldRequireFlagshipPermissions){e.next=4;break}return e.next=4,(0,G.certifyFlagship)(t.oauthOptions.certificationConfig,this);case 4:case"end":return e.stop()}},e,this)})),function(){return ea.apply(this,arguments)})},{key:"authorize",value:(ei=(0,d.default)(l.default.mark(function e(){var t,n,r,a,i,o,c,s,u,d,f,p,h,m,v,y=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(t=y.length>0&&void 0!==y[0]?y[0]:{}).openURLCallback)?A.authFunction:n,i=void 0===(a=t.sessionCode)?void 0:a,c=void 0===(o=t.pkceCodes)?{}:o,e.prev=1,s=c.codeVerifier,u=c.codeChallenge,f=(d=this.getStackClient()).generateStateCode(),p=d.getAuthCodeURL({stateCode:f,scopes:void 0,sessionCode:i,codeChallenge:u}),e.next=8,r(p);case 8:return h=e.sent,m=d.getAccessCodeFromURL(h,f),e.next=12,d.fetchAccessToken(m,void 0,void 0,s);case 12:return v=e.sent,d.setToken(v),e.abrupt("return",{token:v,infos:d.oauthOptions,client:d.oauthOptions});case 17:throw e.prev=17,e.t0=e.catch(1),e.t0.message===_.REGISTRATION_ABORT&&this.getStackClient().unregister(),e.t0;case 21:case"end":return e.stop()}},e,this,[[1,17]])})),function(){return ei.apply(this,arguments)})},{key:"renewAuthorization",value:function(){return this.authorize({openURLCallback:A.authFunction})}},{key:"setStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.force;if(void 0===e)throw Error("Store is undefined");if(this.store&&!(void 0!==n&&n))throw Error("Client already has a store, it is forbidden to change store.\nsetStore must be called before any query is executed. Try to\ncall setStore earlier in your code, preferably just after the\ninstantiation of the client.");this.store=e}},{key:"ensureStore",value:function(){this.store||this.setStore((0,T.createStore)(this.performanceApi))}},{key:"checkForRevocation",value:(eo=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.stackClient instanceof O.OAuthClient)){e.next=4;break}return e.abrupt("return",this.stackClient.checkForRevocation());case 4:throw"checkForRevocation is only implemented for OAutClient";case 5:case"end":return e.stop()}},e,this)})),function(){return eo.apply(this,arguments)})},{key:"handleRevocationChange",value:function(e){e?(this.isRevoked=!0,this.emit("revoked")):(this.isRevoked=!1,this.emit("unrevoked"))}},{key:"handleTokenRefresh",value:function(e){this.emit("tokenRefreshed"),this.options.onTokenRefresh&&(Z("Using onTokenRefresh is deprecated, please use events like this: cozyClient.on('tokenRefreshed', token => console.log('Token has been refreshed', token)). https://git.io/fj3M3"),this.options.onTokenRefresh(e))}},{key:"createClient",value:function(){this.options.client&&L.default.warn("CozyClient: Using options.client is deprecated, please use options.stackClient.");var e=void 0===this.options.warningForCustomHandlers||this.options.warningForCustomHandlers,t=this.options.client||this.options.stackClient,n={onRevocationChange:this.handleRevocationChange,onTokenRefresh:this.handleTokenRefresh};if(t){this.stackClient=t,t.options||(t.options={});for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];t.options[i]?e&&L.default.warn("You passed a stackClient with its own ".concat(i,". It is not supported, unexpected things might happen.")):t.options[i]=n[i]}}else{var o=q(q({},this.options),n);this.stackClient=this.options.oauth?new O.OAuthClient(o):new O.default(o)}this.client=new Proxy(this.stackClient,Z("Using cozyClient.client is deprecated, please use cozyClient.stackClient."))}},{key:"getClient",value:function(){return L.default.warn("CozyClient: getClient() is deprecated, please use getStackClient()."),this.getStackClient()}},{key:"getStackClient",value:function(){return this.stackClient||this.createClient(),this.stackClient}},{key:"reducer",value:function(){return(0,T.default)(this.performanceApi)}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"getInstanceOptions",value:function(){return this.instanceOptions}},{key:"loadInstanceOptionsFromDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[role=application]",t=document.querySelector(e);if(!(t instanceof HTMLElement))throw Error("The selector that is passed does not return an HTMLElement");var n=t.dataset,r=n.cozy,a=(0,u.default)(n,["cozy"]);this.instanceOptions=q(q({},JSON.parse(void 0===r?"{}":r)),a),this.capabilities=this.instanceOptions.capabilities||null}},{key:"loadInstanceOptionsFromStack",value:(ec=(0,d.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.query((0,j.Q)("io.cozy.settings").getById("io.cozy.settings.capabilities")),this.query((0,j.Q)("io.cozy.settings").getById("io.cozy.settings.instance"))]);case 2:n=(t=e.sent)[0].data,r=t[1].data,this.instanceOptions={capabilities:n,locale:r.locale,tracking:r.tracking},this.capabilities=this.instanceOptions.capabilities||null;case 7:case"end":return e.stop()}},e,this)})),function(){return ec.apply(this,arguments)})},{key:"setData",value:function(e){var t=this;this.ensureStore(),Object.entries(e).forEach(function(e){var n=(0,c.default)(e,2),r=(n[0],n[1]);t.dispatch((0,T.receiveQueryResult)(null,{data:r}))})}},{key:"setOnError",value:function(e){if(this.options&&this.options.onError)throw Error("On Error is already defined");this.options.onError=e}},{key:"toJSON",value:function(){return new z.CozyClient({uri:this.options.uri})}},{key:"setAppMetadata",value:function(e){this.appMetadata=q(q({},this.appMetadata),e)}},{key:"setLinks",value:(es=(0,d.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.links=t||[new E.default({performanceApi:this.performanceApi})],this.registerClientOnLinks(),this.chain=(0,I.chain)(this.links),!this.isLogged){e.next=22;break}n=V(this.links),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=14;break}if(!(a=r.value).onLogin){e.next=12;break}return e.next=12,a.onLogin();case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:case"end":return e.stop()}},e,this,[[5,16,19,22]])})),function(e){return es.apply(this,arguments)})},{key:"getSettings",value:(eu=(0,d.default)(l.default.mark(function e(t,n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.getSettings)(this,t,n));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return eu.apply(this,arguments)})},{key:"saveAfterFetchSettings",value:(el=(0,d.default)(l.default.mark(function e(t,n,r){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,P.saveAfterFetchSettings)(this,t,n,r));case 1:case"end":return e.stop()}},e,this)})),function(e,t,n){return el.apply(this,arguments)})},{key:"resetQuery",value:(ed=(0,d.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(0,T.isQueryExisting)(this.store.getState(),t)){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:return this.dispatch((0,T.resetQuery)(t)),n=this.getQueryFromState(t),e.next=7,this.query(n.definition,{as:t});case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}},e,this,[[0,10]])})),function(e){return ed.apply(this,arguments)})}],[{key:"fromOldClient",value:function(e,t){return new ep(q({uri:e._url,token:e._token.token},t))}},{key:"fromOldOAuthClient",value:(ef=(0,d.default)(l.default.mark(function e(t,n){var r,a,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._oauth){e.next=12;break}return e.next=3,t.authorize();case 3:if(a={oauth:(r=e.sent).client,token:r.token,scope:r.token.scope},!(i=new ep(q(q({uri:t._url},a),n))).loginPromise){e.next=9;break}return e.next=9,i.loginPromise;case 9:return e.abrupt("return",i);case 12:throw Error("Cannot instantiate a new client: old client is not an OAuth client. CozyClient.fromOldClient might be more suitable.");case 13:case"end":return e.stop()}},e)})),function(e,t){return ef.apply(this,arguments)})},{key:"fromEnv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e||(void 0!==r?r.env:{}),a=n.COZY_URL,i=n.COZY_CREDENTIALS;if(!a||!i)throw Error("Env used to instantiate CozyClient must have COZY_URL and COZY_CREDENTIALS");try{t.oauth=JSON.parse(i)}catch(e){t.token=i.trim()}return t.uri=a.trim(),new ep(q({},t))}},{key:"fromDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[role=application]",n=document.querySelector(t);if(!(n instanceof HTMLElement))throw Error("Cannot find an HTMLElement corresponding to ".concat(t));if(!n||!n.dataset)throw Error("Found no data in ".concat(t," to instantiate cozyClient"));var r=n.dataset.cozy?JSON.parse(n.dataset.cozy):q({},n.dataset),a=r.domain,i=r.token;if(a&&i||(a=a||r.cozyDomain,i=i||r.cozyToken),!a||!i)throw Error("Found no data in ".concat(n.dataset," to instantiate cozyClient"));return new ep(q({uri:"".concat(window.location.protocol,"//").concat(a),token:i,capabilities:r.capabilities},e))}},{key:"registerHook",value:function(e,t,n){var r=ep.hooks[e]=ep.hooks[e]||{};r[t]=r[t]||[],r[t].push(n)}}]),ep}();$.hooks=$.hooks||{},$.fetchPolicies=M.default,$.version="54.0.1",k.default.mixin($),t.default=$},6505:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.chain=t.default=void 0;var a=r(n(98235)),i=r(n(68434)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=function(){var e,t,n;function r(e,t){(0,c.default)(this,r),"function"==typeof e&&(this.request=e),"function"==typeof t&&(this.persistCozyData=t)}return(0,s.default)(r,[{key:"request",value:(e=(0,o.default)(i.default.mark(function e(t,n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("request is not implemented");case 1:case"end":return e.stop()}},e)})),function(t,n,r,a){return e.apply(this,arguments)})},{key:"persistCozyData",value:(t=(0,o.default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("persistCozyData is not implemented");case 1:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})},{key:"reset",value:(n=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("reset is not implemented");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})}]),r}();t.default=u;var l=function(e){return"function"==typeof e?new u(e):e},d=new u(function(e,t,n){if(n)return n;if(e.execute)return e.execute();throw Error("No link could handle operation ".concat(JSON.stringify(e)))},function(e,t){});t.chain=function(e){return[].concat((0,a.default)(e),[d]).map(l).reduce(f)};var f=function(e,t){return new u(function(n,r,a,i){return e.request(n,r,a,function(e,n,r){return t.request(e,n,r,i)})},function(n,r){return e.persistCozyData(n,function(e){return t.persistCozyData(e,r)})})}},9211:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(64512)),c=r(n(27361)),s=n(72662),u=Object.prototype.hasOwnProperty,l=function(){function e(t,n,r,i){var c=this;if((0,a.default)(this,e),(0,o.default)(this,"handleStoreChange",function(){var e=c.currentRawResult();!function(e,t){if(d(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!u.call(t,n[a])||!d(e[n[a]],t[n[a]]))return!1;return!0}(e,c.lastResult)&&(c.lastResult=e,c.notifyObservers())}),!t||!n||!r)throw Error("ObservableQuery takes 3 arguments: queryId, definition and client");this.queryId=t,this.definition=n,this.client=r,this.observers={},this.idCounter=1,this.lastResult=this.currentRawResult(),this.options=i}return(0,i.default)(e,[{key:"currentResult",value:function(){return this.client.getQueryFromState(this.queryId,{hydrated:(0,c.default)(this.options,"hydrated",!0),singleDocData:!0})}},{key:"fetch",value:function(){return this.client.query(this.definition,{as:this.queryId})}},{key:"fetchMore",value:function(){var e=this.currentRawResult();return e.bookmark?this.client.query(this.definition.offsetBookmark(e.bookmark),{as:this.queryId}):this.client.query(this.definition.offset(e.data.length),{as:this.queryId})}},{key:"currentRawResult",value:function(){return(0,s.getRawQueryFromState)(this.getStore().getState(),this.queryId)}},{key:"notifyObservers",value:function(){var e=this;Object.keys(this.observers).forEach(function(t){return e.observers[t]()})}},{key:"subscribeToStore",value:function(){if(this._unsubscribeStore)throw Error("ObservableQuery instance is already subscribed to store.");this._unsubscribeStore=this.getStore().subscribe(this.handleStoreChange)}},{key:"unsubscribeFromStore",value:function(){if(!this._unsubscribeStore)throw Error("ObservableQuery instance is not subscribed to store");this._unsubscribeStore()}},{key:"subscribe",value:function(e){var t=this,n=this.idCounter;return this.idCounter++,this.observers[n]=e,1===Object.keys(this.observers).length&&this.subscribeToStore(),function(){return t.unsubscribe(n)}}},{key:"unsubscribe",value:function(e){if(!this.observers[e])throw Error("Cannot unsubscribe unknown callbackId ".concat(e));delete this.observers[e],0===Object.keys(this.observers).length&&(this.unsubscribeFromStore(),this._unsubscribeStore=null)}},{key:"getStore",value:function(){return this.client.store}}]),e}();function d(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.default=l},57244:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(65105)),o=a(n(19723)),c=a(n(25665)),s=a(n(27952)),u=a(n(12323)),l=a(n(64512)),d=r(n(67294)),f=a(n(45697)),p=a(n(95460)),h=f.default.shape({subscribe:f.default.func.isRequired,dispatch:f.default.func.isRequired,getState:f.default.func.isRequired}),m=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(e,t){var a;if((0,i.default)(this,r),a=n.call(this,e,t),!e.client)throw Error("CozyProvider was not passed a client instance.");return e.store&&e.client.setStore(e.store),a}return(0,o.default)(r,[{key:"getChildContext",value:function(){return{store:this.props.store||this.context.store||this.props.client.store,client:this.props.client}}},{key:"render",value:function(){return d.default.createElement(p.default.Provider,{value:this.getChildContext()},this.props.children)}}]),r}(d.Component);t.default=m,(0,l.default)(m,"propTypes",{store:h,client:f.default.object.isRequired,children:f.default.oneOfType([f.default.element,f.default.arrayOf(f.default.element)]).isRequired}),(0,l.default)(m,"childContextTypes",{store:f.default.object,client:f.default.object.isRequired}),(0,l.default)(m,"contextTypes",{store:f.default.object})},63890:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.computeChildrenArgs=t.getQueryAttributes=t.default=t.fetchQuery=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(8997)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(64512)),d=r(n(80295)),f=n(67294);r(n(88477));var p=r(n(45697));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}r(n(9211));var v={},y=function(e,t){return t.fetch?t.fetch():e.query(t.definition,{as:t.queryId})};t.fetchQuery=y;var b=function(e,t){var n=e.create.bind(e),r=e.save.bind(e),a=e.destroy.bind(e),i=e.getAssociation.bind(e),o="function"==typeof t.query?t.query(e,t):t.query,c=e.makeObservableQuery(o,t),s=c.fetchMore.bind(c),u=t.mutations,l=(0,d.default)(t,["mutations"]),f="function"==typeof u?u(e,c,l):u,p=c.fetch?c.fetch.bind(c):null;return{client:e,observableQuery:c,queryDefinition:o,createDocument:n,saveDocument:r,deleteDocument:a,getAssociation:i,fetchMore:s,fetch:p,mutations:f}};t.getQueryAttributes=b;var g=function(e){var t=e.observableQuery,n=e.fetchMore,r=e.fetch,a=e.createDocument,i=e.saveDocument,o=e.deleteDocument,c=e.getAssociation,s=e.mutations;return[m({fetchMore:n,fetch:r},t.currentResult()),m({createDocument:a,saveDocument:i,deleteDocument:o,getAssociation:c},s)]};t.computeChildrenArgs=g;var x=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(e,t){(0,a.default)(this,r),i=n.call(this,e,t),(0,l.default)((0,o.default)(i),"onQueryChange",function(){i.recomputeChildrenArgs(),i.setState(v)});var i,c=t.client;if(!t.client)throw Error("Query should be used with client in context (use CozyProvider to set context)");return i.client=c,i.observableQuery=null,i.queryUnsubscribe=null,Object.assign((0,o.default)(i),b(c,e)),i.recomputeChildrenArgs(),i}return(0,i.default)(r,[{key:"componentDidMount",value:function(){this.queryUnsubscribe=this.observableQuery.subscribe(this.onQueryChange),!1!==this.props.enabled&&this.executeQueryRespectingFetchPolicy()}},{key:"executeQueryRespectingFetchPolicy",value:function(){if(this.props.fetchPolicy){var e=this.client.getQueryFromState(this.props.as);this.props.fetchPolicy&&"function"==typeof this.props.fetchPolicy&&this.props.fetchPolicy(e)&&y(this.client,this.observableQuery)}else y(this.client,this.observableQuery)}},{key:"componentDidUpdate",value:function(e){!1===e.enabled&&!1!==this.props.enabled&&this.executeQueryRespectingFetchPolicy()}},{key:"componentWillUnmount",value:function(){this.queryUnsubscribe&&this.queryUnsubscribe()}},{key:"recomputeChildrenArgs",value:function(){this.childrenArgs=g(this)}},{key:"render",value:function(){return(0,this.props.children)(this.childrenArgs[0],this.childrenArgs[1])}}]),r}(f.Component);t.default=x,x.contextTypes={client:p.default.object,store:p.default.object};var w=p.default.object;x.propTypes={query:p.default.oneOfType([p.default.func,w]).isRequired,enabled:p.default.bool,as:p.default.string,children:p.default.func.isRequired,fetchPolicy:p.default.func},x.defaultProps={enabled:!0}},12887:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=n(67294),c=r(n(2705)),s=n(8752),u=n(90688),l=(0,o.memo)(function(e){var t=e.doctype,n=(0,c.default)();return(0,o.useEffect)(function(){var e,r=n.plugins.realtime;if(!r)throw Error("You must include the realtime plugin to use RealTimeQueries");var o={};"io.cozy.files"===t&&(o.enhanceDocFn=u.ensureFilePath);var c=function(e){(0,s.dispatchCreate)(n,t,e,o)},l=function(e){(0,s.dispatchUpdate)(n,t,e,o)},d=function(e){(0,s.dispatchDelete)(n,t,e,o)};return(e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.subscribe("created",t,c);case 2:return e.next=4,r.subscribe("updated",t,l);case 4:return e.next=6,r.subscribe("deleted",t,d);case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})(),function(){r.unsubscribe("created",t,c),r.unsubscribe("updated",t,l),r.unsubscribe("deleted",t,d)}},[n,t]),null});t.default=l},81390:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(64512)),u=r(n(24350)),l=r(n(66604)),d=r(n(82492)),f=r(n(84238)),p=r(n(71843)),h=n(30130);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){var t=(0,l.default)(e.relationships||{},function(e,t){return v(v({},e),{},{name:t,type:(0,h.resolveClass)(e.doctype,e.type)})});return v(v({},e),{},{relationships:(0,f.default)(t)>0?(0,u.default)(t,"name"):null})},b=function(e,t){if(!e)throw Error(t)},g=function(e,t){var n=(0,p.default)(e,t,function(e){return e.name});b(0===n.length,"Duplicated names in schemas being added: ".concat(n.map(function(e){return e.name}).join(", ")));var r=(0,p.default)(e,t,function(e){return e.doctype});b(0===r.length,"Duplicated doctypes in schemas being added: ".concat(r.map(function(e){return e.name}).join(", ")))},x=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,o.default)(this,n),this.byDoctype={},this.add(e),this.client=t}return(0,c.default)(n,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.default)(e,function(e,t){return v({name:t},y(e))});g(Object.values(t),Object.values(this.byDoctype)),(0,d.default)(this.byDoctype,(0,u.default)(t,function(e){return e.doctype}))}},{key:"getDoctypeSchema",value:function(e){var t=this.byDoctype[e];return t||(t=y({name:e,doctype:e}),this.byDoctype[e]=t),t}},{key:"getRelationship",value:function(e,t){if(!e)throw TypeError("Invalid doctype ".concat(e));var n=this.getDoctypeSchema(e);if(!n)throw Error("Cannot find doctype ".concat(e," in schema"));if(!n.relationships)throw Error("Schema for doctype ".concat(e," has no relationships"));return n.relationships[t]}},{key:"validate",value:(e=(0,i.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},r=this.byDoctype[t._type]){e.next=4;break}return e.abrupt("return",!0);case 4:if(r.attributes){e.next=6;break}return e.abrupt("return",!0);case 6:e.t0=a.default.keys(r.attributes);case 7:if((e.t1=e.t0()).done){e.next=15;break}return i=e.t1.value,e.next=11,this.validateAttribute(t,i,r.attributes[i]);case 11:!0!==(o=e.sent)&&(n[i]=o),e.next=7;break;case 15:if(0!==Object.keys(n).length){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"validateAttribute",value:(t=(0,i.default)(a.default.mark(function e(t,n,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.unique&&this.client)){e.next=6;break}return e.next=3,this.client.collection(t._type).checkUniquenessOf(n,t[n]);case 3:if(!0===e.sent){e.next=6;break}return e.abrupt("return","must be unique");case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})}]),n}();t.default=x},13945:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.transformBulkDocsResponse=void 0;var a=r(n(80295)),i=r(n(68434)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=r(n(25665)),l=r(n(27952)),d=r(n(12323)),f=r(n(64512)),p=r(n(35905)),h=n(87549),m=r(n(6505)),v=n(71791),y=n(48544),b=r(n(81602)),g=n(64374),x=n(67454);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=function(e){var t=e.selector,n=e.partialFilter,r=e.sort,a=e.fields;return!!t||!!n||!!r||!!a},_=function(e,t){var n=(0,p.default)(e,t,function(e,t){return e.ok?k(k({},t),{},{_id:e.id,_rev:e.rev}):t});if(e.find(function(e){return!e.ok}))throw new y.BulkEditError(e,n);return{data:n}};t.transformBulkDocsResponse=_;var E=function(e){(0,u.default)(y,e);var t,n,r,f,p,m=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(y);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.client,r=t.stackClient,a=t.platform,i=t.performanceApi;return(0,c.default)(this,y),e=m.call(this),n&&b.default.warn("Using options.client is deprecated, prefer options.stackClient"),e.stackClient=r||n,e.isOnline=null==a?void 0:a.isOnline,e.performanceApi=i||x.defaultPerformanceApi,e}return(0,s.default)(y,[{key:"registerClient",value:function(e){this.stackClient=e.stackClient||e.client}},{key:"reset",value:(n=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.stackClient=null;case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"request",value:(r=(0,o.default)(i.default.mark(function e(t,n,r,a){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(null!=n&&n.forceStack)&&this.isOnline,!e.t0){e.next=5;break}return e.next=4,this.isOnline();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",a(t,n));case 7:if(e.prev=7,!t.mutationType){e.next=12;break}return e.next=11,this.executeMutation(t,n,r,a);case 11:case 14:return e.abrupt("return",e.sent);case 12:return e.next=14,this.executeQuery(t);case 17:if(e.prev=17,e.t1=e.catch(7),!(!(null!=n&&n.forceStack)&&(0,g.isReactNativeOfflineError)(e.t1))){e.next=21;break}return e.abrupt("return",a(t,n));case 21:throw e.t1;case 22:case"end":return e.stop()}},e,this,[[7,17]])})),function(e,t,n,a){return r.apply(this,arguments)})},{key:"persistCozyData",value:(f=(0,o.default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(t));case 1:case"end":return e.stop()}},e)})),function(e,t){return f.apply(this,arguments)})},{key:"executeQuery",value:function(e){var t=e.doctype,n=e.selector,r=e.id,i=e.ids,o=e.referenced,c=(0,a.default)(e,["doctype","selector","id","ids","referenced"]);if(!t)throw b.default.warn("Bad query",e),Error("No doctype found in a query definition");var s=this.stackClient.collection(t);return r?s.get(r,e):i?s.getAll(i):o?s.findReferencedBy(o,c):O(e)?s.find(n,c):s.all(c)}},{key:"executeMutation",value:(p=(0,o.default)(i.default.mark(function e(t,n,r,o){var c,s,u,l,d;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=t.mutationType,s=t.document,u=t.documents,l=(0,a.default)(t,["mutationType","document","documents"]),e.t0=c,e.next=e.t0===h.MutationTypes.CREATE_DOCUMENT?4:e.t0===h.MutationTypes.UPDATE_DOCUMENTS?5:e.t0===h.MutationTypes.UPDATE_DOCUMENT?9:e.t0===h.MutationTypes.DELETE_DOCUMENT?10:e.t0===h.MutationTypes.ADD_REFERENCES_TO?11:e.t0===h.MutationTypes.REMOVE_REFERENCES_TO?12:e.t0===h.MutationTypes.ADD_REFERENCED_BY?13:e.t0===h.MutationTypes.REMOVE_REFERENCED_BY?18:e.t0===h.MutationTypes.UPLOAD_FILE?23:24;break;case 4:return e.abrupt("return",this.stackClient.collection(s._type).create(s));case 5:return e.next=7,this.stackClient.collection(u[0]._type).updateAll(u);case 7:return d=e.sent,e.abrupt("return",_(d,u));case 9:return e.abrupt("return",this.stackClient.collection(s._type).update(s));case 10:return e.abrupt("return",this.stackClient.collection(s._type).destroy(s));case 11:return e.abrupt("return",this.stackClient.collection(l.referencedDocuments[0]._type).addReferencesTo(s,l.referencedDocuments));case 12:return e.abrupt("return",this.stackClient.collection(l.referencedDocuments[0]._type).removeReferencesTo(s,l.referencedDocuments));case 13:if(s._type!==v.DOCTYPE_FILES){e.next=17;break}return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).addReferencedBy(s,l.referencedDocuments));case 17:case 22:throw Error("The document type should be io.cozy.files");case 18:if(s._type!==v.DOCTYPE_FILES){e.next=22;break}return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).removeReferencedBy(s,l.referencedDocuments));case 23:return e.abrupt("return",this.stackClient.collection(v.DOCTYPE_FILES).upload(l.file,l.dirPath));case 24:return e.abrupt("return",o(t,n,r));case 25:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return p.apply(this,arguments)})}]),y}(m.default);t.default=E},97491:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(25665)),u=r(n(27952)),l=r(n(12323)),d=function(e){(0,s.default)(p,e);var t,n,r,d,f=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.default)(p);return e=t?Reflect.construct(n,arguments,(0,l.default)(this).constructor):n.apply(this,arguments),(0,u.default)(this,e)});function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.webviewIntent;return(0,o.default)(this,p),(e=f.call(this)).webviewIntent=n,e}return(0,c.default)(p,[{key:"registerClient",value:function(e){}},{key:"reset",value:(n=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"request",value:(r=(0,i.default)(a.default.mark(function e(t,n,r,i){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webviewIntent.call("flagshipLinkRequest",t,n));case 1:case"end":return e.stop()}},e,this)})),function(e,t,n,a){return r.apply(this,arguments)})},{key:"persistCozyData",value:(d=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}},e)})),function(e,t){return d.apply(this,arguments)})}]),p}(r(n(6505)).default);t.default=d},99658:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723));n(87549);var o=function(){function e(t,n,r,i){(0,a.default)(this,e);var o=i.dispatch,c=i.get,s=i.query,u=i.mutate,l=i.save;this.target=t,this.name=n,this.doctype=r,this.get=c,this.query=s,this.mutate=u,this.save=l,this.dispatch=o}return(0,i.default)(e,[{key:"raw",get:function(){throw Error("A relationship must define its raw getter")}},{key:"data",get:function(){throw Error("A relationship must define its data getter")}}],[{key:"query",value:function(e,t,n){throw Error("A custom relationship must define its query() function")}}]),e}();t.default=o},35702:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.updateRelationship=t.updateHasManyItem=t.removeHasManyItem=t.setHasManyItem=t.getHasManyItems=t.getHasManyItem=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(8997)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(64512)),d=r(n(98235)),f=r(n(27361)),p=r(n(82492)),h=n(87549),m=n(72662),v=r(n(99658)),y=r(n(81602));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=function(e,t,n){var r=-1===t?e.length:t;return[].concat((0,d.default)(e.slice(0,r)),[n],(0,d.default)(e.slice(r+1)))},w=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){var e;(0,a.default)(this,r);for(var t=arguments.length,i=Array(t),c=0;c<t;c++)i[c]=arguments[c];return e=n.call.apply(n,[this].concat(i)),(0,l.default)((0,o.default)(e),"updateRelationshipData",function(t){return function(n,r){var a=(0,m.getDocumentFromState)(r(),e.target._type,e.target._id);n((0,m.receiveQueryResult)(null,{data:g(g({},a),{},{relationships:g(g({},a.relationships),{},(0,l.default)({},e.name,t(a.relationships[e.name])))})}))}}),e}return(0,i.default)(r,[{key:"fetchMore",value:function(){throw"Not implemented"}},{key:"exists",value:function(e){return this.existsById(e._id)}},{key:"containsById",value:function(e){return void 0!==this.getRelationship().data.find(function(t){return e===t._id})}},{key:"existsById",value:function(e){return!!(this.containsById(e)&&this.get(this.doctype,e))}},{key:"add",value:function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){return e._id});return this.addById(t)}},{key:"remove",value:function(e){var t=(Array.isArray(e)?e:[e]).map(function(e){return e._id});return this.removeById(t)}},{key:"addTargetRelationships",value:function(e){var t,n=this;this.target.relationships||(this.target.relationships={}),this.target.relationships[this.name]||(this.target.relationships[this.name]={data:[]});var r=(Array.isArray(e)?e:[e]).filter(function(e){return!n.existsById(e)}).map(function(e){return{_id:e,_type:n.doctype}});(t=this.target.relationships[this.name].data).push.apply(t,(0,d.default)(r)),this.updateMetaCount()}},{key:"addById",value:function(e){return this.addTargetRelationships(e),this.save(this.target)}},{key:"removeTargetRelationships",value:function(e){var t=Array.isArray(e)?e:[e];this.target.relationships[this.name].data=this.target.relationships[this.name].data.filter(function(e){var n=e._id;return!t.includes(n)}),this.updateMetaCount()}},{key:"removeById",value:function(e){return this.removeTargetRelationships(e),this.save(this.target)}},{key:"updateMetaCount",value:function(){void 0!==(0,f.default)(this.target.relationships[this.name],"meta.count")&&(this.target.relationships[this.name].meta=g(g({},this.target.relationships[this.name].meta),{},{count:this.target.relationships[this.name].data.length}))}},{key:"getRelationship",value:function(){var e=this.target[this.name],t=(0,f.default)(this.target,"relationships.".concat(this.name));return t||(e&&e.length&&y.default.warn("You're trying to access data on a relationship that appear to not be loaded yet. You may want to use 'include()' on your query"),{data:[],next:!0,meta:{count:0}})}},{key:"updateTargetRelationship",value:function(e,t){var n=e.readDocument(this.target._type,this.target._id);e.writeDocument(this.updateRelationship(n,t))}},{key:"updateRelationship",value:function(e,t){return r.updateRelationship(e,this.name,t)}},{key:"dehydrate",value:function(e){return g(g({},e),{},{relationships:g(g({},e.relationships),{},(0,l.default)({},this.name,{data:this.raw}))})}},{key:"raw",get:function(){return this.getRelationship().data}},{key:"data",get:function(){var e=this;return this.getRelationship().data.map(function(t){var n=t._id,r=t._type;return e.get(r,n)}).filter(Boolean)}},{key:"hasMore",get:function(){return this.getRelationship().next}},{key:"count",get:function(){var e=this.getRelationship();return e.meta?e.meta.count:e.data.length}}],[{key:"query",value:function(e,t,n){var r=(0,f.default)(e,"relationships.".concat(n.name,".data"),[]).map(function(e){return e._id});return new h.QueryDefinition({doctype:n.doctype,ids:r})}}]),r}(v.default),k=w.getHasManyItem=function(e,t,n){return(0,f.default)(e,"relationships.".concat(t,".data"),[]).find(function(e){return e._id==n})};t.getHasManyItem=k;var O=w.getHasManyItems=function(e,t){return(0,f.default)(e,"relationships.".concat(t,".data"),[])};t.getHasManyItems=O;var _=w.setHasManyItem=function(e,t,n,r){var a=w.getHasManyItems(e,t),i=a.findIndex(function(e){return e._id===n}),o=(0,p.default)({},a[i],r),c=x(a,i,o);return w.updateRelationship(e,t,function(e){return(0,p.default)({},e,{data:c})})};t.setHasManyItem=_;var E=w.removeHasManyItem=function(e,t,n){var r=w.getHasManyItems(e,t).filter(function(e){return e._id!==n});return w.updateRelationship(e,t,function(){return{data:r}})};t.removeHasManyItem=E;var S=w.updateHasManyItem=function(e,t,n,r){var a=r(w.getHasManyItem(e,t,n));return w.setHasManyItem(e,t,n,a)};t.updateHasManyItem=S;var C=w.updateRelationship=function(e,t,n){return g(g({},e),{},{relationships:g(g({},e.relationships),{},(0,l.default)({},t,g(g({},e.relationships?e.relationships[t]:{}),n(e.relationships?e.relationships[t]:{}))))})};t.updateRelationship=C,t.default=w},2501:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getFileDatetime=void 0;var a=r(n(68434)),i=r(n(98235)),o=r(n(64512)),c=r(n(82007)),s=r(n(65105)),u=r(n(19723)),l=r(n(59655)),d=r(n(25665)),f=r(n(27952)),p=r(n(12323)),h=r(n(90402)),m=r(n(27361)),v=r(n(57557)),y=r(n(44908)),b=n(87549),g=n(72662),x=n(71791);r(n(99658));var w=r(n(35702));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _=function(e,t){var n=(0,h.default)(e,3),r=n[0],a=n[1],i=n[2];return[i?[r,a,i]:[r,a],t]},E=function(e){var t;return(null===(t=e.metadata)||void 0===t?void 0:t.datetime)||e.created_at};t.getFileDatetime=E;var S=function(e){(0,d.default)(w,e);var t,n,r,o,h=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,p.default)(w);return e=t?Reflect.construct(n,arguments,(0,p.default)(this).constructor):n.apply(this,arguments),(0,f.default)(this,e)});function w(){return(0,s.default)(this,w),h.apply(this,arguments)}return(0,u.default)(w,[{key:"fetchMore",value:(n=(0,c.default)(a.default.mark(function e(){var t,n,r,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.QueryDefinition({doctype:x.DOCTYPE_FILES}),r=(n=this.getRelationship().data)[n.length-1],e.next=5,this.dispatch(function(){var e=(0,c.default)(a.default.mark(function e(c,s){var u,l,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=E((0,g.getDocumentFromState)(s(),r._type,r._id)),l=_([o.target._type,o.target._id,u],n[n.length-1]._id),e.next=5,o.query(t.referencedBy(o.target).offsetCursor(l));case 5:return(d=e.sent).data.shift(),e.next=9,o.dispatch(o.updateRelationshipData(function(e){return O(O({},e),{},{data:[].concat((0,i.default)(e.data),(0,i.default)(d.data)),next:d.next})}));case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"addById",value:(r=(0,c.default)(a.default.mark(function e(t){var n,r,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t:[t],this.addTargetRelationships(n),r=n.map(function(e){return{_id:e,_type:i.doctype}}),e.next=5,this.mutate(this.addReferences(r));case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"removeById",value:(o=(0,c.default)(a.default.mark(function e(t){var n,r,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(t)?t:[t],this.removeTargetRelationships(t),r=n.map(function(e){return{_id:e,_type:i.doctype}}),e.next=5,this.mutate(this.removeReferences(r));case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"addReferences",value:function(e){if(this.target._type===x.DOCTYPE_FILES)return b.Mutations.addReferencedBy(this.target,e);if(e[0]._type===x.DOCTYPE_FILES)return b.Mutations.addReferencesTo(this.target,e);throw Error("Either the document or the references should be io.cozy.files")}},{key:"removeReferences",value:function(e){if(this.target._type===x.DOCTYPE_FILES)return b.Mutations.removeReferencedBy(this.target,e);if(e[0]._type===x.DOCTYPE_FILES)return b.Mutations.removeReferencesTo(this.target,e);throw Error("Either the document or the references should be io.cozy.files")}},{key:"dehydrate",value:function(e){return(0,v.default)(e,[this.name,"relationships.".concat(this.name)])}},{key:"data",get:function(){var e=this;return this.target._type===x.DOCTYPE_FILES?(0,m.default)(this.target,"referenced_by",[]).map(function(t){var n=t.id,r=t.type;return e.get(r,n)}).filter(Boolean):(0,l.default)((0,p.default)(w.prototype),"data",this)}}],[{key:"query",value:function(e,t,n){if(e._type===x.DOCTYPE_FILES){var r=(0,m.default)(e,"relationships.referenced_by.data",[]),a=(0,y.default)(r.filter(function(e){return e.type===n.doctype}).map(function(e){return e.id}));return a.length>0?(0,b.Q)(n.doctype).getByIds(a):null}var i=_([e._type,e._id],"");return(0,b.Q)(n.doctype).referencedBy(e).offsetCursor(i)}}]),w}(w.default);t.default=S},37828:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=n(87549);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){return(0,i.default)(this,r),n.apply(this,arguments)}return(0,o.default)(r,[{key:"addById",value:function(e){this.getRelationship().push(e)}},{key:"removeById",value:function(e){var t=this.getRelationship(),n=t.indexOf(e);-1!==n&&t.splice(n,1)}},{key:"existsById",value:function(e){return -1!==this.getRelationship().indexOf(e)}},{key:"getRelationship",value:function(){return this.target[this.name]=this.target[this.name]||[],this.target[this.name]}},{key:"dehydrate",value:function(e){return f(f({},e),{},(0,a.default)({},this.name,this.raw||[]))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){var e=this,t=this.doctype;return(this.raw||[]).map(function(n){return e.get(t,n)})}}],[{key:"query",value:function(e,t,n){var r=e[n.name];return r&&r>0?(0,l.Q)(n.doctype).getByIds(r):null}}]),r}(r(n(99658)).default);t.default=p},32740:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(59655)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(35702)),d=n(87549),f=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){return(0,a.default)(this,r),n.apply(this,arguments)}return(0,i.default)(r,[{key:"data",get:function(){var e=this;return(0,o.default)((0,u.default)(r.prototype),"data",this).filter(function(t){return t.slug===e.target.slug})}}],[{key:"query",value:function(e,t){return(0,d.Q)("io.cozy.triggers").where({worker:"konnector"})}}]),r}(l.default);t.default=f},52727:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(27361)),d=r(n(36968)),f=n(87549),p=r(n(99658)),h=r(n(81602));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){return(0,i.default)(this,r),n.apply(this,arguments)}return(0,o.default)(r,[{key:"add",value:function(e){return this.setRelationship(e),this.save(this.target)}},{key:"remove",value:function(){return this.setRelationship(void 0),this.save(this.target)}},{key:"setRelationship",value:function(e){if(e&&e._type!==this.doctype)throw Error("Tried to associate a ".concat(e._type," document to a HasOne relationship on ").concat(this.doctype," document"));var t="relationships[".concat(this.name,"].data");e?(0,d.default)(this.target,t,{_id:e._id,_type:e._type}):(0,d.default)(this.target,t,void 0)}},{key:"set",value:function(e){h.default.warn("set is deprecated for has-one relationships. Use `add` instead."),this.setRelationship(e)}},{key:"unset",value:function(){h.default.warn("unset is deprecated for has-one relationships. Use `remove` instead."),this.setRelationship(void 0)}},{key:"dehydrate",value:function(e){return this.raw?v(v({},e),{},{relationships:v(v({},e.relationships),{},(0,a.default)({},this.name,{data:this.raw}))}):e}},{key:"raw",get:function(){return(0,l.default)(this.target,"relationships[".concat(this.name,"].data"),null)}},{key:"data",get:function(){return this.raw?this.get(this.doctype,this.raw._id):null}}],[{key:"query",value:function(e,t,n){var r=(0,l.default)(e,"relationships.".concat(n.name,".data"),{});return r&&r._id?(0,f.Q)(n.doctype).getById(r._id):null}}]),r}(p.default);t.default=y},85731:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.BelongsToInPlace=t.default=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(99658)),d=n(87549);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(){return(0,i.default)(this,r),n.apply(this,arguments)}return(0,o.default)(r,[{key:"dehydrate",value:function(e){return p(p({},e),{},(0,a.default)({},this.name,this.raw||void 0))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){return this.get(this.doctype,this.raw)}}],[{key:"query",value:function(e,t,n){var r=e[n.name];return t.getDocumentFromState(n.doctype,r)||(0,d.Q)(n.doctype).getById(r)}}]),r}(l.default);t.default=h,t.BelongsToInPlace=h},72887:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getReferencedById=t.getReferencedBy=t.isReferencedById=t.isReferencedBy=t.create=t.resolveClass=t.attachRelationships=t.responseToRelationship=t.pickTypeAndId=void 0;var a=r(n(64512)),i=r(n(78718)),o=r(n(35937)),c=r(n(99658)),s=r(n(52727)),u=r(n(85731)),l=r(n(35702)),d=r(n(37828)),f=r(n(2501));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e){return(0,i.default)(e,"_type","_id")};t.pickTypeAndId=m,t.responseToRelationship=function(e){var t;return(0,o.default)({data:Array.isArray(t=e.data)?t.map(m):m(t),meta:e.meta,next:e.next,skip:e.skip,bookmark:e.bookmark})};var v=function(e,t){return h(h({},e),{},{relationships:h(h({},e.relationships),t)})};t.attachRelationships=function(e,t){if(Array.isArray(e.data))return h(h({},e),{},{data:e.data.map(function(e){return v(e,t[e._id])})});var n=e.data;return h(h({},e),{},{data:v(n,t[n._id])})};var y={"io.cozy.files:has-many":f.default,"has-many":l.default,"belongs-to-in-place":u.default,"has-one":s.default,"has-one-in-place":u.default,"has-many-in-place":d.default};t.resolveClass=function(e,t){if(void 0===t)throw Error("Undefined type for "+e);if("string"!=typeof t)return t;var n=y["".concat(e,":").concat(t)]||y[t];if(n)return n;throw Error("Unknown association '".concat(t,"'"))},t.create=function(e,t,n){var r=t.name,a=t.type,i=t.doctype;if(e[r]instanceof c.default)throw Error("Association ".concat(r," already exists"));return new a(e,r,i,n)},t.isReferencedBy=function(e,t){var n,r;return((null==e?void 0:null===(n=e.relationships)||void 0===n?void 0:null===(r=n.referenced_by)||void 0===r?void 0:r.data)||(null==e?void 0:e.referenced_by)||[]).some(function(e){return e.type===t})},t.isReferencedById=function(e,t,n){var r,a;return((null==e?void 0:null===(r=e.relationships)||void 0===r?void 0:null===(a=r.referenced_by)||void 0===a?void 0:a.data)||(null==e?void 0:e.referenced_by)||[]).some(function(e){return e.type===t&&e.id===n})},t.getReferencedBy=function(e,t){var n,r;return((null==e?void 0:null===(n=e.relationships)||void 0===n?void 0:null===(r=n.referenced_by)||void 0===r?void 0:r.data)||(null==e?void 0:e.referenced_by)||[]).filter(function(e){return e.type===t})},t.getReferencedById=function(e,t,n){var r,a;return((null==e?void 0:null===(r=e.relationships)||void 0===r?void 0:null===(a=r.referenced_by)||void 0===a?void 0:a.data)||(null==e?void 0:e.referenced_by)||[]).filter(function(e){return e.type===t&&e.id===n})}},30130:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"HasManyFiles",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"resolveClass",{enumerable:!0,get:function(){return d.resolveClass}}),Object.defineProperty(t,"create",{enumerable:!0,get:function(){return d.create}}),Object.defineProperty(t,"isReferencedBy",{enumerable:!0,get:function(){return d.isReferencedBy}}),Object.defineProperty(t,"isReferencedById",{enumerable:!0,get:function(){return d.isReferencedById}}),Object.defineProperty(t,"getReferencedBy",{enumerable:!0,get:function(){return d.getReferencedBy}}),Object.defineProperty(t,"getReferencedById",{enumerable:!0,get:function(){return d.getReferencedById}});var a=r(n(2501)),i=r(n(35702)),o=r(n(52727)),c=r(n(85731)),s=r(n(37828)),u=r(n(32740)),l=r(n(99658)),d=n(72887)},51245:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.authFunction=t.authenticateWithCordova=void 0;var i=a(n(68434)),o=a(n(82007)),c=n(71791),s=n(25976),u="undefined"!=typeof window?window:null,l=function(e){return new Promise(function(t,n){u.SafariViewController.show({url:e,transition:"curl"},function(e){"closed"===e.event&&n(Error(c.REGISTRATION_ABORT))},function(e){console.log("KO: "+e),n(Error(c.REGISTRATION_ABORT))});var r=u.handleOpenURL;u.handleOpenURL=function(e){u.SafariViewController.hide(),t(e),r&&(u.handleOpenURL=r)}})},d=function(e){return new Promise(function(t,n){var r=u.cordova.InAppBrowser.open(e,"_blank","clearcache=yes,zoom=no"),a=function(){r.removeEventListener("loadstart",i),r.removeEventListener("exit",o)},i=function(e){var n=e.url,i=/\?access_code=(.+)$/.test(n),o=/\?state=(.+)$/.test(n);(i||o)&&(t(n),a(),r.close())},o=function(){n(Error(c.REGISTRATION_ABORT)),a(),r.close()};r.addEventListener("loadstart",i),r.addEventListener("exit",o)})},f=(r=(0,o.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(0,s.isIOSApp)(),!e.t0){e.next=5;break}return e.next=4,(0,s.hasSafariPlugin)();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=9;break}return e.abrupt("return",l(t));case 9:if(!(0,s.hasInAppBrowserPlugin)()){e.next=13;break}return e.abrupt("return",d(t));case 13:return console.log(t),e.abrupt("return",new Promise(function(e){setTimeout(function(){e(prompt("Paste the url here:"))},5e3)}));case 15:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.authenticateWithCordova=f,t.authFunction=f},71791:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOCTYPE_FILES_ENCRYPTION=t.DOCTYPE_PERMISSIONS=t.DOCTYPE_FILES=t.REGISTRATION_ABORT=void 0,t.REGISTRATION_ABORT="REGISTRATION_ABORT",t.DOCTYPE_FILES="io.cozy.files",t.DOCTYPE_PERMISSIONS="io.cozy.permissions",t.DOCTYPE_FILES_ENCRYPTION="io.cozy.files.encryption"},97682:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APP_TYPE=void 0,t.APP_TYPE={KONNECTOR:"konnector",WEBAPP:"webapp"}},95460:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.clientContext=void 0;var a=n(67294);r(n(88477));var i=(0,a.createContext)({client:null,store:null});t.clientContext=i,t.default=i},48544:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.BulkEditError=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(25665)),s=r(n(27952)),u=r(n(12323)),l=r(n(15500)),d=r(n(35905));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){(0,c.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(r);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function r(e,t){var a;return(0,i.default)(this,r),(a=n.call(this,"Error while bulk saving")).name="BulkEditError",a.results=(0,d.default)(e,t,function(e,t){return p(p({},e),{},{doc:t})}),a}return(0,o.default)(r,[{key:"getUpdatedDocuments",value:function(){return this.results.filter(function(e){return e.ok}).map(function(e){return e.doc})}},{key:"getErrors",value:function(){return this.results.filter(function(e){return!e.ok})}}]),r}((0,l.default)(Error));t.BulkEditError=h},48550:function(e,t,n){"use strict";var r,a,i,o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.certifyFlagship=void 0;var c=o(n(68434)),s=o(n(82007));o(n(88477));var u=n(75763),l=(r=(0,s.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.getStackClient(),e.next=4,n.fetchJSON("POST","/auth/clients/".concat(n.oauthOptions.clientID,"/challenge"),null,{headers:{Authorization:n.registrationAccessTokenToAuthHeader()}});case 4:return r=e.sent,e.abrupt("return",r.nonce);case 8:throw e.prev=8,e.t0=e.catch(0),Error("[FLAGSHIP_CERTIFICATION] Something went wrong while requesting a challenge from CozyStack:\n"+e.t0.message);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)}),d=(a=(0,s.default)(c.default.mark(function e(t,n,r){var a,i,o,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.platform,i=t.attestation,o=t.keyId,s=t.issuer,u=r.getStackClient(),e.next=5,u.fetchJSON("POST","/auth/clients/".concat(u.oauthOptions.clientID,"/attestation"),{platform:a,attestation:i,challenge:n,keyId:o,issuer:s},{headers:{Authorization:u.registrationAccessTokenToAuthHeader()}});case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),Error("[FLAGSHIP_CERTIFICATION] Something went wrong while giving attestation to CozyStack:\n"+e.t0.message);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return a.apply(this,arguments)}),f=(i=(0,s.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("[FLAGSHIP_CERTIFICATION] Certification configuration is not set");case 2:return e.prev=2,e.next=5,l(n);case 5:return r=e.sent,e.next=8,(0,u.getAppAttestationFromStore)(r,t);case 8:return a=e.sent,e.next=11,d(a,r,n);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn('[FLAGSHIP_CERTIFICATION] Automatic certification for URI "'.concat(n.stackClient.uri,'" failed. This is expected on dev environments and non-official phones. Cozy-stack will continue with manual certification through 2FA')),console.warn(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[2,13]])})),function(e,t){return i.apply(this,arguments)});t.certifyFlagship=f},75763:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getAppAttestationFromStore=void 0;var i=a(n(68434)),o=(r=(0,a(n(82007)).default)(i.default.mark(function e(t,n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("getAppAttestationFromStore can only be called from a React Native container");case 1:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.getAppAttestationFromStore=o},64831:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.dehydrate=void 0;var a=r(n(90402)),i=n(30130);t.dehydrate=function(e){return Object.entries(e).reduce(function(e,t){var n=(0,a.default)(t,2),r=n[0],o=n[1],c=e;if(o instanceof i.Association){if(o.dehydrate)c=o.dehydrate(c);else throw Error("Association on key ".concat(r," should have a dehydrate method"))}else c[r]=o;return c},{})}},64157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"deconstructCozyWebLinkWithSlug",{enumerable:!0,get:function(){return r.deconstructCozyWebLinkWithSlug}}),Object.defineProperty(t,"deconstructRedirectLink",{enumerable:!0,get:function(){return r.deconstructRedirectLink}}),Object.defineProperty(t,"generateWebLink",{enumerable:!0,get:function(){return r.generateWebLink}}),Object.defineProperty(t,"ensureFirstSlash",{enumerable:!0,get:function(){return r.ensureFirstSlash}}),Object.defineProperty(t,"rootCozyUrl",{enumerable:!0,get:function(){return r.rootCozyUrl}}),Object.defineProperty(t,"InvalidRedirectLinkError",{enumerable:!0,get:function(){return r.InvalidRedirectLinkError}}),Object.defineProperty(t,"InvalidCozyUrlError",{enumerable:!0,get:function(){return r.InvalidCozyUrlError}}),Object.defineProperty(t,"InvalidProtocolError",{enumerable:!0,get:function(){return r.InvalidProtocolError}}),Object.defineProperty(t,"BlockedCozyError",{enumerable:!0,get:function(){return r.BlockedCozyError}}),Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return a.dehydrate}}),Object.defineProperty(t,"editSettings",{enumerable:!0,get:function(){return i.editSettings}}),Object.defineProperty(t,"getQuery",{enumerable:!0,get:function(){return i.getQuery}}),Object.defineProperty(t,"getSettings",{enumerable:!0,get:function(){return i.getSettings}}),Object.defineProperty(t,"normalizeSettings",{enumerable:!0,get:function(){return i.normalizeSettings}}),Object.defineProperty(t,"saveAfterFetchSettings",{enumerable:!0,get:function(){return i.saveAfterFetchSettings}});var r=n(40902),a=n(64831),i=n(55463)},90688:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.ensureFilePath=void 0;var i=a(n(68434)),o=a(n(64512)),c=a(n(82007)),s=n(87549),u=a(n(88477));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var d=function(e){return{definition:function(){return(0,s.Q)("io.cozy.files").getById(e)},options:{as:"io.cozy.files/".concat(e),singleDocData:!0,fetchPolicy:u.default.fetchPolicies.olderThan(3e4)}}},f=(r=(0,c.default)(i.default.mark(function e(t){var n,r,a,c,s=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:{},!t.path){e.next=3;break}return e.abrupt("return",t);case 3:return r=d(t.dir_id),e.next=6,n.client.fetchQueryAndGetFromState({definition:r.definition(),options:r.options});case 6:if(!(!(a=e.sent).data||!a.data.path)){e.next=9;break}throw Error("Could not define a file path for ".concat(t._id||t.id));case 9:return c=a.data.path+"/"+t.name,e.abrupt("return",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({path:c},t));case 11:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.ensureFilePath=f},55463:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getQuery=t.extractKeys=t.editSettings=t.normalizeSettings=t.saveAfterFetchSettings=t.getSettings=void 0;var o=i(n(90402)),c=i(n(64512)),s=i(n(68434)),u=i(n(82007));i(n(88477));var l=i(n(83549)),d=n(87549);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=l.default.olderThan(36e5),v=(r=(0,u.default)(s.default.mark(function e(t,n,r){var a,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=O(n),e.next=3,t.fetchQueryAndGetFromState({definition:a.definition,options:a.options});case 3:return i=b(e.sent.data),e.abrupt("return",k(i,r));case 6:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.getSettings=v;var y=(a=(0,u.default)(s.default.mark(function e(t,n,r,a){var i,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=O(n),e.next=3,t.fetchQueryAndGetFromState({definition:i.definition,options:i.options});case 3:return o=b(e.sent.data),c=void 0,c="function"==typeof r?r(k(o,a)):h(h({},k(o,Object.keys(r))),r),u=g(n,o,c),e.next=10,t.save(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)})),function(e,t,n,r){return a.apply(this,arguments)});t.saveAfterFetchSettings=y;var b=function(e){return(Array.isArray(e)?e[0]:e)||{}};t.normalizeSettings=b;var g=function(e,t,n){var r=S(e);return"instance"===e?x(t,n):w(t,r,n)};t.editSettings=g;var x=function(e,t){for(var n=h(h({_id:e._id,_type:e._type,_rev:e.meta.rev},e),{},{attributes:h({},e.attributes)}),r=0,a=Object.entries(t);r<a.length;r++){var i=(0,o.default)(a[r],2),c=i[0],s=i[1];n[c]=s,n.attributes[c]=s}return n},w=function(e,t,n){for(var r=h({_type:t},e),a=0,i=Object.entries(n);a<i.length;a++){var c=(0,o.default)(i[a],2),s=c[0],u=c[1];r[s]=u}return r},k=function(e,t){var n,r={},a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;r[i]=e[i]}}catch(e){a.e(e)}finally{a.f()}return r};t.extractKeys=k;var O=function(e){return"instance"===e?E(e):"passwords"===e?E("bitwarden"):_(e)};t.getQuery=O;var _=function(e){var t=S(e);return{definition:(0,d.Q)(t).limitBy(1),options:{as:t,fetchPolicy:m,singleDocData:!0}}},E=function(e){var t="io.cozy.settings",n=S(e);return{definition:(0,d.Q)(t).getById(n),options:{as:"".concat(t,"/").concat(n),fetchPolicy:m,singleDocData:!0}}},S=function(e){return["instance","bitwarden"].includes(e)?"io.cozy.settings.".concat(e):"passwords"===e?"io.cozy.settings.bitwarden":"io.cozy.".concat(e,".settings")}},40902:function(e,t,n){"use strict";var r,a,i,o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.rootCozyUrl=t.InvalidCozyUrlError=t.BlockedCozyError=t.InvalidProtocolError=t.InvalidRedirectLinkError=t.deconstructRedirectLink=t.deconstructCozyWebLinkWithSlug=t.generateWebLink=t.ensureFirstSlash=void 0;var c=o(n(98235)),s=o(n(54765)),u=o(n(68434)),l=o(n(82007)),d=o(n(65105)),f=o(n(25665)),p=o(n(27952)),h=o(n(12323)),m=o(n(15500)),v=o(n(90402));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);return n=t?Reflect.construct(r,arguments,(0,h.default)(this).constructor):r.apply(this,arguments),(0,p.default)(this,n)}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){return e?e.startsWith("/")?e:"/"+e:"/"};t.ensureFirstSlash=g,t.generateWebLink=function(e){var t=e.cozyUrl,n=e.searchParams,r=e.pathname,a=e.hash,i=e.slug,o=e.subDomainType,c=new URL(t);c.host="nested"===o?"".concat(i,".").concat(c.host):c.host.split(".").map(function(e,t){return 0===t?e+"-"+i:e}).join("."),c.pathname=g(r),c.hash=g(a);var s,u=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(n||[]);try{for(u.s();!(s=u.n()).done;){var l=(0,v.default)(s.value,2),d=l[0],f=l[1];c.searchParams.set(d,f)}}catch(e){u.e(e)}finally{u.f()}return c.toString()},t.deconstructCozyWebLinkWithSlug=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flat",n=new URL(e),r="nested"===t?n.host.split(".")[0]:n.host.split(".")[0].split("-")[1],a="nested"===t?n.host.split(".")[1]:n.host.split(".")[0].split("-")[0];return{cozyBaseDomain:n.host.split(".").slice("nested"===t?2:1).join("."),cozyName:a,pathname:n.pathname,hash:n.hash,protocol:n.protocol,searchParams:n.searchParams.toString(),slug:r}},t.deconstructRedirectLink=function(e){var t=e.split("#"),n=(0,v.default)(t,2),r=n[0],a=n[1],i=r.split(/\/(.*)/),o=(0,v.default)(i,2),c=o[0],s=o[1];if(!c.match(/^[a-z0-9]+$/))throw new x(e);return{slug:c,pathname:s,hash:a}};var x=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Invalid redirect link ".concat(e))).redirectLink=e,r}return n}((0,m.default)(Error));t.InvalidRedirectLinkError=x;var w=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Invalid URL protocol ".concat(e.protocol))).url=e,r}return n}((0,m.default)(Error));t.InvalidProtocolError=w;var k=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"Blocked cozy ".concat(e.toString()))).url=e,r}return n}((0,m.default)(Error));t.BlockedCozyError=k;var O=function(e){(0,f.default)(n,e);var t=y(n);function n(e){var r;return(0,d.default)(this,n),(r=t.call(this,"URL ".concat(e.toString()," does not seem to be a valid Cozy URL"))).url=e,r}return n}((0,m.default)(Error));t.InvalidCozyUrlError=O;var _=function(e){var t=e.protocol,n=e.hostname,r=e.port;return(""!==t?"".concat(t,"//"):"https://")+n+(""!==r?":".concat(r):"")},E=(r=(0,l.default)(u.default.mark(function e(t){var n,r,a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_(t)+"/.well-known/change-password");case 2:if(r=(n=e.sent).status,a=n.url,404!==r){e.next=6;break}throw new O(t);case 6:return e.next=8,C(n);case 8:if(!e.sent){e.next=10;break}throw new k(t);case 10:return i=t.origin!==new URL(a).origin,e.abrupt("return",200===r&&!i);case 12:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),S=(a=(0,l.default)(u.default.mark(function e(t){var n,r,a,i,o,l,d,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(["http:","https:"].includes(t.protocol)){e.next=2;break}throw new w(t);case 2:return e.next=4,E(t);case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",new URL(_({protocol:t.protocol,hostname:t.hostname,port:t.port})));case 6:if(!/^[^.-][^.]+-[^.-]+\./.test(t.hostname)){e.next=14;break}return n=t.hostname.split("."),a=(r=(0,s.default)(n))[0],i=r.slice(1),o=[a.replace(/-.+/,"")].concat((0,c.default)(i)).join("."),l=new URL(_({protocol:t.protocol,hostname:o,port:t.port})),e.next=12,E(l);case 12:if(!e.sent){e.next=14;break}return e.abrupt("return",l);case 14:return d=t.hostname.split(".").splice(1).join("."),f=new URL(_({protocol:t.protocol,hostname:d,port:t.port})),e.next=18,E(f);case 18:if(!e.sent){e.next=20;break}return e.abrupt("return",f);case 20:throw new O(t);case 21:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});t.rootCozyUrl=S;var C=(i=(0,l.default)(u.default.mark(function e(t){var n,r,a,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(503===t.status){e.next=2;break}return e.abrupt("return",!1);case 2:return a=(r=t.headers.get("content-type"))&&r.indexOf("json")>=0,e.next=6,a?t.json():t.text();case 6:if(!(null!=(i=e.sent)&&null!==(n=i.some)&&void 0!==n&&n.call(i,function(e){return"Blocked"===e.title}))){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},81656:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.queryConnectFlat=t.queryConnect=t.withClient=void 0;var i=a(n(64512)),o=a(n(95297)),c=r(n(67294)),s=a(n(45697)),u=a(n(47745)),l=a(n(63890)),d=a(n(2705)),f=n(70),p=a(n(81602));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.withClient=function(e){var t=function(t){var n=(0,d.default)();return c.default.createElement(e,(0,o.default)({},t,{client:n}))};return t.displayName="withClient(".concat(e.displayName||e.name,")"),t};var v=function(e,t,n){if(!t)throw Error("withQuery has no options for ".concat(e," (wrapping ").concat(n.name,")"));return function(n){var r=function(r,a){if(!a.client)throw Error("Should be used with client in context (use CozyProvider to set context)");var o="function"==typeof t?t(r):t;return t.doc?(p.default.warn("queryOpts.doc is deprecated"),c.default.createElement(n,m((0,i.default)({},e,o.doc),r))):c.default.createElement(l.default,o,function(t){return c.default.createElement(n,m((0,i.default)({},e,t),r))})};return r.contextTypes={client:s.default.object},r.displayName="withQuery(".concat(n.displayName||n.name,")"),r}};t.queryConnect=function(e){return function(t){var n=Object.keys(e).map(function(n){return v(n,e[n],t)});return u.default.apply(null,n)(t)}},t.queryConnectFlat=function(e){return function(t){var n=function(n){var r=(0,f.useQueries)(e);return c.default.createElement(t,(0,o.default)({},n,r))};return n.displayName="queryConnectFlat(".concat(t.displayName||t.name,")"),n}}},94615:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(67294);t.default=function(){var e=(0,r.useRef)();return(0,r.useEffect)(function(){return e.current=!0,function(){e.current=!1}},[]),e}},20842:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(90402)),i=n(67294),o=r(n(94615));t.default=function(e){var t=(0,o.default)(),n=(0,i.useState)(e),r=(0,a.default)(n,2),c=r[0],s=r[1];return[c,(0,i.useCallback)(function(e){t.current&&s(e)},[])]}},92534:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useAppLinkWithStoreFallback",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"useCapabilities",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"useFetchShortcut",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"useClient",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"useQuery",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"useQueries",{enumerable:!0,get:function(){return u.useQueries}}),Object.defineProperty(t,"useAppsInMaintenance",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"useQueryAll",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"useMutation",{enumerable:!0,get:function(){return f.useMutation}}),Object.defineProperty(t,"useInstanceInfo",{enumerable:!0,get:function(){return p.useInstanceInfo}}),Object.defineProperty(t,"useSettings",{enumerable:!0,get:function(){return h.useSettings}});var i=a(n(26469)),o=a(n(41692)),c=a(n(61814)),s=a(n(2705)),u=r(n(70)),l=a(n(9810)),d=a(n(92797)),f=n(13554),p=n(13975),h=n(33756)},26469:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=n(87549),u=n(13114);t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,c.useState)("loading"),l=(0,o.default)(r,2),d=l[0],f=l[1],p=(0,c.useState)(!0),h=(0,o.default)(p,2),m=h[0],v=h[1],y=(0,c.useState)(null),b=(0,o.default)(y,2),g=b[0],x=b[1];return(0,c.useEffect)(function(){var r;(r=(0,i.default)(a.default.mark(function r(){var i,o,c;return a.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.query((0,s.Q)("io.cozy.apps"));case 3:i=r.sent,o={slug:e},v(!!(c=(0,u.isInstalled)(i.data,o))),c?x((0,u.getUrl)(c)+n):x((0,u.getStoreURL)(i.data,o)),f("loaded"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),f("errored");case 14:case"end":return r.stop()}},r,null,[[0,11]])})),function(){return r.apply(this,arguments)})()},[t,e,n]),{fetchStatus:d,isInstalled:m,url:g}}},9810:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(70)),i=n(87549),o=r(n(88477));t.default=function(){return(0,a.default)((0,i.Q)("io.cozy.apps_registry").getById("maintenance"),{as:"io.cozy.apps_registry/maintenance",fetchPolicy:o.default.fetchPolicies.olderThan(6e5),singleDocData:!1}).data||[]}},41692:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=r(n(27361)),u=n(87549);t.default=function(e){var t=(0,c.useState)(),n=(0,o.default)(t,2),r=n[0],l=n[1],d=(0,c.useState)("idle"),f=(0,o.default)(d,2),p=f[0],h=f[1];return(0,c.useEffect)(function(){var t,n=(t=(0,i.default)(a.default.mark(function t(){var n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h("loading"),t.prev=1,t.next=4,e.query((0,u.Q)("io.cozy.settings").getById("io.cozy.settings.capabilities"));case 4:n=t.sent,l((0,s.default)(n,"data",{})),h("loaded"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),h("failed");case 12:case"end":return t.stop()}},t,null,[[1,9]])})),function(){return t.apply(this,arguments)});e.capabilities?(l(e.capabilities),h("loaded")):n()},[e]),{capabilities:r,fetchStatus:p}}},2705:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(67294),i=r(n(95460));r(n(88477)),t.default=function(){return(0,a.useContext)(i.default).client}},61814:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=n(87549),u=r(n(88477));t.default=function(e,t){var n=(0,c.useState)(null),r=(0,o.default)(n,2),l=r[0],d=r[1],f=(0,c.useState)(null),p=(0,o.default)(f,2),h=p[0],m=p[1],v=(0,c.useState)("idle"),y=(0,o.default)(v,2),b=y[0],g=y[1];return(0,c.useEffect)(function(){var n;(n=(0,i.default)(a.default.mark(function n(){var r,i,o,c,l,f;return a.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return g("loading"),n.prev=1,n.next=4,e.fetchQueryAndGetFromState({definition:(0,s.Q)("io.cozy.files.shortcuts").getById(t),options:{as:"io.cozy.files.shortcuts/".concat(t),fetchPolicy:u.default.fetchPolicies.olderThan(6e5),singleDocData:!0}});case 4:if(!(l=null==(c=n.sent)?void 0:null===(r=c.data)||void 0===r?void 0:null===(i=r.metadata)||void 0===i?void 0:null===(o=i.target)||void 0===o?void 0:o.app)){n.next=13;break}return n.next=9,e.getStackClient().getIconURL({type:"app",slug:l,priority:"stack"});case 9:m(n.sent),n.next=16;break;case 13:f=new URL(c.data.url),m("".concat(e.getStackClient().uri,"/bitwarden/icons/").concat(f.host,"/icon.png"));case 16:d({data:c.data}),g("loaded"),n.next=23;break;case 20:n.prev=20,n.t0=n.catch(1),g("failed");case 23:case"end":return n.stop()}},n,null,[[1,20]])})),function(){return n.apply(this,arguments)})()},[e,t]),{shortcutInfos:l,shortcutImg:h,fetchStatus:b}}},13975:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useInstanceInfo=void 0;var a=r(n(70)),i=r(n(88477)),o=n(87549),c=n(64374);t.useInstanceInfo=function(){var e=s("io.cozy.settings.instance"),t=(0,a.default)(e.definition,e.options),n=s("io.cozy.settings.context"),r=(0,a.default)(n.definition,n.options),i=s("io.cozy.settings.disk-usage"),o=(0,a.default)(i.definition,i.options);return{isLoaded:null!==(0,c.hasQueryBeenLoaded)(t)&&null!==(0,c.hasQueryBeenLoaded)(r)&&null!==(0,c.hasQueryBeenLoaded)(o),instance:{data:t.data},context:{data:r.data},diskUsage:{data:o.data}}};var s=function(e){return{definition:(0,o.Q)("io.cozy.settings").getById(e),options:{as:"io.cozy.settings/".concat(e),fetchPolicy:i.default.fetchPolicies.olderThan(54e4),singleDocData:!0}}}},13554:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useMutation=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294),s=r(n(45697)),u=r(n(2705)),l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onSuccess,r=void 0===n?void 0:n,s=t.onError,l=void 0===s?void 0:s,d=(0,u.default)(),f=(0,c.useState)("pending"),p=(0,o.default)(f,2),h=p[0],m=p[1],v=(0,c.useState)(),y=(0,o.default)(v,2),b=y[0],g=y[1],x=(0,c.useState)(),w=(0,o.default)(x,2),k=w[0],O=w[1];return{mutate:(0,c.useCallback)((e=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g(void 0),m("loading"),e.prev=2,e.next=5,d.save(t);case 5:if(O((n=e.sent).data),"function"!=typeof r){e.next=10;break}return e.next=10,r(n.data);case 10:m("loaded"),e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(2),m("failed"),g(e.t0),"function"!=typeof l){e.next=20;break}return e.next=20,l(e.t0);case 20:case"end":return e.stop()}},e,null,[[2,13]])})),function(t){return e.apply(this,arguments)}),[d,l,r]),mutationStatus:h,error:b,data:k}};t.useMutation=l,l.propTypes={onSuccess:s.default.func,onError:s.default.func}},70:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useQueries=void 0;var a=r(n(90402)),i=r(n(64512)),o=n(67294),c=n(17999),s=r(n(27361)),u=r(n(2705)),l=r(n(81602)),d=n(95460);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(87549);var h=(0,c.createSelectorHook)(d.clientContext),m=function(e,t){if(!h)throw Error("You must use react-redux > 7.1.0 to use useQuery (uses useSelector) under the hood");if(!e)throw l.default.warn("Bad query",e),Error("Bad query");var n=t.as,r=t.enabled,a=void 0===r||r,i=a?"function"==typeof e?e():e:null;if(!n)throw Error("You must specify options.as when using useQuery");var c=(0,u.default)(),d=h(function(){return void 0===t.singleDocData&&null!=i&&i.id&&l.default.warn("useQuery options.singleDocData will pass to true in a next version of cozy-client, please add it now to prevent any problem in the future."),c.getQueryFromState(n,{hydrated:(0,s.default)(t,"hydrated",!0),singleDocData:(0,s.default)(t,"singleDocData",!1)})});(0,o.useEffect)(function(){!1!==a&&c.query(i,t)},[n,a]);var f=(0,o.useCallback)(function(){var e=c.getQueryFromState(n);return c.query(e.bookmark?e.definition.offsetBookmark(e.bookmark):e.definition.offset(e.data.length),{as:n})},[n,c]),m=(0,o.useCallback)(function(){return c.query(i,t)},[c,i,t]);return p(p({},d),{},{fetchMore:f,fetch:m})};t.useQueries=function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var i=(0,a.default)(r[n],2),o=i[0],c=i[1];t[o]=m(c.query,c)}return t},t.default=m},92797:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294);n(87549);var s=r(n(70)),u=r(n(20842));t.default=function(e,t){var n=(0,u.default)(!1),r=(0,o.default)(n,2),l=r[0],d=r[1],f=(0,s.default)(e,t);return(0,c.useEffect)(function(){var e;(e=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("loaded"===f.fetchStatus&&f.hasMore&&!l)){e.next=5;break}return d(!0),e.next=4,f.fetchMore();case 4:d(!1);case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[f.hasMore,f.fetchStatus,l]),f}},33756:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useSettings=void 0;var a=r(n(80295)),i=n(67294),o=n(64157),c=n(13554),s=r(n(70)),u=n(64374),l=n(55463);t.useSettings=function(e,t){var n=(0,o.getQuery)(e),r=(0,s.default)(n.definition,n.options),d=r.data,f=(0,a.default)(r,["data"]),p=(0,c.useMutation)(),h=p.mutate,m=(0,a.default)(p,["mutate"]),v=(0,i.useCallback)(function(t){var n=(0,o.normalizeSettings)(d);return h((0,o.editSettings)(e,n,t))},[h,d,e]),y=(0,o.normalizeSettings)(d),b=(0,u.hasQueryBeenLoaded)(f)?(0,l.extractKeys)(y,t):void 0;return{query:f,values:b,save:v,mutation:m}}},206:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0});var i={CozyLink:!0,StackLink:!0,WebFlagshipLink:!0,compose:!0,QueryDefinition:!0,Q:!0,Mutations:!0,MutationTypes:!0,getDoctypeFromOperation:!0,Association:!0,HasMany:!0,HasOne:!0,HasOneInPlace:!0,HasManyInPlace:!0,HasManyTriggers:!0,isReferencedBy:!0,isReferencedById:!0,getReferencedBy:!0,getReferencedById:!0,deconstructCozyWebLinkWithSlug:!0,deconstructRedirectLink:!0,dehydrate:!0,generateWebLink:!0,ensureFirstSlash:!0,rootCozyUrl:!0,InvalidRedirectLinkError:!0,InvalidCozyUrlError:!0,InvalidProtocolError:!0,BlockedCozyError:!0,cancelable:!0,isQueryLoading:!0,hasQueryBeenLoaded:!0,isQueriesLoading:!0,hasQueriesBeenLoaded:!0,getQueryFromState:!0,dispatchCreate:!0,dispatchUpdate:!0,dispatchDelete:!0,Registry:!0,RealTimeQueries:!0,manifest:!0,CozyProvider:!0,withMutation:!0,withMutations:!0,Query:!0,queryConnect:!0,queryConnectFlat:!0,withClient:!0,models:!0,fetchPolicies:!0,BulkEditError:!0,webPerformanceApi:!0,defaultPerformanceApi:!0};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"CozyLink",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"StackLink",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"WebFlagshipLink",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"compose",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"QueryDefinition",{enumerable:!0,get:function(){return d.QueryDefinition}}),Object.defineProperty(t,"Q",{enumerable:!0,get:function(){return d.Q}}),Object.defineProperty(t,"Mutations",{enumerable:!0,get:function(){return d.Mutations}}),Object.defineProperty(t,"MutationTypes",{enumerable:!0,get:function(){return d.MutationTypes}}),Object.defineProperty(t,"getDoctypeFromOperation",{enumerable:!0,get:function(){return d.getDoctypeFromOperation}}),Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return f.Association}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return f.HasMany}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return f.HasOne}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return f.HasOneInPlace}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return f.HasManyInPlace}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return f.HasManyTriggers}}),Object.defineProperty(t,"isReferencedBy",{enumerable:!0,get:function(){return p.isReferencedBy}}),Object.defineProperty(t,"isReferencedById",{enumerable:!0,get:function(){return p.isReferencedById}}),Object.defineProperty(t,"getReferencedBy",{enumerable:!0,get:function(){return p.getReferencedBy}}),Object.defineProperty(t,"getReferencedById",{enumerable:!0,get:function(){return p.getReferencedById}}),Object.defineProperty(t,"deconstructCozyWebLinkWithSlug",{enumerable:!0,get:function(){return h.deconstructCozyWebLinkWithSlug}}),Object.defineProperty(t,"deconstructRedirectLink",{enumerable:!0,get:function(){return h.deconstructRedirectLink}}),Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return h.dehydrate}}),Object.defineProperty(t,"generateWebLink",{enumerable:!0,get:function(){return h.generateWebLink}}),Object.defineProperty(t,"ensureFirstSlash",{enumerable:!0,get:function(){return h.ensureFirstSlash}}),Object.defineProperty(t,"rootCozyUrl",{enumerable:!0,get:function(){return h.rootCozyUrl}}),Object.defineProperty(t,"InvalidRedirectLinkError",{enumerable:!0,get:function(){return h.InvalidRedirectLinkError}}),Object.defineProperty(t,"InvalidCozyUrlError",{enumerable:!0,get:function(){return h.InvalidCozyUrlError}}),Object.defineProperty(t,"InvalidProtocolError",{enumerable:!0,get:function(){return h.InvalidProtocolError}}),Object.defineProperty(t,"BlockedCozyError",{enumerable:!0,get:function(){return h.BlockedCozyError}}),Object.defineProperty(t,"cancelable",{enumerable:!0,get:function(){return m.cancelable}}),Object.defineProperty(t,"isQueryLoading",{enumerable:!0,get:function(){return m.isQueryLoading}}),Object.defineProperty(t,"hasQueryBeenLoaded",{enumerable:!0,get:function(){return m.hasQueryBeenLoaded}}),Object.defineProperty(t,"isQueriesLoading",{enumerable:!0,get:function(){return m.isQueriesLoading}}),Object.defineProperty(t,"hasQueriesBeenLoaded",{enumerable:!0,get:function(){return m.hasQueriesBeenLoaded}}),Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return v.getQueryFromState}}),Object.defineProperty(t,"dispatchCreate",{enumerable:!0,get:function(){return v.dispatchCreate}}),Object.defineProperty(t,"dispatchUpdate",{enumerable:!0,get:function(){return v.dispatchUpdate}}),Object.defineProperty(t,"dispatchDelete",{enumerable:!0,get:function(){return v.dispatchDelete}}),Object.defineProperty(t,"Registry",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"RealTimeQueries",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"CozyProvider",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"withMutation",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"withMutations",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"Query",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"queryConnect",{enumerable:!0,get:function(){return _.queryConnect}}),Object.defineProperty(t,"queryConnectFlat",{enumerable:!0,get:function(){return _.queryConnectFlat}}),Object.defineProperty(t,"withClient",{enumerable:!0,get:function(){return _.withClient}}),Object.defineProperty(t,"fetchPolicies",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"BulkEditError",{enumerable:!0,get:function(){return j.BulkEditError}}),Object.defineProperty(t,"webPerformanceApi",{enumerable:!0,get:function(){return A.webPerformanceApi}}),Object.defineProperty(t,"defaultPerformanceApi",{enumerable:!0,get:function(){return D.defaultPerformanceApi}}),t.models=t.manifest=void 0;var o=a(n(88477)),c=a(n(6505)),s=a(n(13945)),u=a(n(97491)),l=a(n(59242)),d=n(87549),f=n(30130),p=n(72887),h=n(64157),m=n(64374),v=n(72662),y=a(n(74165)),b=a(n(12887)),g=r(n(1423));t.manifest=g;var x=a(n(57244)),w=a(n(96310)),k=a(n(84170)),O=a(n(63890)),_=n(81656),E=r(n(66225));t.models=E;var S=a(n(83549)),C=n(58762);Object.keys(C).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e))&&(e in t&&t[e]===C[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return C[e]}}))});var P=n(92534);Object.keys(P).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e))&&(e in t&&t[e]===P[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return P[e]}}))});var j=n(48544),A=n(97077),D=n(67454)},81602:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i=(0,a.default)("cozy-client");a.default.suggest.deny("cozy-client","info"),t.default=i},58762:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.createFakeClient=t.createMockClient=void 0;var a=r(n(90402)),i=r(n(68434)),o=r(n(82007)),c=r(n(64512)),s=r(n(80295)),u=r(n(82492)),l=r(n(88477)),d=n(72662),f=n(2779),p=n(87549);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=function(e,t,n){var r=n.definition,a=n.doctype,i=n.data,o=n.queryError,u=(0,s.default)(n,["definition","doctype","data","queryError"]);e.store.dispatch((0,d.initQuery)(t,r||(0,p.Q)(a))),o?e.store.dispatch((0,d.receiveQueryError)(t,o)):e.store.dispatch((0,d.receiveQueryResult)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({data:i?i.map(function(e){return(0,f.normalizeDoc)(e,a)}):i},u)))},v=function(e){var t;return t=(0,o.default)(i.default.mark(function t(n){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",{data:null});case 2:if(!e[n.doctype]){t.next=6;break}return t.abrupt("return",{data:e[n.doctype]});case 6:return t.abrupt("return",{data:[]});case 7:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}};t.createMockClient=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queries,n=e.remote,r=e.clientOptions,a=e.clientFunctions,i=jest.fn().mockImplementation(v(n));return y({queries:t,remote:n,clientOptions:r,clientFunctions:(0,u.default)({query:i,save:jest.fn(),saveAll:jest.fn(),stackClient:{fetchJSON:jest.fn()}},a)})};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.queries,n=e.remote,r=e.clientOptions,i=e.clientFunctions,o=new l.default(r||{});o.ensureStore();for(var c=0,s=Object.entries(t||{});c<s.length;c++){var d=(0,a.default)(s[c],2);m(o,d[0],d[1])}return o.query=v(n),(0,u.default)(o,i),o};t.createFakeClient=y},47980:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isAccountWithTrigger=t.buildAccount=t.getAccountName=t.getAccountLogin=t.setContractSyncStatusInAccount=t.getContractSyncStatusFromAccount=t.muteError=t.getMutedErrors=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(64512)),s=a(n(82492)),u=n(87549),l=n(35702),d=n(1423);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e){return(null==e?void 0:e.mutedErrors)||[]};t.getMutedErrors=m,t.muteError=function(e,t){var n=m(e);return n.push({type:t,mutedAt:new Date().toISOString()}),h(h({},e),{},{mutedErrors:n})},t.getContractSyncStatusFromAccount=function(e,t){var n,r,a=(0,l.getHasManyItem)(e,"contracts",t);if(!a)throw Error("Cannot find contrat ".concat(t," in account"));return null===(n=null==a?void 0:null===(r=a.metadata)||void 0===r?void 0:r.imported)||void 0===n||n},t.setContractSyncStatusInAccount=function(e,t,n){return(0,l.updateHasManyItem)(e,"contracts",t,function(e){if(void 0===e)throw Error("Cannot find contrat ".concat(t," in account"));return(0,s.default)({},e,{metadata:{imported:n}})})};var v=function(e){if(e.identifier)return e.auth[e.identifier];if(e&&e.auth){var t,n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(d.legacyLoginFields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.auth[r])return e.auth[r]}}catch(e){n.e(e)}finally{n.f()}}return null};t.getAccountLogin=v,t.getAccountName=function(e){return e?e.auth&&(e.auth.accountName||v(e))||e._id:null},t.buildAccount=function(e,t){return{auth:t,account_type:e.slug,identifier:(0,d.getIdentifier)(e.fields),state:null}};var y=(r=(0,o.default)(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,u.Q)("io.cozy.triggers").where({"message.account":n._id}).indexFields(["message.account"]).limitBy(1));case 2:return r=e.sent,e.abrupt("return",r.data.length>0);case 4:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.isAccountWithTrigger=y},13114:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getAppDisplayName=t.getUrl=t.isInstalled=t.getStoreInstallationURL=t.getStoreURL=void 0;var a=r(n(27361)),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.slug)throw Error("Expected app / konnector with the defined slug");var n=o(e,{slug:"store"});if(!n)return null;var r=n.links&&n.links.related;return r?"".concat(r,"#/discover/").concat(t.slug):null};t.getStoreURL=i,t.getStoreInstallationURL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i(e,t);return n?"".concat(n,"/install"):null};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.find(function(e){return e.slug===t.slug})};t.isInstalled=o,t.getUrl=function(e){return e.links&&e.links.related},t.getAppDisplayName=function(e,t){var n=(0,a.default)(e,"name_prefix"),r=(0,a.default)(e,"name"),i=(0,a.default)(e,["locales",t,"name"],r),o=(0,a.default)(e,["locales",t,"name_prefix"],n);return o&&"cozy"!==o.toLowerCase()?"".concat(o," ").concat(i):i}},60841:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.hasExtensionInstalledAttribute=void 0;var i=a(n(68434)),o=a(n(82007)),c=n(87549),s=(r=(0,o.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchQueryAndGetFromState({definition:(0,c.Q)("io.cozy.settings").getById("io.cozy.settings.bitwarden"),options:{as:"io.cozy.settings/io.cozy.settings.bitwarden",singleDocData:!0}});case 3:return n=e.sent.data.extension_installed,e.abrupt("return",!!n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)});t.hasExtensionInstalledAttribute=s},50300:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMagicLink=t.isOIDC=void 0,t.isOIDC=function(e){var t;return null!==(t=e.capabilities.can_auth_with_oidc)&&void 0!==t&&t},t.isMagicLink=function(e){var t;return null!==(t=e.capabilities.can_auth_with_magic_links)&&void 0!==t&&t}},63892:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isContact=t.getIndexByFamilyNameGivenNameEmailCozyUrl=t.getDefaultSortIndexValue=t.makeDefaultSortIndexValue=t.getDisplayName=t.makeDisplayName=t.getFullname=t.makeFullname=t.getPrimaryAddress=t.getPrimaryPhone=t.getPrimaryCozyDomain=t.getPrimaryCozy=t.getPrimaryEmail=t.getInitials=t.getPrimaryOrFirst=t.CONTACTS_DOCTYPE=void 0;var a=r(n(27361)),i=r(n(41609)),o=r(n(81602)),c="io.cozy.contacts";t.CONTACTS_DOCTYPE=c;var s=function(e){return function(t){return t&&t[e]&&0!==t[e].length&&t[e][0]?t[e].find(function(e){return e.primary})||t[e][0]:""}};t.getPrimaryOrFirst=s,t.getInitials=function(e){if(null!=e&&null!==(t=e.name)&&void 0!==t&&t.givenName||null!=e&&null!==(n=e.name)&&void 0!==n&&n.familyName)return["givenName","familyName"].map(function(t){return(0,a.default)(e,["name",t,0],"")}).join("").toUpperCase();var t,n,r=u(e);if(r)return r[0].toUpperCase();var i=d(e);return i?i[0].toUpperCase():""};var u=function(e){return Array.isArray(e.email)?s("email")(e).address||"":e.email};t.getPrimaryEmail=u;var l=function(e){return Array.isArray(e.cozy)?s("cozy")(e).url||"":e.url};t.getPrimaryCozy=l;var d=function(e){try{return new URL(l(e)).hostname.replace(/^(www.)/g,"")}catch(t){return l(e)}};t.getPrimaryCozyDomain=d,t.getPrimaryPhone=function(e){return s("phone")(e).number||""},t.getPrimaryAddress=function(e){return s("address")(e).formattedAddress||""};var f=["namePrefix","givenName","additionalName","familyName","nameSuffix"],p=function(e,t){var n=(null==t?void 0:t.attributesFullname)||f;return e.name?n.map(function(t){return e.name[t]}).filter(function(e){return void 0!==e}).join(" ").trim():""};t.makeFullname=p,t.getFullname=function(e){return(0,a.default)(e,"fullname")?e.fullname:p(e)};var h=function(e,t){var n=p(e,t),r=u(e),a=d(e);return n&&n.length>0?n:r&&r.length>0?r:a&&a.length>0?a:""};t.makeDisplayName=h,t.getDisplayName=function(e){return(0,a.default)(e,"displayName")?e.displayName:h(e)};var m=function(e){var t=[(0,a.default)(e,"name.familyName",""),(0,a.default)(e,"name.givenName",""),u(e),d(e)].join("").trim().toLowerCase();return 0===t.length?null:t};t.makeDefaultSortIndexValue=m;var v=function(e){var t=(0,a.default)(e,"indexes.byFamilyNameGivenNameEmailCozyUrl",null);return null!==t?(0,i.default)(t)?null:t:m(e)};t.getDefaultSortIndexValue=v,t.getIndexByFamilyNameGivenNameEmailCozyUrl=function(e){return o.default.warn("Deprecation: `getIndexByFamilyNameGivenNameEmailCozyUrl` is deprecated, please use `getDefaultSortIndexValue` instead"),v(e)},t.isContact=function(e){return e._type===c}},74632:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getEmojiByCountry=t.getAllNationalities=t.getNationalityByCodeISO=t.getAllCountryNames=t.getCountryNameByCodeISO=t.getAllCountries=t.checkCountryCode=t.isCountryCodeAlpha2=t.isCountryCodeAlpha3=t.isValidCountryCodeTranslation=t.COUNTRIES_ISO=void 0;var a=r(n(98235)),i=n(84854),o=r(n(81602)),c=[{code2:"AF",code3:"AFG",number:"004"},{code2:"AL",code3:"ALB",number:"008"},{code2:"DZ",code3:"DZA",number:"012"},{code2:"AD",code3:"AND",number:"020"},{code2:"AO",code3:"AGO",number:"024"},{code2:"AG",code3:"ATG",number:"028"},{code2:"AR",code3:"ARG",number:"032"},{code2:"AM",code3:"ARM",number:"051"},{code2:"AU",code3:"AUS",number:"036"},{code2:"AT",code3:"AUT",number:"040"},{code2:"AZ",code3:"AZE",number:"031"},{code2:"BS",code3:"BHS",number:"044"},{code2:"BH",code3:"BHR",number:"048"},{code2:"BD",code3:"BGD",number:"050"},{code2:"BB",code3:"BRB",number:"052"},{code2:"BY",code3:"BLR",number:"112"},{code2:"BE",code3:"BEL",number:"056"},{code2:"BZ",code3:"BLZ",number:"084"},{code2:"BJ",code3:"BEN",number:"204"},{code2:"BM",code3:"BMU",number:"060"},{code2:"BT",code3:"BTN",number:"064"},{code2:"BO",code3:"BOL",number:"068"},{code2:"BQ",code3:"BES",number:"535"},{code2:"BA",code3:"BIH",number:"070"},{code2:"BW",code3:"BWA",number:"072"},{code2:"BV",code3:"BVT",number:"074"},{code2:"BR",code3:"BRA",number:"076"},{code2:"IO",code3:"IOT",number:"086"},{code2:"BN",code3:"BRN",number:"096"},{code2:"BG",code3:"BGR",number:"100"},{code2:"BF",code3:"BFA",number:"854"},{code2:"BI",code3:"BDI",number:"108"},{code2:"CV",code3:"CPV",number:"132"},{code2:"KH",code3:"KHM",number:"116"},{code2:"CM",code3:"CMR",number:"120"},{code2:"CA",code3:"CAN",number:"124"},{code2:"KY",code3:"CYM",number:"136"},{code2:"CF",code3:"CAF",number:"140"},{code2:"TD",code3:"TCD",number:"148"},{code2:"CL",code3:"CHL",number:"152"},{code2:"CN",code3:"CHN",number:"156"},{code2:"CX",code3:"CXR",number:"162"},{code2:"CC",code3:"CCK",number:"166"},{code2:"CO",code3:"COL",number:"170"},{code2:"KM",code3:"COM",number:"174"},{code2:"CD",code3:"COD",number:"180"},{code2:"CG",code3:"COG",number:"178"},{code2:"CK",code3:"COK",number:"184"},{code2:"CR",code3:"CRI",number:"188"},{code2:"HR",code3:"HRV",number:"191"},{code2:"CU",code3:"CUB",number:"192"},{code2:"CW",code3:"CUW",number:"531"},{code2:"CY",code3:"CYP",number:"196"},{code2:"CZ",code3:"CZE",number:"203"},{code2:"CI",code3:"CIV",number:"384"},{code2:"DK",code3:"DNK",number:"208"},{code2:"DJ",code3:"DJI",number:"262"},{code2:"DM",code3:"DMA",number:"212"},{code2:"DO",code3:"DOM",number:"214"},{code2:"EC",code3:"ECU",number:"218"},{code2:"EG",code3:"EGY",number:"818"},{code2:"SV",code3:"SLV",number:"222"},{code2:"GQ",code3:"GNQ",number:"226"},{code2:"ER",code3:"ERI",number:"232"},{code2:"EE",code3:"EST",number:"233"},{code2:"SZ",code3:"SWZ",number:"748"},{code2:"ET",code3:"ETH",number:"231"},{code2:"FK",code3:"FLK",number:"238"},{code2:"FO",code3:"FRO",number:"234"},{code2:"FJ",code3:"FJI",number:"242"},{code2:"FI",code3:"FIN",number:"246"},{code2:"FR",code3:"FRA",number:"250"},{code2:"GF",code3:"GUF",number:"254"},{code2:"PF",code3:"PYF",number:"258"},{code2:"TF",code3:"ATF",number:"260"},{code2:"GA",code3:"GAB",number:"266"},{code2:"GM",code3:"GMB",number:"270"},{code2:"GE",code3:"GEO",number:"268"},{code2:"DE",code3:"DEU",number:"276"},{code2:"GH",code3:"GHA",number:"288"},{code2:"GI",code3:"GIB",number:"292"},{code2:"GR",code3:"GRC",number:"300"},{code2:"GL",code3:"GRL",number:"304"},{code2:"GD",code3:"GRD",number:"308"},{code2:"GP",code3:"GLP",number:"312"},{code2:"GU",code3:"GUM",number:"316"},{code2:"GT",code3:"GTM",number:"320"},{code2:"GG",code3:"GGY",number:"831"},{code2:"GN",code3:"GIN",number:"324"},{code2:"GW",code3:"GNB",number:"624"},{code2:"GY",code3:"GUY",number:"328"},{code2:"HT",code3:"HTI",number:"332"},{code2:"HM",code3:"HMD",number:"334"},{code2:"VA",code3:"VAT",number:"336"},{code2:"HN",code3:"HND",number:"340"},{code2:"HK",code3:"HKG",number:"344"},{code2:"HU",code3:"HUN",number:"348"},{code2:"IS",code3:"ISL",number:"352"},{code2:"IN",code3:"IND",number:"356"},{code2:"ID",code3:"IDN",number:"360"},{code2:"IR",code3:"IRN",number:"364"},{code2:"IQ",code3:"IRQ",number:"368"},{code2:"IE",code3:"IRL",number:"372"},{code2:"IM",code3:"IMN",number:"833"},{code2:"IL",code3:"ISR",number:"376"},{code2:"IT",code3:"ITA",number:"380"},{code2:"JM",code3:"JAM",number:"388"},{code2:"JP",code3:"JPN",number:"392"},{code2:"JE",code3:"JEY",number:"832"},{code2:"JO",code3:"JOR",number:"400"},{code2:"KZ",code3:"KAZ",number:"398"},{code2:"KE",code3:"KEN",number:"404"},{code2:"KI",code3:"KIR",number:"296"},{code2:"KP",code3:"PRK",number:"408"},{code2:"KR",code3:"KOR",number:"410"},{code2:"KW",code3:"KWT",number:"414"},{code2:"KG",code3:"KGZ",number:"417"},{code2:"LA",code3:"LAO",number:"418"},{code2:"LV",code3:"LVA",number:"428"},{code2:"LB",code3:"LBN",number:"422"},{code2:"LS",code3:"LSO",number:"426"},{code2:"LR",code3:"LBR",number:"430"},{code2:"LY",code3:"LBY",number:"434"},{code2:"LI",code3:"LIE",number:"438"},{code2:"LT",code3:"LTU",number:"440"},{code2:"LU",code3:"LUX",number:"442"},{code2:"MO",code3:"MAC",number:"446"},{code2:"MG",code3:"MDG",number:"450"},{code2:"MW",code3:"MWI",number:"454"},{code2:"MY",code3:"MYS",number:"458"},{code2:"MV",code3:"MDV",number:"462"},{code2:"ML",code3:"MLI",number:"466"},{code2:"MT",code3:"MLT",number:"470"},{code2:"MH",code3:"MHL",number:"584"},{code2:"MQ",code3:"MTQ",number:"474"},{code2:"MR",code3:"MRT",number:"478"},{code2:"MU",code3:"MUS",number:"480"},{code2:"YT",code3:"MYT",number:"175"},{code2:"MX",code3:"MEX",number:"484"},{code2:"FM",code3:"FSM",number:"583"},{code2:"MD",code3:"MDA",number:"498"},{code2:"MC",code3:"MCO",number:"492"},{code2:"MN",code3:"MNG",number:"496"},{code2:"ME",code3:"MNE",number:"499"},{code2:"MS",code3:"MSR",number:"500"},{code2:"MA",code3:"MAR",number:"504"},{code2:"MZ",code3:"MOZ",number:"508"},{code2:"MM",code3:"MMR",number:"104"},{code2:"NA",code3:"NAM",number:"516"},{code2:"NR",code3:"NRU",number:"520"},{code2:"NP",code3:"NPL",number:"524"},{code2:"NL",code3:"NLD",number:"528"},{code2:"NC",code3:"NCL",number:"540"},{code2:"NZ",code3:"NZL",number:"554"},{code2:"NI",code3:"NIC",number:"558"},{code2:"NE",code3:"NER",number:"562"},{code2:"NG",code3:"NGA",number:"566"},{code2:"NU",code3:"NIU",number:"570"},{code2:"NF",code3:"NFK",number:"574"},{code2:"MP",code3:"MNP",number:"580"},{code2:"NO",code3:"NOR",number:"578"},{code2:"OM",code3:"OMN",number:"512"},{code2:"PK",code3:"PAK",number:"586"},{code2:"PW",code3:"PLW",number:"585"},{code2:"PS",code3:"PSE",number:"275"},{code2:"PA",code3:"PAN",number:"591"},{code2:"PG",code3:"PNG",number:"598"},{code2:"PY",code3:"PRY",number:"600"},{code2:"PE",code3:"PER",number:"604"},{code2:"PH",code3:"PHL",number:"608"},{code2:"PN",code3:"PCN",number:"612"},{code2:"PL",code3:"POL",number:"616"},{code2:"PT",code3:"PRT",number:"620"},{code2:"PR",code3:"PRI",number:"630"},{code2:"QA",code3:"QAT",number:"634"},{code2:"MK",code3:"MKD",number:"807"},{code2:"RO",code3:"ROU",number:"642"},{code2:"RU",code3:"RUS",number:"643"},{code2:"RW",code3:"RWA",number:"646"},{code2:"RE",code3:"REU",number:"638"},{code2:"BL",code3:"BLM",number:"652"},{code2:"SH",code3:"SHN",number:"654"},{code2:"KN",code3:"KNA",number:"659"},{code2:"LC",code3:"LCA",number:"662"},{code2:"MF",code3:"MAF",number:"663"},{code2:"PM",code3:"SPM",number:"666"},{code2:"VC",code3:"VCT",number:"670"},{code2:"WS",code3:"WSM",number:"882"},{code2:"SM",code3:"SMR",number:"674"},{code2:"ST",code3:"STP",number:"678"},{code2:"SA",code3:"SAU",number:"682"},{code2:"SN",code3:"SEN",number:"686"},{code2:"RS",code3:"SRB",number:"688"},{code2:"SC",code3:"SYC",number:"690"},{code2:"SL",code3:"SLE",number:"694"},{code2:"SG",code3:"SGP",number:"702"},{code2:"SX",code3:"SXM",number:"534"},{code2:"SK",code3:"SVK",number:"703"},{code2:"SI",code3:"SVN",number:"705"},{code2:"SB",code3:"SLB",number:"090"},{code2:"SO",code3:"SOM",number:"706"},{code2:"ZA",code3:"ZAF",number:"710"},{code2:"GS",code3:"SGS",number:"239"},{code2:"SS",code3:"SSD",number:"728"},{code2:"ES",code3:"ESP",number:"724"},{code2:"LK",code3:"LKA",number:"144"},{code2:"SD",code3:"SDN",number:"729"},{code2:"SR",code3:"SUR",number:"740"},{code2:"SJ",code3:"SJM",number:"744"},{code2:"SE",code3:"SWE",number:"752"},{code2:"CH",code3:"CHE",number:"756"},{code2:"SY",code3:"SYR",number:"760"},{code2:"TW",code3:"TWN",number:"158"},{code2:"TJ",code3:"TJK",number:"762"},{code2:"TZ",code3:"TZA",number:"834"},{code2:"TH",code3:"THA",number:"764"},{code2:"TL",code3:"TLS",number:"626"},{code2:"TG",code3:"TGO",number:"768"},{code2:"TK",code3:"TKL",number:"772"},{code2:"TO",code3:"TON",number:"776"},{code2:"TT",code3:"TTO",number:"780"},{code2:"TN",code3:"TUN",number:"788"},{code2:"TR",code3:"TUR",number:"792"},{code2:"TM",code3:"TKM",number:"795"},{code2:"TC",code3:"TCA",number:"796"},{code2:"TV",code3:"TUV",number:"798"},{code2:"UG",code3:"UGA",number:"800"},{code2:"UA",code3:"UKR",number:"804"},{code2:"AE",code3:"ARE",number:"784"},{code2:"GB",code3:"GBR",number:"826"},{code2:"UM",code3:"UMI",number:"581"},{code2:"US",code3:"USA",number:"840"},{code2:"UY",code3:"URY",number:"858"},{code2:"UZ",code3:"UZB",number:"860"},{code2:"VU",code3:"VUT",number:"548"},{code2:"VE",code3:"VEN",number:"862"},{code2:"VN",code3:"VNM",number:"704"},{code2:"VG",code3:"VGB",number:"092"},{code2:"VI",code3:"VIR",number:"850"},{code2:"WF",code3:"WLF",number:"876"},{code2:"EH",code3:"ESH",number:"732"},{code2:"YE",code3:"YEM",number:"887"},{code2:"ZM",code3:"ZMB",number:"894"},{code2:"ZW",code3:"ZWE",number:"716"},{code2:"AX",code3:"ALA",number:"248"}];t.COUNTRIES_ISO=c,t.isValidCountryCodeTranslation=function(e,t){var n=(0,i.getLocalizer)(e).polyglot;return u(t)&&n.has("nationalities.".concat(t))&&n.has("countries.".concat(t))};var s=function(e){if(!e)return!1;var t=e.toUpperCase();return c.some(function(e){return e.code3===t})};t.isCountryCodeAlpha3=s;var u=function(e){if(!e)return!1;var t=e.toUpperCase();return c.some(function(e){return e.code2===t})};t.isCountryCodeAlpha2=u,t.checkCountryCode=function(e){return u(e)||s(e)};var l=function(e){var t=(0,i.getLocalizer)(e).t;return c.map(function(e){return{code2:e.code2,code3:e.code3,number:e.number,name:t("countries.".concat(e.code2)),nationality:t("nationalities.".concat(e.code2))}})};t.getAllCountries=l;var d=function(e){return function(t){var n,r=null==e?void 0:null===(n=e.toString())||void 0===n?void 0:n.toUpperCase();return/^[A-Z]{2,3}$/.test(r)?t.code2===r||t.code3===r:!!/^\d+$/.test(r)&&t.number===r}};t.getCountryNameByCodeISO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lang:"en"},n=l(t.lang).find(d(e));return n?n.name:(o.default.warn("Country with code ".concat(e," not found")),null)},t.getAllCountryNames=function(e){return l(e).map(function(e){return e.name})},t.getNationalityByCodeISO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lang:"en"},n=l(t.lang).find(d(e));return n?n.nationality:(o.default.warn("Nationality with code ".concat(e," not found")),null)},t.getAllNationalities=function(e){return l(e).map(function(e){return e.nationality})},t.getEmojiByCountry=function(e){if(!e)return null;if(!/^[a-z]{2}$/i.test(e))return o.default.error("Country argument must be an ISO 3166-1 alpha-2 string, but got '".concat(JSON.stringify(e),"' instead.")),null;if(!c.find(function(t){return t.code2===e.toUpperCase()}))return o.default.error("Country with code ".concat(e," not found in the list of countries")),null;var t=(0,a.default)(e.toUpperCase()).map(function(e){return e.codePointAt(0)+127397});return String.fromCodePoint.apply(String,(0,a.default)(t))}},84854:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizer=void 0;for(var a=r(n(54078)),i=r(n(16300)),o=r(n(61127)),c={en:i.default,fr:o.default},s={},u=0,l=["fr","en"];u<l.length;u++){var d=l[u],f=new a.default;f.extend(c[d]),s[d]=f}t.getLocalizer=function(e){var t=s[e]||s.en;return{t:t.t.bind(t),polyglot:t,lang:e}}},88799:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAggregatesFromDACC=t.buildAggregateParams=t.sendMeasureToDACC=t.checkMeasureParams=t.isCorrectDateFormat=void 0;var o=i(n(68434)),c=i(n(82007)),s=i(n(33918));i(n(88477));var u=function(e){try{return!!new Date(Date.parse(e)).toISOString().startsWith(e)}catch(e){return!1}};t.isCorrectDateFormat=u;var l=function(e){var t=e.createdBy,n=e.measureName,r=e.startDate,a=e.value,i=e.group1,o=e.group2,c=e.group3;if(!t||"string"!=typeof t)throw Error("Missing or wrong type parameter: createdBy");if(!n||"string"!=typeof n)throw Error("Missing or wrong type parameter: measureName");if(!r)throw Error("Missing parameter: startDate");if(!u(r))throw Error("Date should be in YYYY-MM-DD format");if("number"!=typeof a)throw Error("Missing or wrong type parameter: value");if(i&&("object"!=typeof i||0===Object.keys(i).length)||o&&("object"!=typeof o||0===Object.keys(o).length)||c&&("object"!=typeof c||0===Object.keys(c).length))throw Error("Groups should be key-value objects");if(c&&(!o||!i)||o&&!i)throw Error("Group order must be respected")};t.checkMeasureParams=l;var d=(r=(0,c.default)(o.default.mark(function e(t,n,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(r),e.next=4,t.getStackClient().fetchJSON("POST","/remote/".concat(n),{data:JSON.stringify(r),path:"measure"});case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),(0,s.default)("error","Error while sending measure to remote doctype: ".concat(e.t0.message)),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e,t,n){return r.apply(this,arguments)});t.sendMeasureToDACC=d;var f=function(e){var t=e.measureName;if(!t||"string"!=typeof t)throw Error("Missing or wrong type parameter: measureName");var n=e.startDate||new Date(0).toISOString(),r=e.endDate||new Date(Date.now()).toISOString();if(!u(n)||!u(r))throw(0,s.default)("error","Date should be in YYYY-MM-DD format but received: startDate: ".concat(n," | endDate: ").concat(r)),Error("Date should be in YYYY-MM-DD format");return{measureName:t,startDate:n,endDate:r}};t.buildAggregateParams=f;var p=(a=(0,c.default)(o.default.mark(function e(t,n,r){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=f(r),e.next=4,t.getStackClient().fetchJSON("POST","/remote/".concat(n),{data:JSON.stringify(a),path:"aggregate"});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),(0,s.default)("error","Error while fetching aggregates to remote doctype: ".concat(e.t0.message)),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return a.apply(this,arguments)});t.fetchAggregatesFromDACC=p},468:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconLabelPairs=t.THEME_OTHERS_LABELS=t.THEME_INVOICE_LABELS=t.THEME_FINANCE_LABELS=t.THEME_ACTIVITY_LABELS=t.THEME_TRANSPORT_LABELS=t.THEME_HOME_LABELS=t.THEME_HEALTH_LABELS=t.THEME_WORK_STUDY_LABELS=t.THEME_FAMILY_LABELS=t.THEME_IDENTITY_LABELS=void 0,t.THEME_IDENTITY_LABELS=["identity_photo","national_id_card","passport","residence_permit","electoral_card","family_record_book","birth_certificate","driver_license","citizen_registration_certificate","note_identity_document","other_identity_document"],t.THEME_FAMILY_LABELS=["family_record_book","birth_certificate","wedding","pacs","single_parent_benefit","divorce","large_family_card","caf","payment_proof_family_allowance","note_family_document","other_family_document","person_insurance"],t.THEME_WORK_STUDY_LABELS=["diploma","work_contract","pay_sheet","unemployment_benefit","employment_center_certificate","pension","work_disability_recognition","gradebook","student_card","school_attendance_certificate","school_insurance_certificate","resume","motivation_letter","expense_claim","note_work_document","other_work_document"],t.THEME_HEALTH_LABELS=["health_certificate","health_book","national_health_insurance_card","national_health_insurance_right_certificate","health_insurance_card","prescription","health_invoice","work_disability_recognition","pregnancy_medical_certificate","note_health_document","other_health_document"],t.THEME_HOME_LABELS=["phone_invoice","isp_invoice","telecom_invoice","energy_invoice","water_invoice","other_invoice","work_invoice","house_sale_agreeement","building_permit","technical_diagnostic_record","unfit_for_habitation_declaration","lease","rent_receipt","accommodation_proof","house_insurance","work_quote","condition_report","note_house_document","other_house_document","real_estate_insurance"],t.THEME_TRANSPORT_LABELS=["driver_license","vehicle_registration","car_insurance","transport_card","mechanic_invoice","transport_invoice","note_transport_document","other_transport_document"],t.THEME_ACTIVITY_LABELS=["personal_sporting_licence","fidelity_card","note_activity_document","other_activity_document"],t.THEME_FINANCE_LABELS=["fine","tax_certificate","tax_return","tax_notice","tax_timetable","real_estate_tax","pay_sheet","receipt","single_parent_benefit","other_tax_document","bank_details","bank_statement","loan_agreement","payment_proof_family_allowance","note_finance","expense_claim","other_bank_document","other_revenue"],t.THEME_INVOICE_LABELS=["phone_invoice","isp_invoice","telecom_invoice","energy_invoice","water_invoice","appliance_invoice","web_service_invoice","restaurant_invoice","work_invoice","transport_invoice","health_invoice","note_invoice","expense_claim","energy_contract","grocery_invoice","other_invoice"],t.THEME_OTHERS_LABELS=["other_administrative_document"],t.iconLabelPairs=[{icon:"bank-check",labels:["bank_details"]},{icon:"bank",labels:["other_administrative_document","other_tax_document","real_estate_tax","tax_certificate","tax_notice","tax_return","tax_timetable"]},{icon:"benefit",labels:["loan_agreement","other_revenue","pay_sheet","payment_proof_family_allowance","pension"]},{icon:"bill",labels:["other_invoice"]},{icon:"car",labels:["car_insurance","driver_license","other_transport_document","transport_card","transport_invoice","vehicle_registration"]},{icon:"child",labels:["birth_certificate"]},{icon:"email",labels:["receipt"]},{icon:"euro",labels:["other_bank_document"]},{icon:"exchange",labels:["bank_statement"]},{icon:"file-type-note",labels:["note_activity_document","note_family_document","note_finance","note_health_document","note_house_document","note_identity_document","note_invoice","note_transport_document","note_work_document"]},{icon:"fitness",labels:["other_activity_document","personal_sporting_licence"]},{icon:"globe",labels:["residence_permit"]},{icon:"gouv",labels:["electoral_card"]},{icon:"heart",labels:["health_book","health_certificate","health_insurance_card","health_invoice","national_health_insurance_card","national_health_insurance_right_certificate","other_health_document","person_insurance","pregnancy_medical_certificate","prescription"]},{icon:"home",labels:["accommodation_proof","building_permit","condition_report","house_insurance","house_sale_agreeement","lease","mechanic_invoice","other_house_document","real_estate_insurance","rent_receipt","technical_diagnostic_record","unfit_for_habitation_declaration","work_invoice","work_quote"]},{icon:"image",labels:["identity_photo"]},{icon:"justice",labels:["fine"]},{icon:"laudry",labels:["appliance_invoice"]},{icon:"lightning",labels:["energy_contract","energy_invoice"]},{icon:"people",labels:["national_id_card","other_identity_document","resume","work_disability_recognition"]},{icon:"plane",labels:["passport"]},{icon:"remboursement",labels:["expense_claim"]},{icon:"restaurant",labels:["restaurant_invoice"]},{icon:"school",labels:["diploma","gradebook"]},{icon:"shop",labels:["fidelity_card","grocery_invoice"]},{icon:"team",labels:["caf","citizen_registration_certificate","divorce","family_record_book","large_family_card","other_family_document","pacs","single_parent_benefit","wedding"]},{icon:"telecom",labels:["isp_invoice","telecom_invoice","web_service_invoice"]},{icon:"telephone",labels:["phone_invoice"]},{icon:"water",labels:["water_invoice"]},{icon:"work",labels:["employment_center_certificate","motivation_letter","other_work_document","school_attendance_certificate","school_insurance_certificate","student_card","unemployment_benefit","work_contract"]}]},28374:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.themesList=void 0;var r=n(468),a=n(4217),i=function(e){return e.map(function(e){try{return a.Qualification.getByLabel(e)}catch(e){return console.log("error",e),null}}).filter(function(e){return e})},o=[{id:"theme1",label:"identity",icon:"people",items:i(r.THEME_IDENTITY_LABELS),defaultItems:["birth_certificate"]},{id:"theme2",label:"family",icon:"team",items:i(r.THEME_FAMILY_LABELS),defaultItems:["family_record_book"]},{id:"theme3",label:"work_study",icon:"work",items:i(r.THEME_WORK_STUDY_LABELS)},{id:"theme4",label:"health",icon:"heart",items:i(r.THEME_HEALTH_LABELS)},{id:"theme5",label:"home",icon:"home",items:i(r.THEME_HOME_LABELS)},{id:"theme6",label:"transport",icon:"car",items:i(r.THEME_TRANSPORT_LABELS),defaultItems:["driver_license"]},{id:"theme7",label:"activity",icon:"chess",items:i(r.THEME_ACTIVITY_LABELS)},{id:"theme8",label:"finance",icon:"bank",items:i(r.THEME_FINANCE_LABELS)},{id:"theme9",label:"invoice",icon:"bill",items:i(r.THEME_INVOICE_LABELS)},{id:"theme10",label:"others",icon:"dots",items:i(r.THEME_OTHERS_LABELS)}];t.themesList=o},53479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQualificationNote=t.getThemeByItem=void 0;var r=n(28374);t.getThemeByItem=function(e){var t=r.themesList.find(function(t){return t.defaultItems&&t.defaultItems.includes(e.label)});return t||r.themesList.find(function(t){return t.items.some(function(t){return t.label===e.label})})},t.isQualificationNote=function(e){return e.label.toLowerCase().startsWith("note_")}},12189:function(e,t,n){"use strict";var r=n(14746);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Qualification",{enumerable:!0,get:function(){return a.Qualification}}),Object.defineProperty(t,"setQualification",{enumerable:!0,get:function(){return a.setQualification}}),Object.defineProperty(t,"getQualification",{enumerable:!0,get:function(){return a.getQualification}}),t.helpers=t.themes=t.locales=void 0;var a=n(4217),i=r(n(37689));t.locales=i;var o=r(n(28374));t.themes=o;var c=r(n(53479));t.helpers=c},37689:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalizer=t.getBoundT=void 0;var a=r(n(64512)),i=r(n(54078)),o=r(n(60080)),c=r(n(76785)),s=n(74632);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}for(var d={en:o.default,fr:c.default},f={},p=0,h=["fr","en"];p<h.length;p++){var m=h[p],v=new i.default;v.extend(d[m]),f[m]=v}t.getBoundT=function(e){var t=y(e);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l(l({},n),{},{smart_count:(null==n?void 0:n.smart_count)||1}),a=null==n?void 0:n.country,i="foreign"!==a?(0,s.getEmojiByCountry)(a):null,o="foreign"===a?t("country.foreign"):null;return i||o?"".concat(t(e,r)," ").concat(i||o):t(e,r)}};var y=function(e){var t=f[e]||f.en;return t.t.bind(t)};t.getLocalizer=y},4217:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.hasSupportedQualification=t.isSupportedQualification=t.getIconByLabel=t.getQualification=t.setQualification=t.Qualification=void 0;var i=a(n(64512)),o=a(n(65105)),c=a(n(19723)),s=a(n(36968)),u=a(n(91966)),l=r(n(5825)),d=a(n(81602)),f=n(468);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e);var r=l.qualifications.find(function(e){return e.label===t});if(r){this.icon=n.icon||y(t),this.label=r.label;var a=n.purpose||r.purpose;a&&(this.purpose=a);var i=n.sourceCategory||r.sourceCategory;i&&(this.sourceCategory=i);var c=n.sourceSubCategory||r.sourceSubCategory;c&&(this.sourceSubCategory=c);var s=n.subjects||r.subjects;s&&(this.subjects=s)}else throw Error("No qualification found for the label ".concat(t))}return(0,c.default)(e,[{key:"checkAttributes",value:function(e){if(this.purpose!==e.purpose){if(this.purpose)throw Error("The purpose for the label ".concat(this.label," should be ").concat(this.purpose,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.purposeKnownValues.includes(e.purpose)||d.default.info("This purpose is not listed among the known values: ".concat(e.purpose,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if(this.sourceCategory!==e.sourceCategory){if(this.sourceCategory)throw Error("The sourceCategory for the label ".concat(this.label," should be ").concat(this.sourceCategory,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.sourceCategoryKnownValues.includes(e.sourceCategory)||d.default.info("This sourceCategory is not listed among the known values: ".concat(e.sourceCategory,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if(this.sourceSubCategory!==e.sourceSubCategory){if(this.sourceSubCategory)throw Error("The sourceSubCategory for the label ".concat(this.label," should be ").concat(this.sourceSubCategory,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");l.sourceSubCategoryKnownValues.includes(e.sourceSubCategory)||d.default.info("This sourceSubCategory is not listed among the known values: ".concat(e.sourceSubCategory,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}if((0,u.default)(this.subjects,e.subjects).length>0)throw Error("The subjects for the label ".concat(this.label," should include ").concat(this.subjects,". ")+"Please use this or open an issue on https://github.com/cozy/cozy-client/issues");var t=(0,u.default)(e.subjects,this.subjects);if(t.length>0){var n=(0,u.default)(t,l.subjectsKnownValues);n.length>0&&d.default.info("These subjects are not listed among the known values: ".concat(n,". ")+"Please open an issue on https://github.com/cozy/cozy-client/issues")}}},{key:"setPurpose",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{purpose:t}))}},{key:"setSourceCategory",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{sourceCategory:t}))}},{key:"setSourceSubCategory",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{sourceSubCategory:t}))}},{key:"setSubjects",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{subjects:t}))}},{key:"setIcon",value:function(t){return new e(this.label,m(m({},this.toQualification()),{},{icon:t}))}},{key:"toQualification",value:function(){return{icon:this.icon,label:this.label,purpose:this.purpose,sourceCategory:this.sourceCategory,sourceSubCategory:this.sourceSubCategory,subjects:this.subjects}}}]),e}();t.Qualification=v,v.getByLabel=function(e){return new v(e)},t.setQualification=function(e,t){if(t.label){var n=t;return new v(t.label).checkAttributes(t),t.icon||(n=new v(t.label,t).setIcon(y(t.label))),(0,s.default)(e,"metadata.qualification",n)}throw Error("You must set a label to qualify")},t.getQualification=function(e){var t,n=null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.qualification;return n?new v(n.label,n.qualification).toQualification():null};var y=function(e){var t,n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(f.iconLabelPairs);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.labels.includes(e))return r.icon}}catch(e){n.e(e)}finally{n.f()}return d.default.info("The ".concat(e," qualification does not seem to have an icon.\n    Please open an issue on https://github.com/cozy/cozy-client/issues")),""};t.getIconByLabel=y;var b=function(e){return l.qualifications.some(function(t){return t.label===e})};t.isSupportedQualification=b,t.hasSupportedQualification=function(e){var t,n;return b(null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label)}},72912:function(e,t,n){"use strict";var r,a,i,o,c,s,u,l,d,f,p,h=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=function(e){var t=e._id||e.id;return P({_id:t,id:t,_type:e._type||E.DOCTYPE_FILES},e)},t.ensureFilePath=function(e,t){if(e.path)return e;if(!t||!t.path)throw Error("Could not define a file path for ".concat(e._id||e.id));return P({path:t.path+"/"+e.name},e)},t.getParentFolderId=function(e){var t=(0,g.default)(e,"attributes.dir_id");return""===t?null:t},t.downloadFile=t.copy=t.fetchBlobFileById=t.isFromKonnector=t.hasCertifications=t.hasQualifications=t.isPlainText=t.doMobileUpload=t.readMobileFile=t.uploadFileWithConflictStrategy=t.generateFileNameForRevision=t.generateNewFileNameOnConflict=t.overrideFileForPath=t.move=t.getFullpath=t.hasMetadataAttribute=t.fetchFilesByQualificationRules=t.saveFileQualification=t.isSharingShorcutNew=t.isSharingShortcutNew=t.isSharingShorcut=t.isSharingShortcut=t.getSharingShortcutTargetDoctype=t.getSharingShortcutTargetMime=t.getSharingShortcutStatus=t.isShortcut=t.shouldBeOpenedByOnlyOffice=t.isOnlyOfficeFile=t.isEncryptedFileOrFolder=t.isEncryptedFolder=t.getEncryptiondRef=t.isEncrypted=t.isNote=t.isDirectory=t.isFile=t.splitFilename=t.ALBUMS_DOCTYPE=void 0;var m=h(n(68434)),v=h(n(82007)),y=h(n(64512)),b=n(25976),g=h(n(27361)),x=h(n(47037)),w=h(n(18721)),k=h(n(10691)),O=n(4217),_=n(87549),E=n(71791);h(n(88477));var S=h(n(81602));function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,y.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j="file";t.ALBUMS_DOCTYPE="io.cozy.photos.albums";var A=/(.+)(\..*)$/,D=function(e){if(!(0,x.default)(e.name))throw Error("file should have a name property");if("file"===e.type){var t=e.name.match(A);if(t)return{filename:t[1],extension:t[2]}}return{filename:e.name,extension:""}};t.splitFilename=D;var T=function(e){return e&&e.type===j};t.isFile=T,t.isDirectory=function(e){return e&&"directory"===e.type};var M=function(e){return!!(e&&e.name&&e.name.endsWith(".cozy-note"))&&e.type===j&&!!e.metadata&&void 0!==e.metadata.title&&void 0!==e.metadata.version};t.isNote=M;var R=function(e){return!!e.encrypted};t.isEncrypted=R;var I=function(e){return(0,g.default)(e,"referenced_by",[]).find(function(e){return e.type===E.DOCTYPE_FILES_ENCRYPTION})};t.getEncryptiondRef=I;var N=function(e){return!!I(e)};t.isEncryptedFolder=N,t.isEncryptedFileOrFolder=function(e){return N(e)||R(e)};var F=function(e){return T(e)&&!M(e)&&("text"===e.class||"spreadsheet"===e.class||"slide"===e.class)};t.isOnlyOfficeFile=F,t.shouldBeOpenedByOnlyOffice=function(e){return F(e)&&!e.name.endsWith(".txt")&&!e.name.endsWith(".md")},t.isShortcut=function(e){return e&&"shortcut"===e.class};var z=function(e){return(0,g.default)(e,"metadata.sharing.status")};t.getSharingShortcutStatus=z,t.getSharingShortcutTargetMime=function(e){return(0,g.default)(e,"metadata.target.mime")},t.getSharingShortcutTargetDoctype=function(e){return(0,g.default)(e,"metadata.target._type")};var L=function(e){return!!z(e)};t.isSharingShortcut=L,t.isSharingShorcut=function(e){return S.default.warn("Deprecation: `isSharingShorcut` is deprecated, please use `isSharingShortcut` instead"),L(e)};var B=function(e){return"new"===z(e)};t.isSharingShortcutNew=B,t.isSharingShorcutNew=function(e){return S.default.warn("Deprecation: `isSharingShorcutNew` is deprecated, please use `isSharingShortcutNew` instead"),B(e)};var U=(r=(0,v.default)(m.default.mark(function e(t,n,r){var a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,O.setQualification)(n,r),e.abrupt("return",t.collection(E.DOCTYPE_FILES).updateMetadataAttribute(n._id,a.metadata));case 2:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.saveFileQualification=U;var H=(a=(0,v.default)(m.default.mark(function e(t,n){var r,a,i,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rules,a=n.count,i=(0,_.Q)(E.DOCTYPE_FILES).where(P({},r)).partialIndex({trashed:!1}).indexFields(["cozyMetadata.updatedAt","metadata.qualification"]).sortBy([{"cozyMetadata.updatedAt":"desc"}]).limitBy(a||1),e.next=4,t.query(i);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.fetchFilesByQualificationRules=H,t.hasMetadataAttribute=function(e){var t=e.file,n=e.attribute;return(0,w.default)(t,"metadata.".concat(n))};var G=(i=(0,v.default)(m.default.mark(function e(t,n,r){var a,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw Error("You must provide a dirId");case 2:return e.next=4,t.query((0,_.Q)(E.DOCTYPE_FILES).getById(n));case 4:return a=e.sent.data,i=(0,k.default)(a.path,"/"),e.abrupt("return","".concat(i,"/").concat(r));case 8:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)});t.getFullpath=G;var W=(o=(0,v.default)(m.default.mark(function e(t,n,r){var a,i,o,c,s,u=arguments;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(u.length>3&&void 0!==u[3]?u[3]:{force:!1}).force,e.prev=1,"io.cozy.remote.nextcloud.files"!==n._type){e.next=10;break}if("io.cozy.remote.nextcloud.files"!==r._type){e.next=7;break}return e.next=6,t.collection("io.cozy.remote.nextcloud.files").move(n,r);case 6:case 9:case 13:return e.abrupt("return",{moved:void 0,deleted:null});case 7:return e.next=9,t.collection("io.cozy.remote.nextcloud.files").moveToCozy(n,r);case 10:if("io.cozy.remote.nextcloud.files"!==r._type){e.next=14;break}return e.next=13,t.collection("io.cozy.remote.nextcloud.files").moveFromCozy(r,n);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(1),e.t0;case 19:return e.prev=19,e.next=22,t.collection(E.DOCTYPE_FILES).updateFileMetadata(n._id,{dir_id:r._id});case 22:return i=e.sent,e.abrupt("return",{moved:i.data,deleted:null});case 26:if(e.prev=26,e.t1=e.catch(19),!(409===e.t1.status&&a)){e.next=43;break}return e.next=31,G(t,r._id,n.name);case 31:return o=e.sent,e.next=34,t.collection(E.DOCTYPE_FILES).statByPath(o);case 34:return c=e.sent,e.next=37,t.collection(E.DOCTYPE_FILES).destroy(c.data);case 37:return e.next=39,t.collection(E.DOCTYPE_FILES).updateFileMetadata(n._id,{dir_id:r._id});case 39:return s=e.sent,e.abrupt("return",{moved:s.data,deleted:c.data.id});case 43:throw e.t1;case 44:case"end":return e.stop()}},e,null,[[1,16],[19,26]])})),function(e,t,n){return o.apply(this,arguments)});t.move=W;var q=(c=(0,v.default)(m.default.mark(function e(t,n,r,a){var i,o,c,s,u,l,d,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=n).endsWith("/")||(i+="/"),o=t.collection(E.DOCTYPE_FILES),e.prev=3,e.next=6,o.statByPath(i+r.name);case 6:return s=(c=e.sent.data).id,u=c.dir_id,e.next=10,o.updateFile(r,{dirId:u,fileId:s,metadata:a});case 10:return l=e.sent,e.abrupt("return",l);case 14:if(e.prev=14,e.t0=e.catch(3),!/Not Found/.test(e.t0)){e.next=24;break}return e.next=19,o.ensureDirectoryExists(i);case 19:return d=e.sent,e.next=22,o.createFile(r,{dirId:d,metadata:a});case 22:return f=e.sent,e.abrupt("return",f);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,null,[[3,14]])})),function(e,t,n,r){return c.apply(this,arguments)});t.overrideFileForPath=q;var V=function(e,t){var n=(null==t?void 0:t.delimiter)||"_",r=new RegExp("(".concat(n,")([0-9]+)$")),a=e.match(r);if(!a)return"".concat(e).concat(n,"1");var i=parseInt(a[2]);return i++,e.replace(new RegExp("(".concat(n,")([0-9]+)$")),"".concat(n).concat(i))};t.generateNewFileNameOnConflict=V,t.generateFileNameForRevision=function(e,t,n){var r=D(e),a=r.filename,i=r.extension;return"".concat(a,"_").concat(n(t.updated_at,"DD MMMM - HH[h]mm")).concat(i)};var Q=(s=(0,v.default)(m.default.mark(function e(t,n,r){var a,i,o,c,s,u,l,d,f,p,h;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.name,i=r.dirId,o=r.conflictStrategy,c=r.conflictOptions,e.prev=1,e.next=4,G(t,i,a);case 4:return s=e.sent,e.next=7,t.collection(E.DOCTYPE_FILES).statByPath(s);case 7:if(u=e.sent.data.id,"erase"!==o){e.next=16;break}return e.next=12,t.collection(E.DOCTYPE_FILES).updateFile(n,P(P({},r),{},{fileId:u}));case 12:return l=e.sent,e.abrupt("return",l);case 16:return f=(d=D({name:a,type:"file"})).filename,p=d.extension,h=V(f,c)+p,e.abrupt("return",Q(t,n,P(P({},r),{},{name:h})));case 19:e.next=26;break;case 21:if(e.prev=21,e.t0=e.catch(1),!/Not Found/.test(e.t0.message)){e.next=25;break}return e.abrupt("return",t.collection(E.DOCTYPE_FILES).createFile(n,r));case 25:throw e.t0;case 26:case"end":return e.stop()}},e,null,[[1,21]])})),function(e,t,n){return s.apply(this,arguments)});t.uploadFileWithConflictStrategy=Q;var Z=(u=(0,v.default)(m.default.mark(function e(t){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise(function(e,n){var r=function(){var t=(0,v.default)(m.default.mark(function t(r){return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r.file(function(){var t=(0,v.default)(m.default.mark(function t(n){var r;return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(r=new FileReader).onloadend=(0,v.default)(m.default.mark(function t(){return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e(r.result);case 1:case"end":return t.stop()}},t)})),r.readAsArrayBuffer(n);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(e){console.error("error getting fileentry file!"+e),n(e)});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a=function(e){n(e)};window.resolveLocalFileSystemURL(t,r,a)}),e.abrupt("return",n);case 2:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)});t.readMobileFile=Z;var Y=(l=(0,v.default)(m.default.mark(function e(t,n,r){var a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(n);case 2:return a=e.sent,e.abrupt("return",Q(t,a,r));case 4:case"end":return e.stop()}},e)})),function(e,t,n){return l.apply(this,arguments)});t.doMobileUpload=Y,t.isPlainText=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?/^text\//.test(e):/\.(txt|md)$/.test(t)},t.hasQualifications=function(e){return!!(0,g.default)(e,"metadata.qualification")},t.hasCertifications=function(e){return(0,g.default)(e,"metadata.carbonCopy",!1)||(0,g.default)(e,"metadata.electronicSafe",!1)},t.isFromKonnector=function(e){return(0,w.default)(e,"cozyMetadata.sourceAccount")};var J=(d=(0,v.default)(m.default.mark(function e(t,n){var r,a,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.collection(E.DOCTYPE_FILES),e.next=3,r.fetchFileContentById(n);case 3:return a=e.sent,e.next=6,a.blob();case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},e)})),function(e,t){return d.apply(this,arguments)});t.fetchBlobFileById=J;var K=(f=(0,v.default)(m.default.mark(function e(t,n,r){var a,i,o,c;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"io.cozy.remote.nextcloud.files"!==n._type||"io.cozy.remote.nextcloud.files"!==r._type){e.next=6;break}return e.next=4,t.collection("io.cozy.remote.nextcloud.files").copy(n,r);case 4:return a=e.sent,e.abrupt("return",a);case 6:if("io.cozy.remote.nextcloud.files"!==n._type||"io.cozy.files"!==r._type){e.next=11;break}return e.next=9,t.collection("io.cozy.remote.nextcloud.files").moveToCozy(n,r,{copy:!0});case 9:return i=e.sent,e.abrupt("return",i);case 11:if("io.cozy.remote.nextcloud.files"!==r._type){e.next=16;break}return e.next=14,t.collection("io.cozy.remote.nextcloud.files").moveFromCozy(r,n,{copy:!0});case 14:return o=e.sent,e.abrupt("return",o);case 16:return e.next=18,t.collection(E.DOCTYPE_FILES).copy(n._id,void 0,r._id);case 18:return c=e.sent,e.abrupt("return",c);case 22:throw e.prev=22,e.t0=e.catch(0),e.t0;case 25:case"end":return e.stop()}},e,null,[[0,22]])})),function(e,t,n){return f.apply(this,arguments)});t.copy=K;var $=(p=(0,v.default)(m.default.mark(function e(t){var n,r,a,i,o,c;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.file,a=t.url,i=t.webviewIntent,o=n.collection(E.DOCTYPE_FILES),!((0,b.isFlagshipApp)()&&i&&!R(r))){e.next=19;break}return e.next=5,null==i?void 0:i.call("isAvailable","downloadFile");case 5:if(e.t1=c=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==c;case 9:if(!e.t0){e.next=13;break}e.t2=c,e.next=14;break;case 13:e.t2=!1;case 14:if(!e.t2){e.next=19;break}return e.next=18,i.call("downloadFile",r);case 18:return e.abrupt("return",e.sent);case 19:if(!R(r)){e.next=21;break}return e.abrupt("return",o.forceFileDownload(a,r.name));case 21:return e.abrupt("return",o.download(r));case 22:case"end":return e.stop()}},e)})),function(e){return p.apply(this,arguments)});t.downloadFile=$},16001:function(e,t,n){"use strict";var r,a,i,o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getReferencedFolder=t.createFolderWithReference=t.ensureMagicFolder=t.MAGIC_FOLDERS=void 0;var c=o(n(68434)),s=o(n(82007)),u=o(n(89734));o(n(88477));var l=n(71791),d=n(87549),f="io.cozy.apps",p="administrative",h="photos",m={ADMINISTRATIVE:"".concat(f,"/").concat(p),PHOTOS:"".concat(f,"/").concat(h),PHOTOS_BACKUP:"".concat(f,"/").concat(h,"/mobile"),PHOTOS_UPLOAD:"".concat(f,"/").concat(h,"/upload"),NOTES:"".concat(f,"/notes"),HOME:"".concat(f,"/home"),PAPERS:"".concat(f,"/").concat(p,"/papers"),COACH_CO2:"".concat(f,"/").concat(p,"/coachco2")};t.MAGIC_FOLDERS=m;var v=(r=(0,s.default)(c.default.mark(function e(t,n,r){var a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={_type:f,_id:n},e.next=3,b(t,a);case 3:if(!(i=e.sent)){e.next=6;break}return e.abrupt("return",i);case 6:if((o=Object.values(m)).includes(n)){e.next=9;break}throw Error("Cannot create Magic folder with id ".concat(n,". Allowed values are ").concat(o.join(", "),"."));case 9:if(r){e.next=11;break}throw Error("Magic folder default path must be defined");case 11:return e.abrupt("return",y(t,r,a));case 12:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)});t.ensureMagicFolder=v;var y=(a=(0,s.default)(c.default.mark(function e(t,n,r){var a,i,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collection(l.DOCTYPE_FILES),e.next=3,a.ensureDirectoryExists(n);case 3:return i=e.sent,e.next=6,a.addReferencesTo(r,[{_id:i}]);case 6:return e.next=8,a.get(i);case 8:return o=e.sent.data,e.abrupt("return",o);case 11:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)});t.createFolderWithReference=y;var b=(i=(0,s.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query((0,d.Q)(l.DOCTYPE_FILES).partialIndex({type:"directory",trashed:!1}).referencedBy(n));case 2:return r=e.sent.included,e.abrupt("return",r.length>0?(0,u.default)(r,"created_at").pop():null);case 5:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)});t.getReferencedFolder=b},69810:function(e,t){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.deltaLatitude=t.deltaLongitude=t.computeSphericalCenter=t.geodesicDistance=t.computeSpeed=void 0,t.computeSpeed=function(e,t){return e&&t?Math.round(e/t*100)/100:0};var r=function(e){return e*Math.PI/180},a=function(e){return 180*e/Math.PI},i=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n};t.geodesicDistance=function(e,t){if((null==e?void 0:e.lon)===void 0||(null==e?void 0:e.lat)===void 0||(null==t?void 0:t.lon)===void 0||(null==t?void 0:t.lat)===void 0)return null;var n=r(e.lon),a=r(e.lat),o=r(t.lon),c=r(t.lat);return i(6378137*(2*Math.asin(Math.sqrt(Math.pow(Math.sin((c-a)/2),2)+Math.cos(a)*Math.cos(c)*Math.pow(Math.sin((o-n)/2),2)))),2)},t.computeSphericalCenter=function(e){if(e.length<1)return null;if(1===e.length)return e[0];var t,o=0,c=0,s=0,u=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(e))){i&&(e=i);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,c=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==i.return||i.return()}finally{if(s)throw o}}}}(e);try{for(u.s();!(t=u.n()).done;){var l=t.value,d=r(l.lon),f=r(l.lat),p=Math.cos(f)*Math.cos(d),h=Math.cos(f)*Math.sin(d),m=Math.sin(f);o+=p,c+=h,s+=m}}catch(e){u.e(e)}finally{u.f()}var v=o/e.length,y=c/e.length,b=s/e.length,g=a(Math.atan2(y,v));return{lat:i(a(Math.atan2(b,Math.sqrt(v*v+y*y))),13),lon:i(g,13)}},t.deltaLongitude=function(e,t){return i(a(t/(6378137*Math.cos(r(e)))),13)},t.deltaLatitude=function(e){return i(e/(40075e3/360),13)}},66225:function(e,t,n){"use strict";var r=n(14746);Object.defineProperty(t,"__esModule",{value:!0}),t.geo=t.user=t.paper=t.dacc=t.sharing=t.timeseries=t.document=t.contact=t.utils=t.permission=t.note=t.account=t.konnectorFolder=t.folder=t.file=t.applications=t.instance=t.trigger=t.accounts=t.triggers=void 0;var a=r(n(43408));t.trigger=a;var i=r(n(73320));t.instance=i;var o=r(n(13114));t.applications=o;var c=r(n(72912));t.file=c;var s=r(n(16001));t.folder=s;var u=r(n(27871));t.konnectorFolder=u;var l=r(n(47980));t.account=l;var d=r(n(34083));t.note=d;var f=r(n(10037));t.permission=f;var p=r(n(25047));t.utils=p;var h=r(n(63892));t.contact=h;var m=r(n(12189));t.document=m;var v=r(n(19851));t.timeseries=v;var y=r(n(41567));t.sharing=y;var b=r(n(88799));t.dacc=b;var g=r(n(81828));t.paper=g;var x=r(n(63138));t.user=x;var w=r(n(69810));t.geo=w,t.triggers=a,t.accounts=l},73320:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.makeDiskInfos=t.hasPasswordDefinedAttribute=t.buildPremiumLink=t.hasAnOffer=t.shouldDisplayOffers=t.getUuid=t.isFreemiumUser=t.arePremiumLinksEnabled=t.isSelfHosted=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(27361)),s=n(87549),u=function(e){return!(0,c.default)(e,"context.data.manager_url")};t.isSelfHosted=u;var l=function(e){return!!(0,c.default)(e,"context.data.enable_premium_links")};t.arePremiumLinksEnabled=l;var d=function(e){return 5e10>=parseInt((0,c.default)(e,"diskUsage.data.quota",!1))};t.isFreemiumUser=d;var f=function(e){return(0,c.default)(e,"instance.data.uuid")};t.getUuid=f,t.shouldDisplayOffers=function(e){return!u(e)&&l(e)&&f(e)&&d(e)},t.hasAnOffer=function(e){return!u(e)&&l(e)&&f(e)&&!d(e)},t.buildPremiumLink=function(e){var t=(0,c.default)(e,"context.data.manager_url",!1),n=f(e);return t&&n?"".concat(t,"/cozy/instances/").concat(n,"/premium"):null};var p=(r=(0,o.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchQueryAndGetFromState({definition:(0,s.Q)("io.cozy.settings").getById("io.cozy.settings.instance"),options:{as:"io.cozy.settings/io.cozy.settings.instance",singleDocData:!0}});case 3:return n=e.sent.data.password_defined,e.abrupt("return",!!n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return r.apply(this,arguments)});t.hasPasswordDefinedAttribute=p;var h=function(e){return 1e-9*e},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"".concat(e%1?e.toFixed(t):e)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return{diskQuota:h(t),diskUsage:h(e),percentUsage:e/t*100}};t.makeDiskInfos=function(e,t){var n=v(+e,t?+t:void 0),r=n.diskQuota,a=n.diskUsage,i=n.percentUsage;return{humanDiskQuota:m(r),humanDiskUsage:m(a),percentUsage:Math.round(i).toString()}}},27871:function(e,t,n){"use strict";var r,a,i,o,c,s,u,l=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.findKonnectorAccountFolderByReference=t.buildFolderPermission=t.buildMainFolderPath=t.buildFolderPath=t.statDirectoryByPath=t.createDirectoryByPath=t.ensureKonnectorFolder=void 0;var d=l(n(68434)),f=l(n(90402)),p=l(n(82007)),h=n(16001);l(n(88477));var m=n(47980),v=n(37689),y=n(87549),b="io.cozy.files",g=(r=(0,p.default)(d.default.mark(function e(t,n){var r,a,i,o,c,s,u,l,p,y,b,g,_,E,S;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.konnector,a=n.account,i=n.lang,o=t.collection("io.cozy.permissions"),c=(0,v.getLocalizer)(i),e.next=5,Promise.all([(0,h.ensureMagicFolder)(t,h.MAGIC_FOLDERS.ADMINISTRATIVE,c("MagicFolders.administrative")),(0,h.ensureMagicFolder)(t,h.MAGIC_FOLDERS.PHOTOS,c("MagicFolders.photos"))]);case 5:return s=e.sent,l=(u=(0,f.default)(s,2))[0],p=u[1],y=(0,m.getAccountName)(a),e.next=12,N({client:t,slug:r.slug,sourceAccountIdentifier:y});case 12:if(!(b=e.sent)){e.next=15;break}return e.abrupt("return",b);case 15:return e.next=17,F({client:t,slug:r.slug});case 17:if(!(g=e.sent)){e.next=22;break}return e.next=21,function(e){return z.apply(this,arguments)}({client:t,mainFolder:g,konnector:r,sourceAccountIdentifier:y});case 21:return e.abrupt("return",e.sent);case 22:return _=O(r,{administrative:l.path,photos:p.path}),e.next=25,w(t,_);case 25:if(e.t0=e.sent,e.t0){e.next=30;break}return e.next=29,x(t,_);case 29:e.t0=e.sent;case 30:return R({client:t,folder:e.t0,konnector:r}),E=k(r,a,{administrative:l.path,photos:p.path}),e.next=35,w(t,E);case 35:if(e.t1=e.sent,e.t1){e.next=40;break}return e.next=39,x(t,E);case 39:e.t1=e.sent;case 40:return S=e.t1,e.next=43,Promise.all([o.add(r,A(S)),R({client:t,folder:S,konnector:r}),I({client:t,folder:S,sourceAccountIdentifier:y})]);case 43:return e.abrupt("return",S);case 44:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.ensureKonnectorFolder=g;var x=(a=(0,p.default)(d.default.mark(function e(t,n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(b).createDirectoryByPath(n);case 2:return r=e.sent.data,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.createDirectoryByPath=x;var w=(i=(0,p.default)(d.default.mark(function e(t,n){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.collection(b).statByPath(n);case 3:if(!(r=e.sent).data.trashed){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",r.data);case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0&&404===e.t0.status)){e.next=13;break}return e.abrupt("return",null);case 13:throw Error(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[0,9]])})),function(e,t){return i.apply(this,arguments)});t.statDirectoryByPath=w;var k=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=D(((null==e?void 0:null===(n=e.folders)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.defaultDir)||"$administrative/$konnector/$account").replace(/(\/+)/g,"/"),"/");_(i)||(i="$administrative/"+i);var o=i.split("/",1),c=S(i,o[0]),s=C(o[0],a),u=P(c,{konnector:e.name,account:(0,m.getAccountName)(t).replace(j,"-")});return"/".concat(s,"/").concat(u)};t.buildFolderPath=k;var O=function(e){var t,n,r,a,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=D(((null==e?void 0:null===(t=e.folders)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:null===(r=n.defaultDir)||void 0===r?void 0:null===(a=r.split("/"))||void 0===a?void 0:null===(i=a.slice(0,-1))||void 0===i?void 0:i.join("/"))||"$administrative/$konnector").replace(/(\/+)/g,"/"),"/");_(c)||(c="$administrative/"+c);var s=c.split("/",1),u=S(c,s[0]),l=C(s[0],o),d=P(u,{konnector:e.name});return"/".concat(l,"/").concat(d)};t.buildMainFolderPath=O;var _=function(e){return E.some(function(t){return e.startsWith(t)})},E=["$administrative","$photos"],S=function(e,t){var n=e.substring(t.length);return""===n&&(n="$konnector/$account"),n},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D((t[e.slice(1)]||"Administrative").replace(/(\/+)/g,"/"),"/")},P=function(e,t){return D(e.replace(/(\/+)/g,"/"),"/").split("/").map(function(e){return(null==t?void 0:t[e.slice(1)])||e}).join("/")},j=/\//g,A=function(e){return{saveFolder:{type:b,values:[e._id],verbs:["GET","PATCH","POST"]}}};t.buildFolderPermission=A;var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\\s";return e.replace(new RegExp("^([".concat(t,"]*)(.*?)([").concat(t,"]*)$")),"$2")},T=function(e,t){var n;return!!(null===(n=e.referenced_by)||void 0===n?void 0:n.find(function(e){return"io.cozy.konnectors"===e.type&&e.id==="io.cozy.konnectors/"+t}))},M=function(e,t){var n;return!!(null===(n=e.referenced_by)||void 0===n?void 0:n.find(function(e){return"io.cozy.accounts.sourceAccountIdentifier"===e.type&&(!t||e.id===t)}))},R=(o=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.folder,a=t.konnector,i=n.collection(b),T(r,a.slug)){e.next=5;break}return e.next=5,i.addReferencesTo(a,[r]);case 5:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),I=(c=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.client,r=t.folder,a=t.sourceAccountIdentifier,i=n.collection(b),M(r,a)){e.next=5;break}return e.next=5,i.addReferencesTo({_id:a,_type:"io.cozy.accounts.sourceAccountIdentifier"},[r]);case 5:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)}),N=(s=(0,p.default)(d.default.mark(function e(t){var n,r,a,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.slug,a=t.sourceAccountIdentifier,e.next=3,n.query((0,y.Q)(b).partialIndex({type:"directory",trashed:!1}).referencedBy({_type:"io.cozy.konnectors",_id:"io.cozy.konnectors/".concat(r)}));case 3:return i=e.sent.included,e.abrupt("return",i.find(function(e){return M(e,a)}));case 6:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)});t.findKonnectorAccountFolderByReference=N;var F=(u=(0,p.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.slug,e.next=3,n.query((0,y.Q)(b).partialIndex({type:"directory",trashed:!1}).referencedBy({_type:"io.cozy.konnectors",_id:"io.cozy.konnectors/".concat(r)}));case 3:return a=e.sent.included,e.abrupt("return",a.find(function(e){return!M(e)}));case 6:case"end":return e.stop()}},e)})),function(e){return u.apply(this,arguments)});function z(){return(z=(0,p.default)(d.default.mark(function e(t){var n,r,a,i,o,c;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,r=t.mainFolder,a=t.konnector,i=t.sourceAccountIdentifier,o=r.path+"/"+i,e.next=4,w(n,o);case 4:if(e.t0=e.sent,e.t0){e.next=9;break}return e.next=8,x(n,o);case 8:e.t0=e.sent;case 9:return c=e.t0,e.next=12,R({client:n,folder:c,konnector:a});case 12:return e.next=14,I({client:n,folder:c,sourceAccountIdentifier:i});case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}},1423:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeCategories=h,t.areTermsValid=m,t.isPartnershipValid=v,t.sanitize=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return!e.categories&&e.category&&"string"==typeof e.category&&(t.categories=[e.category],delete t.category),t.categories=h(t.categories),"object"==typeof e.name&&(t.name=e.name.en),e.available_version&&(t.availableVersion=e.available_version,delete t.available_version),e.latest_version&&(t.latestVersion=e.latestVersion,delete t.latest_version),t.terms&&!m(t.terms)&&delete t.terms,t.partnership&&!v(t.partnership)&&delete t.partnership,t.fields&&(t.fields=b(e.fields)),t},t.getIdentifier=t.sanitizeIdentifier=t.legacyLoginFields=t.ROLE_IDENTIFIER=void 0;var a=r(n(64512)),i=r(n(59242)),o=r(n(50361)),c=r(n(70894));function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var l="identifier";t.ROLE_IDENTIFIER=l;var d=["login","identifier","new_identifier","email"];t.legacyLoginFields=d;var f=["secret","dob","code","answer","access_token","refresh_token","appSecret"],p=["banking","cozy","energy","health","host_provider","insurance","isp","mes_infos","online_services","others","partners","press","productivity","ptnb","public_service","shopping","social","telecom","transport"];function h(e){if(!e)return["others"];var t=e.filter(function(e){return p.includes(e)});return t.length?t:["others"]}function m(e){return!!(e&&e.id&&e.url&&e.version)}function v(e){return!!(e&&e.description)}var y=function(e){var t=(0,o.default)(e),n=!1;for(var r in t)t[r].role===l&&(n?delete t[r].role:n=!0);if(n)return t;var a,i=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(d);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(t[c])return t[c].role=l,t}}catch(e){i.e(e)}finally{i.f()}for(var u in t)if("password"!==t[u].type){t[u].role=l;break}return t};t.sanitizeIdentifier=y,t.getIdentifier=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.default)(y(e),function(e){return e.role===l})||null};var b=(0,i.default)([function(e){var t=(0,o.default)(e);return delete t.advancedFields,t},y,function(e){var t=(0,o.default)(e);for(var n in t){var r=t[n],a=void 0===r.required?r.isRequired:r.required;t[n].required="boolean"!=typeof a||a}return t},function(e){var t=(0,o.default)(e);for(var n in t){var r=t[n];"boolean"!=typeof r.encrypted&&(r.encrypted="password"===r.type||f.includes(n))}return t}])},34083:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchURL=t.generateUrlForNote=t.generatePrivateUrl=void 0;var i=a(n(68434)),o=a(n(82007)),c=n(64157),s=a(n(81602)),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.returnUrl,a=new URL(e);return r&&a.searchParams.set("returnUrl",r),a.hash="#/n/".concat(t.id),a.toString()};t.generatePrivateUrl=u,t.generateUrlForNote=function(e,t){return s.default.warn("generateUrlForNote is deprecated. Please use models.note.generatePrivateUrl instead"),u(e,t)};var l=(r=(0,o.default)(i.default.mark(function e(t,n){var r,a,o,s,u,l,d,f,p,h,m,v=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>2&&void 0!==v[2]?v[2]:{},e.next=3,t.getStackClient().collection("io.cozy.notes").fetchURL({_id:n.id});case 3:if(o=(a=e.sent.data).note_id,s=a.subdomain,u=a.protocol,l=a.instance,d=a.sharecode,f=a.public_name,!d){e.next=18;break}return(h=[["id",o]]).push(["sharecode",d]),f&&h.push(["username",f]),e.abrupt("return",(0,c.generateWebLink)({cozyUrl:"".concat(u,"://").concat(l),searchParams:h,pathname:null!==(p=r.pathname)&&void 0!==p?p:"/public/",slug:"notes",subDomainType:s}));case 18:return e.abrupt("return",(0,c.generateWebLink)({cozyUrl:"".concat(u,"://").concat(l),pathname:null!==(m=r.pathname)&&void 0!==m?m:"",slug:"notes",subDomainType:s,hash:"/n/".concat(o)}));case 19:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.fetchURL=l},81828:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isForeignPaper=t.makeExpirationDescription=t.makeExpiresInMessage=t.makeExpiredMessage=t.formatContactValue=t.getTranslatedNameForContact=t.formatOtherMetadataValue=t.getTranslatedNameForOtherMetadata=t.formatInformationMetadataValue=t.getTranslatedNameForInformationMetadata=t.formatDateMetadataValue=t.getTranslatedNameForDateMetadata=t.getMetadataQualificationType=t.formatMetadataQualification=t.makeMetadataQualification=t.isExpiringSoon=t.isExpired=t.computeExpirationNoticeLink=t.computeExpirationNoticeDate=t.computeExpirationDate=t.isExpiring=t.KNOWN_BILLS_ATTRIBUTES_NAMES=t.KNOWN_OTHER_METADATA_NAMES=t.KNOWN_INFORMATION_METADATA_NAMES=t.KNOWN_DATE_METADATA_NAMES=void 0;var a=r(n(98235)),i=r(n(29422)),o=r(n(27546)),c=r(n(94581)),s=r(n(99580)),u=n(37689),l=n(84854),d=n(63892),f=r(n(27361)),p=n(74632),h={national_id_card:"https://www.service-public.fr/particuliers/vosdroits/N358",residence_permit:"https://www.service-public.fr/particuliers/vosdroits/N110",passport:"https://www.service-public.fr/particuliers/vosdroits/N360",driver_license:"https://permisdeconduire.ants.gouv.fr/demarches-en-ligne/perte-vol-deterioration-fin-de-validite-ou-changement-d-etat-civil"},m=["AObtentionDate","BObtentionDate","CObtentionDate","DObtentionDate","obtentionDate","expirationDate","referencedDate","issueDate","shootingDate","date","datetime"];t.KNOWN_DATE_METADATA_NAMES=m;var v=["number","bicNumber","country","refTaxIncome","contractType","netSocialAmount","employerName","vehicle.licenseNumber","vehicle.confidentialNumber","noticePeriod"];t.KNOWN_INFORMATION_METADATA_NAMES=v;var y=["contact","page","qualification"];t.KNOWN_OTHER_METADATA_NAMES=y;var b=["amount","subtype","employer"];t.KNOWN_BILLS_ATTRIBUTES_NAMES=b;var g=function(e){var t,n,r,a,i,o=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label,c=null===(r=e.metadata)||void 0===r?void 0:r.country,s=null===(a=e.metadata)||void 0===a?void 0:a.expirationDate,u=null===(i=e.metadata)||void 0===i?void 0:i.noticePeriod;return"national_id_card"===o&&(!c||"fr"===c)&&!!s&&!!u},x=function(e){var t,n,r=null===(t=e.metadata)||void 0===t?void 0:t.expirationDate,a=null===(n=e.metadata)||void 0===n?void 0:n.noticePeriod;return!!r&&!!a},w=function(e){var t,n,r,a=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label,i=null===(r=e.metadata)||void 0===r?void 0:r.referencedDate,o=e.created_at;return"personal_sporting_licence"===a&&(!!i||!!o)};t.isExpiring=function(e){return!!(g(e)||x(e)||w(e))};var k=function(e){if(g(e)||x(e)){var t;return new Date(null===(t=e.metadata)||void 0===t?void 0:t.expirationDate)}if(w(e)){var n,r=null===(n=e.metadata)||void 0===n?void 0:n.referencedDate,a=e.created_at;return(0,i.default)(new Date(null!=r?r:a),{days:365})}return null};t.computeExpirationDate=k;var O=function(e){if(g(e)||x(e)){var t;return parseInt(null===(t=e.metadata)||void 0===t?void 0:t.noticePeriod,10)}return w(e)?15:null},_=function(e){var t=k(e);if(null==t)return null;var n=O(e);return null==n?null:(0,o.default)(t,{days:n})};t.computeExpirationNoticeDate=_,t.computeExpirationNoticeLink=function(e){var t,n,r=null===(t=e.metadata)||void 0===t?void 0:null===(n=t.qualification)||void 0===n?void 0:n.label;return r&&h[r]||null},t.isExpired=function(e){var t=new Date,n=k(e);return null!=n&&n<=t},t.isExpiringSoon=function(e){var t=new Date,n=k(e),r=_(e);return null!=n&&null!=r&&r<=t&&t<n};var E=function(e){var t=e.metadata,n=e.knownMetadataPath,r=e.value||(0,f.default)(t,n,null)||null;return Object.keys(t).some(function(e){return n.startsWith(e)})||"contact"===n?{name:n,value:r}:null};t.makeMetadataQualification=E,t.formatMetadataQualification=function(e){var t=m.map(function(t){return E({metadata:e,knownMetadataPath:t})}).filter(Boolean).filter(function(e,t,n){return n.length>1?"datetime"!==e.name:e}),n=v.map(function(t){return E({metadata:e,knownMetadataPath:t})}).filter(Boolean),r=y.map(function(t){var n,r="qualification"===t?null===(n=e[t])||void 0===n?void 0:n.label:e[t];return E({metadata:e,knownMetadataPath:t,value:r})}).filter(Boolean);return[].concat((0,a.default)(t),(0,a.default)(n),(0,a.default)(r))},t.getMetadataQualificationType=function(e){return m.includes(e)?"date":v.includes(e)?"information":y.includes(e)?"contact"===e?"contact":"other":b.includes(e)?"bills":null},t.getTranslatedNameForDateMetadata=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.qualification.date.title.".concat(e))},t.formatDateMetadataValue=function(e,t){var n=t.lang,r=t.f,a=(0,u.getLocalizer)(n);return e?r(e,"en"===n?"LL/dd/yyyy":"dd/LL/yyyy"):a("Scan.qualification.noInfo")},t.getTranslatedNameForInformationMetadata=function(e,t){var n=t.lang,r=t.qualificationLabel,a=(0,u.getLocalizer)(n);return a("number"===e?"Scan.qualification.information.title.".concat(r,".").concat(e):"Scan.qualification.information.title.".concat(e))},t.formatInformationMetadataValue=function(e,t){var n=t.lang,r=t.name,a=t.qualificationLabel,i=(0,u.getLocalizer)(n),o=(0,l.getLocalizer)(n).t;return"number"==typeof e||e?"noticePeriod"===r?"".concat(e," ").concat(i("Scan.qualification.information.day",{smart_count:e})):"contractType"===r?i("Scan.attributes.contractType.".concat(e),{_:e}):"refTaxIncome"===r||"netSocialAmount"===r||"amount"===r||"number"===r&&"pay_sheet"===a?"".concat(e," €"):"country"===r&&(0,p.isValidCountryCodeTranslation)(n,e)?o("countries.".concat(e)):e:i("Scan.qualification.noInfo")},t.getTranslatedNameForOtherMetadata=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.qualification.".concat(e))},t.formatOtherMetadataValue=function(e,t){var n=t.lang,r=t.name,a=(0,u.getLocalizer)(n);return"qualification"===r?a("Scan.items.".concat(e),{smart_count:1}):a("Scan.qualification.".concat(e))},t.getTranslatedNameForContact=function(e){var t=e.lang;return(0,u.getLocalizer)(t)("Scan.qualification.contact")},t.formatContactValue=function(e){return e&&e.length>0?e.map(function(e){return"".concat((0,d.getDisplayName)(e))}).join(", "):""},t.makeExpiredMessage=function(e){var t=e.lang;return(0,u.getLocalizer)(t)("Scan.expiration.expired")},t.makeExpiresInMessage=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.expiration.expiresIn",{duration:(0,c.default)(new Date(e),{locale:"fr"===n?s.default:void 0})})},t.makeExpirationDescription=function(e,t){var n=t.lang;return(0,u.getLocalizer)(n)("Scan.expiration.description",{duration:(0,c.default)(new Date(e),{locale:"fr"===n?s.default:void 0})})},t.isForeignPaper=function(e){var t;return null!==(t=e.metadata)&&void 0!==t&&!!t.country&&"fr"!==e.metadata.country.toLowerCase()}},10037:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isReadOnly=v,t.fetchOwn=y,t.isForType=g,t.isDocumentReadOnly=function(e){return w.apply(this,arguments)},t.isShortcutCreatedOnTheRecipientCozy=void 0;var a=r(n(64512)),i=r(n(68434)),o=r(n(82007)),c=r(n(98235)),s=r(n(25325)),u=r(n(27361));r(n(88477));var l=n(87549),d=n(72912),f=n(71791),p=r(n(81602));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.writability;return e.verbs&&e.verbs.length>0&&0===(0,s.default)(e.verbs,["ALL"].concat((0,c.default)(void 0===n?["PATCH","POST","PUT","DELETE"]:n))).length}function y(e){return b.apply(this,arguments)}function b(){return(b=(0,o.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collection("io.cozy.permissions"),e.next=3,n.fetchOwnPermissions();case 3:if(r=e.sent,a=(0,u.default)(r,"data.attributes.permissions")){e.next=7;break}throw"Can't get self permissions";case 7:return e.abrupt("return",Object.values(a));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e,t){return e.type===t||e.type+".*"===t}function x(){return(x=(0,o.default)(i.default.mark(function e(t){var n,r,a,c,s,u,p,h,v,b,x;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x=function(){return(x=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.doc,r=t.client,!(o=(a=t.perms).find(function(e){if(!e.values)return!0;var t=n[e.selector||"id"];return e.values.includes(t)}))){e.next=6;break}return e.abrupt("return",o);case 6:if(s!==f.DOCTYPE_FILES){e.next=16;break}if(c=(0,d.getParentFolderId)(n),e.t0=c,!e.t0){e.next=13;break}return e.next=12,h(c);case 12:e.t0=e.sent;case 13:if(!(u=e.t0)){e.next=16;break}return e.abrupt("return",b({doc:u,perms:a,client:r}));case 16:return e.abrupt("return",void 0);case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)},b=function(e){return x.apply(this,arguments)},v=function(){return(v=(0,o.default)(i.default.mark(function e(t){var n,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.Q)(f.DOCTYPE_FILES).getById(t),e.next=3,r.query(n);case 3:return a=e.sent,e.abrupt("return",a&&a.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)},h=function(e){return v.apply(this,arguments)},n=t.document,r=t.client,a=t.permissions,c=n._id||n.id,s=n._type||n.type,u=m(m({},n),{},{id:c,type:s}),!a){e.next=12;break}e.t0=a,e.next=15;break;case 12:return e.next=14,y(r);case 14:e.t0=e.sent;case 15:return p=e.t0.filter(function(e){return g(e,s)}),e.abrupt("return",b({doc:u,client:r,perms:p}));case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.document,r=t.client,a=t.writability,void 0!==(o=t.permissions)){e.next=10;break}return e.next=7,y(r);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=o;case 11:if(!((c=e.t0).length<=1)){e.next=16;break}e.t1=c[0],e.next=19;break;case 16:return e.next=18,function(e){return x.apply(this,arguments)}({document:n,client:r,permissions:c});case 18:e.t1=e.sent;case 19:if(!(s=e.t1)){e.next=24;break}return e.abrupt("return",v(s,{writability:a}));case 24:return p.default.warn("can't find the document in current attached permissions"),e.abrupt("return",void 0);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.isShortcutCreatedOnTheRecipientCozy=function(e){if(!e.included)return!1;var t=e.included.find(function(e){return"io.cozy.sharings.members"===e.type});return!!t&&!!t.attributes.instance}},41567:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.makeSharingLink=void 0;var i=a(n(68434)),o=a(n(64512)),c=a(n(82007)),s=n(71791);a(n(88477));var u=n(64157);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=(r=(0,c.default)(i.default.mark(function e(t,n){var r,a,o,c,l,f,p,h,m,v,y=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=(o=y.length>2&&void 0!==y[2]?y[2]:{}).ttl,l=o.password,p=void 0===(f=o.verbs)?["GET"]:f,h=d(d({_type:s.DOCTYPE_PERMISSIONS,permissions:{files:{type:s.DOCTYPE_FILES,values:n,verbs:p}}},c&&{ttl:c}),l&&{password:l}),e.next=4,t.save(h);case 4:return m=e.sent.data,v=(0,u.generateWebLink)({cozyUrl:t.getStackClient().uri,searchParams:[["sharecode",null==m?void 0:null===(r=m.attributes)||void 0===r?void 0:null===(a=r.shortcodes)||void 0===a?void 0:a.code]],pathname:"/public",slug:"drive",subDomainType:t.capabilities.flat_subdomains?"flat":"nested"}),e.abrupt("return",v);case 8:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.makeSharingLink=f},19851:function(e,t,n){"use strict";var r,a,i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTimeSeriesByIntervalAndSource=t.saveTimeSeries=void 0;var o=i(n(68434)),c=i(n(82007)),s=n(87549),u=function(e){if(!e.startDate||!e.endDate)throw Error("You must specify a startDate and endDate for the time serie");if(!Date.parse(e.startDate)||!Date.parse(e.endDate))throw Error("Invalid date format for the time serie");if(!e.dataType)throw Error("You must specify a dataType for the time serie");if(!e.series||!Array.isArray(e.series))throw Error("You must specify a series array for the time serie")},l=(r=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,c,s,l,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dataType,a=n.series,i=n.startDate,c=n.endDate,s=n.source,l=n.theme,u({dataType:r,series:a,startDate:i,endDate:c,source:s}),d={_type:"io.cozy.timeseries.".concat(r),startDate:i,endDate:c,source:s,theme:l,series:a},e.abrupt("return",t.save(d));case 5:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.saveTimeSeries=l;var d=(a=(0,c.default)(o.default.mark(function e(t,n){var r,a,i,c,u,l,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.startDate,a=n.endDate,i=n.dataType,c=n.source,u=n.limit,l="io.cozy.timeseries.".concat(i),d=(0,s.Q)(l).where({source:c,startDate:{$gte:r},endDate:{$lte:a}}).indexFields(["source","startDate","endDate"]).sortBy([{source:"desc"},{startDate:"desc"},{endDate:"desc"}]).limitBy(u||5),e.abrupt("return",t.query(d));case 4:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)});t.fetchTimeSeriesByIntervalAndSource=d},43408:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.triggers=t.triggerStates=void 0;var a=r(n(64512)),i=n(47980),o=r(n(81602));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var u=["CHALLENGE_ASKED","DISK_QUOTA_EXCEEDED","TERMS_VERSION_MISMATCH","USER_ACTION_NEEDED","USER_ACTION_NEEDED.CHANGE_PASSWORD","USER_ACTION_NEEDED.ACCOUNT_REMOVED","USER_ACTION_NEEDED.WEBAUTH_REQUIRED","USER_ACTION_NEEDED.SCA_REQUIRED","LOGIN_FAILED"],l={getLastExecution:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_execution},getLastSuccess:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_success},getLastsuccess:function(e){var t;return o.default.warn("Deprecated, please use getLastSuccess instead of getLastsuccess"),null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_success},isErrored:function(e){var t;return(null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.status)==="errored"},getLastErrorType:function(e){var t;return null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_error}};t.triggerStates=l;var d={isKonnectorWorker:function(e){return"konnector"===e.worker},isKonnector:function(e){return"konnector"===e.worker||"client"===e.worker},getKonnector:function(e){return d.isKonnector(e)?e.message&&e.message.konnector?e.message.konnector:e.message&&e.message.Data?JSON.parse(atob(e.message.Data)).konnector:void 0:null},getAccountId:function(e){var t,n,r=null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.Data;return r?JSON.parse(atob(r)).account:null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.account},isLatestErrorMuted:function(e,t){var n=l.getLastErrorType(e),r=l.getLastSuccess(e),a=r?new Date(r):new Date;return(0,i.getMutedErrors)(t).some(function(e){return e.type===n&&(!r||new Date(e.mutedAt)>a)})},hasActionableError:function(e){var t;return u.includes(null==e?void 0:null===(t=e.current_state)||void 0===t?void 0:t.last_error)},buildTriggerAttributes:function(e){var t=e.account,n=e.cron,r=e.folder,a=e.konnector,i={account:t._id,konnector:a.slug};r&&(i.folder_to_save=r._id);var o=a.clientSide?{type:"@client"}:{type:"@cron",arguments:void 0===n?"0 0 0 * * 0":n};return s(s({},{worker:"konnector",message:i}),o)}};t.triggers=d},63138:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.hasPassword=void 0;var i=a(n(68434)),o=a(n(82007)),c=n(73320),s=n(60841),u=n(50300),l=(r=(0,o.default)(i.default.mark(function e(t){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.hasExtensionInstalledAttribute)(t);case 2:return n=e.sent,e.next=5,(0,c.hasPasswordDefinedAttribute)(t);case 5:return r=e.sent,e.abrupt("return",!((0,u.isMagicLink)(t)||(0,u.isOIDC)(t))||n||r);case 7:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});t.hasPassword=l},25047:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getFlagshipDownloadLink=t.getCreatedByApp=t.hasBeenUpdatedByApp=void 0;var a=r(n(27361)),i=n(25976),o=r(n(71400));t.hasBeenUpdatedByApp=function(e,t){var n=(0,a.default)(e,"cozyMetadata.updatedByApps");return!!(n&&n.find(function(e){return e.slug===t}))},t.getCreatedByApp=function(e){return(0,a.default)(e,"cozyMetadata.createdByApp")},t.getFlagshipDownloadLink=function(e){if((0,i.isAndroid)()){var t=(0,o.default)("flagship.playstore-id")||"io.cozy.flagship.mobile";return"https://play.google.com/store/apps/details?id=".concat(t,"&hl=").concat(e)}if((0,i.isIOS)()){var n=(0,o.default)("flagship.appstore-id")||"id1600636174";return"https://apps.apple.com/".concat(e,"/app/").concat(n)}return(0,o.default)("flagship.download-link")||"https://cozy.io/".concat(e,"/download")}},67454:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPerformanceApi=void 0,t.defaultPerformanceApi={measure:function(e){},mark:function(e){return e}}},97077:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.webPerformanceApi=void 0;var a=r(n(73955));t.webPerformanceApi={measure:function(e){var t=e.measureName,n=e.markName,r=e.category,a=e.color,i=null!=t?t:n;performance.measure(i,{start:n,detail:{devtools:{track:null!=r?r:"CozyClient",color:null!=a?a:"secondary"}}})},mark:function(e){var t="".concat((0,a.default)()," ").concat(e);return performance.mark(t),t}}},83549:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={olderThan:function(e){return function(t){return!t||!t.lastUpdate||Date.now()-t.lastUpdate>e}},noFetch:function(){return!1}}},8665:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=function(){var e;function t(){(0,o.default)(this,t),this.pending={}}return(0,c.default)(t,[{key:"exec",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),(i=this.pending[r])?o=i:(o=t(),this.pending[r]=o),e.prev=3,e.next=6,o;case 6:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,this.pending[r]=null,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(t,n){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=e(),n=this.pending[t];return n||null}}]),t}();t.default=s},87549:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryDefinition=t.MutationTypes=t.Mutations=t.getDoctypeFromOperation=t.uploadFile=t.removeReferencedBy=t.addReferencedBy=t.removeReferencesTo=t.addReferencesTo=t.deleteDocument=t.updateDocuments=t.updateDocument=t.createDocument=t.isAGetByIdQuery=t.Q=void 0;var a=r(n(64512)),i=r(n(65105)),o=r(n(19723)),c=r(n(70894)),s=r(n(81602));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e),this.doctype=t.doctype,this.id=t.id,this.ids=t.ids,this.selector=t.selector,this.fields=t.fields,this.indexedFields=t.indexedFields,this.partialFilter=t.partialFilter,this.sort=t.sort,this.includes=t.includes,this.referenced=t.referenced,this.limit=t.limit,this.skip=t.skip,this.cursor=t.cursor,this.bookmark=t.bookmark}return(0,o.default)(e,[{key:"checkSortOrder",value:function(e){var t=e.sort,n=e.selector,r=e.indexedFields,a=this.sort||t,i=this.selector||n||{},o=this.indexedFields||r;if(a){var c=o||Object.keys(i);if(c&&!(c.length<1)){if(a.length>c.length){s.default.warn("You should not sort on non-indexed fields.\n\n        Sort: ".concat(JSON.stringify(a),"\n\n        Indexed fields: ").concat(c));return}for(var u=0;u<a.length;u++)if(Object.keys(a[u])[0]!==c[u]){s.default.warn("The sort order should be the same than the indexed fields.\n\n          Sort: ".concat(JSON.stringify(a),"\n\n          Indexed fields: ").concat(c,"\n"));return}}}}},{key:"checkSelector",value:function(e){(0,c.default)(e,["$exists",!1])&&s.default.warn('The "$exists: false" predicate should be defined as a partial index for better performance.\n\n        Selector: '.concat(JSON.stringify(e))),(0,c.default)(e,"$ne")&&s.default.info("The use of the $ne operator is more efficient with a partial index.\n\n        Selector: ".concat(JSON.stringify(e)));var t=(0,c.default)(e,function(e){return Array.isArray(e)});if(t&&!t.startsWith("$"))throw Error("You pass ".concat(JSON.stringify(e),", this is a valid mango operation, \n\n        but sift doesn't support it so CozyClient can not evaluate \n\n        the request in memory. You must use a MongoDB operator \n\n        like $in or $or operator instead, preferably in a partial index, \n\n        to avoid costly full-scan"))}},{key:"checkSelectFields",value:function(e){var t=e.fields,n=e.selector,r=e.partialFilter,a=this.fields||t,i=this.selector||n,o=this.partialFilter||r;if(a&&(i||o)&&!Object.keys(l(l({},i),o)).every(function(e){return a.includes(e)}))throw Error("The .select should includes all the fields used in where or partialIndex.\n        Please fix this query: fields: ".concat(JSON.stringify(this.toDefinition())))}},{key:"getById",value:function(t){if(!t)throw Error("getById called with undefined id");return new e(l(l({},this.toDefinition()),{},{id:t}))}},{key:"getByIds",value:function(t){return new e(l(l({},this.toDefinition()),{},{ids:t}))}},{key:"where",value:function(t){return this.checkSortOrder({selector:t}),this.checkSelector(t),this.checkSelectFields({selector:t}),new e(l(l({},this.toDefinition()),{},{selector:t}))}},{key:"select",value:function(t){return this.checkSelectFields({fields:t}),new e(l(l({},this.toDefinition()),{},{fields:t}))}},{key:"indexFields",value:function(t){return this.checkSortOrder({indexedFields:t}),new e(l(l({},this.toDefinition()),{},{indexedFields:t}))}},{key:"partialIndex",value:function(t){return this.checkSelectFields({partialFilter:t}),new e(l(l({},this.toDefinition()),{},{partialFilter:t}))}},{key:"sortBy",value:function(t){if(!Array.isArray(t))throw Error('Invalid sort, should be an array ([{ label: "desc"}, { name: "asc"}]), you passed '.concat(JSON.stringify(t),"."));return this.checkSortOrder({sort:t}),new e(l(l({},this.toDefinition()),{},{sort:t}))}},{key:"include",value:function(t){if(!Array.isArray(t))throw Error("include() takes an array of relationship names");return new e(l(l({},this.toDefinition()),{},{includes:t}))}},{key:"limitBy",value:function(t){return new e(l(l({},this.toDefinition()),{},{limit:t}))}},{key:"UNSAFE_noLimit",value:function(){return new e(l(l({},this.toDefinition()),{},{limit:null}))}},{key:"offset",value:function(t){return new e(l(l({},this.toDefinition()),{},{bookmark:void 0,cursor:void 0,skip:t}))}},{key:"offsetCursor",value:function(t){return new e(l(l({},this.toDefinition()),{},{bookmark:void 0,skip:void 0,cursor:t}))}},{key:"offsetBookmark",value:function(t){return new e(l(l({},this.toDefinition()),{},{skip:void 0,cursor:void 0,bookmark:t}))}},{key:"referencedBy",value:function(t){return new e(l(l({},this.toDefinition()),{},{referenced:t}))}},{key:"toDefinition",value:function(){return{doctype:this.doctype,id:this.id,ids:this.ids,selector:this.selector,fields:this.fields,indexedFields:this.indexedFields,partialFilter:this.partialFilter,sort:this.sort,includes:this.includes,referenced:this.referenced,limit:this.limit,skip:this.skip,cursor:this.cursor,bookmark:this.bookmark}}}]),e}();t.QueryDefinition=d,t.Q=function(e){return new d({doctype:e})},t.isAGetByIdQuery=function(e){if(!e)return!1;var t=Object.values(e);return 0!==t.length&&2===t.filter(function(e){return void 0!==e}).length&&void 0!==e.id};var f="CREATE_DOCUMENT",p="UPDATE_DOCUMENT",h="UPDATE_DOCUMENTS",m="DELETE_DOCUMENT",v="ADD_REFERENCES_TO",y="UPLOAD_FILE",b=function(e){return{mutationType:C.CREATE_DOCUMENT,document:e}};t.createDocument=b;var g=function(e){return{mutationType:C.UPDATE_DOCUMENT,document:e}};t.updateDocument=g;var x=function(e){return{mutationType:C.UPDATE_DOCUMENTS,documents:e}};t.updateDocuments=x;var w=function(e){return{mutationType:C.DELETE_DOCUMENT,document:e}};t.deleteDocument=w;var k=function(e,t){return{mutationType:C.ADD_REFERENCES_TO,referencedDocuments:t,document:e}};t.addReferencesTo=k;var O=function(e,t){return{mutationType:C.REMOVE_REFERENCES_TO,referencedDocuments:t,document:e}};t.removeReferencesTo=O;var _=function(e,t){return{mutationType:C.ADD_REFERENCED_BY,referencedDocuments:t,document:e}};t.addReferencedBy=_;var E=function(e,t){return{mutationType:C.REMOVE_REFERENCED_BY,referencedDocuments:t,document:e}};t.removeReferencedBy=E;var S=function(e,t){return{mutationType:C.UPLOAD_FILE,file:e,dirPath:t}};t.uploadFile=S,t.getDoctypeFromOperation=function(e){if(!e.mutationType)return e.doctype;var t=e.mutationType;switch(t){case f:case p:return e.document._type;case h:return e.documents[0]._type;case m:return e.document._type;case v:case y:throw Error("Not implemented");default:throw Error("Unknown mutationType ".concat(t))}},t.Mutations={createDocument:b,updateDocument:g,updateDocuments:x,deleteDocument:w,addReferencesTo:k,removeReferencesTo:O,addReferencedBy:_,removeReferencedBy:E,uploadFile:S};var C={CREATE_DOCUMENT:f,UPDATE_DOCUMENT:p,UPDATE_DOCUMENTS:h,DELETE_DOCUMENT:m,ADD_REFERENCES_TO:v,REMOVE_REFERENCES_TO:"REMOVE_REFERENCES_TO",ADD_REFERENCED_BY:"ADD_REFERENCED_BY",REMOVE_REFERENCED_BY:"REMOVE_REFERENCED_BY",UPLOAD_FILE:y};t.MutationTypes=C},6436:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(66604)),i=r(n(7739)),o=r(n(85564)),c=r(n(18446)),s=r(n(44908)),u=r(n(87185)),l=n(87549),d=function(e){var t=(0,i.default)(e,function(e){return e.id||e.ids?"idQueries":"others"}),n=t.idQueries,r=void 0===n?[]:n,a=t.others,d=r.length>0?new l.QueryDefinition({doctype:e[0].doctype,ids:(0,s.default)((0,o.default)(r.map(function(e){return e.id||e.ids})))}):[];return(0,u.default)(void 0===a?[]:a,c.default).concat(d)};t.default=function(e){var t=(0,i.default)(e,function(e){return e.doctype});return(0,o.default)(Object.values((0,a.default)(t,d)))}},74165:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.registryEndpoint=t.transformRegistryFormatToStackFormat=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(64512)),u=r(n(27361));n(35449);var l=r(n(2663)),d=n(97682);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.transformRegistryFormatToStackFormat=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,s.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:(0,u.default)(e,"latest_version.manifest.source"),attributes:(0,u.default)(e,"latest_version.manifest")},e)},t.registryEndpoint="/registry/";var p=function(e){var t=new URLSearchParams(e).toString();return t?"?".concat(t):""},h=function(e){var t=e.type,n=t===d.APP_TYPE.KONNECTOR||"node"===t?"konnectors":"apps";return"/".concat(n)},m=function(){var e,t,n;function r(e){if((0,o.default)(this,r),!e.client)throw Error("Need to pass a client to instantiate a Registry API.");this.client=e.client}return(0,c.default)(r,[{key:"installApp",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c,s,u,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.slug,i=t.terms,o={},(c=t.installed)&&(o.PermissionsAcked=c),n&&(o.Source=n),s=p(o),!i){e.next=9;break}return e.next=9,l.default.save(this.client,i);case 9:return u=t.installed?"PUT":"POST",d=h(t),e.abrupt("return",this.client.stackClient.fetchJSON(u,"".concat(d,"/").concat(r).concat(s)));case 12:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"uninstallApp",value:(t=(0,i.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slug,r=h(t),e.abrupt("return",this.client.stackClient.fetchJSON("DELETE","".concat(r,"/").concat(n)));case 3:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"fetchApps",value:(n=(0,i.default)(a.default.mark(function e(t){var n,r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channel,r=t.type,o=new URLSearchParams({limit:void 0===(i=t.limit)?"200":i,versionsChannel:n,latestChannelVersion:n}).toString(),r&&(o+="&filter[type]=".concat(r)),e.next=6,this.client.stackClient.fetchJSON("GET","/registry?".concat(o));case 6:return c=e.sent.data,e.abrupt("return",c);case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"fetchAppsInMaintenance",value:function(){return this.client.stackClient.fetchJSON("GET","/registry/maintenance")}},{key:"fetchApp",value:function(e){return this.client.stackClient.fetchJSON("GET","/registry/".concat(e))}},{key:"fetchAppVersion",value:function(e){if(!e.slug)throw Error("Need to pass a slug to use fetchAppVersion");var t=e.slug,n=e.channel,r=e.version,a=n||r&&"latest"!==r?n:"stable",i="/registry/".concat(t,"/");return a?i+="".concat(a,"/").concat(r||"latest"):i+="".concat(r),this.client.stackClient.fetchJSON("GET",i)}}]),r}();t.default=m},46011:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndMergeDocument=t.getCollectionFromSlice=t.getDocumentFromSlice=t.default=t.mergeDocumentsWithRelationships=void 0;var a=r(n(64512)),i=r(n(24350)),o=r(n(27361)),c=r(n(18446)),s=r(n(57557)),u=r(n(82492)),l=r(n(81602)),d=n(77621),f=n(87549),p=n(2868),h=n(51149);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=function(e,t){var n=t._type;if(!n)throw Error("Document without _type");if(!(0,h.properId)(t))throw Error("Document without id");var r=(0,o.default)(e,[n,(0,h.properId)(t)]);return(0,c.default)(r,t)?e:v(v({},e),{},(0,a.default)({},n,v(v({},e[n]),{},(0,a.default)({},(0,h.properId)(t),b(r,t)))))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=v(v({},e),t);return(e.relationships||t.relationships)&&(n.relationships=v(v({},e.relationships),t.relationships)),n};t.mergeDocumentsWithRelationships=b,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!(0,d.isReceivingData)(t)&&!(0,p.isReceivingMutationResult)(t))return e;if(t&&t.definition&&t.definition.mutationType===f.MutationTypes.DELETE_DOCUMENT){var n=t.definition.document._id,r=t.definition.document._type;return v(v({},e),{},(0,a.default)({},r,(0,s.default)(e[r],n)))}var i=t.response,o=i.data,c=i.included;if(!o||Array.isArray(o)&&0===o.length)return e;var u=c?c.reduce(y,e):e;return Array.isArray(o)?g(o,u):y(u,o)},t.getDocumentFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!t)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");if(!n)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined id");return e[t]&&e[t][n]?e[t][n]:null},t.getCollectionFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)throw Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");return e[t]?Object.values(e[t]):null};var g=function(e,t){var n=e[0]._type;if(!n)throw l.default.info("Document without _type",e[0]),Error("Document without _type");var r=(0,i.default)(e,h.properId),a=Object.assign({},t);return a[n]=Object.assign({},t[n]),Object.values(r).map(function(e){var t=(0,h.properId)(e);a[n][t]?a[n][t]=(0,u.default)({},a[n][t],e):a[n][t]=e}),a};t.extractAndMergeDocument=g},51149:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.properId=void 0,t.properId=function(e){return e.id||e._id}},72662:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"initQuery",{enumerable:!0,get:function(){return f.initQuery}}),Object.defineProperty(t,"loadQuery",{enumerable:!0,get:function(){return f.loadQuery}}),Object.defineProperty(t,"resetQuery",{enumerable:!0,get:function(){return f.resetQuery}}),Object.defineProperty(t,"receiveQueryResult",{enumerable:!0,get:function(){return f.receiveQueryResult}}),Object.defineProperty(t,"receiveQueryError",{enumerable:!0,get:function(){return f.receiveQueryError}}),Object.defineProperty(t,"executeQueryFromState",{enumerable:!0,get:function(){return f.executeQueryFromState}}),Object.defineProperty(t,"initMutation",{enumerable:!0,get:function(){return p.initMutation}}),Object.defineProperty(t,"receiveMutationResult",{enumerable:!0,get:function(){return p.receiveMutationResult}}),Object.defineProperty(t,"receiveMutationError",{enumerable:!0,get:function(){return p.receiveMutationError}}),Object.defineProperty(t,"getStateRoot",{enumerable:!0,get:function(){return h.getStateRoot}}),Object.defineProperty(t,"getCollectionFromState",{enumerable:!0,get:function(){return h.getCollectionFromState}}),Object.defineProperty(t,"getDocumentFromState",{enumerable:!0,get:function(){return h.getDocumentFromState}}),Object.defineProperty(t,"getQueryFromStore",{enumerable:!0,get:function(){return h.getQueryFromStore}}),Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return h.getQueryFromState}}),Object.defineProperty(t,"getRawQueryFromState",{enumerable:!0,get:function(){return h.getRawQueryFromState}}),Object.defineProperty(t,"isQueryExisting",{enumerable:!0,get:function(){return h.isQueryExisting}}),Object.defineProperty(t,"dispatchCreate",{enumerable:!0,get:function(){return m.dispatchCreate}}),Object.defineProperty(t,"dispatchUpdate",{enumerable:!0,get:function(){return m.dispatchUpdate}}),Object.defineProperty(t,"dispatchDelete",{enumerable:!0,get:function(){return m.dispatchDelete}}),t.resetState=t.createStore=t.default=t.StoreProxy=void 0;var i=a(n(64512)),o=a(n(65105)),c=a(n(19723)),s=a(n(71400)),u=n(98116),l=a(n(53894)),d=a(n(46011)),f=r(n(77621)),p=n(2868),h=n(8016),m=n(8752);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b="COZY_CLIENT.RESET_STATE";t.resetState=function(){return{type:b}};var g=function(){function e(t){(0,o.default)(this,e),this.state=t}return(0,c.default)(e,[{key:"readDocument",value:function(e,t){return this.state.documents[e][t]}},{key:"writeDocument",value:function(e){this.setState(function(t){return y(y({},t),{},{documents:y(y({},t.documents),{},(0,i.default)({},e._type,y(y({},t.documents[e._type]),{},(0,i.default)({},e._id,e))))})})}},{key:"setState",value:function(e){this.state=e(this.state)}},{key:"getState",value:function(){return this.state}}]),e}();t.StoreProxy=g;var x={documents:{},queries:{}},w=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,n=arguments.length>1?arguments[1]:void 0,r=e.mark("combinedReducer");if(n.type==b)return e.measure({markName:r,measureName:"".concat(r," reset"),category:"CozyClientStore"}),x;if(!(0,f.isQueryAction)(n)&&!(0,p.isMutationAction)(n))return e.measure({markName:r,measureName:"".concat(r," no query nor mutate action"),category:"CozyClientStore"}),t;if(n.update){var a=new g(t);n.update(a,n.response);var i={documents:a.getState().documents,queries:(0,f.default)(e,a.getState().queries,n,a.getState().documents)};return e.measure({markName:r,measureName:"".concat(r," update action"),category:"CozyClientStore"}),i}var o=(0,d.default)(t.documents,n),c=o!==t.documents,s={documents:o,queries:(0,f.default)(e,t.queries,n,o,c)};return e.measure({markName:r,measureName:"".concat(r," queries"),category:"CozyClientStore"}),s}};t.default=w;var k=(0,s.default)("debug")&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.compose;t.createStore=function(e){return(0,u.createStore)((0,u.combineReducers)({cozy:w(e)}),k((0,u.applyMiddleware)(l.default)))}},2868:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMutationError=t.receiveMutationResult=t.initMutation=t.isReceivingMutationResult=t.isMutationAction=void 0;var a=r(n(64512));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c="INIT_MUTATION",s="RECEIVE_MUTATION_RESULT",u="RECEIVE_MUTATION_ERROR";t.isMutationAction=function(e){return -1!==[c,s,u].indexOf(e.type)},t.isReceivingMutationResult=function(e){return e.type===s},t.initMutation=function(e,t){return{type:c,mutationId:e,definition:t}},t.receiveMutationResult=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return o(o({type:s,mutationId:e,response:t},n),{},{definition:r})},t.receiveMutationError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:u,mutationId:e,error:t,definition:n}}},77621:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.QueryIDGenerator=t.getQueryFromSlice=t.resetQuery=t.receiveQueryError=t.receiveQueryResult=t.loadQuery=t.initQuery=t.default=t.updateData=t.makeSorterFromDefinition=t.executeQueryFromState=t.mergeSelectorAndPartialIndex=t.convert$gtNullSelectors=t.sortAndLimitDocsIds=t.isReceivingData=t.isQueryAction=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(90402)),c=r(n(64512)),s=r(n(98235)),u=r(n(66604)),l=r(n(7739)),d=r(n(91966)),f=r(n(25325)),p=r(n(57043)),h=r(n(68630)),m=r(n(44908)),v=r(n(75472)),y=r(n(47037)),b=r(n(27361)),g=r(n(14328)),x=r(n(71400)),w=n(46011),k=n(2868),O=n(51149),_=n(87549),E=r(n(81602)),S=n(8016);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j="INIT_QUERY",A="LOAD_QUERY",D="RECEIVE_QUERY_RESULT",T="RECEIVE_QUERY_ERROR",M="RESET_QUERY",R=(0,x.default)("debug"),I=function(e){return -1!==[j,A,D,T,M].indexOf(e.type)};t.isQueryAction=I,t.isReceivingData=function(e){return e.type===D};var N={id:null,definition:null,fetchStatus:"pending",isFetching:null,lastFetch:null,lastUpdate:null,lastErrorUpdate:null,lastError:null,hasMore:!1,count:0,fetchedPagesCount:0,data:[],bookmark:null},F=function(e,t,n,r){var a,i=r.count,o=r.fetchedPagesCount,c=(0,s.default)(n);if(e.definition.sort&&t){var u=q(e.definition),l=t[e.definition.doctype];c=u(l?c.map(function(e){return l[e]}).filter(Boolean):[]).map(O.properId)}var d=e.definition.limit;return d&&(a=i<d?o>1?d*(o-1)+i:i:d*o,c=c.slice(0,a)),c};t.sortAndLimitDocsIds=F;var z=function(e,t,n,r){var a=r.count,i=r.fetchedPagesCount,o=(0,m.default)([].concat((0,s.default)(e.data),(0,s.default)(t.data.map(O.properId))));return F(e,n,o,{count:a,fetchedPagesCount:i})},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;switch(n.type){case j:if(t.lastUpdate&&t.id===n.queryId&&t.definition===n.queryDefinition)return t;return P(P({},t),{},{id:n.queryId,definition:n.queryDefinition,options:n.options,fetchStatus:t.lastUpdate?t.fetchStatus:"pending"});case A:if("loading"===t.fetchStatus)return t;if("loaded"===t.fetchStatus&&n.backgroundFetching)return P(P({},t),{},{fetchStatus:"loaded",isFetching:!0});return P(P({},t),{},{fetchStatus:"loading"});case D:var a=e.mark("RECEIVE_QUERY_RESULT"),i=n.response;if(!i.data)return e.measure({markName:a,measureName:"".concat(a," with no data"),category:"CozyClientStore"}),P(P({},t),{},{fetchStatus:"loaded",isFetching:!n.backgroundFetching&&null,lastFetch:Date.now(),lastUpdate:Date.now()});var o=P({fetchStatus:"loaded",isFetching:!n.backgroundFetching&&null,lastFetch:Date.now(),lastUpdate:Date.now()},R&&{execution_stats:i.execution_stats});if(!Array.isArray(i.data))return e.measure({markName:a,measureName:"".concat(a," with object"),category:"CozyClientStore"}),P(P(P({},t),o),{},{hasMore:!1,count:1,data:[(0,O.properId)(i.data)]});var c=i.meta&&i.meta.count?i.meta.count:i.data.length;if(n.backgroundFetching)return e.measure({markName:a,measureName:"".concat(a," with background fetching"),category:"CozyClientStore"}),P(P(P({},t),o),{},{bookmark:i.bookmark||null,hasMore:void 0!==i.next?i.next:t.hasMore,count:c,data:i.data.map(O.properId)});var s=t.fetchedPagesCount+1,u=z(t,i,r,{count:c,fetchedPagesCount:s});return e.measure({markName:a,measureName:"".concat(a," default"),category:"CozyClientStore"}),P(P(P({},t),o),{},{bookmark:i.bookmark||null,hasMore:void 0!==i.next?i.next:t.hasMore,count:c,fetchedPagesCount:s,data:u});case T:return P(P({},t),{},{id:n.queryId,fetchStatus:"failed",isFetching:!n.backgroundFetching&&null,lastError:n.error,lastErrorUpdate:Date.now()});case M:return P(P({},N),{},{id:n.queryId,definition:t.definition,options:t.options});default:return t}},B=function e(t){for(var n={},r=0,a=Object.entries(t);r<a.length;r++){var i=(0,o.default)(a[r],2),c=i[0],s=i[1],u=(0,h.default)(s)?e(s):s;n["$gt"===c&&null===u?"$gtnull":c]=u}return n};t.convert$gtNullSelectors=B;var U=function(e){return P(P({},(0,b.default)(e,"selector")),(0,b.default)(e,"partialFilter"))};t.mergeSelectorAndPartialIndex=U;var H=function(e){if(e.selector||e.partialFilter){var t=U(e);return g.default.use({$gtnull:function(e,t){return!!t}}),(0,g.default)(B(t))}if(e.id){var n={_id:e.id};return(0,g.default)(n)}if(!e.ids)return null;var r={_id:{$in:e.ids}};return(0,g.default)(r)};t.executeQueryFromState=function(e,t){var n=(0,S.getCollectionFromState)(e,t.doctype),r=!!t.id;if(!n)return{data:r?null:[]};var a=n.filter(G(t));return r?{data:a.length>0?a[0]:null}:{data:q(t)(a)}};var G=function(e){var t=e.doctype,n=H(e);return function(e){return e._type===t&&!e._deleted&&(!n||!!n(e))}},W=function(e){return function(t){var n=(0,b.default)(t,e);return(0,y.default)(n)?n.toLowerCase():n}},q=function(e){var t=e.sort;if(!t)return function(e){return e};if(!Array.isArray(e.sort))return E.default.warn("Correct update of queries with a sort that is not an array is not supported. Use an array as argument of QueryDefinition::sort"),function(e){return e};var n=t.map(function(e){return Object.entries(e)[0]}),r=n.map(function(e){return e[0]}).map(W),a=n.map(function(e){return e[1]});return function(e){return(0,v.default)(e,r,a)}};t.makeSorterFromDefinition=q;var V=function(e,t,n){var r=G(e.definition),a=(0,u.default)((0,l.default)(t,r),function(e){return e.map(O.properId)}),i=a.true,o=void 0===i?[]:i,c=a.false,s=e.data,h=e.options&&e.options.autoUpdate,m=!h||!1!==h.remove,v=!h||!1!==h.add,y=!h||!1!==h.update,b=m?(0,f.default)(s,void 0===c?[]:c):[],g=v?(0,d.default)(o,s):[],x=y?(0,f.default)(s,o):[],w=b.length||g.length||x.length,k=(0,d.default)((0,p.default)(s,g),b),_=e.fetchedPagesCount,E=F(e,n,k,{count:k.length,fetchedPagesCount:_});return P(P({},e),{},{data:E,count:E.length,fetchedPagesCount:_,lastUpdate:w?Date.now():e.lastUpdate})};t.updateData=V;var Q=function(e,t){return function(n){var r=(0,b.default)(e,"response.data")||(0,b.default)(e,"definition.document");return r&&(Array.isArray(r)||(r=[r]),r.length&&n.definition.doctype===r[0]._type)?V(n,r,t):n}};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=!(arguments.length>4)||void 0===arguments[4]||arguments[4];if(n.type==j){var i=L(e,t[n.queryId],n,r);return i===t[n.queryId]?t:P(P({},t),{},(0,c.default)({},n.queryId,i))}if(I(n)){var o=Q(n,r);return(0,u.default)(t,function(t){return t.id==n.queryId?L(e,t,n,r):a?o(t):t})}if((0,k.isReceivingMutationResult)(n)){var s=n.updateQueries?function(e){var t=n.updateQueries,a=n.response,i=t[e.id];if(!i)return e;var o=i(Z(r,e.definition.doctype,e.data),a).map(O.properId);return P(P({},e),{},{data:o,count:o.length,lastUpdate:Date.now()})}:Q(n,r);return(0,u.default)(t,s)}return t},t.initQuery=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t.doctype)throw Error("Cannot init query with no doctype");return{type:j,queryId:e,queryDefinition:t,options:n}},t.loadQuery=function(e,t){return P({type:A,queryId:e},t)},t.receiveQueryResult=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P({type:D,queryId:e,response:t},n)},t.receiveQueryError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P({type:T,queryId:e,error:t},n)},t.resetQuery=function(e){return{type:M,queryId:e}};var Z=function(e,t,n){return n.map(function(n){return(0,w.getDocumentFromSlice)(e,t,n)})};t.getQueryFromSlice=function(e,t,n){if(!e||!e[t])return P(P({},N),{},{id:t,data:null});var r=e[t];return n?P(P({},r),{},{data:Z(n,r.definition.doctype,r.data)}):r};var Y=function(){function e(){(0,a.default)(this,e),this.idCounter=1}return(0,i.default)(e,[{key:"generateRandomId",value:function(){var e=this.idCounter;return this.idCounter++,e.toString()}},{key:"generateId",value:function(e){if(!(0,_.isAGetByIdQuery)(e))return this.generateRandomId();var t=e.id,n=e.doctype;return"".concat(n,"/").concat(t)}}]),e}();t.QueryIDGenerator=Y,Y.UNNAMED="unnamed"},8752:function(e,t,n){"use strict";var r,a,i,o,c=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchDelete=t.dispatchUpdate=t.dispatchCreate=void 0;var s=c(n(68434)),u=c(n(82007)),l=c(n(64512)),d=n(87549),f=n(2868);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,l.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e,t){return h({id:e._id,_type:t},e)},v=(r=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof n.enhanceDocFn){e.next=4;break}return e.next=3,n.enhanceDocFn(t,{client:n.client});case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),y=function(e,t,n){e.dispatch((0,f.receiveMutationResult)(e.generateRandomId(),{data:t},{},n(t)))},b=(a=(0,u.default)(s.default.mark(function e(t,n,r){var a,i,o=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=m(r,n),e.next=4,v(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.createDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return a.apply(this,arguments)});t.dispatchCreate=b;var g=(i=(0,u.default)(s.default.mark(function e(t,n,r){var a,i,o=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=m(r,n),e.next=4,v(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.updateDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)});t.dispatchUpdate=g;var x=(o=(0,u.default)(s.default.mark(function e(t,n,r){var a,i,o=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},i=m(h(h({},r),{},{_deleted:!0}),n),e.next=4,v(i,{client:t,enhanceDocFn:null==a?void 0:a.enhanceDocFn});case 4:y(t,e.sent,d.Mutations.deleteDocument);case 6:case"end":return e.stop()}},e)})),function(e,t,n){return o.apply(this,arguments)});t.dispatchDelete=x},8016:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryExisting=t.getRawQueryFromState=t.getQueryFromState=t.getQueryFromStore=t.getDocumentFromState=t.getCollectionFromState=t.getStateRoot=void 0;var r=n(46011),a=n(77621),i=function(e){return e.cozy||{}};t.getStateRoot=i,t.getCollectionFromState=function(e,t){return(0,r.getCollectionFromSlice)(i(e).documents,t)},t.getDocumentFromState=function(e,t,n){return(0,r.getDocumentFromSlice)(i(e).documents,t,n)},t.getQueryFromStore=function(e,t){return o(e.getState(),t)};var o=function(e,t){return(0,a.getQueryFromSlice)(i(e).queries,t,i(e).documents)};t.getQueryFromState=o,t.getRawQueryFromState=function(e,t){return(0,a.getQueryFromSlice)(i(e).queries,t)},t.isQueryExisting=function(e,t){return void 0!==i(e).queries[t]}},2663:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(64512)),o=r(n(80295)),c=r(n(82007));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l="io.cozy.terms";function d(){return(d=(0,c.default)(a.default.mark(function e(t,n){var r,i,c,s,d,f;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,i=(0,o.default)(n,["id"]),e.next=3,t.query({doctype:l,selector:{termsId:r,version:i.version},limit:1});case 3:if(!((c=e.sent.data)&&c.length)){e.next=13;break}if((s=c[0]).termsId!=r||s.version!=i.version||s.url==i.url){e.next=11;break}return d=u(u({_type:l},s),{},{url:i.url}),e.next=11,t.save(d);case 11:e.next=16;break;case 13:return f=u(u({_type:l},i),{},{termsId:r,accepted:!0,acceptedAt:new Date}),e.next=16,t.save(f);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.default={save:function(e,t){return d.apply(this,arguments)}}},27146:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.CozyClient=void 0;var a=r(n(25665)),i=r(n(27952)),o=r(n(12323)),c=r(n(65105)),s=function(e){(0,a.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,o.default)(r);return e=t?Reflect.construct(n,arguments,(0,o.default)(this).constructor):n.apply(this,arguments),(0,i.default)(this,e)});function r(){return(0,c.default)(this,r),n.apply(this,arguments)}return r}(function e(t){(0,c.default)(this,e),Object.assign(this,t)});t.CozyClient=s},32420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(87549),t.default={}},64374:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeOfflineError=t.hasQueriesBeenLoaded=t.isQueriesLoading=t.hasQueryBeenLoaded=t.isQueryLoading=t.cancelable=void 0;var a=r(n(81602));t.cancelable=function(e){var t,n=new Promise(function(n,r){t=r,e.then(n),e.catch(r)});return n.cancel=function(){t({canceled:!0})},n};var i=function(e){return e?"loading"===e.fetchStatus||"pending"===e.fetchStatus:(a.default.warn("isQueryLoading called on falsy value."),!1)};t.isQueryLoading=i;var o=function(e){return e.lastFetch};t.hasQueryBeenLoaded=o,t.isQueriesLoading=function(e){return Object.values(e).some(function(e){return i(e)})},t.hasQueriesBeenLoaded=function(e){return Object.values(e).some(function(e){return o(e)})},t.isReactNativeOfflineError=function(e){return"Network request failed"===e.message}},96310:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(95297)),o=a(n(65105)),c=a(n(19723)),s=a(n(8997)),u=a(n(25665)),l=a(n(27952)),d=a(n(12323)),f=a(n(64512)),p=r(n(67294)),h=a(n(45697));t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.displayName||n.name||"Component",a=function(a){(0,u.default)(v,a);var h,m=(h=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,d.default)(v);return e=h?Reflect.construct(t,arguments,(0,d.default)(this).constructor):t.apply(this,arguments),(0,l.default)(this,e)});function v(n,a){var i;if((0,o.default)(this,v),i=m.call(this,n,a),(0,f.default)((0,s.default)(i),"mutate",function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return i.client.mutate(e.apply(null,r),t)}),i.client=n.client||a.client,!i.client)throw Error('Could not find "client" in either the context or props of '.concat(r));return i}return(0,c.default)(v,[{key:"render",value:function(){var e=(0,f.default)({},t.name||"mutate",this.mutate);return p.default.createElement(n,(0,i.default)({},e,this.props))}}]),v}(p.Component);return(0,f.default)(a,"contextTypes",{client:h.default.object}),a.displayName="WithMutation(".concat(r,")"),a}}},84170:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(95297)),o=a(n(65105)),c=a(n(19723)),s=a(n(25665)),u=a(n(27952)),l=a(n(12323)),d=a(n(64512)),f=a(n(98235)),p=a(n(82492)),h=r(n(67294)),m=a(n(45697)),v=a(n(81602));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=e.displayName||e.name||"Component",r=function(r){(0,s.default)(b,r);var a,m=(a=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,l.default)(b);return e=a?Reflect.construct(t,arguments,(0,l.default)(this).constructor):t.apply(this,arguments),(0,u.default)(this,e)});function b(e,r){(0,o.default)(this,b),a=m.call(this,e,r);var a,i=e.client||r.client;if(v.default.warn("Deprecation: withMutations will be removed in the near future, prefer to use withClient to access the client. See https://github.com/cozy/cozy-client/pull/638 for more information."),!i)throw Error('Could not find "client" in either the context or props of '.concat(n));return a.mutations=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({createDocument:i.create.bind(i),saveDocument:i.save.bind(i),deleteDocument:i.destroy.bind(i)},p.default.apply(void 0,(0,f.default)(t.map(function(t){return"function"==typeof t?t(i,e):t})))),a}return(0,c.default)(b,[{key:"render",value:function(){return h.default.createElement(e,(0,i.default)({},this.mutations,this.props))}}]),b}(h.Component);return(0,d.default)(r,"contextTypes",{client:m.default.object}),r.displayName="WithMutations(".concat(n,")"),r}}},59093:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=function(){function e(t){(0,a.default)(this,e);var n=t;"string"==typeof n&&(n=JSON.parse(n)),this.tokenType=n.token_type||n.tokenType,this.accessToken=n.access_token||n.accessToken,this.refreshToken=n.refresh_token||n.refreshToken,this.scope=n.scope}return(0,i.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.accessToken}},{key:"toBasicAuth",value:function(){return"user:".concat(this.accessToken,"@")}},{key:"toJSON",value:function(){return{tokenType:this.tokenType,accessToken:this.accessToken,refreshToken:this.refreshToken,scope:this.scope}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"getAccessToken",value:function(){return this.accessToken}}]),e}();t.default=o},83964:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeApp=t.APPS_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(25665)),u=r(n(27952)),l=r(n(12323)),d=r(n(64512)),f=r(n(27361)),p=n(74165),h=r(n(93868)),m=r(n(87386)),v=n(63818);n(86701);var y=r(n(25790));function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w="io.cozy.apps";t.APPS_DOCTYPE=w;var k=function(e,t){return x(x({},(0,v.normalizeDoctypeJsonApi)(t)(e)),{},{id:e.id})};t.normalizeApp=k;var O=function(e){(0,s.default)(x,e);var t,n,r,d,m,v,g=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.default)(x);return e=t?Reflect.construct(n,arguments,(0,l.default)(this).constructor):n.apply(this,arguments),(0,u.default)(this,e)});function x(e){var t;return(0,o.default)(this,x),(t=g.call(this,w,e)).endpoint="/apps/",t}return(0,c.default)(x,[{key:"get",value:(n=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c,s,u,l,d,m=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.indexOf("/")>-1?r=t.split("/")[1]:(y.default.warn("Deprecated: in next versions of cozy-client, it will not be possible to query apps/konnectors only with id, please use the form ".concat(this.doctype,"/").concat(t,"\n\n- Q('io.cozy.apps').getById('banks')\n+ Q('io.cozy.apps').getById('io.cozy.apps/banks')")),r=t),!(n&&n.sources&&(!Array.isArray(n.sources)||0===n.sources.length))){e.next=3;break}throw Error('Invalid "sources" attribute passed in query, please use an array with at least one element.');case 3:i=(0,f.default)(n,"sources",["stack"]),o={stack:function(){return h.default.get(m.stackClient,"".concat(m.endpoint).concat(encodeURIComponent(r)),{normalize:function(e){return k(e,m.doctype)}})},registry:function(){return m.stackClient.fetchJSON("GET",p.registryEndpoint+r)}},c=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(i),e.prev=6,c.s();case 8:if((s=c.n()).done){e.next=27;break}return u=s.value,e.prev=10,e.next=13,o[u]();case 13:if(l=e.sent,"registry"===u){e.next=16;break}return e.abrupt("return",l);case 16:return y.default.warn("The use of source registry is deprecated since it can polute the io.cozy.apps slice. For exemple, if we request data from the registry, than the app will be present in the io.cozy.apps slice and then the isInstalled() will return true.\n\n            Use Q('io.cozy.apps_registry) instead"),d=(0,p.transformRegistryFormatToStackFormat)(l),e.abrupt("return",{data:k(d,this.doctype)});case 21:if(e.prev=21,e.t0=e.catch(10),u!==i[i.length-1]){e.next=25;break}throw e.t0;case 25:e.next=8;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(6),c.e(e.t1);case 32:return e.prev=32,c.f(),e.finish(32);case 35:case"end":return e.stop()}},e,this,[[6,29,32,35],[10,21]])})),function(e,t){return n.apply(this,arguments)})},{key:"all",value:(r=(0,i.default)(a.default.mark(function e(){var t,n=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",this.endpoint);case 2:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return k(e,n.doctype)}),meta:{count:t.meta.count},skip:0,next:!1});case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"create",value:(d=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return d.apply(this,arguments)})},{key:"update",value:(m=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("update() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return m.apply(this,arguments)})},{key:"destroy",value:(v=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return v.apply(this,arguments)})}]),x}(m.default);O.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=O},83223:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=function(){function e(t){(0,a.default)(this,e),this.token=t||""}return(0,i.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.token}},{key:"toBasicAuth",value:function(){return"user:".concat(this.token,"@")}},{key:"getAccessToken",value:function(){return this.token}}]),e}();t.default=o},75266:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeAppFromRegistry=t.APPS_REGISTRY_DOCTYPE=void 0;var i=a(n(65105)),o=a(n(19723)),c=a(n(25665)),s=a(n(27952)),u=a(n(12323)),l=a(n(68434)),d=a(n(82007)),f=a(n(64512)),p=a(n(87386)),h=n(63818);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y="io.cozy.apps_registry";t.APPS_REGISTRY_DOCTYPE=y;var b=function(e,t){var n,r="".concat("webapp"===e.type?"io.cozy.apps":"io.cozy.konnectors","/").concat(e.slug),a=v(v({},e.attributes),null===(n=e.latest_version)||void 0===n?void 0:n.manifest);return v({},(0,h.normalizeDoc)(v(v({},e),{},{attributes:a,id:r,_id:r}),t))};t.normalizeAppFromRegistry=b;var g=(r=(0,d.default)(l.default.mark(function e(t,n,r){var a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetchJSON("GET","/registry?versionsChannel=".concat(t,"&filter[type]=konnector&limit=500"));case 2:return a=e.sent,e.abrupt("return",{data:a.data.map(function(e){return b(e,n)})});case 4:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)}),x=function(e){(0,c.default)(p,e);var t,n,r,a,f=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(p);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function p(e){var t;return(0,i.default)(this,p),(t=f.call(this,y,e)).endpoint="/registry/",t}return(0,o.default)(p,[{key:"get",value:(n=(0,d.default)(l.default.mark(function e(t){var n,r,a=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.startsWith("konnectors/")){e.next=3;break}return n=t.split("/")[1],e.abrupt("return",g(n,this.doctype,this.stackClient));case 3:return e.next=5,this.stackClient.fetchJSON("GET","".concat(this.endpoint).concat(t));case 5:if(r=e.sent,"maintenance"!==t){e.next=8;break}return e.abrupt("return",{data:r.map(function(e){return b(e,a.doctype)})});case 8:return e.abrupt("return",{data:b(r,this.doctype)});case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"create",value:(r=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for AppsRegistryCollection");case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for AppsRegistryCollection");case 1:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})}]),p}(p.default);t.default=x},93868:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Collection=t.isDocumentUpdateConflict=t.isTimeoutError=t.isNoUsableIndexError=t.isIndexNotUsedWarning=t.isIndexConflictError=t.isIndexNotFoundError=t.dontThrowNotFoundError=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723));n(36369);var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.message.match(/not_found/))return Array.isArray(t)?{data:t,meta:{count:0},skip:0,next:!1}:{data:t};throw e};t.dontThrowNotFoundError=s,t.isIndexNotFoundError=function(e){return e.message.match(/no_index/)},t.isIndexConflictError=function(e){return e.message.match(/error_saving_ddoc/)},t.isIndexNotUsedWarning=function(e){return e.match(/was not used because it does not contain a valid index for this query/)},t.isNoUsableIndexError=function(e){return e.message.match(/no_usable_index/)},t.isTimeoutError=function(e){return e.message.match(/context deadline exceeded/)},t.isDocumentUpdateConflict=function(e){return e.message.match(/Document update conflict/)};var u=function(){var e;function t(){(0,o.default)(this,t)}return(0,c.default)(t,null,[{key:"get",value:(e=(0,i.default)(a.default.mark(function e(t,n,r){var i,o,c,u,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(i=r.normalize)?function(e,t){return e}:i,u=void 0===(c=r.method)?"GET":c,e.prev=1,e.next=4,t.fetchJSON(u,n);case 4:return l=e.sent,e.abrupt("return",{data:o(l.data,l)});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",s(e.t0,null));case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(t,n,r){return e.apply(this,arguments)})}]),t}();t.Collection=u,t.default=u},66829:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CONTACTS_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(59655)),u=r(n(25665)),l=r(n(27952)),d=r(n(12323)),f=r(n(64512)),p=r(n(87386)),h=n(63818);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(32420);var y="io.cozy.contacts";t.CONTACTS_DOCTYPE=y;var b=(0,h.normalizeDoctypeJsonApi)(y),g=function(e){var t;return v(v({},b(e)),{},{_rev:null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.rev})},x=function(e){(0,u.default)(h,e);var t,n,r,f,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(h);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function h(){return(0,o.default)(this,h),p.apply(this,arguments)}return(0,c.default)(h,[{key:"find",value:(n=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||1!==Object.values(t).length||!0!=t.me){e.next=4;break}return e.abrupt("return",this.findMyself());case 4:return e.abrupt("return",(0,s.default)((0,d.default)(h.prototype),"find",this).call(this,t,n));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"findMyself",value:(r=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/contacts/myself");case 2:return t={data:[g(e.sent.data)],next:!1,meta:null,bookmark:!1},e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:(f=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys((null==t?void 0:null===(n=t.cozyMetadata)||void 0===n?void 0:n.sync)||{}).length>0)){e.next=6;break}return e.abrupt("return",(0,s.default)((0,d.default)(h.prototype),"update",this).call(this,v(v({},t),{},{trashed:!0})));case 6:return e.abrupt("return",(0,s.default)((0,d.default)(h.prototype),"destroy",this).call(this,t));case 7:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})}]),h}(p.default);t.default=x},17400:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(64512)),s=a(n(65105)),u=a(n(19723)),l=a(n(50361)),d=r(n(83964)),f=a(n(83223));a(n(59093));var p=a(n(87386)),h=a(n(946)),m=r(n(71606)),v=r(n(53381)),y=a(n(22145)),b=a(n(85275)),g=r(n(13041)),x=r(n(81295)),w=r(n(55134)),k=r(n(69688)),O=r(n(91142)),_=r(n(66829)),E=r(n(75266)),S=a(n(5276)),C=a(n(65746)),P=n(1433),j=a(n(37203)),A=r(n(86701)),D=a(n(25790)),T=a(n(6678)),M=n(26774);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=function(e){var t=e;if(null===t)return null;for(;"/"===t[t.length-1];)t=t.slice(0,-1);return t},F=function(){var e,t,n,r;function a(e){(0,s.default)(this,a);var t=I({},e),n=t.token,r=t.uri;this.options=t,this.setUri(void 0===r?"":r),this.setToken(n),this.konnectors=new v.default(this),this.jobs=new m.default(this),this._promiseCache=new T.default}return(0,u.default)(a,[{key:"isRevocationError",value:function(e){return null!=e&&!!e.message&&(!!(A.default.CLIENT_NOT_FOUND.test(e.message)||A.default.UNREGISTERED_CLIENT.test(e.message))||void 0)}},{key:"collection",value:function(e){if(!e)throw Error("CozyStackClient.collection() called without a doctype");switch(e){case d.APPS_DOCTYPE:return new d.default(this);case v.KONNECTORS_DOCTYPE:return new v.default(this);case"io.cozy.files":return new h.default(e,this);case"io.cozy.sharings":return new y.default(e,this);case"io.cozy.permissions":return new b.default(e,this);case _.CONTACTS_DOCTYPE:return new _.default(e,this);case g.TRIGGERS_DOCTYPE:return new g.default(this);case m.JOBS_DOCTYPE:return new m.default(this);case x.SETTINGS_DOCTYPE:return new x.default(this);case w.NOTES_DOCTYPE:return new w.default(this);case k.OAUTH_CLIENTS_DOCTYPE:return new k.default(this);case O.SHORTCUTS_DOCTYPE:return new O.default(this);case E.APPS_REGISTRY_DOCTYPE:return new E.default(this);case M.NEXTCLOUD_FILES_DOCTYPE:return new M.NextcloudFilesCollection(this);default:return new p.default(e,this)}}},{key:"fetch",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=(0,o.default)(i.default.mark(function e(t,n,r){var a,o,c,s,u,l,d=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(o=I({},a=d.length>3&&void 0!==d[3]?d[3]:{})).method=t,c=o.headers=I({},a.headers),"GET"!==t&&"HEAD"!==t&&void 0!==r&&c["Content-Type"]&&(o.body=r),c.Authorization||(c.Authorization=this.getAuthorizationHeader()),o.credentials=o.credentials||"include",s=this.fullpath(n),u=(0,P.shouldXMLHTTPRequestBeUsed)(t,n,o)?P.fetchWithXMLHttpRequest:fetch,e.prev=9,e.next=12,u(s,o);case 12:return(l=e.sent).ok||this.emit("error",new A.FetchError(l,"".concat(l.status," ").concat(l.statusText))),e.abrupt("return",l);case 17:throw e.prev=17,e.t0=e.catch(9),this.isRevocationError(e.t0)&&this.onRevocationChange(!0),e.t0;case 21:case"end":return e.stop()}},e,this,[[9,17]])})),function(t,n,r){return e.apply(this,arguments)}))},{key:"onTokenRefresh",value:function(e){this.options&&this.options.onTokenRefresh&&this.options.onTokenRefresh(e)}},{key:"onRevocationChange",value:function(e){this.options&&this.options.onRevocationChange&&this.options.onRevocationChange(e)}},{key:"refreshToken",value:(t=(0,o.default)(i.default.mark(function e(){var t,n,r,a,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}throw Error("Cannot refresh an empty token");case 2:return t={method:"GET",credentials:"include"},e.next=5,fetch("/?refreshToken",t);case 5:if((n=e.sent).ok){e.next=8;break}throw Error("Couldn't fetch a new token - response "+n.statusCode);case 8:return e.next=10,n.text();case 10:if(!(!(r=e.sent.match(/data-cozy="([^"]+)"/))||r.length<2)){e.next=14;break}throw Error("Couldn't fetch a new token - no data-cozy element found in HTML");case 14:if(a=JSON.parse(r[1].replace(/&#34;/g,'"')).token){e.next=19;break}throw Error("Couldn't fetch a new token - missing in data-cozy attribute");case 19:return o=new f.default(a),this.setToken(o),this.onTokenRefresh(o),D.default.info("Token successfully refreshed"),e.abrupt("return",o);case 24:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"fetchJSON",value:(n=(0,o.default)(i.default.mark(function e(t,n,r){var a,o=this,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:{},e.prev=1,e.next=4,this.fetchJSONWithCurrentToken(t,n,r,a);case 4:case 20:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!(A.default.EXPIRED_TOKEN.test(e.t0.message)||A.default.INVALID_TOKEN.test(e.t0.message)||A.default.INVALID_TOKEN_ALT.test(e.t0.message))){e.next=23;break}return e.prev=10,e.next=13,this._promiseCache.exec(function(){return o.refreshToken()},function(){return"refreshToken"});case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(10),e.t0;case 18:return e.next=20,this.fetchJSONWithCurrentToken(t,n,r,a);case 23:throw e.t0;case 24:case"end":return e.stop()}},e,this,[[1,7],[10,15]])})),function(e,t,r){return n.apply(this,arguments)})},{key:"fetchJSONWithCurrentToken",value:(r=(0,o.default)(i.default.mark(function e(t,n,r){var a,o,c,s,u,d,f,p,h=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:{},(c=(o=(0,l.default)(a)).headers=o.headers||{}).Accept="application/json",s=r,"GET"===t||"HEAD"===t||void 0===s||c["Content-Type"]||(c["Content-Type"]="application/json",s=JSON.stringify(s)),e.next=8,this.fetch(t,n,s,o);case 8:return f=(d=(u=e.sent).headers.get("content-type"))&&d.indexOf("json")>=0,e.next=13,f?u.json():u.text();case 13:if(p=e.sent,!u.ok){e.next=16;break}return e.abrupt("return",p);case 16:throw new A.FetchError(u,p);case 17:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"fullpath",value:function(e){return e.startsWith("http")?e:this.uri+e}},{key:"getAuthorizationHeader",value:function(){return this.token?this.token.toAuthHeader():null}},{key:"setCredentials",value:function(e){return(0,C.default)("CozyStackClient::setCredentials is deprecated, use CozyStackClient::setToken"),this.setToken(e)}},{key:"getCredentials",value:function(){return(0,C.default)("CozyStackClient::getCredentials is deprecated, use CozyStackClient::getAuthorizationHeader"),this.getAuthorizationHeader()}},{key:"setToken",value:function(e){if(e){if(e.toAuthHeader)this.token=e;else if("string"==typeof e)this.token=new f.default(e);else throw D.default.warn("Cozy-Client: Unknown token format",e),Error("Cozy-Client: Unknown token format");this.onRevocationChange(!1)}else this.token=null}},{key:"getAccessToken",value:function(){return this.token&&this.token.getAccessToken()}},{key:"setUri",value:function(e){this.uri=N(e)}},{key:"getIconURL",value:function(e){return(0,S.default)(this,e)}}]),a}();j.default.mixin(F),t.default=F},87386:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(80295)),o=a(n(98235)),c=a(n(64512)),s=a(n(68434)),u=a(n(41)),l=a(n(82007)),d=a(n(65105)),f=a(n(19723)),p=a(n(71400)),h=n(65987),m=a(n(44908)),v=a(n(57557)),y=a(n(91175)),b=a(n(82492)),g=a(n(10240)),x=a(n(80129)),w=n(91303),k=n(63818),O=r(n(93868)),_=r(n(66343));n(86701);var E=a(n(25790));function S(){var e=(0,u.default)(["/data/","/_design/","/copy?rev=",""]);return S=function(){return e},e}function C(){var e=(0,u.default)(["/data/","/_design/","?rev=",""]);return C=function(){return e},e}function P(){var e=(0,u.default)(["/data/","/_design_docs?include_docs=true"]);return P=function(){return e},e}function j(){var e=(0,u.default)(["/data/","/_index"]);return j=function(){return e},e}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(){var e=(0,u.default)(["/data/","/","?rev=",""]);return D=function(){return e},e}function T(){var e=(0,u.default)(["/data/","/",""]);return T=function(){return e},e}function M(){var e=(0,u.default)(["/data/","/",""]);return M=function(){return e},e}function R(){var e=(0,u.default)(["/data/","/_all_docs?include_docs=true"]);return R=function(){return e},e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function F(){var e=(0,u.default)(["/data/","/_find"]);return F=function(){return e},e}function z(){var e=(0,u.default)(["/data/","/",""]);return z=function(){return e},e}var L=function(e){return Object.assign({},(0,v.default)(e,"_type"),{_deleted:!0})},B=function(){var e,t,n,r,a,u,I,B,U,H,G,W,q,V,Q,Z,Y,J,K,$,X,ee;function et(e,t){(0,d.default)(this,et),this.doctype=e,this.stackClient=t,this.indexes={},this.endpoint="/data/".concat(this.doctype,"/")}return(0,f.default)(et,[{key:"all",value:(e=(0,l.default)(s.default.mark(function e(){var t,n,r,a,i,o,c,u,l,d,f,p,m,v,y,b=this,x=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(t=x.length>0&&void 0!==x[0]?x[0]:{}).limit)?100:n,i=void 0===(a=t.skip)?0:a,o=t.bookmark,l=(u=!!(c=t.keys)||null===r)?"_all_docs":"_normal_docs",d=(0,h.uri)(z(),this.doctype,l),f={include_docs:!0,limit:r,skip:i,keys:c,bookmark:o},p=_.buildURL(d,f),e.prev=6,e.next=9,this.stackClient.fetchJSON("GET",p);case 9:m=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 15:return v=u?m.rows.filter(function(e){return e&&null!==e.doc&&!e.error&&!(0,g.default)(e.id,"_design")}).map(function(e){return(0,k.normalizeDoc)(e.doc,b.doctype)}):m.rows.map(function(e){return(0,k.normalizeDoc)(e,b.doctype)}),y=o?m.rows.length>=r:i+m.rows.length<m.total_rows,e.abrupt("return",{data:v,meta:{count:u?v.length:m.total_rows},skip:i,bookmark:m.bookmark,next:y});case 18:case"end":return e.stop()}},e,this,[[6,12]])})),function(){return e.apply(this,arguments)})},{key:"fetchDocumentsWithMango",value:(t=(0,l.default)(s.default.mark(function e(t,n){var r,a=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",this.stackClient.fetchJSON("POST",t,this.toMangoOptions(n,r)));case 2:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"migrateIndex",value:(n=(0,l.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.copyIndex(t,n);case 3:return e.next=5,this.destroyIndex(t);case 5:e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(0),(0,O.isDocumentUpdateConflict)(e.t0)){e.next=11;break}throw e.t0;case 11:return(0,h.sleep)(1e3),e.next=14,this.copyIndex(t,n);case 14:return e.next=16,this.destroyIndex(t);case 16:case"end":return e.stop()}},e,this,[[0,7]])})),function(e,t){return n.apply(this,arguments)})},{key:"handleMissingIndex",value:(r=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.indexedFields,a=n.partialFilter,r||(r=(0,w.getIndexFields)({sort:n.sort,selector:t})),i=(0,w.getIndexNameFromFields)(r,a),e.next=5,this.findExistingIndex(t,n);case 5:if(o=e.sent){e.next=11;break}return e.next=9,this.createIndex(r,{partialFilter:a,indexName:i});case 9:case 14:e.next=17;break;case 11:if(o._id==="_design/".concat(i)){e.next=16;break}return e.next=14,this.migrateIndex(o,i);case 16:throw Error("Index unusable for query, index used: ".concat(i));case 17:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"findWithMango",value:(a=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o,c=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{},e.prev=1,e.next=4,this.fetchDocumentsWithMango(t,n,r);case 4:if(!((o=(a=e.sent).warning||(null===(i=a.meta)||void 0===i?void 0:i.warning))&&r.partialFilter&&(0,O.isIndexNotUsedWarning)(o))){e.next=8;break}throw Error("no_index");case 8:e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(1),!((0,O.isIndexNotFoundError)(e.t0)||(0,O.isNoUsableIndexError)(e.t0)||(0,O.isTimeoutError)(e.t0))){e.next=20;break}return e.next=15,this.handleMissingIndex(n,r);case 15:return e.next=17,this.fetchDocumentsWithMango(t,n,r);case 17:a=e.sent,e.next=21;break;case 20:throw e.t0;case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}},e,this,[[1,10]])})),function(e,t){return a.apply(this,arguments)})},{key:"find",value:(u=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,o,c=this,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=u.length>1&&void 0!==u[1]?u[1]:{}).skip)?0:r,e.prev=2,o=(0,h.uri)(F(),this.doctype),e.next=6,this.findWithMango(o,t,n);case 6:i=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 12:return e.abrupt("return",{data:i.docs.map(function(e){return(0,k.normalizeDoc)(e,c.doctype)}),next:i.next,skip:a,bookmark:i.bookmark,execution_stats:i.execution_stats});case 13:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return u.apply(this,arguments)})},{key:"findAll",value:(I=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,c,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>1&&void 0!==u[1]?u[1]:{},r=!0,a=[],i=n.bookmark||void 0;case 4:if(!r){e.next=13;break}return e.next=7,this.find(t,N(N({},n),{},{bookmark:i}));case 7:c=e.sent,a.push.apply(a,(0,o.default)(c.data)),i=c.bookmark,r=c.next,e.next=4;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e,this)})),function(e){return I.apply(this,arguments)})},{key:"get",value:(B=(0,l.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.default.get(this.stackClient,"".concat(this.endpoint).concat(encodeURIComponent(t)),{normalize:this.constructor.normalizeDoctype(this.doctype)}));case 1:case"end":return e.stop()}},e,this)})),function(e){return B.apply(this,arguments)})},{key:"getAll",value:(U=(0,l.default)(s.default.mark(function e(t){var n,r,a=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("POST",(0,h.uri)(R(),this.doctype),{keys:t});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 9:return r=n.rows.filter(function(e){return e.doc}),e.abrupt("return",{data:r.map(function(e){return(0,k.normalizeDoc)(e.doc,a.doctype)}),meta:{count:r.length}});case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return U.apply(this,arguments)})},{key:"create",value:(H=(0,l.default)(s.default.mark(function e(t){var n,r,a,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,t._type,r=(0,i.default)(t,["_id","_type"]),o=(a=!!n)?"PUT":"POST",c=(0,h.uri)(M(),this.doctype,a?n:""),e.next=6,this.stackClient.fetchJSON(o,c,r);case 6:return u=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(u.data,this.doctype)});case 8:case"end":return e.stop()}},e,this)})),function(e){return H.apply(this,arguments)})},{key:"update",value:(G=(0,l.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PUT",(0,h.uri)(T(),this.doctype,t._id),t);case 2:return n=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(n.data,this.doctype)});case 4:case"end":return e.stop()}},e,this)})),function(e){return G.apply(this,arguments)})},{key:"destroy",value:(W=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,r=t._rev,a=(0,i.default)(t,["_id","_rev"]),e.next=3,this.stackClient.fetchJSON("DELETE",(0,h.uri)(D(),this.doctype,n,r));case 3:return o=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(N(N({},a),{},{_id:n,_rev:o.rev,_deleted:!0}),this.doctype)});case 5:case"end":return e.stop()}},e,this)})),function(e){return W.apply(this,arguments)})},{key:"updateAll",value:(q=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.stackClient,!(!(r=t?t.map(function(e){return(0,v.default)(e,"_type")}):t)||!r.length)){e.next=4;break}return e.abrupt("return",Promise.resolve([]));case 4:return e.prev=4,e.next=7,n.fetchJSON("POST","/data/".concat(this.doctype,"/_bulk_docs"),{docs:r});case 7:return a=e.sent,e.abrupt("return",a);case 11:if(e.prev=11,e.t0=e.catch(4),!(e.t0.reason&&e.t0.reason.reason&&"Database does not exist."===e.t0.reason.reason)){e.next=24;break}return e.next=16,this.create(r[0]);case 16:return i=e.sent,e.next=19,this.updateAll(r.slice(1));case 19:return(o=e.sent).unshift({ok:!0,id:i._id,rev:i._rev}),e.abrupt("return",o);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,this,[[4,11]])})),function(e){return q.apply(this,arguments)})},{key:"destroyAll",value:function(e){return this.updateAll(e.map(L))}},{key:"toMangoOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sort,r=t.indexedFields,a=t.partialFilter,i=t.fields,s=t.skip,u=t.limit,l=t.bookmark;n=(0,w.transformSort)(n),!r&&e&&E.default.warn("Selector fields should be manually indexed to prevent unexpected behaviour"),r=r||(0,w.getIndexFields)({sort:n,selector:e});var d=t.indexId||"_design/".concat((0,w.getIndexNameFromFields)(r,a));if(n){var f=(0,m.default)(n.map(function(e){return(0,y.default)(Object.values(e))}));if(f.length>1)throw Error("Mango sort can only use a single order (asc or desc).");var h,v=f.length>0?(0,y.default)(f):"asc",g=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return A(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(r);try{for(g.s();!(h=g.n()).done;)!function(){var e=h.value;n.find(function(t){return(0,y.default)(Object.keys(t))===e})||n.push((0,c.default)({},e,v))}()}catch(e){g.e(e)}finally{g.f()}}return{selector:a?(0,b.default)(N({},e),a):e,use_index:d,fields:i?[].concat((0,o.default)(i),["_id","_rev"]):void 0,limit:u,skip:void 0===s?0:s,bookmark:t.bookmark||l,sort:n,execution_stats:!!(0,p.default)("debug")||void 0}}},{key:"checkUniquenessOf",value:(V=(0,l.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUniqueIndexId(t);case 2:return r=e.sent,e.next=5,this.find((0,c.default)({},t,n),{indexId:r,fields:["_id"]});case 5:return a=e.sent,e.abrupt("return",0===a.data.length);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return V.apply(this,arguments)})},{key:"getUniqueIndexId",value:function(e){return this.getIndexId([e],{indexName:"".concat(this.doctype,"/").concat(e)})}},{key:"getIndexId",value:(Q=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(r=n.partialFilter)?"":r,o=void 0===(i=n.indexName)?(0,w.getIndexNameFromFields)(t):i,this.indexes[o]){e.next=20;break}return e.prev=2,e.next=5,this.createIndex(t,{partialFilter:a});case 5:c=e.sent,e.next=19;break;case 8:if(e.prev=8,e.t0=e.catch(2),(0,O.isIndexConflictError)(e.t0)){e.next=14;break}throw e.t0;case 14:return e.next=16,(0,h.sleep)(1e3);case 16:return e.next=18,this.createIndex(t,{partialFilter:a});case 18:c=e.sent;case 19:this.indexes[o]=c;case 20:return e.abrupt("return",this.indexes[o].id);case 21:case"end":return e.stop()}},e,this,[[2,8]])})),function(e,t){return Q.apply(this,arguments)})},{key:"createIndex",value:(Z=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,o,c,u,l,d=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=d.length>1&&void 0!==d[1]?d[1]:{}).partialFilter,a=n.indexName,i={index:{fields:t}},a&&(i.ddoc=a),r&&(i.index.partial_filter_selector=r),e.prev=4,e.next=7,this.stackClient.fetchJSON("POST",(0,h.uri)(j(),this.doctype),i);case 7:o=e.sent,e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(4),(0,O.isIndexConflictError)(e.t0)){e.next=16;break}throw e.t0;case 16:return e.abrupt("return");case 17:if(c={id:o.id,fields:t},"exists"!==o.result){e.next=20;break}return e.abrupt("return",c);case 20:return u={},t.forEach(function(e){return u[e]={$gt:null}}),l={indexId:c.id,limit:1,partialFilterFields:r?(0,w.getIndexFields)({partialFilter:r}):null},e.next=25,(0,h.attempt)(this.find(u,l));case 25:if(!e.sent){e.next=27;break}return e.abrupt("return",c);case 27:return e.next=29,(0,h.sleep)(1e3);case 29:return e.next=31,(0,h.attempt)(this.find(u,l));case 31:if(!e.sent){e.next=33;break}return e.abrupt("return",c);case 33:return e.next=35,(0,h.sleep)(500);case 35:return e.abrupt("return",c);case 36:case"end":return e.stop()}},e,this,[[4,10]])})),function(e){return Z.apply(this,arguments)})},{key:"fetchAllMangoIndexes",value:(Y=(0,l.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,h.uri)(P(),this.doctype),e.next=3,this.stackClient.fetchJSON("GET",t);case 3:return n=e.sent,e.abrupt("return",n.rows.filter(function(e){return"query"===e.doc.language}).map(function(e){return(0,w.normalizeDesignDoc)(e)}));case 5:case"end":return e.stop()}},e,this)})),function(){return Y.apply(this,arguments)})},{key:"destroyIndex",value:(J=(0,l.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id.split("/")[1],r=t._rev,a=(0,h.uri)(C(),this.doctype,n,r),e.abrupt("return",this.stackClient.fetchJSON("DELETE",a));case 4:case"end":return e.stop()}},e,this)})),function(e){return J.apply(this,arguments)})},{key:"copyIndex",value:(K=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id.split("/")[1],a=t._rev,i=(0,h.uri)(S(),this.doctype,r,a),o={headers:{Destination:"_design/".concat(n)}},e.abrupt("return",this.stackClient.fetchJSON("POST",i,null,o));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return K.apply(this,arguments)})},{key:"findExistingIndex",value:($=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.sort,a=n.indexedFields,i=n.partialFilter,e.next=3,this.fetchAllMangoIndexes();case 3:if(!((o=e.sent).length<1)){e.next=6;break}return e.abrupt("return",null);case 6:return r=(0,w.transformSort)(r),c=a||(0,w.getIndexFields)({sort:r,selector:t}),u=o.find(function(e){return(0,w.isMatchingIndex)(e,c,i)}),e.abrupt("return",u);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return $.apply(this,arguments)})},{key:"fetchChangesRaw",value:(X=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,o,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.doc_ids&&t.doc_ids.length>0,r="?".concat([x.default.stringify(N(N({},(0,v.default)(t,["doc_ids","includeDocs"])),{},{include_docs:t.includeDocs})),n&&void 0===t.filter?"filter=_doc_ids":void 0].filter(Boolean).join("&")),a=n?"POST":"GET",i="/data/".concat(this.doctype,"/_changes").concat(r),o=n?{doc_ids:t.doc_ids}:void 0,e.next=7,this.stackClient.fetchJSON(a,i,o);case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}},e,this)})),function(e){return X.apply(this,arguments)})},{key:"fetchChanges",value:(ee=(0,l.default)(s.default.mark(function e(){var t,n,r,a,i,o,c=this,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1&&void 0!==u[1]?u[1]:{},r={includeDocs:!0},"object"!=typeof t?(r.since=t,E.default.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({since: "'.concat(t,'"}).'))):Object.keys(t).length>0&&Object.assign(r,t),e.next=6,this.fetchChangesRaw(r);case 6:return i=(a=e.sent).last_seq,o=a.results.map(function(e){return e.doc}).filter(Boolean),n.includeDesign||(o=o.filter(function(e){return 0!==e._id.indexOf("_design")})),n.includeDeleted||(o=o.filter(function(e){return!e._deleted})),e.abrupt("return",{newLastSeq:i,documents:o.map(function(e){return(0,k.normalizeDoc)(e,c.doctype)})});case 12:case"end":return e.stop()}},e,this)})),function(){return ee.apply(this,arguments)})}],[{key:"normalizeDoctype",value:function(e){return(0,k.normalizeDoctypeRawApi)(e)}}]),et}();t.default=B},946:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isDirectory=t.isFile=void 0;var i=a(n(80295)),o=a(n(68434)),c=a(n(41)),s=a(n(82007)),u=a(n(65105)),l=a(n(19723)),d=a(n(8997)),f=a(n(25665)),p=a(n(27952)),h=a(n(12323)),m=a(n(64512)),v=a(n(12109)),y=a(n(18721)),b=a(n(27361)),g=a(n(57557)),x=a(n(78718));n(91303);var w=a(n(87386)),k=n(63818),O=n(65987);n(86701);var _=n(93868),E=n(63972),S=r(n(66343)),C=a(n(25790));function P(){var e=(0,c.default)(["/files/_changes"]);return P=function(){return e},e}function j(){var e=(0,c.default)(["/data/","/","/relationships/not_synchronizing"]);return j=function(){return e},e}function A(){var e=(0,c.default)(["/data/","/","/relationships/not_synchronizing"]);return A=function(){return e},e}function D(){var e=(0,c.default)(["/data/","/","/relationships/not_synchronizing"]);return D=function(){return e},e}function T(){var e=(0,c.default)(["/files/","/versions"]);return T=function(){return e},e}function M(){var e=(0,c.default)(["/files/upload/metadata"]);return M=function(){return e},e}function R(){var e=(0,c.default)(["/files/",""]);return R=function(){return e},e}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function N(){var e=(0,c.default)(["/files/","?Name=","&Type=directory&MetadataID=",""]);return N=function(){return e},e}function F(){var e=(0,c.default)(["/files/metadata?Path=",""]);return F=function(){return e},e}function z(){var e=(0,c.default)(["/files/",""]);return z=function(){return e},e}function L(){var e=(0,c.default)(["/files/downloads?Path=",""]);return L=function(){return e},e}function B(){var e=(0,c.default)(["/files/downloads?VersionId=","&Filename=",""]);return B=function(){return e},e}function U(){var e=(0,c.default)(["/files/downloads?Id=","&Filename=",""]);return U=function(){return e},e}function H(){var e=(0,c.default)(["/files/","?Name=","&Type=file&Executable=","&Encrypted=",""]);return H=function(){return e},e}function G(){var e=(0,c.default)(["/files/","?Name=","&Type=file&Executable=","&Encrypted=","&MetadataID=","&Size=","&SourceAccount=","&SourceAccountIdentifier=",""]);return G=function(){return e},e}function W(){var e=(0,c.default)(["/files/",""]);return W=function(){return e},e}function q(){var e=(0,c.default)(["/files/","/copy"]);return q=function(){return e},e}function V(){var e=(0,c.default)(["/files/trash/",""]);return V=function(){return e},e}function Q(){var e=(0,c.default)(["/files/",""]);return Q=function(){return e},e}function Z(){var e=(0,c.default)(["/data/","/","/relationships/references"]);return Z=function(){return e},e}function Y(){var e=(0,c.default)(["/data/","/","/relationships/references"]);return Y=function(){return e},e}function J(){var e=(0,c.default)(["/files/","/relationships/referenced_by"]);return J=function(){return e},e}function K(){var e=(0,c.default)(["/files/","/relationships/referenced_by"]);return K=function(){return e},e}function $(){var e=(0,c.default)(["/data/","/","/relationships/references"]);return $=function(){return e},e}function X(){var e=(0,c.default)(["/files/_all_docs?include_docs=true"]);return X=function(){return e},e}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,m.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var en="io.cozy.files.root-dir",er=(0,k.normalizeDoctypeJsonApi)("io.cozy.files"),ea=function(e){var t;return et(et({},er(e)),{},{_rev:null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.rev})},ei=function(e){return e?e.map(function(e){return{_type:e.type,_id:e.id}}):[]},eo=function(e){return e&&e.trim()},ec=function(e){var t=eo(e);if("string"!=typeof t||""===t)throw Error("Missing name argument");if("."===e||".."===e)throw Error("Invalid filename: ".concat(e));var n=(0,E.getIllegalCharacters)(t);if(n.length)throw Error("Invalid filename containing illegal character(s): ".concat(n));return t};t.isFile=function(e){var t=e._type,n=e.type;return"io.cozy.files"===t||"directory"===n||"file"===n},t.isDirectory=function(e){return"directory"===e.type};var es=function(e,t){return new Promise(function(n){e.forEach(function(e){return e.then(function(e){t(e)&&n(!0)})}),Promise.all(e).then(function(){return n(!1)})})},eu=function(e){var t=e.lastIndexOf("/");return e.substring(0,t)},el=function(e){(0,f.default)(ez,e);var t,n,r,a,c,w,k,E,ee,er,el,ed,ef,ep,eh,em,ev,ey,eb,eg,ex,ew,ek,eO,e_,eE,eS,eC,eP,ej,eA,eD,eT,eM,eR,eI,eN,eF=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,h.default)(ez);return e=t?Reflect.construct(n,arguments,(0,h.default)(this).constructor):n.apply(this,arguments),(0,p.default)(this,e)});function ez(e,t){var n;return(0,u.default)(this,ez),n=eF.call(this,e,t),(0,m.default)((0,d.default)(n),"extractResponseLinkRelated",function(e){var t=e.links&&e.links.related;if(!t)throw Error("No related link in server response");return n.stackClient.fullpath(t)}),(0,m.default)((0,d.default)(n),"forceFileDownload",function(e,t){(0,O.forceDownload)(e,t)}),n.specialDirectories={},n}return(0,l.default)(ez,[{key:"get",value:function(e){return this.statById(e)}},{key:"getAll",value:(n=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("POST",(0,O.uri)(X()),{keys:t});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(0,_.dontThrowNotFoundError)(e.t0));case 9:return e.abrupt("return",{data:n.data.map(function(e){return ea(e)}),meta:{count:n.data.length},execution_stats:n.execution_stats});case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return n.apply(this,arguments)})},{key:"fetchFindFiles",value:(r=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetchJSON("POST","/files/_find",this.toMangoOptions(t,n)));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"find",value:(a=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=l.length>1&&void 0!==l[1]?l[1]:{}).skip)?0:r,e.prev=2,c="/files/_find",e.next=6,this.findWithMango(c,t,n);case 6:i=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,_.dontThrowNotFoundError)(e.t0));case 12:return s=(0,b.default)(i,"links.next",""),u=new URL("".concat(this.stackClient.uri).concat(s)).searchParams.get("page[cursor]"),e.abrupt("return",{data:i.data.map(function(e){return ea(e)}),meta:i.meta,next:i.meta.count>a+i.data.length,skip:a,bookmark:u||void 0,execution_stats:i.meta.execution_stats});case 16:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return a.apply(this,arguments)})},{key:"findReferencedBy",value:(c=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=l.length>1&&void 0!==l[1]?l[1]:{}).skip)?0:r,i={include:"files","page[limit]":n.limit,"page[cursor]":n.cursor,sort:"datetime"},c=(0,O.uri)($(),t._type,t._id),s=S.buildURL(c,i),e.next=6,this.stackClient.fetchJSON("GET",s);case 6:return u=e.sent,e.abrupt("return",{data:ei(u.data),included:u.included?u.included.map(function(e){return ea(e)}):[],next:(0,y.default)(u,"links.next"),meta:u.meta,skip:a});case 8:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"addReferencedBy",value:(w=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:e._type}}),e.next=3,this.stackClient.fetchJSON("POST",(0,O.uri)(K(),t._id),{data:r});case 3:return a=e.sent,e.abrupt("return",{data:ei(a.data),meta:a.meta});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return w.apply(this,arguments)})},{key:"removeReferencedBy",value:(k=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id||e.id,type:e._type||e.type}}),e.next=3,this.stackClient.fetchJSON("DELETE",(0,O.uri)(J(),t._id||t.id),{data:r});case 3:return a=e.sent,e.abrupt("return",{data:ei(a.data),meta:a.meta});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return k.apply(this,arguments)})},{key:"addReferencesTo",value:(E=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:"io.cozy.files"}}),e.abrupt("return",this.stackClient.fetchJSON("POST",(0,O.uri)(Y(),t._type,t._id),{data:r}));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return E.apply(this,arguments)})},{key:"removeReferencesTo",value:(ee=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:"io.cozy.files"}}),e.abrupt("return",this.stackClient.fetchJSON("DELETE",(0,O.uri)(Z(),t._type,t._id),{data:r}));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return ee.apply(this,arguments)})},{key:"destroy",value:(er=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(l.length>1&&void 0!==l[1]?l[1]:{}).ifMatch)?"":n,a=t._id,i=t.relationships,c=t.referenced_by,e.next=4,this.stackClient.fetchJSON("DELETE",(0,O.uri)(Q(),a),void 0,{headers:{"If-Match":r}});case 4:if(s=e.sent,!Array.isArray(u=(0,b.default)(i,"referenced_by.data",c))){e.next=9;break}return e.next=9,this.removeReferencedBy(t,u);case 9:return e.abrupt("return",{data:ea(s.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return er.apply(this,arguments)})},{key:"emptyTrash",value:function(){return this.stackClient.fetchJSON("DELETE","/files/trash")}},{key:"restore",value:function(e){return this.stackClient.fetchJSON("POST",(0,O.uri)(V(),e))}},{key:"copy",value:(el=(0,s.default)(o.default.mark(function e(t,n,r){var a,i,c,s,u,l,d,f=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(a=(f.length>3&&void 0!==f[3]?f[3]:{}).sanitizeName)||a,null!=(c=n)&&i&&(c=ec(c)),s={name:c,DirID:r},u=(0,O.uri)(q(),t),l=S.buildURL(u,s),e.next=8,this.stackClient.fetchJSON("POST",l);case 8:return d=e.sent,e.abrupt("return",{data:ea(d.data)});case 10:case"end":return e.stop()}},e,this)})),function(e,t,n){return el.apply(this,arguments)})},{key:"deleteFilePermanently",value:(ed=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PATCH",(0,O.uri)(W(),t),{data:{type:"io.cozy.files",id:t,attributes:{permanent_delete:!0}}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)})),function(e){return ed.apply(this,arguments)})},{key:"upload",value:(ef=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(c.length>2&&void 0!==c[2]?c[2]:{}).sanitizeName)||r,e.next=3,this.ensureDirectoryExists(n,{sanitizeName:a});case 3:return i=e.sent,e.abrupt("return",this.createFile(t,{dirId:i},{sanitizeName:a}));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return ef.apply(this,arguments)})},{key:"create",value:(ep=(0,s.default)(o.default.mark(function e(t){var n,r,a,c,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0===(n=(s.length>1&&void 0!==s[1]?s[1]:{}).sanitizeName)||n,"directory"!==t.type){e.next=5;break}return e.abrupt("return",this.createDirectory(t,{sanitizeName:r}));case 5:return a=t.data,c=(0,i.default)(t,["data"]),e.abrupt("return",this.createFile(a,c,{sanitizeName:r}));case 7:case"end":return e.stop()}},e,this)})),function(e){return ep.apply(this,arguments)})},{key:"update",value:(eh=(0,s.default)(o.default.mark(function e(t){var n,r,a,c,s,u=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0===(n=(u.length>1&&void 0!==u[1]?u[1]:{}).sanitizeName)||n,a=t.data,c=(0,i.default)(t,["data"]),s=t.id||t._id,!a){e.next=8;break}if("directory"!==t.type){e.next=6;break}throw Error("You cannot pass a data object for a directory");case 6:return c.fileId=s,e.abrupt("return",this.updateFile(a,c,{sanitizeName:r}));case 8:return e.abrupt("return",this.updateAttributes(s,t,{sanitizeName:r}));case 9:case"end":return e.stop()}},e,this)})),function(e){return eh.apply(this,arguments)})},{key:"createFile",value:(em=(0,s.default)(o.default.mark(function e(t){var n,r,a,c,s,u,l,d,f,p,h,m,v,y,b,g,x,w,k,_,E=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E.length>1&&void 0!==E[1]?E[1]:{},a=void 0===(r=(E.length>2&&void 0!==E[2]?E[2]:{}).sanitizeName)||r,c=n.name,u=void 0===(s=n.dirId)?"":s,d=void 0!==(l=n.executable)&&l,p=void 0!==(f=n.encrypted)&&f,h=n.metadata,v=void 0===(m=n.sourceAccount)?"":m,b=void 0===(y=n.sourceAccountIdentifier)?"":y,g=(0,i.default)(n,["name","dirId","executable","encrypted","metadata","sourceAccount","sourceAccountIdentifier"]),(x=c)||"string"!=typeof t.name||(x=t.name),a&&(x=ec(x)),w="",!h){e.next=12;break}return e.next=10,this.createFileMetadata(h);case 10:w=e.sent.data.id;case 12:return k="",g.contentLength&&(k=String(g.contentLength)),_=(0,O.uri)(G(),u,x,d,p,w,k,v,b),e.abrupt("return",this.doUpload(t,_,g));case 16:case"end":return e.stop()}},e,this)})),function(e){return em.apply(this,arguments)})},{key:"updateFile",value:(ev=(0,s.default)(o.default.mark(function e(t){var n,r,a,c,s,u,l,d,f,p,h,m,v,y,b,g,x,w=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.length>1&&void 0!==w[1]?w[1]:{},a=void 0===(r=(w.length>2&&void 0!==w[2]?w[2]:{}).sanitizeName)||r,s=void 0!==(c=n.executable)&&c,l=void 0!==(u=n.encrypted)&&u,d=n.fileId,p=void 0===(f=n.name)?"":f,h=n.metadata,m=(0,i.default)(n,["executable","encrypted","fileId","name","metadata"]),!(!d||"string"!=typeof d)){e.next=5;break}throw Error("missing fileId argument");case 5:if(!(!(v=p||t.name)||"string"!=typeof v)){e.next=8;break}throw Error("missing name in data argument");case 8:if(y=a?ec(v):v,g=(0,O.uri)(H(),d,y,s,l),!h){e.next=16;break}return e.next=13,this.createFileMetadata(h);case 13:b=e.sent.data.id,g+="&MetadataID=".concat(b);case 16:return x="",m.contentLength&&(x=String(m.contentLength),g+="&Size=".concat(x)),e.abrupt("return",this.doUpload(t,g,m,"PUT"));case 19:case"end":return e.stop()}},e,this)})),function(e){return ev.apply(this,arguments)})},{key:"getDownloadLinkById",value:function(e,t){return this.stackClient.fetchJSON("POST",(0,O.uri)(U(),e,encodeURIComponent(t))).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByRevision",value:function(e,t){return this.stackClient.fetchJSON("POST",(0,O.uri)(B(),e,encodeURIComponent(t))).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByPath",value:function(e){return this.stackClient.fetchJSON("POST",(0,O.uri)(L(),e)).then(this.extractResponseLinkRelated)}},{key:"download",value:(ey=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:null,i=(c.length>2&&void 0!==c[2]?c[2]:void 0)||t.name,n){e.next=9;break}return e.next=6,this.getDownloadLinkById(t._id,i);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,this.getDownloadLinkByRevision(n,i);case 11:a=e.sent;case 12:this.forceFileDownload("".concat(a,"?Dl=1"),i);case 13:case"end":return e.stop()}},e,this)})),function(e){return ey.apply(this,arguments)})},{key:"fetchFileContent",value:(eb=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.default.warn("FileCollection.fetchFileContent() is deprecated. Use FileCollection.fetchFileContentById() instead"),e.abrupt("return",this.fetchFileContentById(t));case 2:case"end":return e.stop()}},e,this)})),function(e){return eb.apply(this,arguments)})},{key:"fetchFileContentById",value:(eg=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetch("GET","/files/download/".concat(t)));case 1:case"end":return e.stop()}},e,this)})),function(e){return eg.apply(this,arguments)})},{key:"getBeautifulSize",value:function(e,t){return(0,O.formatBytes)(parseInt(e.size),t)}},{key:"downloadArchive",value:(ex=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(s.length>2&&void 0!==s[2]?s[2]:{}).pages,a=n?(0,O.slugify)(n):"files",e.next=4,this.createArchiveLinkByIds({ids:t,name:a,pages:r});case 4:i=e.sent,c=this.stackClient.fullpath(i),this.forceFileDownload(c,a+".zip");case 7:case"end":return e.stop()}},e,this)})),function(e,t){return ex.apply(this,arguments)})},{key:"getArchiveLinkByIds",value:(ew=(0,s.default)(o.default.mark(function e(t){var n,r,a=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"files",C.default.warn("CozyClient FileCollection getArchiveLinkByIds method is deprecated. Use createArchiveLinkByIds instead"),e.next=4,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:{name:n,ids:t}}});case 4:return r=e.sent,e.abrupt("return",r.links.related);case 6:case"end":return e.stop()}},e,this)})),function(e){return ew.apply(this,arguments)})},{key:"createArchiveLinkByIds",value:(ek=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ids,a=void 0===(r=t.name)?"files":r,i=t.pages,e.next=3,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:et({name:a,ids:n},i&&{pages:i})}});case 3:return c=e.sent,e.abrupt("return",c.links.related);case 5:case"end":return e.stop()}},e,this)})),function(e){return ek.apply(this,arguments)})},{key:"isChildOf",value:(eO=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,s,u,l,d,f,p=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(r="object"==typeof t?t:{_id:t})._id,i=r.dirID,c=r.path,s=("object"==typeof n?n:{_id:n})._id,a!==s&&i!==s){e.next=4;break}return e.abrupt("return",!0);case 4:if(c){e.next=10;break}return e.next=7,this.statById(a);case 7:c=(u=e.sent).data.path,i=u.data.dirID;case 10:for(l=c,d=[c];""!=l;)""!=(f=eu(l))&&d.push(f),l=f;return d.reverse(),e.abrupt("return",es(d.map(function(e){return p.statByPath(e)}),function(e){return e.data._id==s}));case 15:case"end":return e.stop()}},e,this)})),function(e,t){return eO.apply(this,arguments)})},{key:"statById",value:(e_=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=(0,x.default)(n,["page[limit]","page[skip]","page[cursor]"]),a=(0,O.uri)(z(),t),i=S.buildURL(a,r),e.next=6,this.stackClient.fetchJSON("GET",i);case 6:return c=e.sent,e.abrupt("return",{data:ea(c.data),included:c.included&&c.included.map(function(e){return ea(e)}),links:c.links});case 8:case"end":return e.stop()}},e,this)})),function(e){return e_.apply(this,arguments)})},{key:"statByPath",value:(eE=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,O.uri)(F(),t));case 2:return n=e.sent,e.abrupt("return",{data:ea(n.data),included:n.included&&n.included.map(function(e){return ea(e)})});case 4:case"end":return e.stop()}},e,this)})),function(e){return eE.apply(this,arguments)})},{key:"createDirectory",value:(eS=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,c,s,u,l,d,f,p=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:{},r=void 0===(n=(p.length>1&&void 0!==p[1]?p[1]:{}).sanitizeName)||n,a=t.name,i=t.dirId,c=t.lastModifiedDate,s=t.metadata,u="",!s){e.next=9;break}return e.next=7,this.createFileMetadata(s);case 7:u=e.sent.data.id;case 9:return l=r?ec(a):a,d=c&&("string"==typeof c?new Date(c):c),e.next=13,this.stackClient.fetchJSON("POST",(0,O.uri)(N(),i,l,u),void 0,{headers:{Date:d?d.toGMTString():""}});case 13:return f=e.sent,e.abrupt("return",{data:ea(f.data)});case 15:case"end":return e.stop()}},e,this)})),function(){return eS.apply(this,arguments)})},{key:"ensureDirectoryExists",value:(eC=(0,s.default)(o.default.mark(function e(t){var n,r,a,i=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0===(n=(i.length>1&&void 0!==i[1]?i[1]:{}).sanitizeName)||n,this.specialDirectories[t]){e.next=6;break}return e.next=4,this.createDirectoryByPath(t,{sanitizeName:r});case 4:a=e.sent,this.specialDirectories[t]=a.data._id;case 6:return e.abrupt("return",this.specialDirectories[t]);case 7:case"end":return e.stop()}},e,this)})),function(e){return eC.apply(this,arguments)})},{key:"getDirectoryOrCreate",value:(eP=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(r=(l.length>2&&void 0!==l[2]?l[2]:{}).sanitizeName)||r,!(n&&!n.attributes)){e.next=3;break}throw Error("Malformed parent directory");case 3:return i=a?eo(t):t,c="".concat(n._id===en?"":n.attributes.path,"/").concat(i),e.prev=5,e.next=8,this.statByPath(c||"/");case 8:return s=e.sent,e.abrupt("return",s);case 12:if(e.prev=12,e.t0=e.catch(5),!((u=JSON.parse(e.t0.message).errors)&&u.length&&"404"===u[0].status)){e.next=18;break}return e.abrupt("return",this.createDirectory({name:i,dirId:n&&n._id},{sanitizeName:a}));case 18:throw u;case 19:case"end":return e.stop()}},e,this,[[5,12]])})),function(e,t){return eP.apply(this,arguments)})},{key:"createDirectoryByPath",value:(ej=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l,d=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(d.length>1&&void 0!==d[1]?d[1]:{}).sanitizeName)||n,a=t.split("/").filter(function(e){return""!==e}),e.next=4,this.statById(en);case 4:if(i=e.sent,a.length){e.next=7;break}return e.abrupt("return",i);case 7:c=i,s=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return I(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(a),e.prev=9,s.s();case 11:if((u=s.n()).done){e.next=18;break}return l=u.value,e.next=15,this.getDirectoryOrCreate(l,c.data,{sanitizeName:r});case 15:c=e.sent;case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:return e.abrupt("return",c);case 27:case"end":return e.stop()}},e,this,[[9,20,23,26]])})),function(e){return ej.apply(this,arguments)})},{key:"updateAttributes",value:(eA=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(s.length>2&&void 0!==s[2]?s[2]:{}).sanitizeName)||r,i=et({},n),n.name&&a&&(i.name=ec(n.name)),e.next=5,this.stackClient.fetchJSON("PATCH",(0,O.uri)(R(),t),{data:{type:"io.cozy.files",id:t,attributes:i}});case 5:return c=e.sent,e.abrupt("return",{data:ea(c.data)});case 7:case"end":return e.stop()}},e,this)})),function(e,t){return eA.apply(this,arguments)})},{key:"updateFileMetadata",value:(eD=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.default.warn("CozyClient FileCollection updateFileMetadata method is deprecated. Use updateAttributes instead"),e.abrupt("return",this.updateAttributes(t,n));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return eD.apply(this,arguments)})},{key:"createFileMetadata",value:(eT=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,O.uri)(M()),{data:{type:"io.cozy.files.metadata",attributes:t}});case 2:return n=e.sent,e.abrupt("return",{data:n.data});case 4:case"end":return e.stop()}},e,this)})),function(e){return eT.apply(this,arguments)})},{key:"updateMetadataAttribute",value:(eM=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,O.uri)(T(),t),{data:{type:"io.cozy.files.metadata",attributes:n}});case 2:return r=e.sent,e.abrupt("return",{data:r.data});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return eM.apply(this,arguments)})},{key:"getFileTypeFromName",value:function(e){return v.default.getType(e)||"application/octet-stream"}},{key:"doUpload",value:(eR=(0,s.default)(o.default.mark(function e(t,n,r){var a,i,c,s,u,l,d,f,p,h,m,v,y,b,g,x,w,k,O,_=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=_.length>3&&void 0!==_[3]?_[3]:"POST",i=n,c=t){e.next=5;break}throw Error("missing data argument");case 5:if(c.buffer&&c.buffer instanceof ArrayBuffer&&(c=c.buffer),s="undefined"!=typeof ArrayBuffer&&c instanceof ArrayBuffer,u="undefined"!=typeof File&&c instanceof File,l="undefined"!=typeof Blob&&c instanceof Blob,d=!0===c.readable&&"function"==typeof c.pipe,f="string"==typeof c,!(!s&&!u&&!l&&!d&&!f)){e.next=13;break}throw Error("invalid data type");case 13:return h=(p=r||{}).contentType,m=p.contentLength,v=p.checksum,y=p.lastModifiedDate,b=p.ifMatch,h||("string"==typeof c?h="text/plain":c.type?h=c.type:(x=new URLSearchParams((g=i.split("?")).length>1?g[1]:"").get("Name"),h=this.getFileTypeFromName(x.toLowerCase()))),(y=y||c.lastModified)&&(y=new Date(y)),w={"Content-Type":h},m&&(w["Content-Length"]=String(m)),v&&(w["Content-MD5"]=v),y&&(k=y.toISOString(),i="".concat(i,"&UpdatedAt=").concat(k,"&CreatedAt=").concat(k)),b&&(w["If-Match"]=b),e.next=24,this.stackClient.fetchJSON(a,i,c,{headers:w,onUploadProgress:r.onUploadProgress});case 24:return O=e.sent,e.abrupt("return",{data:ea(O.data)});case 26:case"end":return e.stop()}},e,this)})),function(e,t,n){return eR.apply(this,arguments)})},{key:"findNotSynchronizedDirectories",value:(eI=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l,d,f,p=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=p.length>1&&void 0!==p[1]?p[1]:{}).skip)?0:r,i=n.limit,c=n.cursor,u={include:void 0!==(s=n.includeFiles)&&s?"files":void 0,"page[limit]":i,"page[cursor]":c,sort:"id"},l=(0,O.uri)(D(),t._type,t._id),d=S.buildURL(l,u),e.next=6,this.stackClient.fetchJSON("GET",d);case 6:return f=e.sent,e.abrupt("return",{data:f.data.map(function(e){return ea(e)}),included:f.included?f.included.map(function(e){return ea(e)}):[],next:(0,y.default)(f,"links.next"),meta:f.meta,skip:a});case 8:case"end":return e.stop()}},e,this)})),function(e){return eI.apply(this,arguments)})},{key:"addNotSynchronizedDirectories",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("POST",(0,O.uri)(A(),e._type,e._id),{data:n})}},{key:"removeNotSynchronizedDirectories",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("DELETE",(0,O.uri)(j(),e._type,e._id),{data:n})}},{key:"fetchChanges",value:(eN=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,c,s,u,l,d,f=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},n=f.length>1&&void 0!==f[1]?f[1]:{},r={},"object"!=typeof t?(r.since=t,C.default.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({since: "'.concat(t,'"}).'))):Object.keys(t).length>0&&Object.assign(r,t),Object.keys(n).length>0&&(Object.assign(r,n),(n.skipTrashed||n.includeFilePath)&&(r.includeDocs=!0)),a=et(et({},(0,g.default)(r,["fields","includeDocs","includeFilePath","skipDeleted","skipTrashed"])),{},{fields:r.fields?r.fields.join(","):null,include_docs:r.includeDocs,include_file_path:r.includeFilePath,skip_deleted:r.skipDeleted,skip_trashed:r.skipTrashed}),i=(0,O.uri)(P()),c=S.buildURL(i,a),e.next=10,this.stackClient.fetchJSON("GET",c);case 10:return u=(s=e.sent).last_seq,l=s.pending,d=s.results,e.abrupt("return",{newLastSeq:u,pending:l,results:d});case 15:case"end":return e.stop()}},e,this)})),function(){return eN.apply(this,arguments)})}]),ez}(w.default);t.default=el},71606:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.hasJobFinished=t.normalizeJob=t.JOBS_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(41)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=r(n(25665)),l=r(n(27952)),d=r(n(12323)),f=r(n(93868)),p=r(n(87386)),h=n(65987),m=n(63818);function v(){var e=(0,i.default)(["/jobs/",""]);return v=function(){return e},e}var y="io.cozy.jobs";t.JOBS_DOCTYPE=y;var b=function(e){return new Promise(function(t){return setTimeout(t,e)})},g=(0,m.normalizeDoctypeJsonApi)(y);t.normalizeJob=g;var x=function(e){return"done"===e.state||"errored"===e.state};t.hasJobFinished=x;var w=function(e){(0,u.default)(m,e);var t,n,r,i,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(m);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function m(e){return(0,c.default)(this,m),p.call(this,y,e)}return(0,s.default)(m,[{key:"queued",value:function(e){return this.stackClient.fetchJSON("GET","/jobs/queue/".concat(e))}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.stackClient.fetchJSON("POST","/jobs/queue/".concat(e),{data:{type:y,attributes:{arguments:t,options:n,manual:r}}})}},{key:"get",value:(n=(0,o.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.default.get(this.stackClient,(0,h.uri)(v(),t),{normalize:g}));case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"update",value:(r=(0,o.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("client"===t.worker){e.next=2;break}throw Error("JobCollection.update only works for client workers. ".concat(t.worker," given"));case 2:return e.next=4,this.stackClient.fetchJSON("PATCH","/jobs/".concat(t._id),{data:{type:y,id:t._id,attributes:{state:t.attributes.state,error:t.attributes.error}}});case 4:return n=e.sent,e.abrupt("return",g(n.data));case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"waitFor",value:(i=(0,o.default)(a.default.mark(function e(t){var n,r,i,o,c,s,u,l,d,f,p,h,m=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(r=(n=m.length>1&&void 0!==m[1]?m[1]:{}).onUpdate)?null:r,c=void 0===(o=n.until)?x:o,u=void 0===(s=n.delay)?5e3:s,d=void 0===(l=n.timeout)?3e5:l,f=Date.now(),e.next=4,this.get(t);case 4:p=e.sent.data.attributes;case 5:if(!(!p||!c(p))){e.next=17;break}return e.next=8,b(u);case 8:return e.next=10,this.get(t);case 10:if(p=e.sent.data.attributes,i&&i(p),h=Date.now(),!(f-h>d)){e.next=15;break}throw Error("Timeout for JobCollection::waitFor");case 15:e.next=5;break;case 17:return e.abrupt("return",p);case 18:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})}]),m}(p.default);t.default=w},53381:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KONNECTORS_DOCTYPE=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(65105)),s=a(n(19723)),u=a(n(25665)),l=a(n(27952)),d=a(n(12323)),f=a(n(78718)),p=a(n(83964)),h=r(n(13041)),m=n(63818),v="io.cozy.konnectors";t.KONNECTORS_DOCTYPE=v;var y=function(e){(0,u.default)(g,e);var t,n,r,a,p,y,b=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(g);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function g(e){var t;return(0,c.default)(this,g),(t=b.call(this,e)).doctype=v,t.endpoint="/konnectors/",t}return(0,s.default)(g,[{key:"create",value:(n=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for konnectors");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"destroy",value:(r=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for konnectors");case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"findTriggersBySlug",value:(a=(0,o.default)(i.default.mark(function e(t){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h.default(this.stackClient),e.next=3,n.all({limit:null});case 3:return r=e.sent.data,e.abrupt("return",r.map(function(e){return e.attributes}).filter(function(e){return(0,h.isForKonnector)(e,t)}));case 6:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"launch",value:(p=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,s=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=new h.default(this.stackClient),e.next=4,this.findTriggersBySlug(t);case 4:if(a=e.sent,1!==(o=n.accountId?a.filter(function(e){return(0,h.isForAccount)(e,n.accountId)}):a).length){e.next=10;break}return e.abrupt("return",r.launch(a[0]));case 10:if(c=JSON.stringify((0,f.default)({slug:t,accountId:n.accountId})),0!==o.length){e.next=15;break}throw Error("No trigger found for ".concat(c));case 15:if(!(o.length>1)){e.next=17;break}throw Error("More than 1 trigger found for ".concat(c));case 17:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"update",value:(y=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},t){e.next=3;break}throw Error("Cannot call update with no slug");case 3:return r=n.source||null,a=n.sync?{headers:{Accept:"text/event-stream"}}:{},e.next=8,this.stackClient.fetchJSON("PUT","/konnectors/".concat(t)+(r?"?Source=".concat(r):""),a);case 8:return o=e.sent,e.abrupt("return",(0,m.normalizeDoc)(o));case 10:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})}]),g}(p.default);t.default=y},26774:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.NEXTCLOUD_FILES_DOCTYPE=t.NextcloudFilesCollection=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(25665)),u=r(n(27952)),l=r(n(12323)),d=r(n(64512)),f=r(n(87386)),p=n(65987),h=n(86701),m=n(63818);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g="io.cozy.remote.nextcloud.files";t.NEXTCLOUD_FILES_DOCTYPE=g;var x=(0,m.normalizeDoctypeJsonApi)(g),w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fromTrash,a=void 0!==r&&r;return function(n){var r=x(n);return b(b({},r),{},{parentPath:t,path:a?r.path:(0,p.joinPath)(t,r.name),cozyMetadata:b(b({},r.cozyMetadata),{},{sourceAccount:e})})}},k=function(e){(0,s.default)(S,e);var t,n,r,d,f,m,y,b,x,k,O,_,E=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.default)(S);return e=t?Reflect.construct(n,arguments,(0,l.default)(this).constructor):n.apply(this,arguments),(0,u.default)(this,e)});function S(e){return(0,o.default)(this,S),E.call(this,g,e)}return(0,c.default)(S,[{key:"find",value:(n=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t["cozyMetadata.sourceAccount"]&&t.parentPath)){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET","/remote/nextcloud/".concat(t["cozyMetadata.sourceAccount"]).concat((0,p.encodePath)(t.parentPath)));case 3:return n=e.sent,e.abrupt("return",{data:n.data.map(w(t["cozyMetadata.sourceAccount"],t.parentPath,{fromTrash:t.trashed}))});case 5:throw Error("Not implemented");case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"destroy",value:(r=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroyAll",value:(d=(0,i.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return v(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,this.destroy(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})),function(e){return d.apply(this,arguments)})},{key:"download",value:(f=(0,i.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("GET","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path),"?Dl=1"));case 2:return n=e.sent,e.next=5,n.blob();case 5:r=e.sent,i=URL.createObjectURL(r),o=t.path.split("/").pop(),(0,p.forceDownload)(i,o);case 9:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"move",value:(m=(0,i.default)(a.default.mark(function e(t,n){var r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,p.joinPath)(n.path,t.name),e.next=3,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/move").concat((0,p.encodePath)(t.path),"?To=").concat((0,p.encodePath)(r)));case 3:if(204!==(i=e.sent).status){e.next=6;break}return e.abrupt("return",i);case 6:throw new h.FetchError(i,i.json());case 7:case"end":return e.stop()}},e,this)})),function(e,t){return m.apply(this,arguments)})},{key:"moveToCozy",value:(y=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0!==(r=(c.length>2&&void 0!==c[2]?c[2]:{}).copy)&&r,e.next=3,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/downstream").concat((0,p.encodePath)(t.path),"?To=").concat(n._id).concat(i?"&Copy=true":""));case 3:if(201!==(o=e.sent).status){e.next=6;break}return e.abrupt("return",o);case 6:throw new h.FetchError(o,o.json());case 7:case"end":return e.stop()}},e,this)})),function(e,t){return y.apply(this,arguments)})},{key:"moveFromCozy",value:(b=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c,s=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0!==(r=(s.length>2&&void 0!==s[2]?s[2]:{}).copy)&&r,o=(0,p.joinPath)(t.path,n.name),e.next=4,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/upstream").concat((0,p.encodePath)(o),"?From=").concat(n._id).concat(i?"&Copy=true":""));case 4:if(204!==(c=e.sent).status){e.next=7;break}return e.abrupt("return",c);case 7:throw new h.FetchError(c,c.json());case 8:case"end":return e.stop()}},e,this)})),function(e,t){return b.apply(this,arguments)})},{key:"restore",value:(x=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/restore").concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"emptyTrash",value:(k=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t,"/trash"));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"deletePermanently",value:(O=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})},{key:"copy",value:(_=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/copy/").concat(t.path).concat(n?"?Path=".concat(n.path,"/").concat(t.name):""));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return _.apply(this,arguments)})}]),S}(f.default);t.NextcloudFilesCollection=k},55134:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NOTES_URL_DOCTYPE=t.NOTES_DOCTYPE=void 0;var a=r(n(41)),i=r(n(64512)),o=r(n(68434)),c=r(n(82007)),s=r(n(65105)),u=r(n(19723)),l=r(n(25665)),d=r(n(27952)),f=r(n(12323)),p=r(n(87386)),h=n(63818),m=n(65987),v=n(6206);function y(){var e=(0,a.default)(["/notes/","/open"]);return y=function(){return e},e}function b(){var e=(0,a.default)(["/files/",""]);return b=function(){return e},e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w="io.cozy.notes";t.NOTES_DOCTYPE=w;var k="io.cozy.notes.url";t.NOTES_URL_DOCTYPE=k;var O=(0,h.normalizeDoctypeJsonApi)(w),_=(0,h.normalizeDoctypeJsonApi)(k),E=function(e){(0,l.default)(g,e);var t,n,r,a,i,p,h=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(g);return e=t?Reflect.construct(n,arguments,(0,f.default)(this).constructor):n.apply(this,arguments),(0,d.default)(this,e)});function g(e){return(0,s.default)(this,g),h.call(this,w,e)}return(0,u.default)(g,[{key:"get",value:(n=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/notes/".concat(t));case 2:return n=e.sent,e.abrupt("return",{data:O(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"all",value:(r=(0,c.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/notes");case 2:return t=e.sent,e.abrupt("return",x(x({},t),{},{data:t.data.map(O)}));case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("DELETE",(0,m.uri)(b(),n));case 3:return r=e.sent,e.abrupt("return",{data:x(x({},O(r.data)),{},{_deleted:!0})});case 5:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"create",value:(i=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dir_id,e.next=3,this.stackClient.fetchJSON("POST","/notes",{data:{type:"io.cozy.notes.documents",attributes:{title:"",schema:(0,v.getDefaultSchema)(),dir_id:n}}});case 3:return r=e.sent,e.abrupt("return",x(x({},r),{},{data:O(r.data)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"fetchURL",value:(p=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("GET",(0,m.uri)(y(),n));case 3:return r=e.sent,e.abrupt("return",{data:_(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"getDefaultSchema",value:function(){return(0,v.getDefaultSchema)()}}]),g}(p.default);E.normalizeDoctype=h.normalizeDoctypeJsonApi,t.default=E},6206:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultSchema=t.marks=t.nodes=void 0;var n=[["doc",{content:"(block)+",marks:"link"}],["paragraph",{content:"inline*",group:"block",marks:"strong code em link strike subsup textColor typeAheadQuery underline",parseDOM:[{tag:"p"}]}],["text",{group:"inline"}],["bulletList",{group:"block",content:"listItem+",parseDOM:[{tag:"ul"}]}],["orderedList",{group:"block",content:"listItem+",parseDOM:[{tag:"ol"}]}],["listItem",{content:"(paragraph ) (paragraph | bulletList | orderedList )*",defining:!0,parseDOM:[{tag:"li"}]}],["heading",{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}]}],["blockquote",{content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}]}],["rule",{group:"block",parseDOM:[{tag:"hr"}]}],["panel",{group:"block",content:"(paragraph | heading | bulletList | orderedList)+",attrs:{panelType:{default:"info"}},parseDOM:[{tag:"div[data-panel-type]"}]}],["confluenceUnsupportedBlock",{group:"block",attrs:{cxhtml:{default:null}},parseDOM:[{tag:'div[data-node-type="confluenceUnsupportedBlock"]'}]}],["confluenceUnsupportedInline",{group:"inline",inline:!0,atom:!0,attrs:{cxhtml:{default:null}},parseDOM:[{tag:'div[data-node-type="confluenceUnsupportedInline"]'}]}],["unsupportedBlock",{inline:!1,group:"block",atom:!0,selectable:!0,attrs:{originalValue:{default:{}}},parseDOM:[{tag:'[data-node-type="unsupportedBlock"]'}]}],["unsupportedInline",{inline:!0,group:"inline",selectable:!0,attrs:{originalValue:{default:{}}},parseDOM:[{tag:'[data-node-type="unsupportedInline"]'}]}],["hardBreak",{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}]}],["table",{content:"tableRow+",attrs:{isNumberColumnEnabled:{default:!1},layout:{default:"default"},__autoSize:{default:!1}},tableRole:"table",isolating:!0,selectable:!1,group:"block",parseDOM:[{tag:"table"}]}],["tableHeader",{content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading )+",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:"header_cell",isolating:!0,marks:"",parseDOM:[{tag:"th"}]}],["tableRow",{content:"(tableCell | tableHeader)+",tableRole:"row",parseDOM:[{tag:"tr"}]}],["tableCell",{content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | unsupportedBlock)+",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:"cell",marks:"",isolating:!0,parseDOM:[{tag:".ak-renderer-table-number-column",ignore:!0},{tag:"td"}]}]];t.nodes=n;var r=[["link",{excludes:"color",group:"link",attrs:{href:{},__confluenceMetadata:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]"}]}],["em",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}]}],["strong",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strong"},{tag:"b"},{style:"font-weight"}]}],["textColor",{attrs:{color:{}},inclusive:!0,group:"color",parseDOM:[{style:"color"}]}],["strike",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strike"},{tag:"s"},{tag:"del"},{style:"text-decoration"}]}],["subsup",{inclusive:!0,group:"fontStyle",attrs:{type:{default:"sub"}},parseDOM:[{tag:"sub",attrs:{type:"sub"}},{tag:"sup",attrs:{type:"sup"}}]}],["underline",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"u"},{style:"text-decoration"}]}],["code",{excludes:"fontStyle link searchQuery color",inclusive:!0,parseDOM:[{tag:"span.code",preserveWhitespace:!0},{tag:"code",preserveWhitespace:!0},{tag:"tt",preserveWhitespace:!0},{tag:"span",preserveWhitespace:!0}]}],["typeAheadQuery",{excludes:"searchQuery",inclusive:!0,group:"searchQuery",parseDOM:[{tag:"span[data-type-ahead-query]"}],attrs:{trigger:{default:""}}}]];t.marks=r,t.getDefaultSchema=function(){return{nodes:n,marks:r}}},78238:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(15500)),i=r(n(68434)),o=r(n(82007)),c=r(n(64512)),s=r(n(80295)),u=r(n(65105)),l=r(n(19723)),d=r(n(25665)),f=r(n(27952)),p=r(n(12323)),h=r(n(17400)),m=r(n(59093)),v=r(n(65746)),y=r(n(86701)),b=r(n(25790));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);return n=t?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,n)}}var k={clientID:"",clientName:"",clientKind:"",clientSecret:"",clientURI:"",registrationAccessToken:"",redirectURI:"",softwareID:"",softwareVersion:"",logoURI:"",policyURI:"",notificationPlatform:"",notificationDeviceToken:""},O=function(e){(0,d.default)(C,e);var t,n,r,a,c,f,p,h,g,O,E,S=w(C);function C(e){var t,n=e.oauth,r=e.scope,a=e.onTokenRefresh,i=(0,s.default)(e,["oauth","scope","onTokenRefresh"]);return(0,u.default)(this,C),(t=S.call(this,i)).setOAuthOptions(x(x({},k),n)),n.token&&t.setToken(n.token),t.scope=void 0===r?[]:r,t.onTokenRefresh=a,t}return(0,l.default)(C,[{key:"isRegistered",value:function(){return""!==this.oauthOptions.clientID}},{key:"snakeCaseOAuthData",value:function(e){var t={softwareID:"software_id",softwareVersion:"software_version",clientID:"client_id",clientName:"client_name",clientKind:"client_kind",clientURI:"client_uri",logoURI:"logo_uri",policyURI:"policy_uri",notificationPlatform:"notification_platform",notificationDeviceToken:"notification_device_token",redirectURI:"redirect_uris"},n={};return Object.keys(e).forEach(function(r){var a=t[r]||r,i=e[r];n[a]=i}),n.redirect_uris&&n.redirect_uris instanceof Array==!1&&(n.redirect_uris=[n.redirect_uris]),n}},{key:"camelCaseOAuthData",value:function(e){var t={client_id:"clientID",client_name:"clientName",client_secret:"clientSecret",registration_access_token:"registrationAccessToken",software_id:"softwareID",redirect_uris:"redirectURI"},n={};return Object.keys(e).forEach(function(r){var a=t[r]||r,i=e[r];n[a]=i}),n}},{key:"doRegistration",value:function(){return this.fetchJSON("POST","/auth/register",this.snakeCaseOAuthData({redirectURI:this.oauthOptions.redirectURI,clientName:this.oauthOptions.clientName,softwareID:this.oauthOptions.softwareID,clientKind:this.oauthOptions.clientKind,clientURI:this.oauthOptions.clientURI,logoURI:this.oauthOptions.logoURI,policyURI:this.oauthOptions.policyURI,softwareVersion:this.oauthOptions.softwareVersion,notificationPlatform:this.oauthOptions.notificationPlatform,notificationDeviceToken:this.oauthOptions.notificationDeviceToken}))}},{key:"register",value:(t=(0,o.default)(i.default.mark(function e(){var t,n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRegistered()){e.next=2;break}throw Error("Client already registered");case 2:if(t=["redirectURI"],n=Object.keys(this.oauthOptions),!((r=t.filter(function(e){return n[e]})).length>0)){e.next=7;break}throw Error("Can't register client : missing ".concat(r," fields"));case 7:return e.next=9,this.doRegistration();case 9:return a=e.sent,this.setOAuthOptions(x(x({},this.oauthOptions),{},{client_id:a.client_id,client_name:a.client_name,client_secret:a.client_secret,registration_access_token:a.registration_access_token,software_id:a.software_id})),e.abrupt("return",this.oauthOptions);case 12:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"unregister",value:(n=(0,o.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new _;case 2:return t=this.oauthOptions.clientID,this.oauthOptions.clientID="",e.abrupt("return",this.fetchJSON("DELETE","/auth/register/".concat(t),null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"fetchInformation",value:(r=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new _;case 2:return e.abrupt("return",this.fetchJSON("GET","/auth/register/".concat(this.oauthOptions.clientID),null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"updateInformation",value:(a=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]&&c[1],this.isRegistered()){e.next=3;break}throw new _;case 3:return r={clientID:this.oauthOptions.clientID,clientName:this.oauthOptions.clientName,redirectURI:this.oauthOptions.redirectURI,softwareID:this.oauthOptions.softwareID},a=this.snakeCaseOAuthData(x(x({},r),t)),n&&(a.client_secret=this.oauthOptions.clientSecret),e.next=8,this.fetchJSON("PUT","/auth/register/".concat(this.oauthOptions.clientID),a,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}});case 8:return o=e.sent,this.setOAuthOptions(x(x({},a),o)),e.abrupt("return",this.oauthOptions);case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"generateStateCode",value:function(){var e;if("undefined"!=typeof window&&void 0!==window.crypto&&"function"==typeof window.crypto.getRandomValues)e=new Uint8Array(16),window.crypto.getRandomValues(e);else{e=Array(16);for(var t=0;t<e.length;t++)e[t]=Math.floor(255*Math.random())}return btoa(String.fromCharCode.apply(null,e)).replace(/=+$/,"").replace(/\//g,"_").replace(/\+/g,"-")}},{key:"getAuthCodeURL",value:function(e){var t=e.stateCode,n=e.scopes,r=void 0===n?this.scope:n,a=e.sessionCode,i=void 0===a?void 0:a,o=e.codeChallenge,c=void 0===o?void 0:o;if(!this.isRegistered())throw new _;var s={client_id:this.oauthOptions.clientID,redirect_uri:this.oauthOptions.redirectURI,state:t,response_type:"code",scope:r.join(" ")};return this.oauthOptions.registerToken&&(s=x(x({},s),{},{registerToken:this.oauthOptions.registerToken})),i&&(s=x(x({},s),{},{session_code:i})),c&&(s=x(x({},s),{},{code_challenge:c,code_challenge_method:"S256"})),"".concat(this.uri,"/auth/authorize?").concat(this.dataToQueryString(s))}},{key:"dataToQueryString",value:function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}},{key:"getAccessCodeFromURL",value:function(e,t){if(!t)throw Error("Missing state code");var n=new URL(e).searchParams,r=n.get("state"),a=n.get("access_code");if(t!==r)throw Error("Given state does not match url query state");return a}},{key:"fetchAccessToken",value:(c=(0,o.default)(i.default.mark(function e(t,n,r,a){var o,c,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isRegistered()&&!n)){e.next=2;break}throw new _;case 2:return c={grant_type:"authorization_code",code:t,client_id:(o=n||this.oauthOptions).clientID,client_secret:o.clientSecret},a&&(c=x(x({},c),{},{code_verifier:a})),e.next=7,this.fetchJSON("POST",(r||"")+"/auth/access_token",this.dataToQueryString(c),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:return s=e.sent,e.abrupt("return",new m.default(s));case 9:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return c.apply(this,arguments)})},{key:"fetchKonnectorToken",value:(f=(0,o.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchJSON("POST","/auth/tokens/konnectors/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),Error('oAuthClient.fetchKonnectorToken(): Could not create a token for the konnector with slug "'.concat(t,'". \n\n').concat(e.t0));case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return f.apply(this,arguments)})},{key:"fetchSessionCode",value:(p=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchJSON("POST","/auth/session_code"));case 1:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"fetchSessionCodeWithPassword",value:(h=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.passwordHash,a=void 0===(r=t.twoFactorToken)?void 0:r,c=void 0===(o=t.twoFactorPasscode)?void 0:o,e.abrupt("return",this.fetchJSON("POST","/auth/session_code",{passphrase:n,two_factor_token:a,two_factor_passcode:c}));case 2:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"loginFlagship",value:(g=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,s,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=t.emailVerifiedCode)?void 0:n,a=t.passwordHash,c=void 0===(o=t.twoFactorToken)?void 0:o,u=void 0===(s=t.twoFactorPasscode)?void 0:s,e.abrupt("return",this.fetchJSON("POST","/auth/login/flagship",{client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret,email_verified_code:r,passphrase:a,two_factor_token:c,two_factor_passcode:u}));case 2:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"refreshToken",value:(O=(0,o.default)(i.default.mark(function e(){var t,n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new _;case 2:if(this.token){e.next=4;break}throw Error("No token to refresh");case 4:return t={grant_type:"refresh_token",refresh_token:this.token.refreshToken,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},e.prev=5,e.next=8,this.fetchJSONWithCurrentToken("POST","/auth/access_token",this.dataToQueryString(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 8:return n=e.sent,r=new m.default(x({refresh_token:this.token.refreshToken},n)),this.setToken(r),this.onTokenRefresh&&"function"==typeof this.onTokenRefresh&&this.onTokenRefresh(r),e.abrupt("return",r);case 15:if(e.prev=15,e.t0=e.catch(5),!this.isRevocationError(e.t0)){e.next=21;break}throw this.onRevocationChange(!0),b.default.warn("Client has been revoked. Please authenticate again."),e.t0;case 21:if(!(y.default.EXPIRED_TOKEN.test(e.t0.message)||y.default.INVALID_TOKEN.test(e.t0.message)||y.default.INVALID_TOKEN_ALT.test(e.t0.message))){e.next=28;break}return e.next=24,this.checkForRevocation();case 24:if(!e.sent){e.next=28;break}throw b.default.warn("Client has been revoked. Please authenticate again."),e.t0;case 28:throw e.t0;case 29:case"end":return e.stop()}},e,this,[[5,15]])})),function(){return O.apply(this,arguments)})},{key:"exchangeOAuthSecret",value:function(e,t){return this.fetchJSON("POST",e+"/auth/secret_exchange",{secret:t})}},{key:"setToken",value:function(e){e?this.token=e instanceof m.default?e:new m.default(e):this.token=null}},{key:"setCredentials",value:function(e){return(0,v.default)("setCredentials is deprecated, please replace by setToken"),this.setToken(e)}},{key:"setOAuthOptions",value:function(e){this.oauthOptions=this.camelCaseOAuthData(e)}},{key:"resetClientId",value:function(){this.oauthOptions.clientID=""}},{key:"resetClient",value:function(){this.resetClientId(),this.setUri(null),this.setToken(null)}},{key:"registrationAccessTokenToAuthHeader",value:function(){if(!this.oauthOptions.registrationAccessToken)throw Error("No registration access token");return"Bearer "+this.oauthOptions.registrationAccessToken}},{key:"setPassphraseFlagship",value:function(e){var t=e.registerToken,n=e.passwordHash,r=e.hint,a=e.key,i=e.publicKey,o=e.privateKey,c=e.iterations;return this.fetchJSON("POST","/settings/passphrase/flagship",{register_token:t,passphrase:n,hint:r,key:a,public_key:i,private_key:o,iterations:c,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}})}},{key:"checkForRevocation",value:(E=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchInformation();case 3:case 11:return e.abrupt("return",!1);case 6:if(e.prev=6,e.t0=e.catch(0),!this.isRevocationError(e.t0)){e.next=11;break}return this.onRevocationChange(!0),e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return E.apply(this,arguments)})}]),C}(h.default),_=function(e){(0,d.default)(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Client not registered or missing OAuth information";return(0,u.default)(this,n),(e=t.call(this,r)).message=r,e.name="NotRegisteredException",e}return n}((0,a.default)(Error));t.default=O},69688:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OAUTH_CLIENTS_DOCTYPE=void 0;var i=a(n(68434)),o=a(n(64512)),c=a(n(41)),s=a(n(82007)),u=a(n(65105)),l=a(n(19723)),d=a(n(25665)),f=a(n(27952)),p=a(n(12323)),h=a(n(27361)),m=a(n(87386)),v=n(63818),y=n(65987),b=r(n(66343)),g=n(93868),x=n(86701);function w(){var e=(0,c.default)(["/settings/clients/",""]);return w=function(){return e},e}function k(){var e=(0,c.default)(["/settings/clients/",""]);return k=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e=(0,c.default)(["/settings/clients"]);return E=function(){return e},e}var S="io.cozy.oauth.clients";t.OAUTH_CLIENTS_DOCTYPE=S;var C=(0,v.normalizeDoctypeJsonApi)(S),P=function(e){(0,d.default)(c,e);var t,n,r,a,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,p.default)(c);return e=t?Reflect.construct(n,arguments,(0,p.default)(this).constructor):n.apply(this,arguments),(0,f.default)(this,e)});function c(e){return(0,u.default)(this,c),o.call(this,S,e)}return(0,l.default)(c,[{key:"all",value:(n=(0,s.default)(i.default.mark(function e(){var t,n,r,a,o,c,s,u,l,d,f,p,m,v,x=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(t=x.length>0&&void 0!==x[0]?x[0]:{}).limit)?100:n,a=t.bookmark,o=t.keys,c={"page[limit]":r,"page[cursor]":a},s=(0,y.uri)(E()),u=b.buildURL(s,c),e.prev=5,e.next=8,this.stackClient.fetchJSON("GET",u);case 8:l=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",(0,g.dontThrowNotFoundError)(e.t0));case 14:if(d=(0,h.default)(l,"links.next",""),p=void 0!==(f=new URL("".concat(this.stackClient.uri).concat(d)).searchParams.get("page[cursor]")||void 0),!o){e.next=24;break}return m=l.data.filter(function(e){return o.includes(e.id)}).map(function(e){return C(e)}),v=_(_({},l.meta),{},{count:m.length}),e.abrupt("return",{data:m,meta:v,next:o.length>m.length&&p,bookmark:f});case 24:return e.abrupt("return",{data:l.data.map(function(e){return C(e)}),meta:l.meta,next:p,bookmark:f});case 25:case"end":return e.stop()}},e,this,[[5,11]])})),function(){return n.apply(this,arguments)})},{key:"get",value:(r=(0,s.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all({keys:[t]});case 2:n=e.sent;case 3:if(!n.next){e.next=9;break}return e.next=6,this.all({keys:[t],bookmark:n.bookmark});case 6:n=e.sent,e.next=3;break;case 9:if(!n.data.length){e.next=13;break}return e.abrupt("return",{data:C(n.data[0])});case 13:throw n.url=(0,y.uri)(k(),t),n.status="404",new x.FetchError(n,"Not Found");case 16:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,s.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("DELETE",(0,y.uri)(w(),n));case 3:return e.abrupt("return",{data:_(_({},C(t)),{},{_deleted:!0})});case 4:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})}]),c}(m.default);P.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=P},85275:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getPermissionsFor=void 0;var a=r(n(98235)),i=r(n(64512)),o=r(n(80295)),c=r(n(68434)),s=r(n(41)),u=r(n(82007)),l=r(n(65105)),d=r(n(19723)),f=r(n(25665)),p=r(n(27952)),h=r(n(12323)),m=r(n(87386)),v=n(63818),y=n(946),b=n(65987),g=r(n(25790));function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(){var e=(0,s.default)(["/permissions/doctype/","/shared-by-link"]);return w=function(){return e},e}function k(){var e=(0,s.default)(["/permissions/",""]);return k=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e=(0,s.default)(["/permissions/",""]);return E=function(){return e},e}var S=function(e){return(0,v.normalizeDoc)(e,"io.cozy.permissions")},C=function(e){(0,f.default)(M,e);var t,n,r,i,s,m,v,y,O,C,A,D,T=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,h.default)(M);return e=t?Reflect.construct(n,arguments,(0,h.default)(this).constructor):n.apply(this,arguments),(0,p.default)(this,e)});function M(){return(0,l.default)(this,M),T.apply(this,arguments)}return(0,d.default)(M,[{key:"get",value:(n=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,b.uri)(E(),t));case 2:return n=e.sent,e.abrupt("return",{data:S(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"create",value:(r=(0,u.default)(c.default.mark(function e(t){var n,r,a,i,s,u,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._id,t._type,r=void 0===(n=t.codes)?"code":n,a=t.ttl,i=t.tiny,s=(0,o.default)(t,["_id","_type","codes","ttl","tiny"]),(u=new URLSearchParams).append("codes",r),a&&u.append("ttl",a),i&&u.append("tiny",!0),e.next=7,this.stackClient.fetchJSON("POST","/permissions?".concat(u),{data:{type:"io.cozy.permissions",attributes:s}});case 7:return l=e.sent,e.abrupt("return",{data:S(l.data)});case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"add",value:(i=(0,u.default)(c.default.mark(function e(t,n){var r,a,i,o,s,u,l,d=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:{},e.t0=t._type,e.next="io.cozy.apps"===e.t0?4:"io.cozy.konnectors"===e.t0?6:"io.cozy.permissions"===e.t0?8:10;break;case 4:return a="/permissions/apps/".concat(t.slug),e.abrupt("break",11);case 6:return a="/permissions/konnectors/".concat(t.slug),e.abrupt("break",11);case 8:return a="/permissions/".concat(t._id),e.abrupt("break",11);case 10:throw Error("Permissions can only be added on existing permissions, apps and konnectors.");case 11:return i=r.expiresAt,s=(o=r.password)||""===o,u=i||""===i,e.next=16,this.stackClient.fetchJSON("PATCH",a,{data:{type:"io.cozy.permissions",attributes:_(_({permissions:n},s&&{password:o}),u&&{expires_at:i})}});case 16:return l=e.sent,e.abrupt("return",{data:S(l.data)});case 18:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"destroy",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,b.uri)(k(),e.id))}},{key:"findLinksByDoctype",value:(s=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,b.uri)(w(),t));case 2:return n=e.sent,e.abrupt("return",_(_({},n),{},{data:n.data.map(S)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"findApps",value:(m=(0,u.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.default.warn("PermissionCollection.findApps will be removed in next version of cozy-client. \n\n      You can use AppCollection.all() instead \n\n      or even better client.query(Q('io.cozy.apps'), {as: 'io.cozy.apps'})"),e.next=3,this.stackClient.fetchJSON("GET","/apps/");case 3:return t=e.sent,e.abrupt("return",_(_({},t),{},{data:t.data.map(function(e){return _({_id:e.id},e)})}));case 5:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"createSharingLink",value:(v=(0,u.default)(c.default.mark(function e(t){var n,r,a,i,o,s,u,l,d,f=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=f.length>1&&void 0!==f[1]?f[1]:{}).ttl,a=n.password,i=n.verbs,o=n.tiny,u=void 0===(s=n.codes)?"code":s,(l=new URLSearchParams).append("codes",u),r&&l.append("ttl",r),o&&l.append("tiny",!0),e.next=8,this.stackClient.fetchJSON("POST","/permissions?".concat(l),{data:{type:"io.cozy.permissions",attributes:_({permissions:P(t,!0,i?{verbs:i}:{})},a&&{password:a})}});case 8:return d=e.sent,e.abrupt("return",{data:S(d.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"fetchPermissionsByLink",value:(y=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.links&&t.links.next)){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET",t.links.next);case 3:return n=e.sent,e.abrupt("return",_(_({},n),{},{data:n.data.map(S)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"fetchAllLinks",value:(O=(0,u.default)(c.default.mark(function e(t){var n,r,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findLinksByDoctype(t._type);case 2:r=n=e.sent;case 4:if(!(r.links&&r.links.next)){e.next=11;break}return e.next=7,this.fetchPermissionsByLink(r);case 7:r=e.sent,(i=n.data).push.apply(i,(0,a.default)(r.data)),e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})},{key:"revokeSharingLink",value:(C=(0,u.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLinks(t);case 2:n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return x(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(e.sent.data.filter(function(e){return j(e,t)})),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=13;break}return a=r.value,e.next=11,this.destroy(a);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[5,15,18,21]])})),function(e){return C.apply(this,arguments)})},{key:"getOwnPermissions",value:(A=(0,u.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.default.warn("getOwnPermissions is deprecated, please use fetchOwnPermissions instead"),e.abrupt("return",this.fetchOwnPermissions());case 2:case"end":return e.stop()}},e,this)})),function(){return A.apply(this,arguments)})},{key:"fetchOwnPermissions",value:(D=(0,u.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/permissions/self");case 2:return t=e.sent,e.abrupt("return",{data:S(t.data),included:t.included?t.included.map(S):[]});case 4:case"end":return e.stop()}},e,this)})),function(){return D.apply(this,arguments)})}]),M}(m.default),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e._id,a=e._type,i=n.verbs?n.verbs:t?["GET"]:["ALL"];return(0,y.isFile)(e)?{files:{type:"io.cozy.files",verbs:i,values:[r]}}:{collection:{type:a,verbs:i,values:[r]},files:{type:"io.cozy.files",verbs:i,values:["".concat(a,"/").concat(r)],selector:"referenced_by"}}};t.getPermissionsFor=P;var j=function(e,t){var n=t._id;return(0,y.isFile)(t)?-1!==e.attributes.permissions.files.values.indexOf(n):-1!==e.attributes.permissions.collection.values.indexOf(n)};t.default=C},81295:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeSettings=t.SETTINGS_DOCTYPE=void 0;var a=r(n(41)),i=r(n(68434)),o=r(n(64512)),c=r(n(82007)),s=r(n(65105)),u=r(n(19723)),l=r(n(25665)),d=r(n(27952)),f=r(n(12323)),p=r(n(87386)),h=r(n(25790)),m=n(65987),v=n(63818);function y(){var e=(0,a.default)(["/data/","/",""]);return y=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var g="io.cozy.settings";t.SETTINGS_DOCTYPE=g;var x=(0,v.normalizeDoctypeJsonApi)(g);t.normalizeSettings=x;var w=function(e){(0,l.default)(v,e);var t,n,r,a,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(v);return e=t?Reflect.construct(n,arguments,(0,f.default)(this).constructor):n.apply(this,arguments),(0,d.default)(this,e)});function v(e){return(0,s.default)(this,v),p.call(this,g,e)}return(0,u.default)(v,[{key:"get",value:(n=(0,c.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("io.cozy.settings.bitwarden"!==t){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET","/data/io.cozy.settings/io.cozy.settings.bitwarden");case 3:return n=e.sent,e.abrupt("return",{data:x(n)});case 5:return t.startsWith("io.cozy.settings.")?r=t.substring(17):(h.default.warn("Deprecated: in next versions of cozy-client, it will not be possible to query settings with an incomplete id\n\n- Q('io.cozy.settings').getById('instance')\n+ Q('io.cozy.settings').getById('io.cozy.settings.instance')"),r=t),e.next=8,this.stackClient.fetchJSON("GET","/settings/".concat(r));case 8:return a=e.sent,e.abrupt("return",{data:x(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:"/settings/".concat(r)},a.data))});case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"update",value:(r=(0,c.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("io.cozy.settings.instance"!==t._id){e.next=6;break}return e.next=3,this.stackClient.fetchJSON("PUT","/settings/instance",{data:t});case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,this.stackClient.fetchJSON("PUT",(0,m.uri)(y(),this.doctype,t._id),t);case 8:n=e.sent;case 9:return e.abrupt("return",{data:x(n.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"updateLastSynced",value:(a=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetchJSON("POST","/settings/synchronized"));case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}]),v}(p.default);w.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=w},22145:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getSharingRules=t.BITWARDEN_CIPHERS_DOCTYPE=t.BITWARDEN_ORGANIZATIONS_DOCTYPE=t.SHARING_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(64512)),o=r(n(41)),c=r(n(82007)),s=r(n(65105)),u=r(n(19723)),l=r(n(25665)),d=r(n(27952)),f=r(n(12323)),p=r(n(87386)),h=n(63818),m=n(946),v=n(65987),y=r(n(25790));function b(){var e=(0,o.default)(["/sharings/","/recipients"]);return b=function(){return e},e}function g(){var e=(0,o.default)(["/sharings/","/recipients/self"]);return g=function(){return e},e}function x(){var e=(0,o.default)(["/sharings/","/groups/",""]);return x=function(){return e},e}function w(){var e=(0,o.default)(["/sharings/","/recipients/",""]);return w=function(){return e},e}function k(){var e=(0,o.default)(["/sharings/","/recipients"]);return k=function(){return e},e}function O(){var e=(0,o.default)(["/sharings/",""]);return O=function(){return e},e}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(){var e=(0,o.default)(["/sharings/doctype/",""]);return S=function(){return e},e}var C="io.cozy.sharings";t.SHARING_DOCTYPE=C;var P="com.bitwarden.organizations";t.BITWARDEN_ORGANIZATIONS_DOCTYPE=P;var j="com.bitwarden.ciphers";t.BITWARDEN_CIPHERS_DOCTYPE=j;var A=(0,h.normalizeDoctypeJsonApi)(C),D=function(e){(0,l.default)(m,e);var t,n,r,i,o,p,h=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(m);return e=t?Reflect.construct(n,arguments,(0,f.default)(this).constructor):n.apply(this,arguments),(0,d.default)(this,e)});function m(){return(0,s.default)(this,m),h.apply(this,arguments)}return(0,u.default)(m,[{key:"findByDoctype",value:(n=(0,c.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,v.uri)(S(),t));case 2:return n=e.sent,e.abrupt("return",E(E({},n),{},{data:n.data.map(A)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"get",value:(r=(0,c.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,v.uri)(O(),t),e.next=3,this.stackClient.fetchJSON("GET",n);case 3:return r=e.sent,e.abrupt("return",{data:A(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"create",value:(i=(0,c.default)(a.default.mark(function e(t){var n,r,i,o,c,s,u,l,d,f,p,h,m;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.document,r=t.description,i=t.previewPath,o=t.rules,s=void 0===(c=t.recipients)?[]:c,l=void 0===(u=t.readOnlyRecipients)?[]:u,d=t.openSharing,f=t.appSlug,p={description:r,preview_path:i,open_sharing:d,rules:o||M(n)},h={},f&&(h={app_slug:f}),e.next=6,this.stackClient.fetchJSON("POST","/sharings/",{data:{type:"io.cozy.sharings",attributes:E(E({},p),h),relationships:E(E({},s.length>0&&{recipients:{data:s.map(B)}}),l.length>0&&{read_only_recipients:{data:l.map(B)}})}});case 6:return m=e.sent,e.abrupt("return",{data:A(m.data)});case 8:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"share",value:(o=(0,c.default)(a.default.mark(function e(t,n,r,i){var o,c,s=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:null,y.default.warn("SharingCollection.share is deprecated, use SharingCollection.create instead"),c="two-way"===r?{recipients:n}:{readOnlyRecipients:n},e.abrupt("return",this.create(E(E({document:t},c),{},{description:i,previewPath:o,openSharing:"two-way"===r,rules:M(t,r)})));case 4:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return o.apply(this,arguments)})},{key:"getDiscoveryLink",value:function(e,t,n){var r=(n||{}).shortcut,a=new URLSearchParams;return a.append("sharecode",t),r&&a.append("shortcut",!0),this.stackClient.fullpath("/sharings/".concat(e,"/discovery?").concat(a))}},{key:"addRecipients",value:(p=(0,c.default)(a.default.mark(function e(t){var n,r,i,o,c,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.document,i=void 0===(r=t.recipients)?[]:r,c=void 0===(o=t.readOnlyRecipients)?[]:o,e.next=3,this.stackClient.fetchJSON("POST",(0,v.uri)(k(),n._id),{data:{type:"io.cozy.sharings",id:n._id,relationships:E(E({},i.length>0&&{recipients:{data:i.map(B)}}),c.length>0&&{read_only_recipients:{data:c.map(B)}})}});case 3:return s=e.sent,e.abrupt("return",{data:A(s.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"revokeRecipient",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(w(),e._id,t))}},{key:"revokeGroup",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(x(),e._id,t))}},{key:"revokeSelf",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(g(),e._id))}},{key:"revokeAllRecipients",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(b(),e._id))}}]),m}(p.default);D.normalizeDoctype=h.normalizeDoctypeJsonApi;var T=function(e,t){return(0,m.isFile)(e)?F(e,t):e._type===P?L(e):R(e,t)},M=function(e,t){return t&&y.default.warn("sharingType is deprecated and will be removed. We now set this default rules: ".concat(T(e),"} \n\n      If this default rules do not fill your need, please set custom rules\n      by using the 'rules' object of the SharingCollection.create() method")),T(e,t)};t.getSharingRules=M;var R=function(e,t){var n=e._id,r=e._type;return[E({title:"collection",doctype:r,values:[n]},N(t)),E({title:"items",doctype:"io.cozy.files",values:["".concat(r,"/").concat(n)],selector:"referenced_by"},I(t))]},I=function(e){return"two-way"===e?{add:"sync",update:"sync",remove:"sync"}:{add:"push",update:"none",remove:"push"}},N=function(e){return e?"two-way"===e?{update:"sync",remove:"revoke"}:{update:"push",remove:"revoke"}:{update:"sync",remove:"revoke"}},F=function(e,t){var n=e._id;return[E({title:e.name,doctype:"io.cozy.files",values:[n]},z(e,t))]},z=function(e,t){return(0,m.isDirectory)(e)?t?"two-way"===t?{add:"sync",update:"sync",remove:"sync"}:{add:"push",update:"push",remove:"push"}:{add:"sync",update:"sync",remove:"sync"}:t?"two-way"===t?{update:"sync",remove:"revoke"}:{update:"push",remove:"revoke"}:{update:"sync",remove:"revoke"}},L=function(e){var t=e._id;return[{title:e.name,doctype:P,values:[t],add:"sync",update:"sync",remove:"revoke"},{title:"Ciphers",doctype:j,values:[t],add:"sync",update:"sync",remove:"sync",selector:"organization_id"}]},B=function(e){return{id:e._id,type:e._type}};t.default=D},91142:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SHORTCUTS_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(41)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=r(n(25665)),l=r(n(27952)),d=r(n(12323)),f=r(n(64512)),p=r(n(87386)),h=n(63818),m=n(65987),v=n(63972);function y(){var e=(0,i.default)(["/shortcuts/",""]);return y=function(){return e},e}function b(){var e=(0,i.default)(["/shortcuts"]);return b=function(){return e},e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w="io.cozy.files.shortcuts";t.SHORTCUTS_DOCTYPE=w;var k=(0,h.normalizeDoctypeJsonApi)(w),O=function(e){return x(x({},k(e)),{},{_id:e._id})},_=function(e){(0,u.default)(f,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(f);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function f(e){return(0,c.default)(this,f),i.call(this,w,e)}return(0,s.default)(f,[{key:"create",value:(n=(0,o.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type||(t.type=w),!(!t.name||!t.name.trim()||!t.url||!t.dir_id)){e.next=3;break}throw Error("you need at least a name, an url and a dir_id attributes to create a shortcut");case 3:if("."!==(n=t.name.trim())&&".."!==n){e.next=6;break}throw Error("Invalid filename: ".concat(n));case 6:if(!(r=(0,v.getIllegalCharacters)(n)).length){e.next=9;break}throw Error("Invalid filename containing illegal character(s): ".concat(r));case 9:return i=(0,m.uri)(b()),e.next=12,this.stackClient.fetchJSON("POST",i,{data:{attributes:t,type:"io.cozy.files.shortcuts"}});case 12:return o=e.sent,e.abrupt("return",{data:O(o.data)});case 14:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"get",value:(r=(0,o.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,m.uri)(y(),t),e.next=3,this.stackClient.fetchJSON("GET",n);case 3:return r=e.sent,e.abrupt("return",{data:O(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}]),f}(p.default);_.normalizeDoctype=h.normalizeDoctypeJsonApi,t.default=_},13041:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isForAccount=t.isForKonnector=t.normalizeTrigger=t.TRIGGERS_DOCTYPE=t.JOBS_DOCTYPE=void 0;var i=a(n(80295)),o=a(n(64512)),c=a(n(41)),s=a(n(68434)),u=a(n(82007)),l=a(n(65105)),d=a(n(19723)),f=a(n(59655)),p=a(n(25665)),h=a(n(27952)),m=a(n(12323)),v=r(n(93868)),y=n(63818),b=n(71606),g=n(65987),x=a(n(87386));function w(){var e=(0,c.default)(["/jobs/triggers/","/launch"]);return w=function(){return e},e}function k(){var e=(0,c.default)(["/jobs/triggers/",""]);return k=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e=(0,c.default)(["/jobs/triggers/",""]);return E=function(){return e},e}function S(){var e=(0,c.default)(["/jobs/triggers"]);return S=function(){return e},e}n(86701),t.JOBS_DOCTYPE="io.cozy.jobs";var C="io.cozy.triggers";t.TRIGGERS_DOCTYPE=C;var P=(0,y.normalizeDoctypeJsonApi)(C);t.normalizeTrigger=P,t.isForKonnector=function(e,t){return"konnector"===e.worker&&e.message.konnector==t},t.isForAccount=function(e,t){return e.message.account==t};var j=function(e,t){var n=new URLSearchParams;return e&&(Array.isArray(e.$in)?n.set("Worker",e.$in.join(",")):n.set("Worker",e)),t&&(Array.isArray(t.$in)?n.set("Type",t.$in.join(",")):n.set("Type",t)),n.toString()},A=function(e){(0,p.default)(A,e);var t,n,r,a,o,c,y,x,O=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,m.default)(A);return e=t?Reflect.construct(n,arguments,(0,m.default)(this).constructor):n.apply(this,arguments),(0,h.default)(this,e)});function A(e){return(0,l.default)(this,A),O.call(this,C,e)}return(0,d.default)(A,[{key:"all",value:(n=(0,u.default)(s.default.mark(function e(){var t,n=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.prev=1,e.next=4,this.stackClient.fetchJSON("GET","/jobs/triggers");case 4:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return P(e)}),meta:{count:t.data.length},next:!1,skip:0});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",(0,v.dontThrowNotFoundError)(e.t0));case 11:case"end":return e.stop()}},e,this,[[1,8]])})),function(){return n.apply(this,arguments)})},{key:"create",value:(r=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.uri)(S()),e.next=3,this.stackClient.fetchJSON("POST",n,{data:{attributes:t}});case 3:return r=e.sent,e.abrupt("return",{data:P(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t._id){e.next=3;break}throw Error("TriggerCollection.destroy needs a document with an _id");case 3:return e.next=5,this.stackClient.fetchJSON("DELETE",(0,g.uri)(E(),n));case 5:return e.abrupt("return",{data:P(_(_({},t),{},{_deleted:!0}))});case 6:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"find",value:(o=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,c,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1&&void 0!==u[1]?u[1]:{},r=t.worker,a=t.type,!(0===Object.keys((0,i.default)(t,["worker","type"])).length&&!n.partialFilter)){e.next=18;break}return o="/jobs/triggers?".concat(j(r,a)),e.prev=6,e.next=9,this.stackClient.fetchJSON("GET",o);case 9:return c=e.sent,e.abrupt("return",{data:c.data.map(function(e){return P(e)}),meta:{count:c.data.length},next:!1,skip:0});case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",(0,v.dontThrowNotFoundError)(e.t0));case 16:e.next=19;break;case 18:return e.abrupt("return",(0,f.default)((0,m.default)(A.prototype),"find",this).call(this,t,n));case 19:case"end":return e.stop()}},e,this,[[6,13]])})),function(){return o.apply(this,arguments)})},{key:"get",value:(c=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.default.get(this.stackClient,(0,g.uri)(k(),t),{normalize:P}));case 1:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"launch",value:(y=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.uri)(w(),t._id),e.next=3,this.stackClient.fetchJSON("POST",n);case 3:return r=e.sent,e.abrupt("return",{data:(0,b.normalizeJob)(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"update",value:(x=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=s.default.keys(t);case 1:if((e.t1=e.t0()).done){e.next=7;break}if(["_id","_rev","_type","arguments","message","cozyMetadata"].includes(e.t1.value)){e.next=5;break}throw Error("TriggerCollection.update only works for 'arguments', and 'message' attributes.");case 5:e.next=1;break;case 7:return n=_(_({},t.arguments?{arguments:t.arguments}:{}),t.message?{message:t.message}:{}),e.next=10,this.stackClient.fetchJSON("PATCH","/jobs/triggers/".concat(t._id),{data:{attributes:n}});case 10:return r=e.sent,e.abrupt("return",{data:P(r.data)});case 12:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})}]),A}(x.default);A.normalizeDoctype=y.normalizeDoctypeJsonApi,t.default=A},86701:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.FetchError=t.default=void 0;var a=r(n(65105)),i=r(n(8997)),o=r(n(25665)),c=r(n(27952)),s=r(n(12323)),u=r(n(15500)),l=/the client must be registered/;t.default={EXPIRED_TOKEN:/Expired token/,CLIENT_NOT_FOUND:/Client not found/,INVALID_TOKEN:/Invalid JWT token/,INVALID_TOKEN_ALT:/Invalid token/,UNREGISTERED_CLIENT:l};var d=/invalid_token/,f=/access_token_expired/,p=function(e){var t,n=null===(t=e.headers)||void 0===t?void 0:t.get("www-authenticate");if(n){if(f.test(n))return"Expired token";if(d.test(n))return"Invalid token"}},h=function(e){(0,o.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(r);return e=t?Reflect.construct(n,arguments,(0,s.default)(this).constructor):n.apply(this,arguments),(0,c.default)(this,e)});function r(e,t){if((0,a.default)(this,r),c=n.call(this),null===(o=Error.captureStackTrace)||void 0===o||o.call(Error,(0,i.default)(c),c.constructor),c.name="FetchError",c.response=e,c.url=e.url,c.status=e.status,c.reason=t,null===t)throw Error("FetchError received a ".concat(e.status," error without a Response Body when calling ").concat(e.url));var o,c,s=p(e);return Object.defineProperty((0,i.default)(c),"message",{value:("string"==typeof t.error&&l.test(t.error)?t.error:void 0)||t.message||s||("string"==typeof t?t:JSON.stringify(t))}),c}return r}((0,u.default)(Error));t.FetchError=h},5276:function(e,t,n){"use strict";var r,a,i=n(14746),o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getIconURL=t.default=t._getIconURL=void 0;var c=o(n(68434)),s=o(n(82007));n(36369);var u=i(n(89292));function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e,t,n,r){if(!n)throw Error("Cannot fetch icon: missing domain");var a=f(e,t,n,r);if(!a)throw Error("Cannot get icon source for app ".concat(e.name));return a},f=function(e,t,n,r){var a=e&&e.links&&e.links.icon||p(e,t);return a?"".concat(r,"//").concat(n).concat(a):null},p=function(e,t){return t?"/registry/".concat(t,"/icon"):e&&e.latest_version&&e.latest_version.version&&"/registry/".concat(e.slug,"/").concat(e.latest_version.version,"/icon")},h={gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},m=function(e){if(!e.icon)throw Error("".concat(e.name,": Cannot detect icon mime type since app has no icon"));var t=e.icon.split(".").pop();if(!t)throw Error("".concat(e.name,": Unable to detect icon mime type from extension (").concat(e.icon,")"));return t},v=(r=(0,s.default)(c.default.mark(function e(t,n){var r,a,i,o,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(t),e.prev=1,a.s();case 3:if((i=a.n()).done){e.next=18;break}return o=i.value,e.prev=5,e.next=8,o();case 8:return s=e.sent,n&&n(s),e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5),r=e.t0;case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),a.e(e.t1);case 23:return e.prev=23,a.f(),e.finish(23);case 26:throw r;case 27:case"end":return e.stop()}},e,null,[[1,20,23,26],[5,13]])})),function(e,t){return r.apply(this,arguments)}),y=(a=(0,s.default)(c.default.mark(function e(t,n){var r,a,i,o,s,u,l,f,p,y,b,g,x,w;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.type,a=n.slug,i=n.appData,s=void 0===(o=n.priority)?"stack":o,!t.oauthOptions){e.next=29;break}return u=[function(){return t.fetch("GET","/".concat(r,"s/").concat(a,"/icon"))},function(){return t.fetch("GET","/registry/".concat(a,"/icon"))}],"registry"===s&&u.reverse(),e.next=6,v(u,function(e){if(!e.ok)throw Error("Error while fetching icon ".concat(e.statusText))});case 6:return l=e.sent,e.next=9,l.blob();case 9:if((f=e.sent).type){e.next=26;break}if(y=[function(){var e,n;return e=r,n=a,t.fetchJSON("GET","/".concat(e,"s/").concat(n)).then(function(e){return e.data.attributes})},function(){var e;return e=a,t.fetchJSON("GET","/registry/".concat(e)).then(function(e){return e.latest_version.manifest})}],"registry"===s&&y.reverse(),e.t1=i,e.t1){e.next=18;break}return e.next=17,v(y);case 17:e.t1=e.sent;case 18:if(e.t0=e.t1,e.t0){e.next=21;break}e.t0={};case 21:if(h[b=m(p=e.t0)]){e.next=25;break}throw Error('Unknown image extension "'.concat(b,'" for app ').concat(p.name));case 25:f=new Blob([f],{type:h[b]});case 26:return e.abrupt("return",URL.createObjectURL(f));case 29:return e.prev=29,x=(g=new URL(t.uri)).host,w=g.protocol,e.abrupt("return",d(i,a,x,w));case 34:throw e.prev=34,e.t2=e.catch(29),Error("Cannot fetch icon: invalid stackClient.uri: ".concat(e.t2.message));case 37:case"end":return e.stop()}},e,null,[[29,34]])})),function(e,t){return a.apply(this,arguments)});t._getIconURL=y;var b=function(){return y.apply(this,arguments).catch(function(){return new u.ErrorReturned})};t.getIconURL=b;var g=(0,u.default)(b,{maxDuration:3e5,key:function(e,t){var n=t.type,r=t.slug,a=t.priority;return e.uri+NaN+n+":"+r+":"+a}});t.default=g},63972:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIllegalCharacters=void 0,t.getIllegalCharacters=function(e){var t=e.match(/\/|\x00|\n|\r/g);return t?t.join(" "):""}},2779:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"OAuthClient",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"errors",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"FetchError",{enumerable:!0,get:function(){return c.FetchError}}),Object.defineProperty(t,"normalizeDoc",{enumerable:!0,get:function(){return s.normalizeDoc}});var i=a(n(17400)),o=a(n(78238)),c=r(n(86701)),s=n(63818)},65746:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(25790));t.default=function(){a.default.warn.apply(a.default,arguments)}},25790:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i=(0,a.default)("cozy-stack-client");a.default.suggest.deny("cozy-stack-client","info"),t.default=i},91303:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.makeOperatorsExplicit=t.isMatchingIndex=t.getIndexFields=t.transformSort=t.getIndexNameFromFields=t.makeKeyFromPartialFilter=t.normalizeDesignDoc=void 0;var a=r(n(98235)),i=r(n(90402)),o=r(n(64512)),c=r(n(91175)),s=r(n(27361)),u=r(n(18446)),l=r(n(13218));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.normalizeDesignDoc=function(e){var t=e._id||e.id;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:t,_id:t},e.doc)};var f=function e(t){return"object"!=typeof t||null===t?String(t):Object.entries(t).map(function(t){var n=(0,i.default)(t,2),r=n[0],a=n[1];return Array.isArray(a)&&a.every(function(e){return"string"==typeof e})?"".concat(r,"_(").concat(a.join("_"),")"):Array.isArray(a)?"(".concat(a.map(function(t){return"".concat(e(t))}).join(")_".concat(r,"_(")),")"):"object"==typeof a?"".concat(r,"_").concat(e(a)):"".concat(r,"_").concat(a)}).join(")_and_(")};t.makeKeyFromPartialFilter=f,t.getIndexNameFromFields=function(e,t){var n="by_".concat(e.join("_and_"));return t?"".concat(n,"_filter_(").concat(f(t),")"):n},t.transformSort=function(e){if(!e||Array.isArray(e))return e;throw Error('Passing an object to the "sort" is not supported')},t.getIndexFields=function(e){var t=e.selector,n=e.partialFilter,r=e.sort;return Array.from(new Set([].concat((0,a.default)((void 0===r?[]:r).map(function(e){return(0,c.default)(Object.keys(e))})),(0,a.default)(t?Object.keys(t):[]),(0,a.default)(n?Object.keys(n):[]))))},t.isMatchingIndex=function(e,t,n){var r=Object.keys((0,s.default)(e,"views"))[0],a=Object.keys((0,s.default)(e,"views.".concat(r,".map.fields")));if((0,u.default)(a,t)){var i=(0,s.default)(e,"views.".concat(r,".map.partial_filter_selector"));if(!n&&!i)return!0;var o=p(null!=n?n:{});if((0,u.default)(o,i))return!0}return!1};var p=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object.entries(t).reduce(function(t,r){var a,c=(0,i.default)(r,2),s=c[0],u=c[1];return"$nor"===s?t.$and=u.map(function(e){return Object.entries(e).reduce(function(e,t){var n=(0,i.default)(t,2),r=n[0],a=n[1];return"string"==typeof a?e[r]={$ne:a}:e[r]=p(a,!0),e},{})}).sort(h):null!==(a=u.$or)&&void 0!==a&&a.every(function(e){return"string"==typeof e})?t.$or=u.$or.map(function(t){return e((0,o.default)({},s,t),n)}).sort(h):Array.isArray(u)&&u.every(l.default)?t[s]=u.map(function(t){return e(t,n)}).sort(h):(0,l.default)(u)&&!Array.isArray(u)?t[s]=e(u,n):n&&"$eq"===s?t.$ne=u:s.startsWith("$")?t[s]=u:t[s]={$eq:u},t},{}),a=Object.keys(r).sort();return 1===a.length?r:{$and:a.map(function(e){return(0,o.default)({},e,r[e])})}};t.makeOperatorsExplicit=p;var h=function(e,t){var n=Object.keys(e)[0],r=Object.keys(t)[0];return n.localeCompare(r)}},89292:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReturned=t.default=void 0;var a=r(n(65105)),i=r(n(25665)),o=r(n(27952)),c=r(n(12323)),s=function(e){(0,i.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,c.default)(r);return e=t?Reflect.construct(n,arguments,(0,c.default)(this).constructor):n.apply(this,arguments),(0,o.default)(this,e)});function r(){return(0,a.default)(this,r),n.apply(this,arguments)}return r}((0,r(n(15500)).default)(String));t.ErrorReturned=s;var u=function(e,t){for(var n=Date.now(),r=0,a=Object.keys(e);r<a.length;r++){var i=a[r];n-e[i].date>t&&delete e[i]}};t.default=function(e,t){var n={};return function(){var r=t.key.apply(null,arguments);u(n,t.maxDuration);var a=n[r];if(a)return a.result;var i=e.apply(this,arguments);return n[r]={result:i,date:Date.now()},"object"==typeof i&&"function"==typeof i.then&&i.then(function(e){e instanceof s&&delete n[r]}).catch(function(e){delete n[r]}),i}}},63818:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeDoc=c,t.normalizeDoctypeJsonApi=function(e){return function(t,n){var r=c(t,e);return o(o({},r),r.attributes||{})}},t.normalizeDoctypeRawApi=function(e){return function(t,n){var r=c(n,e);return o(o({},r),r.attributes||{})}};var a=r(n(64512));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e._id||e.id;return o({id:n,_id:n,_type:t},e)}},6678:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=function(){var e;function t(){(0,o.default)(this,t),this.pending={}}return(0,c.default)(t,[{key:"exec",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),(i=this.pending[r])?o=i:(o=t(),this.pending[r]=o),e.prev=3,e.next=6,o;case 6:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,this.pending[r]=null,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(t,n){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=e(),n=this.pending[t];return n||null}}]),t}();t.default=s},66343:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.buildURL=t.encode=void 0;var a=r(n(90402)),i=r(n(35937)),o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(t)?"["+t.map(function(t){return e(t,!0)}).join(",")+"]":n?encodeURIComponent('"'.concat(t,'"')):encodeURIComponent(t)},c=function(e){return Object.entries(e).map(function(e){var t=(0,a.default)(e,2),n=t[0],r=o(t[1]);return"".concat(n,"=").concat(r)}).join("&")};t.encode=c,t.buildURL=function(e,t){var n=c((0,i.default)(t));return n?"".concat(e,"?").concat(n):e}},36369:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={}},65987:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinPath=function(e,t){return"".concat(e).concat(e.endsWith("/")?"":"/").concat(t)},t.encodePath=t.forceDownload=t.formatBytes=t.slugify=t.sleep=t.attempt=t.uri=void 0,t.uri=function(e){for(var t=[e[0]],n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t.push(encodeURIComponent(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])+e[n+1]);return t.join("")},t.attempt=function(e){return e.then(function(){return!0}).catch(function(){return!1})},t.sleep=function(e,t){return new Promise(function(n){setTimeout(n,e,t)})},t.slugify=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},t.formatBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},t.forceDownload=function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},t.encodePath=function(e){return e.split("/").map(function(e){return encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29")}).join("/")}},1433:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldXMLHTTPRequestBeUsed=t.fetchWithXMLHttpRequest=void 0;var i=a(n(68434)),o=a(n(90402)),c=a(n(82007)),s=a(n(88306)),u=(r=(0,c.default)(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,r){var a=new XMLHttpRequest;n.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",n.onUploadProgress,!1),a.onload=function(){4==this.readyState?e(this):r(this)},a.onerror=function(e){r(e)},a.open(n.method,t,!0),a.withCredentials=!0;for(var i=0,c=Object.entries(n.headers);i<c.length;i++){var s=(0,o.default)(c[i],2),u=s[0],l=s[1];a.setRequestHeader(u,l)}a.send(n.body)});case 2:return r=e.sent,e.abrupt("return",{headers:new Headers(r.getAllResponseHeaders().split("\r\n").map(function(e){return e.split(":",2)}).filter(function(e){return 2==e.length})),ok:r.status>=200&&r.status<300,text:function(){var e=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.responseText);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),json:function(){var e=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(r.responseText));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),status:r.status,statusText:r.statusText});case 4:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.fetchWithXMLHttpRequest=u;var l=(0,s.default)(function(){var e=new XMLHttpRequest;return"onload"in e&&"onprogress"in e});t.shouldXMLHTTPRequestBeUsed=function(e,t,n){return!!n.onUploadProgress&&l()}},11461:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(64512)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=r(n(37203)),l=r(n(88838)),d=r(n(77123)),f=n(86540),p=r(n(74268)),h=n(83462);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=function(){var e,t,n,r,i;function u(e){var t=this;(0,c.default)(this,u),this.client=(0,h.getCozyClientFromOptions)(e),this.createWebSocket=e.createWebSocket||h.createWebSocket,this.logger=e.logger||p.default,this.subscriptions=new d.default({logger:e.logger}),this.retryManager=new l.default({raiseErrorAfterAttempts:f.raiseErrorAfterAttempts,timeBeforeSuccessful:f.timeBeforeSuccessful,baseWaitAfterFirstFailure:f.baseWaitAfterFirstFailure,maxWaitBetweenRetries:f.maxWaitBetweenRetries,logger:e.logger}),this.retryManager.on("error",function(e){return t.emit("error",e)}),this.bindEventHandlers()}return(0,s.default)(u,[{key:"start",value:function(){!this.isStarted&&(this.logger.info("started"),this.isStarted=!0,this.retryManager.reset(),this.subscribeGlobalEvents(),this.subscribeClientEvents(),this.emit("start"),(0,h.isOnline)()&&this.connect())}},{key:"createSocket",value:function(){this.websocket&&(this.logger.error("Unexpected replacement of an existing socket, this should not happen. A `revokeWebSocket()` should have been called first inside CozyRealtime"),this.revokeWebSocket()),this.logger.info("creating a new websocket…");var e=(0,h.getUrl)(this.client);try{return this.websocket=this.createWebSocket(e,h.protocol),this.websocket.authenticated=!1,this.websocket.onmessage=this.onWebSocketMessage,this.websocket.onerror=this.onWebSocketError,this.websocket.onopen=this.onWebSocketOpen,this.websocket.onclose=this.onWebSocketClose,this.websocket}catch(e){this.onWebSocketError(e)}}},{key:"connect",value:(e=(0,o.default)(a.default.mark(function e(){var t,n,r=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0!==(t=(r.length>0&&void 0!==r[0]?r[0]:{}).immediate)&&t,this.logger.info("connecting…"),!this.waitingForConnect){e.next=7;break}this.logger.debug("Pending reconnection, skipping reconnect"),n&&this.retryManager.stopCurrentAttemptWaitingTime(),e.next=17;break;case 7:if(this.logger.debug("No pending reconnection, will reconnect"),e.prev=8,this.waitingForConnect=!0,n){e.next=13;break}return e.next=13,this.retryManager.waitBeforeNextAttempt();case 13:this.createSocket();case 14:return e.prev=14,this.waitingForConnect=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[8,,14,17]])})),function(){return e.apply(this,arguments)})},{key:"reconnect",value:(t=(0,o.default)(a.default.mark(function e(){var t,n,r=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=void 0!==(t=(r.length>0&&void 0!==r[0]?r[0]:{}).immediate)&&t,this.hasWebSocket()&&this.revokeWebSocket(),this.connect({immediate:n});case 3:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"revokeWebSocket",value:function(){var e=this;if(this.emit("disconnected"),this.hasWebSocket()){this.logger.info("trashing the previous websocket…"),this.websocket.onmessage=null,this.websocket.onerror=function(t){e.logger.error("Error while trying to close the websocket: ".concat(t.message))},this.websocket.onopen=null,this.websocket.onclose=null;try{this.websocket.close()}catch(e){}finally{this.websocket=null}}else this.logger.error("Trying to revoke a websocket that is not attached. This should not happen")}},{key:"stop",value:function(){this.isStarted&&(this.logger.info("stopped"),this.unsubscribeGlobalEvents(),this.unsubscribeClientEvents(),this.hasWebSocket()&&this.revokeWebSocket(),this.isStarted=!1,this.subscriptions.isEmpty()||this.unsubscribeAll(),this.emit("close"))}},{key:"authenticate",value:function(){if(this.isWebSocketOpen()){var e=(0,h.getToken)(this.client);this.logger.debug("authenticate with",e),this.sendWebSocketMessage("AUTH",e),this.websocket.authenticated=!0}else this.logger.error("Trying to authenticate to a non-opened websocket. This should not happen.",this.websocket,this.websocket&&this.websocket.readyState)}},{key:"sendWebSocketMessage",value:function(e,t){var n=JSON.stringify({method:e,payload:t});this.websocket.send(n)}},{key:"sendNotification",value:(n=(0,o.default)(a.default.mark(function e(t,n,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.getStackClient().fetchJSON("POST","/realtime/".concat(t,"/").concat(n),{data:r}));case 1:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"send",value:function(){return this.sendDeprecationNoticeSent||(this.sendDeprecationNoticeSent=!0,this.logger.warn("Deprecation notice: CozyRealtime.send() is deprecated, please use CozyRealtime.sendNotification() from now on")),this.sendNotification.apply(this,arguments)}},{key:"waitForSocketReady",value:(r=(0,o.default)(a.default.mark(function e(){var t=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isWebSocketAuthenticated()){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",new Promise(function(e,n){t.once("ready",e),t.once("close",n)}));case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"hasWebSocket",value:function(){return!!this.websocket}},{key:"isWebSocketOpen",value:function(){return!!(this.hasWebSocket()&&this.websocket.readyState===WebSocket.OPEN)}},{key:"isWebSocketAuthenticated",value:function(){return!!(this.isWebSocketOpen()&&this.websocket.authenticated)}},{key:"subscribe",value:function(e,t,n,r){this.start();var a=this.normalizeSubscription(e,t,n,r),i=this.subscriptions.hasSameTypeAndId(a);this.subscriptions.add(a),!i&&this.isWebSocketAuthenticated()&&this.sendSubscription(a.type,a.id)}},{key:"unsubscribe",value:function(e,t,n,r){var a=this.normalizeSubscription(e,t,n,r);this.subscriptions.remove(a),!this.subscriptions.hasSameTypeAndId(a)&&this.isWebSocketAuthenticated()&&this.sendUnsubscription(a.type,a.id),this.subscriptions.isEmpty()&&this.stop()}},{key:"unsubscribeAll",value:function(){var e,t=y(this.subscriptions.getAll());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.event,a=n.type,i=n.id,o=n.handler;this.unsubscribe(r,a,i,o)}}catch(e){t.e(e)}finally{t.f()}}},{key:"sendSubscriptions",value:function(){var e,t=y(this.subscriptions.getAllTypeAndIdPairs());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.type,a=n.id;this.sendSubscription(r,a)}}catch(e){t.e(e)}finally{t.f()}}},{key:"sendSubscription",value:function(e,t){if(this.isWebSocketOpen()){var n=t?{type:e,id:t}:{type:e};this.logger.debug("send subscription to",n.type,n.id),this.sendWebSocketMessage("SUBSCRIBE",n)}else this.logger.error("Trying to subscribe on a non-ready socket. This should not happen. Type and id:",e,t)}},{key:"sendUnsubscription",value:function(e,t){if(this.isWebSocketOpen()){var n=t?{type:e,id:t}:{type:e};this.logger.debug("send unsubscription to",n.type,n.id),this.sendWebSocketMessage("UNSUBSCRIBE",n)}else this.logger.error("Trying to subscribe on a non-ready socket. This should not happen. Type and id:",e,t)}},{key:"normalizeSubscription",value:function(e,t,n,r){return{event:e?e.toUpperCase():e,type:t,id:r?n:null,handler:r||n}}},{key:"bindEventHandlers",value:(i=(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.onWebSocketMessage=this.onWebSocketMessage.bind(this),this.onWebSocketError=this.onWebSocketError.bind(this),this.onWebSocketOpen=this.onWebSocketOpen.bind(this),this.onWebSocketClose=this.onWebSocketClose.bind(this),this.onClientLogin=this.onClientLogin.bind(this),this.onClientTokenRefreshed=this.onClientTokenRefreshed.bind(this),this.onClientLogout=this.onClientLogout.bind(this),this.onOnline=this.onOnline.bind(this),this.onOffline=this.onOffline.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this);case 10:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"onWebSocketMessage",value:function(e){var t=JSON.parse(e.data),n=t.event,r=t.payload;this.logger.info("receive message from server",{event:n,payload:r});var a,i=y(this.subscriptions.getAllHandlersForEvent(n,r.type,r.id));try{for(i.s();!(a=i.n()).done;){var o=a.value;try{o(v(v({},r.doc),{},{_type:r.type}))}catch(e){this.logger.error("handler did throw for ".concat(n,", ").concat(r.type,", ").concat(r.id))}}}catch(e){i.e(e)}finally{i.f()}"error"===n&&this.logger.warn("Stack returned an error",r)}},{key:"onWebSocketError",value:function(e){this.logger.info("An error was raised on the websocket",e),this.retryManager.onFailure(e),this.reconnect()}},{key:"onWebSocketOpen",value:function(){this.retryManager.onSuccess(),this.authenticate(),this.sendSubscriptions(),this.emit("ready")}},{key:"onWebSocketClose",value:function(e){this.logger.info("The current websocket was closed by a third party",e),this.retryManager.onFailure(e),this.reconnect()}},{key:"subscribeClientEvents",value:function(){this.client.on("login",this.onClientLogin),this.client.on("tokenRefreshed",this.onClientTokenRefreshed),this.client.on("logout",this.onClientLogout)}},{key:"unsubscribeClientEvents",value:function(){this.client.removeListener("login",this.onClientLogin),this.client.removeListener("tokenRefreshed",this.onClientTokenRefreshed),this.client.removeListener("logout",this.onClientLogout)}},{key:"onClientLogin",value:function(){this.logger.info("Received login from cozy-client"),this.isWebSocketOpen()&&(this.authenticate(),this.sendSubscriptions())}},{key:"onClientTokenRefreshed",value:function(){this.hasWebSocket()&&this.reconnect()}},{key:"onClientLogout",value:function(){this.hasWebSocket()&&this.revokeWebSocket()}},{key:"subscribeGlobalEvents",value:function(){h.hasBrowserContext&&window.addEventListener&&(window.addEventListener("online",this.onOnline),window.addEventListener("offline",this.onOffline),window.addEventListener("visibilitychange",this.onVisibilityChange))}},{key:"unsubscribeGlobalEvents",value:function(){h.hasBrowserContext&&window.removeEventListener&&(window.removeEventListener("online",this.onOnline),window.removeEventListener("offline",this.onOffline),window.removeEventListener("visibilitychange",this.onVisibilityChange))}},{key:"onOnline",value:function(){this.logger.info("reconnect because receiving an online event"),this.reconnect({immediate:!0})}},{key:"onOffline",value:function(){this.hasWebSocket()&&this.revokeWebSocket()}},{key:"onVisibilityChange",value:function(){document.visibilityState&&"visible"===document.visibilityState&&this.retryManager.stopCurrentAttemptWaitingTime()}}]),u}();u.default.mixin(g),t.default=g},81935:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(11461)),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e),this.client=t,this.createWebSocket=n.createWebSocket,this.logger=n.logger,this.realtime=null,this.handleLogin=this.handleLogin.bind(this),this.handleLogout=this.handleLogout.bind(this),this.client.on("login",this.handleLogin),this.client.on("logout",this.handleLogout),t.isLogged&&this.handleLogin()}return(0,i.default)(e,[{key:"handleLogin",value:function(){this.realtime=new o.default({client:this.client,createWebSocket:this.createWebSocket,logger:this.logger}),this.client.emit("plugin:realtime:login")}},{key:"handleLogout",value:function(){this.unsubscribeAll(),this.realtime=null,this.client.emit("plugin:realtime:logout")}},{key:"checkRealtimeInstance",value:function(){if(!this.realtime)throw Error("Unable to use realtime while cozy-client is not logged in")}},{key:"subscribe",value:function(){var e;this.checkRealtimeInstance(),(e=this.realtime).subscribe.apply(e,arguments)}},{key:"unsubscribe",value:function(){var e;this.checkRealtimeInstance(),(e=this.realtime).unsubscribe.apply(e,arguments)}},{key:"unsubscribeAll",value:function(){this.checkRealtimeInstance(),this.realtime.unsubscribeAll()}},{key:"sendNotification",value:function(){var e;this.checkRealtimeInstance(),(e=this.realtime).sendNotification.apply(e,arguments)}}]),e}();c.pluginName="realtime",t.default=c},88838:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(37203)),u=n(86540),l=r(n(74268)),d=function(){var e;function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.maxWaitBetweenRetries,r=void 0===n?u.maxWaitBetweenRetries:n,a=e.baseWaitAfterFirstFailure,i=void 0===a?u.baseWaitAfterFirstFailure:a,c=e.timeBeforeSuccessful,s=void 0===c?u.timeBeforeSuccessful:c,d=e.raiseErrorAfterAttempts,f=void 0===d?u.raiseErrorAfterAttempts:d,p=e.logger,h=void 0===p?l.default:p;(0,o.default)(this,t),this.logger=h,this.reset(),this.onSuccess=this.onSuccess.bind(this),this.onFailure=this.onFailure.bind(this),this.onSuccessAcknowledged=this.onSuccessAcknowledged.bind(this),this.raiseErrorAfterAttempts=f,this.timeBeforeSuccessful=s,this.baseWaitAfterFirstFailure=i,this.maxWaitBetweenRetries=r}return(0,c.default)(t,[{key:"onSuccess",value:function(){this.timeBeforeSuccessful>0?this.startSuccessTimer(this.onSuccessAcknowledged,this.timeBeforeSuccessful):this.onSuccessAcknowledged()}},{key:"onSuccessAcknowledged",value:function(){this.emit("success"),this.reset()}},{key:"clearSuccessTimer",value:function(){this.successTimer&&(n.g.clearTimeout(this.successTimer),this.successTimer=null)}},{key:"startSuccessTimer",value:function(e,t){var r=this;this.successTimer||(this.successTimer=n.g.setTimeout(function(){r.successTimer=null,e()},t))}},{key:"onFailure",value:function(e){this.logger.debug("failure, increase the failure counter of the retry manager"),this.clearSuccessTimer(),this.increaseFailureCounter(),this.emit("failure",e),this.shouldEmitError()&&this.emit("error",e)}},{key:"shouldEmitError",value:function(){return this.retries>0&&this.retries%this.raiseErrorAfterAttempts==0}},{key:"reset",value:function(){this.logger.debug("reset the retry manager"),this.clearSuccessTimer(),this.retries=0,this.wait=0}},{key:"increaseFailureCounter",value:function(){0===this.retries?this.wait=0:0===this.wait?this.wait=this.baseWaitAfterFirstFailure:this.wait=Math.min(2*this.wait,this.maxWaitBetweenRetries),this.retries=this.retries+1}},{key:"waitBeforeNextAttempt",value:(e=(0,i.default)(a.default.mark(function e(){var t,r,i=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.logger.debug("waitBeforeNextAttempt",this.wait),!this.wait){e.next=5;break}return this.waiting||((r=new Promise(function(e){t=function(){i.waiting===r&&(i.waiting=null),e()},n.g.setTimeout(t,i.wait)})).stop=t,this.waiting=r),e.next=5,this.waiting;case 5:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"stopCurrentAttemptWaitingTime",value:function(){this.waiting&&this.waiting.stop()}}]),t}();s.default.mixin(d),t.default=d},77123:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=r(n(18446)),c=r(n(78718)),s=r(n(82257)),u=r(n(82729)),l=r(n(87185)),d=n(86540),f=r(n(74268));t.default=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),this.subscriptions=[],this.logger=t.logger||f.default}return(0,i.default)(e,[{key:"add",value:function(e){var t=this.normalize(e);(!this.subscriptions.find(function(e){return(0,o.default)(e,t)})||(d.onDoubleSubscriptions&&(0,d.onDoubleSubscriptions)(t,{logger:this.logger}),d.allowDoubleSubscriptions))&&this.subscriptions.push(t)}},{key:"remove",value:function(e){var t=this.normalize(e);if(d.requireDoubleUnsubscriptions){var n=this.subscriptions.findIndex(function(e){return(0,o.default)(e,t)});if(n>=0){(0,s.default)(this.subscriptions,n);return}}else{var r=(0,u.default)(this.subscriptions,function(e){return(0,o.default)(e,t)});if(r&&r.length>0)return}this.logger.warn("Trying to unsubscribe to an unknown subscription",t)}},{key:"getAll",value:function(){return this.subscriptions.slice()}},{key:"getAllTypeAndIdPairs",value:function(){return(0,l.default)(this.subscriptions.map(function(e){return(0,c.default)(e,["type","id"])}),o.default)}},{key:"hasSameTypeAndId",value:function(e){var t=e.type,n=e.id,r=t||null,a=n||null;return!!this.subscriptions.find(function(e){return e.type===r&&e.id===a})}},{key:"getAllHandlersForEvent",value:function(e,t,n){var r=this;return this.subscriptions.filter(function(a){return r.isMatchingEvent(a,e,t,n)}).map(function(e){return e.handler})}},{key:"isMatchingEvent",value:function(e,t,n,r){return(!e.event||e.event===t)&&(!e.id||e.id===(r||null))&&(!e.type||e.type===(n||null))}},{key:"isEmpty",value:function(){return 0===this.subscriptions.length}},{key:"normalize",value:function(e){function t(e){throw this.logger.error(e),Error(e)}return e.event&&!d.eventNames.includes(e.event)&&t("Trying to subscribe to a unknown event name ".concat(e.event)),"function"!=typeof e.handler&&t("Trying to subscribe with a non-function handler ".concat(e.event)),"error"!==e.event&&"string"!=typeof e.type&&t("Trying to subscribe with to non-string type ".concat(e.type)),e.id&&"string"!=typeof e.id&&t("Trying to subscribe with to non-string id ".concat(e.id)),{event:e.event||null,type:e.type||null,id:e.id||null,handler:e.handler||null}}}]),e}()},86540:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.timeBeforeSuccessful=t.requireDoubleUnsubscriptions=t.raiseErrorAfterAttempts=t.onDoubleSubscriptions=t.maxWaitBetweenRetries=t.eventNames=t.baseWaitAfterFirstFailure=t.allowDoubleSubscriptions=void 0;var a=r(n(74268));t.maxWaitBetweenRetries=3e5,t.baseWaitAfterFirstFailure=128,t.timeBeforeSuccessful=1200,t.raiseErrorAfterAttempts=8;var i=t.allowDoubleSubscriptions=!0,o=t.requireDoubleUnsubscriptions=!0;t.onDoubleSubscriptions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.logger,r=void 0===n?a.default:n;r.warn("Double subscription for ",e),i?(r.info("The handler may be called twice for the same event!"),r.info("Remember to call one `unsubscribe` for each `subscribe`")):(r.info("The handler will only be called once"),o?r.info("Remember to call one `unsubscribe` for each `subscribe`"):r.info("`unsubscribe` will remove all similar subscriptions"))},t.eventNames=["CREATED","UPDATED","DELETED","NOTIFIED","error"]},72916:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RealtimePlugin",{enumerable:!0,get:function(){return o.default}}),t.default=void 0,Object.defineProperty(t,"useRealtime",{enumerable:!0,get:function(){return i.default}});var a=r(n(11461)),i=r(n(72841)),o=r(n(81935));t.default=a.default},74268:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i="undefined"!=typeof window&&window.minilog||a.default,o=i("cozy-realtime");o.minilog=a.default,i.enable(),i.suggest.deny("cozy-realtime","warn"),i.suggest.allow("cozy-realtime","warn"),t.default=o},72841:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(90402)),c=n(67294);t.default=function(e,t,n){(0,c.useEffect)(function(){if(!e.plugins||!e.plugins.realtime){console.error("[useRealtime] The provided CozyClient instance does not have a RealtimePlugin registered, useRealtime will not work");return}return Object.entries(t).forEach(function(t){var n,r=(0,o.default)(t,2),c=r[0];Object.entries(r[1]).forEach((n=(0,i.default)(a.default.mark(function t(n){var r,i,s;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(r=(0,o.default)(n,2))[0],s=r[1],t.prev=1,t.next=4,e.plugins.realtime.subscribe(i,c,s);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0),console.error("[useRealtime] Impossible to subscribe to ".concat(i," event on ").concat(c,". Does your app have the required permissions on this doctype?"));case 10:case"end":return t.stop()}},t,null,[[1,6]])})),function(e){return n.apply(this,arguments)}))}),function(){Object.entries(t).forEach(function(t){var n,r=(0,o.default)(t,2),c=r[0];Object.entries(r[1]).forEach((n=(0,i.default)(a.default.mark(function t(n){var r,i,s;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(r=(0,o.default)(n,2))[0],s=r[1],t.prev=1,t.next=4,e.plugins.realtime.unsubscribe(i,c,s);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0),console.error("[useRealtime] Impossible to unsubscribe from ".concat(i," event on ").concat(c,". Does your app have the required permissions on this doctype?"));case 10:case"end":return t.stop()}},t,null,[[1,6]])})),function(e){return n.apply(this,arguments)}))})}},n)}},83462:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.createWebSocket=function(e,t){return new WebSocket(e,t)},t.getCozyClientFromOptions=function(e){var t=e.cozyClient,n=e.client,r=e.logger,a=void 0===r?i.default:r;return t?a.warn("Passing a `cozyClient` parameter is deprecated, please use `client` instead"):n||a.warn("Realtime must be initialized with a client. Ex: `new Realtime({ client })`"),n||t},t.getToken=function(e){return e.getStackClient().getAccessToken()},t.getUrl=function(e){var t=e.getStackClient().uri,n=t.toString().match("^(https:/{2})")?"wss:":"ws:",r=new URL(t).host;return"".concat(n,"//").concat(r,"/realtime/")},t.hasBrowserContext=void 0,t.isOnline=function(){return!(0,a.default)(n.g,"navigator.onLine")||n.g.navigator.onLine},t.protocol=void 0;var a=r(n(18721)),i=r(n(74268));t.hasBrowserContext="undefined"!=typeof window,t.protocol="io.cozy.websocket"},34029:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(45697)),i=r(n(67294)),o=r(n(27507)),c=r(n(10821)),s=r(n(55613)),u=r(n(86108)),l=n(83972),d=function(e){var t=e.componentsProps;return(0,o.default)(l.locales),i.default.createElement("div",{className:"u-mh-auto u-w-100 u-maw-100"},i.default.createElement(c.default,null,i.default.createElement(u.default,null,i.default.createElement(s.default,{componentsProps:t}))))};d.propTypes={componentsProps:a.default.shape({SearchBarDesktop:a.default.shape({elevation:a.default.bool,size:a.default.string,hasHalfBorderRadius:a.default.bool})})},t.default=d},40185:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.AssistantIcon=void 0;var a=r(n(95297)),i=r(n(80295)),o=r(n(67294)),c=["height","width","style"];t.AssistantIcon=function(e){var t=e.height,n=e.width,r=e.style,s=(0,i.default)(e,c);return o.default.createElement("img",(0,a.default)({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAC9FBMVEUAAAD1U50zpPBCif0YvucF1OBEhfv/UpT/RJ5Dgf//Qp9DhP7+RaH6SaJFhP3/hFtDgv8fsO02lPlrdOz/tCoes+3/si0mqfD2SKT/VY4lqvD/tyiDbuP/h1j/uikYuek2lPn/bnNAiPwmqPD1TKb/pDwD1N//T5Eqo/L/jVNEhP3/b3FNf/r/cG+9WMPWULWbZNL/RJ3/X4H/h1ZTgPW1Vcplde2+WsL/eGf/gV8F0uHQUrf/WocIzuGhYc//uSWFbN7QUbckq+8H0OD/tygH0eH/tSmvXcn/j1GPaNj/RJ7/siv+VJKjYdD/tSsIzd8E1t//emfRUbYVv+f/TpO3W8Qjq+8unvR5b+P/bXJcefOlYM0YvOkD1d7/rTNnde3/U48D1t0Iz+Fuc+z/Qp9Egv9Dgf9Eg///qzQMyeP/qDY1lfglqfAKzeIIzuE3kvkLy+P/rTIPxuQ/iP0ro/MNyOP/pDs7jvsiru4ymfYsoPQppfL/gGD/pjgnp/H/fWNBhv48i/w5kPoes+wVvugunvQQxeUG0eD/d2kjrO8fse0auOr/anb/ry//T5L/bXP/dGz/emb/l0f/oD8UwOf/Vov/Wob/ZXv/Z3n/kk0zl/dfePKDbN//jlL/lUr/YID/cm7/h1j/kE//mkX/nEMwm/Yctez/VI3/Y37/i1T/oj1kdu8Yu+kRw+YSwubRUbf/TJX/UY//b3D/nkH/sS1DhP8btuuSZ9jdTbH/XIT/g13/iVZGgf4+iv0vnPVpde2kYc7sSan8Q6H/R5r/hFsXvOl6b+R+beKyXMfhTK/4RaP/Q57/RZxQffkTwOZ2cOaIa922W8XBV8DHVbzVULXwR6f0Rqb/XoJaefRyceiWZdWfYtH/SZj/WIlMfvtXe/auXcnLU7roSqz/SpYZueqOaNmnYM2qX8q5WcO9WMHZT7PlS63/syxJf/1TfPcgr+5vcumLaduZZNOcY9L/tSltc+rEVr3/uCYE1N/OU7j9SKINyOUKkDUGAAAAZHRSTlMAIBAgIINgEIDv79/dxZWDgIB/f3/v77mTf19cICAg/e/Xz5RfEO/v39q/urWIf39gYGBgUBDv7+/v7u7n39/f19fPz8+/v7ewr6+on4+PYF9YV1BQ/fzv7+/u7t/f38/Pr59fgyzHzgAACBpJREFUaN7tlkOUXVEURG9s27Zt27Zt27Zt27Zt27atSerg596Yg2StVH53T7L2flXnBeZ//ud//qakSFwgV8Zym889y5inQOLwf5yeMNfuy5dv3dy8+dy5p0/PrlqVGY4/iU91+8ju3SJ49vTs2VU3bjw5nOePKRKmunNHBTc9gidPDo8fH+yP4L1keXn0KARHILjFAiyEAhDsyvwHShRNd+zlSwi0ghWMh2Bn6eS/y0905cqxY1LBCjwFdu08dCjYb/IXvWEDBCWOuALhQ3DmtwxFjy8ig1ZQAS2EAsp//Ljab9w33XGPwRVoAeW/SPnrl85y964YjqmBBLIQCih/06ZKv3yA1autQSqoAAUsf9O8YL840J49q0khBlT4IEABDAT+ixfAz5uX0usvCULfcw1c4fItCLAQBmL+JuaPGxfslwpcvQcDKTATDFyBBSggfMEjZX+lQvSrV6GAQw0Y6TYJsJDlM/706dO/UiHAli1QcAs20EhHLm9+dhYnZr4+/mnkUvxfWOjEFgQOLUEGFlAB8PXxiY489PrzC51ArIINL2/vvvls1eFdO8+88OAJjhzw+fPv0MmTJ09QxIESx98cO3rk5rMb45lv6QcoAX/+BHtPStQBxd1Fx27fenoYfMJb+EXk54/gf69GJaS4u+jo5bPjz2wCHnRmSx488PfTgq0SayHH6kVHbpyZB7qgH2jWP1jv56cF1atvrV4dBnxpyLNl0ZlLBy4S05Ma+KpZo2aNHyf7ShI6r3+/1b+WGjXdEFq+11rhL25An96+S/cd4Py2bfv37fsa/60fwin8wzfwa61Y0blzs2ZRyfF1fJhYi6+RYP9XBf79MVBjXWjQmQTNNmwI+FVFmFgDF0Nw/luCAPFrYA8BWw2ywiPo0qVL0C//3VB5IALDtwRvQwdkojogU34tNhAfaeXvCyWSxlqyZAkE12ijrwui+yS8jYePiXQh8Fu1ipz8s3lmzZoFAQzfFnjxqljLl6iA+EjXrkE/4Y8YMQIG3eirgrcBjIlLFWwNYuODt8izEPO7NvrIUPzCBRaggwr2fWUhYwJ/8vwaFXzgN2rk07lv+pFqQIdvCrwY49WP85LWqmUFvBDzRRDZXjr9SAjUgArnz+//Cj+/QQLrOvgBrnxUYAsg9aJ+OMCaNSOhEINW+GoBrQC88vFFwULyCnnwSFAd6NQa1/ANgW/DCWznVzpdGQLiq6AeJbL8Q5r/1ClVwCAVvvwa+TeaqCpQvF0IfMFLxgblApMmfWxgwRf4fjGQxJsfLeCUgODDQEJHuELSSQgcYpCRvnjl4uZD8MdZ4fRLBVKgkeW3adOGKkSZjagCBq2w72sH0DOALXz6oQIUIL7Sid8mFBYaNYoNqhADBF/lq8FeQAUogIEED75khleTdBTFtmDD4vMisPsnMZ8kuR8tYQV4fuUrHQlrEowazQp1wDByxKyB1z4W+Nf7uvHmj/AfWmChVuADr3Bk44yN0Uy80RxxqGLEksX73cd353FnWu+8SJ03gM94hXN6hDJRROCxsGLkiIHbHLwv85V4C7h+PR2aG7Sixxc6o/FBYpv+njiSSWtGnFd8AMF/VeEz6vpa66lCMzw+0YntpBQLNNY1avaI6n795w2dROnfdgSM6299rUZtLLotPm31mxn0eZYunTy4fe1XmXIWDBfx+wKvhX1UqRCzcet2zZG2n8WUsVwE7MmDB/ce0n7CstrLn7969So7O75O95Hj9evXvRo2Xriydf2O7do1Jw2bPC4ThajKRhjfqf2UqdNb1h5w/zk58kX8Oj4m4cFvOvx6t9Z96neEAxYnsU08InvYoPceAv72OWOmDetQe8ByUQT/Mp/wvYBv0LjFguHXZ/aFAQpyWEsokwBkS1f+ugljpi1rWbd2E1LAkekLJbxnEzzxmy7oHmllNxhY4TqimSICt/hO7ddOmTNhzNBlczuwYfl9OEKG+5RfOG0vwgu/58Hu8/vNVIMqxBLW+HLojG+/dvu6OVMnDp0+rCUbUIIUwT+Zh/FI48Z1WvRcQAJUeNQaM6lCBN6NiWfxyp+ybgIJls1lg5S4bw0uv0ED8Juy4DpVeIQOohBHVvzeBETXx1c+Fpo4dNqyYS1b1mWDKJyVijn8Ok2bLlg4vPsOEnAHNqgjLP2fPbXiPXxcYCoJpg+jCmqAImTED/dNq3jwpQAEkfqtRAU2WIV3gwQivIfPBVSwzDUg2Y0mg/Jpf+IvVAFXcA3RDCVGasUr/2MBzgCDKILrAYBXPp7fI8CVuULf1mwoSQIU4Aounwo4AqpQlw1QhIzBA4Gu+2gBnKD7/Pn9qIKMpCWCGE2UD3xPARZMHyYGdKjNBqlQFXTCK18KoMH1fv1mfmSIbTyJkAZ8OrAUUAFXoJGsARVQQAV1ZCArQIOZNJLeIQQNpElGeOF/ENBGXME1oEIhxitfL6ACGKiCdihmnAQCXwtgIZxAGlAFPYOcOqcx2Xh+5nsK0I1FQFfoJhXkANbgFvA0mK4CMTQhQwzvDv+dFeDIImADFMq3KZIGfC4gDVQgV9CRkHCFiM8H1gILdCE1iCBEWPNZIsQBXxcSATbSK9gOBX0I3sPnl1QNEPSTClmd+7ozge8KtII1QJEvR2MdSAvIQriB3SiEzvOFErnB/6QBV9AzIBUzWLxcgF6i4SJgQ4ggXoH6qiJZHI+Aj6ACawhJfHcgLEQNyBAJglAW/3VHoNxxPkykG9mRVNCUGqgABcAPUT5UtLBezf/8z//8z//8k3kPnkAfIbjCSakAAAAASUVORK5CYII=",width:n,height:t,style:r},s))}},14583:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AssistantMobile=void 0;var a=r(n(67294)),i=n(79655),o=r(n(32419)),c=r(n(49843)),s=n(96122),u=r(n(27507)),l=n(40185),d=n(83972),f=function(){var e=(0,s.useI18n)().t,t=(0,i.useNavigate)();return(0,u.default)(d.locales),a.default.createElement(c.default,{size:"medium",icon:a.default.createElement(o.default,{className:"u-ml-1 u-mr-half",icon:l.AssistantIcon,size:24}),type:"button",label:e("assistant.search.placeholder"),onClick:function(){return t("connected/search")}})};t.AssistantMobile=f,t.default=f},10821:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useAssistant=t.default=t.AssistantContext=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(64512)),c=r(n(90402)),s=r(n(36968)),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),l=n(79655),d=n(16396),f=r(n(72841)),p=n(56590),h=n(16893);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=u.default.createContext();t.AssistantContext=b,t.useAssistant=function(){var e=(0,u.useContext)(b);if(!e)throw Error("useAssistant must be used within a AssistantProvider");return e};var g=u.default.memo(function(e){var t,n=e.children,r=(0,l.useParams)().conversationId,m=(0,d.useClient)(),v=(0,u.useState)({message:{},status:"pending",messagesId:[]}),g=(0,c.default)(v,2),x=g[0],w=g[1];(0,f.default)(m,(0,o.default)({},h.CHAT_CONVERSATIONS_DOCTYPE,{created:function(e){(0,p.pushMessagesIdInState)(r,e,w)},updated:function(e){(0,p.pushMessagesIdInState)(r,e,w)}}),[]),(0,f.default)(m,(0,o.default)({},h.CHAT_EVENTS_DOCTYPE,{created:function(e){w(function(t){if(!(0,p.isMessageForThisConversation)(e,t.messagesId))return t;if("done"===e.object&&"idle"!==t.status)return y(y({},t),{},{status:"idle"});if("delta"===e.object){var n=(0,s.default)(t.message,e.position,e.content);return y(y({},t),{},{message:n,status:"writing"})}return t})}}),[]);var k=(0,u.useCallback)(function(){return w({message:{},status:"pending",messagesId:[]})},[]),O=(0,u.useCallback)((t=(0,i.default)(a.default.mark(function e(t,n){var r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.value,i=t.conversationId,r){e.next=3;break}return e.abrupt("return");case 3:return null==n||n(),k(),e.next=7,m.stackClient.fetchJSON("POST","/ai/chat/conversations/".concat(i),{q:r});case 7:w(function(e){return y(y({},e),{},{status:"pending"})});case 8:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[m,k]),_=(0,u.useMemo)(function(){return{assistantState:x,setAssistantState:w,clearAssistant:k,onAssistantExecute:O}},[x,k,O]);return u.default.createElement(b.Provider,{value:_},n)});t.default=g},75912:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(95297)),i=r(n(80295)),o=r(n(67294)),c=r(n(32419)),s=n(96122),u=r(n(38553)),l=r(n(62906)),d=n(40185),f=["label","className","id","sources"];t.default=function(e){var t=e.label,n=e.className,r=e.id,p=e.sources,h=(0,i.default)(e,f),m=(0,s.useI18n)().t;return o.default.createElement(o.default.Fragment,null,o.default.createElement(u.default,(0,a.default)({},h,{label:t,className:n,icon:o.default.createElement(c.default,{icon:d.AssistantIcon,size:32}),name:m("assistant.name")})),(null==p?void 0:p.length)>0&&o.default.createElement(l.default,{messageId:r,sources:p}))}},42e3:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(80295)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(16396),c=r(n(75912)),s=r(n(96383)),u=r(n(43623)),l=n(10821),d=n(56590),f=n(16893),p=["data"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var m=function(e){var t,n,r,a,o,f=e.conversation,p=e.myself,h=(0,l.useAssistant)().assistantState,m=(0,i.useRef)(),v=Object.keys(h.message).length,y="idle"!==h.status||(null==f?void 0:null===(t=f.messages)||void 0===t?void 0:null===(n=t[(null==f?void 0:null===(r=f.messages)||void 0===r?void 0:r.length)-1])||void 0===n?void 0:n.role)==="user";return(0,i.useEffect)(function(){var e,t;null===(e=m.current)||void 0===e||null===(t=e.lastElementChild)||void 0===t||t.scrollIntoView(!1)},[null==f?void 0:null===(a=f.messages)||void 0===a?void 0:a.length,h.status,v]),i.default.createElement("div",{ref:m},null==f?void 0:null===(o=f.messages)||void 0===o?void 0:o.map(function(e,t){return"user"===e.role?i.default.createElement(u.default,{key:f._id+"--"+t,className:"u-mt-1-half",myself:p,label:e.content}):t!==(null==f?void 0:f.messages.length)-1?i.default.createElement(c.default,{key:f._id+"--"+t,className:"u-mt-1-half",id:e.id,label:e.content,sources:e.sources}):y?null:i.default.createElement(c.default,{key:f._id+"--"+t,className:"u-mt-1-half",id:e.id,label:e.content,sources:e.sources})}),y&&i.default.createElement(s.default,{isLoading:"pending"===h.status,label:(0,d.getInstantMessage)(h)}))};t.default=function(e){var t=e.id,n=e.myself,r=(0,f.buildChatConversationQueryById)(t),c=(0,o.useQuery)(r.definition,r.options),s=c.data,u=(0,a.default)(c,p);return(0,o.isQueryLoading)(u)?null:i.default.createElement(m,{conversation:s,myself:n})}},38553:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(98954)),o=r(n(32692)),c=r(n(66595));t.default=function(e){var t=e.className,n=e.icon,r=e.name,s=e.label;return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.default,{className:t,display:"flex",alignItems:"center",gridGap:12},n,a.default.createElement(o.default,{variant:"h6",display:"inline"},r)),a.default.createElement(i.default,{pl:"44px"},a.default.createElement(c.default,{label:s})))}},66595:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(71363)),o=a.default.memo(function(e){var t=e.label;return"string"==typeof t?a.default.createElement(i.default,{content:t}):t});t.default=o},96383:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(61941)),o=r(n(75912));t.default=function(e){var t=e.isLoading,n=e.label;return a.default.createElement(o.default,{className:"u-mt-1-half",label:t?a.default.createElement("span",null,a.default.createElement(i.default,{width:"100%"}),a.default.createElement(i.default,{width:"60%"})):n})}},43623:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(95297)),i=r(n(80295)),o=r(n(67294)),c=n(40996),s=r(n(88230)),u=r(n(38553)),l=["className","label","myself"];t.default=function(e){var t=e.className,n=e.label,r=e.myself,d=(0,i.default)(e,l);return o.default.createElement(u.default,(0,a.default)({},d,{className:t,icon:o.default.createElement(s.default,{text:(0,c.getInitials)(r),size:"small"}),name:(0,c.getDisplayName)(r),label:n}))}},65803:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(80295)),i=r(n(67294)),o=n(16396),c=r(n(42e3)),s=n(16893),u=["data"];t.default=function(e){var t=e.id,n=(0,s.buildMyselfQuery)(),r=(0,o.useQuery)(n.definition,n.options),l=r.data,d=(0,a.default)(r,u);return(0,o.isQueryLoading)(d)?null:i.default.createElement("div",{className:"u-maw-7 u-mh-auto"},i.default.createElement(c.default,{id:t,myself:l[0]}))}},54517:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(90402)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(79655),c=r(n(41496)),s=r(n(32419)),u=r(n(9047)),l=r(n(90870)),d=r(n(61008)),f=r(n(49843)),p=r(n(73068)),h=n(72339),m=n(96122),v=n(10821);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}t.default=function(e){var t=e.assistantStatus,n=(0,m.useI18n)().t,r=(0,h.useBreakpoints)().isMobile,y=(0,v.useAssistant)().onAssistantExecute,b=(0,i.useState)(""),g=(0,a.default)(b,2),x=g[0],w=g[1],k=(0,i.useRef)(),O=(0,o.useParams)().conversationId;(0,p.default)(k.current,"input",function(){k.current.style.height="auto",k.current.style.height="".concat(k.current.scrollHeight,"px")});var _=function(){w("")},E=function(){return y({value:x,conversationId:O},function(){_(),k.current.style.height="auto"})};return i.default.createElement("div",{className:"u-w-100 u-maw-7 u-mh-auto"},i.default.createElement(f.default,{className:"styles__conversationBar___2J-Us",icon:null,size:"auto",placeholder:n("assistant.search.placeholder"),value:x,disabledClear:!0,componentsProps:{inputBase:{inputRef:k,className:"u-pv-0",rows:1,multiline:!0,inputProps:{className:"styles__conversationBar-input___2DfdZ"},autoFocus:!r,endAdornment:"idle"!==t?i.default.createElement(u.default,{className:"u-p-half",onClick:function(){}},i.default.createElement(c.default,{component:"div",className:"u-miw-auto u-w-2 u-h-2 u-bdrs-circle",classes:{label:"u-flex u-w-auto"},label:i.default.createElement(s.default,{icon:d.default,size:12})})):i.default.createElement(u.default,{className:"u-p-half",disabled:!x,onClick:E},i.default.createElement(c.default,{component:"div",className:"u-miw-auto u-w-2 u-h-2 u-bdrs-circle",classes:{label:"u-flex u-w-auto"},label:i.default.createElement(s.default,{icon:l.default}),disabled:!x})),onKeyDown:function(e){if(!r){if(e.shiftKey&&"Enter"===e.key)return e;if("Enter"===e.key)return e.preventDefault(),E()}}}},onChange:function(e){w(e.target.value)}}))}},62906:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(80295)),i=r(n(90402)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(16396),s=r(n(98954)),u=r(n(74096)),l=r(n(37266)),d=r(n(32419)),f=r(n(64466)),p=r(n(32736)),h=n(96122),m=r(n(75409)),v=n(16893),y=["data"];function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}var g=function(e){var t=e.messageId,n=e.files,r=(0,o.useState)(!1),a=(0,i.default)(r,2),c=a[0],v=a[1],y=(0,h.useI18n)().t,b=(0,o.useRef)(),g=function(){v(function(e){return!e})};return(0,o.useEffect)(function(){var e;null===(e=b.current)||void 0===e||e.scrollIntoView(!1)},[]),(0,o.useEffect)(function(){c&&b.current.getBoundingClientRect().bottom>document.getElementsByClassName("cozyDialogContent")[0].getBoundingClientRect().bottom&&b.current.scrollIntoView(!1)},[c]),o.default.createElement(s.default,{ref:b,className:"u-mt-1-half",pl:"44px"},o.default.createElement(u.default,{className:"u-mb-1",icon:o.default.createElement(d.default,{icon:f.default,className:"u-ml-half"}),label:y("assistant.sources",n.length),deleteIcon:o.default.createElement(d.default,{className:"u-h-1",icon:p.default,rotate:90*!!c}),clickable:!0,onClick:g,onDelete:g}),o.default.createElement(l.default,{in:c,style:{transformOrigin:"0 0 0"},mountOnEnter:!0,unmountOnExit:!0},o.default.createElement("div",null,n.map(function(e){return o.default.createElement(m.default,{key:"".concat(t,"-").concat(e._id),file:e})}))))};t.default=function(e){var t=e.messageId,n=e.sources.map(function(e){return e.id}),r=(0,v.buildFilesByIds)(n),i=(0,c.useQuery)(r.definition,r.options),s=i.data,u=(0,a.default)(i,y);return(0,c.isQueryLoading)(u)||0===s.length?null:o.default.createElement(g,{messageId:t,files:s})}},75409:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(16396),o=n(67348),c=r(n(32419)),s=r(n(10059)),u=r(n(96105)),l=r(n(11075)),d=n(70442);t.default=function(e){var t=e.file,n=(0,i.useClient)(),r=(0,i.generateWebLink)({slug:(0,o.isNote)(t)?"notes":"drive",cozyUrl:null==n?void 0:n.getStackClient().uri,subDomainType:null==n?void 0:n.getInstanceOptions().subdomain,hash:(0,o.isNote)(t)?"/n/".concat(t._id):"/folder/".concat(t.dir_id,"/file/").concat(t._id)});return a.default.createElement(s.default,{className:"styles__sourcesItem___204Zw",component:"a",href:r,target:"_blank",button:!0},a.default.createElement(u.default,null,a.default.createElement(c.default,{icon:(0,d.getDriveMimeTypeIcon)(!1,t.name,t.mime),size:32})),a.default.createElement(l.default,{primary:t.name,secondary:t.path.replace(t.name,"")}))}},82527:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(10059)),o=r(n(11075)),c=n(96122);t.default=function(){var e=(0,c.useI18n)().t;return a.default.createElement(i.default,{size:"small"},a.default.createElement(o.default,{primary:e("assistant.search.noItem")}))}},44102:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(10059)),o=r(n(11075)),c=n(96122);t.default=function(){var e=(0,c.useI18n)().t;return a.default.createElement(i.default,{size:"small"},a.default.createElement(o.default,{primary:e("assistant.search.notEnough")}))}},92490:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(9758)),o=r(n(1386)),c=r(n(70735));t.default=function(e){var t=e.anchorRef,n=e.listRef,r=e.onClick;return a.default.createElement(o.default,{style:{width:t.current.offsetWidth,zIndex:"var(--zIndex-popover)"},anchorEl:t.current,open:!!t.current,placement:"bottom-start"},a.default.createElement(i.default,{className:"styles__resultMenu___o76q-",square:!0},a.default.createElement("div",{className:"styles__resultMenu-inner___2Lf0d"},a.default.createElement(c.default,{ref:n,onClick:r}))))}},70735:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),i=n(28802),o=r(n(77843)),c=r(n(32419)),s=r(n(90870)),u=r(n(24546)),l=r(n(28138)),d=n(72339),f=n(96122),p=r(n(82527)),h=r(n(44102)),m=r(n(63271)),v=n(86108),y=n(56590);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}var g=function(){var e=(0,v.useSearch)(),t=e.isLoading,n=e.results,r=e.selectedIndex,i=e.searchValue;return t&&!(null!=n&&n.length)?a.default.createElement(a.default.Fragment,null,a.default.createElement(l.default,{hasSecondary:!0}),a.default.createElement(l.default,{hasSecondary:!0}),a.default.createElement(l.default,{hasSecondary:!0})):t||null!=n&&n.length||(0,y.isAssistantEnabled)()?n.map(function(e,t){return a.default.createElement(m.default,{key:e.id||t,icon:e.icon,slug:e.slug,primaryText:e.primary,secondaryText:e.secondary,secondaryUrl:e.secondaryUrl,query:i,highlightQuery:"true",selected:(0,y.isAssistantEnabled)()?r===t+1:r===t,onClick:e.onClick})}):i.length>=3?a.default.createElement(p.default,null):a.default.createElement(h.default,null)},x=(0,a.forwardRef)(function(e,t){var n=e.onClick,r=(0,f.useI18n)().t,l=(0,d.useBreakpoints)().isMobile,p=(0,v.useSearch)(),h=p.searchValue,b=p.selectedIndex,x=(0,i.useDataProxy)().dataProxyServicesAvailable;return a.default.createElement(u.default,{ref:t},(0,y.isAssistantEnabled)()&&a.default.createElement(m.default,{icon:a.default.createElement(o.default,{size:"small"},a.default.createElement(c.default,{icon:s.default,size:l?12:void 0})),primaryText:h,query:h,secondaryText:r("assistant.search.result"),selected:0===b,onClick:n}),x&&a.default.createElement(g,null))});x.displayName="ResultMenuContent",t.default=x},63271:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(32869)),o=r(n(32419)),c=r(n(10059)),s=r(n(96105)),u=r(n(11075)),l=r(n(47814)),d=r(n(69304));t.default=function(e){var t=e.icon,n=e.primaryText,r=e.secondaryText,f=e.secondaryUrl,p=e.slug,h=e.selected,m=e.onClick,v=e.query,y=e.highlightQuery,b=void 0!==y&&y,g="component"===t.type?a.default.createElement(o.default,{icon:t.component,size:32}):"app"===t.type?a.default.createElement(i.default,{app:t.app}):t,x=b?a.default.createElement(l.default,{text:n,query:v}):n,w=b?a.default.createElement(d.default,{text:r,query:v,slug:p,url:f}):r;return a.default.createElement(c.default,{button:!0,size:"small",selected:h,onClick:m},a.default.createElement(s.default,null,g),a.default.createElement(u.default,{primary:x,secondary:w}))}},47814:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(64512)),i=r(n(67294));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=function(e){return e.toString().toLowerCase().replace(/\//g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" ")},u=function(e,t){var n=s(t),r=s(e),a=[],o=0;r.forEach(function(e){n.forEach(function(t){var n=e.indexOf(t);n>=0&&a.push({from:o+n,to:o+n+t.length})}),o+=e.length+1});for(var c=a.sort(function(e,t){return e.from>t.from}).reduce(function(e,t){return 0===e.length||e[e.length-1].to<t.from?e.push(t):e[e.length-1].to<t.to&&(e[e.length-1].to=t.to),e},[]),u=c.length>0?[i.default.createElement("span",{key:"0"},e.slice(0,c[0].from))]:e,l=0,d=c.length;l<d;++l)u.push(i.default.createElement("span",{className:"u-primaryColor"},e.slice(c[l].from,c[l].to))),l+1<d&&u.push(i.default.createElement("span",null,e.slice(c[l].to,c[l+1].from)));return c.length>0&&u.push(i.default.createElement("span",null,e.slice(c[c.length-1].to,e.length))),u};t.default=function(e){var t=e.text,n=e.query;if(!t)return null;var r=u(t,n);return Array.isArray(r)?r.map(function(e,t){return c(c({},e),{},{key:t})}):r}},69304:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=r(n(79475)),o=r(n(25750)),c=r(n(72339)),s=r(n(47814));t.default=function(e){var t=e.text,n=e.query,r=e.url,u=e.slug;return(0,c.default)().isMobile||!r?a.default.createElement(s.default,{text:t,query:n}):a.default.createElement(i.default,{app:{slug:u},href:r},function(e){var r=e.href,i=e.onClick;return a.default.createElement(o.default,{color:"textSecondary",underline:"hover",href:r,onClick:function(e){e.stopPropagation(),"function"==typeof i&&i(e)}},a.default.createElement(s.default,{text:t,query:n,slug:u}))})}},23888:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(95297)),i=r(n(67294));t.default=function(e){return i.default.createElement("svg",(0,a.default)({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i.default.createElement("path",{opacity:"0.34",fillRule:"evenodd",clipRule:"evenodd",d:"M12.9657 1C13.5206 1 14.2876 1.3125 14.6803 1.6995L16 3H30.0059C31.1072 3 32 3.89498 32 4.997V27.003C32 28.1059 31.1107 29 29.9983 29H2.00174C0.896211 29 0 28.1001 0 27.0088V1.99653C0 1.44616 0.448999 1 1.00472 1H12.9657Z",fill:"#297EF2"}),i.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 1C0.447715 1 0 1.44772 0 2V6C0 6.55228 0.447716 7 1 7H13.5858C13.851 7 14.1054 6.89464 14.2929 6.70711L15.7071 5.29289C15.8946 5.10536 16.149 5 16.4142 5H32C32 3.89543 31.1046 3 30 3H16.4142C16.149 3 15.8946 2.89464 15.7071 2.70711L14.2929 1.29289C14.1054 1.10536 13.851 1 13.5858 1H1ZM10 15.9954V24.0046C10 24.5543 10.4558 25 11.0025 25H20.9975C21.5512 25 22 24.5443 22 24.0046V15.9954C22 15.4457 21.5561 15 21 15H20V13C20 10.794 18.2053 9 16 9C13.794 9 12 10.794 12 13V15H11C10.4477 15 10 15.4557 10 15.9954ZM16 11C14.8968 11 14 12.1215 14 13.5V15H18V13.5C18 12.1215 17.1028 11 16 11ZM17.5 19C17.5 18.172 16.8265 17.5 16 17.5C15.172 17.5 14.5 18.172 14.5 19C14.5 19.552 14.803 20.032 15.25 20.29V22.75C15.25 23.1625 15.586 23.5 16 23.5C16.4125 23.5 16.75 23.1625 16.75 22.75V20.29C17.1955 20.032 17.5 19.552 17.5 19Z",fill:"#297EF2"}))}},55613:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(95297)),i=r(n(90402)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(72339),s=r(n(80944)),u=r(n(32361)),l=n(86108);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}t.default=function(e){var t=e.componentsProps,n=(0,c.useBreakpoints)().isMobile,r=(0,o.useState)(""),d=(0,i.default)(r,2),f=d[0],p=d[1],h=(0,l.useSearch)(),m=h.clearSearch,v=h.setSelectedIndex,y=h.delayedSetSearchValue,b=function(){p(""),m()},g=function(e){v(0),y(e.target.value),p(e.target.value)};return n?o.default.createElement(u.default,{value:f,onClear:b,onChange:g}):o.default.createElement(s.default,(0,a.default)({},null==t?void 0:t.SearchBarDesktop,{value:f,onClear:b,onChange:g}))}},80944:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),i=n(79655),o=r(n(55184)),c=r(n(32419)),s=r(n(4230)),u=r(n(49843)),l=n(92951),d=n(96122),f=n(86108),p=n(40185),h=n(10821),m=r(n(92490)),v=n(56590);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}var b={"searchBarDesktop--result":"styles__searchBarDesktop--result___2bQQy"},g=function(e){var t=e.value,n=e.onClear,r=e.onChange,y=e.elevation,g=e.size,x=e.hasHalfBorderRadius,w=(0,d.useI18n)().t,k=(0,f.useSearch)(),O=k.searchValue,_=k.results,E=k.selectedIndex,S=k.setSelectedIndex,C=(0,h.useAssistant)().onAssistantExecute,P=(0,i.useNavigate)(),j=(0,a.useRef)(),A=(0,a.useRef)(),D=function(){if((0,v.isAssistantEnabled)()){var e=(0,v.makeConversationId)();C({value:t,conversationId:e}),P("assistant/".concat(e)),setTimeout(function(){n()},100)}};return a.default.createElement(o.default,{onClickAway:n},a.default.createElement("span",null,a.default.createElement(u.default,{elevation:y,className:O&&x?b["searchBarDesktop--result"]:"",ref:j,size:g,icon:"large"===g?a.default.createElement(c.default,{className:"u-mh-1",icon:(0,l.isTwakeTheme)()?s.default:p.AssistantIcon,size:(0,l.isTwakeTheme)()?24:32}):a.default.createElement(c.default,{className:"u-ml-1 u-mr-half",icon:(0,l.isTwakeTheme)()?s.default:p.AssistantIcon,size:(0,l.isTwakeTheme)()?16:24}),placeholder:(0,v.isAssistantEnabled)()?w("assistant.search.placeholder"):void 0,value:t,componentsProps:{inputBase:{onKeyDown:function(e){var r,a,i=null===(r=A.current)||void 0===r?void 0:r.childElementCount;"ArrowDown"===e.key&&(e.preventDefault(),E===i-1?S(0):S(function(e){return e+1})),"ArrowUp"===e.key&&(e.preventDefault(),0===E?S(i-1):S(function(e){return e-1})),"Escape"===e.key&&(e.preventDefault(),n()),"Enter"===e.key&&((e.preventDefault(),E)?((null==_?void 0:null===(a=_[E-1])||void 0===a?void 0:a.onClick)||D)():""!==t&&D())}}},disabledClear:!0,disabledFocus:""!==t,onChange:r}),O&&a.default.createElement(m.default,{listRef:A,anchorRef:j,onClick:D})))};g.defaultProps={size:"large",elevation:!1},t.default=g},32361:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),i=r(n(49843)),o=r(n(73068)),c=r(n(39286)),s=n(56590);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}t.default=function(e){var t=e.value,n=e.onClear,r=e.onChange,u=(0,a.useRef)();return(0,o.default)(u.current,"input",function(){u.current.style.height="auto",u.current.style.height="".concat(u.current.scrollHeight,"px")}),a.default.createElement(i.default,{className:"styles__conversationBar___2J-Us",size:"auto",icon:null,placeholder:(0,s.isAssistantEnabled)()?" ":void 0,value:t,componentsProps:{inputBase:{inputProps:{className:"styles__conversationBar-input___2DfdZ"},inputRef:u,autoFocus:!0,rows:1,multiline:!0,startAdornment:(0,s.isAssistantEnabled)()&&!t&&a.default.createElement(c.default,null)}},onChange:r,onClear:function(){n(),u.current.style.height="auto"}})}},86108:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useSearch=t.default=t.SearchContext=void 0;var a=r(n(90402)),i=r(n(23279)),o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),c=n(66569);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var u=o.default.createContext();t.SearchContext=u,t.useSearch=function(){var e=(0,o.useContext)(u);if(!e)throw Error("useSearch must be used within a SearchProvider");return e};var l=o.default.memo(function(e){var t=e.children,n=(0,o.useState)(""),r=(0,a.default)(n,2),s=r[0],l=r[1],d=(0,o.useState)(),f=(0,a.default)(d,2),p=f[0],h=f[1],m=(0,c.useFetchResult)(s),v=m.isLoading,y=m.results,b=(0,o.useMemo)(function(){return(0,i.default)(l,250)},[l]),g=(0,o.useCallback)(function(){l(""),h()},[]),x=(0,o.useMemo)(function(){return{searchValue:s,setSearchValue:l,delayedSetSearchValue:b,isLoading:v,clearSearch:g,selectedIndex:p,setSelectedIndex:h,results:y}},[s,b,v,g,p,y]);return o.default.createElement(u.Provider,{value:x},t)});t.default=l},93928:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(25976),o=r(n(31281)),c=r(n(32419)),s=r(n(90870)),u=n(96122),l=(0,n(75910).makeStyles)({root:{right:"1rem",bottom:"1rem",position:"fixed",marginBottom:function(e){return e.immersive?"var(--flagship-bottom-height)":0}}});t.default=function(e){var t=e.searchValue,n=e.onClick,r=(0,u.useI18n)().t,d=l({immersive:(0,i.getFlagshipMetadata)().immersive});return a.default.createElement(o.default,{"aria-label":r("assistant.search.send"),color:"primary",size:"medium",classes:d,disabled:!t,onClick:n},a.default.createElement(c.default,{icon:s.default}))}},39286:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(90402)),i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(67294)),o=n(9844),c=n(56314),s=r(n(32692)),u=n(96122);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}t.default=function(){var e=(0,u.useI18n)().t,t=(0,i.useState)(!1),n=(0,a.default)(t,2),r=n[0],l=n[1];return(0,c.useTimeoutWhen)(function(){return l(!0)},2500),i.default.createElement("div",{className:"styles__suggestionsPlaceholder___y-vsv"},i.default.createElement(s.default,null,r?i.default.createElement(o.TypeAnimation,{cursor:!1,sequence:[e("assistant.suggestions.find_file"),2500,e("assistant.suggestions.reimbursements"),2500,e("assistant.suggestions.reorganise_files"),2500],speed:40,repeat:1/0,omitDeletionAnimation:!0}):e("assistant.search.placeholder")))}},80675:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getFileMimetype=void 0;var a=r(n(90402)),i=r(n(48237)),o={word:"text",text:"text",zip:"zip",pdf:"pdf",spreadsheet:"sheet",excel:"sheet",sheet:"sheet",presentation:"slide",powerpoint:"slide"};t.getFileMimetype=function(e){return function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=("application/octet-stream"===n?(t=r.toLowerCase(),i.default.lookup(t)||"application/octet-stream"):n).split("/"),s=(0,a.default)(c,2),u=s[0],l=s[1];if(e[u])return u;if("application"===u){var d=l.match(Object.keys(o).join("|"));return d?o[d[0]]:void 0}}}},70442:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getIconForSearchResult=t.getDriveMimeTypeIcon=void 0;var a=r(n(27361)),i=r(n(22985)),o=r(n(81123)),c=r(n(96178)),s=r(n(79301)),u=r(n(29388)),l=r(n(48368)),d=r(n(8540)),f=r(n(78070)),p=r(n(94965)),h=r(n(67158)),m=r(n(75543)),v=r(n(74838)),y=r(n(65090)),b=r(n(34519)),g=r(n(23888)),x=n(80675);t.getIconForSearchResult=function(e){return"io.cozy.apps"===e.doc._type?{type:"app",app:e.doc}:"notes"===e.slug?{type:"component",component:f.default}:"drive"===e.slug?{type:"component",component:w("directory"===e.doc.type,e.doc.name,e.doc.mime)}:"contacts"===e.slug?{type:"component",component:i.default}:{type:"component",component:u.default}};var w=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.isEncrypted;if(void 0!==i&&i)return g.default;if(e)return l.default;if(/\.cozy-note$/.test(t))return f.default;var w={audio:o.default,bin:c.default,code:s.default,image:d.default,pdf:p.default,slide:m.default,sheet:h.default,text:v.default,video:y.default,zip:b.default},k=(0,x.getFileMimetype)(w)(n,t);return(0,a.default)(w,k,u.default)};t.getDriveMimeTypeIcon=w},66569:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.useFetchResult=void 0;var i=a(n(68434)),o=a(n(90402)),c=a(n(82007)),s=n(67294),u=n(28802),l=a(n(74450)),d=n(70442),f=(0,l.default)("\uD83D\uDD0D [useFetchResult]"),p=(r=(0,c.default)(i.default.mark(function e(t,n){var r,a,o,c,s,u,l,d,p=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=void 0===(a=(r=p.length>2&&void 0!==p[2]?p[2]:{}).maxRetries)?5:a,u=s=void 0===(c=r.delay)?500:c,l=0;case 3:if(!(l<o)){e.next=16;break}return e.next=6,t.search(n);case 6:if(!(d=e.sent)){e.next=9;break}return e.abrupt("return",d);case 9:return f.info("Search attempt ".concat(l+1," failed, retrying in ").concat(u," ms...")),e.next=12,new Promise(function(e){return setTimeout(e,u)});case 12:u*=2;case 13:l++,e.next=3;break;case 16:return f.error("Search failed after ".concat(o," attempts")),e.abrupt("return",[]);case 18:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.useFetchResult=function(e){var t=(0,s.useState)({isLoading:!0,results:null,searchValue:null}),n=(0,o.default)(t,2),r=n[0],a=n[1],l=(0,u.useDataProxy)();return(0,s.useEffect)(function(){var t,n=(t=(0,c.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.dataProxyServicesAvailable){e.next=3;break}return f.log("DataProxy services are not available. Skipping search..."),e.abrupt("return");case 3:return a({isLoading:!0,results:null,searchValue:t}),e.next=6,p(l,t);case 6:a({isLoading:!1,results:e.sent.map(function(e){e.slug=e.slug||e.type,e.subTitle=e.subTitle||e.name;var t=(0,d.getIconForSearchResult)(e);return{id:e.doc._id,icon:t,slug:e.slug,secondaryUrl:e.secondaryUrl,primary:e.title,secondary:e.subTitle,onClick:function(){window.open(e.url)}}}),searchValue:t});case 9:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)});e?e!==r.searchValue&&n(e):a({isLoading:!0,results:null,searchValue:null})},[l,e,r.searchValue,a]),{isLoading:r.isLoading,results:r.results}}},45150:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(79655),o=n(44318),c=n(72339),s=r(n(24060)),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(10821)),l=r(n(65803)),d=r(n(54517));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var p=function(){var e=(0,u.useAssistant)().assistantState,t=(0,c.useBreakpoints)().isMobile,n=(0,i.useNavigate)(),r=(0,i.useParams)().conversationId;return a.default.createElement(o.FixedDialog,{open:!0,fullScreen:!0,size:"full",componentsProps:{dialogTitle:{className:t?"u-ph-0":""},dialogActions:{className:t?"u-mh-half":"u-mb-2"},divider:{className:"u-dn"}},title:t?"\xa0":" ",content:a.default.createElement(l.default,{id:r}),actions:a.default.createElement(d.default,{assistantStatus:e.status}),onClose:function(){n("..")}})};t.default=function(){return a.default.createElement(s.default,{variant:"normal"},a.default.createElement(u.default,null,a.default.createElement(p,null)))}},9601:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(67294)),i=n(79655),o=n(44318),c=r(n(24060)),s=r(n(27507)),u=n(83972),l=y(n(10821)),d=r(n(70735)),f=r(n(55613)),p=y(n(86108)),h=r(n(93928)),m=n(56590);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}var b=function(){(0,s.default)(u.locales);var e=(0,l.useAssistant)().onAssistantExecute,t=(0,i.useNavigate)(),n=(0,p.useSearch)().searchValue,r=function(){var r=(0,m.makeConversationId)();e({value:n,conversationId:r}),t("../assistant/".concat(r),{replace:!0})};return a.default.createElement(o.FixedDialog,{open:!0,fullScreen:!0,size:"full",disableGutters:!0,componentsProps:{dialogTitle:{className:"u-ph-half u-pb-0 u-mt-2-half u-ov-visible"},divider:{className:"u-dn"}},title:a.default.createElement(f.default,null),content:a.default.createElement(a.default.Fragment,null,n&&a.default.createElement(d.default,{onClick:r}),(0,m.isAssistantEnabled)()&&a.default.createElement(h.default,{searchValue:n,onClick:r})),onClose:function(){t("..")}})};t.default=function(){return a.default.createElement(c.default,{variant:"normal"},a.default.createElement(l.default,null,a.default.createElement(p.default,null,a.default.createElement(b,null))))}},56590:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.pushMessagesIdInState=t.makeConversationId=t.isMessageForThisConversation=t.isAssistantEnabled=t.getInstantMessage=void 0;var a=r(n(64512)),i=r(n(71400));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.getInstantMessage=function(e){return Object.keys(e.message).sort(function(e,t){return e-t}).map(function(t){return e.message[t]}).join("")},t.makeConversationId=function(){return"".concat(Date.now(),"-").concat(Math.floor(9e4*Math.random())+1e4)},t.pushMessagesIdInState=function(e,t,n){if(e===t._id){var r=t.messages.map(function(e){return e.id});n(function(e){return c(c({},e),{},{messagesId:r})})}},t.isMessageForThisConversation=function(e,t){return t.includes(e._id)},t.isAssistantEnabled=function(){return(0,i.default)("cozy.assistant.enabled")}},16893:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMyselfQuery=t.buildFilesByIds=t.buildChatConversationQueryById=t.FILES_DOCTYPE=t.CHAT_EVENTS_DOCTYPE=t.CHAT_CONVERSATIONS_DOCTYPE=void 0;var r=n(16396),a="io.cozy.contacts",i="io.cozy.ai.chat.conversations";t.CHAT_CONVERSATIONS_DOCTYPE=i,t.CHAT_EVENTS_DOCTYPE="io.cozy.ai.chat.events";var o="io.cozy.files";t.FILES_DOCTYPE=o;var c=r.fetchPolicies.olderThan(86400);t.buildFilesByIds=function(e){return{definition:(0,r.Q)(o).getByIds(e),options:{as:"".concat(o,"/").concat(e.join("")),fetchPolicy:c}}},t.buildChatConversationQueryById=function(e){return{definition:(0,r.Q)(i).getById(e),options:{as:"".concat(i,"/").concat(e),fetchPolicy:c,singleDocData:!0}}},t.buildMyselfQuery=function(){return{definition:(0,r.Q)(a).where({me:!0}),options:{as:"".concat(a,"/myself"),fetchPolicy:c}}}},64822:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AssistantDesktop",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"AssistantDialog",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"AssistantMobile",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"SearchDialog",{enumerable:!0,get:function(){return c.default}});var a=r(n(34029)),i=r(n(14583)),o=r(n(45150)),c=r(n(9601))},83972:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locales=void 0,t.locales={en:{assistant:{search:{placeholder:"Any question?",send:"Send",result:"Ask the assistant",noItem:"No results",notEnough:"Your query must contain at least 3 characters"},dialog:{close:"Close"},name:"Cozy Assistant",sources:"%{smart_count} source |||| %{smart_count} sources",suggestions:{find_file:"Search a file",reimbursements:"Check my repayments",reorganise_files:"Reorganise my files"}}},fr:{assistant:{search:{placeholder:"Une question\xa0?",send:"Envoyer",result:"Demander \xe0 l'assistant",noItem:"Aucun r\xe9sultat",notEnough:"Votre recherche doit contenir au moins 3 caract\xe8res"},dialog:{close:"Fermer"},name:"Assistant Cozy",sources:"%{smart_count} source |||| %{smart_count} sources",suggestions:{find_file:"Rechercher un fichier",reimbursements:"V\xe9rifier mes remboursements",reorganise_files:"R\xe9organiser mes fichiers"}}}}},65578:function(e,t,n){e.exports=n(1274)},48237:function(e,t,n){"use strict";var r,a,i,o=n(65578),c=n(26470).extname,s=/^\s*([^;\s]*)(?:;|\s|$)/,u=/^text\//i;function l(e){if(!e||"string"!=typeof e)return!1;var t=s.exec(e),n=t&&o[t[1].toLowerCase()];return n&&n.charset?n.charset:!!(t&&u.test(t[1]))&&"UTF-8"}t.charset=l,t.charsets={lookup:l},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var n=-1===e.indexOf("/")?t.lookup(e):e;if(!n)return!1;if(-1===n.indexOf("charset")){var r=t.charset(n);r&&(n+="; charset="+r.toLowerCase())}return n},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var n=s.exec(e),r=n&&t.extensions[n[1].toLowerCase()];return!!r&&!!r.length&&r[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var n=c("x."+e).toLowerCase().substr(1);return!!n&&(t.types[n]||!1)},t.types=Object.create(null),r=t.extensions,a=t.types,i=["nginx","apache",void 0,"iana"],Object.keys(o).forEach(function(e){var t=o[e],n=t.extensions;if(n&&n.length){r[e]=n;for(var c=0;c<n.length;c++){var s=n[c];if(a[s]){var u=i.indexOf(o[a[s]].source),l=i.indexOf(t.source);if("application/octet-stream"!==a[s]&&(u>l||u===l&&"application/"===a[s].substr(0,12)))continue}a[s]=e}}})},56314:function(e,t,n){"use strict";n.r(t),n.d(t,{useLockBodyScroll:()=>eE,useLocalstorageState:()=>eS,useAsyncEffect:()=>m,useFullscreen:()=>ea,useOnLongHover:()=>u,useMultiSelectableList:()=>eF,useFocus:()=>ei,useLifecycleLogger:()=>e_,useDimensionsRef:()=>Y,useOnLongHoverRef:()=>u,useResizeObserverRef:()=>e5,useStackState:()=>tn,useKeyRef:()=>ew,useToggle:()=>td,useWindowScrollPosition:()=>tg,useEffectOnceWhen:()=>X,useSafeSetState:()=>e6,useEventListenerRef:()=>et,useNativeMapState:()=>eC,useMergeRefs:()=>ej,useSetState:()=>tt,useSpeech:()=>tr,useMutationObserver:()=>x,useTimeTravelState:()=>ts,useUndoState:()=>tp,useQueueState:()=>eX,useMouseWheelDelta:()=>eI,useIsomorphicEffect:()=>a,usePromise:()=>e$,useSelectableList:()=>e9,useDebouncedValue:()=>F,useIntervalWhen:()=>C,useWindowSize:()=>tk,useMutationObserverRef:()=>E,useDebounceFn:()=>R,useOnline:()=>eV,useMediaMatch:()=>eP,useInput:()=>el,useOnWindowResize:()=>q,useGeolocation:()=>es,useAudio:()=>y,useOutsideClick:()=>eZ,usePreviousDifferent:()=>eJ,useOnWindowScroll:()=>V,useDocumentTitle:()=>K,useVibrate:()=>tm,useBoundingclientrectRef:()=>S,useInViewRef:()=>eh,useOnClickRef:()=>eU,useRaf:()=>e2,useDidMount:()=>b,useFreshRef:()=>i,useMapState:()=>f,useIntersectionObserverRef:()=>ef,useMouse:()=>eD,useDebounce:()=>M,useNavigatorLanguage:()=>eB,useTimeoutWhen:()=>s,useUndoRedoState:()=>th,useOnLongPress:()=>d,useObjectState:()=>f,useSessionstorageState:()=>te,useKeys:()=>eO,useOnHoverRef:()=>eH,useRenderCount:()=>e4,useSelect:()=>e7,useDocumentVisibilityState:()=>$,useFileDropRef:()=>en,useForkRef:()=>O,useFreshCallback:()=>o,useMouseMoveDelta:()=>eM,useOrientation:()=>eQ,usePreviousImmediate:()=>eK,useThrottle:()=>tu,useVideo:()=>tv,useFocusWithin:()=>eo,useFreshTick:()=>G,useKeyBindings:()=>eg,useDidUpdate:()=>I,useOutsideClickRef:()=>eY,useWindowEventListener:()=>ez,useWillUnmount:()=>T,useBoundingclientrect:()=>w,useWhyDidYouUpdate:()=>ty,useArrayState:()=>p,useCounter:()=>j,useCountdown:()=>P,useIsDroppingFiles:()=>em,useOnLongPressRef:()=>d,useDeepCompareEffect:()=>H,useDocumentEventListener:()=>J,useKey:()=>eb,useRefElement:()=>ee,useGetIsMounted:()=>h});var r=n(67294);let a="undefined"==typeof window?r.useEffect:r.useLayoutEffect;function i(e,t=!1){let n=t?a:r.useEffect,o=(0,r.useRef)(e);return n(()=>{o.current=e}),o}function o(e){let t=i(e);return(0,r.useCallback)((...e)=>t.current(...e),[t])}let c=()=>{};function s(e,t=0,n=!0,a=0){let i=o(e);(0,r.useEffect)(()=>{if(n){if("undefined"!=typeof window){let e=window.setTimeout(function(){i()},t);return()=>{window.clearTimeout(e)}}console.warn("useTimeoutWhen: window is undefined.")}return c},[t,n,a,i])}let u=(e,{duration:t=300}={})=>{let[n,a]=(0,r.useState)(null),i=(0,r.useCallback)(e=>{a(e)},[]),[c,u]=(0,r.useState)(!1),l=o(e);s(()=>{l()},t,c);let d=(0,r.useCallback)(()=>{u(!0)},[]),f=(0,r.useCallback)(e=>{u(!1)},[]);return(0,r.useEffect)(()=>(n&&(n.addEventListener("mouseenter",d),n.addEventListener("mouseleave",f)),()=>{n&&(n.removeEventListener("mouseenter",d),n.removeEventListener("mouseleave",f))}),[d,f,n]),i},l=()=>{},d=(e,{onClick:t,duration:n=300}={})=>{let[a,i]=(0,r.useState)(null),c=(0,r.useCallback)(e=>{i(e)},[]),[u,d]=(0,r.useState)(!1),f=o(e),p=o(null!=t?t:l);s(f,n,u);let h=(0,r.useCallback)(e=>{d(!0)},[]),m=(0,r.useCallback)(e=>{d(!1),p(e)},[p]);return(0,r.useEffect)(()=>(a&&(a.addEventListener("mousedown",h),a.addEventListener("mouseup",m),a.addEventListener("mouseleave",m),a.addEventListener("touchstart",h),a.addEventListener("touchend",m),a.addEventListener("touchcancel",m)),()=>{a&&(a.removeEventListener("mousedown",h),a.removeEventListener("mouseup",m),a.removeEventListener("mouseleave",m),a.removeEventListener("touchstart",h),a.removeEventListener("touchend",m),a.removeEventListener("touchcancel",m))}),[h,m,a]),c};function f(e){let[t,n]=(0,r.useState)(e),a=(0,r.useCallback)((e,t)=>{n(n=>Object.assign(Object.assign({},n),{[e]:t}))},[]),i=(0,r.useCallback)(e=>void 0!==t[e],[t]),o=(0,r.useCallback)(e=>{n(t=>Object.assign(Object.assign({},t),e))},[]),c=(0,r.useCallback)((...e)=>{n(t=>{let n=Object.assign({},t);for(let t of e)delete n[t];return n})},[n]);return[t,{has:i,remove:(0,r.useCallback)(e=>{n(t=>{let n=Object.assign({},t);return delete n[e],n})},[n]),removeAll:(0,r.useCallback)(()=>{n(e=>{let t=Object.assign({},e);for(let e in t)t.hasOwnProperty(e)&&delete t[e];return t})},[n]),removeMultiple:c,set:a,setMultiple:o}]}function p(e){let[t,n]=(0,r.useState)(null!=e?e:[]),a=(0,r.useCallback)(e=>{n([...t,e])},[t]),i=(0,r.useCallback)(()=>{n(t.slice(0,t.length-1))},[t]),o=(0,r.useCallback)(()=>{n([])},[]),c=(0,r.useCallback)(e=>{n([e,...t])},[t]),s=(0,r.useCallback)(()=>{n(t.slice(1))},[t]),u=(0,r.useCallback)(()=>{n([...t].reverse())},[t]),l=(0,r.useCallback)(e=>{n([...t,...e])},[t]),d=(0,r.useCallback)((e,r,a)=>{n([...t].fill(e,r,a))},[t]),f=(0,r.useCallback)((e,t)=>{n(n=>{let r=[...n];return r[e]=t,r})},[n]),p=(0,r.useCallback)((...e)=>{n(t=>{let n=[...t];return n.splice(...e),n})},[n]),h=(0,r.useCallback)(e=>{n(t=>{let n=[...t];return n.splice(e,1),n})},[n]),m=(0,r.useCallback)((e,t)=>{n(n=>{let r=[...n];return r.splice(e,1,t),r})},[n]),v=(0,r.useCallback)((e,t)=>{n(n=>{let r=[...n];return r.splice(e,0,t),r})},[n]),y=(0,r.useCallback)(e=>{n([...t].sort(e))},[t]),b=(0,r.useMemo)(()=>({push:a,pop:i,clear:o,unshift:c,shift:s,reverse:u,concat:l,fill:d,updateItemAtIndex:f,setArray:n,splice:p,removeItemAtIndex:h,replaceItemAtIndex:m,insertItemAtIndex:v,sort:y}),[a,i,o,c,s,u,l,d,f,n,p,h,m,v,y]);return(0,r.useMemo)(()=>[t,b],[t,b])}let h=()=>{let e=(0,r.useRef)(!1),t=(0,r.useCallback)(()=>e.current,[]);return(0,r.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t};function m(e,t,n){let a=(0,r.useRef)(0),o=h(),c=i(e),s=(0,r.useCallback)(async()=>{let e=++a.current;try{return await c.current(()=>o()&&e===a.current)}catch(e){throw e}},[o,...t]);(0,r.useEffect)(()=>{let e;return s().then(t=>{e=t}),()=>{null==n||n(e)}},[s,n])}let v=()=>{};function y(e={},t={}){var n,a,i,c,s;let{autoPlay:u=!1,isMuted:l=!1}=e,[d,f]=(0,r.useState)(u),[p,h]=(0,r.useState)(l),[m,b]=(0,r.useState)(null),g=o(null!==(n=t.onPlay)&&void 0!==n?n:v),x=o(null!==(a=t.onPause)&&void 0!==a?a:v),w=o(null!==(i=t.onMute)&&void 0!==i?i:v),k=o(null!==(c=t.onUnmute)&&void 0!==c?c:v),O=o(null!==(s=t.onLoadedMetadata)&&void 0!==s?s:v);(0,r.useEffect)(()=>{m&&(d?m.play():m.pause())},[m,d]),(0,r.useEffect)(()=>{m&&(m.muted=p)},[m,p]),(0,r.useEffect)(()=>{if(!m)return;let e=()=>{u&&(null==m||m.play()),O()},t=()=>{g()},n=()=>{x()},r=()=>{f(!1)};return null==m||m.addEventListener("loadedmetadata",e),null==m||m.addEventListener("play",t),null==m||m.addEventListener("pause",n),null==m||m.addEventListener("ended",r),()=>{null==m||m.removeEventListener("loadedmetadata",e),null==m||m.removeEventListener("play",t),null==m||m.removeEventListener("pause",n),null==m||m.removeEventListener("ended",r)}},[u,O,g,x,m]);let _=()=>{h(!0),w()},E=()=>{h(!1),k()};return[e=>{null!==e&&b(e)},{isPlaying:d,isMuted:p},{play:()=>{f(!0)},pause:()=>{f(!1)},togglePlay:()=>{f(!d)},mute:_,unmute:E,toggleMute:()=>{p?E():_()}}]}function b(e){(0,r.useEffect)(()=>{"function"==typeof e&&e()},[])}let g={attributes:!0,characterData:!0,childList:!0,subtree:!0};function x(e,t,n=g){(0,r.useEffect)(()=>{if(e.current){let r=new MutationObserver(t);return r.observe(e.current,n),()=>{r.disconnect()}}return c},[t,n,e])}function w(e){let[t,n]=(0,r.useState)(null),a=(0,r.useCallback)(()=>{n(e.current?e.current.getBoundingClientRect():null)},[e]);return b(()=>{a()}),x(e,a),t}function k(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}function O(e,t){return(0,r.useMemo)(()=>null===e&&null===t?null:n=>{k(e,n),k(t,n)},[e,t])}let _={attributes:!0,characterData:!0,childList:!0,subtree:!0};function E(e,t=_){let[n,a]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(n){let r=new MutationObserver(e);return r.observe(n,t),()=>{r.disconnect()}}return c},[n,e,t]),[(0,r.useCallback)(e=>{a(e)},[])]}function S(){let[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(null),i=(0,r.useCallback)(()=>{t(n?n.getBoundingClientRect():null)},[n]);(0,r.useEffect)(()=>{i()},[i]);let o=(0,r.useCallback)(e=>{a(e)},[]),[c]=E(i);return[O(o,c),e,i]}function C(e,t=0,n=!0,a=!1){let i=(0,r.useRef)();(0,r.useEffect)(()=>{i.current=e}),(0,r.useEffect)(()=>{if(n){function e(){var e;null===(e=i.current)||void 0===e||e.call(i)}a&&e();let n=window.setInterval(e,t);return()=>{window.clearInterval(n)}}return c},[n,t,a])}function P(e,t={}){let{interval:n=1e3,onDown:a,onEnd:i}=t,[o,c]=(0,r.useState)(()=>new Date),s=e.getTime()-o.getTime(),u=s>0?Math.ceil(s/n):0;return C(function(){let t=new Date;if(t>e){i&&i(t),c(e);return}a&&a(s,t),c(t)},u?n:void 0,!0,!0),u}function j(e){let[t,n]=(0,r.useState)(e),a=(0,r.useCallback)(e=>{n(t=>t+e)},[]),i=(0,r.useCallback)(e=>{a(-e)},[a]),o=(0,r.useCallback)(()=>{a(1)},[a]);return{decrement:(0,r.useCallback)(()=>{a(-1)},[a]),decrementBy:i,increment:o,incrementBy:a,reset:(0,r.useCallback)(()=>{n(e)},[e]),value:t}}var A=n(91296),D=n.n(A);function T(e){(0,r.useEffect)(()=>e,[])}function M(e,t,n){let a=(0,r.useCallback)(e=>D()(e,t,n),[t,n]),o=i(e),c=(0,r.useRef)(a(function(...e){var t;null===(t=o.current)||void 0===t||t.call(o,...e)}));return T(()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.cancel()}),c.current}function R(e,t,n={leading:!1,trailing:!0}){let{leading:a,trailing:i,maxWait:c}=n;if(a||i){if(void 0!==c&&c<t)throw Error("maxWait cannot be less than delay")}else throw Error("leading and trailing cannot both be false");let u=o(e),[l,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(0),h=(0,r.useRef)(0),m=(0,r.useRef)(),v=(0,r.useCallback)((...e)=>{m.current=e;let t=void 0!==c&&h.current&&Date.now()-h.current>c;if(a){if(l&&t){p(e=>e+1),h.current=Date.now();try{u(...e)}catch(e){console.warn(e)}}else if(t&&!l){d(!0),h.current=Date.now();try{u(...e)}catch(e){console.warn(e)}}else if(l&&!t);else{d(!0),h.current=Date.now();try{u(...e)}catch(e){console.warn(e)}}}i&&(l?p(e=>e+1):d(!0))},[c,l,a,i,u]);return s(()=>{if(void 0!==c&&i&&m.current){h.current=Date.now();try{u(...m.current)}catch(e){console.warn(e)}}},null!=c?c:1/0,l&&void 0!==c&&i,f),s(()=>{if(i){if(!m.current)return;h.current=Date.now();try{u(...m.current)}catch(e){console.warn(e)}}d(!1)},t,l&&i,f),[o(v),l]}function I(e,t){let n=(0,r.useRef)(!1),a=(0,r.useMemo)(()=>void 0===t||Array.isArray(t)?(Array.isArray(t)&&0===t.length&&console.warn("Using [] as the second argument makes useDidUpdate a noop. The second argument should either be `undefined` or an array of length greater than 0."),t):[t],[t]);(0,r.useEffect)(()=>{n.current&&e()},a),b(()=>{n.current=!0}),T(()=>{n.current=!1})}let N={initializeWithNull:!1},F=(e,t,n={})=>{let{initializeWithNull:a}=Object.assign({},N,n),[i,o]=(0,r.useState)(a?null:e),c=M(o,t);return b(()=>{a&&c(e)}),I(()=>{c(e)},[e]),[i,o]};var z=n(64063),L=n.n(z);let B=()=>{};function U(e){let t=typeof e;return"string"===t||"number"===t||"bigint"===t||"boolean"===t||"undefined"===t||"symbol"===t}function H(e,t){let n=(0,r.useRef)(t);if(!Array.isArray(t))throw Error("useDeepCompareEffect should be used with an array of dependencies");B(!t.every(U),"useDeepCompareEffect should not be used with primitive values as dependencies"),L()(n.current,t)||(n.current=t),(0,r.useEffect)(e,n.current)}function G(e){let t=i(e);return function(...e){"function"==typeof t.current&&t.current(...e)}}function W(e,t,n,i={},o=!0,c=!1){let s=G(n);(c?a:r.useEffect)(()=>(B(void 0!==e,"[useGlobalObjectEventListener]: Cannot attach event handlers to undefined."),void 0!==e&&o)?(e.addEventListener(t,s,i),()=>{e.removeEventListener(t,s,i)}):()=>{},[t,i])}function q(e,t=!0,r=!1){W(n.g.window,"resize",e,{passive:!0},t,r)}function V(e,t=!0,r=!1){W(n.g.window,"scroll",e,{passive:!0},t,r)}let Q=e=>{let t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width,x:t.left,y:t.top}},Z=[void 0,null,null],Y=({updateOnScroll:e=!0,updateOnResize:t=!0}={})=>{let[n,a]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),c=(0,r.useCallback)(e=>{o(e)},[]),s=(0,r.useCallback)(()=>{window.requestAnimationFrame(()=>{i&&a(Q(i))})},[i]);return((0,r.useLayoutEffect)(()=>{s()},[s]),q(()=>{s()},t,!0),V(()=>{s()},e,!0),"undefined"==typeof window)?(console.warn("useDimensionsRef: window is undefined."),Z):[c,n,i]};function J(e,t,r={},a=!1){W(n.g.document,e,t,r,!0,a)}function K(e,t={}){let n="undefined"!=typeof window,a=(0,r.useRef)(n?document.title:""),{resetOnUnmount:i=!1}=t;(0,r.useEffect)(()=>{if(n){document.title=e;let t=a.current;if(i)return()=>{document.title=t}}return c},[e,n,i])}function $(){let[e,t]=(0,r.useState)(document?document.visibilityState:null),a=(0,r.useCallback)(()=>{t(document?document.visibilityState:null)},[]);return W(n.g.document,"visibilitychange",a,{},!0,!0),e}function X(e,t=!0){let n=(0,r.useRef)(!1),a=(0,r.useRef)(e);(0,r.useEffect)(()=>{a.current=e}),(0,r.useEffect)(()=>{t&&!n.current&&(a.current(),n.current=!0)},[t])}function ee(){let[e,t]=(0,r.useState)(null);return[(0,r.useCallback)(e=>{t(e)},[]),e]}function et(e,t,n={},i=!1){let[o,s]=ee(),u=G(t);return(i?a:r.useEffect)(()=>(null==s?void 0:s.addEventListener)?(s.addEventListener(e,u,n),()=>{s.removeEventListener(e,u,n)}):c,[s,e,n]),o}function en(e={},t={}){let{accept:n,maxFileSize:a,maxFiles:i}=e,{onDrop:s=c,onFileAccepted:u=c,onFileRejected:l=c,onDragEnter:d=c,onDragLeave:f=c}=t,[p,h]=(0,r.useState)(null),m=o(s),v=o(u),y=o(l),b=o(d),g=o(f);(0,r.useCallback)(e=>{h(e)},[]);let x=(0,r.useCallback)(e=>n&&!n.includes(e.type)?{valid:!1,reason:"File type not allowed"}:a&&e.size>a?{valid:!1,reason:"File size exceeds the limit"}:{valid:!0},[n,a]),w=(0,r.useCallback)(e=>{var t;e.preventDefault();let n=Array.from((null===(t=e.dataTransfer)||void 0===t?void 0:t.files)||[]),r=[],a=[];if(i&&n.length>i)for(let e of n)y(e,"Exceeded maximum number of files");else n.forEach(e=>{let t=x(e);t.valid?(r.push(e),v(e)):(a.push(e),y(e,t.reason||"Unknown reason"))});m(r,a)},[x,v,y,i,m]),k=(0,r.useCallback)(e=>{e.preventDefault()},[]);return(0,r.useEffect)(()=>p?(p.addEventListener("drop",w),p.addEventListener("dragover",k),p.addEventListener("dragenter",b),p.addEventListener("dragleave",g),()=>{p.removeEventListener("drop",w),p.removeEventListener("dragover",k),p.removeEventListener("dragenter",b),p.removeEventListener("dragleave",g)}):()=>{},[p,w,k,b,g]),(0,r.useCallback)(e=>{h(e)},[])}let er={DOM_UNAVAILABLE_ERROR:"DOM is unavailable server-side. Please use this method client-side only.",FULLSCREEN_UNSUPPORTED_ERROR:"Your browser does not support Fullscreen API.",getEventsNames(){if("undefined"==typeof document)return null;let e=document;return"exitFullscreen"in e?["fullscreenchange","fullscreenerror"]:"webkitExitFullscreen"in e||"webkitCancelFullScreen"in e?["webkitfullscreenchange","webkitfullscreenerror"]:"mozCancelFullScreen"in e?["mozfullscreenchange","mozfullscreenerror"]:"msExitFullscreen"in e?["MSFullscreenChange","MSFullscreenError"]:null},getEventName(e){let t=this.getEventsNames();return t?"change"===e?t[0]:t[1]:null},get fullscreenEnabled(){if("undefined"==typeof document)return!1;let e=document;return e.fullscreenEnabled||e.webkitFullscreenEnabled||!!e.webkitCancelFullScreen||e.mozFullScreenEnabled||e.msFullscreenEnabled||!1},get fullscreenElement(){if("undefined"==typeof document)return null;let e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.webkitCurrentFullScreenElement||e.mozFullScreenElement||e.msFullscreenElement||null},requestFullscreen(e,t){if("undefined"==typeof document)throw Error(this.DOM_UNAVAILABLE_ERROR);let n=null!=e?e:document.documentElement,r=n.requestFullscreen||n.webkitRequestFullscreen||n.webkitRequestFullScreen||n.mozRequestFullScreen||n.msRequestFullscreen;if(!r)throw Error(this.FULLSCREEN_UNSUPPORTED_ERROR);return r.call(n,t)},exitFullscreen(){if("undefined"==typeof document)throw Error(this.DOM_UNAVAILABLE_ERROR);let e=document,t=e.exitFullscreen||e.webkitExitFullscreen||e.webkitCancelFullScreen||e.mozCancelFullScreen||e.msExitFullscreen;if(!t)throw Error(this.FULLSCREEN_UNSUPPORTED_ERROR);return t.call(e)},on(e,t){let n=this.getEventName(e);n&&document.addEventListener(n,t)},off(e,t){let n=this.getEventName(e);n&&document.removeEventListener(n,t)}};function ea(e={}){let{target:t,onChange:n,onError:a,requestFullScreenOptions:i}=e,[o,c]=(0,r.useState)(!1),[s,u]=(0,r.useState)(null),[l,d]=(0,r.useState)(!1),f=(0,r.useCallback)(()=>er.requestFullscreen((null==t?void 0:t.current)||null,i),[t,i]),p=(0,r.useCallback)(()=>er.exitFullscreen(),[]),h=(0,r.useCallback)(()=>er.fullscreenElement?p():f(),[f,p]),m=(0,r.useCallback)(e=>{let t=er.fullscreenElement;u(t),d(!!t),null==n||n(e)},[n]),v=(0,r.useCallback)(e=>{let t=er.fullscreenElement;u(t),d(!!t),null==a||a(e)},[a]);return(0,r.useEffect)(()=>{c(er.fullscreenEnabled)},[]),(0,r.useEffect)(()=>(er.on("change",m),er.on("error",v),()=>{er.off("change",m),er.off("error",v)}),[m,v]),{isFullscreenAvailable:o,fullscreenElement:s,isFullscreenEnabled:l,enableFullscreen:f,disableFullscreen:p,toggleFullscreen:h}}let ei=e=>{let{onBlur:t,onFocus:n,onFocusChange:a}=e,i=(0,r.useCallback)(e=>{e.target===e.currentTarget&&(t&&t(e),a&&a(!1))},[t,a]);return{focusProps:{onFocus:(0,r.useCallback)(e=>{e.target===e.currentTarget&&(n&&n(e),a&&a(!0))},[a,n]),onBlur:i}}},eo=e=>{let{onBlurWithin:t,onFocusWithin:n,onFocusWithinChange:a}=e,i=(0,r.useRef)({isFocusWithin:!1}),o=(0,r.useCallback)(e=>{i.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(i.current.isFocusWithin=!1,t&&t(e),a&&a(!1))},[t,a]);return{focusWithinProps:{onFocus:(0,r.useCallback)(e=>{i.current.isFocusWithin||(n&&n(e),a&&a(!0),i.current.isFocusWithin=!0)},[n,a]),onBlur:o}}},ec={enableHighAccuracy:!1,maximumAge:0,timeout:Number.POSITIVE_INFINITY,when:!0},es=(e=ec)=>{let[t,n]=(0,r.useState)(null),{when:a,enableHighAccuracy:i,timeout:o,maximumAge:c}=e,s=h();return(0,r.useEffect)(()=>{async function e(){try{var e;let t=await (e={enableHighAccuracy:i,maximumAge:c,timeout:o,when:a},new Promise((t,n)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let{coords:n}=e,{latitude:r,longitude:a}=n;t({isError:!1,lat:r,lng:a,message:""})},e=>{n({isError:!0,message:e.message})},e):n({isError:!0,message:"Geolocation is not supported for this Browser/OS."})}));s()&&n(t)}catch(e){s()&&n(e)}}a&&e()},[a,i,o,c,s]),t},eu={};function el(e="",t=eu){let[n,a]=(0,r.useState)(e),i=(0,r.useCallback)(e=>{let r=e.target.value,i=!0;"function"==typeof t.validate&&(i=t.validate(r,n)),i&&a(r)},[t,n]);return(0,r.useEffect)(()=>{a(e)},[e]),{onChange:i,value:n}}let ed={root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,1]};function ef(e,t=ed){let{root:n=null,rootMargin:a,threshold:i}=t,[o,s]=(0,r.useState)(null),u=(0,r.useRef)(e);(0,r.useEffect)(()=>{u.current=e});let l=(0,r.useCallback)((...e)=>{var t;return null===(t=u.current)||void 0===t?void 0:t.call(u,...e)},[]);return(0,r.useEffect)(()=>{if(o){let e=new IntersectionObserver(l,{root:n,rootMargin:a,threshold:i});return e.observe(o),()=>{e.disconnect()}}return c},[o,l,n,a,i]),[(0,r.useCallback)(e=>{s(e)},[])]}let ep={root:null,rootMargin:"0px 0px 0px 0px",threshold:[0,1]};function eh(e,t){let n="function"==typeof e?e:c,a="object"==typeof e?e:t||ep,{root:i=null,rootMargin:o,threshold:s}=a,[u,l]=(0,r.useState)(null),[d,f]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(u){let e=new IntersectionObserver((e,t)=>{for(let{isIntersecting:t}of e)f(t);n(e,t)},a);return e.observe(u),()=>{e.disconnect()}}return c},[u,n,i,o,s,a]),[(0,r.useCallback)(e=>{l(e)},[]),d]}function em(e=!1){let[t,n]=(0,r.useState)(null),a=(0,r.useCallback)(e=>{n(e)},[]),[i,c]=(0,r.useState)(!1),s=(0,r.useCallback)(e=>{var t;e.preventDefault(),(null===(t=e.dataTransfer)||void 0===t?void 0:t.types.includes("Files"))?i||c(!0):c(!1)},[i]),u=(0,r.useCallback)(e=>{var t;e.preventDefault(),(null===(t=e.dataTransfer)||void 0===t?void 0:t.types.includes("Files"))?i||c(!0):c(!1)},[i]),l=(0,r.useCallback)(e=>{e.preventDefault(),c(!1)},[]),d=(0,r.useCallback)(e=>{e.preventDefault(),c(!1)},[]),f=o(s),p=o(u),h=o(l),m=o(d);return((0,r.useEffect)(()=>{let n=e?window:t;return n&&(n.addEventListener("dragenter",f),n.addEventListener("dragover",p),n.addEventListener("dragleave",h),n.addEventListener("drop",m)),()=>{n&&(n.removeEventListener("dragenter",f),n.removeEventListener("dragover",p),n.removeEventListener("dragleave",h),n.removeEventListener("drop",m))}},[f,h,p,m,i,e,t]),e)?i:[a,i]}let ev=(e,t)=>e.key===t||e.code===t||e.keyCode===t||e.which===t||e.charCode===t,ey={eventTypes:["keydown"],when:!0};function eb(e,t,n){let a=(0,r.useMemo)(()=>Array.isArray(e)?e:[e],[e]),i=(0,r.useMemo)(()=>Object.assign(Object.assign({},ey),n),[n]),{when:o,eventTypes:s}=i,u=(0,r.useRef)(t),{target:l}=i;(0,r.useEffect)(()=>{u.current=t});let d=(0,r.useCallback)(e=>{a.some(t=>ev(e,t))&&u.current(e)},[a]);(0,r.useEffect)(()=>{if(o&&"undefined"!=typeof window){if(l){let e=l.current;if(e){for(let t of s)e.addEventListener(t,d);return()=>{for(let t of s)e.removeEventListener(t,d)}}}else{for(let e of s)window.addEventListener(e,d);return()=>{for(let e of s)window.removeEventListener(e,d)}}}return c},[o,s,a,l,t,d])}let eg=(e,t)=>{for(let n in e)eb(n,e[n],t)},ex={eventTypes:["keydown"],when:!0};function ew(e,t,n){let[a,i]=(0,r.useState)(null),o=(0,r.useCallback)(e=>{i(e)},[]),s=(0,r.useMemo)(()=>Array.isArray(e)?e:[e],[e]),{when:u,eventTypes:l}=(0,r.useMemo)(()=>Object.assign(Object.assign({},ex),n),[n]),d=(0,r.useRef)(t);(0,r.useEffect)(()=>{d.current=t});let f=(0,r.useCallback)(e=>{s.some(t=>ev(e,t))&&d.current(e)},[s]);return(0,r.useEffect)(()=>{if(u&&a){for(let e of l)a.addEventListener(e,f);return()=>{for(let e of l)a.removeEventListener(e,f)}}return c},[a,u,l,s,f]),o}let ek={continuous:!1,when:!0};function eO(e,t,n){let{target:a,when:i,continuous:o,preventLostKeyup:s}=Object.assign(Object.assign({},ek),n),u=(0,r.useRef)(t),l=(0,r.useRef)({}).current;(0,r.useEffect)(()=>{u.current=t});let d=(0,r.useCallback)(t=>{let n=null,r=!1;for(let r of e)ev(t,r)&&(l[r]=!0,n=r);e.every(e=>!!l[e])&&(r=!0),r&&(u.current(t),o||null===n||(l[n]=!1))},[e,l,o]),f=(0,r.useCallback)(t=>{for(let n of e)ev(t,n)&&(l[n]=void 0)},[l,e]);(0,r.useEffect)(()=>{if(i&&"undefined"!=typeof window){let e=(null==a?void 0:a.current)?a.current:document;return e.addEventListener("keydown",d),e.addEventListener("keyup",f),()=>{e.removeEventListener("keydown",d),e.removeEventListener("keyup",f)}}return c},[i,a,e,d,f]),(0,r.useEffect)(()=>{if(!0!==s)return c;if("undefined"!=typeof window){let t=window.alert;window.alert=n=>{for(let t of e)l[t]=void 0;return t(n)};let n=window.confirm;window.confirm=t=>{for(let t of e)l[t]=void 0;return n(t)};let r=window.prompt;return window.prompt=(t,n)=>{for(let t of e)l[t]=void 0;return r(t,n)},()=>{window.alert=t,window.confirm=n,window.prompt=r}}return c},[l,e,s])}let e_=(e="Component",...t)=>{b(()=>(console.log(`${e} mounted`,...t),()=>console.log(`${e} unmounted`))),I(()=>{console.log(`${e} updated`,...t)}),T(()=>{console.log(`${e} unmounted`)})};function eE(e){(0,r.useEffect)(()=>{if(!e)return c;{let e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[e])}function eS(e,t){let[n,a]=(0,r.useState)(()=>(function(e,t){let n=function(e){var t;if("undefined"==typeof localStorage)return null;let n=null!==(t=localStorage.getItem(e))&&void 0!==t?t:"null";try{return JSON.parse(n)}catch(e){console.error(e)}return n}(e);return null===n?"function"==typeof t?t():t:n})(e,t)),o=(0,r.useRef)(!1),c=(0,r.useRef)(!1),s=(0,r.useMemo)(()=>`rooks-${e}-localstorage-update`,[e]);(0,r.useEffect)(()=>{if(!o.current||!c.current)"undefined"==typeof localStorage||(void 0===n?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(n)))},[e,n]);let u=(0,r.useCallback)(t=>{var r;if(t.storageArea===localStorage&&t.key===e)try{o.current=!0;let e=JSON.parse(null!==(r=t.newValue)&&void 0!==r?r:"null");n!==e&&a(e)}catch(e){console.log(e)}},[e,n]);(0,r.useEffect)(()=>"undefined"!=typeof window?(window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}):(console.warn("useLocalstorageState: window is undefined."),()=>{}),[u]);let l=(0,r.useCallback)(e=>{try{c.current=!0;let{newValue:t}=e.detail;n!==t&&a(t)}catch(e){console.log(e)}},[n]);(0,r.useEffect)(()=>"undefined"!=typeof document?(document.addEventListener(s,l),()=>{document.removeEventListener(s,l)}):(console.warn("[useLocalstorageState] document is undefined."),()=>{}),[s,l]);let d=(0,r.useCallback)(e=>{if("undefined"!=typeof document){let t=new CustomEvent(s,{detail:{newValue:e}});document.dispatchEvent(t)}else console.warn("[useLocalstorageState] document is undefined.")},[s]),f=i(n,!0);return[n,(0,r.useCallback)(e=>{let t="function"==typeof e?e(f.current):e;o.current=!1,c.current=!1,a(t),d(t)},[d,f]),(0,r.useCallback)(()=>{localStorage.removeItem(e)},[e])]}function eC(e){let[t,n]=(0,r.useState)(e||new Map),a=(0,r.useCallback)((e,t)=>{n(n=>new Map(n.set(e,t)))},[]),i=(0,r.useCallback)(e=>{n(t=>{let n=new Map(t);return e.forEach(([e,t])=>{n.set(e,t)}),n})},[]),o=(0,r.useCallback)(e=>{n(t=>{let n=new Map(t);return n.delete(e),n})},[]),c=(0,r.useCallback)(e=>{n(t=>{let n=new Map(t);return e.forEach(e=>{n.delete(e)}),n})},[]),s=(0,r.useCallback)(()=>{n(new Map)},[]),u=(0,r.useCallback)(e=>t.has(e),[t]),l=(0,r.useCallback)(e=>e.some(e=>t.has(e)),[t]),d=(0,r.useCallback)(e=>e.every(e=>t.has(e)),[t]),f=(0,r.useCallback)(e=>t.get(e),[t]),p=(0,r.useCallback)(()=>t.size,[t]);return[t,{set:a,remove:o,clear:s,has:u,get:f,size:p,setMultiple:i,removeMultiple:c,hasSome:l,hasEvery:d}]}function eP(e){let t=(0,r.useMemo)(()=>window.matchMedia(e),[e]),[n,a]=(0,r.useState)(()=>t.matches);return((0,r.useEffect)(()=>{a(t.matches);let e=e=>a(e.matches);return t.addEventListener?(t.addEventListener("change",e),()=>t.removeEventListener("change",e)):(t.addListener(e),()=>t.removeListener(e))},[t]),"undefined"==typeof window)?(console.warn("useMediaMatch cannot function as window is undefined."),!1):n}function ej(...e){return(0,r.useMemo)(()=>e.every(e=>null===e)?null:t=>{for(let n of e)"function"==typeof n?n(t):null!=n&&(n.current=t)},[e])}let eA={clientX:null,clientY:null,movementX:null,movementY:null,offsetX:null,offsetY:null,pageX:null,pageY:null,screenX:null,screenY:null,x:null,y:null};function eD(){let[e,t]=(0,r.useState)(eA);function n(e){t(function(e){let{screenX:t,screenY:n,movementX:r,movementY:a,pageX:i,pageY:o,clientX:c,clientY:s,offsetX:u,offsetY:l}=e;return{clientX:c,clientY:s,movementX:r,movementY:a,offsetX:u,offsetY:l,pageX:i,pageY:o,screenX:t,screenY:n,x:t,y:n}}(e))}return(0,r.useEffect)(()=>(document.addEventListener("mousemove",n),()=>{document.removeEventListener("mousemove",n)}),[]),e}let eT={deltaX:0,deltaY:0,clientX:null,clientY:null,velocityX:0,velocityY:0,timeStamp:Date.now()};function eM(){let[e,t]=(0,r.useState)(()=>Object.assign(Object.assign({},eT),{timeStamp:Date.now()})),n=(0,r.useRef)(null),a=o((0,r.useCallback)(r=>{let a=r.timeStamp,i=n.current;if(i&&null!==i.clientX&&null!==i.clientY){let o=r.clientX-i.clientX,c=r.clientY-i.clientY,s=a-i.timeStamp;n.current=e,t({deltaX:o,clientX:r.clientX,clientY:r.clientY,deltaY:c,velocityX:0===s?0:o/s,velocityY:0===s?0:c/s,timeStamp:a})}else n.current=Object.assign(Object.assign({},e),{clientX:r.clientX,clientY:r.clientY,timeStamp:r.timeStamp}),t({clientX:r.clientX,clientY:r.clientY,deltaX:0,deltaY:0,velocityX:0,velocityY:0,timeStamp:r.timeStamp})},[e]));return(0,r.useEffect)(()=>(document.addEventListener("mousemove",a,{passive:!0}),()=>{document.removeEventListener("mousemove",a)}),[a]),(0,r.useMemo)(()=>{let{deltaX:t,deltaY:n,velocityX:r,velocityY:a}=e;return{deltaX:t,deltaY:n,velocityX:r,velocityY:a}},[e])}let eR={delta:0,velocity:0,timeStamp:Date.now()};function eI(){let[e,t]=(0,r.useState)(()=>Object.assign(Object.assign({},eR),{timeStamp:Date.now()})),n=(0,r.useRef)(null),a=o((0,r.useCallback)(r=>{let a=r.timeStamp,i=n.current;if(i){let o=r.deltaY,c=a-i.timeStamp;console.log(c);let s=0===c?0:o/c;console.log("delta",o),console.log("timedelta",c),console.log("velocity",s),n.current=e,t({delta:o,velocity:s,timeStamp:a})}else n.current={velocity:0,delta:0,timeStamp:r.timeStamp},t({delta:r.deltaY,velocity:0,timeStamp:r.timeStamp})},[e]));return(0,r.useEffect)(()=>(document.addEventListener("wheel",a),()=>{document.removeEventListener("wheel",a)}),[a]),console.log(e),(0,r.useMemo)(()=>{let{delta:t,velocity:n}=e;return{delta:t,velocity:n}},[e])}function eN(e,t){Object.values(t).every(e=>void 0!==e)?console.warn(`${e}. Expected either ${Object.keys(t).join(" or ")} to be provided. However all were provided`):Object.values(t).every(e=>void 0===e)&&console.warn(`${e}. ${Object.keys(t).join(" , ")} are all undefined.`)}function eF(e=[],t=[0],n=!1){let[a,i]=(0,r.useState)(t),o=a.map(t=>e[t]),c=[a,o],s=(0,r.useCallback)(e=>{let t;if(a.includes(e)){t=[...a];let n=a.indexOf(e);-1!==n&&t.splice(n,1)}else t=[...a,e];t.length>0?i(t):n?i(t):console.warn("toggleSelection failed. Do the values exist in the list?")},[n,a]),u=(0,r.useCallback)(({index:t,value:n})=>()=>{if(eN("toggleSelection",{index:t,value:n}),void 0!==t)s(t);else if(void 0!==n){let t=e.indexOf(n);t>-1&&s(t)}},[e,s]);return[c,{matchSelection:(0,r.useCallback)(({index:e,value:t})=>(eN("matchSelection",{index:e,value:t}),void 0!==e)?a.includes(e):void 0!==t&&o.includes(t),[a,o]),toggleSelection:u,updateSelections:({indices:t,values:r})=>()=>{if(eN("updateSelections",{indices:t,values:r}),void 0!==t){if(!n&&0===t.length){console.warn("updateSelections failed. indices is an empty list.");return}i(t)}else if(void 0!==r){let t=e.reduce((e,t,n)=>r.includes(t)?[...e,n]:e,[]);t.length>0?i(t):n?i(t):console.warn("updateSelections failed. Do the values exist in the list?")}}}]}function ez(e,t,r={},a=!1){W(n.g.window,e,t,r,!0,a)}function eL(){return"undefined"!=typeof navigator?navigator.language:null}function eB(){let[e,t]=(0,r.useState)(eL);return ez("languagechange",()=>{t(eL)}),e}function eU(e){let[t,n]=(0,r.useState)(null),a=o((0,r.useCallback)(t=>{t.preventDefault(),e()},[e]));return(0,r.useEffect)(()=>t?(t.addEventListener("click",a),t.addEventListener("touchend",a),()=>{t.removeEventListener("click",a),t.removeEventListener("touchend",a)}):c,[t,a]),(0,r.useCallback)(e=>{e&&n(e)},[])}function eH(e,t){let[n,a]=(0,r.useState)(null),i=(0,r.useCallback)(t=>{null==e||e(t)},[e]),s=(0,r.useCallback)(e=>{null==t||t(e)},[t]),u=o(i),l=o(s);return(0,r.useEffect)(()=>n?(n.addEventListener("mouseenter",u),n.addEventListener("mouseleave",l),()=>{n.removeEventListener("mouseenter",u),n.removeEventListener("mouseleave",l)}):c,[u,l,n]),e=>{a(e)}}var eG=n(61688);function eW(){return"undefined"==typeof window?null:navigator.onLine}function eq(e){return"undefined"!=typeof window?(window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}):(console.warn("useOnline: window is undefined."),c)}function eV(){return(0,eG.useSyncExternalStore)(eq,eW)}let eQ=()=>{let[e,t]=(0,r.useState)("undefined"!=typeof window?window.screen.orientation:null);return(0,r.useEffect)(()=>{let e=()=>{t(window.screen.orientation)};return window.screen.orientation.addEventListener("change",e),()=>{window.screen.orientation.removeEventListener("change",e)}},[]),e};function eZ(e,t,n=!0){let a=(0,r.useRef)(t),i=(0,r.useCallback)(t=>{e.current&&!e.current.contains(t.target)&&a.current(t)},[e]);(0,r.useEffect)(()=>{a.current=t}),(0,r.useEffect)(()=>n?(document.addEventListener("click",i,!0),document.addEventListener("ontouchstart",i,!0),()=>{document.removeEventListener("click",i,!0),document.removeEventListener("ontouchstart",i,!0)}):c,[e,t,n,i])}function eY(e,t=!0){let n=(0,r.useRef)(e),[a,i]=(0,r.useState)(null),o=(0,r.useCallback)(e=>{a&&!a.contains(e.target)&&n.current(e)},[a]);(0,r.useEffect)(()=>{n.current=e});let s=(0,r.useCallback)(e=>{i(e)},[]);return(0,r.useEffect)(()=>t?(document.addEventListener("click",o,!0),document.addEventListener("ontouchstart",o,!0),()=>{document.removeEventListener("click",o,!0),document.removeEventListener("ontouchstart",o,!0)}):c,[t,o]),[s]}function eJ(e){let t=(0,r.useRef)(null),n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{n.current=t.current,t.current=e},[e]),e===t.current?n.current:t.current}function eK(e){let t=(0,r.useRef)(null);return(0,r.useEffect)(()=>{t.current=e}),t.current}function e$(e,t=[]){let[n,a]=(0,r.useState)({data:null,loading:!0,error:null}),i=o(e);return(0,r.useEffect)(()=>{let e=!0;return async function(){try{let t=await i();e&&a({data:t,loading:!1,error:null})}catch(t){e&&a({data:null,loading:!1,error:t instanceof Error?t:Error(String(t))})}}(),()=>{e=!1}},[i,...t]),n}function eX(e){let[t,n]=(0,r.useState)([...e]),a=(0,r.useCallback)(e=>{let r=[...t,e];return n(r),r.length},[t]),i=(0,r.useCallback)(()=>{if(t.length>0){let e=t[0];return n([...t.slice(1)]),e}},[t]),o=(0,r.useCallback)(()=>{if(t.length>0)return t[0]},[t]),c={dequeue:i,enqueue:a,length:t.length,peek:o};return[t,c]}var e0=n(54087),e1=n.n(e0);function e2(e,t){let n=(0,r.useRef)();(0,r.useEffect)(()=>{n.current=e},[e]),(0,r.useEffect)(()=>{let e;let r=Date.now();function a(){var t;let i=Date.now()-r;r=Date.now(),e=e1()(a),null===(t=n.current)||void 0===t||t.call(n,i)}return t?(r=Date.now(),e=e1()(a),()=>{e&&e1().cancel(e)}):c},[t])}let e3={box:"content-box"};function e5(e,t=e3){let{box:n}=t,[a,i]=(0,r.useState)(null),o=(0,r.useRef)(e);(0,r.useEffect)(()=>{o.current=e});let s=(0,r.useCallback)((...e)=>{var t;null===(t=o.current)||void 0===t||t.call(o,...e)},[]);return(0,r.useEffect)(()=>{if(a){let e=new ResizeObserver(s);return e.observe(a,{box:n}),()=>{e.disconnect()}}return c},[a,s,n]),[(0,r.useCallback)(e=>{i(e)},[])]}function e4(){return++(0,r.useRef)(0).current}function e6(e){let[t,n]=(0,r.useState)(e),a=h();return[t,(0,r.useCallback)(e=>{a()&&n(e)},[a])]}function e7(e,t=0){let[n,a]=(0,r.useState)(t),i=(0,r.useCallback)(t=>{a(e.indexOf(t))},[e]);return{index:n,item:e[n],setIndex:a,setItem:i}}function e8(e,t){Object.values(t).every(e=>void 0!==e)?console.warn(`${e}. Expected either ${Object.keys(t).join(" or ")} to be provided. However all were provided`):Object.values(t).every(e=>void 0===e)&&console.warn(`${e}. ${Object.keys(t).join(" , ")} are all undefined.`)}function e9(e=[],t=0,n=!1){let[a,i]=(0,r.useState)(t),o=e[a],c=[a,o],s=(0,r.useCallback)(({index:t,value:n})=>()=>{if(e8("updateSelection",{index:t,value:n}),void 0!==t)i(t);else if(void 0!==n){let t=e.indexOf(n);t>-1?i(t):console.warn(`updateSelection failed. Does the value ${n} exist in the list?`)}},[e]),u=(0,r.useCallback)(({index:t,value:r})=>()=>{if(e8("toggleSelection",{index:t,value:r}),void 0!==t)a===t?n?i(-1):console.warn("allowUnselected is false. Cannot unselect item"):i(t);else if(void 0!==r){let t=e.indexOf(r);t>-1?a===t?n?i(-1):console.warn("allowUnselected is false. Cannot unselect item"):i(t):(console.log("as"),console.warn(`toggleSelection failed. Does the value ${r} exist in the list?`))}},[n,a,e]);return[c,{matchSelection:(0,r.useCallback)(({index:e,value:t})=>(e8("matchSelection",{index:e,value:t}),void 0!==e)?e===a:t===o,[a,o]),toggleSelection:u,updateSelection:s}]}function te(e,t){let[n,a]=(0,r.useState)(()=>(function(e,t){let n=function(e){var t;if("undefined"==typeof sessionStorage)return null;let n=null!==(t=sessionStorage.getItem(e))&&void 0!==t?t:"null";try{return JSON.parse(n)}catch(e){console.error(e)}return n}(e);return null===n?t:n})(e,t)),i=(0,r.useRef)(!1),o=(0,r.useRef)(!1),c=(0,r.useMemo)(()=>`rooks-${e}-sessionstorage-update`,[e]);(0,r.useEffect)(()=>{if(!i.current)"undefined"==typeof sessionStorage||sessionStorage.setItem(e,JSON.stringify(n))},[e,n]);let s=(0,r.useCallback)(t=>{var r;if(t.storageArea===sessionStorage&&t.key===e)try{i.current=!0;let e=JSON.parse(null!==(r=t.newValue)&&void 0!==r?r:"null");n!==e&&a(e)}catch(e){console.log(e)}},[e,n]);(0,r.useEffect)(()=>"undefined"!=typeof window?(window.addEventListener("storage",s),()=>{window.removeEventListener("storage",s)}):(console.warn("[useSessionstorageState] window is undefined."),()=>{}),[s]);let u=(0,r.useCallback)(e=>{try{o.current=!0;let{newValue:t}=e.detail;n!==t&&a(t)}catch(e){console.log(e)}},[n]);(0,r.useEffect)(()=>"undefined"!=typeof document?(document.addEventListener(c,u),()=>{document.removeEventListener(c,u)}):(console.warn("[useSessionstorageState] document is undefined."),()=>{}),[c,u]);let l=(0,r.useCallback)(e=>{if("undefined"!=typeof document){let t=new CustomEvent(c,{detail:{newValue:e}});document.dispatchEvent(t)}else console.warn("[useSessionstorageState] document is undefined.")},[c]);return[n,(0,r.useCallback)(e=>{i.current=!1,o.current=!1,a(e),l(e)},[l]),(0,r.useCallback)(()=>{sessionStorage.removeItem(e)},[e])]}function tt(e){let[t,n]=(0,r.useState)(new Set(e)),a=(0,r.useCallback)((...e)=>{n(new Set(t.add(...e)))},[t,n]),i=(0,r.useCallback)((...e)=>{let r=new Set(t);r.delete(...e),n(r)},[t,n]),o=(0,r.useCallback)(()=>{n(new Set)},[n]),c=(0,r.useMemo)(()=>({add:a,delete:i,clear:o}),[a,i,o]);return(0,r.useMemo)(()=>[t,c],[t,c])}function tn(e){let[t,n]=(0,r.useState)([...e]),a=t.length,i=(0,r.useMemo)(()=>{let e=[...t];return e.reverse(),e},[t]),o=(0,r.useCallback)(e=>{let r=[...t,e];return n(r),r.length},[t]),c=(0,r.useCallback)(()=>{if(t.length>0){let e=t[t.length-1];return n([...t.slice(0,t.length-1)]),e}},[t]),s=(0,r.useCallback)(()=>{if(t.length>0)return t[t.length-1]},[t]),u=(0,r.useCallback)(()=>0===t.length,[t]);return[t,{clear:()=>n([]),isEmpty:u,length:a,peek:s,pop:c,push:o},i]}function tr(e){let{text:t,language:n="en-US",voiceURI:a,onEnd:i=c,volume:s=1,pitch:u=1,rate:l=1}=e,d=o(i),f=(0,r.useRef)(null),[p,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(f.current&&p&&(f.current.text=t,f.current.lang=n,f.current.volume=s,f.current.pitch=u,f.current.rate=l,a)){let e=window.speechSynthesis.getVoices().find(e=>e.voiceURI===a);e&&(f.current.voice=e)}},[t,p,n,a,s,u,l]);let m=(0,r.useCallback)(()=>{if(!("speechSynthesis"in window)){console.error("Web Speech API is not supported in your browser.");return}if(f.current&&window.speechSynthesis.cancel(),f.current=new SpeechSynthesisUtterance(t),f.current.lang=n,f.current.volume=s,f.current.pitch=u,f.current.rate=l,a){let e=window.speechSynthesis.getVoices().find(e=>e.voiceURI===a);e&&(f.current.voice=e)}f.current.onstart=()=>h(!0),f.current.onend=()=>{h(!1),d()},f.current.onerror=()=>h(!1),window.speechSynthesis.speak(f.current)},[t,n,s,u,l,a,d]),v=(0,r.useCallback)(()=>{window.speechSynthesis&&p&&(window.speechSynthesis.pause(),h(!1))},[p]);return{start:m,pause:v,resume:(0,r.useCallback)(()=>{window.speechSynthesis&&!p&&(window.speechSynthesis.resume(),h(!0))},[p]),stop:(0,r.useCallback)(()=>{window.speechSynthesis&&(window.speechSynthesis.cancel(),h(!1))},[]),isPlaying:p}}let ta=e=>"function"==typeof e,ti=e=>"number"==typeof e,to=(e,t)=>{let n=e>0?e-1:t.length+e;return n>=t.length-1&&(n=t.length-1),n<0&&(n=0),n},tc=(e,t)=>{let n=to(e,t);return{_current:t[n],_before:t.slice(0,n),_after:t.slice(n+1)}};function ts(e){let[t,n]=(0,r.useState)({present:e,past:[],future:[]}),{present:a,past:i,future:o}=t,c=(0,r.useRef)(e),s=(0,r.useCallback)(e=>{let t=null!=e?e:c.current;c.current=t,n({present:t,future:[],past:[]})},[c,n]),u=(0,r.useCallback)((e,t)=>{n(n=>{let r;let{past:a,present:i}=n,{overwriteLastEntry:o=!1}=t||{};return(r=ta(e)?e(i):e,o)?{present:r,past:a,future:[]}:{present:r,future:[],past:[...a,i]}})},[]),l=(0,r.useCallback)((e=1)=>{n(t=>{let{future:n,past:r,present:a}=t;if(0===n.length)return t;let{_before:i,_current:o,_after:c}=tc(e,n);return{past:[...r,a,...i],present:o,future:c}})},[]),d=(0,r.useCallback)((e=-1)=>{n(t=>{let{future:n,past:r,present:a}=t;if(0===r.length)return t;let{_before:i,_current:o,_after:c}=tc(e,r);return{past:i,present:o,future:[...c,a,...n]}})},[]),f=(0,r.useCallback)(e=>{let t=ti(e)?e:Number(e);if(0!==t){if(t>0)return l(t);d(t)}},[d,l]),p=(0,r.useCallback)(()=>{f(-1)},[f]),h=(0,r.useCallback)(()=>{f(1)},[f]),m=(0,r.useMemo)(()=>i.length>0,[i.length]),v=(0,r.useMemo)(()=>o.length>0,[o.length]),y=(0,r.useMemo)(()=>({backLength:i.length,forwardLength:o.length,go:f,back:p,forward:h,reset:s,undo:p,redo:h,canUndo:m,canRedo:v}),[p,v,m,h,o.length,f,i.length,s]);return(0,r.useMemo)(()=>[a,u,y],[y,a,u])}function tu(e,t=300){let[n,a]=(0,r.useState)(!0),i=(0,r.useRef)(void 0),o=(0,r.useCallback)((...t)=>{n&&(a(!1),e(...t))},[n,e]);return(0,r.useEffect)(()=>n?c:(i.current=window.setTimeout(()=>{a(!0)},t),()=>window.clearTimeout(i.current)),[n,t]),[o,n]}let tl=e=>!e;function td(e=!1,t=tl){return(0,r.useReducer)(t,e)}let tf={maxSize:100},tp=(e,t)=>{let{maxSize:n}=(0,r.useMemo)(()=>Object.assign(Object.assign({},tf),t),[t]),[a,i]=(0,r.useState)([e]),o=(0,r.useCallback)(e=>i(t=>{let r=t.length>=n?t.slice(0,n):t;return"function"==typeof e?[e(t[0]),...r]:[e,...r]}),[n]),c=(0,r.useCallback)(()=>{i(e=>{if(1===e.length)return e;let[,...t]=e;return t})},[]);return(0,r.useMemo)(()=>[a[0],o,c],[o,c,a])};function th(e,t){var n;let[a,i]=(0,r.useState)(e),[o,c]=(0,r.useState)([]),[s,u]=(0,r.useState)([]),l=null!==(n=null==t?void 0:t.maxDepth)&&void 0!==n?n:100,d=(0,r.useCallback)(()=>{c(e=>{let t=[...e],n=t.pop();return void 0!==n&&(u(e=>[a,...e]),i(n)),t})},[a]),f=(0,r.useCallback)(()=>{u(e=>{let t=[...e],n=t.shift();return void 0!==n&&(c(e=>[...e,a]),i(n)),t})},[a]),p=(0,r.useCallback)(()=>o.length>0,[o]),h=(0,r.useCallback)(()=>s.length>0,[s]),m=(0,r.useMemo)(()=>o.length>0,[o]),v=(0,r.useMemo)(()=>s.length>0,[s]),y=(0,r.useCallback)(e=>{i(t=>{let n="function"==typeof e?e(t):e;return c(e=>{let n=[...e,t];return n.length>l&&n.shift(),n}),u([]),n})},[l]),b=(0,r.useCallback)(()=>{c([])},[]),g=(0,r.useCallback)(()=>{u([])},[]),x=(0,r.useCallback)(()=>{c([]),u([])},[]),w=(0,r.useMemo)(()=>({undo:d,redo:f,canUndo:p,canRedo:h,clearUndoStack:b,clearRedoStack:g,clearAll:x,isUndoPossible:m,isRedoPossible:v}),[d,f,p,h,b,g,x,m,v]);return[a,y,w]}function tm({isEnabled:e,pattern:t}){(0,r.useEffect)(()=>{if(!("vibrate"in navigator)||"function"!=typeof navigator.vibrate){console.warn("Vibration API not supported by the current browser");return}return e?navigator.vibrate(t):navigator.vibrate(0),()=>{navigator.vibrate(0)}},[e,t])}let tv=()=>{let e=(0,r.useRef)(null),[t,n]=(0,r.useState)({currentTime:0,duration:0,isPaused:!0,isMuted:!1,volume:1});return(0,r.useEffect)(()=>{let t=e.current,r=()=>{n(e=>Object.assign(Object.assign({},e),{currentTime:t.currentTime}))},a=()=>{n(e=>Object.assign(Object.assign({},e),{duration:t.duration}))},i=()=>{n(e=>Object.assign(Object.assign({},e),{isPaused:!0}))},o=()=>{n(e=>Object.assign(Object.assign({},e),{isPaused:!1}))};return t&&(t.addEventListener("timeupdate",r),t.addEventListener("durationchange",a),t.addEventListener("pause",i),t.addEventListener("play",o)),()=>{t&&(t.removeEventListener("timeupdate",r),t.removeEventListener("durationchange",a),t.removeEventListener("pause",i),t.removeEventListener("play",o))}},[e]),[e,t,{play:()=>{e.current&&(e.current.play(),n(Object.assign(Object.assign({},t),{isPaused:!1})))},pause:()=>{e.current&&(e.current.pause(),n(Object.assign(Object.assign({},t),{isPaused:!0})))},toggleMute:()=>{e.current&&(e.current.muted=!e.current.muted,n(Object.assign(Object.assign({},t),{isMuted:e.current.muted})))},setVolume:r=>{e.current&&(e.current.volume=r,n(Object.assign(Object.assign({},t),{volume:r})))},setCurrentTime:r=>{e.current&&(e.current.currentTime=r,n(Object.assign(Object.assign({},t),{currentTime:r})))},fastForward:r=>{e.current&&(e.current.currentTime+=r,n(Object.assign(Object.assign({},t),{currentTime:e.current.currentTime})))},rewind:r=>{e.current&&(e.current.currentTime-=r,n(Object.assign(Object.assign({},t),{currentTime:e.current.currentTime})))},toggleFullScreen:()=>{e.current&&(document.fullscreenElement?document.exitFullscreen():e.current.requestFullscreen())}}]};function ty(e,t,n=!0){let a=(0,r.useRef)({});I(()=>{if(a.current&&n){let n=Object.keys(Object.assign(Object.assign({},a.current),t)),r={};n.forEach(e=>{Object.is(a.current[e],t[e])||(r[e]={from:a.current[e],to:t[e]})}),Object.keys(r).length&&console.log("[why-did-you-update]",e,r)}},[t,e,n]),(0,r.useEffect)(()=>{a.current=t})}function tb(){return"undefined"==typeof window?{scrollX:0,scrollY:0}:{scrollX:window.scrollX||window.pageXOffset,scrollY:window.scrollY||window.pageYOffset}}function tg(){let[e,t]=(0,r.useState)(tb);return V(()=>{t(tb())},!0,!0),q(()=>{t(tb())},!0,!0),e}let tx={innerHeight:null,innerWidth:null,outerHeight:null,outerWidth:null};function tw(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}}function tk(){let[e,t]=(0,r.useState)(()=>"undefined"==typeof window?tx:tw());function n(){t(tw())}return a(()=>"undefined"==typeof window?()=>{}:(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]),e}},88928:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=function(){function e(t){(0,a.default)(this,e);var n=t;"string"==typeof n&&(n=JSON.parse(n)),this.tokenType=n.token_type||n.tokenType,this.accessToken=n.access_token||n.accessToken,this.refreshToken=n.refresh_token||n.refreshToken,this.scope=n.scope}return(0,i.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.accessToken}},{key:"toBasicAuth",value:function(){return"user:".concat(this.accessToken,"@")}},{key:"toJSON",value:function(){return{tokenType:this.tokenType,accessToken:this.accessToken,refreshToken:this.refreshToken,scope:this.scope}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"getAccessToken",value:function(){return this.accessToken}}]),e}();t.default=o},14324:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeApp=t.APPS_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(25665)),u=r(n(27952)),l=r(n(12323)),d=r(n(64512)),f=r(n(27361)),p=n(10513),h=r(n(78140)),m=r(n(67267)),v=n(26070);n(45051);var y=r(n(79271));function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w="io.cozy.apps";t.APPS_DOCTYPE=w;var k=function(e,t){return x(x({},(0,v.normalizeDoctypeJsonApi)(t)(e)),{},{id:e.id})};t.normalizeApp=k;var O=function(e){(0,s.default)(x,e);var t,n,r,d,m,v,g=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.default)(x);return e=t?Reflect.construct(n,arguments,(0,l.default)(this).constructor):n.apply(this,arguments),(0,u.default)(this,e)});function x(e){var t;return(0,o.default)(this,x),(t=g.call(this,w,e)).endpoint="/apps/",t}return(0,c.default)(x,[{key:"get",value:(n=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c,s,u,l,d,m=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.indexOf("/")>-1?r=t.split("/")[1]:(y.default.warn("Deprecated: in next versions of cozy-client, it will not be possible to query apps/konnectors only with id, please use the form ".concat(this.doctype,"/").concat(t,"\n\n- Q('io.cozy.apps').getById('banks')\n+ Q('io.cozy.apps').getById('io.cozy.apps/banks')")),r=t),!(n&&n.sources&&(!Array.isArray(n.sources)||0===n.sources.length))){e.next=3;break}throw Error('Invalid "sources" attribute passed in query, please use an array with at least one element.');case 3:i=(0,f.default)(n,"sources",["stack"]),o={stack:function(){return h.default.get(m.stackClient,"".concat(m.endpoint).concat(encodeURIComponent(r)),{normalize:function(e){return k(e,m.doctype)}})},registry:function(){return m.stackClient.fetchJSON("GET",p.registryEndpoint+r)}},c=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return b(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(i),e.prev=6,c.s();case 8:if((s=c.n()).done){e.next=27;break}return u=s.value,e.prev=10,e.next=13,o[u]();case 13:if(l=e.sent,"registry"===u){e.next=16;break}return e.abrupt("return",l);case 16:return y.default.warn("The use of source registry is deprecated since it can polute the io.cozy.apps slice. For exemple, if we request data from the registry, than the app will be present in the io.cozy.apps slice and then the isInstalled() will return true.\n\n            Use Q('io.cozy.apps_registry) instead"),d=(0,p.transformRegistryFormatToStackFormat)(l),e.abrupt("return",{data:k(d,this.doctype)});case 21:if(e.prev=21,e.t0=e.catch(10),u!==i[i.length-1]){e.next=25;break}throw e.t0;case 25:e.next=8;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(6),c.e(e.t1);case 32:return e.prev=32,c.f(),e.finish(32);case 35:case"end":return e.stop()}},e,this,[[6,29,32,35],[10,21]])})),function(e,t){return n.apply(this,arguments)})},{key:"all",value:(r=(0,i.default)(a.default.mark(function e(){var t,n=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",this.endpoint);case 2:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return k(e,n.doctype)}),meta:{count:t.meta.count},skip:0,next:!1});case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"create",value:(d=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return d.apply(this,arguments)})},{key:"update",value:(m=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("update() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return m.apply(this,arguments)})},{key:"destroy",value:(v=(0,i.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for applications");case 1:case"end":return e.stop()}},e)})),function(){return v.apply(this,arguments)})}]),x}(m.default);O.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=O},20576:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(65105)),i=r(n(19723)),o=function(){function e(t){(0,a.default)(this,e),this.token=t||""}return(0,i.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.token}},{key:"toBasicAuth",value:function(){return"user:".concat(this.token,"@")}},{key:"getAccessToken",value:function(){return this.token}}]),e}();t.default=o},69736:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeAppFromRegistry=t.APPS_REGISTRY_DOCTYPE=void 0;var i=a(n(65105)),o=a(n(19723)),c=a(n(25665)),s=a(n(27952)),u=a(n(12323)),l=a(n(68434)),d=a(n(82007)),f=a(n(64512)),p=a(n(67267)),h=n(26070);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y="io.cozy.apps_registry";t.APPS_REGISTRY_DOCTYPE=y;var b=function(e,t){var n,r="".concat("webapp"===e.type?"io.cozy.apps":"io.cozy.konnectors","/").concat(e.slug),a=v(v({},e.attributes),null===(n=e.latest_version)||void 0===n?void 0:n.manifest);return v({},(0,h.normalizeDoc)(v(v({},e),{},{attributes:a,id:r,_id:r}),t))};t.normalizeAppFromRegistry=b;var g=(r=(0,d.default)(l.default.mark(function e(t,n,r){var a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetchJSON("GET","/registry?versionsChannel=".concat(t,"&filter[type]=konnector&limit=500"));case 2:return a=e.sent,e.abrupt("return",{data:a.data.map(function(e){return b(e,n)})});case 4:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)}),x=function(e){(0,c.default)(p,e);var t,n,r,a,f=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(p);return e=t?Reflect.construct(n,arguments,(0,u.default)(this).constructor):n.apply(this,arguments),(0,s.default)(this,e)});function p(e){var t;return(0,i.default)(this,p),(t=f.call(this,y,e)).endpoint="/registry/",t}return(0,o.default)(p,[{key:"get",value:(n=(0,d.default)(l.default.mark(function e(t){var n,r,a=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.startsWith("konnectors/")){e.next=3;break}return n=t.split("/")[1],e.abrupt("return",g(n,this.doctype,this.stackClient));case 3:return e.next=5,this.stackClient.fetchJSON("GET","".concat(this.endpoint).concat(t));case 5:if(r=e.sent,"maintenance"!==t){e.next=8;break}return e.abrupt("return",{data:r.map(function(e){return b(e,a.doctype)})});case 8:return e.abrupt("return",{data:b(r,this.doctype)});case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"create",value:(r=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for AppsRegistryCollection");case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for AppsRegistryCollection");case 1:case"end":return e.stop()}},e)})),function(){return a.apply(this,arguments)})}]),p}(p.default);t.default=x},78140:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Collection=t.isDocumentUpdateConflict=t.isTimeoutError=t.isNoUsableIndexError=t.isIndexNotUsedWarning=t.isIndexConflictError=t.isIndexNotFoundError=t.dontThrowNotFoundError=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723));n(79312);var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.message.match(/not_found/))return Array.isArray(t)?{data:t,meta:{count:0},skip:0,next:!1}:{data:t};throw e};t.dontThrowNotFoundError=s,t.isIndexNotFoundError=function(e){return e.message.match(/no_index/)},t.isIndexConflictError=function(e){return e.message.match(/error_saving_ddoc/)},t.isIndexNotUsedWarning=function(e){return e.match(/was not used because it does not contain a valid index for this query/)},t.isNoUsableIndexError=function(e){return e.message.match(/no_usable_index/)},t.isTimeoutError=function(e){return e.message.match(/context deadline exceeded/)},t.isDocumentUpdateConflict=function(e){return e.message.match(/Document update conflict/)};var u=function(){var e;function t(){(0,o.default)(this,t)}return(0,c.default)(t,null,[{key:"get",value:(e=(0,i.default)(a.default.mark(function e(t,n,r){var i,o,c,u,l;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(i=r.normalize)?function(e,t){return e}:i,u=void 0===(c=r.method)?"GET":c,e.prev=1,e.next=4,t.fetchJSON(u,n);case 4:return l=e.sent,e.abrupt("return",{data:o(l.data,l)});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",s(e.t0,null));case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(t,n,r){return e.apply(this,arguments)})}]),t}();t.Collection=u,t.default=u},25454:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CONTACTS_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(59655)),u=r(n(25665)),l=r(n(27952)),d=r(n(12323)),f=r(n(64512)),p=r(n(67267)),h=n(26070);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(41315);var y="io.cozy.contacts";t.CONTACTS_DOCTYPE=y;var b=(0,h.normalizeDoctypeJsonApi)(y),g=function(e){var t;return v(v({},b(e)),{},{_rev:null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.rev})},x=function(e){(0,u.default)(h,e);var t,n,r,f,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(h);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function h(){return(0,o.default)(this,h),p.apply(this,arguments)}return(0,c.default)(h,[{key:"find",value:(n=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||1!==Object.values(t).length||!0!=t.me){e.next=4;break}return e.abrupt("return",this.findMyself());case 4:return e.abrupt("return",(0,s.default)((0,d.default)(h.prototype),"find",this).call(this,t,n));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"findMyself",value:(r=(0,i.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/contacts/myself");case 2:return t={data:[g(e.sent.data)],next:!1,meta:null,bookmark:!1},e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:(f=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys((null==t?void 0:null===(n=t.cozyMetadata)||void 0===n?void 0:n.sync)||{}).length>0)){e.next=6;break}return e.abrupt("return",(0,s.default)((0,d.default)(h.prototype),"update",this).call(this,v(v({},t),{},{trashed:!0})));case 6:return e.abrupt("return",(0,s.default)((0,d.default)(h.prototype),"destroy",this).call(this,t));case 7:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})}]),h}(p.default);t.default=x},29328:function(e,t,n){"use strict";var r,a=n(14746),i=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(80295)),c=i(n(64512)),s=i(n(65105)),u=i(n(19723)),l=i(n(68434)),d=i(n(82007)),f=i(n(50361)),p=a(n(14324)),h=i(n(20576));i(n(88928));var m=i(n(67267)),v=i(n(49129)),y=a(n(54056)),b=a(n(76812)),g=i(n(67207)),x=i(n(96302)),w=a(n(54026)),k=a(n(96727)),O=a(n(45082)),_=a(n(54348)),E=a(n(86247)),S=a(n(25454)),C=a(n(69736)),P=i(n(79954)),j=i(n(66605)),A=n(38558),D=i(n(37203)),T=a(n(45051)),M=i(n(79271)),R=i(n(20368)),I=n(68512);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var z=function(e){var t=e;if(null===t)return null;for(;"/"===t[t.length-1];)t=t.slice(0,-1);return t},L=(r=(0,d.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=t.headers.get("content-type"))&&/\bapplication\/(vnd\.api\+)?json\b/.test(n),e.abrupt("return",r?t.json():t.text());case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),B=function(){var e,t,n,r;function a(e){(0,s.default)(this,a);var t=F({},e),n=t.token,r=t.uri;this.options=t,this.setUri(void 0===r?"":r),this.setToken(n),this.konnectors=new b.default(this),this.jobs=new y.default(this),this._promiseCache=new R.default}return(0,u.default)(a,[{key:"isRevocationError",value:function(e){return null!=e&&!!e.message&&(!!(T.default.CLIENT_NOT_FOUND.test(e.message)||T.default.UNREGISTERED_CLIENT.test(e.message))||void 0)}},{key:"collection",value:function(e){if(!e)throw Error("CozyStackClient.collection() called without a doctype");switch(e){case p.APPS_DOCTYPE:return new p.default(this);case b.KONNECTORS_DOCTYPE:return new b.default(this);case"io.cozy.files":return new v.default(e,this);case"io.cozy.sharings":return new g.default(e,this);case"io.cozy.permissions":return new x.default(e,this);case S.CONTACTS_DOCTYPE:return new S.default(e,this);case w.TRIGGERS_DOCTYPE:return new w.default(this);case y.JOBS_DOCTYPE:return new y.default(this);case k.SETTINGS_DOCTYPE:return new k.default(this);case O.NOTES_DOCTYPE:return new O.default(this);case _.OAUTH_CLIENTS_DOCTYPE:return new _.default(this);case E.SHORTCUTS_DOCTYPE:return new E.default(this);case C.APPS_REGISTRY_DOCTYPE:return new C.default(this);case I.NEXTCLOUD_FILES_DOCTYPE:return new I.NextcloudFilesCollection(this);default:return new m.default(e,this)}}},{key:"fetch",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((e=(0,d.default)(l.default.mark(function e(t,n,r){var a,i,c,s,u,d,f,p,h,m,v,y=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0===(c=(i=F({},a=y.length>3&&void 0!==y[3]?y[3]:{})).throwFetchErrors)?this.options.throwFetchErrors:c,(u=(0,o.default)(i,["throwFetchErrors"])).method=t,d=u.headers=F({},a.headers),"GET"!==t&&"HEAD"!==t&&void 0!==r&&d["Content-Type"]&&(u.body=r),d.Authorization||(d.Authorization=this.getAuthorizationHeader()),u.credentials=u.credentials||"include",f=this.fullpath(n),p=(0,A.shouldXMLHTTPRequestBeUsed)(t,n,u)?A.fetchWithXMLHttpRequest:fetch,e.prev=9,e.next=12,p(f,u);case 12:if((h=e.sent).ok){e.next=21;break}return e.next=16,L(h);case 16:if(m=e.sent,v=new T.FetchError(h,m),this.emit("error",v),!s){e.next=21;break}throw v;case 21:return e.abrupt("return",h);case 24:throw e.prev=24,e.t0=e.catch(9),this.isRevocationError(e.t0)&&this.onRevocationChange(!0),e.t0;case 28:case"end":return e.stop()}},e,this,[[9,24]])})),function(t,n,r){return e.apply(this,arguments)}))},{key:"onTokenRefresh",value:function(e){this.options&&this.options.onTokenRefresh&&this.options.onTokenRefresh(e)}},{key:"onRevocationChange",value:function(e){this.options&&this.options.onRevocationChange&&this.options.onRevocationChange(e)}},{key:"refreshToken",value:(t=(0,d.default)(l.default.mark(function e(){var t,n,r,a,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}throw Error("Cannot refresh an empty token");case 2:return t={method:"GET",credentials:"include"},e.next=5,fetch("/?refreshToken",t);case 5:if((n=e.sent).ok){e.next=8;break}throw Error("Couldn't fetch a new token - response "+n.statusCode);case 8:return e.next=10,n.text();case 10:if(!(!(r=e.sent.match(/data-cozy="([^"]+)"/))||r.length<2)){e.next=14;break}throw Error("Couldn't fetch a new token - no data-cozy element found in HTML");case 14:if(a=JSON.parse(r[1].replace(/&#34;/g,'"')).token){e.next=19;break}throw Error("Couldn't fetch a new token - missing in data-cozy attribute");case 19:return i=new h.default(a),this.setToken(i),this.onTokenRefresh(i),M.default.info("Token successfully refreshed"),e.abrupt("return",i);case 24:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"fetchJSON",value:(n=(0,d.default)(l.default.mark(function e(t,n,r){var a,i=this,o=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=1,e.next=4,this.fetchJSONWithCurrentToken(t,n,r,a);case 4:case 20:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!(T.default.EXPIRED_TOKEN.test(e.t0.message)||T.default.INVALID_TOKEN.test(e.t0.message)||T.default.INVALID_TOKEN_ALT.test(e.t0.message))){e.next=23;break}return e.prev=10,e.next=13,this._promiseCache.exec(function(){return i.refreshToken()},function(){return"refreshToken"});case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(10),e.t0;case 18:return e.next=20,this.fetchJSONWithCurrentToken(t,n,r,a);case 23:throw e.t0;case 24:case"end":return e.stop()}},e,this,[[1,7],[10,15]])})),function(e,t,r){return n.apply(this,arguments)})},{key:"fetchJSONWithCurrentToken",value:(r=(0,d.default)(l.default.mark(function e(t,n,r){var a,i,o,c,s,u=arguments;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>3&&void 0!==u[3]?u[3]:{},(o=(i=(0,f.default)(a)).headers=i.headers||{}).Accept="application/json",c=r,"GET"===t||"HEAD"===t||void 0===c||o["Content-Type"]||(o["Content-Type"]="application/json",c=JSON.stringify(c)),i.throwFetchErrors=!0,e.next=9,this.fetch(t,n,c,i);case 9:return s=e.sent,e.abrupt("return",L(s));case 11:case"end":return e.stop()}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"fullpath",value:function(e){return e.startsWith("http")?e:this.uri+e}},{key:"getAuthorizationHeader",value:function(){return this.token?this.token.toAuthHeader():null}},{key:"setCredentials",value:function(e){return(0,j.default)("CozyStackClient::setCredentials is deprecated, use CozyStackClient::setToken"),this.setToken(e)}},{key:"getCredentials",value:function(){return(0,j.default)("CozyStackClient::getCredentials is deprecated, use CozyStackClient::getAuthorizationHeader"),this.getAuthorizationHeader()}},{key:"setToken",value:function(e){if(e){if(e.toAuthHeader)this.token=e;else if("string"==typeof e)this.token=new h.default(e);else throw M.default.warn("Cozy-Client: Unknown token format",e),Error("Cozy-Client: Unknown token format");this.onRevocationChange(!1)}else this.token=null}},{key:"getAccessToken",value:function(){return this.token&&this.token.getAccessToken()}},{key:"setUri",value:function(e){this.uri=z(e)}},{key:"getIconURL",value:function(e){return(0,P.default)(this,e)}}]),a}();D.default.mixin(B),t.default=B},67267:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(80295)),o=a(n(98235)),c=a(n(64512)),s=a(n(68434)),u=a(n(41)),l=a(n(82007)),d=a(n(65105)),f=a(n(19723)),p=a(n(71400)),h=n(66804),m=a(n(44908)),v=a(n(57557)),y=a(n(91175)),b=a(n(82492)),g=a(n(10240)),x=a(n(80129)),w=n(35946),k=n(26070),O=r(n(78140)),_=r(n(93726));n(45051);var E=a(n(79271));function S(){var e=(0,u.default)(["/data/","/_design/","/copy?rev=",""]);return S=function(){return e},e}function C(){var e=(0,u.default)(["/data/","/_design/","?rev=",""]);return C=function(){return e},e}function P(){var e=(0,u.default)(["/data/","/_design_docs?include_docs=true"]);return P=function(){return e},e}function j(){var e=(0,u.default)(["/data/","/_index"]);return j=function(){return e},e}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(){var e=(0,u.default)(["/data/","/","?rev=",""]);return D=function(){return e},e}function T(){var e=(0,u.default)(["/data/","/",""]);return T=function(){return e},e}function M(){var e=(0,u.default)(["/data/","/",""]);return M=function(){return e},e}function R(){var e=(0,u.default)(["/data/","/_all_docs?include_docs=true"]);return R=function(){return e},e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function F(){var e=(0,u.default)(["/data/","/_find"]);return F=function(){return e},e}function z(){var e=(0,u.default)(["/data/","/",""]);return z=function(){return e},e}var L=function(e){return Object.assign({},(0,v.default)(e,"_type"),{_deleted:!0})},B=function(){var e,t,n,r,a,u,I,B,U,H,G,W,q,V,Q,Z,Y,J,K,$,X,ee;function et(e,t){(0,d.default)(this,et),this.doctype=e,this.stackClient=t,this.indexes={},this.endpoint="/data/".concat(this.doctype,"/")}return(0,f.default)(et,[{key:"all",value:(e=(0,l.default)(s.default.mark(function e(){var t,n,r,a,i,o,c,u,l,d,f,p,m,v,y,b=this,x=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(t=x.length>0&&void 0!==x[0]?x[0]:{}).limit)?100:n,i=void 0===(a=t.skip)?0:a,o=t.bookmark,l=(u=!!(c=t.keys)||null===r)?"_all_docs":"_normal_docs",d=(0,h.uri)(z(),this.doctype,l),f={include_docs:!0,limit:r,skip:i,keys:c,bookmark:o},p=_.buildURL(d,f),e.prev=6,e.next=9,this.stackClient.fetchJSON("GET",p);case 9:m=e.sent,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(6),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 15:return v=u?m.rows.filter(function(e){return e&&null!==e.doc&&!e.error&&!(0,g.default)(e.id,"_design")}).map(function(e){return(0,k.normalizeDoc)(e.doc,b.doctype)}):m.rows.map(function(e){return(0,k.normalizeDoc)(e,b.doctype)}),y=o?m.rows.length>=r:i+m.rows.length<m.total_rows,e.abrupt("return",{data:v,meta:{count:u?v.length:m.total_rows},skip:i,bookmark:m.bookmark,next:y});case 18:case"end":return e.stop()}},e,this,[[6,12]])})),function(){return e.apply(this,arguments)})},{key:"fetchDocumentsWithMango",value:(t=(0,l.default)(s.default.mark(function e(t,n){var r,a=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",this.stackClient.fetchJSON("POST",t,this.toMangoOptions(n,r)));case 2:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"migrateIndex",value:(n=(0,l.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.copyIndex(t,n);case 3:return e.next=5,this.destroyIndex(t);case 5:e.next=16;break;case 7:if(e.prev=7,e.t0=e.catch(0),(0,O.isDocumentUpdateConflict)(e.t0)){e.next=11;break}throw e.t0;case 11:return(0,h.sleep)(1e3),e.next=14,this.copyIndex(t,n);case 14:return e.next=16,this.destroyIndex(t);case 16:case"end":return e.stop()}},e,this,[[0,7]])})),function(e,t){return n.apply(this,arguments)})},{key:"handleMissingIndex",value:(r=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.indexedFields,a=n.partialFilter,r||(r=(0,w.getIndexFields)({sort:n.sort,selector:t})),i=(0,w.getIndexNameFromFields)(r,a),e.next=5,this.findExistingIndex(t,n);case 5:if(o=e.sent){e.next=11;break}return e.next=9,this.createIndex(r,{partialFilter:a,indexName:i});case 9:case 14:e.next=17;break;case 11:if(o._id==="_design/".concat(i)){e.next=16;break}return e.next=14,this.migrateIndex(o,i);case 16:throw Error("Index unusable for query, index used: ".concat(i));case 17:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"findWithMango",value:(a=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o,c=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:{},e.prev=1,e.next=4,this.fetchDocumentsWithMango(t,n,r);case 4:if(!((o=(a=e.sent).warning||(null===(i=a.meta)||void 0===i?void 0:i.warning))&&r.partialFilter&&(0,O.isIndexNotUsedWarning)(o))){e.next=8;break}throw Error("no_index");case 8:e.next=21;break;case 10:if(e.prev=10,e.t0=e.catch(1),!((0,O.isIndexNotFoundError)(e.t0)||(0,O.isNoUsableIndexError)(e.t0)||(0,O.isTimeoutError)(e.t0))){e.next=20;break}return e.next=15,this.handleMissingIndex(n,r);case 15:return e.next=17,this.fetchDocumentsWithMango(t,n,r);case 17:a=e.sent,e.next=21;break;case 20:throw e.t0;case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}},e,this,[[1,10]])})),function(e,t){return a.apply(this,arguments)})},{key:"find",value:(u=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,o,c=this,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=u.length>1&&void 0!==u[1]?u[1]:{}).skip)?0:r,e.prev=2,o=(0,h.uri)(F(),this.doctype),e.next=6,this.findWithMango(o,t,n);case 6:i=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 12:return e.abrupt("return",{data:i.docs.map(function(e){return(0,k.normalizeDoc)(e,c.doctype)}),next:i.next,skip:a,bookmark:i.bookmark,execution_stats:i.execution_stats});case 13:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return u.apply(this,arguments)})},{key:"findAll",value:(I=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,c,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>1&&void 0!==u[1]?u[1]:{},r=!0,a=[],i=n.bookmark||void 0;case 4:if(!r){e.next=13;break}return e.next=7,this.find(t,N(N({},n),{},{bookmark:i}));case 7:c=e.sent,a.push.apply(a,(0,o.default)(c.data)),i=c.bookmark,r=c.next,e.next=4;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e,this)})),function(e){return I.apply(this,arguments)})},{key:"get",value:(B=(0,l.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.default.get(this.stackClient,"".concat(this.endpoint).concat(encodeURIComponent(t)),{normalize:this.constructor.normalizeDoctype(this.doctype)}));case 1:case"end":return e.stop()}},e,this)})),function(e){return B.apply(this,arguments)})},{key:"getAll",value:(U=(0,l.default)(s.default.mark(function e(t){var n,r,a=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("POST",(0,h.uri)(R(),this.doctype),{keys:t});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(0,O.dontThrowNotFoundError)(e.t0));case 9:return r=n.rows.filter(function(e){return e.doc}),e.abrupt("return",{data:r.map(function(e){return(0,k.normalizeDoc)(e.doc,a.doctype)}),meta:{count:r.length}});case 11:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return U.apply(this,arguments)})},{key:"create",value:(H=(0,l.default)(s.default.mark(function e(t){var n,r,a,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,t._type,r=(0,i.default)(t,["_id","_type"]),o=(a=!!n)?"PUT":"POST",c=(0,h.uri)(M(),this.doctype,a?n:""),e.next=6,this.stackClient.fetchJSON(o,c,r);case 6:return u=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(u.data,this.doctype)});case 8:case"end":return e.stop()}},e,this)})),function(e){return H.apply(this,arguments)})},{key:"update",value:(G=(0,l.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PUT",(0,h.uri)(T(),this.doctype,t._id),t);case 2:return n=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(n.data,this.doctype)});case 4:case"end":return e.stop()}},e,this)})),function(e){return G.apply(this,arguments)})},{key:"destroy",value:(W=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,r=t._rev,a=(0,i.default)(t,["_id","_rev"]),e.next=3,this.stackClient.fetchJSON("DELETE",(0,h.uri)(D(),this.doctype,n,r));case 3:return o=e.sent,e.abrupt("return",{data:(0,k.normalizeDoc)(N(N({},a),{},{_id:n,_rev:o.rev,_deleted:!0}),this.doctype)});case 5:case"end":return e.stop()}},e,this)})),function(e){return W.apply(this,arguments)})},{key:"updateAll",value:(q=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.stackClient,!(!(r=t?t.map(function(e){return(0,v.default)(e,"_type")}):t)||!r.length)){e.next=4;break}return e.abrupt("return",Promise.resolve([]));case 4:return e.prev=4,e.next=7,n.fetchJSON("POST","/data/".concat(this.doctype,"/_bulk_docs"),{docs:r});case 7:return a=e.sent,e.abrupt("return",a);case 11:if(e.prev=11,e.t0=e.catch(4),!(e.t0.reason&&e.t0.reason.reason&&"Database does not exist."===e.t0.reason.reason)){e.next=24;break}return e.next=16,this.create(r[0]);case 16:return i=e.sent,e.next=19,this.updateAll(r.slice(1));case 19:return(o=e.sent).unshift({ok:!0,id:i._id,rev:i._rev}),e.abrupt("return",o);case 24:throw e.t0;case 25:case"end":return e.stop()}},e,this,[[4,11]])})),function(e){return q.apply(this,arguments)})},{key:"destroyAll",value:function(e){return this.updateAll(e.map(L))}},{key:"toMangoOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sort,r=t.indexedFields,a=t.partialFilter,i=t.fields,s=t.skip,u=t.limit,l=t.bookmark;n=(0,w.transformSort)(n),!r&&e&&E.default.warn("Selector fields should be manually indexed to prevent unexpected behaviour"),r=r||(0,w.getIndexFields)({sort:n,selector:e});var d=t.indexId||"_design/".concat((0,w.getIndexNameFromFields)(r,a));if(n){var f=(0,m.default)(n.map(function(e){return(0,y.default)(Object.values(e))}));if(f.length>1)throw Error("Mango sort can only use a single order (asc or desc).");var h,v=f.length>0?(0,y.default)(f):"asc",g=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return A(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(r);try{for(g.s();!(h=g.n()).done;)!function(){var e=h.value;n.find(function(t){return(0,y.default)(Object.keys(t))===e})||n.push((0,c.default)({},e,v))}()}catch(e){g.e(e)}finally{g.f()}}return{selector:a?(0,b.default)(N({},e),a):e,use_index:d,fields:i?[].concat((0,o.default)(i),["_id","_rev"]):void 0,limit:u,skip:void 0===s?0:s,bookmark:t.bookmark||l,sort:n,execution_stats:!!(0,p.default)("debug")||void 0}}},{key:"checkUniquenessOf",value:(V=(0,l.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUniqueIndexId(t);case 2:return r=e.sent,e.next=5,this.find((0,c.default)({},t,n),{indexId:r,fields:["_id"]});case 5:return a=e.sent,e.abrupt("return",0===a.data.length);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return V.apply(this,arguments)})},{key:"getUniqueIndexId",value:function(e){return this.getIndexId([e],{indexName:"".concat(this.doctype,"/").concat(e)})}},{key:"getIndexId",value:(Q=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(r=n.partialFilter)?"":r,o=void 0===(i=n.indexName)?(0,w.getIndexNameFromFields)(t):i,this.indexes[o]){e.next=20;break}return e.prev=2,e.next=5,this.createIndex(t,{partialFilter:a});case 5:c=e.sent,e.next=19;break;case 8:if(e.prev=8,e.t0=e.catch(2),(0,O.isIndexConflictError)(e.t0)){e.next=14;break}throw e.t0;case 14:return e.next=16,(0,h.sleep)(1e3);case 16:return e.next=18,this.createIndex(t,{partialFilter:a});case 18:c=e.sent;case 19:this.indexes[o]=c;case 20:return e.abrupt("return",this.indexes[o].id);case 21:case"end":return e.stop()}},e,this,[[2,8]])})),function(e,t){return Q.apply(this,arguments)})},{key:"createIndex",value:(Z=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,o,c,u,l,d=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=d.length>1&&void 0!==d[1]?d[1]:{}).partialFilter,a=n.indexName,i={index:{fields:t}},a&&(i.ddoc=a),r&&(i.index.partial_filter_selector=r),e.prev=4,e.next=7,this.stackClient.fetchJSON("POST",(0,h.uri)(j(),this.doctype),i);case 7:o=e.sent,e.next=17;break;case 10:if(e.prev=10,e.t0=e.catch(4),(0,O.isIndexConflictError)(e.t0)){e.next=16;break}throw e.t0;case 16:return e.abrupt("return");case 17:if(c={id:o.id,fields:t},"exists"!==o.result){e.next=20;break}return e.abrupt("return",c);case 20:return u={},t.forEach(function(e){return u[e]={$gt:null}}),l={indexId:c.id,limit:1,partialFilterFields:r?(0,w.getIndexFields)({partialFilter:r}):null},e.next=25,(0,h.attempt)(this.find(u,l));case 25:if(!e.sent){e.next=27;break}return e.abrupt("return",c);case 27:return e.next=29,(0,h.sleep)(1e3);case 29:return e.next=31,(0,h.attempt)(this.find(u,l));case 31:if(!e.sent){e.next=33;break}return e.abrupt("return",c);case 33:return e.next=35,(0,h.sleep)(500);case 35:return e.abrupt("return",c);case 36:case"end":return e.stop()}},e,this,[[4,10]])})),function(e){return Z.apply(this,arguments)})},{key:"fetchAllMangoIndexes",value:(Y=(0,l.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,h.uri)(P(),this.doctype),e.next=3,this.stackClient.fetchJSON("GET",t);case 3:return n=e.sent,e.abrupt("return",n.rows.filter(function(e){return"query"===e.doc.language}).map(function(e){return(0,w.normalizeDesignDoc)(e)}));case 5:case"end":return e.stop()}},e,this)})),function(){return Y.apply(this,arguments)})},{key:"destroyIndex",value:(J=(0,l.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id.split("/")[1],r=t._rev,a=(0,h.uri)(C(),this.doctype,n,r),e.abrupt("return",this.stackClient.fetchJSON("DELETE",a));case 4:case"end":return e.stop()}},e,this)})),function(e){return J.apply(this,arguments)})},{key:"copyIndex",value:(K=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._id.split("/")[1],a=t._rev,i=(0,h.uri)(S(),this.doctype,r,a),o={headers:{Destination:"_design/".concat(n)}},e.abrupt("return",this.stackClient.fetchJSON("POST",i,null,o));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return K.apply(this,arguments)})},{key:"findExistingIndex",value:($=(0,l.default)(s.default.mark(function e(t,n){var r,a,i,o,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.sort,a=n.indexedFields,i=n.partialFilter,e.next=3,this.fetchAllMangoIndexes();case 3:if(!((o=e.sent).length<1)){e.next=6;break}return e.abrupt("return",null);case 6:return r=(0,w.transformSort)(r),c=a||(0,w.getIndexFields)({sort:r,selector:t}),u=o.find(function(e){return(0,w.isMatchingIndex)(e,c,i)}),e.abrupt("return",u);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return $.apply(this,arguments)})},{key:"fetchChangesRaw",value:(X=(0,l.default)(s.default.mark(function e(t){var n,r,a,i,o,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.doc_ids&&t.doc_ids.length>0,r="?".concat([x.default.stringify(N(N({},(0,v.default)(t,["doc_ids","includeDocs"])),{},{include_docs:t.includeDocs})),n&&void 0===t.filter?"filter=_doc_ids":void 0].filter(Boolean).join("&")),a=n?"POST":"GET",i="/data/".concat(this.doctype,"/_changes").concat(r),o=n?{doc_ids:t.doc_ids}:void 0,e.next=7,this.stackClient.fetchJSON(a,i,o);case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}},e,this)})),function(e){return X.apply(this,arguments)})},{key:"fetchChanges",value:(ee=(0,l.default)(s.default.mark(function e(){var t,n,r,a,i,o,c=this,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1&&void 0!==u[1]?u[1]:{},r={includeDocs:!0},"object"!=typeof t?(r.since=t,E.default.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({since: "'.concat(t,'"}).'))):Object.keys(t).length>0&&Object.assign(r,t),e.next=6,this.fetchChangesRaw(r);case 6:return i=(a=e.sent).last_seq,o=a.results.map(function(e){return e.doc}).filter(Boolean),n.includeDesign||(o=o.filter(function(e){return 0!==e._id.indexOf("_design")})),n.includeDeleted||(o=o.filter(function(e){return!e._deleted})),e.abrupt("return",{newLastSeq:i,documents:o.map(function(e){return(0,k.normalizeDoc)(e,c.doctype)})});case 12:case"end":return e.stop()}},e,this)})),function(){return ee.apply(this,arguments)})}],[{key:"normalizeDoctype",value:function(e){return(0,k.normalizeDoctypeRawApi)(e)}}]),et}();t.default=B},49129:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isDirectory=t.isFile=void 0;var i=a(n(80295)),o=a(n(68434)),c=a(n(41)),s=a(n(82007)),u=a(n(65105)),l=a(n(19723)),d=a(n(8997)),f=a(n(25665)),p=a(n(27952)),h=a(n(12323)),m=a(n(64512)),v=a(n(12109)),y=a(n(18721)),b=a(n(27361)),g=a(n(57557)),x=a(n(78718));n(35946);var w=a(n(67267)),k=n(26070),O=n(66804);n(45051);var _=n(78140),E=n(77069),S=r(n(93726)),C=a(n(79271));function P(){var e=(0,c.default)(["/files/_changes"]);return P=function(){return e},e}function j(){var e=(0,c.default)(["/data/","/","/relationships/not_synchronizing"]);return j=function(){return e},e}function A(){var e=(0,c.default)(["/data/","/","/relationships/not_synchronizing"]);return A=function(){return e},e}function D(){var e=(0,c.default)(["/data/","/","/relationships/not_synchronizing"]);return D=function(){return e},e}function T(){var e=(0,c.default)(["/files/","/versions"]);return T=function(){return e},e}function M(){var e=(0,c.default)(["/files/upload/metadata"]);return M=function(){return e},e}function R(){var e=(0,c.default)(["/files/",""]);return R=function(){return e},e}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function N(){var e=(0,c.default)(["/files/","?Name=","&Type=directory&MetadataID=",""]);return N=function(){return e},e}function F(){var e=(0,c.default)(["/files/metadata?Path=",""]);return F=function(){return e},e}function z(){var e=(0,c.default)(["/files/",""]);return z=function(){return e},e}function L(){var e=(0,c.default)(["/files/downloads?Path=",""]);return L=function(){return e},e}function B(){var e=(0,c.default)(["/files/downloads?VersionId=","&Filename=",""]);return B=function(){return e},e}function U(){var e=(0,c.default)(["/files/downloads?Id=","&Filename=",""]);return U=function(){return e},e}function H(){var e=(0,c.default)(["/files/","?Name=","&Type=file&Executable=","&Encrypted=",""]);return H=function(){return e},e}function G(){var e=(0,c.default)(["/files/","?Name=","&Type=file&Executable=","&Encrypted=","&MetadataID=","&Size=","&SourceAccount=","&SourceAccountIdentifier=",""]);return G=function(){return e},e}function W(){var e=(0,c.default)(["/files/",""]);return W=function(){return e},e}function q(){var e=(0,c.default)(["/files/","/copy"]);return q=function(){return e},e}function V(){var e=(0,c.default)(["/files/trash/",""]);return V=function(){return e},e}function Q(){var e=(0,c.default)(["/files/",""]);return Q=function(){return e},e}function Z(){var e=(0,c.default)(["/data/","/","/relationships/references"]);return Z=function(){return e},e}function Y(){var e=(0,c.default)(["/data/","/","/relationships/references"]);return Y=function(){return e},e}function J(){var e=(0,c.default)(["/files/","/relationships/referenced_by"]);return J=function(){return e},e}function K(){var e=(0,c.default)(["/files/","/relationships/referenced_by"]);return K=function(){return e},e}function $(){var e=(0,c.default)(["/data/","/","/relationships/references"]);return $=function(){return e},e}function X(){var e=(0,c.default)(["/files/_all_docs?include_docs=true"]);return X=function(){return e},e}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,m.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var en="io.cozy.files.root-dir",er=(0,k.normalizeDoctypeJsonApi)("io.cozy.files"),ea=function(e){var t;return et(et({},er(e)),{},{_rev:null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.rev})},ei=function(e){return e?e.map(function(e){return{_type:e.type,_id:e.id}}):[]},eo=function(e){return e&&e.trim()},ec=function(e){var t=eo(e);if("string"!=typeof t||""===t)throw Error("Missing name argument");if("."===e||".."===e)throw Error("Invalid filename: ".concat(e));var n=(0,E.getIllegalCharacters)(t);if(n.length)throw Error("Invalid filename containing illegal character(s): ".concat(n));return t};t.isFile=function(e){var t=e._type,n=e.type;return"io.cozy.files"===t||"directory"===n||"file"===n},t.isDirectory=function(e){return"directory"===e.type};var es=function(e,t){return new Promise(function(n){e.forEach(function(e){return e.then(function(e){t(e)&&n(!0)})}),Promise.all(e).then(function(){return n(!1)})})},eu=function(e){var t=e.lastIndexOf("/");return e.substring(0,t)},el=function(e){(0,f.default)(ez,e);var t,n,r,a,c,w,k,E,ee,er,el,ed,ef,ep,eh,em,ev,ey,eb,eg,ex,ew,ek,eO,e_,eE,eS,eC,eP,ej,eA,eD,eT,eM,eR,eI,eN,eF=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,h.default)(ez);return e=t?Reflect.construct(n,arguments,(0,h.default)(this).constructor):n.apply(this,arguments),(0,p.default)(this,e)});function ez(e,t){var n;return(0,u.default)(this,ez),n=eF.call(this,e,t),(0,m.default)((0,d.default)(n),"extractResponseLinkRelated",function(e){var t=e.links&&e.links.related;if(!t)throw Error("No related link in server response");return n.stackClient.fullpath(t)}),(0,m.default)((0,d.default)(n),"forceFileDownload",function(e,t){(0,O.forceDownload)(e,t)}),n.specialDirectories={},n}return(0,l.default)(ez,[{key:"get",value:function(e){return this.statById(e)}},{key:"getAll",value:(n=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("POST",(0,O.uri)(X()),{keys:t});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",(0,_.dontThrowNotFoundError)(e.t0));case 9:return e.abrupt("return",{data:n.data.map(function(e){return ea(e)}),meta:{count:n.data.length},execution_stats:n.execution_stats});case 10:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return n.apply(this,arguments)})},{key:"fetchFindFiles",value:(r=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetchJSON("POST","/files/_find",this.toMangoOptions(t,n)));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)})},{key:"find",value:(a=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=l.length>1&&void 0!==l[1]?l[1]:{}).skip)?0:r,e.prev=2,c="/files/_find",e.next=6,this.findWithMango(c,t,n);case 6:i=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,_.dontThrowNotFoundError)(e.t0));case 12:return s=(0,b.default)(i,"links.next",""),u=new URL("".concat(this.stackClient.uri).concat(s)).searchParams.get("page[cursor]"),e.abrupt("return",{data:i.data.map(function(e){return ea(e)}),meta:i.meta,next:i.meta.count>a+i.data.length,skip:a,bookmark:u||void 0,execution_stats:i.meta.execution_stats});case 16:case"end":return e.stop()}},e,this,[[2,9]])})),function(e){return a.apply(this,arguments)})},{key:"findReferencedBy",value:(c=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=l.length>1&&void 0!==l[1]?l[1]:{}).skip)?0:r,i={include:"files","page[limit]":n.limit,"page[cursor]":n.cursor,sort:"datetime"},c=(0,O.uri)($(),t._type,t._id),s=S.buildURL(c,i),e.next=6,this.stackClient.fetchJSON("GET",s);case 6:return u=e.sent,e.abrupt("return",{data:ei(u.data),included:u.included?u.included.map(function(e){return ea(e)}):[],next:(0,y.default)(u,"links.next"),meta:u.meta,skip:a});case 8:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"addReferencedBy",value:(w=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:e._type}}),e.next=3,this.stackClient.fetchJSON("POST",(0,O.uri)(K(),t._id),{data:r});case 3:return a=e.sent,e.abrupt("return",{data:ei(a.data),meta:a.meta});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return w.apply(this,arguments)})},{key:"removeReferencedBy",value:(k=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id||e.id,type:e._type||e.type}}),e.next=3,this.stackClient.fetchJSON("DELETE",(0,O.uri)(J(),t._id||t.id),{data:r});case 3:return a=e.sent,e.abrupt("return",{data:ei(a.data),meta:a.meta});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return k.apply(this,arguments)})},{key:"addReferencesTo",value:(E=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:"io.cozy.files"}}),e.abrupt("return",this.stackClient.fetchJSON("POST",(0,O.uri)(Y(),t._type,t._id),{data:r}));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return E.apply(this,arguments)})},{key:"removeReferencesTo",value:(ee=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map(function(e){return{id:e._id,type:"io.cozy.files"}}),e.abrupt("return",this.stackClient.fetchJSON("DELETE",(0,O.uri)(Z(),t._type,t._id),{data:r}));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return ee.apply(this,arguments)})},{key:"destroy",value:(er=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(l.length>1&&void 0!==l[1]?l[1]:{}).ifMatch)?"":n,a=t._id,i=t.relationships,c=t.referenced_by,e.next=4,this.stackClient.fetchJSON("DELETE",(0,O.uri)(Q(),a),void 0,{headers:{"If-Match":r}});case 4:if(s=e.sent,!Array.isArray(u=(0,b.default)(i,"referenced_by.data",c))){e.next=9;break}return e.next=9,this.removeReferencedBy(t,u);case 9:return e.abrupt("return",{data:ea(s.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return er.apply(this,arguments)})},{key:"emptyTrash",value:function(){return this.stackClient.fetchJSON("DELETE","/files/trash")}},{key:"restore",value:function(e){return this.stackClient.fetchJSON("POST",(0,O.uri)(V(),e))}},{key:"copy",value:(el=(0,s.default)(o.default.mark(function e(t,n,r){var a,i,c,s,u,l,d,f=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(a=(f.length>3&&void 0!==f[3]?f[3]:{}).sanitizeName)||a,null!=(c=n)&&i&&(c=ec(c)),s={name:c,DirID:r},u=(0,O.uri)(q(),t),l=S.buildURL(u,s),e.next=8,this.stackClient.fetchJSON("POST",l);case 8:return d=e.sent,e.abrupt("return",{data:ea(d.data)});case 10:case"end":return e.stop()}},e,this)})),function(e,t,n){return el.apply(this,arguments)})},{key:"deleteFilePermanently",value:(ed=(0,s.default)(o.default.mark(function e(t){var n,r,a,i=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(i.length>1&&void 0!==i[1]?i[1]:{}).ifMatch)?"":n,e.next=3,this.stackClient.fetchJSON("PATCH",(0,O.uri)(W(),t),{data:{type:"io.cozy.files",id:t,attributes:{permanent_delete:!0}}},{headers:{"If-Match":r}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)})),function(e){return ed.apply(this,arguments)})},{key:"upload",value:(ef=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(c.length>2&&void 0!==c[2]?c[2]:{}).sanitizeName)||r,e.next=3,this.ensureDirectoryExists(n,{sanitizeName:a});case 3:return i=e.sent,e.abrupt("return",this.createFile(t,{dirId:i},{sanitizeName:a}));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return ef.apply(this,arguments)})},{key:"create",value:(ep=(0,s.default)(o.default.mark(function e(t){var n,r,a,c,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0===(n=(s.length>1&&void 0!==s[1]?s[1]:{}).sanitizeName)||n,"directory"!==t.type){e.next=5;break}return e.abrupt("return",this.createDirectory(t,{sanitizeName:r}));case 5:return a=t.data,c=(0,i.default)(t,["data"]),e.abrupt("return",this.createFile(a,c,{sanitizeName:r}));case 7:case"end":return e.stop()}},e,this)})),function(e){return ep.apply(this,arguments)})},{key:"update",value:(eh=(0,s.default)(o.default.mark(function e(t){var n,r,a,c,s,u,l,d,f=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(r=(n=f.length>1&&void 0!==f[1]?f[1]:{}).ifMatch)?"":r,s=void 0===(c=n.sanitizeName)||c,u=t.data,l=(0,i.default)(t,["data"]),d=t.id||t._id,!u){e.next=8;break}if("directory"!==t.type){e.next=6;break}throw Error("You cannot pass a data object for a directory");case 6:return l.fileId=d,e.abrupt("return",this.updateFile(u,l,{ifMatch:a,sanitizeName:s}));case 8:return e.abrupt("return",this.updateAttributes(d,t,{ifMatch:a,sanitizeName:s}));case 9:case"end":return e.stop()}},e,this)})),function(e){return eh.apply(this,arguments)})},{key:"createFile",value:(em=(0,s.default)(o.default.mark(function e(t){var n,r,a,c,s,u,l,d,f,p,h,m,v,y,b,g,x,w,k,_,E=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E.length>1&&void 0!==E[1]?E[1]:{},a=void 0===(r=(E.length>2&&void 0!==E[2]?E[2]:{}).sanitizeName)||r,c=n.name,u=void 0===(s=n.dirId)?"":s,d=void 0!==(l=n.executable)&&l,p=void 0!==(f=n.encrypted)&&f,h=n.metadata,v=void 0===(m=n.sourceAccount)?"":m,b=void 0===(y=n.sourceAccountIdentifier)?"":y,g=(0,i.default)(n,["name","dirId","executable","encrypted","metadata","sourceAccount","sourceAccountIdentifier"]),(x=c)||"string"!=typeof t.name||(x=t.name),a&&(x=ec(x)),w="",!h){e.next=12;break}return e.next=10,this.createFileMetadata(h);case 10:w=e.sent.data.id;case 12:return k="",g.contentLength&&(k=String(g.contentLength)),_=(0,O.uri)(G(),u,x,d,p,w,k,v,b),e.abrupt("return",this.doUpload(t,_,g));case 16:case"end":return e.stop()}},e,this)})),function(e){return em.apply(this,arguments)})},{key:"updateFile",value:(ev=(0,s.default)(o.default.mark(function e(t){var n,r,a,c,s,u,l,d,f,p,h,m,v,y,b,g,x,w,k,_,E=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E.length>1&&void 0!==E[1]?E[1]:{},c=void 0===(a=(r=E.length>2&&void 0!==E[2]?E[2]:{}).ifMatch)?"":a,u=void 0===(s=r.sanitizeName)||s,d=void 0!==(l=n.executable)&&l,p=void 0!==(f=n.encrypted)&&f,h=n.fileId,v=void 0===(m=n.name)?"":m,y=n.metadata,b=(0,i.default)(n,["executable","encrypted","fileId","name","metadata"]),!(!h||"string"!=typeof h)){e.next=5;break}throw Error("missing fileId argument");case 5:if(!(!(g=v||t.name)||"string"!=typeof g)){e.next=8;break}throw Error("missing name in data argument");case 8:if(x=u?ec(g):g,k=(0,O.uri)(H(),h,x,d,p),!y){e.next=16;break}return e.next=13,this.createFileMetadata(y);case 13:w=e.sent.data.id,k+="&MetadataID=".concat(w);case 16:return _="",b.contentLength&&(_=String(b.contentLength),k+="&Size=".concat(_)),""!==c&&(b.ifMatch=c),e.abrupt("return",this.doUpload(t,k,b,"PUT"));case 20:case"end":return e.stop()}},e,this)})),function(e){return ev.apply(this,arguments)})},{key:"getDownloadLinkById",value:function(e,t){return this.stackClient.fetchJSON("POST",(0,O.uri)(U(),e,encodeURIComponent(t))).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByRevision",value:function(e,t){return this.stackClient.fetchJSON("POST",(0,O.uri)(B(),e,encodeURIComponent(t))).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByPath",value:function(e){return this.stackClient.fetchJSON("POST",(0,O.uri)(L(),e)).then(this.extractResponseLinkRelated)}},{key:"download",value:(ey=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:null,i=(c.length>2&&void 0!==c[2]?c[2]:void 0)||t.name,n){e.next=9;break}return e.next=6,this.getDownloadLinkById(t._id,i);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,this.getDownloadLinkByRevision(n,i);case 11:a=e.sent;case 12:this.forceFileDownload("".concat(a,"?Dl=1"),i);case 13:case"end":return e.stop()}},e,this)})),function(e){return ey.apply(this,arguments)})},{key:"fetchFileContent",value:(eb=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.default.warn("FileCollection.fetchFileContent() is deprecated. Use FileCollection.fetchFileContentById() instead"),e.abrupt("return",this.fetchFileContentById(t));case 2:case"end":return e.stop()}},e,this)})),function(e){return eb.apply(this,arguments)})},{key:"fetchFileContentById",value:(eg=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetch("GET","/files/download/".concat(t)));case 1:case"end":return e.stop()}},e,this)})),function(e){return eg.apply(this,arguments)})},{key:"getBeautifulSize",value:function(e,t){return(0,O.formatBytes)(parseInt(e.size),t)}},{key:"downloadArchive",value:(ex=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(s.length>2&&void 0!==s[2]?s[2]:{}).pages,a=n?(0,O.slugify)(n):"files",e.next=4,this.createArchiveLinkByIds({ids:t,name:a,pages:r});case 4:i=e.sent,c=this.stackClient.fullpath(i),this.forceFileDownload(c,a+".zip");case 7:case"end":return e.stop()}},e,this)})),function(e,t){return ex.apply(this,arguments)})},{key:"getArchiveLinkByIds",value:(ew=(0,s.default)(o.default.mark(function e(t){var n,r,a=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"files",C.default.warn("CozyClient FileCollection getArchiveLinkByIds method is deprecated. Use createArchiveLinkByIds instead"),e.next=4,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:{name:n,ids:t}}});case 4:return r=e.sent,e.abrupt("return",r.links.related);case 6:case"end":return e.stop()}},e,this)})),function(e){return ew.apply(this,arguments)})},{key:"createArchiveLinkByIds",value:(ek=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ids,a=void 0===(r=t.name)?"files":r,i=t.pages,e.next=3,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:et({name:a,ids:n},i&&{pages:i})}});case 3:return c=e.sent,e.abrupt("return",c.links.related);case 5:case"end":return e.stop()}},e,this)})),function(e){return ek.apply(this,arguments)})},{key:"isChildOf",value:(eO=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,s,u,l,d,f,p=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(r="object"==typeof t?t:{_id:t})._id,i=r.dirID,c=r.path,s=("object"==typeof n?n:{_id:n})._id,a!==s&&i!==s){e.next=4;break}return e.abrupt("return",!0);case 4:if(c){e.next=10;break}return e.next=7,this.statById(a);case 7:c=(u=e.sent).data.path,i=u.data.dirID;case 10:for(l=c,d=[c];""!=l;)""!=(f=eu(l))&&d.push(f),l=f;return d.reverse(),e.abrupt("return",es(d.map(function(e){return p.statByPath(e)}),function(e){return e.data._id==s}));case 15:case"end":return e.stop()}},e,this)})),function(e,t){return eO.apply(this,arguments)})},{key:"statById",value:(e_=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=(0,x.default)(n,["page[limit]","page[skip]","page[cursor]"]),a=(0,O.uri)(z(),t),i=S.buildURL(a,r),e.next=6,this.stackClient.fetchJSON("GET",i);case 6:return c=e.sent,e.abrupt("return",{data:ea(c.data),included:c.included&&c.included.map(function(e){return ea(e)}),links:c.links});case 8:case"end":return e.stop()}},e,this)})),function(e){return e_.apply(this,arguments)})},{key:"statByPath",value:(eE=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,O.uri)(F(),t));case 2:return n=e.sent,e.abrupt("return",{data:ea(n.data),included:n.included&&n.included.map(function(e){return ea(e)})});case 4:case"end":return e.stop()}},e,this)})),function(e){return eE.apply(this,arguments)})},{key:"createDirectory",value:(eS=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,c,s,u,l,d,f,p=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:{},r=void 0===(n=(p.length>1&&void 0!==p[1]?p[1]:{}).sanitizeName)||n,a=t.name,i=t.dirId,c=t.lastModifiedDate,s=t.metadata,u="",!s){e.next=9;break}return e.next=7,this.createFileMetadata(s);case 7:u=e.sent.data.id;case 9:return l=r?ec(a):a,d=c&&("string"==typeof c?new Date(c):c),e.next=13,this.stackClient.fetchJSON("POST",(0,O.uri)(N(),i,l,u),void 0,{headers:{Date:d?d.toGMTString():""}});case 13:return f=e.sent,e.abrupt("return",{data:ea(f.data)});case 15:case"end":return e.stop()}},e,this)})),function(){return eS.apply(this,arguments)})},{key:"ensureDirectoryExists",value:(eC=(0,s.default)(o.default.mark(function e(t){var n,r,a,i=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0===(n=(i.length>1&&void 0!==i[1]?i[1]:{}).sanitizeName)||n,this.specialDirectories[t]){e.next=6;break}return e.next=4,this.createDirectoryByPath(t,{sanitizeName:r});case 4:a=e.sent,this.specialDirectories[t]=a.data._id;case 6:return e.abrupt("return",this.specialDirectories[t]);case 7:case"end":return e.stop()}},e,this)})),function(e){return eC.apply(this,arguments)})},{key:"getDirectoryOrCreate",value:(eP=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,s,u,l=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0===(r=(l.length>2&&void 0!==l[2]?l[2]:{}).sanitizeName)||r,!(n&&!n.attributes)){e.next=3;break}throw Error("Malformed parent directory");case 3:return i=a?eo(t):t,c="".concat(n._id===en?"":n.attributes.path,"/").concat(i),e.prev=5,e.next=8,this.statByPath(c||"/");case 8:return s=e.sent,e.abrupt("return",s);case 12:if(e.prev=12,e.t0=e.catch(5),!((u=JSON.parse(e.t0.message).errors)&&u.length&&"404"===u[0].status)){e.next=18;break}return e.abrupt("return",this.createDirectory({name:i,dirId:n&&n._id},{sanitizeName:a}));case 18:throw u;case 19:case"end":return e.stop()}},e,this,[[5,12]])})),function(e,t){return eP.apply(this,arguments)})},{key:"createDirectoryByPath",value:(ej=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l,d=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(d.length>1&&void 0!==d[1]?d[1]:{}).sanitizeName)||n,a=t.split("/").filter(function(e){return""!==e}),e.next=4,this.statById(en);case 4:if(i=e.sent,a.length){e.next=7;break}return e.abrupt("return",i);case 7:c=i,s=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return I(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(a),e.prev=9,s.s();case 11:if((u=s.n()).done){e.next=18;break}return l=u.value,e.next=15,this.getDirectoryOrCreate(l,c.data,{sanitizeName:r});case 15:c=e.sent;case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:return e.abrupt("return",c);case 27:case"end":return e.stop()}},e,this,[[9,20,23,26]])})),function(e){return ej.apply(this,arguments)})},{key:"updateAttributes",value:(eA=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,s,u,l,d=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(a=(r=d.length>2&&void 0!==d[2]?d[2]:{}).ifMatch)?"":a,s=void 0===(c=r.sanitizeName)||c,u=et({},n),n.name&&s&&(u.name=ec(n.name)),e.next=5,this.stackClient.fetchJSON("PATCH",(0,O.uri)(R(),t),{data:{type:"io.cozy.files",id:t,attributes:u}},{headers:{"If-Match":i}});case 5:return l=e.sent,e.abrupt("return",{data:ea(l.data)});case 7:case"end":return e.stop()}},e,this)})),function(e,t){return eA.apply(this,arguments)})},{key:"updateFileMetadata",value:(eD=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.default.warn("CozyClient FileCollection updateFileMetadata method is deprecated. Use updateAttributes instead"),e.abrupt("return",this.updateAttributes(t,n));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return eD.apply(this,arguments)})},{key:"createFileMetadata",value:(eT=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,O.uri)(M()),{data:{type:"io.cozy.files.metadata",attributes:t}});case 2:return n=e.sent,e.abrupt("return",{data:n.data});case 4:case"end":return e.stop()}},e,this)})),function(e){return eT.apply(this,arguments)})},{key:"updateMetadataAttribute",value:(eM=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,O.uri)(T(),t),{data:{type:"io.cozy.files.metadata",attributes:n}});case 2:return r=e.sent,e.abrupt("return",{data:r.data});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return eM.apply(this,arguments)})},{key:"getFileTypeFromName",value:function(e){return v.default.getType(e)||"application/octet-stream"}},{key:"doUpload",value:(eR=(0,s.default)(o.default.mark(function e(t,n,r){var a,i,c,s,u,l,d,f,p,h,m,v,y,b,g,x,w,k,O,_=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=_.length>3&&void 0!==_[3]?_[3]:"POST",i=n,c=t){e.next=5;break}throw Error("missing data argument");case 5:if(c.buffer&&c.buffer instanceof ArrayBuffer&&(c=c.buffer),s="undefined"!=typeof ArrayBuffer&&c instanceof ArrayBuffer,u="undefined"!=typeof File&&c instanceof File,l="undefined"!=typeof Blob&&c instanceof Blob,d=!0===c.readable&&"function"==typeof c.pipe,f="string"==typeof c,!(!s&&!u&&!l&&!d&&!f)){e.next=13;break}throw Error("invalid data type");case 13:return h=(p=r||{}).contentType,m=p.contentLength,v=p.checksum,y=p.lastModifiedDate,b=p.ifMatch,h||("string"==typeof c?h="text/plain":c.type?h=c.type:(x=new URLSearchParams((g=i.split("?")).length>1?g[1]:"").get("Name"),h=this.getFileTypeFromName(x.toLowerCase()))),(y=y||c.lastModified)&&(y=new Date(y)),w={"Content-Type":h},m&&(w["Content-Length"]=String(m)),v&&(w["Content-MD5"]=v),y&&(k=y.toISOString(),i="".concat(i,"&UpdatedAt=").concat(k,"&CreatedAt=").concat(k)),b&&(w["If-Match"]=b),e.next=24,this.stackClient.fetchJSON(a,i,c,{headers:w,onUploadProgress:r.onUploadProgress});case 24:return O=e.sent,e.abrupt("return",{data:ea(O.data)});case 26:case"end":return e.stop()}},e,this)})),function(e,t,n){return eR.apply(this,arguments)})},{key:"findNotSynchronizedDirectories",value:(eI=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,s,u,l,d,f,p=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===(r=(n=p.length>1&&void 0!==p[1]?p[1]:{}).skip)?0:r,i=n.limit,c=n.cursor,u={include:void 0!==(s=n.includeFiles)&&s?"files":void 0,"page[limit]":i,"page[cursor]":c,sort:"id"},l=(0,O.uri)(D(),t._type,t._id),d=S.buildURL(l,u),e.next=6,this.stackClient.fetchJSON("GET",d);case 6:return f=e.sent,e.abrupt("return",{data:f.data.map(function(e){return ea(e)}),included:f.included?f.included.map(function(e){return ea(e)}):[],next:(0,y.default)(f,"links.next"),meta:f.meta,skip:a});case 8:case"end":return e.stop()}},e,this)})),function(e){return eI.apply(this,arguments)})},{key:"addNotSynchronizedDirectories",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("POST",(0,O.uri)(A(),e._type,e._id),{data:n})}},{key:"removeNotSynchronizedDirectories",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("DELETE",(0,O.uri)(j(),e._type,e._id),{data:n})}},{key:"fetchChanges",value:(eN=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,c,s,u,l,d,f=arguments;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},n=f.length>1&&void 0!==f[1]?f[1]:{},r={},"object"!=typeof t?(r.since=t,C.default.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({since: "'.concat(t,'"}).'))):Object.keys(t).length>0&&Object.assign(r,t),Object.keys(n).length>0&&(Object.assign(r,n),(n.skipTrashed||n.includeFilePath)&&(r.includeDocs=!0)),a=et(et({},(0,g.default)(r,["fields","includeDocs","includeFilePath","skipDeleted","skipTrashed"])),{},{fields:r.fields?r.fields.join(","):null,include_docs:r.includeDocs,include_file_path:r.includeFilePath,skip_deleted:r.skipDeleted,skip_trashed:r.skipTrashed}),i=(0,O.uri)(P()),c=S.buildURL(i,a),e.next=10,this.stackClient.fetchJSON("GET",c);case 10:return u=(s=e.sent).last_seq,l=s.pending,d=s.results,e.abrupt("return",{newLastSeq:u,pending:l,results:d});case 15:case"end":return e.stop()}},e,this)})),function(){return eN.apply(this,arguments)})},{key:"getOrCreateSharedDrivesDirectory",value:function(){return this.stackClient.fetchJSON("POST","/files/shared-drives")}}]),ez}(w.default);t.default=el},54056:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.hasJobFinished=t.normalizeJob=t.JOBS_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(41)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=r(n(25665)),l=r(n(27952)),d=r(n(12323)),f=r(n(78140)),p=r(n(67267)),h=n(66804),m=n(26070);function v(){var e=(0,i.default)(["/jobs/",""]);return v=function(){return e},e}var y="io.cozy.jobs";t.JOBS_DOCTYPE=y;var b=function(e){return new Promise(function(t){return setTimeout(t,e)})},g=(0,m.normalizeDoctypeJsonApi)(y);t.normalizeJob=g;var x=function(e){return"done"===e.state||"errored"===e.state};t.hasJobFinished=x;var w=function(e){(0,u.default)(m,e);var t,n,r,i,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(m);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function m(e){return(0,c.default)(this,m),p.call(this,y,e)}return(0,s.default)(m,[{key:"queued",value:function(e){return this.stackClient.fetchJSON("GET","/jobs/queue/".concat(e))}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.stackClient.fetchJSON("POST","/jobs/queue/".concat(e),{data:{type:y,attributes:{arguments:t,options:n,manual:r}}})}},{key:"get",value:(n=(0,o.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.default.get(this.stackClient,(0,h.uri)(v(),t),{normalize:g}));case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"update",value:(r=(0,o.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("client"===t.worker){e.next=2;break}throw Error("JobCollection.update only works for client workers. ".concat(t.worker," given"));case 2:return e.next=4,this.stackClient.fetchJSON("PATCH","/jobs/".concat(t._id),{data:{type:y,id:t._id,attributes:{state:t.attributes.state,error:t.attributes.error}}});case 4:return n=e.sent,e.abrupt("return",g(n.data));case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"waitFor",value:(i=(0,o.default)(a.default.mark(function e(t){var n,r,i,o,c,s,u,l,d,f,p,h,m=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(r=(n=m.length>1&&void 0!==m[1]?m[1]:{}).onUpdate)?null:r,c=void 0===(o=n.until)?x:o,u=void 0===(s=n.delay)?5e3:s,d=void 0===(l=n.timeout)?3e5:l,f=Date.now(),e.next=4,this.get(t);case 4:p=e.sent.data.attributes;case 5:if(!(!p||!c(p))){e.next=17;break}return e.next=8,b(u);case 8:return e.next=10,this.get(t);case 10:if(p=e.sent.data.attributes,i&&i(p),h=Date.now(),!(f-h>d)){e.next=15;break}throw Error("Timeout for JobCollection::waitFor");case 15:e.next=5;break;case 17:return e.abrupt("return",p);case 18:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})}]),m}(p.default);t.default=w},76812:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KONNECTORS_DOCTYPE=void 0;var i=a(n(68434)),o=a(n(82007)),c=a(n(65105)),s=a(n(19723)),u=a(n(25665)),l=a(n(27952)),d=a(n(12323)),f=a(n(78718)),p=a(n(14324)),h=r(n(54026)),m=n(26070),v="io.cozy.konnectors";t.KONNECTORS_DOCTYPE=v;var y=function(e){(0,u.default)(g,e);var t,n,r,a,p,y,b=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(g);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function g(e){var t;return(0,c.default)(this,g),(t=b.call(this,e)).doctype=v,t.endpoint="/konnectors/",t}return(0,s.default)(g,[{key:"create",value:(n=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("create() method is not available for konnectors");case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{key:"destroy",value:(r=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("destroy() method is not available for konnectors");case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})},{key:"findTriggersBySlug",value:(a=(0,o.default)(i.default.mark(function e(t){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h.default(this.stackClient),e.next=3,n.all({limit:null});case 3:return r=e.sent.data,e.abrupt("return",r.map(function(e){return e.attributes}).filter(function(e){return(0,h.isForKonnector)(e,t)}));case 6:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"launch",value:(p=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,s=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=new h.default(this.stackClient),e.next=4,this.findTriggersBySlug(t);case 4:if(a=e.sent,1!==(o=n.accountId?a.filter(function(e){return(0,h.isForAccount)(e,n.accountId)}):a).length){e.next=10;break}return e.abrupt("return",r.launch(a[0]));case 10:if(c=JSON.stringify((0,f.default)({slug:t,accountId:n.accountId})),0!==o.length){e.next=15;break}throw Error("No trigger found for ".concat(c));case 15:if(!(o.length>1)){e.next=17;break}throw Error("More than 1 trigger found for ".concat(c));case 17:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"update",value:(y=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:{},t){e.next=3;break}throw Error("Cannot call update with no slug");case 3:return r=n.source||null,a=n.sync?{headers:{Accept:"text/event-stream"}}:{},e.next=8,this.stackClient.fetchJSON("PUT","/konnectors/".concat(t)+(r?"?Source=".concat(r):""),a);case 8:return o=e.sent,e.abrupt("return",(0,m.normalizeDoc)(o));case 10:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})}]),g}(p.default);t.default=y},68512:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.NEXTCLOUD_FILES_DOCTYPE=t.NextcloudFilesCollection=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=r(n(25665)),u=r(n(27952)),l=r(n(12323)),d=r(n(64512)),f=r(n(67267)),p=n(66804),h=n(45051),m=n(26070);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,d.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g="io.cozy.remote.nextcloud.files";t.NEXTCLOUD_FILES_DOCTYPE=g;var x=(0,m.normalizeDoctypeJsonApi)(g),w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.fromTrash,a=void 0!==r&&r;return function(n){var r=x(n);return b(b({},r),{},{parentPath:t,path:a?r.path:(0,p.joinPath)(t,r.name),cozyMetadata:b(b({},r.cozyMetadata),{},{sourceAccount:e})})}},k=function(e){(0,s.default)(S,e);var t,n,r,d,f,m,y,b,x,k,O,_,E=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.default)(S);return e=t?Reflect.construct(n,arguments,(0,l.default)(this).constructor):n.apply(this,arguments),(0,u.default)(this,e)});function S(e){return(0,o.default)(this,S),E.call(this,g,e)}return(0,c.default)(S,[{key:"find",value:(n=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t["cozyMetadata.sourceAccount"]&&t.parentPath)){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET","/remote/nextcloud/".concat(t["cozyMetadata.sourceAccount"]).concat((0,p.encodePath)(t.parentPath)));case 3:return n=e.sent,e.abrupt("return",{data:n.data.map(w(t["cozyMetadata.sourceAccount"],t.parentPath,{fromTrash:t.trashed}))});case 5:throw Error("Not implemented");case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"destroy",value:(r=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroyAll",value:(d=(0,i.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return v(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,this.destroy(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,11,14,17]])})),function(e){return d.apply(this,arguments)})},{key:"download",value:(f=(0,i.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("GET","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path),"?Dl=1"));case 2:return n=e.sent,e.next=5,n.blob();case 5:r=e.sent,i=URL.createObjectURL(r),o=t.path.split("/").pop(),(0,p.forceDownload)(i,o);case 9:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"move",value:(m=(0,i.default)(a.default.mark(function e(t,n){var r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,p.joinPath)(n.path,t.name),e.next=3,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/move").concat((0,p.encodePath)(t.path),"?To=").concat((0,p.encodePath)(r)));case 3:if(204!==(i=e.sent).status){e.next=6;break}return e.abrupt("return",i);case 6:throw new h.FetchError(i,i.json());case 7:case"end":return e.stop()}},e,this)})),function(e,t){return m.apply(this,arguments)})},{key:"moveToCozy",value:(y=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0!==(r=(c.length>2&&void 0!==c[2]?c[2]:{}).copy)&&r,e.next=3,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/downstream").concat((0,p.encodePath)(t.path),"?To=").concat(n._id).concat(i?"&Copy=true":""));case 3:if(201!==(o=e.sent).status){e.next=6;break}return e.abrupt("return",o);case 6:throw new h.FetchError(o,o.json());case 7:case"end":return e.stop()}},e,this)})),function(e,t){return y.apply(this,arguments)})},{key:"moveFromCozy",value:(b=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c,s=arguments;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0!==(r=(s.length>2&&void 0!==s[2]?s[2]:{}).copy)&&r,o=(0,p.joinPath)(t.path,n.name),e.next=4,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/upstream").concat((0,p.encodePath)(o),"?From=").concat(n._id).concat(i?"&Copy=true":""));case 4:if(204!==(c=e.sent).status){e.next=7;break}return e.abrupt("return",c);case 7:throw new h.FetchError(c,c.json());case 8:case"end":return e.stop()}},e,this)})),function(e,t){return b.apply(this,arguments)})},{key:"restore",value:(x=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/restore").concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})},{key:"emptyTrash",value:(k=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t,"/trash"));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"deletePermanently",value:(O=(0,i.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetch("DELETE","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount).concat((0,p.encodePath)(t.path)));case 2:if(204!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new h.FetchError(n,n.json());case 6:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})},{key:"copy",value:(_=(0,i.default)(a.default.mark(function e(t,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/remote/nextcloud/".concat(t.cozyMetadata.sourceAccount,"/copy/").concat(t.path).concat(n?"?Path=".concat(n.path,"/").concat(t.name):""));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return _.apply(this,arguments)})}]),S}(f.default);t.NextcloudFilesCollection=k},45082:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NOTES_URL_DOCTYPE=t.NOTES_DOCTYPE=void 0;var a=r(n(41)),i=r(n(64512)),o=r(n(68434)),c=r(n(82007)),s=r(n(65105)),u=r(n(19723)),l=r(n(25665)),d=r(n(27952)),f=r(n(12323)),p=r(n(67267)),h=n(26070),m=n(66804),v=n(10223);function y(){var e=(0,a.default)(["/notes/","/open"]);return y=function(){return e},e}function b(){var e=(0,a.default)(["/files/",""]);return b=function(){return e},e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w="io.cozy.notes";t.NOTES_DOCTYPE=w;var k="io.cozy.notes.url";t.NOTES_URL_DOCTYPE=k;var O=(0,h.normalizeDoctypeJsonApi)(w),_=(0,h.normalizeDoctypeJsonApi)(k),E=function(e){(0,l.default)(g,e);var t,n,r,a,i,p,h=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(g);return e=t?Reflect.construct(n,arguments,(0,f.default)(this).constructor):n.apply(this,arguments),(0,d.default)(this,e)});function g(e){return(0,s.default)(this,g),h.call(this,w,e)}return(0,u.default)(g,[{key:"get",value:(n=(0,c.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/notes/".concat(t));case 2:return n=e.sent,e.abrupt("return",{data:O(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"all",value:(r=(0,c.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/notes");case 2:return t=e.sent,e.abrupt("return",x(x({},t),{},{data:t.data.map(O)}));case 4:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("DELETE",(0,m.uri)(b(),n));case 3:return r=e.sent,e.abrupt("return",{data:x(x({},O(r.data)),{},{_deleted:!0})});case 5:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"create",value:(i=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dir_id,e.next=3,this.stackClient.fetchJSON("POST","/notes",{data:{type:"io.cozy.notes.documents",attributes:{title:"",schema:(0,v.getDefaultSchema)(),dir_id:n}}});case 3:return r=e.sent,e.abrupt("return",x(x({},r),{},{data:O(r.data)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"fetchURL",value:(p=(0,c.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("GET",(0,m.uri)(y(),n));case 3:return r=e.sent,e.abrupt("return",{data:_(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)})},{key:"getDefaultSchema",value:function(){return(0,v.getDefaultSchema)()}}]),g}(p.default);E.normalizeDoctype=h.normalizeDoctypeJsonApi,t.default=E},10223:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultSchema=t.marks=t.nodes=void 0;var n=[["doc",{content:"(block)+",marks:"link"}],["paragraph",{content:"inline*",group:"block",marks:"strong code em link strike subsup textColor typeAheadQuery underline",parseDOM:[{tag:"p"}]}],["text",{group:"inline"}],["bulletList",{group:"block",content:"listItem+",parseDOM:[{tag:"ul"}]}],["orderedList",{group:"block",content:"listItem+",parseDOM:[{tag:"ol"}]}],["listItem",{content:"(paragraph ) (paragraph | bulletList | orderedList )*",defining:!0,parseDOM:[{tag:"li"}]}],["heading",{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}]}],["blockquote",{content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}]}],["rule",{group:"block",parseDOM:[{tag:"hr"}]}],["panel",{group:"block",content:"(paragraph | heading | bulletList | orderedList)+",attrs:{panelType:{default:"info"}},parseDOM:[{tag:"div[data-panel-type]"}]}],["confluenceUnsupportedBlock",{group:"block",attrs:{cxhtml:{default:null}},parseDOM:[{tag:'div[data-node-type="confluenceUnsupportedBlock"]'}]}],["confluenceUnsupportedInline",{group:"inline",inline:!0,atom:!0,attrs:{cxhtml:{default:null}},parseDOM:[{tag:'div[data-node-type="confluenceUnsupportedInline"]'}]}],["unsupportedBlock",{inline:!1,group:"block",atom:!0,selectable:!0,attrs:{originalValue:{default:{}}},parseDOM:[{tag:'[data-node-type="unsupportedBlock"]'}]}],["unsupportedInline",{inline:!0,group:"inline",selectable:!0,attrs:{originalValue:{default:{}}},parseDOM:[{tag:'[data-node-type="unsupportedInline"]'}]}],["hardBreak",{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}]}],["table",{content:"tableRow+",attrs:{isNumberColumnEnabled:{default:!1},layout:{default:"default"},__autoSize:{default:!1}},tableRole:"table",isolating:!0,selectable:!1,group:"block",parseDOM:[{tag:"table"}]}],["tableHeader",{content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading )+",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:"header_cell",isolating:!0,marks:"",parseDOM:[{tag:"th"}]}],["tableRow",{content:"(tableCell | tableHeader)+",tableRole:"row",parseDOM:[{tag:"tr"}]}],["tableCell",{content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | unsupportedBlock)+",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null}},tableRole:"cell",marks:"",isolating:!0,parseDOM:[{tag:".ak-renderer-table-number-column",ignore:!0},{tag:"td"}]}]];t.nodes=n;var r=[["link",{excludes:"color",group:"link",attrs:{href:{},__confluenceMetadata:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]"}]}],["em",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}]}],["strong",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strong"},{tag:"b"},{style:"font-weight"}]}],["textColor",{attrs:{color:{}},inclusive:!0,group:"color",parseDOM:[{style:"color"}]}],["strike",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strike"},{tag:"s"},{tag:"del"},{style:"text-decoration"}]}],["subsup",{inclusive:!0,group:"fontStyle",attrs:{type:{default:"sub"}},parseDOM:[{tag:"sub",attrs:{type:"sub"}},{tag:"sup",attrs:{type:"sup"}}]}],["underline",{inclusive:!0,group:"fontStyle",parseDOM:[{tag:"u"},{style:"text-decoration"}]}],["code",{excludes:"fontStyle link searchQuery color",inclusive:!0,parseDOM:[{tag:"span.code",preserveWhitespace:!0},{tag:"code",preserveWhitespace:!0},{tag:"tt",preserveWhitespace:!0},{tag:"span",preserveWhitespace:!0}]}],["typeAheadQuery",{excludes:"searchQuery",inclusive:!0,group:"searchQuery",parseDOM:[{tag:"span[data-type-ahead-query]"}],attrs:{trigger:{default:""}}}]];t.marks=r,t.getDefaultSchema=function(){return{nodes:n,marks:r}}},29985:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(15500)),i=r(n(68434)),o=r(n(82007)),c=r(n(64512)),s=r(n(80295)),u=r(n(65105)),l=r(n(19723)),d=r(n(25665)),f=r(n(27952)),p=r(n(12323)),h=r(n(29328)),m=r(n(88928)),v=r(n(66605)),y=r(n(45051)),b=r(n(79271));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,c.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);return n=t?Reflect.construct(r,arguments,(0,p.default)(this).constructor):r.apply(this,arguments),(0,f.default)(this,n)}}var k={clientID:"",clientName:"",clientKind:"",clientSecret:"",clientURI:"",registrationAccessToken:"",redirectURI:"",softwareID:"",softwareVersion:"",logoURI:"",policyURI:"",notificationPlatform:"",notificationDeviceToken:""},O=function(e){(0,d.default)(C,e);var t,n,r,a,c,f,p,h,g,O,E,S=w(C);function C(e){var t,n=e.oauth,r=e.scope,a=e.onTokenRefresh,i=(0,s.default)(e,["oauth","scope","onTokenRefresh"]);return(0,u.default)(this,C),(t=S.call(this,i)).setOAuthOptions(x(x({},k),n)),n.token&&t.setToken(n.token),t.scope=void 0===r?[]:r,t.onTokenRefresh=a,t}return(0,l.default)(C,[{key:"isRegistered",value:function(){return""!==this.oauthOptions.clientID}},{key:"snakeCaseOAuthData",value:function(e){var t={softwareID:"software_id",softwareVersion:"software_version",clientID:"client_id",clientName:"client_name",clientKind:"client_kind",clientURI:"client_uri",logoURI:"logo_uri",policyURI:"policy_uri",notificationPlatform:"notification_platform",notificationDeviceToken:"notification_device_token",redirectURI:"redirect_uris"},n={};return Object.keys(e).forEach(function(r){var a=t[r]||r,i=e[r];n[a]=i}),n.redirect_uris&&n.redirect_uris instanceof Array==!1&&(n.redirect_uris=[n.redirect_uris]),n}},{key:"camelCaseOAuthData",value:function(e){var t={client_id:"clientID",client_name:"clientName",client_secret:"clientSecret",registration_access_token:"registrationAccessToken",software_id:"softwareID",redirect_uris:"redirectURI"},n={};return Object.keys(e).forEach(function(r){var a=t[r]||r,i=e[r];n[a]=i}),n}},{key:"doRegistration",value:function(){return this.fetchJSON("POST","/auth/register",this.snakeCaseOAuthData({redirectURI:this.oauthOptions.redirectURI,clientName:this.oauthOptions.clientName,softwareID:this.oauthOptions.softwareID,clientKind:this.oauthOptions.clientKind,clientURI:this.oauthOptions.clientURI,logoURI:this.oauthOptions.logoURI,policyURI:this.oauthOptions.policyURI,softwareVersion:this.oauthOptions.softwareVersion,notificationPlatform:this.oauthOptions.notificationPlatform,notificationDeviceToken:this.oauthOptions.notificationDeviceToken}))}},{key:"register",value:(t=(0,o.default)(i.default.mark(function e(){var t,n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRegistered()){e.next=2;break}throw Error("Client already registered");case 2:if(t=["redirectURI"],n=Object.keys(this.oauthOptions),!((r=t.filter(function(e){return n[e]})).length>0)){e.next=7;break}throw Error("Can't register client : missing ".concat(r," fields"));case 7:return e.next=9,this.doRegistration();case 9:return a=e.sent,this.setOAuthOptions(x(x({},this.oauthOptions),{},{client_id:a.client_id,client_name:a.client_name,client_secret:a.client_secret,registration_access_token:a.registration_access_token,software_id:a.software_id})),e.abrupt("return",this.oauthOptions);case 12:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"unregister",value:(n=(0,o.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new _;case 2:return t=this.oauthOptions.clientID,this.oauthOptions.clientID="",e.abrupt("return",this.fetchJSON("DELETE","/auth/register/".concat(t),null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"fetchInformation",value:(r=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new _;case 2:return e.abrupt("return",this.fetchJSON("GET","/auth/register/".concat(this.oauthOptions.clientID),null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"updateInformation",value:(a=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]&&c[1],this.isRegistered()){e.next=3;break}throw new _;case 3:return r={clientID:this.oauthOptions.clientID,clientName:this.oauthOptions.clientName,redirectURI:this.oauthOptions.redirectURI,softwareID:this.oauthOptions.softwareID},a=this.snakeCaseOAuthData(x(x({},r),t)),n&&(a.client_secret=this.oauthOptions.clientSecret),e.next=8,this.fetchJSON("PUT","/auth/register/".concat(this.oauthOptions.clientID),a,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}});case 8:return o=e.sent,this.setOAuthOptions(x(x({},a),o)),e.abrupt("return",this.oauthOptions);case 11:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"generateStateCode",value:function(){var e;if("undefined"!=typeof window&&void 0!==window.crypto&&"function"==typeof window.crypto.getRandomValues)e=new Uint8Array(16),window.crypto.getRandomValues(e);else{e=Array(16);for(var t=0;t<e.length;t++)e[t]=Math.floor(255*Math.random())}return btoa(String.fromCharCode.apply(null,e)).replace(/=+$/,"").replace(/\//g,"_").replace(/\+/g,"-")}},{key:"getAuthCodeURL",value:function(e){var t=e.stateCode,n=e.scopes,r=void 0===n?this.scope:n,a=e.sessionCode,i=void 0===a?void 0:a,o=e.codeChallenge,c=void 0===o?void 0:o;if(!this.isRegistered())throw new _;var s={client_id:this.oauthOptions.clientID,redirect_uri:this.oauthOptions.redirectURI,state:t,response_type:"code",scope:r.join(" ")};return this.oauthOptions.registerToken&&(s=x(x({},s),{},{registerToken:this.oauthOptions.registerToken})),i&&(s=x(x({},s),{},{session_code:i})),c&&(s=x(x({},s),{},{code_challenge:c,code_challenge_method:"S256"})),"".concat(this.uri,"/auth/authorize?").concat(this.dataToQueryString(s))}},{key:"dataToQueryString",value:function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}},{key:"getAccessCodeFromURL",value:function(e,t){if(!t)throw Error("Missing state code");var n=new URL(e).searchParams,r=n.get("state"),a=n.get("access_code");if(t!==r)throw Error("Given state does not match url query state");return a}},{key:"fetchAccessToken",value:(c=(0,o.default)(i.default.mark(function e(t,n,r,a){var o,c,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!this.isRegistered()&&!n)){e.next=2;break}throw new _;case 2:return c={grant_type:"authorization_code",code:t,client_id:(o=n||this.oauthOptions).clientID,client_secret:o.clientSecret},a&&(c=x(x({},c),{},{code_verifier:a})),e.next=7,this.fetchJSON("POST",(r||"")+"/auth/access_token",this.dataToQueryString(c),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:return s=e.sent,e.abrupt("return",new m.default(s));case 9:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return c.apply(this,arguments)})},{key:"fetchKonnectorToken",value:(f=(0,o.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchJSON("POST","/auth/tokens/konnectors/".concat(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),Error('oAuthClient.fetchKonnectorToken(): Could not create a token for the konnector with slug "'.concat(t,'". \n\n').concat(e.t0));case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return f.apply(this,arguments)})},{key:"fetchSessionCode",value:(p=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchJSON("POST","/auth/session_code"));case 1:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"fetchSessionCodeWithPassword",value:(h=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.passwordHash,a=void 0===(r=t.twoFactorToken)?void 0:r,c=void 0===(o=t.twoFactorPasscode)?void 0:o,e.abrupt("return",this.fetchJSON("POST","/auth/session_code",{passphrase:n,two_factor_token:a,two_factor_passcode:c}));case 2:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"loginFlagship",value:(g=(0,o.default)(i.default.mark(function e(t){var n,r,a,o,c,s,u;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=t.emailVerifiedCode)?void 0:n,a=t.passwordHash,c=void 0===(o=t.twoFactorToken)?void 0:o,u=void 0===(s=t.twoFactorPasscode)?void 0:s,e.abrupt("return",this.fetchJSON("POST","/auth/login/flagship",{client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret,email_verified_code:r,passphrase:a,two_factor_token:c,two_factor_passcode:u}));case 2:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"refreshToken",value:(O=(0,o.default)(i.default.mark(function e(){var t,n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new _;case 2:if(this.token){e.next=4;break}throw Error("No token to refresh");case 4:return t={grant_type:"refresh_token",refresh_token:this.token.refreshToken,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},e.prev=5,e.next=8,this.fetchJSONWithCurrentToken("POST","/auth/access_token",this.dataToQueryString(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 8:return n=e.sent,r=new m.default(x({refresh_token:this.token.refreshToken},n)),this.setToken(r),this.onTokenRefresh&&"function"==typeof this.onTokenRefresh&&this.onTokenRefresh(r),e.abrupt("return",r);case 15:if(e.prev=15,e.t0=e.catch(5),!this.isRevocationError(e.t0)){e.next=21;break}throw this.onRevocationChange(!0),b.default.warn("Client has been revoked. Please authenticate again."),e.t0;case 21:if(!(y.default.EXPIRED_TOKEN.test(e.t0.message)||y.default.INVALID_TOKEN.test(e.t0.message)||y.default.INVALID_TOKEN_ALT.test(e.t0.message))){e.next=28;break}return e.next=24,this.checkForRevocation();case 24:if(!e.sent){e.next=28;break}throw b.default.warn("Client has been revoked. Please authenticate again."),e.t0;case 28:throw e.t0;case 29:case"end":return e.stop()}},e,this,[[5,15]])})),function(){return O.apply(this,arguments)})},{key:"exchangeOAuthSecret",value:function(e,t){return this.fetchJSON("POST",e+"/auth/secret_exchange",{secret:t})}},{key:"setToken",value:function(e){e?this.token=e instanceof m.default?e:new m.default(e):this.token=null}},{key:"setCredentials",value:function(e){return(0,v.default)("setCredentials is deprecated, please replace by setToken"),this.setToken(e)}},{key:"setOAuthOptions",value:function(e){this.oauthOptions=this.camelCaseOAuthData(e)}},{key:"resetClientId",value:function(){this.oauthOptions.clientID=""}},{key:"resetClient",value:function(){this.resetClientId(),this.setUri(null),this.setToken(null)}},{key:"registrationAccessTokenToAuthHeader",value:function(){if(!this.oauthOptions.registrationAccessToken)throw Error("No registration access token");return"Bearer "+this.oauthOptions.registrationAccessToken}},{key:"setPassphraseFlagship",value:function(e){var t=e.registerToken,n=e.passwordHash,r=e.hint,a=e.key,i=e.publicKey,o=e.privateKey,c=e.iterations;return this.fetchJSON("POST","/settings/passphrase/flagship",{register_token:t,passphrase:n,hint:r,key:a,public_key:i,private_key:o,iterations:c,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}})}},{key:"checkForRevocation",value:(E=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchInformation();case 3:case 11:return e.abrupt("return",!1);case 6:if(e.prev=6,e.t0=e.catch(0),!this.isRevocationError(e.t0)){e.next=11;break}return this.onRevocationChange(!0),e.abrupt("return",!0);case 12:case"end":return e.stop()}},e,this,[[0,6]])})),function(){return E.apply(this,arguments)})}]),C}(h.default),_=function(e){(0,d.default)(n,e);var t=w(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Client not registered or missing OAuth information";return(0,u.default)(this,n),(e=t.call(this,r)).message=r,e.name="NotRegisteredException",e}return n}((0,a.default)(Error));t.default=O},54348:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OAUTH_CLIENTS_DOCTYPE=void 0;var i=a(n(68434)),o=a(n(64512)),c=a(n(41)),s=a(n(82007)),u=a(n(65105)),l=a(n(19723)),d=a(n(25665)),f=a(n(27952)),p=a(n(12323)),h=a(n(27361)),m=a(n(67267)),v=n(26070),y=n(66804),b=r(n(93726)),g=n(78140),x=n(45051);function w(){var e=(0,c.default)(["/settings/clients/",""]);return w=function(){return e},e}function k(){var e=(0,c.default)(["/settings/clients/",""]);return k=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e=(0,c.default)(["/settings/clients"]);return E=function(){return e},e}var S="io.cozy.oauth.clients";t.OAUTH_CLIENTS_DOCTYPE=S;var C=(0,v.normalizeDoctypeJsonApi)(S),P=function(e){(0,d.default)(c,e);var t,n,r,a,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,p.default)(c);return e=t?Reflect.construct(n,arguments,(0,p.default)(this).constructor):n.apply(this,arguments),(0,f.default)(this,e)});function c(e){return(0,u.default)(this,c),o.call(this,S,e)}return(0,l.default)(c,[{key:"all",value:(n=(0,s.default)(i.default.mark(function e(){var t,n,r,a,o,c,s,u,l,d,f,p,m,v,x=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=(t=x.length>0&&void 0!==x[0]?x[0]:{}).limit)?100:n,a=t.bookmark,o=t.keys,c={"page[limit]":r,"page[cursor]":a},s=(0,y.uri)(E()),u=b.buildURL(s,c),e.prev=5,e.next=8,this.stackClient.fetchJSON("GET",u);case 8:l=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",(0,g.dontThrowNotFoundError)(e.t0));case 14:if(d=(0,h.default)(l,"links.next",""),p=void 0!==(f=new URL("".concat(this.stackClient.uri).concat(d)).searchParams.get("page[cursor]")||void 0),!o){e.next=24;break}return m=l.data.filter(function(e){return o.includes(e.id)}).map(function(e){return C(e)}),v=_(_({},l.meta),{},{count:m.length}),e.abrupt("return",{data:m,meta:v,next:o.length>m.length&&p,bookmark:f});case 24:return e.abrupt("return",{data:l.data.map(function(e){return C(e)}),meta:l.meta,next:p,bookmark:f});case 25:case"end":return e.stop()}},e,this,[[5,11]])})),function(){return n.apply(this,arguments)})},{key:"get",value:(r=(0,s.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all({keys:[t]});case 2:n=e.sent;case 3:if(!n.next){e.next=9;break}return e.next=6,this.all({keys:[t],bookmark:n.bookmark});case 6:n=e.sent,e.next=3;break;case 9:if(!n.data.length){e.next=13;break}return e.abrupt("return",{data:C(n.data[0])});case 13:throw n.url=(0,y.uri)(k(),t),n.status="404",new x.FetchError(n,"Not Found");case 16:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,s.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id,e.next=3,this.stackClient.fetchJSON("DELETE",(0,y.uri)(w(),n));case 3:return e.abrupt("return",{data:_(_({},C(t)),{},{_deleted:!0})});case 4:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})}]),c}(m.default);P.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=P},96302:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getPermissionsFor=void 0;var a=r(n(98235)),i=r(n(64512)),o=r(n(80295)),c=r(n(68434)),s=r(n(41)),u=r(n(82007)),l=r(n(65105)),d=r(n(19723)),f=r(n(25665)),p=r(n(27952)),h=r(n(12323)),m=r(n(67267)),v=n(26070),y=n(49129),b=n(66804),g=r(n(79271));function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(){var e=(0,s.default)(["/permissions/doctype/","/shared-by-link"]);return w=function(){return e},e}function k(){var e=(0,s.default)(["/permissions/",""]);return k=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e=(0,s.default)(["/permissions/",""]);return E=function(){return e},e}var S=function(e){return(0,v.normalizeDoc)(e,"io.cozy.permissions")},C=function(e){(0,f.default)(M,e);var t,n,r,i,s,m,v,y,O,C,A,D,T=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,h.default)(M);return e=t?Reflect.construct(n,arguments,(0,h.default)(this).constructor):n.apply(this,arguments),(0,p.default)(this,e)});function M(){return(0,l.default)(this,M),T.apply(this,arguments)}return(0,d.default)(M,[{key:"get",value:(n=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,b.uri)(E(),t));case 2:return n=e.sent,e.abrupt("return",{data:S(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"create",value:(r=(0,u.default)(c.default.mark(function e(t){var n,r,a,i,s,u,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t._id,t._type,r=void 0===(n=t.codes)?"code":n,a=t.ttl,i=t.tiny,s=(0,o.default)(t,["_id","_type","codes","ttl","tiny"]),(u=new URLSearchParams).append("codes",r),a&&u.append("ttl",a),i&&u.append("tiny",!0),e.next=7,this.stackClient.fetchJSON("POST","/permissions?".concat(u),{data:{type:"io.cozy.permissions",attributes:s}});case 7:return l=e.sent,e.abrupt("return",{data:S(l.data)});case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"add",value:(i=(0,u.default)(c.default.mark(function e(t,n){var r,a,i,o,s,u,l,d=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]?d[2]:{},e.t0=t._type,e.next="io.cozy.apps"===e.t0?4:"io.cozy.konnectors"===e.t0?6:"io.cozy.permissions"===e.t0?8:10;break;case 4:return a="/permissions/apps/".concat(t.slug),e.abrupt("break",11);case 6:return a="/permissions/konnectors/".concat(t.slug),e.abrupt("break",11);case 8:return a="/permissions/".concat(t._id),e.abrupt("break",11);case 10:throw Error("Permissions can only be added on existing permissions, apps and konnectors.");case 11:return i=r.expiresAt,s=(o=r.password)||""===o,u=i||""===i,e.next=16,this.stackClient.fetchJSON("PATCH",a,{data:{type:"io.cozy.permissions",attributes:_(_({permissions:n},s&&{password:o}),u&&{expires_at:i})}});case 16:return l=e.sent,e.abrupt("return",{data:S(l.data)});case 18:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"destroy",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,b.uri)(k(),e.id))}},{key:"findLinksByDoctype",value:(s=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,b.uri)(w(),t));case 2:return n=e.sent,e.abrupt("return",_(_({},n),{},{data:n.data.map(S)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"findApps",value:(m=(0,u.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.default.warn("PermissionCollection.findApps will be removed in next version of cozy-client. \n\n      You can use AppCollection.all() instead \n\n      or even better client.query(Q('io.cozy.apps'), {as: 'io.cozy.apps'})"),e.next=3,this.stackClient.fetchJSON("GET","/apps/");case 3:return t=e.sent,e.abrupt("return",_(_({},t),{},{data:t.data.map(function(e){return _({_id:e.id},e)})}));case 5:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"createSharingLink",value:(v=(0,u.default)(c.default.mark(function e(t){var n,r,a,i,o,s,u,l,d,f=arguments;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=f.length>1&&void 0!==f[1]?f[1]:{}).ttl,a=n.password,i=n.verbs,o=n.tiny,u=void 0===(s=n.codes)?"code":s,(l=new URLSearchParams).append("codes",u),r&&l.append("ttl",r),o&&l.append("tiny",!0),e.next=8,this.stackClient.fetchJSON("POST","/permissions?".concat(l),{data:{type:"io.cozy.permissions",attributes:_({permissions:P(t,!0,i?{verbs:i}:{})},a&&{password:a})}});case 8:return d=e.sent,e.abrupt("return",{data:S(d.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)})},{key:"fetchPermissionsByLink",value:(y=(0,u.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.links&&t.links.next)){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET",t.links.next);case 3:return n=e.sent,e.abrupt("return",_(_({},n),{},{data:n.data.map(S)}));case 5:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"fetchAllLinks",value:(O=(0,u.default)(c.default.mark(function e(t){var n,r,i;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findLinksByDoctype(t._type);case 2:r=n=e.sent;case 4:if(!(r.links&&r.links.next)){e.next=11;break}return e.next=7,this.fetchPermissionsByLink(r);case 7:r=e.sent,(i=n.data).push.apply(i,(0,a.default)(r.data)),e.next=4;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,this)})),function(e){return O.apply(this,arguments)})},{key:"revokeSharingLink",value:(C=(0,u.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchAllLinks(t);case 2:n=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return x(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(e.sent.data.filter(function(e){return j(e,t)})),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=13;break}return a=r.value,e.next=11,this.destroy(a);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:case"end":return e.stop()}},e,this,[[5,15,18,21]])})),function(e){return C.apply(this,arguments)})},{key:"getOwnPermissions",value:(A=(0,u.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.default.warn("getOwnPermissions is deprecated, please use fetchOwnPermissions instead"),e.abrupt("return",this.fetchOwnPermissions());case 2:case"end":return e.stop()}},e,this)})),function(){return A.apply(this,arguments)})},{key:"fetchOwnPermissions",value:(D=(0,u.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/permissions/self");case 2:return t=e.sent,e.abrupt("return",{data:S(t.data),included:t.included?t.included.map(S):[]});case 4:case"end":return e.stop()}},e,this)})),function(){return D.apply(this,arguments)})}]),M}(m.default),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e._id,a=e._type,i=n.verbs?n.verbs:t?["GET"]:["ALL"];return(0,y.isFile)(e)?{files:{type:"io.cozy.files",verbs:i,values:[r]}}:{collection:{type:a,verbs:i,values:[r]},files:{type:"io.cozy.files",verbs:i,values:["".concat(a,"/").concat(r)],selector:"referenced_by"}}};t.getPermissionsFor=P;var j=function(e,t){var n=t._id;return(0,y.isFile)(t)?-1!==e.attributes.permissions.files.values.indexOf(n):-1!==e.attributes.permissions.collection.values.indexOf(n)};t.default=C},96727:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.normalizeSettings=t.SETTINGS_DOCTYPE=void 0;var a=r(n(41)),i=r(n(68434)),o=r(n(64512)),c=r(n(82007)),s=r(n(65105)),u=r(n(19723)),l=r(n(25665)),d=r(n(27952)),f=r(n(12323)),p=r(n(67267)),h=r(n(79271)),m=n(66804),v=n(26070);function y(){var e=(0,a.default)(["/data/","/",""]);return y=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var g="io.cozy.settings";t.SETTINGS_DOCTYPE=g;var x=(0,v.normalizeDoctypeJsonApi)(g);t.normalizeSettings=x;var w=function(e){(0,l.default)(v,e);var t,n,r,a,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(v);return e=t?Reflect.construct(n,arguments,(0,f.default)(this).constructor):n.apply(this,arguments),(0,d.default)(this,e)});function v(e){return(0,s.default)(this,v),p.call(this,g,e)}return(0,u.default)(v,[{key:"get",value:(n=(0,c.default)(i.default.mark(function e(t){var n,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("io.cozy.settings.bitwarden"!==t){e.next=5;break}return e.next=3,this.stackClient.fetchJSON("GET","/data/io.cozy.settings/io.cozy.settings.bitwarden");case 3:return n=e.sent,e.abrupt("return",{data:x(n)});case 5:return t.startsWith("io.cozy.settings.")?r=t.substring(17):(h.default.warn("Deprecated: in next versions of cozy-client, it will not be possible to query settings with an incomplete id\n\n- Q('io.cozy.settings').getById('instance')\n+ Q('io.cozy.settings').getById('io.cozy.settings.instance')"),r=t),e.next=8,this.stackClient.fetchJSON("GET","/settings/".concat(r));case 8:return a=e.sent,e.abrupt("return",{data:x(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:"/settings/".concat(r)},a.data))});case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"update",value:(r=(0,c.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("io.cozy.settings.instance"!==t._id){e.next=6;break}return e.next=3,this.stackClient.fetchJSON("PUT","/settings/instance",{data:t});case 3:n=e.sent,e.next=9;break;case 6:return e.next=8,this.stackClient.fetchJSON("PUT",(0,m.uri)(y(),this.doctype,t._id),t);case 8:n=e.sent;case 9:return e.abrupt("return",{data:x(n.data)});case 10:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"updateLastSynced",value:(a=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.stackClient.fetchJSON("POST","/settings/synchronized"));case 1:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}]),v}(p.default);w.normalizeDoctype=v.normalizeDoctypeJsonApi,t.default=w},67207:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getSharingRules=t.BITWARDEN_CIPHERS_DOCTYPE=t.BITWARDEN_ORGANIZATIONS_DOCTYPE=t.SHARING_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(64512)),o=r(n(41)),c=r(n(82007)),s=r(n(65105)),u=r(n(19723)),l=r(n(25665)),d=r(n(27952)),f=r(n(12323)),p=r(n(67267)),h=n(26070),m=n(49129),v=n(66804);function y(){var e=(0,o.default)(["/sharings/","/recipients"]);return y=function(){return e},e}function b(){var e=(0,o.default)(["/sharings/","/recipients/self"]);return b=function(){return e},e}function g(){var e=(0,o.default)(["/sharings/","/groups/",""]);return g=function(){return e},e}function x(){var e=(0,o.default)(["/sharings/","/recipients/",""]);return x=function(){return e},e}function w(){var e=(0,o.default)(["/sharings/","/recipients"]);return w=function(){return e},e}function k(){var e=(0,o.default)(["/sharings/",""]);return k=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,i.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e=(0,o.default)(["/sharings/doctype/",""]);return E=function(){return e},e}var S="io.cozy.sharings";t.SHARING_DOCTYPE=S;var C="com.bitwarden.organizations";t.BITWARDEN_ORGANIZATIONS_DOCTYPE=C;var P="com.bitwarden.ciphers";t.BITWARDEN_CIPHERS_DOCTYPE=P;var j=(0,h.normalizeDoctypeJsonApi)(S),A=function(e){(0,l.default)(h,e);var t,n,r,i,o,p=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,f.default)(h);return e=t?Reflect.construct(n,arguments,(0,f.default)(this).constructor):n.apply(this,arguments),(0,d.default)(this,e)});function h(){return(0,s.default)(this,h),p.apply(this,arguments)}return(0,u.default)(h,[{key:"findByDoctype",value:(n=(0,c.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,v.uri)(E(),t));case 2:return n=e.sent,e.abrupt("return",_(_({},n),{},{data:n.data.map(j)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"get",value:(r=(0,c.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,v.uri)(k(),t),e.next=3,this.stackClient.fetchJSON("GET",n);case 3:return r=e.sent,e.abrupt("return",{data:j(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"create",value:(i=(0,c.default)(a.default.mark(function e(t){var n,r,i,o,c,s,u,l,d,f,p,h,m,v;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.document,r=t.description,i=t.previewPath,o=t.rules,s=void 0===(c=t.recipients)?[]:c,l=void 0===(u=t.readOnlyRecipients)?[]:u,d=t.openSharing,f=t.appSlug,p=t.sharedDrive,h={description:r,preview_path:i,open_sharing:d,rules:o||D(n,{sharedDrive:p})},m={},f&&(m.app_slug=f),p&&(m.drive=p),e.next=7,this.stackClient.fetchJSON("POST","/sharings/",{data:{type:"io.cozy.sharings",attributes:_(_({},h),m),relationships:_(_({},s.length>0&&{recipients:{data:s.map(L)}}),l.length>0&&{read_only_recipients:{data:l.map(L)}})}});case 7:return v=e.sent,e.abrupt("return",{data:j(v.data)});case 9:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getDiscoveryLink",value:function(e,t,n){var r=(n||{}).shortcut,a=new URLSearchParams;return a.append("sharecode",t),r&&a.append("shortcut",!0),this.stackClient.fullpath("/sharings/".concat(e,"/discovery?").concat(a))}},{key:"addRecipients",value:(o=(0,c.default)(a.default.mark(function e(t){var n,r,i,o,c,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.document,i=void 0===(r=t.recipients)?[]:r,c=void 0===(o=t.readOnlyRecipients)?[]:o,e.next=3,this.stackClient.fetchJSON("POST",(0,v.uri)(w(),n._id),{data:{type:"io.cozy.sharings",id:n._id,relationships:_(_({},i.length>0&&{recipients:{data:i.map(L)}}),c.length>0&&{read_only_recipients:{data:c.map(L)}})}});case 3:return s=e.sent,e.abrupt("return",{data:j(s.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"revokeRecipient",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(x(),e._id,t))}},{key:"revokeGroup",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(g(),e._id,t))}},{key:"revokeSelf",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(b(),e._id))}},{key:"revokeAllRecipients",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,v.uri)(y(),e._id))}}]),h}(p.default);A.normalizeDoctype=h.normalizeDoctypeJsonApi;var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.sharedDrive?N(e):(0,m.isFile)(e)?I(e):e._type===C?z(e):T(e)};t.getSharingRules=D;var T=function(e){var t=e._id,n=e._type;return[_({title:"collection",doctype:n,values:[t]},R()),_({title:"items",doctype:"io.cozy.files",values:["".concat(n,"/").concat(t)],selector:"referenced_by"},M())]},M=function(){return{add:"sync",update:"sync",remove:"sync"}},R=function(){return{update:"sync",remove:"revoke"}},I=function(e){var t=e._id;return[_({title:e.name,doctype:"io.cozy.files",values:[t]},F(e))]},N=function(e){var t=e._id;return[{title:e.name,doctype:"io.cozy.files",values:[t],add:"none",update:"none",remove:"none"}]},F=function(e){return(0,m.isDirectory)(e)?{add:"sync",update:"sync",remove:"sync"}:{update:"sync",remove:"revoke"}},z=function(e){var t=e._id;return[{title:e.name,doctype:C,values:[t],add:"sync",update:"sync",remove:"revoke"},{title:"Ciphers",doctype:P,values:[t],add:"sync",update:"sync",remove:"sync",selector:"organization_id"}]},L=function(e){return{id:e._id,type:e._type}};t.default=A},86247:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SHORTCUTS_DOCTYPE=void 0;var a=r(n(68434)),i=r(n(41)),o=r(n(82007)),c=r(n(65105)),s=r(n(19723)),u=r(n(25665)),l=r(n(27952)),d=r(n(12323)),f=r(n(64512)),p=r(n(67267)),h=n(26070),m=n(66804),v=n(77069);function y(){var e=(0,i.default)(["/shortcuts/",""]);return y=function(){return e},e}function b(){var e=(0,i.default)(["/shortcuts"]);return b=function(){return e},e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w="io.cozy.files.shortcuts";t.SHORTCUTS_DOCTYPE=w;var k=(0,h.normalizeDoctypeJsonApi)(w),O=function(e){return x(x({},k(e)),{},{_id:e._id})},_=function(e){(0,u.default)(f,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.default)(f);return e=t?Reflect.construct(n,arguments,(0,d.default)(this).constructor):n.apply(this,arguments),(0,l.default)(this,e)});function f(e){return(0,c.default)(this,f),i.call(this,w,e)}return(0,s.default)(f,[{key:"create",value:(n=(0,o.default)(a.default.mark(function e(t){var n,r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type||(t.type=w),!(!t.name||!t.name.trim()||!t.url||!t.dir_id)){e.next=3;break}throw Error("you need at least a name, an url and a dir_id attributes to create a shortcut");case 3:if("."!==(n=t.name.trim())&&".."!==n){e.next=6;break}throw Error("Invalid filename: ".concat(n));case 6:if(!(r=(0,v.getIllegalCharacters)(n)).length){e.next=9;break}throw Error("Invalid filename containing illegal character(s): ".concat(r));case 9:return i=(0,m.uri)(b()),e.next=12,this.stackClient.fetchJSON("POST",i,{data:{attributes:t,type:"io.cozy.files.shortcuts"}});case 12:return o=e.sent,e.abrupt("return",{data:O(o.data)});case 14:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"get",value:(r=(0,o.default)(a.default.mark(function e(t){var n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,m.uri)(y(),t),e.next=3,this.stackClient.fetchJSON("GET",n);case 3:return r=e.sent,e.abrupt("return",{data:O(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}]),f}(p.default);_.normalizeDoctype=h.normalizeDoctypeJsonApi,t.default=_},54026:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isForAccount=t.isForKonnector=t.normalizeTrigger=t.TRIGGERS_DOCTYPE=t.JOBS_DOCTYPE=void 0;var i=a(n(80295)),o=a(n(64512)),c=a(n(41)),s=a(n(68434)),u=a(n(82007)),l=a(n(65105)),d=a(n(19723)),f=a(n(59655)),p=a(n(25665)),h=a(n(27952)),m=a(n(12323)),v=r(n(78140)),y=n(26070),b=n(54056),g=n(66804),x=a(n(67267));function w(){var e=(0,c.default)(["/jobs/triggers/","/launch"]);return w=function(){return e},e}function k(){var e=(0,c.default)(["/jobs/triggers/",""]);return k=function(){return e},e}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e=(0,c.default)(["/jobs/triggers/",""]);return E=function(){return e},e}function S(){var e=(0,c.default)(["/jobs/triggers"]);return S=function(){return e},e}n(45051),t.JOBS_DOCTYPE="io.cozy.jobs";var C="io.cozy.triggers";t.TRIGGERS_DOCTYPE=C;var P=(0,y.normalizeDoctypeJsonApi)(C);t.normalizeTrigger=P,t.isForKonnector=function(e,t){return"konnector"===e.worker&&e.message.konnector==t},t.isForAccount=function(e,t){return e.message.account==t};var j=function(e,t){var n=new URLSearchParams;return e&&(Array.isArray(e.$in)?n.set("Worker",e.$in.join(",")):n.set("Worker",e)),t&&(Array.isArray(t.$in)?n.set("Type",t.$in.join(",")):n.set("Type",t)),n.toString()},A=function(e){(0,p.default)(A,e);var t,n,r,a,o,c,y,x,O=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,m.default)(A);return e=t?Reflect.construct(n,arguments,(0,m.default)(this).constructor):n.apply(this,arguments),(0,h.default)(this,e)});function A(e){return(0,l.default)(this,A),O.call(this,C,e)}return(0,d.default)(A,[{key:"all",value:(n=(0,u.default)(s.default.mark(function e(){var t,n=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]&&n[0],e.prev=1,e.next=4,this.stackClient.fetchJSON("GET","/jobs/triggers");case 4:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return P(e)}),meta:{count:t.data.length},next:!1,skip:0});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",(0,v.dontThrowNotFoundError)(e.t0));case 11:case"end":return e.stop()}},e,this,[[1,8]])})),function(){return n.apply(this,arguments)})},{key:"create",value:(r=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.uri)(S()),e.next=3,this.stackClient.fetchJSON("POST",n,{data:{attributes:t}});case 3:return r=e.sent,e.abrupt("return",{data:P(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"destroy",value:(a=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t._id){e.next=3;break}throw Error("TriggerCollection.destroy needs a document with an _id");case 3:return e.next=5,this.stackClient.fetchJSON("DELETE",(0,g.uri)(E(),n));case 5:return e.abrupt("return",{data:P(_(_({},t),{},{_deleted:!0}))});case 6:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"find",value:(o=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,c,u=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1&&void 0!==u[1]?u[1]:{},r=t.worker,a=t.type,!(0===Object.keys((0,i.default)(t,["worker","type"])).length&&!n.partialFilter)){e.next=18;break}return o="/jobs/triggers?".concat(j(r,a)),e.prev=6,e.next=9,this.stackClient.fetchJSON("GET",o);case 9:return c=e.sent,e.abrupt("return",{data:c.data.map(function(e){return P(e)}),meta:{count:c.data.length},next:!1,skip:0});case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",(0,v.dontThrowNotFoundError)(e.t0));case 16:e.next=19;break;case 18:return e.abrupt("return",(0,f.default)((0,m.default)(A.prototype),"find",this).call(this,t,n));case 19:case"end":return e.stop()}},e,this,[[6,13]])})),function(){return o.apply(this,arguments)})},{key:"get",value:(c=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.default.get(this.stackClient,(0,g.uri)(k(),t),{normalize:P}));case 1:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"launch",value:(y=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.uri)(w(),t._id),e.next=3,this.stackClient.fetchJSON("POST",n);case 3:return r=e.sent,e.abrupt("return",{data:(0,b.normalizeJob)(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"update",value:(x=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=s.default.keys(t);case 1:if((e.t1=e.t0()).done){e.next=7;break}if(["_id","_rev","_type","arguments","message","cozyMetadata"].includes(e.t1.value)){e.next=5;break}throw Error("TriggerCollection.update only works for 'arguments', and 'message' attributes.");case 5:e.next=1;break;case 7:return n=_(_({},t.arguments?{arguments:t.arguments}:{}),t.message?{message:t.message}:{}),e.next=10,this.stackClient.fetchJSON("PATCH","/jobs/triggers/".concat(t._id),{data:{attributes:n}});case 10:return r=e.sent,e.abrupt("return",{data:P(r.data)});case 12:case"end":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)})}]),A}(x.default);A.normalizeDoctype=y.normalizeDoctypeJsonApi,t.default=A},45051:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.FetchError=t.default=void 0;var a=r(n(65105)),i=r(n(8997)),o=r(n(25665)),c=r(n(27952)),s=r(n(12323)),u=r(n(15500)),l=/the client must be registered/;t.default={EXPIRED_TOKEN:/Expired token/,CLIENT_NOT_FOUND:/Client not found/,INVALID_TOKEN:/Invalid JWT token/,INVALID_TOKEN_ALT:/Invalid token/,UNREGISTERED_CLIENT:l};var d=/invalid_token/,f=/access_token_expired/,p=function(e){var t,n=null===(t=e.headers)||void 0===t?void 0:t.get("www-authenticate");if(n){if(f.test(n))return"Expired token";if(d.test(n))return"Invalid token"}},h=function(e){(0,o.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.default)(r);return e=t?Reflect.construct(n,arguments,(0,s.default)(this).constructor):n.apply(this,arguments),(0,c.default)(this,e)});function r(e,t){if((0,a.default)(this,r),c=n.call(this),null===(o=Error.captureStackTrace)||void 0===o||o.call(Error,(0,i.default)(c),c.constructor),c.name="FetchError",c.response=e,c.url=e.url,c.status=e.status,c.reason=t,null===t)throw Error("FetchError received a ".concat(e.status," error without a Response Body when calling ").concat(e.url));var o,c,s=p(e);return Object.defineProperty((0,i.default)(c),"message",{value:("string"==typeof t.error&&l.test(t.error)?t.error:void 0)||t.message||s||("string"==typeof t?t:JSON.stringify(t))}),c}return r}((0,u.default)(Error));t.FetchError=h},79954:function(e,t,n){"use strict";var r,a,i=n(14746),o=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.getIconURL=t.default=t._getIconURL=void 0;var c=o(n(68434)),s=o(n(82007));n(79312);var u=i(n(23355));function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e,t,n,r){if(!n)throw Error("Cannot fetch icon: missing domain");var a=f(e,t,n,r);if(!a)throw Error("Cannot get icon source for app ".concat(e.name));return a},f=function(e,t,n,r){var a=e&&e.links&&e.links.icon||p(e,t);return a?"".concat(r,"//").concat(n).concat(a):null},p=function(e,t){return t?"/registry/".concat(t,"/icon"):e&&e.latest_version&&e.latest_version.version&&"/registry/".concat(e.slug,"/").concat(e.latest_version.version,"/icon")},h={gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},m=function(e){if(!e.icon)throw Error("".concat(e.name,": Cannot detect icon mime type since app has no icon"));var t=e.icon.split(".").pop();if(!t)throw Error("".concat(e.name,": Unable to detect icon mime type from extension (").concat(e.icon,")"));return t},v=(r=(0,s.default)(c.default.mark(function e(t,n){var r,a,i,o,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return l(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}(t),e.prev=1,a.s();case 3:if((i=a.n()).done){e.next=18;break}return o=i.value,e.prev=5,e.next=8,o();case 8:return s=e.sent,n&&n(s),e.abrupt("return",s);case 13:e.prev=13,e.t0=e.catch(5),r=e.t0;case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),a.e(e.t1);case 23:return e.prev=23,a.f(),e.finish(23);case 26:throw r;case 27:case"end":return e.stop()}},e,null,[[1,20,23,26],[5,13]])})),function(e,t){return r.apply(this,arguments)}),y=(a=(0,s.default)(c.default.mark(function e(t,n){var r,a,i,o,s,u,l,f,p,y,b,g,x,w;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.type,a=n.slug,i=n.appData,s=void 0===(o=n.priority)?"stack":o,!t.oauthOptions){e.next=29;break}return u=[function(){return t.fetch("GET","/".concat(r,"s/").concat(a,"/icon"))},function(){return t.fetch("GET","/registry/".concat(a,"/icon"))}],"registry"===s&&u.reverse(),e.next=6,v(u,function(e){if(!e.ok)throw Error("Error while fetching icon ".concat(e.statusText))});case 6:return l=e.sent,e.next=9,l.blob();case 9:if((f=e.sent).type){e.next=26;break}if(y=[function(){var e,n;return e=r,n=a,t.fetchJSON("GET","/".concat(e,"s/").concat(n)).then(function(e){return e.data.attributes})},function(){var e;return e=a,t.fetchJSON("GET","/registry/".concat(e)).then(function(e){return e.latest_version.manifest})}],"registry"===s&&y.reverse(),e.t1=i,e.t1){e.next=18;break}return e.next=17,v(y);case 17:e.t1=e.sent;case 18:if(e.t0=e.t1,e.t0){e.next=21;break}e.t0={};case 21:if(h[b=m(p=e.t0)]){e.next=25;break}throw Error('Unknown image extension "'.concat(b,'" for app ').concat(p.name));case 25:f=new Blob([f],{type:h[b]});case 26:return e.abrupt("return",URL.createObjectURL(f));case 29:return e.prev=29,x=(g=new URL(t.uri)).host,w=g.protocol,e.abrupt("return",d(i,a,x,w));case 34:throw e.prev=34,e.t2=e.catch(29),Error("Cannot fetch icon: invalid stackClient.uri: ".concat(e.t2.message));case 37:case"end":return e.stop()}},e,null,[[29,34]])})),function(e,t){return a.apply(this,arguments)});t._getIconURL=y;var b=function(){return y.apply(this,arguments).catch(function(){return new u.ErrorReturned})};t.getIconURL=b;var g=(0,u.default)(b,{maxDuration:3e5,key:function(e,t){var n=t.type,r=t.slug,a=t.priority;return e.uri+NaN+n+":"+r+":"+a}});t.default=g},77069:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIllegalCharacters=void 0,t.getIllegalCharacters=function(e){var t=e.match(/\/|\x00|\n|\r/g);return t?t.join(" "):""}},60359:function(e,t,n){"use strict";var r=n(14746),a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"OAuthClient",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"errors",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"FetchError",{enumerable:!0,get:function(){return c.FetchError}}),Object.defineProperty(t,"normalizeDoc",{enumerable:!0,get:function(){return s.normalizeDoc}});var i=a(n(29328)),o=a(n(29985)),c=r(n(45051)),s=n(26070)},66605:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(79271));t.default=function(){a.default.warn.apply(a.default,arguments)}},79271:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(60732)),i=(0,a.default)("cozy-stack-client");a.default.suggest.deny("cozy-stack-client","info"),t.default=i},35946:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.makeOperatorsExplicit=t.isMatchingIndex=t.getIndexFields=t.transformSort=t.getIndexNameFromFields=t.makeKeyFromPartialFilter=t.normalizeDesignDoc=void 0;var a=r(n(98235)),i=r(n(90402)),o=r(n(64512)),c=r(n(91175)),s=r(n(27361)),u=r(n(18446)),l=r(n(13218));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.normalizeDesignDoc=function(e){var t=e._id||e.id;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:t,_id:t},e.doc)};var f=function e(t){return"object"!=typeof t||null===t?String(t):Object.entries(t).map(function(t){var n=(0,i.default)(t,2),r=n[0],a=n[1];return Array.isArray(a)&&a.every(function(e){return"string"==typeof e})?"".concat(r,"_(").concat(a.join("_"),")"):Array.isArray(a)?"(".concat(a.map(function(t){return"".concat(e(t))}).join(")_".concat(r,"_(")),")"):"object"==typeof a?"".concat(r,"_").concat(e(a)):"".concat(r,"_").concat(a)}).join(")_and_(")};t.makeKeyFromPartialFilter=f,t.getIndexNameFromFields=function(e,t){var n="by_".concat(e.join("_and_"));return t?"".concat(n,"_filter_(").concat(f(t),")"):n},t.transformSort=function(e){if(!e||Array.isArray(e))return e;throw Error('Passing an object to the "sort" is not supported')},t.getIndexFields=function(e){var t=e.selector,n=e.partialFilter,r=e.sort;return Array.from(new Set([].concat((0,a.default)((void 0===r?[]:r).map(function(e){return(0,c.default)(Object.keys(e))})),(0,a.default)(t?Object.keys(t):[]),(0,a.default)(n?Object.keys(n):[]))))},t.isMatchingIndex=function(e,t,n){var r=Object.keys((0,s.default)(e,"views"))[0],a=Object.keys((0,s.default)(e,"views.".concat(r,".map.fields")));if((0,u.default)(a,t)){var i=(0,s.default)(e,"views.".concat(r,".map.partial_filter_selector"));if(!n&&!i)return!0;var o=p(null!=n?n:{});if((0,u.default)(o,i))return!0}return!1};var p=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object.entries(t).reduce(function(t,r){var a,c=(0,i.default)(r,2),s=c[0],u=c[1];return"$nor"===s?t.$and=u.map(function(e){return Object.entries(e).reduce(function(e,t){var n=(0,i.default)(t,2),r=n[0],a=n[1];return"string"==typeof a?e[r]={$ne:a}:e[r]=p(a,!0),e},{})}).sort(h):null!==(a=u.$or)&&void 0!==a&&a.every(function(e){return"string"==typeof e})?t.$or=u.$or.map(function(t){return e((0,o.default)({},s,t),n)}).sort(h):Array.isArray(u)&&u.every(l.default)?t[s]=u.map(function(t){return e(t,n)}).sort(h):(0,l.default)(u)&&!Array.isArray(u)?t[s]=e(u,n):n&&"$eq"===s?t.$ne=u:s.startsWith("$")?t[s]=u:t[s]={$eq:u},t},{}),a=Object.keys(r).sort();return 1===a.length?r:{$and:a.map(function(e){return(0,o.default)({},e,r[e])})}};t.makeOperatorsExplicit=p;var h=function(e,t){var n=Object.keys(e)[0],r=Object.keys(t)[0];return n.localeCompare(r)}},23355:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReturned=t.default=void 0;var a=r(n(65105)),i=r(n(25665)),o=r(n(27952)),c=r(n(12323)),s=function(e){(0,i.default)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,c.default)(r);return e=t?Reflect.construct(n,arguments,(0,c.default)(this).constructor):n.apply(this,arguments),(0,o.default)(this,e)});function r(){return(0,a.default)(this,r),n.apply(this,arguments)}return r}((0,r(n(15500)).default)(String));t.ErrorReturned=s;var u=function(e,t){for(var n=Date.now(),r=0,a=Object.keys(e);r<a.length;r++){var i=a[r];n-e[i].date>t&&delete e[i]}};t.default=function(e,t){var n={};return function(){var r=t.key.apply(null,arguments);u(n,t.maxDuration);var a=n[r];if(a)return a.result;var i=e.apply(this,arguments);return n[r]={result:i,date:Date.now()},"object"==typeof i&&"function"==typeof i.then&&i.then(function(e){e instanceof s&&delete n[r]}).catch(function(e){delete n[r]}),i}}},26070:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeDoc=c,t.normalizeDoctypeJsonApi=function(e){return function(t,n){var r=c(t,e);return o(o({},r),r.attributes||{})}},t.normalizeDoctypeRawApi=function(e){return function(t,n){var r=c(n,e);return o(o({},r),r.attributes||{})}};var a=r(n(64512));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e._id||e.id;return o({id:n,_id:n,_type:t},e)}},20368:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(68434)),i=r(n(82007)),o=r(n(65105)),c=r(n(19723)),s=function(){var e;function t(){(0,o.default)(this,t),this.pending={}}return(0,c.default)(t,[{key:"exec",value:(e=(0,i.default)(a.default.mark(function e(t,n){var r,i,o,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),(i=this.pending[r])?o=i:(o=t(),this.pending[r]=o),e.prev=3,e.next=6,o;case 6:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,this.pending[r]=null,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])})),function(t,n){return e.apply(this,arguments)})},{key:"get",value:function(e){var t=e(),n=this.pending[t];return n||null}}]),t}();t.default=s},93726:function(e,t,n){"use strict";var r=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.buildURL=t.encode=void 0;var a=r(n(90402)),i=r(n(35937)),o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(t)?"["+t.map(function(t){return e(t,!0)}).join(",")+"]":n?encodeURIComponent('"'.concat(t,'"')):encodeURIComponent(t)},c=function(e){return Object.entries(e).map(function(e){var t=(0,a.default)(e,2),n=t[0],r=o(t[1]);return"".concat(n,"=").concat(r)}).join("&")};t.encode=c,t.buildURL=function(e,t){var n=c((0,i.default)(t));return n?"".concat(e,"?").concat(n):e}},79312:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={}},66804:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinPath=function(e,t){return"".concat(e).concat(e.endsWith("/")?"":"/").concat(t)},t.encodePath=t.forceDownload=t.formatBytes=t.slugify=t.sleep=t.attempt=t.uri=void 0,t.uri=function(e){for(var t=[e[0]],n=0;n<(arguments.length<=1?0:arguments.length-1);n++)t.push(encodeURIComponent(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])+e[n+1]);return t.join("")},t.attempt=function(e){return e.then(function(){return!0}).catch(function(){return!1})},t.sleep=function(e,t){return new Promise(function(n){setTimeout(n,e,t)})},t.slugify=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},t.formatBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},t.forceDownload=function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},t.encodePath=function(e){return e.split("/").map(function(e){return encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29")}).join("/")}},38558:function(e,t,n){"use strict";var r,a=n(5751);Object.defineProperty(t,"__esModule",{value:!0}),t.shouldXMLHTTPRequestBeUsed=t.fetchWithXMLHttpRequest=void 0;var i=a(n(68434)),o=a(n(90402)),c=a(n(82007)),s=a(n(88306)),u=(r=(0,c.default)(i.default.mark(function e(t,n){var r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,r){var a=new XMLHttpRequest;n.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",n.onUploadProgress,!1),a.onload=function(){4==this.readyState?e(this):r(this)},a.onerror=function(e){r(e)},a.open(n.method,t,!0),a.withCredentials=!0;for(var i=0,c=Object.entries(n.headers);i<c.length;i++){var s=(0,o.default)(c[i],2),u=s[0],l=s[1];a.setRequestHeader(u,l)}a.send(n.body)});case 2:return r=e.sent,e.abrupt("return",{headers:new Headers(r.getAllResponseHeaders().split("\r\n").map(function(e){return e.split(":",2)}).filter(function(e){return 2==e.length})),ok:r.status>=200&&r.status<300,text:function(){var e=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.responseText);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),json:function(){var e=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(r.responseText));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),status:r.status,statusText:r.statusText});case 4:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});t.fetchWithXMLHttpRequest=u;var l=(0,s.default)(function(){var e=new XMLHttpRequest;return"onload"in e&&"onprogress"in e});t.shouldXMLHTTPRequestBeUsed=function(e,t,n){return!!n.onUploadProgress&&l()}},62831:function(e,t,n){"use strict";var r=n(42124),a=n(21924),i=r("%TypeError%"),o=n(84490),c=n(12125),s=n(61131),u=n(72308),l=n(76333),d=n(17147),f=n(7681),p=n(29981),h=a("String.prototype.split"),m=Object("a"),v="a"!==m[0]||!(0 in m);e.exports=function(e){var t,n=d(this),r=v&&p(this)?h(this,""):n,a=l(r);if(!u(e))throw new i("Array.prototype.forEach callback must be a function");arguments.length>1&&(t=arguments[1]);for(var m=0;m<a;){var y=f(m);s(r,y)&&o(e,t,[c(r,y),m,r]),m+=1}}},28554:function(e,t,n){"use strict";var r=n(83739),a=n(55559),i=n(21924),o=n(80891),c=n(62831),s=n(52750),u=s(),l=n(23495),d=i("Array.prototype.slice"),f=a.apply(u),p=function(e,t){return o(e),f(e,d(arguments,1))};r(p,{getPolyfill:s,implementation:c,shim:l}),e.exports=p},52750:function(e,t,n){"use strict";var r=n(72868),a=n(62831);e.exports=function(){var e=Array.prototype.forEach;return r(e)?e:a}},23495:function(e,t,n){"use strict";var r=n(83739),a=n(52750);e.exports=function(){var e=a();return r(Array.prototype,{forEach:e},{forEach:function(){return Array.prototype.forEach!==e}}),e}},83739:function(e,t,n){"use strict";var r=n(82215),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,o=Array.prototype.concat,c=Object.defineProperty,s=n(31044)(),u=c&&s,l=function(e,t,n,r){if(t in e){if(!0===r){if(e[t]===n)return}else{if("function"!=typeof r||"[object Function]"!==i.call(r)||!r())return}}u?c(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n},d=function(e,t){var n=arguments.length>2?arguments[2]:{},i=r(t);a&&(i=o.call(i,Object.getOwnPropertySymbols(t)));for(var c=0;c<i.length;c+=1)l(e,i[c],t[i[c]],n[i[c]])};d.supportsDescriptors=!!u,e.exports=d},40657:function(e,t,n){"use strict";var r=n(82215),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,o=Array.prototype.concat,c=Object.defineProperty,s=n(31044)(),u=c&&s,l=function(e,t,n,r){(!(t in e)||"function"==typeof r&&"[object Function]"===i.call(r)&&r())&&(u?c(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},d=function(e,t){var n=arguments.length>2?arguments[2]:{},i=r(t);a&&(i=o.call(i,Object.getOwnPropertySymbols(t)));for(var c=0;c<i.length;c+=1)l(e,i[c],t[i[c]],n[i[c]])};d.supportsDescriptors=!!u,e.exports=d},38882:function(e,t,n){"use strict";var r,a=SyntaxError,i=Function,o=TypeError,c=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(e){s=null}var u=function(){throw new o},l=s?function(){try{return arguments.callee,u}catch(e){try{return s(arguments,"callee").get}catch(e){return u}}}():u,d=n(41405)(),f=Object.getPrototypeOf||function(e){return e.__proto__},p={},h="undefined"==typeof Uint8Array?r:f(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?f(new Map()[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?f(new Set()[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?f(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":l,"%TypedArray%":h,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},v=function e(t){var n;if("%AsyncFunction%"===t)n=c("async function () {}");else if("%GeneratorFunction%"===t)n=c("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=c("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(n=f(a.prototype))}return m[t]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(58612),g=n(17642),x=b.call(Function.call,Array.prototype.concat),w=b.call(Function.apply,Array.prototype.splice),k=b.call(Function.call,String.prototype.replace),O=b.call(Function.call,String.prototype.slice),_=b.call(Function.call,RegExp.prototype.exec),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,C=function(e){var t=O(e,0,1),n=O(e,-1);if("%"===t&&"%"!==n)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var r=[];return k(e,E,function(e,t,n,a){r[r.length]=n?k(a,S,"$1"):t||e}),r},P=function(e,t){var n,r=e;if(g(y,r)&&(r="%"+(n=y[r])[0]+"%"),g(m,r)){var i=m[r];if(i===p&&(i=v(r)),void 0===i&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===_(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=C(e),r=n.length>0?n[0]:"",i=P("%"+r+"%",t),c=i.name,u=i.value,l=!1,d=i.alias;d&&(r=d[0],w(n,x([0,1],d)));for(var f=1,p=!0;f<n.length;f+=1){var h=n[f],v=O(h,0,1),y=O(h,-1);if(('"'===v||"'"===v||"`"===v||'"'===y||"'"===y||"`"===y)&&v!==y)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&p||(l=!0),r+="."+h,g(m,c="%"+r+"%"))u=m[c];else if(null!=u){if(!(h in u)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(s&&f+1>=n.length){var b=s(u,h);u=(p=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:u[h]}else p=g(u,h),u=u[h];p&&!l&&(m[c]=u)}}return u}},10860:function(e,t,n){"use strict";var r=n(88996),a=n(61189),i=n(21924)("String.prototype.replace"),o=/^\s$/.test("᠎"),c=o?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=o?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){return i(i(a(r(this)),c,""),s,"")}},14238:function(e,t,n){"use strict";var r=n(55559),a=n(40657),i=n(88996),o=n(10860),c=n(15126),s=n(34916),u=r(c()),l=function(e){return i(e),u(e)};a(l,{getPolyfill:c,implementation:o,shim:s}),e.exports=l},15126:function(e,t,n){"use strict";var r=n(10860);e.exports=function(){return String.prototype.trim&&"​"==="​".trim()&&"᠎"==="᠎".trim()&&"_᠎"==="_᠎".trim()&&"᠎_"==="᠎_".trim()?String.prototype.trim:r}},34916:function(e,t,n){"use strict";var r=n(40657),a=n(15126);e.exports=function(){var e=a();return r(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},42124:function(e,t,n){"use strict";var r,a=SyntaxError,i=Function,o=TypeError,c=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(e){s=null}var u=function(){throw new o},l=s?function(){try{return arguments.callee,u}catch(e){try{return s(arguments,"callee").get}catch(e){return u}}}():u,d=n(41405)(),f=n(28185)(),p=Object.getPrototypeOf||(f?function(e){return e.__proto__}:null),h={},m="undefined"!=typeof Uint8Array&&p?p(Uint8Array):r,v={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d&&p?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d&&p?p(p([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d&&p?p(new Map()[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d&&p?p(new Set()[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d&&p?p(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":l,"%TypedArray%":m,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(p)try{null.error}catch(e){var y=p(p(e));v["%Error.prototype%"]=y}var b=function e(t){var n;if("%AsyncFunction%"===t)n=c("async function () {}");else if("%GeneratorFunction%"===t)n=c("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=c("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&p&&(n=p(a.prototype))}return v[t]=n,n},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=n(58612),w=n(17642),k=x.call(Function.call,Array.prototype.concat),O=x.call(Function.apply,Array.prototype.splice),_=x.call(Function.call,String.prototype.replace),E=x.call(Function.call,String.prototype.slice),S=x.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,j=function(e){var t=E(e,0,1),n=E(e,-1);if("%"===t&&"%"!==n)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var r=[];return _(e,C,function(e,t,n,a){r[r.length]=n?_(a,P,"$1"):t||e}),r},A=function(e,t){var n,r=e;if(w(g,r)&&(r="%"+(n=g[r])[0]+"%"),w(v,r)){var i=v[r];if(i===h&&(i=b(r)),void 0===i&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=j(e),r=n.length>0?n[0]:"",i=A("%"+r+"%",t),c=i.name,u=i.value,l=!1,d=i.alias;d&&(r=d[0],O(n,k([0,1],d)));for(var f=1,p=!0;f<n.length;f+=1){var h=n[f],m=E(h,0,1),y=E(h,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new a("property names with quotes must have matching quotes");if("constructor"!==h&&p||(l=!0),r+="."+h,w(v,c="%"+r+"%"))u=v[c];else if(null!=u){if(!(h in u)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(s&&f+1>=n.length){var b=s(u,h);u=(p=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:u[h]}else p=w(u,h),u=u[h];p&&!l&&(v[c]=u)}}return u}},58622:function(e,t,n){"use strict";var r,a=n(28554),i=n(23631),o=n(42473),c=n(17642),s=n(77784),u=function(e){o(!1,e)},l=String.prototype.replace,d=String.prototype.split,f="||||",p=function(e){var t=e%100,n=t%10;return 11!==t&&1===n?0:2<=n&&n<=4&&!(t>=12&&t<=14)?1:2},h={pluralTypes:{arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:p,chinese:function(){return 0},croatian:p,french:function(e){return+(e>=2)},german:function(e){return+(1!==e)},russian:p,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return+(e%10!=1||e%100==11)},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3},romanian:function(e){if(1===e)return 0;var t=e%100;return 0===e||t>=2&&t<=19?1:2}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"]}};function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var v=(r={},function(e,t){var n,o,c,s=r[t];return s&&!e.pluralTypes[s]&&(s=null,r[t]=s),!s&&(s=(n=e.pluralTypeToLanguages,o={},a(i(n),function(e){var t=e[0];a(e[1],function(e){o[e]=t})}),c=o)[t]||c[d.call(t,/-/,1)[0]]||c.en)&&(r[t]=s),s}),y=/%\{(.*?)\}/g;function b(e,t,n,r,a,i){if("string"!=typeof e)throw TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var o=e,u=i||l,p="number"==typeof t?{smart_count:t}:t;if(null!=p.smart_count&&e){var m,b=a||h,g=d.call(e,f),x=v(b,n||"en");o=s(g[m=p.smart_count,b.pluralTypes[x](m)]||g[0])}return u.call(o,r||y,function(e,t){return c(p,t)&&null!=p[t]?p[t]:e})}function g(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?b:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||u,this.replaceImplementation=t.replace||l,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if(t===f||n===f)throw RangeError('"'+f+'" token is reserved for pluralization');return RegExp(m(t)+"(.*?)"+m(n),"g")}(t.interpolation),this.pluralRules=t.pluralRules||h}g.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},g.prototype.extend=function(e,t){a(i(e||{}),function(e){var n=e[0],r=e[1],a=t?t+"."+n:n;"object"==typeof r?this.extend(r,a):this.phrases[a]=r},this)},g.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:a(i(e||{}),function(e){var n=e[0],r=e[1],a=t?t+"."+n:n;"object"==typeof r?this.unset(r,a):delete this.phrases[a]},this)},g.prototype.clear=function(){this.phrases={}},g.prototype.replace=function(e){this.clear(),this.extend(e)},g.prototype.t=function(e,t){var n,r,a=null==t?{}:t;return"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof a._?n=a._:this.onMissingKey?r=(0,this.onMissingKey)(e,a,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation):(this.warn('Missing translation for key: "'+e+'"'),r=e),"string"==typeof n&&(r=b(n,a,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),r},g.prototype.has=function(e){return c(this.phrases,e)},g.transformPhrase=function(e,t,n){return b(e,t,n)},e.exports=g},83774:function(e,t,n){var r="function"==typeof Map&&Map.prototype,a=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=r&&a&&"function"==typeof a.get?a.get:null,o=r&&Map.prototype.forEach,c="function"==typeof Set&&Set.prototype,s=Object.getOwnPropertyDescriptor&&c?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=c&&s&&"function"==typeof s.get?s.get:null,l=c&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,m=Object.prototype.toString,v=Function.prototype.toString,y=String.prototype.match,b=String.prototype.slice,g=String.prototype.replace,x=String.prototype.toUpperCase,w=String.prototype.toLowerCase,k=RegExp.prototype.test,O=Array.prototype.concat,_=Array.prototype.join,E=Array.prototype.slice,S=Math.floor,C="function"==typeof BigInt?BigInt.prototype.valueOf:null,P=Object.getOwnPropertySymbols,j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,A="function"==typeof Symbol&&"object"==typeof Symbol.iterator,D="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===A?"object":"symbol")?Symbol.toStringTag:null,T=Object.prototype.propertyIsEnumerable,M=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function R(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||k.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-S(-e):S(e);if(r!==e){var a=String(r),i=b.call(t,a.length+1);return g.call(a,n,"$&_")+"."+g.call(g.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return g.call(t,n,"$&_")}var I=n(14061),N=I.custom,F=U(N)?N:null;function z(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function L(e){return"[object Array]"===W(e)&&(!D||!("object"==typeof e&&D in e))}function B(e){return"[object RegExp]"===W(e)&&(!D||!("object"==typeof e&&D in e))}function U(e){if(A)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!j)return!1;try{return j.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,r,a){var c,s,m,x,k,S=n||{};if(G(S,"quoteStyle")&&"single"!==S.quoteStyle&&"double"!==S.quoteStyle)throw TypeError('option "quoteStyle" must be "single" or "double"');if(G(S,"maxStringLength")&&("number"==typeof S.maxStringLength?S.maxStringLength<0&&S.maxStringLength!==1/0:null!==S.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var P=!G(S,"customInspect")||S.customInspect;if("boolean"!=typeof P&&"symbol"!==P)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(S,"indent")&&null!==S.indent&&"	"!==S.indent&&!(parseInt(S.indent,10)===S.indent&&S.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(S,"numericSeparator")&&"boolean"!=typeof S.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var N=S.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength;return e(b.call(t,0,n.maxStringLength),n)+("... "+r)+" more character"+(r>1?"s":"")}return z(g.call(g.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,V),"single",n)}(t,S);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var H=String(t);return N?R(t,H):H}if("bigint"==typeof t){var $=String(t)+"n";return N?R(t,$):$}var X=void 0===S.depth?5:S.depth;if(void 0===r&&(r=0),r>=X&&X>0&&"object"==typeof t)return L(t)?"[Array]":"[Object]";var ee=function(e,t){var n;if("	"===e.indent)n="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;n=_.call(Array(e.indent+1)," ")}return{base:n,prev:_.call(Array(t+1),n)}}(S,r);if(void 0===a)a=[];else if(q(a,t)>=0)return"[Circular]";function et(t,n,i){if(n&&(a=E.call(a)).push(n),i){var o={depth:S.depth};return G(S,"quoteStyle")&&(o.quoteStyle=S.quoteStyle),e(t,o,r+1,a)}return e(t,S,r+1,a)}if("function"==typeof t&&!B(t)){var en=function(e){if(e.name)return e.name;var t=y.call(v.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),er=K(t,et);return"[Function"+(en?": "+en:" (anonymous)")+"]"+(er.length>0?" { "+_.call(er,", ")+" }":"")}if(U(t)){var ea=A?g.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):j.call(t);return"object"!=typeof t||A?ea:Q(ea)}if((ei=t)&&"object"==typeof ei&&("undefined"!=typeof HTMLElement&&ei instanceof HTMLElement||"string"==typeof ei.nodeName&&"function"==typeof ei.getAttribute)){for(var ei,eo,ec="<"+w.call(String(t.nodeName)),es=t.attributes||[],eu=0;eu<es.length;eu++){ec+=" "+es[eu].name+"="+z((eo=es[eu].value,g.call(String(eo),/"/g,"&quot;")),"double",S)}return ec+=">",t.childNodes&&t.childNodes.length&&(ec+="..."),ec+="</"+w.call(String(t.nodeName))+">"}if(L(t)){if(0===t.length)return"[]";var el=K(t,et);return ee&&!function(e){for(var t=0;t<e.length;t++)if(q(e[t],"\n")>=0)return!1;return!0}(el)?"["+J(el,ee)+"]":"[ "+_.call(el,", ")+" ]"}if("[object Error]"===W(c=t)&&(!D||!("object"==typeof c&&D in c))){var ed=K(t,et);return"cause"in Error.prototype||!("cause"in t)||T.call(t,"cause")?0===ed.length?"["+String(t)+"]":"{ ["+String(t)+"] "+_.call(ed,", ")+" }":"{ ["+String(t)+"] "+_.call(O.call("[cause]: "+et(t.cause),ed),", ")+" }"}if("object"==typeof t&&P){if(F&&"function"==typeof t[F]&&I)return I(t,{depth:X-r});if("symbol"!==P&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ef=[];return o&&o.call(t,function(e,n){ef.push(et(n,t,!0)+" => "+et(e,t))}),Y("Map",i.call(t),ef,ee)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ep=[];return l&&l.call(t,function(e){ep.push(et(e,t))}),Y("Set",u.call(t),ep,ee)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Z("WeakMap");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Z("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Z("WeakRef");if("[object Number]"===W(s=t)&&(!D||!("object"==typeof s&&D in s)))return Q(et(Number(t)));if(function(e){if(!e||"object"!=typeof e||!C)return!1;try{return C.call(e),!0}catch(e){}return!1}(t))return Q(et(C.call(t)));if("[object Boolean]"===W(m=t)&&(!D||!("object"==typeof m&&D in m)))return Q(h.call(t));if("[object String]"===W(x=t)&&(!D||!("object"==typeof x&&D in x)))return Q(et(String(t)));if(!("[object Date]"===W(k=t)&&(!D||!("object"==typeof k&&D in k)))&&!B(t)){var eh=K(t,et),em=M?M(t)===Object.prototype:t instanceof Object||t.constructor===Object,ev=t instanceof Object?"":"null prototype",ey=!em&&D&&Object(t)===t&&D in t?b.call(W(t),8,-1):ev?"Object":"",eb=(em||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ey||ev?"["+_.call(O.call([],ey||[],ev||[]),": ")+"] ":"");return 0===eh.length?eb+"{}":ee?eb+"{"+J(eh,ee)+"}":eb+"{ "+_.call(eh,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return H.call(e,t)}function W(e){return m.call(e)}function q(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}function V(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+x.call(t.toString(16))}function Q(e){return"Object("+e+")"}function Z(e){return e+" { ? }"}function Y(e,t,n,r){return e+" ("+t+") {"+(r?J(n,r):_.call(n,", "))+"}"}function J(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+_.call(e,","+n)+"\n"+t.prev}function K(e,t){var n,r=L(e),a=[];if(r){a.length=e.length;for(var i=0;i<e.length;i++)a[i]=G(e,i)?t(e[i],e):""}var o="function"==typeof P?P(e):[];if(A){n={};for(var c=0;c<o.length;c++)n["$"+o[c]]=o[c]}for(var s in e){if(G(e,s)&&(!r||String(Number(s))!==s||!(s<e.length)))!(A&&n["$"+s]instanceof Symbol)&&(k.call(/[^\w$]/,s)?a.push(t(s,e)+": "+t(e[s],e)):a.push(s+": "+t(e[s],e)))}if("function"==typeof P)for(var u=0;u<o.length;u++)T.call(e,o[u])&&a.push("["+t(o[u])+"]: "+t(e[o[u]],e));return a}},78706:function(e,t,n){"use strict";var r=n(80891),a=n(21924),i=a("Object.prototype.propertyIsEnumerable"),o=a("Array.prototype.push");e.exports=function(e){var t=r(e),n=[];for(var a in t)i(t,a)&&o(n,[a,t[a]]);return n}},23631:function(e,t,n){"use strict";var r=n(83739),a=n(55559),i=n(78706),o=n(75242),c=n(91693),s=a(o(),Object);r(s,{getPolyfill:o,implementation:i,shim:c}),e.exports=s},75242:function(e,t,n){"use strict";var r=n(78706);e.exports=function(){return"function"==typeof Object.entries?Object.entries:r}},91693:function(e,t,n){"use strict";var r=n(75242),a=n(83739);e.exports=function(){var e=r();return a(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e}},67154:function(e,t,n){"use strict";var r=n(80891),a=n(7681),i=n(21924)("String.prototype.replace"),o=/^\s$/.test("᠎"),c=o?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,s=o?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){return i(i(a(r(this)),c,""),s,"")}},77784:function(e,t,n){"use strict";var r=n(55559),a=n(83739),i=n(80891),o=n(67154),c=n(19343),s=n(24101),u=r(c()),l=function(e){return i(e),u(e)};a(l,{getPolyfill:c,implementation:o,shim:s}),e.exports=l},19343:function(e,t,n){"use strict";var r=n(67154);e.exports=function(){return String.prototype.trim&&"​"==="​".trim()&&"᠎"==="᠎".trim()&&"_᠎"==="_᠎".trim()&&"᠎_"==="᠎_".trim()?String.prototype.trim:r}},24101:function(e,t,n){"use strict";var r=n(83739),a=n(19343);e.exports=function(){var e=a();return r(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}},89197:function(e,t,n){"use strict";n.d(t,{KJ:()=>g,_:()=>x,hk:()=>b,ww:()=>j,yM:()=>w});var r,a,i,o,c,s,u,l,d=n(48079),f=n(91888),p=n(55552),h=n.n(p),m=n(74915),v=n(67348);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.filter(Boolean).map(function(e){var n=e(t),r=n.name||e.name;return(0,f.Z)({},r,n)})},g=function(e){return Object.keys(e)[0]},x=function(e,t){var n="";return e.filter(function(e){var n=Object.values(e)[0];return!n.displayCondition||n.displayCondition(t)}).map(function(e){var t=g(e);return n===t?(n=t,null):(n=t,e)}).filter(Boolean).filter(function(e,t,n){return"hr"!==g(e)&&"divider"!==g(e)||t!==n.length-1})},w=(r=(0,d.Z)(h().mark(function e(t){var n;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FileReader).readAsDataURL(t),e.abrupt("return",new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(e){t(e)}}));case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),k=function(e){var t=Math.max(e.height,e.width),n=1;return 3840<t&&(n=3840/t),n},O=(a=(0,d.Z)(h().mark(function e(t){var n;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.base64,e.abrupt("return",new Promise(function(e,t){var r=new Image;r.src=n,r.onerror=t,r.onload=function(){var t=document.createElement("canvas"),n=k(r),a=n*r.width,i=n*r.height,o=a>=1920||i>=1920?.35:.75;t.width=a,t.height=i,t.getContext("2d").drawImage(r,0,0,a,i),e(t.toDataURL("image/jpeg",o))}}));case 2:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),_=(i=(0,d.Z)(h().mark(function e(t){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onerror=n,r.onload=function(t){return e(t.target.result)},r.readAsDataURL(t)}));case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),E=(o=(0,d.Z)(h().mark(function e(t,n){var r,a,i,o,c,s,u;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(n);case 2:return r=e.sent,e.next=5,O({base64:r});case 5:return a=e.sent,e.next=8,t.embedJpg(a);case 8:i=e.sent,s=(c=(o=t.addPage([i.width,i.height])).getSize()).width,u=c.height,o.drawImage(i,{x:s/2-i.width/2,y:u/2-i.height/2,width:i.width,height:i.height});case 12:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)}),S=(c=(0,d.Z)(h().mark(function e(t){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("arrayBuffer"in t)){e.next=4;break}return e.next=3,t.arrayBuffer();case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onerror=n,r.onload=function(t){return e(new Uint8Array(t.target.result))},r.readAsArrayBuffer(t)}));case 5:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)}),C=(s=(0,d.Z)(h().mark(function e(t,n){var r,a;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n);case 2:return r=e.sent,e.next=5,m.PDFDocument.load(r);case 5:return a=e.sent,e.next=8,t.copyPages(a,a.getPageIndices());case 8:e.sent.forEach(function(e){return t.addPage(e)});case 10:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)}),P=(u=(0,d.Z)(h().mark(function e(t,n){var r;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("application/pdf"!==n.type){e.next=5;break}return e.next=3,C(t,n);case 3:e.next=7;break;case 5:return e.next=7,E(t,n);case 7:return e.next=9,t.save();case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}},e)})),function(e,t){return u.apply(this,arguments)}),j=(l=(0,d.Z)(h().mark(function e(t,n){var r,a,i,o,c,s;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.PDFDocument.create();case 2:r=e.sent,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(n),e.prev=4,a.s();case 6:if((i=a.n()).done){e.next=15;break}return o=i.value,e.next=10,(0,v.fetchBlobFileById)(t,o._id);case 10:return c=e.sent,e.next=13,P(r,c);case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.next=25,r.save();case 25:return s=new Blob([new Uint8Array(e.sent)],{type:"application/pdf"}),e.abrupt("return",s);case 29:case"end":return e.stop()}},e,null,[[4,17,20,23]])})),function(e,t){return l.apply(this,arguments)})},39614:function(e,t,n){"use strict";n.r(t),n.d(t,{makeActions:()=>r.hk,emailTo:()=>j,viewInDrive:()=>ea,removeFromFavorites:()=>X,viewInContacts:()=>et,download:()=>B,modify:()=>O,divider:()=>o,addToFavorites:()=>Q,smsTo:()=>E,editAttribute:()=>el,call:()=>C,print:()=>F,others:()=>ef,copyToClipboard:()=>ec});var r=n(89197),a=n(67294),i=n(20958),o=function(){return{name:"divider",Component:(0,a.forwardRef)(function(e,t){return a.createElement(i.default,{className:"u-mv-half",ref:t})})}},c=n(51894),s=n(16396),u=n(96122),l=n(29662),d=n(79233),f=function(e){var t=document.querySelector("[role=application]"),n={dataset:{cozy:JSON.stringify({locale:localStorage.getItem("lang")||e})}},r=JSON.parse((t||n).dataset.cozy).locale;return/^\{\{\..*\}\}$/.test(r)?e:r},p=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.DEFAULT_LANG,a=e||f(r),i=(0,d.QE)(a,t,n,r),o=(0,l.NW)(a);return{t:i.t.bind(i),f:o,lang:a}},h=n(41256),m={en:{viewInContacts:"View in Cozy Contacts",viewInDrive:"Open",modify:"Modify",emailTo:"Send an email",smsTo:"Send a message",print:"Print",download:"Download",favorites:{add:{label:"Add to favorites",success:"%{filename} has been added to favorites |||| These items have been added to favorites"},remove:{label:"Remove from favorites",success:"%{filename} has been removed from favorites |||| These items have been removed from favorites"},error:"An error occurred, please try again."},others:"Others",editAttribute:"Edit attribute",copyToClipboard:{copy:"Copy",success:"Copied to clipboard",error:"Cannot copy to clipboard"},call:"Call"},fr:{viewInContacts:"Voir dans Cozy Contacts",viewInDrive:"Ouvrir",modify:"Modifier",emailTo:"Envoyer un e-mail",smsTo:"Envoyer un message",print:"Imprimer",download:"T\xe9l\xe9charger",favorites:{add:{label:"Ajouter aux favoris",success:"%{filename} a \xe9t\xe9 ajout\xe9 aux favoris |||| Ces \xe9l\xe9ments ont \xe9t\xe9 ajout\xe9s aux favoris"},remove:{label:"Retirer des favoris",success:"%{filename} a \xe9t\xe9 retir\xe9 des favoris |||| Ces \xe9l\xe9ments ont \xe9t\xe9 retir\xe9s des favoris"},error:"Une erreur est survenue, merci de r\xe9essayer."},others:"Autres",editAttribute:"Editer l'attribut",copyToClipboard:{copy:"Copier",success:"Copi\xe9 dans le presse-papier",error:"Impossible de copier dans le presse-papier"},call:"Appeler"}},v=function(){return p(void 0,function(e){return m[e]})};(0,h.Z)(m);var y=n(32419),b=n(92951);let g=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M.889 16a.86.86 0 01-.633-.256.86.86 0 01-.256-.633v-2.155a1.755 1.755 0 01.511-1.245L11.733.511c.178-.163.374-.289.59-.378a1.836 1.836 0 011.366 0c.222.09.415.223.578.4l1.222 1.245c.178.163.307.355.389.578a1.925 1.925 0 010 1.344 1.666 1.666 0 01-.39.589l-11.2 11.2A1.755 1.755 0 013.045 16H.89zM12.978 4.267l1.244-1.245-1.244-1.244-1.245 1.244 1.245 1.245z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("defs",null,a.createElement("path",{id:"pen_svg__a",d:"M9.5 3.5l3 3L3.04 16H0v-2.97L9.5 3.5zM14.91.92l.18.17c.77.78.78 2.05 0 2.84L14.03 5 11 2 12.09.91a2 2 0 012.82 0z"})),a.createElement("use",{fillRule:"evenodd",xlinkHref:"#pen_svg__a"}))};var x=n(96105),w=n(11075),k=n(95587),O=function(){var e=(0,v().t)("modify");return{name:"modify",icon:g,label:e,action:function(e,t){var n=t.client,r=e[0]._id,a=(0,s.generateWebLink)({slug:"contacts",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"/".concat(r,"/edit")});window.open(a,"_blank")},Component:(0,a.forwardRef)(function(t,n){return a.createElement(k.default,(0,c.Z)({ref:n},t),a.createElement(x.default,null,a.createElement(y.default,{icon:g})),a.createElement(w.default,{primary:e}))})}};let _=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 20 20"},e),a.createElement("path",{d:"M2 2h16v12H3.17L2 15.17V2zm0-2C.9 0 .01.9.01 2L0 20l4-4h14c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2H2zm2 10h8v2H4v-2zm0-3h12v2H4V7zm0-3h12v2H4V4z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M0 .999A.997.997 0 011 0h14a1 1 0 011 .999V12c0 .552-.453.999-.997.999H8l-6 3v-3H1A1 1 0 010 12V1zM4 5c0 .556.446 1 .997 1h6.006c.544 0 .997-.448.997-1 0-.556-.446-1-.997-1H4.997C4.453 4 4 4.448 4 5zm0 3c0 .556.444 1 .99 1h4.02A1 1 0 0010 8c0-.556-.444-1-.99-1H4.99A1 1 0 004 8z"}))};var E=function(){var e=(0,v().t)("smsTo");return{name:"smsTo",icon:_,label:e,action:function(e){var t,n,r,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(n=t.phone)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.number;a&&window.open("sms:".concat(a),"_self")},Component:(0,a.forwardRef)(function(t,n){return a.createElement(k.default,(0,c.Z)({},t,{ref:n}),a.createElement(x.default,null,a.createElement(y.default,{icon:_})),a.createElement(w.default,{primary:e}))})}};let S=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M15.067 16c-1.852 0-3.682-.404-5.49-1.211-1.807-.807-3.451-1.952-4.933-3.433C3.163 9.874 2.02 8.23 1.211 6.422.404 4.615 0 2.785 0 .933 0 .667.089.444.267.267A.905.905 0 01.933 0h3.6c.208 0 .393.07.556.211.163.14.26.308.289.5l.578 3.111c.03.237.022.437-.023.6a.935.935 0 01-.244.422L3.533 7.022a10.75 10.75 0 001.056 1.59c.407.51.855 1.003 1.344 1.477.46.46.941.885 1.445 1.278.503.392 1.037.751 1.6 1.077l2.089-2.088c.133-.134.307-.234.522-.3a1.43 1.43 0 01.633-.056l3.067.622c.207.06.378.167.511.322.133.156.2.33.2.523v3.6a.904.904 0 01-.267.666.904.904 0 01-.666.267z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M5.88 4.655a1.68 1.68 0 00.001-2.377L4.097.492a1.685 1.685 0 00-2.38 0l-.98.979A2.521 2.521 0 00.42 4.646 39.038 39.038 0 0011.356 15.58c.999.662 2.328.53 3.175-.316l.979-.979a1.681 1.681 0 000-2.379l-1.785-1.784a1.679 1.679 0 00-2.379 0l-.594.593A40.017 40.017 0 015.285 5.25l.595-.595z"}))};var C=function(){var e=(0,v().t)("call");return{name:"call",icon:S,label:e,action:function(e){var t,n,r,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(n=t.phone)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.number;a&&window.open("tel:".concat(a),"_self")},Component:(0,a.forwardRef)(function(t,n){return a.createElement(k.default,(0,c.Z)({},t,{ref:n}),a.createElement(x.default,null,a.createElement(y.default,{icon:S})),a.createElement(w.default,{primary:e}))})}},P=n(75410),j=function(){var e=v().t,t=P.default,n=e("emailTo");return{name:"emailTo",icon:t,label:n,action:function(e){var t,n,r,a=null==e?void 0:null===(t=e[0])||void 0===t?void 0:null===(n=t.email)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.address;a&&window.open("mailto:".concat(a),"_self")},Component:(0,a.forwardRef)(function(e,r){return a.createElement(k.default,(0,c.Z)({},e,{ref:r}),a.createElement(x.default,null,a.createElement(y.default,{icon:t})),a.createElement(w.default,{primary:n}))})}},A=n(48079),D=n(55552),T=n.n(D),M=n(67348),R=n(33918),I=n.n(R);let N=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 15"},e),a.createElement("path",{d:"M13.6 4h-.8V0H3.2v4h-.8A2.397 2.397 0 000 6.4v4.8h3.2v3.2h9.6v-3.2H16V6.4C16 5.072 14.928 4 13.6 4zM4.8 1.6h6.4V4H4.8V1.6zm6.4 11.2H4.8V9.6h6.4v3.2zm1.6-3.2V8H3.2v1.6H1.6V6.4c0-.44.36-.8.8-.8h11.2c.44 0 .8.36.8.8v3.2h-1.6z"}),a.createElement("path",{d:"M12.8 7.6a.8.8 0 100-1.6.8.8 0 000 1.6z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M13 12v3c0 .552-.456 1-.995 1h-8.01A.995.995 0 013 15v-3H1c-.552 0-1-.438-1-1.003V6.003A1 1 0 011 5h14c.552 0 1 .438 1 1.003v4.994A1 1 0 0115 12h-2zM3 1.01C3 .451 3.456 0 3.995 0h8.01c.55 0 .995.443.995 1.01V4H3V1.01zM5 10v4h6v-4H5zm9-2a1 1 0 100-2 1 1 0 000 2z"}))};var F=function(){var e,t=(0,v().t)("print");return{name:"print",icon:N,label:t,disabled:function(e){return 0===e.length},displayCondition:function(e){return e.every(function(e){return(0,M.isFile)(e)})},action:(e=(0,A.Z)(T().mark(function e(t,n){var a,i,o,c,s,u,l,d;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.client,i=n.webviewIntent,o=1===t.length,c=t[0],e.prev=3,!i){e.next=19;break}if(!o){e.next=11;break}return e.next=8,(0,M.fetchBlobFileById)(a,c._id);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,(0,r.ww)(a,t);case 13:e.t0=e.sent;case 14:return s=e.t0,e.next=17,(0,r.yM)(s);case 17:return u=e.sent,e.abrupt("return",i.call("print",u));case 19:if(l="",!o){e.next=26;break}return e.next=23,a.collection("io.cozy.files").getDownloadLinkById(c._id,c.name);case 23:l=e.sent,e.next=30;break;case 26:return e.next=28,(0,r.ww)(a,t);case 28:d=e.sent,l=URL.createObjectURL(d);case 30:setTimeout(function(){window.open(l,"_blank")}),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(3),I().error("Error trying to print document ".concat(i?"inside flagship appp":"outside flagship app",": ").concat(JSON.stringify(e.t1)));case 36:case"end":return e.stop()}},e,null,[[3,33]])})),function(t,n){return e.apply(this,arguments)}),Component:(0,a.forwardRef)(function(e,n){return a.createElement(k.default,(0,c.Z)({},e,{ref:n}),a.createElement(x.default,null,a.createElement(y.default,{icon:N})),a.createElement(w.default,{primary:t}))})}};let z=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M14 11v3H2v-3H0v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4l-1.41-1.41L9 8.17V0H7v8.17L4.41 5.59 3 7l5 5 5-5z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M7 9.586L5.707 8.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L9 9.586V2a1 1 0 10-2 0v7.586zM1 14h14a1 1 0 110 2H1a1 1 0 110-2z"}))};var L=function(e,t){var n=(0,a.forwardRef)(function(n,r){return a.createElement(k.default,(0,c.Z)({},n,{ref:r}),a.createElement(x.default,null,a.createElement(y.default,{icon:t})),a.createElement(w.default,{primary:e}))});return n.displayName="download",n},B=function(e){var t=e.encryptedUrl,n=(0,v().t)("download");return{name:"download",icon:z,label:n,Component:L(n,z),action:function(e,n){var r=n.client,a=n.webviewIntent;return(0,M.downloadFile)({client:r,file:e[0],url:t,webviewIntent:a})}}},U=n(91888);let H=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 17"},e),a.createElement("path",{d:"M16 6.692l-5.752-.496L8 .9 5.752 6.204 0 6.692l4.368 3.784L3.056 16.1 8 13.116l4.944 2.984-1.304-5.624L16 6.692zM8 11.62l-3.008 1.816.8-3.424-2.656-2.304 3.504-.304L8 4.18l1.368 3.232 3.504.304-2.656 2.304.8 3.424L8 11.62z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.305l2.71 1.425-.517-3.018 2.192-2.137-3.03-.44L8 3.389 6.645 6.135l-3.03.44 2.193 2.137-.518 3.018L8 10.305zm-4.702 4.167l.898-5.236L.392 5.528l5.257-.764L8 0l2.351 4.764 5.257.764-3.804 3.708.898 5.236L8 12l-4.702 2.472z"}))};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){(0,U.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e,t){var n=(0,a.forwardRef)(function(n,r){return a.createElement(k.default,(0,c.Z)({},n,{ref:r}),a.createElement(x.default,null,a.createElement(y.default,{icon:t})),a.createElement(w.default,{primary:e}))});return n.displayName="addToFavorites",n},Q=function(e){var t,n=e.showAlert,r=v().t,a=r("favorites.add.label");return{name:"addToFavorites",icon:H,label:a,displayCondition:function(e){return e.length>0&&e.every(function(e){var t;return!(null!==(t=e.cozyMetadata)&&void 0!==t&&t.favorite)})},Component:V(a,H),action:(t=(0,A.Z)(T().mark(function e(t,a){var i,o,c,s;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=a.client,e.prev=1,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return q(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(t),e.prev=3,o.s();case 5:if((c=o.n()).done){e.next=11;break}return s=c.value,e.next=9,i.save(W(W({},s),{},{cozyMetadata:W(W({},s.cozyMetadata),{},{favorite:!0})}));case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:n({message:r("favorites.add.success",{filename:(0,M.splitFilename)(t[0]).filename,smart_count:t.length}),severity:"success"}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),n({message:r("favorites.error"),severity:"error"});case 26:case"end":return e.stop()}},e,null,[[1,23],[3,13,16,19]])})),function(e,n){return t.apply(this,arguments)})}};let Z=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 12.216l4.944 2.984-1.312-5.624L16 5.792l-5.752-.488L8 0 5.752 5.304 0 5.792l4.368 3.784L3.056 15.2 8 12.216z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M8 12l-4.702 2.472.898-5.236L.392 5.528l5.257-.764L8 0l2.351 4.764 5.257.764-3.804 3.708.898 5.236z"}))};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){(0,U.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e,t){var n=(0,a.forwardRef)(function(n,r){return a.createElement(k.default,(0,c.Z)({},n,{ref:r}),a.createElement(x.default,null,a.createElement(y.default,{icon:t})),a.createElement(w.default,{primary:e}))});return n.displayName="removeFromFavorites",n},X=function(e){var t,n=e.showAlert,r=v().t,a=r("favorites.remove.label");return{name:"removeFromFavorites",icon:Z,label:a,displayCondition:function(e){return e.length>0&&e.every(function(e){var t;return null===(t=e.cozyMetadata)||void 0===t?void 0:t.favorite})},Component:$(a,Z),action:(t=(0,A.Z)(T().mark(function e(t,a){var i,o,c,s;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=a.client,e.prev=1,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return K(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}}(e))){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(t),e.prev=3,o.s();case 5:if((c=o.n()).done){e.next=11;break}return s=c.value,e.next=9,i.save(J(J({},s),{},{cozyMetadata:J(J({},s.cozyMetadata),{},{favorite:!1})}));case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:n({message:r("favorites.success.remove",{filename:(0,M.splitFilename)(t[0]).filename,smart_count:t.length}),severity:"success"}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),n({message:r("favorites.error"),severity:"error"});case 26:case"end":return e.stop()}},e,null,[[1,23],[3,13,16,19]])})),function(e,n){return t.apply(this,arguments)})}};let ee=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 14"},e),a.createElement("path",{d:"M14.546.452H1.455C.655.452 0 1.106 0 1.906v2.902h1.455V1.892h13.09v10.203H1.456V9.172H0v2.916c0 .8.655 1.44 1.455 1.44h13.09c.8 0 1.455-.64 1.455-1.44V1.906C16 1.1 15.345.452 14.546.452zM7.273 9.899l2.909-2.91-2.91-2.908v2.182H0v1.454h7.273V9.9zM14.546.452H1.455C.655.452 0 1.106 0 1.906v2.902h1.455V1.892h13.09v10.203H1.456V9.172H0v2.916c0 .8.655 1.44 1.455 1.44h13.09c.8 0 1.455-.64 1.455-1.44V1.906C16 1.1 15.345.452 14.546.452zM7.273 9.899l2.909-2.91-2.91-2.908v2.182H0v1.454h7.273V9.9z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 2H2v3H0V2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H2a2 2 0 01-2-2v-3h2v3h12V2zM7.293 4.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L8.586 9H1a1 1 0 110-2h7.586L7.293 5.707a1 1 0 010-1.414z"}))};var et=function(){var e=(0,v().t)("viewInContacts");return{name:"viewInContacts",icon:ee,label:e,action:function(e,t){var n=t.client,r=e[0]._id,a=(0,s.generateWebLink)({slug:"contacts",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"/".concat(r)});window.open(a,"_blank")},Component:(0,a.forwardRef)(function(t,n){return a.createElement(k.default,(0,c.Z)({ref:n},t),a.createElement(x.default,null,a.createElement(y.default,{icon:ee})),a.createElement(w.default,{primary:e}))})}};let en=function(e){return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M0 13V3a2 2 0 012-2h3.172a2 2 0 011.414.586l.828.828A2 2 0 008.828 3H12a2 2 0 012 2H3.5a.5.5 0 00-.474.342l-2 6a.5.5 0 10.948.316L3.86 6h11.142a1 1 0 01.952 1.304l-2.01 6.304A2 2 0 0112.039 15H2a2 2 0 01-2-2z"}))};var er=function(e,t){var n=(0,a.forwardRef)(function(n,r){return a.createElement(k.default,(0,c.Z)({},n,{ref:r}),a.createElement(x.default,null,a.createElement(y.default,{icon:t})),a.createElement(w.default,{primary:e}))});return n.displayName="viewInDrive",n},ea=function(){var e=(0,v().t)("viewInDrive");return{name:"viewInDrive",icon:en,label:e,Component:er(e,en),action:function(e,t){var n=t.client,r=e[0].dir_id,a=(0,s.generateWebLink)({slug:"drive",cozyUrl:n.getStackClient().uri,subDomainType:n.getInstanceOptions().subdomain,pathname:"/",hash:"folder/".concat(r)});window.open(a,"_blank")}}};let ei=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 14 16"},e),a.createElement("path",{d:"M10.182 0H1.455C.655 0 0 .655 0 1.455v10.181h1.455V1.455h8.727V0zm-.727 2.91H4.364c-.8 0-1.448.654-1.448 1.454L2.91 14.545c0 .8.647 1.455 1.447 1.455h8.008c.8 0 1.454-.655 1.454-1.454V7.273L9.455 2.909zM4.364 14.545V4.364h4.363V8h3.637v6.546h-8z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 0a2 2 0 012 2v8a2 2 0 01-2 2h-2v2a2 2 0 01-2 2H3a2 2 0 01-2-2V6a2 2 0 012-2h2V2a2 2 0 012-2h7zm-4 6H3v8h7V6zm4-4H7v2h3a2 2 0 012 2v4h2V2z"}))};var eo=function(e,t){var n=(0,a.forwardRef)(function(n,r){return a.createElement(k.default,(0,c.Z)({},n,{ref:r}),a.createElement(x.default,null,a.createElement(y.default,{icon:t})),a.createElement(w.default,{primary:e}))});return n.displayName="copyToClipboard",n},ec=function(){var e,t=v().t,n=t("copyToClipboard.copy");return{name:"copyToClipboard",icon:ei,label:n,Component:eo(n,ei),action:(e=(0,A.Z)(T().mark(function e(n,r){var a,i;return T().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.showAlert,i=r.copyValue){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,navigator.clipboard.writeText(i);case 6:a({message:t("copyToClipboard.success"),severity:"success",variant:"filled"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a({message:t("copyToClipboard.error"),severity:"error",variant:"filled"});case 12:case"end":return e.stop()}},e,null,[[3,9]])})),function(t,n){return e.apply(this,arguments)})}};let es=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 14"},e),a.createElement("path",{d:"M0 3.53h9.706v1.764H0V3.53zm0-1.765h9.706V0H0v1.765zm0 7.059h6.177V7.059H0v1.765zm13.245-2.762l.626-.626a.879.879 0 011.244 0l.627.626c.344.344.344.9 0 1.244l-.627.627-1.87-1.871zm-.627.627l-4.676 4.676v1.87h1.87L14.49 8.56l-1.87-1.87z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 3h7.172l2-2H2a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2V6.828l-2 2V14H2V3zm3 7v2h2l7.146-7.146-2-2L5 10zm10.5-6.5l-.646.646-2-2L13.5 1.5a1.414 1.414 0 112 2z"}))};var eu=function(e,t){var n=(0,a.forwardRef)(function(n,r){return a.createElement(k.default,(0,c.Z)({},n,{ref:r}),a.createElement(x.default,null,a.createElement(y.default,{icon:t})),a.createElement(w.default,{primary:e}))});return n.displayName="editAttribute",n},el=function(){var e=(0,v().t)("editAttribute");return{name:"editAttribute",icon:es,label:e,Component:eu(e,es),action:function(e,t){(0,t.editAttributeCallback)(e)}}};let ed=function(e){if((0,b.isTwakeTheme)())return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 4"},e),a.createElement("path",{d:"M2 0C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM8 0C6.9 0 6 .9 6 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}));return a.createElement("svg",(0,c.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M2 10a2 2 0 100-4 2 2 0 000 4zm12 0a2 2 0 100-4 2 2 0 000 4zm-6 0a2 2 0 100-4 2 2 0 000 4z"}))};var ef=function(){return{name:"others",label:(0,v().t)("others"),icon:ed}}},47868:function(e,t,n){"use strict";n.r(t),n.d(t,{actionsItemsComponentPropTypes:()=>y,default:()=>b});var r=n(51894),a=n(91888),i=n(65691),o=n(45697),c=n.n(o),s=n(67294),u=n(16396),l=n(22960),d=n(89197),f=n(96122),p=["docs","actions","actionOptions","component","onClick"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=(0,s.forwardRef)(function(e,t){var n=e.docs,a=e.actions,o=e.actionOptions,c=e.component,h=e.onClick,v=(0,i.Z)(e,p),y=(0,u.useClient)(),b=(0,l.useWebviewIntent)(),g=(0,f.useI18n)().t;return(0,s.useMemo)(function(){return(0,d._)(a,n)},[a,n]).map(function(e,a){var i=(0,d.KJ)(e),u=Object.values(e)[0],l=u.Component,f=u.action,p=u.disabled;return s.createElement(null!=c?c:l,(0,r.Z)({},v,{ref:t,key:i+a,action:u,docs:n,autoFocus:0===a,disabled:null==p?void 0:p(n),onClick:function(e){null==f||f(n,m(m({client:y,t:g,webviewIntent:b},o),e)),null==h||h()}}))})});v.propTypes={docs:c().array,component:c().object,actions:c().array,actionOptions:c().object,onClick:c().func};var y={docs:c().array,action:c().object,autoFocus:c().bool,disabled:c().bool,onClick:c().func};let b=v},95587:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(51894),a=n(65691),i=n(94184),o=n.n(i),c=n(57557),s=n.n(c),u=n(45697),l=n.n(u),d=n(67294),f=n(10059),p=n(85639),h=["component"],m=(0,d.forwardRef)(function(e,t){var n=e.component,i=(0,a.Z)(e,h);return d.createElement(p.Z,(0,r.Z)({ref:t,component:f.default,componentElement:n,gutters:"disabled"},i))});m.displayName="MenuItem",m.propTypes=f.LitItemPropTypes;var v=["isListItem","className"],y=(0,d.forwardRef)(function(e,t){var n=e.isListItem,i=e.className,c=(0,a.Z)(e,v),u=n?f.default:m,l=s()(c,["docs","action","t","f","lang"]);return d.createElement(u,(0,r.Z)({},l,{className:o()(i,"cozyActionsItem"),ref:t,button:!0,ellipsis:!1}))});y.displayName="ActionsMenuItem",y.propTypes={className:l().string,isListItem:l().bool};let b=y},55527:function(e,t,n){"use strict";n.d(t,{Z:()=>eo});var r=n(51894),a=n(65691),i=n(45697),o=n.n(i),c=n(67294),s=n(14106),u=n(31573),l=n(91888),d=n(73637),f=n(76234),p=n(83942),h=n(89150),m=n(36499),v=n(99589),y=n(94184),b=n.n(y),g=n(41120),x=["isOver"],w=(0,g.Z)({isOver:{zIndex:"calc(var(--zIndex-modal-toolbar) + 1)"}}),k=function(e){var t=e.isOver,n=(0,a.Z)(e,x),i=w();return c.createElement(v.Z,(0,r.Z)({},n,{className:b()((0,l.Z)({},i.isOver,t),n.className)}))};k.propTypes={isOver:o().bool};let O=function(e){var t=e.showBackdrop,n=e.onClick,r=e.children,a=t?k:c.Fragment;return c.createElement(a,t?{open:t,onClick:n}:void 0,r)};var _=function(e){return parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-".concat(e)))},E=n(32202),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ref,n=e.height,r=1;return n?r=n:t&&t.current&&(r=t.current.offsetHeight),r+((0,E.ym)().statusBarHeight||0)+_("top")},C=function(e){var t=S(e);return window.innerHeight-t},P=function(e){var t=e.backdrop,n=e.maxHeight,r=e.mediumHeight,a=e.mediumHeightRatio,i=e.innerContentHeight,o=e.bottomSpacerHeight,c=e.offset,s=r||Math.round(n*a);return t?s<i?s<n?s:n:i>n?n:i+o:i<s?i+c:s>n?n:s},j=function(e){var t=e.isClosable,n=e.isOpenMin,r=e.headerRef,a=e.offset,i=e.actionButtonsHeight,o=e.actionButtonsBottomMargin;return t&&!n?0:r.current.offsetHeight+(void 0===a?0:a)+i+o+((0,E.ym)().navbarHeight||0)+_("bottom")},A=function(e){var t=e.snapIndex,n=e.peekHeights,r=e.isTopPosition,a=e.setIsTopPosition,i=n.length-1;t>i&&a(!0),t!==i||r||a(!0),t<i&&r&&a(!1)},D=function(e){var t=e.snapIndex,n=e.isBottomPosition,r=e.setIsBottomPosition;0!==t||n||r(!0),0!==t&&n&&r(!1)},T=function(e){var t=e.backdrop,n=e.setCurrentIndex,r=e.setIsTopPosition,a=e.setIsBottomPosition,i=e.handleClose;t&&(n(0),r(!1),a(!0),setTimeout(i,250))},M=function(e){var t=e.backdrop,n=e.maxHeight,r=e.innerContentHeight,a=e.toolbarProps,i=e.offset;return n-r<=0?i+S(a):t?i:n-r},R=function(e,t){return e?parseFloat(getComputedStyle(e).getPropertyValue(t)):0},I=n(9758),N=["spacing","tag"],F={"Stack--m":"styles__Stack--m___1tSpV","Stack--xs":"styles__Stack--xs___2R5lW","Stack--s":"styles__Stack--s___22WMg","Stack--l":"styles__Stack--l___3oxCJ","Stack--xl":"styles__Stack--xl___3qy-m","Stack--xxl":"styles__Stack--xxl___2KAsb"},z=function(e){var t=e.spacing,n=e.tag,i=(0,a.Z)(e,N);return c.createElement(n,(0,r.Z)({},i,{className:b()(i.className,t&&F["Stack--"+t])}))},L=o().oneOf(["xs","s","m","l","xl","xxl"]);z.propTypes={spacing:L},z.defaultProps={spacing:"m",tag:"div"};var B=n(10923),U=n(24060),H=["portalProps"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){(0,l.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q={renderSaferAnim:"styles__renderSaferAnim___2rNtc"},V=function(e){var t=e.showBackdrop,n=e.children;return t?c.createElement("div",{style:{position:"fixed",zIndex:"var(--zIndex-modal)",inset:0}},n):n},Q=function(e){var t=e.isTopPosition,n=e.hasToolbarProps,r=e.offset,a=e.renderSaferHeight,i=e.isBottomPosition;return{root:W({borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",transition:"border-radius 0.5s",boxShadow:"0 -0.5px 0px 0 rgba(0, 0, 0, 0.10), 0 -2px 2px 0 rgba(0, 0, 0, 0.02), 0 -4px 4px 0 rgba(0, 0, 0, 0.02), 0 -8px 8px 0 rgba(0, 0, 0, 0.02), 0 -16px 16px 0 rgba(0, 0, 0, 0.02)",backgroundColor:"var(--paperBackgroundColor)",zIndex:"var(--zIndex-modal)"},t&&{borderTopLeftRadius:0,borderTopRightRadius:0,boxShadow:n?"0 0 1px 0 rgba(0, 0, 0, 0.5)":"0 -1px 0 0 rgba(255, 255, 255, 1)"}),indicator:{width:"4rem",height:"0.25rem",borderRadius:"99px",backgroundColor:"var(--secondaryTextColor)"},stack:{backgroundColor:"var(--defaultBackgroundColor)"},bounceSafer:{height:50,width:"100%",position:"fixed",bottom:0,left:0,backgroundColor:"var(--paperBackgroundColor)"},flagshipImmersive:{backgroundColor:"var(--paperBackgroundColor)",bottom:0,content:"",height:"var(--flagship-bottom-height)",position:"fixed",width:"100%",zIndex:"var(--zIndex-modal)"},offsetSafer:{opacity:+!i,height:"".concat(r,"px"),width:"100%",position:"fixed",bottom:0,left:0,backgroundColor:"var(--paperBackgroundColor)",zIndex:"calc(var(--zIndex-modal) + 10)",transition:"opacity ".concat(250,"ms")},renderSafer:{height:a,width:"100%",position:"fixed",bottom:0,pointerEvents:"none"}}},Z={mediumHeightRatio:.75,mediumHeight:null,hasMinHeightOffset:!1,isOpenMin:!1},Y=(0,c.memo)(function(e){var t=e.toolbarProps,n=e.settings,r=e.backdrop,a=e.skipAnimation,i=e.onClose,o=e.offset,l=e.children,f=W(W({},Z),n),v=f.mediumHeightRatio,y=f.mediumHeight,b=f.isOpenMin,g=f.hasMinHeightOffset,x=(0,c.useRef)(),w=(0,c.useRef)(),k=(0,c.useRef)(),_=(0,c.useState)(!1),S=(0,u.Z)(_,2),N=S[0],F=S[1],L=(0,c.useState)(!1),H=(0,u.Z)(L,2),G=H[0],Y=H[1],J=(0,c.useState)(!1),K=(0,u.Z)(J,2),$=K[0],X=K[1],ee=(0,c.useState)(r),et=(0,u.Z)(ee,2),en=et[0],er=et[1],ea=(0,c.useState)(null),ei=(0,u.Z)(ea,2),eo=ei[0],ec=ei[1],es=(0,c.useState)(1),eu=(0,u.Z)(es,2),el=eu[0],ed=eu[1],ef=(0,c.useState)(0),ep=(0,u.Z)(ef,2),eh=ep[0],em=ep[1],ev=(0,c.useState)(0),ey=(0,u.Z)(ev,2),eb=ey[0],eg=ey[1],ex=(0,c.useRef)(),ew=(0,c.useState)(0),ek=(0,u.Z)(ew,2),eO=ek[0],e_=ek[1],eE=!!Object.keys(t).length,eS=!!i||r,eC=eb<ex.current?ex.current-16:0,eP=0!==ex.current&&ex.current>eb,ej=Q({isTopPosition:N,hasToolbarProps:eE,offset:o,renderSaferHeight:eC,isBottomPosition:G}),eA=c.Children.map(l,function(e){var t,n;return(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.name)==="BottomSheetHeader"||(null==e?void 0:null===(n=e.type)||void 0===n?void 0:n.displayName)==="BottomSheetHeader"?c.cloneElement(e,{headerContentRef:k}):e});if(r&&!i)throw Error("BottomSheet must have `onClose` method to work properly when setting `backdrop` to `true`");var eD=(0,c.useCallback)(function(){er(!1),X(!0),i&&i()},[i]);(0,h.I)(x,function(){e_(function(e){return e+1})}),(0,c.useEffect)(function(){return document.body.style.overflow="hidden",function(){document.body.style.overflow="auto"}},[]),(0,m.q)(function(){return eD()},250,eS&&G),(0,c.useEffect)(function(){var e=k.current,n=x.current.offsetHeight,a=R(e,"height"),i=R(e,"padding-bottom"),c=C(t),u=M({backdrop:r,maxHeight:c,innerContentHeight:n,toolbarProps:t,offset:o}),l=j({isClosable:eS,isOpenMin:b,headerRef:w,offset:g?o:0,actionButtonsHeight:a,actionButtonsBottomMargin:i}),d=b&&a>0?l+1:P({backdrop:r,maxHeight:c,mediumHeight:y,mediumHeightRatio:v,innerContentHeight:n,bottomSpacerHeight:u,offset:o}),f=(0,s.Z)(new Set([l,d,c])),p=(null==eo?void 0:eo.toString())!==(null==f?void 0:f.toString())&&N?el-1-(el-(f.length-1)):el;ed(p),ec(f),ex.current=eb,eg(d),A({snapIndex:p,peekHeights:f,isTopPosition:N,setIsTopPosition:F}),em(u)},[x,t,v,y,en,r,eS,o,eO]);var eT=(0,U.useCozyTheme)().isLight;return(0,B.Iq)({bottomTheme:eT?"dark":"light"},{bottomTheme:(0,E.ym)().immersive||!eT?"light":"dark"},"cozy-ui/BottomSheet"),c.createElement(V,{showBackdrop:en},(0,E.ym)().immersive&&c.createElement("span",{style:ej.flagshipImmersive}),c.createElement(O,{showBackdrop:en,onClick:function(){return T({backdrop:r,setCurrentIndex:ed,setIsTopPosition:F,setIsBottomPosition:Y,handleClose:eD})}}),c.createElement(p.R,{peekHeights:eo,defaultHeight:eb,backdrop:!1,fullHeight:!eE,currentIndex:el,onIndexChange:function(e){ed(e),A({snapIndex:e,peekHeights:eo,isTopPosition:N,setIsTopPosition:F}),D({snapIndex:e,isBottomPosition:G,setIsBottomPosition:Y})},styles:{root:ej.root},threshold:0,springConfig:{tension:165,friction:17,clamp:!0},disabledClosing:!i,hidden:$,snapPointSeekerMode:"next",skipAnimation:a},c.createElement("div",{ref:x},c.createElement(I.default,{"data-testid":"bottomSheet-header",className:"u-w-100 u-h-3 u-pos-relative u-flex u-flex-items-center u-flex-justify-center",ref:w,elevation:0,square:!0},c.createElement("div",{style:ej.indicator})),c.createElement(z,{style:ej.stack,className:"u-flex u-flex-column u-ov-hidden",spacing:"s"},eA)),c.createElement("div",{style:{height:eh}})),eP&&c.createElement("div",{style:ej.renderSafer},c.createElement(I.default,{className:q.renderSaferAnim,elevation:0,square:!0})),!G&&c.createElement(c.Fragment,null,c.createElement(d.Z,{in:!0,timeout:250},c.createElement("div",{style:ej.bounceSafer}))),!!o&&c.createElement(d.Z,{in:!0,timeout:250},c.createElement("div",{id:"bottomSheet-offsetSafer",style:ej.offsetSafer})))});Y.displayName="BottomSheet",Y.defaultProps={classes:{},toolbarProps:{},backdrop:!1,offset:(0,E.ym)().immersive&&(0,E.ym)().navbarHeight||0},Y.propTypes={toolbarProps:o().shape({ref:o().object,height:o().number}),settings:o().shape({mediumHeight:o().number,mediumHeightRatio:o().number,hasMinHeightOffset:o().bool,isOpenMin:o().bool}),backdrop:o().bool,skipAnimation:o().bool,offset:o().number,onClose:o().func};var J=(0,c.forwardRef)(function(e,t){var n=e.portalProps,i=(0,a.Z)(e,H),o=(0,U.useCozyTheme)().variant,s=null!=n&&n.disablePortal?c.Fragment:U.default,u=null!=n&&n.disablePortal?void 0:{variant:o};return c.createElement(f.Z,n,c.createElement(s,u,c.createElement(Y,(0,r.Z)({ref:t},i))))});J.displayName="BottomSheetPortal";var K=n(24584),$=n(8920),X=n(25976),ee=function(e){var t=document.getElementById("sidebar");return t?getComputedStyle(t).getPropertyValue("background-color"):e.palette.background.paper},et=(0,X.isFlagshipApp)()||E.q6?function(){var e=(0,$.Z)(),t=(0,U.useCozyTheme)().isLight;(0,B.Iq)({bottomBackground:e.palette.background.paper,bottomTheme:t?"dark":"light",topOverlay:"rgba(0, 0, 0, 0.5)",topBackground:e.palette.background.paper,topTheme:"light"},{bottomBackground:ee(e),bottomTheme:t?"dark":"light",topOverlay:"transparent",topBackground:e.palette.background.paper,topTheme:t?"dark":"light"},"cozy-ui/ActionMenu")}:function(){},en=n(41170),er=n(72339),ea=["children","autoClose","open","onClose"],ei=function(e){var t=e.children,n=e.autoClose,i=e.open,o=e.onClose,s=(0,a.Z)(e,ea),u=(0,er.default)().isMobile;et();var l=function(e){return function(t){var r;null===(r=e.onClick)||void 0===r||r.call(e,t),n&&(null==o||o())}};return u&&i?c.createElement(J,{skipAnimation:(0,en.Z)(),backdrop:!0,onClose:o},c.createElement(I.default,{square:!0},c.Children.map(t,function(e){return c.isValidElement(e)?c.cloneElement(e,{isListItem:!0,size:"small",onClick:l(e.props)}):null}))):c.createElement(K.default,(0,r.Z)({},s,{open:i,onClose:o}),c.Children.map(t,function(e,n){var r,a,i=c.Children.toArray(t)[0],o=(null==i?void 0:null===(r=i.type)||void 0===r?void 0:r.name)||(null==i?void 0:null===(a=i.type)||void 0===a?void 0:a.displayName);return c.isValidElement(e)?c.cloneElement(e,{autoFocus:"ActionsMenuMobileHeader"===o&&1===n||void 0,onClick:l(e.props)}):null}))};ei.propTypes={autoClose:o().bool,onClose:o().func};let eo=ei},69560:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>p});var r=n(51894),a=n(65691),i=n(45697),o=n.n(i),c=n(67294),s=n(47868),u=n(55527),l=["docs","actions","anchorOrigin","children","componentsProps","onClose"],d=function(e){var t=e.vertical;return{vertical:"bottom"===t?"top":"top"===t?"bottom":t,horizontal:e.horizontal}},f=(0,c.forwardRef)(function(e,t){var n=e.docs,i=e.actions,o=e.anchorOrigin,f=e.children,p=e.componentsProps,h=e.onClose,m=(0,a.Z)(e,l),v=d(o);return c.createElement(u.Z,(0,r.Z)({},m,{anchorEl:t.current,getContentAnchorEl:null,anchorOrigin:o,transformOrigin:v,keepMounted:!0,onClose:h}),f,c.createElement(s.default,(0,r.Z)({},p.actionsItems,{docs:n,actions:i})))});f.defaultProps={anchorOrigin:{vertical:"bottom",horizontal:"left"},autoClose:!0,componentsProps:{}},f.propTypes={open:o().bool,docs:o().array,actions:o().array,anchorOrigin:o().shape({vertical:o().oneOf(["bottom","center","top"]),horizontal:o().oneOf(["left","center","right"])}),autoClose:o().bool,componentsProps:o().shape({actionsItems:o().shape({actionOptions:o().object,onClick:o().func})}),onClose:o().func};let p=f},32869:function(e,t,n){"use strict";n.r(t),n.d(t,{AppIcon:()=>K,default:()=>$});var r=n(48079),a=n(59172),i=n(34871),o=n(28457),c=n(99494),s=n(3868),u=n(88035),l=n(91888),d=n(55552),f=n.n(d),p=n(94184),h=n.n(p),m=n(45697),v=n.n(m),y=n(67294),b=n(16396);n(27361);var g={FILE:"file"},x={SHORTCUT:"shortcut"},w=function(e){return!!e&&e.type===g.FILE&&e.class===x.SHORTCUT},k=n(32419),O=n(51894),_=n(65691),E=["iconRef"];let S=function(e){var t=e.iconRef,n=(0,_.Z)(e,E);return y.createElement("svg",(0,O.Z)({viewBox:"0 0 15 16"},n,{ref:t}),y.createElement("path",{d:"M14.4 4L7.2 0 0 4v8l7.2 4 7.2-4V4zM7.2 1.832l4.728 2.624L9.52 5.792a3.213 3.213 0 00-4.64 0L2.472 4.456 7.2 1.832zm-.8 11.896l-4.8-2.664V5.808L4.104 7.2A3.193 3.193 0 006.4 11.096v2.632zM5.6 8c0-.88.72-1.6 1.6-1.6.88 0 1.6.72 1.6 1.6 0 .88-.72 1.6-1.6 1.6-.88 0-1.6-.72-1.6-1.6zM8 13.728v-2.624a3.193 3.193 0 002.4-3.096c0-.28-.032-.552-.104-.808L12.8 5.808v5.256L8 13.728z"}))};var C=n(92951),P=["iconRef"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let A=function(e){var t=e.iconRef,n=(0,_.Z)(e,P);return(0,C.isTwakeTheme)()?S(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,l.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({iconRef:t},n)):y.createElement("svg",(0,O.Z)({viewBox:"0 0 16 16"},n,{ref:t}),y.createElement("path",{d:"M1 11.009V5.5c0-.55.39-.773.872-.498l5.256 3.003c.476.272.872.944.872 1.495v5.508c0 .549-.39.772-.872.497l-5.256-3.003C1.396 12.231 1 11.56 1 11.01zm15 0c0 .55-.396 1.222-.872 1.494l-5.256 3.003c-.481.275-.872.052-.872-.497V9.5c0-.55.396-1.223.872-1.495l5.256-3.003c.481-.275.872-.052.872.498v5.508zM9.35 6.982c-.47.288-1.237.284-1.7 0l-4.8-2.954c-.47-.29-.463-.732.027-.995L7.623.477c.485-.261 1.264-.264 1.754 0l4.746 2.556c.485.26.49.71.027.995l-4.8 2.954z"}))};var D=n(63293);let T={coolGrey:"var(--coolGrey)",puertoRico:"#0DCBCF",emerald:"#35CE68",seafoamGreen:"#3DA67E",brightSun:"#FFC644",fuchsia:"#FC4C83",pomegranate:"#F52D2D",azure:"#1FA8F1",melon:"#FD7461",blazeOrange:"#FC6D00",mango:"#FF962F",pumpkinOrange:"#FF7F1B",lavender:"#C2ADF4",darkPeriwinkle:"#6984CE",purpley:"#7F6BEE",lightishPurple:"#B449E7",weirdGreen:"#40DE8E"};var M=[T.azure,T.melon,T.blazeOrange,T.pomegranate,T.mango,T.pumpkinOrange,T.darkPeriwinkle,T.purpley,T.lightishPurple,T.weirdGreen,T.puertoRico,T.emerald,T.seafoamGreen,T.lavender,T.brightSun,T.fuchsia],R=Object.values(D.hl).filter(Boolean),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,C.isTwakeTheme)()?R:M,n=Array.from(e.toUpperCase()).map(function(e){return e.charCodeAt(0)}).reduce(function(e,t){return e+t},0)%t.length;return t[n]},N=n(32692),F=["children","className","tag","isSecondary"],z=function(e){var t=e.children,n=e.className,r=e.tag,a=e.isSecondary,i=(0,_.Z)(e,F);return y.createElement(r,(0,O.Z)({className:h()("styles__Tile___2SqRi",(0,l.Z)({},"styles__Tile-secondary___2zYdn",a),n)},i),t)},L=function(e){var t=e.children,n=e.className,r=e.isMultiline;return y.createElement(N.default,{variant:"h6",className:h()("styles__Tile-title___3gbq-",(0,l.Z)({},"styles__Tile-title-multiline___17HPx",r),n)},t)},B=function(e){var t=e.children,n=e.className,r=e.isAccent;return y.createElement(N.default,{variant:"caption",className:h()("styles__Tile-status___33VkE",(0,l.Z)({},"styles__Tile-status-accent___an9au",r),n)},t)},U=function(e){var t=e.children;return y.createElement("div",{className:"styles__Tile-icon-wrapper___24AzZ"},t)};L.propTypes={className:v().string,isMultiline:v().bool},L.defaultProps={isMultiline:!1},B.propTypes={className:v().string,isAccent:v().bool},B.defaultProps={isAccent:!1},z.propTypes={className:v().string,isSecondary:v().bool,tag:v().string},z.defaultProps={isSecondary:!1,tag:"div"};var H=n(41120),G={"AppTile-icon":"styles__AppTile-icon___1f0c0"},W=(0,H.Z)({letter:{color:"white",margin:"auto"},letterWrapper:{backgroundColor:function(e){return I(e.name)}}}),q=function(e){var t,n,r,a,i=e.file,o=W({name:i.name}),c=null===(t=i.attributes)||void 0===t?void 0:null===(n=t.metadata)||void 0===n?void 0:n.icon,s=null===(r=i.attributes)||void 0===r?void 0:null===(a=r.metadata)||void 0===a?void 0:a.iconMimeType;return c?y.createElement(U,null,y.createElement("img",{className:G["AppTile-icon"],src:s?"data:".concat(s,";base64,").concat(c):"data:image/svg+xml;base64,".concat(window.btoa(c)),width:48,height:48,alt:i.name})):y.createElement(U,null,y.createElement("div",{className:o.letterWrapper},y.createElement(N.default,{className:o.letter,variant:"h2",align:"center"},i.name[0].toUpperCase())))},V=v().shape({name:v().string,slug:v().string,developer:v().object,links:v().shape({icon:v().string}),latest_version:v().shape({version:v().string})});v().shape({_id:v().string,class:v().string,mime:v().string,name:v().string});var Q={"c-loading-placeholder":"styles__c-loading-placeholder___3L6Gz","c-app-icon":"styles__c-app-icon___2_O40","c-app-icon-default":"styles__c-app-icon-default___3CEmt"},Z="done",Y="errored",J="fetching",K=function(e){(0,c.Z)(p,e);var t,n,d=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,u.Z)(p);return e=t?Reflect.construct(n,arguments,(0,u.Z)(this).constructor):n.apply(this,arguments),(0,s.Z)(this,e)});function p(e,t){var n;return(0,a.Z)(this,p),n=d.call(this,e,t),(0,l.Z)((0,o.Z)(n),"state",{error:null,icon:null,status:n.props.client?J:Y}),n.isUnmounting=!1,n.handleError=n.handleError.bind((0,o.Z)(n)),n.fetchIcon=n.fetchIcon.bind((0,o.Z)(n)),n}return(0,i.Z)(p,[{key:"componentWillUnmount",value:function(){this.isUnmounting=!0}},{key:"componentDidMount",value:function(){this.isUnmounting=!1,this.load()}},{key:"componentDidUpdate",value:function(e){this.props.fetchIcon!==e.fetchIcon&&this.load()}},{key:"fetchIcon",value:function(){var e=this.props,t=e.app,n=e.type,r=e.priority,a=e.client;if(!w(t))return a.getStackClient().getIconURL({type:n,slug:t.slug||t,appData:t,priority:r})}},{key:"handleError",value:function(){this.setState({status:Y})}},{key:"load",value:(n=(0,r.Z)(f().mark(function e(){var t,n,r,a,i,o,c,s,u,l,d;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=this.props).app,r=t.fetchIcon,a=t.onReady,i=t.client,o=r||this.fetchIcon,e.prev=2,i&&(u=(d=new URL(i.getStackClient().uri)).host,l="https:"===d.protocol),e.next=6,o(n,u,l);case 6:c=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s=e.t0;case 12:this.isUnmounting||(this.setState({error:s,icon:c,status:s?Y:Z}),"function"==typeof a&&a());case 13:case"end":return e.stop()}},e,this,[[2,9]])})),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.alt,n=e.className,r=e.fallbackIcon,a=this.state,i=a.icon,o=a.status;if(w(this.props.app))return y.createElement(q,{file:this.props.app});switch(o){case J:return y.createElement("div",{role:"progressbar",className:h()(Q["c-loading-placeholder"],Q["c-app-icon"],n)});case Z:return y.createElement("img",{alt:t,className:h()(Q["c-app-icon"],n),onError:this.handleError,ref:this.props.iconRef,src:i});default:return y.createElement(k.default,{className:h()(Q["c-app-icon"],Q["c-app-icon-default"],n),height:"100%",icon:r||A,width:"100%",color:T.coolGrey,iconRef:this.props.iconRef})}}}]),p}(y.Component);K.propTypes={alt:v().string,app:v().oneOfType([V,v().string]),fallbackIcon:k.iconPropType,fetchIcon:v().func,client:v().object.isRequired,className:v().string,onReady:v().func,type:v().oneOf(["app","konnector"]),priority:v().oneOf(["stack","registry"])},K.defaultProps={type:"app",priority:"stack"};let $=(0,b.withClient)(K)},79475:function(e,t,n){"use strict";n.r(t),n.d(t,{AppLinker:()=>E,default:()=>S,generateUniversalLink:()=>O,generateWebLink:()=>k,getUniversalLinkDomain:()=>w});var r=n(59172),a=n(34871),i=n(28457),o=n(99494),c=n(3868),s=n(88035),u=n(91888),l=n(45697),d=n.n(l),f=n(67294),p=n(16396),h=n(25976),m=n(22960),v=n(33918),y=n.n(v),b=n(65691),g=["nativePath"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var w=function(){return"https://links.mycozy.cloud"},k=function(e){var t=e.nativePath,n=(0,b.Z)(e,g);return console.warn("Deprecated: you should use generateWebLink from cozy-client instead"),(0,p.generateWebLink)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({pathname:"/",hash:t},n))},O=function(e){var t=e.slug,n=e.cozyUrl,r=e.subDomainType,a=e.fallbackUrl,i=e.nativePath;if(i=(0,p.ensureFirstSlash)(i),!n&&!a)throw Error("Must have either cozyUrl or fallbackUrl to generate universal link.");n&&!a&&(a=(0,p.generateWebLink)({cozyUrl:n,pathname:"/",hash:i,slug:t,subDomainType:r}));var o=new URL(w(n)+"/"+t+i);return o.searchParams.append("fallback",a),o.toString()};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var E=function(e){(0,o.Z)(l,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.Z)(l);return e=t?Reflect.construct(n,arguments,(0,s.Z)(this).constructor):n.apply(this,arguments),(0,c.Z)(this,e)});function l(e){var t;return(0,r.Z)(this,l),t=n.call(this,e),(0,u.Z)((0,i.Z)(t),"state",{imgRef:null}),(0,u.Z)((0,i.Z)(t),"setImgRef",function(e){t.imgRef=e,t.setState({imgRef:t.imgRef})}),t}return(0,a.Z)(l,[{key:"render",value:function(){var e=this.props.children,t=l.getOnClickHref(this.props,this.context,this.state.imgRef),n=t.href,r=t.onClick;return e({iconRef:this.setImgRef,onClick:r,href:n})}}],[{key:"getSlug",value:function(e){return e.app.slug}},{key:"getOnClickHref",value:function(e,t,n){var r=e.app,a=e.client,i=e.href;if((0,h.isFlagshipApp)()){var o=(a?a.getInstanceOptions():void 0).app;if(void 0===o||r.slug!==o.slug){var c=n&&JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.getBoundingClientRect().toJSON()));return{onClick:function(e){e.preventDefault(),t?t.call("openApp",i,r,c):y().error('Failed to "openApp('.concat(r,')". WebviewService has the following falsy value "').concat(t,"\" in AppLinker's context."))},href:"#"}}}return{href:i,onClick:null}}},{key:"onAppSwitch",value:function(e){"function"==typeof e&&e()}},{key:"openWeb",value:function(e){l.onAppSwitch(e.onAppSwitch)}}]),l}(f.Component);(0,u.Z)(E,"contextType",m.WebviewContext),E.propTypes={href:d().string,onAppSwitch:d().func,app:d().shape({slug:d().string.isRequired}).isRequired};let S=(0,p.withClient)(E)},72685:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>x});var r=n(51894),a=n(65691),i=n(94184),o=n.n(i),c=n(45697),s=n.n(c),u=n(67294),l=n(32419),d=n(92951);let f=function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 86 23",fill:"none"},e),u.createElement("path",{d:"M6.495 5.381H.635V1.69h15.822v3.692h-5.86V22.2H6.495V5.38z"}),u.createElement("path",{d:"M13.606 6.963h4.63l1.963 8.644c.215.88.37 1.65.469 2.315.136-.84.302-1.621.498-2.344l2.227-8.615h4.541l2.374 8.615c.195.723.36 1.504.498 2.344.097-.664.254-1.436.468-2.315l2.11-8.644h4.307L32.945 22.2h-4.278l-2.49-8.673a13.054 13.054 0 01-.528-2.286c-.137.899-.293 1.66-.47 2.286L22.896 22.2h-4.542L13.606 6.963zm31.16 15.617a7.12 7.12 0 01-3.78-1.054 8.014 8.014 0 01-2.754-2.9c-.664-1.212-.997-2.54-.997-3.986 0-1.445.333-2.774.997-3.985.683-1.23 1.601-2.207 2.754-2.93a6.977 6.977 0 013.78-1.084c1.25 0 2.256.234 3.018.703.781.47 1.387 1.143 1.816 2.022V6.963h3.927V22.2h-3.839v-2.49c-.449.917-1.064 1.63-1.846 2.138-.761.489-1.787.733-3.076.733zm-3.575-7.97c0 .782.176 1.515.527 2.198.372.665.87 1.202 1.495 1.612.644.39 1.377.586 2.197.586.84 0 1.583-.195 2.227-.586a3.955 3.955 0 001.524-1.582 4.623 4.623 0 00.527-2.198c0-.8-.176-1.533-.527-2.197a3.907 3.907 0 00-1.524-1.612c-.644-.41-1.387-.615-2.227-.615-.82 0-1.553.205-2.197.615a4.014 4.014 0 00-1.495 1.582 4.624 4.624 0 00-.527 2.198zm18.642.353V22.2h-3.956V.81h3.956v12.306l5.713-6.153h5.626l-7.179 7.091 7.208 8.146h-5.245l-6.123-7.237z"}),u.createElement("path",{d:"M77.594 22.58c-1.543 0-2.91-.35-4.102-1.054a7.632 7.632 0 01-2.783-2.9c-.665-1.212-.997-2.55-.997-4.015a8.13 8.13 0 011.026-4.014 7.792 7.792 0 012.813-2.93c1.21-.723 2.559-1.085 4.043-1.085 1.485 0 2.813.362 3.985 1.085a7.362 7.362 0 012.755 2.93c.664 1.21.996 2.549.996 4.014 0 .488-.04.957-.117 1.406H73.815c.234.918.673 1.66 1.318 2.227.664.547 1.485.82 2.461.82.82 0 1.553-.185 2.198-.556a4.465 4.465 0 001.523-1.494l3.077 2.314c-.625.977-1.543 1.768-2.754 2.374-1.211.586-2.56.879-4.044.879zm3.75-9.522a4.28 4.28 0 00-1.376-2.198c-.684-.586-1.495-.879-2.432-.879-.918 0-1.72.284-2.403.85-.664.567-1.104 1.309-1.319 2.227h7.53z"}))};var p=n(81842),h=n(32692),m=n(24060),v=["slug","tag","className","children"],y={"c-apptitle":"styles__c-apptitle___eqV9l","c-apptitle-light":"styles__c-apptitle-light___49VIZ","c-apptitle-dark":"styles__c-apptitle-dark___13RM5","c-apptitle-app-icon":"styles__c-apptitle-app-icon___oQp8q"},b={chat:{icon:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 33 33",fill:"none"},e),u.createElement("g",{clipPath:"url(#chat_svg__clip0_11347_30938)"},u.createElement("rect",{x:.704,y:.704,width:32.017,height:32.017,rx:10.574,fill:"#fff"}),u.createElement("rect",{x:.704,y:.704,width:32.017,height:32.017,rx:10.574,fill:"url(#chat_svg__paint0_linear_11347_30938)"}),u.createElement("g",{filter:"url(#chat_svg__filter0_d_11347_30938)"},u.createElement("path",{d:"M16.704 7.398c5.861 0 10.613 4.104 10.613 9.165 0 5.062-4.752 9.165-10.613 9.165a12.12 12.12 0 01-3.433-.49c-1.204.936-3.07 1.722-5.6 2.356a.484.484 0 01-.54-.706l.18-.329c.84-1.545 1.364-2.813 1.572-3.802-1.733-1.63-2.791-3.806-2.791-6.194 0-5.061 4.751-9.165 10.612-9.165z",fill:"#fff"}))),u.createElement("defs",null,u.createElement("linearGradient",{id:"chat_svg__paint0_linear_11347_30938",x1:5.031,y1:30.092,x2:30.745,y2:.704,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#8135FE"}),u.createElement("stop",{offset:1,stopColor:"#E8A6FF"})),u.createElement("clipPath",{id:"chat_svg__clip0_11347_30938"},u.createElement("path",{fill:"#fff",transform:"translate(.704 .704)",d:"M0 0h32v32H0z"})),u.createElement("filter",{id:"chat_svg__filter0_d_11347_30938",x:4.459,y:6.092,width:24.49,height:23.476,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",{dy:.327}),u.createElement("feGaussianBlur",{stdDeviation:.816}),u.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),u.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),u.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_11347_30938"}),u.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_11347_30938",result:"shape"}))))},text:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 374 130",fill:"none"},e),u.createElement("path",{d:"M63.625 129.516c-11.853 0-22.66-2.789-32.423-8.367-9.645-5.694-17.257-13.364-22.835-23.01C2.79 88.495 0 77.92 0 66.415c0-11.62 2.673-22.254 8.018-31.9 5.462-9.761 13.016-17.431 22.662-23.01 9.645-5.693 20.627-8.54 32.945-8.54 9.878 0 18.361 1.568 25.45 4.706 7.205 3.021 13.597 7.844 19.175 14.468l-17.257 14.99c-7.322-7.67-16.444-11.505-27.368-11.505-7.67 0-14.41 1.86-20.22 5.578-5.811 3.603-10.285 8.542-13.423 14.817-3.137 6.16-4.706 12.958-4.706 20.395 0 7.438 1.569 14.236 4.706 20.395 3.254 6.16 7.786 11.04 13.597 14.642 5.926 3.603 12.783 5.404 20.569 5.404 11.389 0 20.685-3.951 27.89-11.853l17.781 15.165c-4.881 5.927-11.273 10.633-19.175 14.12-7.786 3.486-16.792 5.229-27.019 5.229z",fill:"url(#chat-text_svg__paint0_linear_59620_161)"}),u.createElement("path",{d:"M118.031 0h23.532v49.157c4.881-9.762 14.003-14.643 27.368-14.643 6.507 0 12.376 1.57 17.605 4.707 5.23 3.021 9.355 7.38 12.377 13.074 3.021 5.578 4.532 12.085 4.532 19.523v55.432h-23.533V77.57c0-7.553-1.743-13.19-5.229-16.908-3.486-3.719-8.251-5.578-14.294-5.578-5.346 0-9.82 1.917-13.422 5.752-3.603 3.719-5.404 9.297-5.404 16.734v49.68h-23.532V0z",fill:"url(#chat-text_svg__paint1_linear_59620_161)"}),u.createElement("path",{d:"M257.906 129.516c-8.134 0-15.63-2.092-22.486-6.275-6.857-4.3-12.319-10.052-16.386-17.257-3.951-7.205-5.927-15.108-5.927-23.707 0-8.6 1.976-16.502 5.927-23.707 4.067-7.321 9.529-13.132 16.386-17.432 6.856-4.3 14.352-6.45 22.486-6.45 7.438 0 13.423 1.395 17.955 4.184 4.648 2.79 8.251 6.799 10.807 12.028V36.606h23.359v90.644h-22.836v-14.817c-2.673 5.462-6.333 9.704-10.982 12.725-4.532 2.906-10.633 4.358-18.303 4.358zM236.64 82.103c0 4.648 1.046 9.006 3.137 13.073 2.208 3.951 5.172 7.147 8.891 9.587 3.834 2.325 8.192 3.487 13.073 3.487 4.997 0 9.413-1.162 13.248-3.487 3.951-2.324 6.973-5.461 9.065-9.413 2.091-3.95 3.137-8.309 3.137-13.073 0-4.765-1.046-9.123-3.137-13.074-2.092-4.067-5.114-7.263-9.065-9.587-3.835-2.44-8.251-3.66-13.248-3.66-4.881 0-9.239 1.22-13.073 3.66-3.835 2.324-6.799 5.462-8.891 9.413-2.091 3.951-3.137 8.309-3.137 13.074z",fill:"url(#chat-text_svg__paint2_linear_59620_161)"}),u.createElement("path",{d:"M358.349 127.25c-9.181 0-16.095-2.266-20.744-6.798-4.648-4.532-6.973-11.621-6.973-21.267V56.653h-12.725V36.606h12.725V18.303l23.533-2.44v20.743h19.175v20.047h-19.175v41.312c0 5.578 2.44 8.367 7.321 8.367h9.762v20.918h-12.899z",fill:"url(#chat-text_svg__paint3_linear_59620_161)"}),u.createElement("defs",null,u.createElement("linearGradient",{id:"chat-text_svg__paint0_linear_59620_161",x1:187.057,y1:-44.095,x2:187.057,y2:166.905,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#B666FA"}),u.createElement("stop",{offset:1,stopColor:"#A347EC"})),u.createElement("linearGradient",{id:"chat-text_svg__paint1_linear_59620_161",x1:187.057,y1:-44.095,x2:187.057,y2:166.905,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#B666FA"}),u.createElement("stop",{offset:1,stopColor:"#A347EC"})),u.createElement("linearGradient",{id:"chat-text_svg__paint2_linear_59620_161",x1:187.057,y1:-44.095,x2:187.057,y2:166.905,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#B666FA"}),u.createElement("stop",{offset:1,stopColor:"#A347EC"})),u.createElement("linearGradient",{id:"chat-text_svg__paint3_linear_59620_161",x1:187.057,y1:-44.095,x2:187.057,y2:166.905,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#B666FA"}),u.createElement("stop",{offset:1,stopColor:"#A347EC"}))))}},drive:{icon:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 33 33",fill:"none"},e),u.createElement("rect",{x:.618,y:.718,width:32,height:32,rx:10.568,fill:"#fff"}),u.createElement("rect",{x:.618,y:.718,width:32,height:32,rx:10.568,fill:"url(#drive_svg__paint0_linear_11347_30928)"}),u.createElement("g",{filter:"url(#drive_svg__filter0_d_11347_30928)",fill:"#fff"},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.61 18.913a5.25 5.25 0 00-.228-1.54 5.455 5.455 0 00-.398-.96 5.25 5.25 0 00-.927-1.25 5.318 5.318 0 00-2.972-1.496 5.484 5.484 0 00-.779-.058 5.25 5.25 0 00-1.54.229 5.358 5.358 0 00-1.406.665 5.288 5.288 0 00-1.953 2.38 5.276 5.276 0 00-.398 2.29 5.306 5.306 0 005.037 5.037c.087.004.174.006.26.006h8.486v-5.303H16.61z"}),u.createElement("path",{d:"M19.791 24.216a7.425 7.425 0 100-14.85 7.425 7.425 0 000 14.85z"})),u.createElement("defs",null,u.createElement("linearGradient",{id:"drive_svg__paint0_linear_11347_30928",x1:4.126,y1:29.682,x2:39.046,y2:-5.32,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.248,stopColor:"#FF4759"}),u.createElement("stop",{offset:1,stopColor:"#FFD600"})),u.createElement("filter",{id:"drive_svg__filter0_d_11347_30928",x:4.371,y:8.061,width:24.477,height:18.113,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",{dy:.326}),u.createElement("feGaussianBlur",{stdDeviation:.816}),u.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),u.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),u.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_11347_30928"}),u.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_11347_30928",result:"shape"}))))},text:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 374 123",fill:"none"},e),u.createElement("path",{d:"M0 3.66h41.593c13.088 0 24.068 2.496 32.941 7.487 8.984 4.991 15.695 11.868 20.131 20.63 4.437 8.762 6.655 18.855 6.655 30.28 0 11.313-2.218 21.35-6.655 30.113-4.436 8.762-11.147 15.639-20.13 20.63-8.874 4.88-19.854 7.32-32.942 7.32H0V3.66zm38.764 95.497c13.088 0 22.738-3.327 28.95-9.982 6.321-6.766 9.482-15.805 9.482-27.118 0-11.314-3.16-20.353-9.483-27.119-6.211-6.877-15.86-10.315-28.948-10.315H23.291v74.534h15.472z",fill:"url(#drive-text_svg__paint0_linear_59620_158)"}),u.createElement("path",{d:"M112.067 33.607h21.794v16.47c1.553-6.321 4.548-11.09 8.984-14.307 4.548-3.217 10.482-4.603 17.802-4.16v21.13h-3.161c-6.655 0-12.145 2.107-16.471 6.322-4.325 4.104-6.488 9.705-6.488 16.803v44.255h-22.46V33.607z",fill:"url(#drive-text_svg__paint1_linear_59620_158)"}),u.createElement("path",{d:"M168.119 33.607h22.46v86.513h-22.46V33.607zm-2.329-20.464c0-3.66 1.276-6.765 3.827-9.316C172.279 1.276 175.495 0 179.266 0c3.882 0 7.099 1.276 9.65 3.827 2.551 2.55 3.826 5.656 3.826 9.316 0 3.771-1.275 6.933-3.826 9.483-2.551 2.551-5.768 3.827-9.65 3.827-3.771 0-6.987-1.276-9.649-3.826-2.551-2.662-3.827-5.823-3.827-9.484z",fill:"url(#drive-text_svg__paint2_linear_59620_158)"}),u.createElement("path",{d:"M194.713 33.607h26.619l17.303 49.412c1.553 4.215 2.773 8.818 3.66 13.809.887-4.991 2.107-9.594 3.66-13.809l17.303-49.412h26.12l-35.936 86.513h-22.627l-36.102-86.513z",fill:"url(#drive-text_svg__paint3_linear_59620_158)"}),u.createElement("path",{d:"M329.45 122.283c-8.762 0-16.526-1.997-23.292-5.99-6.766-4.103-12.034-9.594-15.805-16.47-3.771-6.877-5.657-14.475-5.657-22.793 0-8.208 1.941-15.805 5.823-22.793 3.882-6.988 9.206-12.533 15.972-16.637 6.877-4.104 14.53-6.156 22.959-6.156 8.43 0 15.972 2.052 22.627 6.156 6.765 4.104 11.978 9.65 15.638 16.637 3.772 6.877 5.657 14.474 5.657 22.793 0 2.773-.222 5.435-.665 7.986h-64.719c1.331 5.213 3.827 9.427 7.487 12.644 3.771 3.105 8.429 4.658 13.975 4.658 4.658 0 8.818-1.053 12.478-3.16 3.66-2.219 6.544-5.047 8.651-8.486l17.469 13.144c-3.549 5.545-8.762 10.037-15.639 13.476-6.876 3.327-14.529 4.991-22.959 4.991zm21.296-54.07c-1.331-4.992-3.938-9.151-7.82-12.479-3.882-3.327-8.485-4.99-13.809-4.99-5.213 0-9.76 1.608-13.642 4.824-3.771 3.217-6.267 7.431-7.487 12.644h42.758z",fill:"url(#drive-text_svg__paint4_linear_59620_158)"}),u.createElement("defs",null,u.createElement("linearGradient",{id:"drive-text_svg__paint0_linear_59620_158",x1:172.182,y1:-31,x2:172.182,y2:137.5,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FF6372"}),u.createElement("stop",{offset:1,stopColor:"#FF3347"})),u.createElement("linearGradient",{id:"drive-text_svg__paint1_linear_59620_158",x1:172.182,y1:-31,x2:172.182,y2:137.5,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FF6372"}),u.createElement("stop",{offset:1,stopColor:"#FF3347"})),u.createElement("linearGradient",{id:"drive-text_svg__paint2_linear_59620_158",x1:172.182,y1:-31,x2:172.182,y2:137.5,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FF6372"}),u.createElement("stop",{offset:1,stopColor:"#FF3347"})),u.createElement("linearGradient",{id:"drive-text_svg__paint3_linear_59620_158",x1:172.182,y1:-31,x2:172.182,y2:137.5,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FF6372"}),u.createElement("stop",{offset:1,stopColor:"#FF3347"})),u.createElement("linearGradient",{id:"drive-text_svg__paint4_linear_59620_158",x1:172.182,y1:-31,x2:172.182,y2:137.5,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FF6372"}),u.createElement("stop",{offset:1,stopColor:"#FF3347"}))))}},mail:{icon:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 33 33",fill:"none"},e),u.createElement("rect",{x:.582,y:.718,width:32,height:32,rx:10.568,fill:"#fff"}),u.createElement("rect",{x:.582,y:.718,width:32,height:32,rx:10.568,fill:"url(#mail_svg__paint0_linear_11347_30933)"}),u.createElement("g",{filter:"url(#mail_svg__filter0_d_11347_30933)"},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.167 12.492a3.048 3.048 0 00-1.2 2.423v8.7a3.658 3.658 0 003.658 3.658h13.897a3.658 3.658 0 003.658-3.658v-8.7c0-.95-.444-1.847-1.2-2.423l-7.558-5.765a3.048 3.048 0 00-3.697 0l-7.558 5.764zm1.157 2.07v9.18c0 .674.546 1.22 1.22 1.22h14.06a1.22 1.22 0 001.22-1.22v-9.18l-6.852 4.798a2.439 2.439 0 01-2.797 0l-6.851-4.798z",fill:"#fff"})),u.createElement("defs",null,u.createElement("linearGradient",{id:"mail_svg__paint0_linear_11347_30933",x1:5.069,y1:29.356,x2:31.831,y2:2.268,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#1E91FF"}),u.createElement("stop",{offset:.997,stopColor:"#2ED9FF"})),u.createElement("filter",{id:"mail_svg__filter0_d_11347_30933",x:4.335,y:4.797,width:24.477,height:24.433,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",{dy:.326}),u.createElement("feGaussianBlur",{stdDeviation:.816}),u.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),u.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),u.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_11347_30933"}),u.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_11347_30933",result:"shape"}))))},text:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 311 125",fill:"none"},e),u.createElement("path",{d:"M0 5.046h29.266l24.389 51.973c6.84 14.465 11.213 24.949 13.12 31.453 1.569-6.055 5.886-16.54 12.95-31.453l24.557-51.973h28.257v117.738h-23.043v-47.6c0-7.737.112-14.016.337-18.838.224-4.822.672-9.924 1.345-15.306l-39.19 81.744H60.551L21.36 41.04c.673 5.382 1.121 10.484 1.346 15.306.224 4.822.336 11.1.336 18.838v47.6H0V5.046z",fill:"url(#mail-text_svg__paint0_linear_59620_156)"}),u.createElement("path",{d:"M187.488 124.97c-7.849 0-15.081-2.018-21.697-6.055-6.616-4.149-11.886-9.699-15.811-16.651-3.812-6.952-5.718-14.577-5.718-22.875s1.906-15.923 5.718-22.875c3.925-7.064 9.195-12.67 15.811-16.82 6.616-4.148 13.848-6.223 21.697-6.223 7.177 0 12.951 1.346 17.325 4.037 4.485 2.691 7.961 6.56 10.428 11.605V35.322h22.538v87.463h-22.034v-14.297c-2.579 5.27-6.111 9.363-10.596 12.278-4.373 2.804-10.26 4.205-17.661 4.205zm-20.52-45.75c0 4.486 1.009 8.69 3.028 12.615 2.13 3.813 4.99 6.897 8.578 9.251 3.7 2.243 7.905 3.364 12.615 3.364 4.821 0 9.082-1.121 12.783-3.364 3.812-2.242 6.727-5.27 8.746-9.082 2.018-3.813 3.027-8.018 3.027-12.615 0-4.597-1.009-8.802-3.027-12.615-2.019-3.924-4.934-7.008-8.746-9.25-3.701-2.355-7.962-3.533-12.783-3.533-4.71 0-8.915 1.178-12.615 3.532-3.7 2.243-6.56 5.27-8.578 9.083-2.019 3.812-3.028 8.017-3.028 12.615z",fill:"url(#mail-text_svg__paint1_linear_59620_156)"}),u.createElement("path",{d:"M251.27 35.321h22.707v87.463H251.27V35.321zm-2.354-20.688c0-3.7 1.289-6.84 3.868-9.419 2.691-2.579 5.943-3.868 9.756-3.868 3.924 0 7.176 1.29 9.755 3.868 2.579 2.58 3.869 5.719 3.869 9.42 0 3.812-1.29 7.007-3.869 9.586-2.579 2.58-5.831 3.869-9.755 3.869-3.813 0-7.065-1.29-9.756-3.869-2.579-2.69-3.868-5.886-3.868-9.587z",fill:"url(#mail-text_svg__paint2_linear_59620_156)"}),u.createElement("path",{d:"M287.406 0h22.707v122.784h-22.707V0z",fill:"url(#mail-text_svg__paint3_linear_59620_156)"}),u.createElement("defs",null,u.createElement("linearGradient",{id:"mail-text_svg__paint0_linear_59620_156",x1:35.555,y1:-30.948,x2:35.555,y2:124.826,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#57B9FF"}),u.createElement("stop",{offset:1,stopColor:"#0B84FF"})),u.createElement("linearGradient",{id:"mail-text_svg__paint1_linear_59620_156",x1:35.555,y1:-30.948,x2:35.555,y2:124.826,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#57B9FF"}),u.createElement("stop",{offset:1,stopColor:"#0B84FF"})),u.createElement("linearGradient",{id:"mail-text_svg__paint2_linear_59620_156",x1:35.555,y1:-30.948,x2:35.555,y2:124.826,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#57B9FF"}),u.createElement("stop",{offset:1,stopColor:"#0B84FF"})),u.createElement("linearGradient",{id:"mail-text_svg__paint3_linear_59620_156",x1:35.555,y1:-30.948,x2:35.555,y2:124.826,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#57B9FF"}),u.createElement("stop",{offset:1,stopColor:"#0B84FF"}))))}},notes:{icon:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 33 33",fill:"none"},e),u.createElement("rect",{x:.718,y:.718,width:32,height:32,rx:10.568,fill:"#fff"}),u.createElement("rect",{x:.718,y:.718,width:32,height:32,rx:10.568,fill:"url(#notes_svg__paint0_linear_11347_30909)"}),u.createElement("g",{filter:"url(#notes_svg__filter0_d_11347_30909)"},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.71 6.43c-1.434 0-2.628.913-2.886 2.12h-1.847a4.569 4.569 0 00-4.569 4.57v9.464a4.569 4.569 0 004.57 4.569h9.464a4.569 4.569 0 004.569-4.57V13.12a4.569 4.569 0 00-4.57-4.57h-1.846c-.258-1.207-1.451-2.12-2.885-2.12zm2.266 6.823c.51-.51 1.337-.51 1.846 0l.347.346c.51.51.51 1.337 0 1.846l-.577.577-2.193-2.192.577-.577zm-1.269 1.27l2.192 2.192-6.135 6.135a.326.326 0 01-.23.095h-1.731a.326.326 0 01-.327-.326v-1.73c0-.087.035-.17.096-.231l6.135-6.136z",fill:"#fff"})),u.createElement("defs",null,u.createElement("linearGradient",{id:"notes_svg__paint0_linear_11347_30909",x1:6.266,y1:29.845,x2:30.906,y2:2.676,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.23,stopColor:"#FFB81E"}),u.createElement("stop",{offset:1,stopColor:"#FFE098"})),u.createElement("filter",{id:"notes_svg__filter0_d_11347_30909",x:5.777,y:5.124,width:21.866,height:23.987,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",{dy:.326}),u.createElement("feGaussianBlur",{stdDeviation:.816}),u.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),u.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),u.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_11347_30909"}),u.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_11347_30909",result:"shape"}))))},text:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 479 136",fill:"none"},e),u.createElement("path",{d:"M0 132.881V0h20.122l64.732 76.881c3.037 3.417 6.075 7.024 8.732 11.01-.759-5.695-.949-13.857-.949-21.64V0h24.298v132.881H99.661l-67.2-79.918c-3.037-3.417-6.075-7.024-8.732-11.01.76 5.694.949 13.857.949 21.64v69.288H0z",fill:"url(#notes-text_svg__paint0_linear_59620_144)"}),u.createElement("path",{d:"M182.772 135.349c-30.562 0-52.583-23.159-52.583-51.634 0-28.474 22.021-51.824 52.583-51.824 30.563 0 52.583 23.35 52.583 51.824 0 28.475-22.02 51.634-52.583 51.634zm-26.956-51.634c0 15.376 10.631 28.285 26.956 28.285 16.326 0 26.956-12.909 26.956-28.285s-10.63-28.474-26.956-28.474c-16.325 0-26.956 13.098-26.956 28.474z",fill:"url(#notes-text_svg__paint1_linear_59620_144)"}),u.createElement("path",{d:"M278.718 132.881c-19.552 0-30.183-9.112-30.183-30.563V56h-13.857V34.17h13.857V14.236l25.627-2.657v22.59h20.882V56h-20.882v44.99c0 6.264 3.038 9.112 7.973 9.112h10.631v22.779h-14.048z",fill:"url(#notes-text_svg__paint2_linear_59620_144)"}),u.createElement("path",{d:"M348.282 135.349c-30.563 0-51.064-23.159-51.064-51.634 0-28.474 21.451-52.013 51.064-52.013 29.614 0 50.115 23.539 50.115 52.013 0 2.848-.19 5.885-.759 9.112h-73.844c2.847 11.58 11.58 19.742 24.488 19.742 11.01 0 19.553-5.695 24.108-13.288l19.933 14.997c-7.973 12.339-24.488 21.071-44.041 21.071zm-24.488-61.695h48.786c-2.847-11.01-12.149-19.932-24.678-19.932-12.149 0-21.261 8.163-24.108 19.932z",fill:"url(#notes-text_svg__paint3_linear_59620_144)"}),u.createElement("path",{d:"M440.657 135.349c-16.705 0-30.183-5.695-41.004-17.275l17.275-15.756c7.213 8.163 14.807 12.15 23.159 12.15 8.732 0 13.668-4.366 13.668-10.251 0-5.126-2.468-7.973-18.034-11.58-26.386-6.264-30.373-18.224-30.373-30.752 0-17.275 13.668-30.183 36.827-30.183 15.946 0 26.577 3.986 36.638 17.084l-18.604 14.238c-4.746-7.594-10.82-10.63-17.464-10.63-7.024 0-12.339 2.657-12.339 8.731 0 3.417 1.519 6.455 13.288 9.492 28.664 7.403 35.308 18.034 35.308 32.84 0 18.224-16.515 31.892-38.345 31.892z",fill:"url(#notes-text_svg__paint4_linear_59620_144)"}),u.createElement("defs",null,u.createElement("linearGradient",{id:"notes-text_svg__paint0_linear_59620_144",x1:236.012,y1:7.974,x2:236.012,y2:132.881,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FFC953"}),u.createElement("stop",{offset:1,stopColor:"#FFB81E"})),u.createElement("linearGradient",{id:"notes-text_svg__paint1_linear_59620_144",x1:236.012,y1:7.974,x2:236.012,y2:132.881,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FFC953"}),u.createElement("stop",{offset:1,stopColor:"#FFB81E"})),u.createElement("linearGradient",{id:"notes-text_svg__paint2_linear_59620_144",x1:236.012,y1:7.974,x2:236.012,y2:132.881,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FFC953"}),u.createElement("stop",{offset:1,stopColor:"#FFB81E"})),u.createElement("linearGradient",{id:"notes-text_svg__paint3_linear_59620_144",x1:236.012,y1:7.974,x2:236.012,y2:132.881,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FFC953"}),u.createElement("stop",{offset:1,stopColor:"#FFB81E"})),u.createElement("linearGradient",{id:"notes-text_svg__paint4_linear_59620_144",x1:236.012,y1:7.974,x2:236.012,y2:132.881,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{stopColor:"#FFC953"}),u.createElement("stop",{offset:1,stopColor:"#FFB81E"}))))}},pass:{icon:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32",fill:"none"},e),u.createElement("path",{d:"M0 10.568C0 4.731 4.73 0 10.568 0h10.864C27.268 0 32 4.731 32 10.568v10.864C32 27.269 27.268 32 21.432 32H10.568C4.73 32 0 27.268 0 21.432V10.568z",fill:"#fff"}),u.createElement("path",{d:"M0 10.568C0 4.731 4.73 0 10.568 0h10.864C27.268 0 32 4.731 32 10.568v10.864C32 27.269 27.268 32 21.432 32H10.568C4.73 32 0 27.268 0 21.432V10.568z",fill:"url(#pass_svg__paint0_linear_11350_7889)"}),u.createElement("g",{filter:"url(#pass_svg__filter0_d_11350_7889)"},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.328 23.872a.622.622 0 01-.618-.63l.023-1.823 5.177-5.176c-.455-.951-.607-1.976-.458-3.077.15-1.1.644-2.07 1.48-2.906 1.034-1.033 2.274-1.55 3.72-1.55 1.447 0 2.687.517 3.72 1.55 1.034 1.033 1.55 2.273 1.55 3.72 0 1.446-.516 2.686-1.55 3.72a5.14 5.14 0 01-2.836 1.472 5.094 5.094 0 01-3.146-.45l-.218.217v1.858a.622.622 0 01-.622.622h-1.235a.622.622 0 00-.622.623v1.231a.622.622 0 01-.626.622l-3.739-.023zm10.256-9.294a1.555 1.555 0 100-3.11 1.555 1.555 0 000 3.11z",fill:"#fff"})),u.createElement("defs",null,u.createElement("linearGradient",{id:"pass_svg__paint0_linear_11350_7889",x1:5.548,y1:29.127,x2:30.188,y2:1.958,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.23,stopColor:"#B6C4DF"}),u.createElement("stop",{offset:1,stopColor:"#D3DDF5"})),u.createElement("filter",{id:"pass_svg__filter0_d_11350_7889",x:5.99,y:6.534,width:20.652,height:20.625,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",{dy:.544}),u.createElement("feGaussianBlur",{stdDeviation:1.36}),u.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),u.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),u.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_11350_7889"}),u.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_11350_7889",result:"shape"}))))},text:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 370 136",fill:"none"},e),u.createElement("path",{d:"M0 132.881V0h44.8c29.803 0 48.027 14.047 48.027 41.953 0 28.094-18.224 42.711-48.027 42.711H26.576v48.217H0zm26.576-72.135h16.705c14.427 0 22.59-5.885 22.59-18.604 0-12.529-8.163-18.413-22.59-18.413H26.576v37.017zm116.25 74.603c-27.145 0-48.786-22.97-48.786-51.444 0-28.475 21.641-51.824 48.786-51.824 17.085 0 26.007 7.024 31.322 17.654V34.17h25.438v98.712h-24.868v-16.135c-5.315 11.2-14.237 18.603-31.892 18.603zm-23.159-51.634c0 14.997 11.01 28.475 27.336 28.475 16.895 0 27.715-12.909 27.715-28.285s-10.82-28.664-27.715-28.664c-16.326 0-27.336 13.098-27.336 28.474zm128.935 51.634c-16.705 0-30.183-5.695-41.003-17.275l17.274-15.756c7.214 8.163 14.807 12.15 23.159 12.15 8.733 0 13.668-4.366 13.668-10.251 0-5.126-2.468-7.973-18.034-11.58-26.386-6.264-30.372-18.224-30.372-30.752 0-17.275 13.667-30.183 36.827-30.183 15.945 0 26.576 3.986 36.637 17.084l-18.604 14.238c-4.745-7.594-10.82-10.63-17.464-10.63-7.024 0-12.339 2.657-12.339 8.731 0 3.417 1.519 6.455 13.288 9.492 28.665 7.403 35.309 18.034 35.309 32.84 0 18.224-16.516 31.892-38.346 31.892zm82.124 0c-16.705 0-30.183-5.695-41.004-17.275l17.275-15.756c7.213 8.163 14.807 12.15 23.159 12.15 8.732 0 13.668-4.366 13.668-10.251 0-5.126-2.468-7.973-18.034-11.58-26.386-6.264-30.373-18.224-30.373-30.752 0-17.275 13.668-30.183 36.827-30.183 15.946 0 26.577 3.986 36.638 17.084l-18.604 14.238c-4.745-7.594-10.82-10.63-17.464-10.63-7.024 0-12.339 2.657-12.339 8.731 0 3.417 1.519 6.455 13.288 9.492 28.664 7.403 35.308 18.034 35.308 32.84 0 18.224-16.515 31.892-38.345 31.892z",fill:"#A4A5B8"}))}},store:{icon:function(e){if((0,d.isTwakeTheme)())return u.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16",fill:"none"},e),u.createElement("rect",{width:16,height:16,rx:5.284,fill:"#fff"}),u.createElement("rect",{width:16,height:16,rx:5.284,fill:"url(#store_twake_svg__paint0_linear_11291_1430)"}),u.createElement("g",{filter:"url(#store_twake_svg__filter0_d_11291_1430)"},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.796 5.66a1.387 1.387 0 01-.578 1.64v3.633a2.284 2.284 0 01-2.285 2.284H5.14a2.284 2.284 0 01-2.284-2.284V7.296a1.387 1.387 0 01-.573-1.636l.658-1.877c.195-.556.72-.928 1.309-.928h7.579c.59 0 1.114.372 1.309.928l.658 1.877zm-3.871.959c-.134.177-.331.266-.59.266a.635.635 0 01-.49-.223.758.758 0 01-.201-.525v-2.13h1.123l.316 2.015a.786.786 0 01-.158.597zm-2.641.043a.706.706 0 01-.54.223c-.22 0-.4-.086-.54-.259a.73.73 0 01-.15-.604l.316-2.015h1.123v2.13c0 .201-.07.376-.209.525zm-2.648.036a.633.633 0 01-.453.187c-.279 0-.478-.11-.598-.33-.12-.221-.15-.428-.093-.62l.576-1.928H5.19l-.317 2.216a.804.804 0 01-.237.475zm7.923-.144c-.125.22-.327.331-.605.331a.633.633 0 01-.453-.187.804.804 0 01-.238-.475l-.316-2.216h1.093l.605 1.928c.067.192.038.399-.086.62z",fill:"#fff"})),u.createElement("defs",null,u.createElement("linearGradient",{id:"store_twake_svg__paint0_linear_11291_1430",x1:2.774,y1:14.564,x2:15.094,y2:.979,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.23,stopColor:"#3D74FE"}),u.createElement("stop",{offset:1,stopColor:"#91CFFF"})),u.createElement("filter",{id:"store_twake_svg__filter0_d_11291_1430",x:1.387,y:2.203,width:13.304,height:11.993,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),u.createElement("feOffset",{dy:.163}),u.createElement("feGaussianBlur",{stdDeviation:.408}),u.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),u.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),u.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_11291_1430"}),u.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_11291_1430",result:"shape"}))));return u.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32",fill:"none"},e),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 19v8h10v-8h14v12h-3V20h-7v11H2V19h4zM30 2v6H2V2h28z",fill:"#FDD5D5"}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 18.99C0 19.548.453 20 .993 20h30.014A.996.996 0 0032 18.99v-1.98a11 11 0 00-.218-1.99L30 7H2L.218 15.02C.098 15.56 0 16.442 0 17.01v1.98z",fill:"#F52D2D"}))},text:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 440 138",fill:"none"},e),u.createElement("path",{d:"M51.78 137.863c-21.07 0-39.294-8.352-50.874-28.664l22.97-14.617c6.834 13.668 17.844 19.553 29.423 19.553 12.34 0 19.933-6.075 19.933-15.187 0-13.288-14.048-17.464-30.373-21.64-20.502-5.316-33.6-17.275-33.6-37.397C9.259 15.992 28.052.237 56.147.237c20.691 0 33.98 9.111 43.85 24.678L77.219 38.962c-6.454-10.25-12.529-14.997-22.4-14.997-10.63 0-18.413 5.695-18.413 14.617 0 9.871 9.491 13.099 21.07 16.705 15.567 4.936 42.902 11.77 42.902 42.143 0 24.108-18.413 40.433-48.596 40.433z",fill:"url(#store-text_svg__paint0_linear_59617_306)"}),u.createElement("path",{d:"M147.626 135.396c-19.553 0-30.183-9.112-30.183-30.563V58.514h-13.858v-21.83h13.858V16.752l25.627-2.658v22.59h20.881v21.83H143.07v44.99c0 6.265 3.037 9.112 7.973 9.112h10.63v22.78h-14.047z",fill:"url(#store-text_svg__paint1_linear_59617_306)"}),u.createElement("path",{d:"M218.708 137.863c-30.562 0-52.583-23.159-52.583-51.633 0-28.475 22.021-51.824 52.583-51.824 30.563 0 52.583 23.35 52.583 51.824 0 28.474-22.02 51.633-52.583 51.633zM191.752 86.23c0 15.376 10.631 28.284 26.956 28.284 16.326 0 26.956-12.908 26.956-28.284 0-15.377-10.63-28.475-26.956-28.475-16.325 0-26.956 13.098-26.956 28.475z",fill:"url(#store-text_svg__paint2_linear_59617_306)"}),u.createElement("path",{d:"M282.634 135.396V36.684h24.867v18.793c3.417-14.237 13.478-22.02 30.563-21.071v24.108h-3.607c-14.807 0-26.196 9.872-26.196 26.387v50.495h-25.627z",fill:"url(#store-text_svg__paint3_linear_59617_306)"}),u.createElement("path",{d:"M389.038 137.863c-30.563 0-51.064-23.159-51.064-51.633 0-28.475 21.45-52.014 51.064-52.014 29.613 0 50.115 23.54 50.115 52.014 0 2.847-.19 5.884-.759 9.111H364.55c2.847 11.58 11.579 19.743 24.488 19.743 11.01 0 19.552-5.695 24.108-13.288l19.932 14.996c-7.972 12.339-24.488 21.071-44.04 21.071zM364.55 76.169h48.786c-2.847-11.01-12.149-19.932-24.678-19.932-12.149 0-21.261 8.162-24.108 19.932z",fill:"url(#store-text_svg__paint4_linear_59617_306)"}),u.createElement("defs",null,u.createElement("linearGradient",{id:"store-text_svg__paint0_linear_59617_306",x1:417.866,y1:296.396,x2:48.603,y2:-221.128,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.45,stopColor:"#3D74FE"}),u.createElement("stop",{offset:1,stopColor:"#91CFFF"})),u.createElement("linearGradient",{id:"store-text_svg__paint1_linear_59617_306",x1:417.866,y1:296.396,x2:48.603,y2:-221.128,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.45,stopColor:"#3D74FE"}),u.createElement("stop",{offset:1,stopColor:"#91CFFF"})),u.createElement("linearGradient",{id:"store-text_svg__paint2_linear_59617_306",x1:417.866,y1:296.396,x2:48.603,y2:-221.128,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.45,stopColor:"#3D74FE"}),u.createElement("stop",{offset:1,stopColor:"#91CFFF"})),u.createElement("linearGradient",{id:"store-text_svg__paint3_linear_59617_306",x1:417.866,y1:296.396,x2:48.603,y2:-221.128,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.45,stopColor:"#3D74FE"}),u.createElement("stop",{offset:1,stopColor:"#91CFFF"})),u.createElement("linearGradient",{id:"store-text_svg__paint4_linear_59617_306",x1:417.866,y1:296.396,x2:48.603,y2:-221.128,gradientUnits:"userSpaceOnUse"},u.createElement("stop",{offset:.45,stopColor:"#3D74FE"}),u.createElement("stop",{offset:1,stopColor:"#91CFFF"}))))}},home:{icon:p.default,text:function(e){return u.createElement("svg",(0,r.Z)({viewBox:"0 0 890 173",fill:"none"},e),u.createElement("path",{d:"M745.671 136.518c-13.532 0-24.788-4.491-33.769-13.472-8.862-8.981-13.293-20.058-13.293-33.23 0-13.173 4.431-24.25 13.293-33.231 8.981-8.981 20.237-13.472 33.769-13.472 9.101 0 17.244 2.156 24.429 6.467 7.305 4.31 12.993 10.178 17.064 17.603l-13.472 7.544c-2.634-5.269-6.406-9.46-11.316-12.574-4.79-3.113-10.358-4.67-16.705-4.67-9.221 0-16.765 3.114-22.633 9.34-5.867 6.228-8.801 13.892-8.801 22.993 0 9.1 2.934 16.765 8.801 22.991 5.868 6.227 13.412 9.341 22.633 9.341 6.347 0 11.915-1.557 16.705-4.67 4.91-3.114 8.682-7.305 11.316-12.574l13.472 7.544c-4.071 7.425-9.759 13.292-17.064 17.603-7.185 4.311-15.328 6.467-24.429 6.467zm-114.507-.002c-6.945 0-12.873-1.257-17.782-3.772-4.79-2.634-8.443-6.167-10.958-10.598-2.514-4.55-3.772-9.64-3.772-15.268 0-9.46 2.755-16.286 8.263-20.477 5.628-4.191 13.652-6.287 24.07-6.287h30.895v-6.466c0-8.143-1.856-13.772-5.568-16.885-3.593-3.114-9.041-4.67-16.346-4.67-6.826 0-11.795 1.317-14.909 3.951-3.113 2.515-4.85 5.39-5.209 8.622h-15.807c.359-5.149 2.096-9.7 5.209-13.651 3.114-4.072 7.365-7.305 12.754-9.7 5.388-2.395 11.675-3.592 18.86-3.592 7.544 0 14.071 1.197 19.579 3.592 5.509 2.275 9.76 5.928 12.754 10.957 2.993 4.91 4.49 11.436 4.49 19.58v51.911c.12 3.712.419 7.364.898 10.957h-13.831a97.401 97.401 0 01-.718-7.724c-.12-2.515-.18-5.329-.18-8.442-2.515 5.029-6.586 9.28-12.214 12.753-5.629 3.473-12.454 5.209-20.478 5.209zm3.413-14.37c5.03 0 9.58-.898 13.652-2.694 4.191-1.796 7.484-4.431 9.879-7.904 2.515-3.472 3.772-7.724 3.772-12.753v-6.466h-28.201c-5.868 0-10.478 1.197-13.831 3.592-3.353 2.275-5.029 5.928-5.029 10.957 0 4.431 1.556 8.083 4.67 10.957 3.233 2.874 8.263 4.311 15.088 4.311zm-73.792 12.572V0h15.448v134.718h-15.448zm-98.005 37.545h-15.448V44.909h15.448V58.74c3.113-4.55 7.484-8.262 13.112-11.136 5.748-2.994 11.915-4.49 18.502-4.49 12.454 0 22.872 4.55 31.254 13.65 8.503 9.102 12.754 20.119 12.754 33.052s-4.251 23.949-12.754 33.05c-8.382 9.101-18.8 13.652-31.254 13.652-6.587 0-12.754-1.437-18.502-4.311-5.628-2.994-9.999-6.766-13.112-11.316v51.372zm7.364-59.276c5.748 6.227 13.053 9.341 21.915 9.341 8.861 0 16.166-3.114 21.914-9.341 5.748-6.227 8.622-13.95 8.622-23.171s-2.874-16.945-8.622-23.172c-5.748-6.227-13.053-9.34-21.914-9.34-8.862 0-16.167 3.113-21.915 9.34-5.748 6.227-8.622 13.95-8.622 23.172 0 9.22 2.874 16.944 8.622 23.171zm-55.249 21.731l-48.678-44.906v44.906H350.77V0h15.447v79.933l39.158-35.027h20.478l-44.188 39.697 54.067 50.115h-20.837zm-131.719-.001V44.904h15.447v17.424c1.677-5.508 4.91-9.94 9.7-13.292 4.91-3.353 10.059-5.03 15.448-5.03 2.634 0 4.97.24 7.005.719V60.71c-2.155-.958-4.969-1.437-8.442-1.437-6.227 0-11.736 2.695-16.526 8.084-4.79 5.388-7.185 12.992-7.185 22.812v44.547h-15.447zm-68.743 1.801c-13.532 0-24.788-4.491-33.77-13.472-8.861-9.101-13.292-20.178-13.292-33.23 0-13.053 4.431-24.07 13.292-33.051 8.982-9.101 20.238-13.652 33.77-13.652 13.412 0 24.548 4.55 33.41 13.652 8.981 8.98 13.472 19.998 13.472 33.05 0 13.053-4.491 24.13-13.472 33.231-8.862 8.981-19.998 13.472-33.41 13.472zM191.8 112.807c5.868 6.227 13.412 9.341 22.633 9.341 9.22 0 16.705-3.114 22.453-9.341 5.748-6.226 8.622-13.89 8.622-22.991 0-9.101-2.874-16.765-8.622-22.992-5.748-6.227-13.233-9.34-22.453-9.34-9.221 0-16.765 3.113-22.633 9.34-5.748 6.227-8.622 13.89-8.622 22.992 0 9.1 2.874 16.765 8.622 22.991zm-79.714 21.909L80.831 48.137l-31.075 86.579H34.847L0 7.183h17.424l26.584 99.512L80.831 5.027l36.823 101.668 26.764-99.512h17.424l-34.847 127.533h-14.909zm734.429 1.802c-13.771 0-24.968-4.431-33.59-13.292-8.622-8.862-12.933-19.998-12.933-33.41 0-13.293 4.371-24.37 13.113-33.231 8.742-8.981 19.938-13.472 33.59-13.472 12.094 0 22.213 4.072 30.356 12.215 8.263 8.023 12.394 18.98 12.394 32.87 0 1.797-.06 3.354-.179 4.671H815.62c.239 8.383 3.233 15.388 8.981 21.016 5.867 5.628 13.232 8.443 22.094 8.443 12.573 0 21.914-5.21 28.021-15.628l12.214 8.443c-8.741 14.25-22.213 21.375-40.415 21.375zm-29.818-56.223h56.941c-1.197-7.184-4.371-12.873-9.52-17.064-5.029-4.31-11.017-6.466-17.962-6.466-7.066 0-13.412 2.155-19.041 6.466-5.508 4.191-8.981 9.88-10.418 17.064z",fill:"#DBDBDB"}))}}},g=function(e){var t=e.slug,n=e.tag,i=e.className,c=e.children,s=(0,a.Z)(e,v),d=(0,m.useCozyTheme)().isLight,p=b[t];return p?u.createElement("div",{className:"u-flex u-flex-items-center"},u.createElement(l.default,{icon:p.icon,size:"32",className:y["c-apptitle-app-icon"]}),u.createElement(l.default,{icon:f,width:"auto",height:"22",className:o()("u-mr-half","u-w-auto",d?y["c-app-title-light"]:y["c-app-title-dark"])}),u.createElement(l.default,{icon:p.text,width:"auto",height:"22",className:o()("u-w-auto","home"===t?"u-mt-half":void 0)})):u.createElement(h.default,(0,r.Z)({component:n,variant:"h4",className:o()(y["c-apptitle"],i)},s),c)};g.propTypes={slug:s().string,tag:s().string,className:s().string},g.defaultProps={tag:"h1"};let x=g},63293:function(e,t,n){"use strict";n.d(t,{gV:()=>o,h3:()=>r,hl:()=>a});var r=["sunrise","downy","sugarCoral","pinkBonnet","blueMana","nightBlue","snowPea","pluviophile","cornflower","paleGreen","moonBlue"],a={sunrise:"linear-gradient(136deg, #F8D280 14.84%, #F2AC69 96.03%)",downy:"linear-gradient(136deg, #81EAD4 14.84%, #62C6B7 96.03%)",sugarCoral:"linear-gradient(136deg, #F19E86 14.84%, #F95967 96.03%)",pinkBonnet:"linear-gradient(136deg, #E4ABF0 14.84%, #D96EED 96.03%)",blueMana:"linear-gradient(136deg, #85D9FD 14.84%, #2A9EFC 96.03%)",nightBlue:"linear-gradient(136deg, #80AEFF 39.32%, #883DFE 96.03%)",snowPea:"linear-gradient(136deg, #BDF4A1 14.84%, #52CE64 96.03%)",pluviophile:"linear-gradient(136deg, #A1D6F4 14.84%, #52CEC2 96.03%)",cornflower:"linear-gradient(135deg, #86D9D3 0%, #1CCFB4 100%)",paleGreen:"linear-gradient(135deg, #E2FA17 0%, #75D8CB 100%)",moonBlue:"linear-gradient(136deg, #6DCFFF 14.84%, #3D88F8 96.03%)"},i=Object.values(r).filter(Boolean),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Array.from(e.toUpperCase()).map(function(e){return e.charCodeAt(0)}).reduce(function(e,t){return e+t},0)%i.length;return i[t]}},88230:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>y});var r=n(14106),a=n(51894),i=n(65691),o=n(31012),c=n(94184),s=n.n(c),u=n(45697),l=n.n(u),d=n(67294),f=n(63293),p=n(41120),h=["className","color","size","border","innerBorder","disabled"],m=(0,p.Z)(function(e){return{colorDefault:{color:function(t){return t.color?e.palette.primary.contrastText:""},background:function(e){var t=e.color;return f.hl[t]}}}}),v=function(e){var t=e.className,n=e.color,r=e.size,c=e.border,u=e.innerBorder,l=e.disabled,p=(0,i.Z)(e,h),v="string"==typeof p.children?(0,f.gV)(p.children):void 0,y=m({color:"none"===n?void 0:f.h3.includes(n)?n:v});return d.createElement(o.Z,(0,a.Z)({classes:y,className:s()(t,"size-".concat(r),{disabled:!!l,border:!!c,innerBorder:!!u})},p))};v.propTypes={className:l().string,size:l().oneOfType([l().oneOf(["xs","s","m","l","xl"]),l().number]),color:l().oneOf([].concat((0,r.Z)(f.h3),["none"])),disabled:l().bool},v.defaultProps={size:"m"};let y=v},98954:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(16223).Z},41496:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>g});var r=n(51894),a=n(91888),i=n(65691),o=n(282),c=n(94184),s=n.n(c),u=n(45697),l=n.n(u),d=n(67294),f=n(32419),p=n(4314),h=["variant","className","color","label","busy","disabled","height","endIcon"],m=["variant","className"],v=["success","error","warning","info"],y=(0,d.forwardRef)(function(e,t){var n=e.variant,c=e.className,u=e.color,l=e.label,m=e.busy,y=e.disabled,b=e.height,g=e.endIcon,x=(0,i.Z)(e,h),w=v.includes(u)?u:"primary",k="text"!==n||v.includes(u)?"primary":u;return d.createElement(o.Z,(0,r.Z)({},x,{variant:n,ref:t,className:s()((0,a.Z)({},"customColor-".concat(w),w),(0,a.Z)({},"customSize-".concat(b),b),c),color:k,disabled:y||m,endIcon:m?d.createElement(f.default,{icon:p.Z,spin:!0,"aria-hidden":!0,focusable:"false"}):g,disableElevation:!0}),l)});y.displayName="DefaultButton",y.defaultProps={variant:"contained",color:"primary"};var b=(0,d.forwardRef)(function(e,t){var n=e.variant,a=e.className,o=void 0===a?"":a,c=(0,i.Z)(e,m);switch(n){case"ghost":return d.createElement(y,(0,r.Z)({className:"ghost ".concat(o),variant:"outlined"},c,{ref:t}));case"secondary":return d.createElement(y,(0,r.Z)({variant:"outlined",className:o},c,{ref:t}));case"text":return d.createElement(y,(0,r.Z)({variant:"text",className:o},c,{ref:t}));default:return d.createElement(y,(0,r.Z)({className:o},c,{ref:t}))}});b.displayName="Buttons",b.propTypes={variant:l().oneOf(["primary","secondary","ghost","text"]),color:l().oneOf(["default","inherit","primary","secondary","success","error","warning","info"]),height:l().oneOf(["default","auto"])},b.defaultProps={variant:"primary",height:"default"};let g=b},74096:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(51894),a=n(91888),i=n(65691),o=n(42599),c=n(94184),s=n.n(c),u=n(45697),l=n.n(u),d=n(67294),f=["label","variant","color","className"],p=(0,d.forwardRef)(function(e,t){var n=e.label,c=e.variant,u=void 0===c?"default":c,l=e.color,p=void 0===l?"primary":l,h=e.className,m=(0,i.Z)(e,f);return d.createElement(o.Z,(0,r.Z)({ref:t,className:s()(h,(0,a.Z)({noLabel:!n,ghost:"ghost"===u},"customColor-".concat(p),p)),label:n,variant:"active"===u?"default":"outlined",color:"active"===u?"primary":"default"},m))});p.propTypes={label:l().oneOfType([l().string,l().object]),variant:l().oneOf(["default","active","ghost"]),color:l().oneOf(["primary","success","error","warning","info"]),className:l().string};let h=p},77843:function(e,t,n){"use strict";n.r(t),n.d(t,{createSizeStyle:()=>d,default:()=>p});var r=n(94184),a=n.n(r),i=n(45697),o=n.n(i),c=n(67294),s=n(92951),u={xsmall:16,small:32,medium:40,large:48,xlarge:64},l={xsmall:16,small:24,medium:32,large:48,xlarge:64},d=function(e){var t=(0,s.isTwakeTheme)()?l:u,n=Number.isInteger(e)?e:t[e];return{"--circleSize":"".concat(n,"px")}},f=function(e){var t=e.children,n=e.backgroundColor,r=e.size,i=e.className,o=Object.assign({backgroundColor:n},d(r));return c.createElement("div",{className:a()("styles__c-circle___1DuMR",i),style:o},c.createElement("span",{className:"styles__c-circle-text___1jFgD"},t))};f.propTypes={backgroundColor:o().string,size:o().oneOfType([o().oneOf(["xsmall","small","medium","large","xlarge"]),o().number]),className:o().string},f.defaultProps={size:"medium",className:""};let p=f},55184:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(52795).Z},44318:function(e,t,n){"use strict";n.r(t),n.d(t,{FixedActionsDialog:()=>eg,AllowLocationDialog:()=>eW,AuthentificationDialog:()=>tc,ConfirmDialog:()=>em,Dialog:()=>eu,DialogBackButton:()=>g,FixedDialog:()=>ew,IllustrationDialog:()=>eE,PermissionDialog:()=>ej,TopAnchoredDialog:()=>eA,useCozyDialog:()=>H,DialogCloseButton:()=>_,InstallFlagshipAppDialog:()=>eB});var r,a,i=n(51894),o=n(65691),c=n(45697),s=n.n(c),u=n(67294);let l={en:{closeButton:"Close",backButton:"Back"},fr:{closeButton:"Fermer",backButton:"Retour"},es:{closeButton:"Cerrar",backButton:"Atr\xe1s"}};var d=n(32419),f=n(9047),p=n(92951);let h=function(e){if((0,p.isTwakeTheme)())return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{d:"M16 7H3.83l5.59-5.59L8 0 0 8l8 8 1.41-1.41L3.83 9H16V7z"}));return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{d:"M3.414 7h11.58C15.548 7 16 7.444 16 8c0 .552-.45 1-1.007 1H3.414l5.293 5.293a1 1 0 01-1.414 1.414l-7-7a1 1 0 010-1.414l7-7a1 1 0 111.414 1.414L3.414 7z",fillRule:"evenodd"}))};var m=n(68659),v=["onClick"],y=(0,m.Z)(l),b=function(e){var t=e.onClick,n=(0,o.Z)(e,v),r=y().t;return u.createElement("div",{className:"styles__DialogBackButton___1c7yH"},u.createElement(f.default,(0,i.Z)({onClick:t},n,{"aria-label":r("backButton"),className:"dialogIconButton",size:"medium"}),u.createElement(d.default,{icon:h})))};b.propTypes={onClick:s().func.isRequired};let g=b,x=function(e){if((0,p.isTwakeTheme)())return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{d:"M15 2.41L13.59 1 8 6.59 2.41 1 1 2.41 6.59 8 1 13.59 2.41 15 8 9.41 13.59 15 15 13.59 9.41 8 15 2.41z"}));return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{fillRule:"evenodd",d:"M8 6.59l5.3-5.3a1 1 0 011.4 1.42L9.42 8l5.3 5.3a1 1 0 01-1.42 1.4L8 9.42l-5.3 5.3a1 1 0 11-1.4-1.42L6.58 8l-5.3-5.3A1 1 0 112.7 1.3L8 6.58z"}))};var w=["onClick"],k=(0,m.Z)(l),O=function(e){var t=e.onClick,n=(0,o.Z)(e,w),r=k().t;return u.createElement("div",{className:"styles__DialogCloseButton___cxKPO"},u.createElement(f.default,(0,i.Z)({onClick:t},n,{"aria-label":r("closeButton"),className:"dialogIconButton",size:"medium"}),u.createElement(d.default,{icon:x})))};O.propTypes={onClick:s().func.isRequired};let _=O;var E=n(94184),S=n.n(E);let C={size:s().oneOf(["small","medium","large","full"]),open:s().bool.isRequired,disableTitleAutoPadding:s().bool,background:s().string,title:s().node,content:s().node,actions:s().node,actionsLayout:s().oneOf(["row","column"]),onClose:s().func,onBack:s().func};var P=n(91888),j=n(31573),A=n(20170),D=n(82285),T=["fullScreen","isFullscreen"],M=(0,u.forwardRef)(function(e,t){var n=e.fullScreen,r=e.isFullscreen,a=(0,o.Z)(e,T);return n||r?u.createElement(D.Z,(0,i.Z)({ref:t,direction:"up"},a)):u.createElement(A.Z,(0,i.Z)({ref:t},a))});M.propTypes={fullScreen:s().bool};var R=n(72339),I=n(41120),N=["size","actions","actionsLayout","title","content","open","opened","onBack","onClose","align","disableTitleAutoPadding","isFluidTitle","disableGutters","titleRef","background","componentsProps"];function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L=0,B=["small","medium","large","full"],U=(0,I.Z)({paper:{background:function(e){var t=e.background;return null!=t?t:"var(--paperBackgroundColor)"}}});let H=function(e){var t,n=e.size,r=(e.actions,e.actionsLayout,e.title,e.content,e.open),a=e.opened,i=e.onBack,c=e.onClose,s=e.align,l=e.disableTitleAutoPadding,d=e.isFluidTitle,f=e.disableGutters,p=e.titleRef,h=e.background,m=e.componentsProps,v=(0,o.Z)(e,N),y=(0,R.default)().isMobile,b=(0,u.useState)(L++),g=(0,j.Z)(b,1)[0],x=B.includes(n)?"".concat(n):"medium",w="small"!==n&&y,k=U({background:h}),O=z(z({"aria-labelledby":"modal-title-".concat(g),fullScreen:w,open:void 0!==r?r:a,onClose:c,TransitionComponent:M},v),{},{classes:z(z({},v.classes),{},{paper:"".concat(x," ").concat(k.paper," ").concat(v.classes?v.classes.paper:""),scrollPaper:"top"==s?"alignTop":""}),TransitionProps:z({fullScreen:w},v.TransitionProps)}),_=!w&&c,E=i||w&&c;return{dialogProps:O,dialogTitleProps:z(z({},null==m?void 0:m.dialogTitle),{},{id:"modal-title-".concat(g),ref:p,disableTypography:!0,className:"cozyDialogTitle "+S()({"u-ellipsis":!d,dialogTitleFluid:d,dialogTitleWithClose:_&&!l,dialogTitleWithBack:E&&!l},null==m?void 0:null===(t=m.dialogTitle)||void 0===t?void 0:t.className)}),listItemProps:{classes:{root:"listItem--dialog"}},id:g,fullScreen:w,dividerProps:z(z({},null==m?void 0:m.divider),{},{classes:{root:"divider--dialog"}}),dialogActionsProps:z(z({},null==m?void 0:m.dialogActions),{},{classes:{root:"cozyDialogActions"}}),dialogContentProps:z(z({},null==m?void 0:m.dialogContent),{},{classes:{root:S()({disableGutters:f})},className:"cozyDialogContent"})}};var G=n(52663),W=n(59693),q=n(8920),V=n(25976),Q=n(22960),Z=n(32202),Y=n(10923),J=n(24060);(r=a||(a={})).BackgroundDefault="default",r.BackgroundPaper="paper",r.CozyBarBackground="background-color",r.CozyBarClass=".coz-bar-wrapper",r.CozyBarPrimaryClass="coz-theme-primary",r.DialogClass=".MuiPaper-root",r.OverlayActive="rgba(0, 0, 0, 0.5)",r.OverlayTransparent="transparent",r.RootModalColor="color",r.SidebarID="sidebar";var K=function(e){var t=e.cozybar,n=e.fullscreen,r=e.sidebar,i=e.rootModal,o=e.theme,c=t&&!i;return n?{bottomBackground:o.palette.background.paper,bottomTheme:Y.tP.Dark,topBackground:o.palette.background.paper,topTheme:Y.tP.Dark}:{bottomBackground:i?void 0:o.palette.background[r?a.BackgroundDefault:a.BackgroundPaper],bottomTheme:Y.tP.Light,bottomOverlay:a.OverlayActive,topOverlay:a.OverlayActive,topBackground:c?getComputedStyle(t).getPropertyValue(a.CozyBarBackground):void 0,topTheme:Y.tP.Light}},$=function(e){var t=e.rootModal,n=e.theme,r=e.immersive,i=e.sidebar,o=e.cozybar,c=e.isLight,s=t&&.5>(0,W.H3)(getComputedStyle(t).getPropertyValue(a.RootModalColor)),u=!t,l=o&&!t,d=s||!r&&!(o&&o.classList.contains(a.CozyBarPrimaryClass))&&c;return{bottomBackground:u?n.palette.background[i?a.BackgroundDefault:a.BackgroundPaper]:void 0,bottomTheme:s||!r&&c?Y.tP.Dark:Y.tP.Light,bottomOverlay:a.OverlayTransparent,topOverlay:a.OverlayTransparent,topBackground:l?getComputedStyle(o).getPropertyValue(a.CozyBarBackground):void 0,topTheme:d?Y.tP.Dark:Y.tP.Light}},X=function(){var e=document.querySelectorAll(a.DialogClass);return e.length>1?e[0]:null},ee=function(e,t,n,r){var a=(0,Q.useWebviewIntent)();(0,u.useEffect)(function(){return e&&(0,Y.Lu)(a,t,"".concat(r||"unknown"," (onOpenMount)")),function(){e&&void 0!==e&&(0,Y.Lu)(a,n,"".concat(r||"unknown"," (onOpenUnmount)"))}},[e,a])},et=(0,V.isFlagshipApp)()||Z.q6?function(e,t){var n=(0,q.Z)(),r=(0,J.useCozyTheme)().isLight,i=document.querySelector(a.CozyBarClass),o=document.getElementById(a.SidebarID),c=X(),s=!!(0,Z.ym)().immersive;ee(e,K({fullscreen:t,theme:n,sidebar:o,rootModal:c,cozybar:i,isLight:r}),$({rootModal:c,theme:n,immersive:s,sidebar:o,cozybar:i,isLight:r}),["cozy-ui/Dialog",t?"--fullScreen":"",c?"--stacked":"",s?"--immersive":""].join(""))}:function(){},en=["className"],er=function(e){var t=e.className,n=(0,o.Z)(e,en),r=(0,J.useCozyTheme)(),a=r.type,c=r.variant,s=(0,p.isTwakeTheme)()?"Twake":"Cozy";return et(n.open,n.fullScreen),u.createElement(G.Z,(0,i.Z)({className:S()("".concat(s,"Theme--").concat(a,"-").concat(c),t)},n))};er.defaultProps={disableEnforceFocus:!0};let ea=n(66083).Z,ei=n(29525).Z,eo=n(66856).Z;var ec=n(20958),es=function(e){var t=e.onClose,n=e.onBack,r=e.title,a=e.content,o=e.actions,c=e.actionsLayout,s=H(e),l=s.dialogProps,d=s.dialogTitleProps,f=s.fullScreen,p=s.id,h=s.dividerProps,m=s.dialogActionsProps,v=s.dialogContentProps,y=n||t;return u.createElement(er,l,!f&&t&&u.createElement(_,{onClick:t,"data-testid":"modal-close-button-".concat(p)}),!f&&n&&u.createElement(g,{onClick:n,"data-testid":"modal-back-button-".concat(p)}),f&&y&&u.createElement(g,{"data-testid":"modal-backclose-button-".concat(p),onClick:y}),r&&u.createElement(u.Fragment,null,u.createElement(ea,d,r),u.createElement(ec.default,h)),u.createElement(ei,v,u.createElement("div",{className:"dialogContentInner withFluidActions"},u.createElement("div",{className:S()("dialogContentWrapper",{withActions:!!o})},a),o&&u.createElement(eo,(0,i.Z)({},m,{disableSpacing:!0,className:S()("dialogActionsFluid",{columnLayout:"column"==c},m.className)}),o))))};es.propTypes=C;let eu=es;var el=n(51991),ed=n.n(el);function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eh=function(e){var t=e.onClose,n=e.onBack,r=e.title,a=e.content,o=e.actions,c=e.actionsLayout,s=H(ep(ep({},e),{},{isFluidTitle:!0})),l=s.dialogProps,d=s.dialogTitleProps,f=s.fullScreen,p=s.id,h=s.dialogActionsProps,m=s.dialogContentProps,v=n||t;return u.createElement(er,l,!f&&t&&u.createElement(_,{onClick:t,"data-testid":"modal-close-button-".concat(p)}),!f&&n&&u.createElement(g,{"data-testid":"modal-back-button-".concat(p),onClick:n}),f&&v&&u.createElement(g,{"data-testid":"modal-backclose-button-".concat(p),onClick:v}),u.createElement(ei,m,u.createElement("div",{className:"dialogContentInner withFluidActions"},r&&u.createElement("div",{className:"dialogTitleFluidContainer"},u.createElement(ea,d,r)),u.createElement("div",{className:ed()("dialogContentWrapper",{withActions:!!o})},a),o&&u.createElement(eo,(0,i.Z)({},h,{disableSpacing:!0,className:ed()("dialogActionsFluid",{columnLayout:"column"==c},h.className)}),o))))};eh.defaultProps={size:"small"},eh.propTypes=C;let em=eh;function ev(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ey(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ev(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ev(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eb=function(e){var t=e.onClose,n=e.onBack,r=e.title,a=e.content,o=e.actions,c=e.actionsLayout,s=H(ey(ey({},e),{},{isFluidTitle:!0})),l=s.dialogProps,d=s.dialogTitleProps,f=s.fullScreen,p=s.id,h=s.dividerProps,m=s.dialogActionsProps,v=s.dialogContentProps,y=n||t;return u.createElement(er,l,!f&&t&&u.createElement(_,{"data-testid":"modal-close-button-".concat(p),onClick:t}),!f&&n&&u.createElement(g,{"data-testid":"modal-back-button-".concat(p),onClick:n}),f&&y&&u.createElement(g,{"data-testid":"modal-backclose-button-".concat(p),onClick:y}),u.createElement(ei,v,u.createElement("div",{className:"dialogContentInner"},r&&u.createElement("div",{className:"dialogTitleFluidContainer"},u.createElement(ea,d,r)),a)),u.createElement(ec.default,h),o&&u.createElement(eo,(0,i.Z)({},m,{disableSpacing:!0,className:ed()({columnLayout:"column"==c},m.className)}),o))};eb.propTypes=C;let eg=eb;var ex=function(e){var t=e.onClose,n=e.onBack,r=e.title,a=e.content,o=e.actions,c=e.actionsLayout,s=H(e),l=s.dialogProps,d=s.dialogTitleProps,f=s.fullScreen,p=s.id,h=s.dividerProps,m=s.dialogActionsProps,v=s.dialogContentProps,y=n||t;return u.createElement(er,l,!f&&t&&u.createElement(_,{"data-testid":"modal-close-button-".concat(p),onClick:t}),!f&&n&&u.createElement(g,{"data-testid":"modal-back-button-".concat(p),onClick:n}),f&&y&&u.createElement(g,{"data-testid":"modal-backclose-button-".concat(p),onClick:y}),r&&u.createElement(u.Fragment,null,u.createElement(ea,d,r),u.createElement(ec.default,h)),u.createElement(ei,v,u.createElement("div",{className:"dialogContentInner"},a)),u.createElement(ec.default,h),o&&u.createElement(eo,(0,i.Z)({},m,{disableSpacing:!0,className:S()({columnLayout:"column"==c},m.className)}),o))};ex.propTypes=C;let ew=ex;function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e_=function(e){var t=e.onClose,n=e.onBack,r=e.title,a=e.content,o=e.actions,c=e.actionsLayout,s=H(eO(eO({},e),{},{isFluidTitle:!0,disableTitleAutoPadding:!0})),l=s.dialogProps,d=s.dialogTitleProps,f=s.id,p=s.fullScreen,h=s.dialogActionsProps,m=s.dialogContentProps,v=n||t;return u.createElement(er,l,!p&&t&&u.createElement(_,{"data-testid":"modal-close-button-".concat(f),onClick:t}),!p&&n&&u.createElement(g,{onClick:n,"data-testid":"modal-back-button-".concat(f)}),p&&v&&u.createElement(g,{"data-testid":"modal-backclose-button-".concat(f),onClick:v}),u.createElement(ei,m,u.createElement("div",{className:"dialogContentInner withFluidActions u-pt-1-half"},r&&u.createElement("div",{className:"dialogTitleFluidContainer"},u.createElement(ea,(0,i.Z)({},d,{className:ed()("u-flex u-flex-justify-center",d.className)}),r)),u.createElement("div",{className:ed()("dialogContentWrapper",{withActions:!!o})},a),o&&u.createElement(eo,(0,i.Z)({},h,{disableSpacing:!0,className:ed()("dialogActionsFluid",{columnLayout:"column"==c},h.className)}),o))))};e_.propTypes=C;let eE=e_;var eS=n(9758),eC=(0,I.Z)({floatingIcon:{top:"-2.25rem",width:"4.5rem",height:"4.5rem"}}),eP=function(e){var t=e.open,n=e.icon,r=e.title,a=e.content,i=e.actions,o=e.actionsLayout,c=e.onClose,s=eC();return u.createElement(J.default,{variant:"inverted"},u.createElement(em,{open:t,size:"small",disableTitleAutoPadding:!0,classes:{paper:"overflow"},componentsProps:{dialogTitle:{className:"u-ta-center u-pt-2 u-pb-half"}},title:u.createElement(u.Fragment,null,u.createElement(J.default,{variant:"normal",className:"u-flex u-flex-justify-center"},u.createElement(eS.default,{square:!0,elevation:2,className:S()(s.floatingIcon,"u-pos-absolute u-bdrs-circle u-flex u-bg-white")},u.createElement(d.default,{className:"u-m-auto",icon:n,size:48}))),r),content:a,actions:i,actionsLayout:o,onClose:c}))};eP.propTypes={open:s().bool.isRequired,icon:s().func.isRequired,title:s().string.isRequired,content:s().node,actions:s().node,actionsLayout:s().oneOf(["row","column"]),onClose:s().func};let ej=eP,eA=(0,n(68893).Z)({scrollPaper:{alignItems:"start"},paper:{}})(function(e){return u.createElement(er,e)}),eD=n.p+"static/image/QRCodeInstallFlagshipAppDialog.de9b11bb.png",eT=n.p+"static/image/appstore.9a9d6acd.png",eM=n.p+"static/image/playstore.a473b4eb.png";var eR=n(41256);let eI=(0,eR.Z)({en:{cancel:"Cancel",allow:"Allow","allow-location-dialog":{title:"Allow access to your location",description:"Your Cozy needs to always be authorised to access your phone's location in order to memorise and help you analyse your movements, even when the app is not in use.\n\nIt will NEVER be passed on to anyone without your request.\n\nYou can deactivate this feature from the Coach CO2 app settings."},"install-flagship-app-dialog":{title:"Scan the QR Code",text:"or go directly to the <img src=%{iosIconSrc} /> <a href='%{iosUrl}' class='u-link' target='_blank' rel='noopener'>App Store</a><br>or <img src=%{androidIconSrc} /> <a href='%{androidUrl}' class='u-link' target='_blank' rel='noopener'>Play Store</a> to install the Cozy Cloud app",a11n:"Go to the Cozy Cloud application download page"},"authentification-dialog":{title:"Login","title-oidc":"Cozy Pass",subtitle:"For security, please confirm your identity",label:"Cozy password","label-oidc":"Cozy Pass password",abort:"Leave",unlock:"Unlock","forgotten-password":"I forgot my password",errors:{invalid_password:"Incorrect password, try again.",server_error:"Something went wrong with the server. Please, reload the page."}}},fr:{cancel:"Annuler",allow:"Autoriser","allow-location-dialog":{title:"Autoriser l'acc\xe8s \xe0 votre position",description:"Votre Cozy a besoin d'\xeatre toujours autoris\xe9 \xe0 acc\xe9der \xe0 la position de votre t\xe9l\xe9phone pour m\xe9moriser, et vous aider \xe0 analyser vos d\xe9placements, m\xeame lorsque l'app n'est pas utilis\xe9e ou affich\xe9e.\n\nElle ne sera JAMAIS transmise \xe0 qui que ce soit sans votre demande.\n\nVous pourrez d\xe9sactiver cette fonctionnalit\xe9 depuis les param\xe8tres de l'app Coach CO2."},"install-flagship-app-dialog":{title:"Scannez le QR Code",text:"ou rendez vous directement sur <img src=%{iosIconSrc} /> <a href='%{iosUrl}' class='u-link' target='_blank' rel='noopener'>l’App Store</a><br>ou sur le <img src=%{androidIconSrc} /> <a href='%{androidUrl}' class='u-link' target='_blank' rel='noopener'>Play Store</a> pour installer l’app Cloud Personnel Cozy",a11n:"Aller sur la page de t\xe9l\xe9chargement de l'application Cloud Personnel Cozy"},"authentification-dialog":{title:"Authentification","title-oidc":"Cozy Pass",subtitle:"Par s\xe9curit\xe9, merci de confirmer votre identit\xe9",label:"Mot de passe Cozy","label-oidc":"Mot de passe Cozy Pass",abort:"Quitter",unlock:"D\xe9verrouiller","forgotten-password":"J'ai oubli\xe9 mon mot de passe",errors:{invalid_password:"Mot de passe incorrect, essayer \xe0 nouveau.",server_error:"Une erreur s'est produite. Merci de recharger la page."}}}});var eN=n(25750),eF=n(32692),ez=n(96122),eL=(0,u.forwardRef)(function(e,t){var n=e.onClose,r=e.playStoreUrl,a=e.appStoreUrl,i=e.QRCode,o=(0,ez.useI18n)().t;return u.createElement(eE,{open:!0,ref:t,size:"small",onClose:n,componentsProps:{dialogTitle:{className:"u-pt-2-half"}},title:u.createElement(eN.default,{href:"https://cozy.io/download",target:"_blank",rel:"noopener noreferrer"},u.createElement("img",{src:i,width:"100%",alt:"","aria-hidden":!0}),u.createElement("span",{className:"u-visuallyhidden"},o("install-flagship-app-dialog.a11n"))),content:u.createElement("div",{className:"u-ta-center"},u.createElement(eF.default,{gutterBottom:!0,variant:"h3",color:"textPrimary"},o("install-flagship-app-dialog.title")),u.createElement(eF.default,{color:"textSecondary",className:"u-ta-center",dangerouslySetInnerHTML:{__html:o("install-flagship-app-dialog.text",{androidUrl:r,androidIconSrc:eM,iosUrl:a,iosIconSrc:eT})}}))})});eL.propTypes={onClose:s().func,playStoreUrl:s().string,appStoreUrl:s().string,QRCode:s().any},eL.defaultProps={playStoreUrl:"https://play.google.com/store/apps/details?id=io.cozy.flagship.mobile",appStoreUrl:"https://apps.apple.com/app/my-cozy/id1600636174",QRCode:eD},eL.displayName="InstallFlagshipAppDialog";let eB=eI(eL),eU=function(e){return u.createElement("svg",(0,i.Z)({viewBox:"0 0 172 128",fill:"none"},e),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51.533 125.273c2.862 1.018 10.204 1.899 16.121 2.251 16.158.963 38.736.439 48.306-1.331 9.642-1.785 10.07-4.485-14.44-5.821-20.872-1.139-45.234.484-50.444 2.901-1.399.648-1.322 1.369.457 2z",fill:"#BBD9FD"}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M92.189 18.264l-34.745 7.19c-5.051 1.052-8.293 5.965-7.248 10.99l14.47 69.251c1.045 5.03 5.99 8.247 11.037 7.217l34.749-7.217a9.282 9.282 0 007.243-10.99l-14.464-69.24c-1.051-5.025-5.99-8.253-11.042-7.201z",fill:"#297EF1"}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M108.213 83.562L68.9 91.715 57.72 38.219l39.324-8.142 11.169 53.485zm-14.002 16.2a3.515 3.515 0 01-4.85.998 3.456 3.456 0 01-1.507-2.209 3.468 3.468 0 01.51-2.615c1.092-1.558 3.204-1.992 4.844-1.009a3.475 3.475 0 011.013 4.824l-.01.01z",fill:"#BBD9FD"}),u.createElement("path",{d:"M131.104 0c-18.777 0-34 15.222-34 34l.004.46a33.997 33.997 0 0017.697 29.386l.241.129.094-.163c-.507.853-.823 1.741-.823 2.623 0 1.898.905 3.494 2.734 4.132l.307.102c3.468 1.092 6.602.057 10.395-2.599l.289-.207.749.06c.767.051 1.539.077 2.313.077 18.778 0 34-15.222 34-34s-15.222-34-34-34z",fill:"#fff"}),u.createElement("path",{d:"M131.104 0c-18.777 0-34 15.222-34 34l.004.46a33.997 33.997 0 0017.697 29.386l.241.129.094-.163c-.507.853-.823 1.741-.823 2.623 0 1.898.905 3.494 2.734 4.132l.307.102c3.468 1.092 6.602.057 10.395-2.599l.289-.207.749.06c.767.051 1.539.077 2.313.077 18.778 0 34-15.222 34-34s-15.222-34-34-34zm0 4c16.569 0 30 13.431 30 30 0 16.569-13.431 30-30 30a30.39 30.39 0 01-3.395-.19l-.773-.087-1.19.867c-2.986 2.143-5.098 2.895-7.163 2.27l-.214-.07c-.048-.017-.052-.023-.052-.356 0-.038.09-.29.241-.544l.081-.13a7.163 7.163 0 00.964-2.237l.392-1.598-1.493-.692A30.001 30.001 0 01101.104 34c0-16.569 13.432-30 30-30z",fill:"#BBD9FD"}),u.createElement("path",{d:"M144.667 29.333c0 7.992-9.776 20.872-12.586 24.41a.945.945 0 01-1.495 0C127.776 50.204 118 37.324 118 29.332 118 21.97 123.97 16 131.333 16c7.364 0 13.334 5.97 13.334 13.333z",fill:"#97ECA1"}),u.createElement("circle",{cx:131.333,cy:29.333,fill:"#09AE1C",r:5.333}))};var eH=n(41496),eG=(0,u.forwardRef)(function(e,t){var n=e.onClose,r=e.onAllow,a=e.description,i=(0,ez.useI18n)().t;return u.createElement(eE,{open:!0,ref:t,size:"small",onClose:n,title:u.createElement("div",{className:"u-flex u-flex-column u-flex-items-center"},u.createElement(d.default,{icon:eU,width:128,height:128}),u.createElement(eF.default,{variant:"h3",className:"u-ta-center"},i("allow-location-dialog.title"))),content:u.createElement("div",{className:"u-ta-center"},u.createElement(eF.default,{gutterBottom:!0,variant:"body1",color:"textPrimary",style:{whiteSpace:"pre-line"}},a||i("allow-location-dialog.description"))),actions:u.createElement(u.Fragment,null,u.createElement(eH.default,{variant:"secondary",label:i("cancel"),onClick:n}),u.createElement(eH.default,{variant:"primary",label:i("allow"),onClick:r}))})});eG.propTypes={onClose:s().func,onAllow:s().func,description:s().string},eG.displayName="AllowLocationDialog";let eW=eI(eG);var eq=n(16396);let eV=function(e){return u.createElement("svg",(0,i.Z)({viewBox:"0 0 64 64",fill:"none"},e),u.createElement("path",{d:"M0 35.333c0 9.819 7.96 17.778 17.778 17.778h28.444c9.819 0 17.778-7.96 17.778-17.778 0-8.705-6.258-15.95-14.52-17.48C47.95 9.591 40.706 3.333 32 3.333c-8.706 0-15.95 6.258-17.48 14.52C6.257 19.383 0 26.628 0 35.333z",fill:"#B3D3FF"}),u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.667 35.445A6.668 6.668 0 0032 22.667a6.667 6.667 0 00-2.667 12.778v5.888a2.667 2.667 0 105.334 0v-5.888z",fill:"#297EF2"}))},eQ=function(e){if((0,p.isTwakeTheme)())return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 11"},e),u.createElement("path",{d:"M8 1.5a7.105 7.105 0 016.415 4A7.1 7.1 0 018 9.5a7.098 7.098 0 01-6.415-4c1.2-2.451 3.659-4 6.415-4zM8 .045C4.364.045 1.258 2.307 0 5.5c1.258 3.193 4.364 5.454 8 5.454s6.742-2.261 8-5.454C14.742 2.307 11.636.045 8 .045zm0 3.637a1.819 1.819 0 11-.001 3.637A1.819 1.819 0 018 3.682zm0-1.455A3.278 3.278 0 004.727 5.5 3.278 3.278 0 008 8.773 3.278 3.278 0 0011.273 5.5 3.278 3.278 0 008 2.227z"}));return u.createElement("svg",(0,i.Z)({viewBox:"0 0 20 20"},e),u.createElement("path",{fillRule:"evenodd",d:"M1 10s3-6 9-6 9 6 9 6-3 6-9 6-9-6-9-6zm9 4a4 4 0 100-8 4 4 0 000 8zm0-2a2 2 0 100-4 2 2 0 000 4z"}))},eZ=function(e){if((0,p.isTwakeTheme)())return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{d:"M10.982 8.337L9.927 7.282c.11-.57-.054-1.103-.49-1.6-.437-.497-1-.69-1.692-.582L6.691 4.046c.206-.097.415-.17.627-.219.212-.048.44-.072.682-.072.91 0 1.682.318 2.318.954a3.16 3.16 0 01.955 2.318c0 .243-.024.47-.073.682a3.085 3.085 0 01-.218.628zm2.327 2.29L12.255 9.61c.46-.351.87-.736 1.227-1.154.357-.418.664-.894.918-1.428a7.15 7.15 0 00-2.61-2.918C10.659 3.39 9.395 3.027 8 3.027a7.04 7.04 0 00-2.036.291L4.836 2.191A8.059 8.059 0 018 1.573c1.83 0 3.46.506 4.89 1.518A8.656 8.656 0 0116 7.027a8.508 8.508 0 01-1.1 1.991 8.003 8.003 0 01-1.59 1.61zm.364 4.473l-3.055-3.018a8.737 8.737 0 01-1.282.3c-.43.067-.875.1-1.336.1-1.83 0-3.46-.506-4.89-1.518A8.656 8.656 0 010 7.027a8.62 8.62 0 01.964-1.79A8.374 8.374 0 012.29 3.755l-2-2.037L1.309.7l13.382 13.382-1.018 1.018zM3.309 4.773a7.81 7.81 0 00-.964 1.036c-.29.376-.539.782-.745 1.218a7.15 7.15 0 002.61 2.919c1.132.72 2.396 1.082 3.79 1.082.242 0 .479-.016.71-.046.23-.03.466-.064.708-.1l-.654-.69a3.395 3.395 0 01-.382.08A2.57 2.57 0 018 10.3c-.91 0-1.682-.318-2.318-.954-.637-.637-.955-1.41-.955-2.319 0-.133.01-.26.028-.381.018-.122.045-.249.081-.382L3.31 4.773z"}));return u.createElement("svg",(0,i.Z)({viewBox:"0 0 20 20"},e),u.createElement("g",{fillRule:"evenodd"},u.createElement("path",{d:"M1 10s3-6 9-6 9 6 9 6-3 6-9 6-9-6-9-6zm9 4a4 4 0 100-8 4 4 0 000 8zm0-2a2 2 0 100-4 2 2 0 000 4zm-7 5L17 4"}),u.createElement("path",{d:"M16.32 3.267c.966-.832 2.311.514 1.36 1.466l-14 13c-.992.854-2.31-.516-1.36-1.466l14-13z",fillRule:"nonzero"})))},eY=n(7397).Z;var eJ=n(15547),eK=n(82492),e$=n.n(eK),eX=n(95587),e0=n(55527),e1=n(70923),e2=n(96105),e3=n(11075),e5=n(45465);let e4=function(e){if((0,p.isTwakeTheme)())return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{d:"M8 0C3.584 0 0 3.584 0 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm0 14.4A6.398 6.398 0 011.6 8c0-3.536 2.864-6.4 6.4-6.4 3.536 0 6.4 2.864 6.4 6.4 0 3.536-2.864 6.4-6.4 6.4z"}),u.createElement("path",{d:"M8 12a4 4 0 100-8 4 4 0 000 8z"}));return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{fillRule:"evenodd",d:"M8 16A8 8 0 108 0a8 8 0 000 16zm0-6a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}))},e6=function(e){if((0,p.isTwakeTheme)())return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{d:"M8 0C3.584 0 0 3.584 0 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm0 14.4A6.398 6.398 0 011.6 8c0-3.536 2.864-6.4 6.4-6.4 3.536 0 6.4 2.864 6.4 6.4 0 3.536-2.864 6.4-6.4 6.4z"}));return u.createElement("svg",(0,i.Z)({viewBox:"0 0 16 16"},e),u.createElement("path",{fillRule:"evenodd",d:"M8 0a8 8 0 100 16A8 8 0 008 0zm0 14A6 6 0 108 2a6 6 0 000 12z",clipRule:"evenodd"}))};var e7=function(e){return u.createElement(e5.Z,(0,i.Z)({},e,{icon:u.createElement(d.default,{icon:e6}),checkedIcon:u.createElement(d.default,{icon:e4})}))};e7.defaultProps={color:"primary"};var e8=["name","options","disabled","value","children","onClick","onChange"],e9=(0,u.forwardRef)(function(e,t){var n,r=e.name,a=e.options,c=e.disabled,s=e.value,l=e.children,f=e.onClick,p=e.onChange,h=(0,o.Z)(e,e8),m=(0,u.useState)({label:"",value:""}),v=(0,j.Z)(m,2),y=v[0],b=v[1],g=(0,u.useState)(!1),x=(0,j.Z)(g,2),w=x[0],k=x[1],O=null===(n=a.find(function(e){return e.value===s}))||void 0===n?void 0:n.label,_=function(e){var t=e.value,n=e.children,r=e.onClick;return function(e){null==r||r(e$()({},e,{target:{value:t}})),b({label:n,value:t}),null==p||p({target:{value:t}})}};return(0,u.useEffect)(function(){b({label:O||"",value:s||""})},[O,s]),u.createElement(u.Fragment,null,u.createElement(eJ.Z,{style:{display:"none"},type:"hidden",name:r,value:y.value}),u.createElement(eJ.Z,(0,i.Z)({},h,{ref:t,type:"button","aria-controls":"simple-menu","aria-haspopup":"true",name:"dummy",value:y.label,disabled:c,inputProps:{className:"u-ta-left"},InputProps:{endAdornment:u.createElement(eY,{position:"end"},u.createElement(d.default,{icon:e1.default,color:c?"var(--disabledTextColor)":"var(--iconTextColor)"}))},onClick:function(){k(!0),null==f||f()}})),w&&u.createElement(e0.Z,{open:!0,autoClose:!0,onClose:function(){k(!1)}},u.Children.map(l,function(e){return u.isValidElement(e)?u.createElement(eX.default,(0,i.Z)({},e.props,{size:"small",autoFocus:e.props.value===s,onClick:_(e.props)}),u.createElement(e2.default,null,u.createElement(e7,{"aria-hidden":"true",tabIndex:"-1",checked:e.props.value===y.value})),u.createElement(e3.default,{primary:e.props.children})):null})))});e9.propTypes={name:s().string,options:s().array,disabled:s().bool,value:s().string,children:s().oneOfType([s().node,s().arrayOf(s().node)]),onClick:s().func,onChange:s().func};var te=function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},tt=function(){var e,t,n;return(null===(e=window)||void 0===e?void 0:null===(t=e.crypto)||void 0===t?void 0:null===(n=t.randomUUID)||void 0===n?void 0:n.call(t))||te()},tn=["select","options","children"],tr=(0,u.forwardRef)(function(e,t){var n=e.select,r=e.options,a=e.children,c=(0,o.Z)(e,tn),s=tt();return(0,R.useBreakpoints)().isMobile&&n&&r?u.createElement(e9,(0,i.Z)({ref:t,id:s,options:r},c),a):u.createElement(eJ.Z,(0,i.Z)({ref:t,id:s,select:n,SelectProps:{IconComponent:function(e){return u.createElement(d.default,(0,i.Z)({},e,{icon:e1.default,color:c.disabled?"var(--disabledTextColor)":"var(--iconTextColor)"}))}}},c),a)});function ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}tr.displayName="TextField";let ti=(0,eR.Z)({en:{"password-field":{show:"Show password",hide:"Hide password"}},fr:{"password-field":{show:"Afficher le mot de passe",hide:"Masquer le mot de passe"}}})(function(e){var t=(0,ez.useI18n)().t,n=(0,u.useState)(!0),r=(0,j.Z)(n,2),a=r[0],o=r[1];return u.createElement(tr,(0,i.Z)({variant:"outlined",type:a?"password":"text"},e,{InputProps:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ta(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({endAdornment:u.createElement(eY,{position:"end"},u.createElement(f.default,{label:t(a?"password-field.show":"password-field.hide"),disabled:e.disabled,onClick:function(){return o(!a)},edge:"end"},u.createElement(d.default,{icon:a?eQ:eZ})))},e.InputProps)}))});var to=function(e){var t=e.onClose,n=e.onSubmit,r=e.isLoading,a=e.isOIDC,i=e.error,o=e.resetRedirection,c=(0,ez.useI18n)().t,s=(0,eq.useClient)(),l=(0,u.useState)(""),d=(0,j.Z)(l,2),f=d[0],p=d[1],h=function(e){e.preventDefault(),n(f)},m=(0,u.useMemo)(function(){var e=new URL("/auth/passphrase_reset",s.getStackClient().uri);return o&&e.searchParams.set("from",o),e.href},[s,o]);return u.createElement(ej,{open:!0,onClose:t,title:c("authentification-dialog.".concat(a?"title-oidc":"title")),icon:eV,content:u.createElement("form",{onSubmit:h},u.createElement(eF.default,{variant:"body1",className:"u-ta-center"},c("authentification-dialog.subtitle")),u.createElement(ti,{autoFocus:!0,disabled:r,value:f,onChange:function(e){p(e.currentTarget.value)},className:"u-mv-1",label:c("authentification-dialog.".concat(a?"label-oidc":"label")),error:!!i,helperText:i&&c("authentification-dialog.errors.".concat(i)),fullWidth:!0,required:!0}),u.createElement(eF.default,{variant:"body1",component:"a",color:"primary",href:m,className:"u-link"},c("authentification-dialog.forgotten-password"))),actions:u.createElement(eH.default,{busy:r,disabled:r||0===f.length,onClick:h,label:c("authentification-dialog.unlock"),fullWidth:!0})})};to.defaultProps={isOIDC:!1},to.propTypes={onClose:s().func,onSubmit:s().func,isLoading:s().bool,isOIDC:s().bool,error:s().string,resetRedirection:s().string};let tc=eI(to)},20958:function(e,t,n){"use strict";n.r(t),n.d(t,{DeprecatedDivider:()=>k,default:()=>g});var r=n(91888),a=n(51894),i=n(55517),o=n(67294),c=n(65691),s=n(94184),u=n.n(s),l=n(45697),d=n.n(l),f=n(32692),p=["color","variant","textAlign","children","className"],h={divider:"styles__divider___SuA5q",center:"styles__center___3K8dw"},m=function(e){var t=e.color,n=e.variant,r=e.textAlign,i=e.children,s=e.className,l=(0,c.Z)(e,p);return o.createElement(f.default,(0,a.Z)({color:void 0===t?"textPrimary":t,variant:void 0===n?"body2":n,className:u()(h.divider,h[r],s)},l),i)};m.propTypes={textAlign:d().oneOf(["center"])};var v=n(68893);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var b=(0,o.forwardRef)(function(e,t){return"string"==typeof e.children?o.createElement(m,(0,a.Z)({},e,{ref:t})):o.createElement(i.Z,(0,a.Z)({},e,{ref:t}))});b.displayName="Divider",b.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},m.propTypes);let g=b;var x={padding:16},w={padding:32},k=(0,v.Z)(function(e){var t;return{root:(t={},(0,r.Z)(t,e.breakpoints.down("md"),{width:"calc(100% + ".concat(x.padding,"*2px)"),marginLeft:"-".concat(x.padding,"px")}),(0,r.Z)(t,e.breakpoints.up("md"),{width:"calc(100% + ".concat(w.padding,"*2px)"),marginLeft:"-".concat(w.padding,"px")}),t)}})(b)},31281:function(e,t,n){"use strict";n.r(t),n.d(t,{ExtendableFab:()=>v,default:()=>y});var r=n(33758),a=n(92951),i=n(51894),o=n(65691),c=n(67294),s=n(32419),u=n(31573),l=n(23279),d=n.n(l),f=n(73068),p=n(34627);let h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,r=(0,c.useState)({scrollTop:0,scrollLeft:0}),a=(0,u.Z)(r,2),i=a[0],o=a[1],s=d()(function(){var t=(0,p.Q)(e);t===window?o({scrollTop:window.scrollY,scrollLeft:window.scrollX}):o({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})},void 0===n?250:n);return(0,f.default)(e,"scroll",s),(0,f.default)(e,"touchmove",s),i};var m=["label","icon","follow","topLimit","scrollOptions"];let v=function(e){var t=e.label,n=e.icon,r=e.follow,a=e.topLimit,u=e.scrollOptions,l=(0,o.Z)(e,m),d=h(r,u).scrollTop<(void 0===a?50:a);return c.createElement(y,(0,i.Z)({"aria-label":t,variant:d?"extended":"circular"},l),c.createElement(s.default,(0,i.Z)({icon:n},d&&{className:"u-mr-half"})),d&&t)};r.Z.defaultProps={size:(0,a.isTwakeTheme)()?"medium":"large"};let y=r.Z},11571:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(41749).Z},37266:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(20170).Z},32419:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>v,iconPropType:()=>m});var r=n(91888),a=n(51894),i=n(65691),o=n(94184),c=n.n(o),s=n(45697),u=n.n(s),l=n(67294),d=["icon","width","height","color","style","className","preserveColor","rotate","size","spin"],f={"icon--spin":"styles__icon--spin___ybfC1",spin:"styles__spin___2Vvw3",icon:"styles__icon___23x3R","icon--preserveColor":"styles__icon--preserveColor___3gBz6",shake:"styles__shake___wT_3z"};function p(e){return e instanceof Function}function h(e){var t,n=e.icon,o=e.width,s=e.height,u=e.color,m=e.style,v=e.className,y=e.preserveColor,b=e.rotate,g=e.size,x=e.spin,w=(0,i.Z)(e,d);if(!n)return null;var k=n.type===h,O="img"===n.type;if(k||O)return n;if("string"==typeof n&&n.includes(".png"))return l.createElement("img",(0,a.Z)({src:n,className:v,style:m,width:o||g||"16",height:s||g||"16"},w));var _=p(n)?n:(t=n.id?"#".concat(n.id):"#"===n[0]?n:"#"+n)?function(e){return l.createElement("svg",e,l.createElement("use",{xlinkHref:t}))}:(console.warn("Icon not found ".concat(n,".")),null),E=m;E=Object.assign({},E),u&&(E.fill=u),b&&(E.transform="rotate(".concat(b,"deg)"));var S=c()(v,f[y?"icon--preserveColor":"icon"],(0,r.Z)({},f["icon--spin"],x));return _?l.createElement(_,(0,a.Z)({className:S,style:E,width:o||g||"16",height:s||g||"16"},w)):null}h.isProperIcon=function(e){var t=e&&!!e.id,n="string"==typeof e,r=p(e);return t||n||r};var m=u().oneOfType([u().string,u().object,u().func]);h.propTypes={icon:m,width:u().oneOfType([u().string,u().number]),height:u().oneOfType([u().string,u().number]),color:u().oneOfType([u().string,u().object]),style:u().object,className:u().string,preserveColor:u().bool,size:u().oneOfType([u().string,u().number]),rotate:u().number,spin:u().bool},h.defaultProps={spin:!1};let v=h},9047:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(51894),a=n(65691),i=n(17812),o=n(94184),c=n.n(o),s=n(45697),u=n.n(s),l=n(67294),d=["size","className","children","color"],f=["default","inherit","primary","secondary"],p=(0,l.forwardRef)(function(e,t){var n=e.size,o=e.className,s=e.children,u=e.color,p=(0,a.Z)(e,d),h=f.includes(u)?u:"default";return l.createElement(i.Z,(0,r.Z)({ref:t,className:c()(o,void 0===n?"large":n,{"cozyStyles-error":"error"===u}),color:h},p),s)});p.displayName="IconButton",p.propTypes={className:u().string,color:u().oneOf(["default","inherit","primary","secondary","error"]),size:u().oneOf(["small","medium","large","xlarge"])};let h=p},70923:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M4.175 5L8 8.817 11.825 5 13 6.175l-5 5-5-5L4.175 5z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 24 24"},e),a.createElement("path",{d:"M3.968 6.175a1.571 1.571 0 00-2.222 2.222l9.429 9.428a1.571 1.571 0 002.222 0l9.428-9.428a1.571 1.571 0 00-2.222-2.222l-8.317 8.317-8.318-8.317z",fillRule:"evenodd"}))}},24221:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 11"},e),a.createElement("path",{d:"M8 1.333a3.669 3.669 0 013.593 2.954l.2 1 1.02.073c1.04.067 1.854.94 1.854 1.973 0 1.1-.9 2-2 2H4a2.666 2.666 0 01-2.667-2.666A2.649 2.649 0 013.707 4.02l.713-.073.333-.634A3.646 3.646 0 018 1.333zM8 0a4.997 4.997 0 00-4.433 2.693A3.996 3.996 0 000 6.667c0 2.206 1.793 4 4 4h8.667A3.335 3.335 0 0016 7.333a3.317 3.317 0 00-3.1-3.306A4.993 4.993 0 008 0z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("defs",null,a.createElement("path",{d:"M164 261a4 4 0 118 0 4 4 0 110 8h-8a4 4 0 110-8zm1.146 3.854c.155.154.423.368.793.58.618.353 1.31.566 2.061.566.75 0 1.443-.213 2.06-.566.371-.212.64-.426.794-.58a.5.5 0 10-.708-.708 2.934 2.934 0 01-.582.42A3.136 3.136 0 01168 265a3.136 3.136 0 01-1.564-.434 2.934 2.934 0 01-.582-.42.5.5 0 10-.708.708z",id:"cloud_svg__a"})),a.createElement("g",{fillRule:"evenodd",transform:"translate(-160 -255)"},a.createElement("use",{xlinkHref:"#cloud_svg__a"})))}},32756:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(51894),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 11"},e),a.createElement("path",{d:"M8 1.333a3.669 3.669 0 013.593 2.954l.2 1 1.02.073c1.04.067 1.854.94 1.854 1.973 0 1.1-.9 2-2 2H4a2.666 2.666 0 01-2.667-2.666A2.649 2.649 0 013.707 4.02l.713-.073.333-.634A3.646 3.646 0 018 1.333zM8 0a4.997 4.997 0 00-4.433 2.693A3.996 3.996 0 000 6.667c0 2.206 1.793 4 4 4h8.667A3.335 3.335 0 0016 7.333a3.317 3.317 0 00-3.1-3.306A4.993 4.993 0 008 0z",fill:"#fff"}),a.createElement("path",{d:"M8 1.333a3.669 3.669 0 013.593 2.954l.2 1 1.02.073c1.04.067 1.854.94 1.854 1.973 0 1.1-.9 2-2 2H4a2.666 2.666 0 01-2.667-2.666A2.649 2.649 0 013.707 4.02l.713-.073.333-.634A3.646 3.646 0 018 1.333zM8 0a4.997 4.997 0 00-4.433 2.693A3.996 3.996 0 000 6.667c0 2.206 1.793 4 4 4h8.667A3.335 3.335 0 0016 7.333a3.317 3.317 0 00-3.1-3.306A4.993 4.993 0 008 0z",fill:"url(#cloud-rainbow_svg__paint0_linear_11512_6354)"}),a.createElement("path",{d:"M8 1.333a3.669 3.669 0 013.593 2.954l.2 1 1.02.073c1.04.067 1.854.94 1.854 1.973 0 1.1-.9 2-2 2H4a2.666 2.666 0 01-2.667-2.666A2.649 2.649 0 013.707 4.02l.713-.073.333-.634A3.646 3.646 0 018 1.333zM8 0a4.997 4.997 0 00-4.433 2.693A3.996 3.996 0 000 6.667c0 2.206 1.793 4 4 4h8.667A3.335 3.335 0 0016 7.333a3.317 3.317 0 00-3.1-3.306A4.993 4.993 0 008 0z",fill:"url(#cloud-rainbow_svg__paint1_linear_11512_6354)"}),a.createElement("path",{d:"M8 1.333a3.669 3.669 0 013.593 2.954l.2 1 1.02.073c1.04.067 1.854.94 1.854 1.973 0 1.1-.9 2-2 2H4a2.666 2.666 0 01-2.667-2.666A2.649 2.649 0 013.707 4.02l.713-.073.333-.634A3.646 3.646 0 018 1.333zM8 0a4.997 4.997 0 00-4.433 2.693A3.996 3.996 0 000 6.667c0 2.206 1.793 4 4 4h8.667A3.335 3.335 0 0016 7.333a3.317 3.317 0 00-3.1-3.306A4.993 4.993 0 008 0z",fill:"url(#cloud-rainbow_svg__paint2_linear_11512_6354)"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"cloud-rainbow_svg__paint0_linear_11512_6354",x1:16,y1:6.222,x2:0,y2:6.222,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:.13,stopColor:"#A033FF"}),a.createElement("stop",{offset:.61,stopColor:"#0094FF"}),a.createElement("stop",{offset:1,stopColor:"#4FB500"})),a.createElement("linearGradient",{id:"cloud-rainbow_svg__paint1_linear_11512_6354",x1:7.333,y1:3.333,x2:4.833,y2:10.833,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#FFD600",stopOpacity:0}),a.createElement("stop",{offset:.563,stopColor:"#FFC700"})),a.createElement("linearGradient",{id:"cloud-rainbow_svg__paint2_linear_11512_6354",x1:8.667,y1:6.222,x2:12.079,y2:11.642,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:.03,stopColor:"#FF3B30",stopOpacity:0}),a.createElement("stop",{offset:.843,stopColor:"#E73B2D"}))))}},88188:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M12.444 7.111V0H3.556v3.556H0V16h7.111v-3.556H8.89V16H16V7.111h-3.556zm-8.888 7.111H1.778v-1.778h1.778v1.778zm0-3.555H1.778V8.889h1.778v1.778zm0-3.556H1.778V5.333h1.778v1.778zm3.555 3.556H5.333V8.889h1.778v1.778zm0-3.556H5.333V5.333h1.778v1.778zm0-3.555H5.333V1.778h1.778v1.778zm3.556 7.11H8.889V8.89h1.778v1.778zm0-3.555H8.889V5.333h1.778v1.778zm0-3.555H8.889V1.778h1.778v1.778zm3.555 10.666h-1.778v-1.778h1.778v1.778zm0-3.555h-1.778V8.889h1.778v1.778z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M10 0v16H0V0h10zM4 12v-2H2v2h2zm0-4V6H2v2h2zm0-4V2H2v2h2zm4 0V2H6v2h2zm0 4V6H6v2h2zm0 4v-2H6v2h2zm3-8h5v12h-5V4zm3.5 8v-2h-2v2h2zm0-4V6h-2v2h2z"}))}},22985:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16",fill:"none"},e),a.createElement("rect",{width:16,height:16,rx:5.284,fill:"#fff"}),a.createElement("rect",{width:16,height:16,rx:5.284,fill:"url(#contacts_twake_svg__paint0_linear_11294_1829)"}),a.createElement("g",{filter:"url(#contacts_twake_svg__filter0_d_11294_1829)"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.107 4.113c-.251.492-.251 1.137-.251 2.427v2.993c0 1.29 0 1.934.25 2.427.221.433.574.786 1.007 1.006.492.251 1.137.251 2.427.251h2.993c1.29 0 1.935 0 2.427-.25a2.304 2.304 0 001.006-1.007c.251-.493.251-1.137.251-2.427V6.54c0-1.29 0-1.935-.25-2.427a2.302 2.302 0 00-1.007-1.007c-.492-.25-1.137-.25-2.427-.25H6.54c-1.29 0-1.935 0-2.427.25a2.299 2.299 0 00-1.006 1.007zm4.93 1.045a1.439 1.439 0 110 2.878 1.439 1.439 0 010-2.878zm-2.879 5.395v-.347c0-1.24 1.918-1.594 2.878-1.594.961 0 2.879.354 2.879 1.594v.347c0 .2-.162.362-.362.362H5.52a.362.362 0 01-.362-.362z",fill:"#fff"})),a.createElement("defs",null,a.createElement("linearGradient",{id:"contacts_twake_svg__paint0_linear_11294_1829",x1:2.774,y1:14.564,x2:15.094,y2:.979,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:.23,stopColor:"#F74EA9"}),a.createElement("stop",{offset:1,stopColor:"#FFB2A8"})),a.createElement("filter",{id:"contacts_twake_svg__filter0_d_11294_1829",x:2.04,y:2.203,width:11.994,height:11.994,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dy:.163}),a.createElement("feGaussianBlur",{stdDeviation:.408}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),a.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_11294_1829"}),a.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_11294_1829",result:"shape"}))));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32",fill:"none"},e),a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},a.createElement("path",{d:"M32 25.995A1.997 1.997 0 0130.002 28H24v-2.499c0-.829-.666-1.5-1.5-1.5-.829 0-1.5.678-1.5 1.5v2.5H11v-2.5c0-.829-.666-1.5-1.5-1.5-.829 0-1.5.678-1.5 1.5v2.5H1.998A2.002 2.002 0 010 25.994V6.005C0 4.897.889 4 2.001 4h27.997C31.104 4 32 4.897 32 6.005v19.99z",fill:"#FFD799"}),a.createElement("path",{d:"M12 15.5c1.5 0 3 2.25 3 3l-.004.393c-.02.598-.128 1.107-.746 1.107H3.75C3 20 3 19.25 3 18.5s1.5-3 3-3 .75.75 3 .75 1.5-.75 3-.75zM28 18v1H17v-1h11zm0-3v1H17v-1h11zM9 8c1.657 0 3 1.511 3 3.375s-1.343 3.375-3 3.375-3-1.51-3-3.375C6 9.511 7.343 8 9 8zm19 4v1H17v-1h11zm-5-3v1h-6V9h6z",fill:"#FF9300"})))}},73690:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M.889 3.556H15.11v1.777H.89V3.556zm0 5.333H15.11V7.11H.89v1.78zm0 3.555H7.11v-1.777H.89v1.777zm0 3.556H7.11v-1.778H.89V16zm10.142-2.516l-1.253-1.262-1.254 1.254L11.031 16l4.08-4.071-1.262-1.262-2.818 2.817zM.89 0v1.778h14.22V0H.89z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.5 4h-3a.5.5 0 010-1h3a.5.5 0 010 1zm0 3h-3a.5.5 0 010-1h3a.5.5 0 010 1zm0 3h-9a.5.5 0 010-1h9a.5.5 0 010 1zm0 3h-9a.5.5 0 010-1h9a.5.5 0 010 1zM3 5V2h4v6L5 6 3 8V5zm11-5H2c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1z"}))}},78975:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(51894),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 20 20"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm2 0c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0s10 4.477 10 10zm-8.59 1.206c.134.086.33.046.417-.085a.28.28 0 00-.087-.396c-.116-.073-.125-.223-.125-.223a.296.296 0 00-.3-.282h-.006a.306.306 0 00-.21.087.283.283 0 00-.085.21.895.895 0 00.029.183 1.682 1.682 0 01-2.087.004c.03-.11.03-.189.03-.191a.294.294 0 00-.291-.292.285.285 0 00-.213.076.289.289 0 00-.098.204s-.008.15-.126.225a.282.282 0 00-.085.396.315.315 0 00.442.068l.007-.005c.392.295.874.455 1.375.455a2.29 2.29 0 001.379-.456l.033.022zm.766-5.313c.521.502.845 1.153.932 1.856C14.726 7.892 16 9.236 16 10.869 16 12.594 14.574 14 12.822 14H7.177C5.425 14 4 12.595 4 10.868c0-.823.322-1.601.906-2.19a3.179 3.179 0 011.893-.92c.085-.707.41-1.36.933-1.865A3.18 3.18 0 019.954 5a3.18 3.18 0 012.222.893z"}))}},88191:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 12"},e),a.createElement("path",{d:"M2.667 2h12V.667h-12c-.734 0-1.334.6-1.334 1.333v7.333H0v2h9.333v-2H2.667V2zm12.666 1.333h-4c-.366 0-.666.3-.666.667v6.667c0 .366.3.666.666.666h4c.367 0 .667-.3.667-.666V4c0-.367-.3-.667-.667-.667zm-.666 6H12V4.667h2.667v4.666z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M9.734 5.995c0-.55.45-.995.99-.995h4.02a1 1 0 01.99.995v8.01c0 .55-.451.995-.99.995h-4.02a1 1 0 01-.99-.995v-8.01zm2 1.005v6h2V7h-2zm-11-5.002c0-.551.447-.998.998-.998h11.003c.552 0 .999.444.999 1v1h-11v6h5v4H.73c-.55 0-.858-.417-.68-.95L.733 10V1.998z"}))}},75410:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 13"},e),a.createElement("path",{d:"M16 1.6c0-.88-.72-1.6-1.6-1.6H1.6C.72 0 0 .72 0 1.6v9.6c0 .88.72 1.6 1.6 1.6h12.8c.88 0 1.6-.72 1.6-1.6V1.6zm-1.6 0L8 5.6l-6.4-4h12.8zm0 9.6H1.6v-8l6.4 4 6.4-4v8z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M0 2.999A.998.998 0 011 2h14c.552 0 1 .443 1 .999V5L8 8 0 5V2.999zM0 7l8 3 8-3v7.003c0 .55-.445.997-1 .997H1c-.552 0-1-.453-1-.997V7z"}))}},81123:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 17",fill:"none"},e),a.createElement("path",{d:"M3.52 1.3h5.792l4.908 4.907V13.6a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V4a2.7 2.7 0 012.7-2.7z",fill:"#F5FDFD",stroke:"#0DCBCF"}),a.createElement("path",{d:"M14.72 6.2L9.32.8v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88zm-8.4 5.933c0 .92-.746 1.667-1.667 1.667a.802.802 0 01-.588-.245.803.803 0 01-.245-.588V10.05c0-.52.099-1.009.297-1.463.198-.455.465-.851.802-1.188a3.812 3.812 0 011.187-.802A3.628 3.628 0 017.57 6.3c.52 0 1.009.099 1.463.297.455.198.851.465 1.188.802.337.337.604.733.802 1.188.198.454.297.942.297 1.463v2.917a.802.802 0 01-.245.588.802.802 0 01-.588.245c-.92 0-1.667-.746-1.667-1.667V11.3c0-.46.373-.833.833-.833h.417c.23 0 .417-.187.417-.417 0-.812-.283-1.502-.85-2.068-.565-.566-1.255-.849-2.067-.849-.813 0-1.502.283-2.068.85-.566.565-.849 1.255-.849 2.067 0 .23.187.417.417.417h.417c.46 0 .833.373.833.833v.833z",fill:"#0DCBCF"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)"},a.createElement("rect",{width:30,height:30,fill:"#ACF6F7",rx:2}),a.createElement("path",{fill:"#0CCBD0",d:"M8 19.998a2 2 0 00-.002 4H9c1.657 0 3-1.35 3-2.997v-7.679a.63.63 0 01.492-.601l6.016-1.129c.272-.05.492.124.492.418v5.478c0 .282-.215.51-.49.51H17c-1.105 0-2 .904-2 1.997v-.179a2 2 0 001.998 1.997H18c1.657 0 3-1.349 3-2.993V7c0-.554-.445-.921-.976-.825L10.976 7.82C10.437 7.918 10 8.454 10 9v10.498c0 .276-.215.5-.49.5H8z"})))}},96178:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 16",fill:"none"},e),a.createElement("path",{d:"M3.52.5h5.792l4.908 4.907V12.8a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V3.2A2.7 2.7 0 013.52.5z",fill:"#E8EDF3",stroke:"#4F5B69"}),a.createElement("path",{d:"M14.72 5.4L9.32 0v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88zm-8.2 3.671a1.23 1.23 0 01-.703-.2 1.267 1.267 0 01-.45-.578 2.354 2.354 0 01-.156-.91c0-.352.053-.653.157-.902a1.24 1.24 0 01.45-.568c.197-.13.43-.196.701-.196.271 0 .504.065.7.196.195.13.346.32.451.57.106.247.158.548.157.9 0 .356-.053.66-.158.912a1.257 1.257 0 01-.45.577 1.21 1.21 0 01-.7.2zm0-.568c.185 0 .333-.093.443-.28.111-.186.166-.466.165-.84 0-.245-.025-.45-.076-.613a.79.79 0 00-.212-.368.462.462 0 00-.32-.124c-.185 0-.333.093-.444.277-.11.185-.166.46-.167.829 0 .249.024.456.074.623.05.165.122.29.214.373a.466.466 0 00.322.123zm3.204-2.742V9H9.04V6.411h-.02l-.741.465V6.27l.802-.508h.643zm-3.027 4V13h-.684v-2.589h-.02l-.741.465v-.607l.802-.508h.643zm2.04 3.31a1.23 1.23 0 01-.702-.2 1.267 1.267 0 01-.45-.578 2.354 2.354 0 01-.156-.91c0-.352.052-.653.157-.902a1.24 1.24 0 01.45-.568c.196-.13.43-.196.7-.196.272 0 .505.065.7.196.196.13.347.32.452.57.106.247.158.548.157.9 0 .356-.053.66-.158.912a1.257 1.257 0 01-.45.577c-.195.133-.428.2-.7.2zm0-.567c.185 0 .334-.094.444-.28.111-.187.166-.467.165-.84 0-.246-.026-.45-.076-.614a.79.79 0 00-.212-.368.462.462 0 00-.321-.123c-.185 0-.332.092-.443.276-.11.185-.166.46-.168.829 0 .249.025.456.075.623.05.165.122.29.213.373a.47.47 0 00.323.123z",fill:"#4F5B69"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#D1D5DB",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#A3ACB8",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"}),a.createElement("path",{fill:"#4F5B69",d:"M7 15.568c0-.597.06-1.12.178-1.568.118-.449.285-.82.5-1.115a2.11 2.11 0 01.772-.664c.3-.147.633-.221 1.001-.221.786 0 1.391.29 1.815.87.424.58.636 1.479.636 2.698 0 .602-.059 1.128-.177 1.577-.119.449-.286.822-.501 1.12a2.084 2.084 0 01-.776.669 2.265 2.265 0 01-1.006.22c-.792 0-1.397-.306-1.815-.918C7.209 17.623 7 16.734 7 15.568zm3.705 0a9.152 9.152 0 00-.019-.58l-2.292 2.191c.193.597.546.895 1.057.895.4 0 .708-.2.926-.6.219-.4.328-1.035.328-1.906zm-2.507 0a7.965 7.965 0 00.018.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.402-.322 1.03-.322 1.882zm5.35 0c0-.597.06-1.12.179-1.568.118-.449.285-.82.5-1.115a2.11 2.11 0 01.772-.664c.3-.147.633-.221 1.001-.221.786 0 1.39.29 1.815.87.424.58.636 1.479.636 2.698 0 .602-.06 1.128-.178 1.577-.118.449-.285.822-.5 1.12a2.08 2.08 0 01-.777.669 2.265 2.265 0 01-1.005.22c-.792 0-1.397-.306-1.815-.918-.418-.613-.627-1.502-.627-2.668zm3.706 0a9.153 9.153 0 00-.02-.58l-2.291 2.191c.193.597.546.895 1.057.895.4 0 .708-.2.926-.6.218-.4.328-1.035.328-1.906zm-2.508 0a7.965 7.965 0 00.02.55l2.282-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.402-.323 1.03-.323 1.882zm5.988 2.368h1.431v-4.295l-1.235.993-.561-.786 2.133-1.71h.823v5.798h1.404v1.081h-3.995v-1.08zM7 24.413c0-.596.06-1.119.178-1.568.118-.449.285-.82.5-1.115a2.11 2.11 0 01.772-.664c.3-.147.633-.22 1.001-.22.786 0 1.391.29 1.815.869.424.58.636 1.48.636 2.698 0 .603-.059 1.128-.177 1.577-.119.449-.286.822-.501 1.12a2.075 2.075 0 01-.776.669A2.265 2.265 0 019.442 28c-.792 0-1.397-.306-1.815-.919C7.209 26.468 7 25.58 7 24.413zm3.705 0a9.152 9.152 0 00-.019-.58l-2.292 2.192c.193.596.546.894 1.057.894.4 0 .708-.2.926-.6.219-.4.328-1.035.328-1.906zm-2.507 0a7.965 7.965 0 00.018.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.403-.322 1.03-.322 1.882zm5.987 2.368h1.431v-4.295l-1.235.993-.56-.786 2.132-1.71h.824v5.798h1.403v1.081h-3.995v-1.08zm5.913-2.368c0-.596.059-1.119.177-1.568.119-.449.286-.82.501-1.115.215-.295.472-.516.772-.664.3-.147.633-.22 1-.22.787 0 1.392.29 1.816.869.424.58.636 1.48.636 2.698 0 .603-.06 1.128-.178 1.577-.118.449-.285.822-.5 1.12a2.07 2.07 0 01-.777.669A2.265 2.265 0 0122.54 28c-.793 0-1.398-.306-1.815-.919-.418-.613-.627-1.502-.627-2.668zm3.704 0a9.152 9.152 0 00-.018-.58l-2.292 2.192c.193.596.545.894 1.057.894.399 0 .708-.2.926-.6.218-.4.327-1.035.327-1.906zm-2.507 0a7.965 7.965 0 00.019.55l2.283-2.192c-.187-.563-.54-.845-1.057-.845-.4 0-.707.202-.922.605-.215.403-.323 1.03-.323 1.882z"})))}},79301:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 17",fill:"none"},e),a.createElement("path",{d:"M3.52 1.3h5.792l4.908 4.907V13.6a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V4a2.7 2.7 0 012.7-2.7z",fill:"#FDF5FA",stroke:"#E643B3"}),a.createElement("path",{d:"M14.72 6.2L9.32.8v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88zm-8.404 6.089a.359.359 0 01-.492 0l-2.004-1.88 2-1.875a.365.365 0 11.5.534l-1.44 1.35 1.436 1.347a.36.36 0 010 .524zm3.004-.005a.365.365 0 01-.5-.533l1.44-1.35-1.436-1.347a.36.36 0 11.491-.524l2.005 1.88-2 1.874z",fill:"#E643B3"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#E6D5FF",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#9C59FF",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"}),a.createElement("g",{stroke:"#9C59FF",strokeWidth:2},a.createElement("path",{strokeLinejoin:"round",d:"M12 22l-4-4 4-4m8 8l4-4-4-4"}),a.createElement("path",{d:"M14 25l4-14"}))))}},29388:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 17",fill:"none"},e),a.createElement("path",{d:"M3.52 1.2h5.834l4.966 4.966V13.6a2.8 2.8 0 01-2.8 2.8h-8a2.8 2.8 0 01-2.8-2.8V4a2.8 2.8 0 012.8-2.8z",fill:"#E8EDF3",stroke:"#4F5B69",strokeWidth:.8}),a.createElement("path",{d:"M14.72 6.2L9.32.8v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88z",fill:"#4F5B69"}),a.createElement("path",{d:"M4.695 14.05v-1.476L9.278 8a.78.78 0 01.23-.148.718.718 0 01.534 0 .61.61 0 01.226.156l.477.486c.07.064.12.14.152.226a.753.753 0 010 .525.65.65 0 01-.152.23L6.171 14.05H4.695zm5.07-4.583l.486-.486-.487-.487-.486.487.486.486z",fill:"#4F5B69",fillOpacity:.72}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#D1D5DB",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#A3ACB8",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5z"})))}},48368:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 14",fill:"none"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.125h6.4c.88 0 1.6.731 1.6 1.625v8.125c0 .894-.72 1.625-1.6 1.625H1.6c-.88 0-1.6-.731-1.6-1.625l.008-9.75C.008 1.231.72.5 1.6.5h4.8L8 2.125z",fill:"url(#file-type-folder_twake_svg__paint0_linear_11296_8360)"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"file-type-folder_twake_svg__paint0_linear_11296_8360",x1:8,y1:.5,x2:8,y2:16.25,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:.044,stopColor:"#1D7AFF"}),a.createElement("stop",{offset:.13,stopColor:"#7CB2FF"}),a.createElement("stop",{offset:.617,stopColor:"#76AFFF"}),a.createElement("stop",{offset:1,stopColor:"#4290FF"}))));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(0 2)"},a.createElement("rect",{width:32,height:26,y:2,fill:"#B2D3FF",rx:2}),a.createElement("path",{fill:"#197BFF",d:"M0 .99A1 1 0 011.007 0h11.986c.556 0 1.32.313 1.718.71l.578.58c.393.392 1.156.71 1.712.71h13.005C31.107 2 32 2.895 32 4H17c-.552 0-1.313.313-1.71.71l-.58.58c-.392.392-1.16.71-1.717.71H1.007A1.004 1.004 0 010 5.01V.99z"})))}},8540:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 17",fill:"none"},e),a.createElement("path",{d:"M3.52 1.3h5.792l4.908 4.907V13.6a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V4a2.7 2.7 0 012.7-2.7z",fill:"#FBFDF5",stroke:"#A8D306"}),a.createElement("path",{d:"M14.72 6.2L9.32.8v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88z",fill:"#A8D306"}),a.createElement("circle",{cx:10.632,cy:7.818,r:.938,fill:"#A8D306"}),a.createElement("path",{d:"M3.11 13.385a.23.23 0 00.18.37h8.435a.23.23 0 00.18-.37l-2.64-3.38-2.343 3-1.758-2.25-2.054 2.63z",fill:"#A8D306"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(0 3)"},a.createElement("rect",{width:32,height:26,fill:"#8EE39B",rx:2}),a.createElement("path",{fill:"#1EC737",d:"M0 20l6.29-6.29a.999.999 0 011.416-.004L11 17l8.294-8.294a1.003 1.003 0 011.412 0L32 20v4.002C32 25.106 31.11 26 29.998 26H2.002A2.002 2.002 0 010 24.002V20z"}),a.createElement("circle",{cx:8,cy:7,r:3,fill:"#FFF"}),a.createElement("path",{stroke:"#8EE39B",d:"M11 16l-5.5 5.5L11 16z",strokeLinecap:"round",strokeLinejoin:"round"})))}},78070:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 17",fill:"none"},e),a.createElement("path",{d:"M3.52 1.3h5.792l4.908 4.907V13.6a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V4a2.7 2.7 0 012.7-2.7z",fill:"#FDFAF5",stroke:"#FFB81E"}),a.createElement("path",{d:"M14.72 6.2L9.32.8v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88zM4.127 14.183v-1.476L8.71 8.132a.78.78 0 01.23-.147.718.718 0 01.534 0 .61.61 0 01.226.156l.477.486c.07.064.12.14.152.226a.75.75 0 010 .525.65.65 0 01-.152.23l-4.574 4.575H4.127zm5.07-4.584l.485-.486-.486-.486-.486.486.486.486z",fill:"#FFB81E"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("path",{d:"M2 2a2 2 0 012-2h22a2 2 0 012 2v28a2 2 0 01-2 2H4a2 2 0 01-2-2z",fill:"#acf5f7",fillRule:"evenodd"}),a.createElement("path",{d:"M8 8h14v2H8zm0 4h8v2H8zm0 4h14v2H8zm0 4h10v2H8zM1.5 4h2A1.54 1.54 0 015 5.5 1.54 1.54 0 013.5 7h-2A1.54 1.54 0 010 5.5 1.54 1.54 0 011.5 4zm0 7h2A1.54 1.54 0 015 12.5 1.54 1.54 0 013.5 14h-2A1.54 1.54 0 010 12.5 1.54 1.54 0 011.5 11zm0 7h2A1.54 1.54 0 015 19.5 1.54 1.54 0 013.5 21h-2A1.54 1.54 0 010 19.5 1.54 1.54 0 011.5 18zm0 7h2A1.54 1.54 0 015 26.5 1.54 1.54 0 013.5 28h-2A1.54 1.54 0 010 26.5 1.54 1.54 0 011.5 25zm29.9-6.6l-2.8-2.8a2 2 0 012.8 2.8zm-.7.7L20.8 29l-2.5.9a1 1 0 01-1.3-.6.85.85 0 010-.7l.9-2.5 9.9-9.9z",fill:"#0dcbcf",fillRule:"evenodd"}))}},94965:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 16",fill:"none"},e),a.createElement("path",{d:"M3.2.5h5.792L13.9 5.407V12.8a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V3.2A2.7 2.7 0 013.2.5z",fill:"#FDF5F4",stroke:"#D32C3C"}),a.createElement("path",{d:"M14.4 5.4L9 0v2.793C9 4.233 10.128 5.4 11.52 5.4h2.88zM2.757 12.8V9.2h1.486c.255 0 .479.053.67.158.192.106.341.254.448.445.106.19.16.414.16.67 0 .257-.055.48-.165.67a1.102 1.102 0 01-.46.435 1.472 1.472 0 01-.687.153h-.888v-.76h.7c.11 0 .203-.02.28-.059a.426.426 0 00.18-.174.528.528 0 00.064-.265.513.513 0 00-.063-.264.408.408 0 00-.18-.169.606.606 0 00-.281-.06h-.33v2.82h-.934zm4.431 0H5.863V9.2h1.312c.354 0 .66.072.918.216.259.143.458.35.598.619.142.268.212.59.212.965s-.07.697-.21.967c-.14.268-.338.474-.595.618a1.84 1.84 0 01-.91.215zm-.39-.83h.357a1 1 0 00.435-.086.57.57 0 00.276-.297c.064-.14.096-.336.096-.587 0-.25-.033-.447-.098-.587a.572.572 0 00-.282-.297 1.07 1.07 0 00-.454-.086h-.33v1.94zm2.538.83V9.2h2.42v.787H10.27v.62h1.339v.787H10.27V12.8h-.934z",fill:"#D32C3C"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#FCD0D5",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#F1132D",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM9 11h14v2H9v-2zm0 4h12v2H9v-2zm.066 4.784h1.904c.283 0 .548.028.796.084.248.056.464.15.648.28.184.13.33.304.436.52.107.216.16.481.16.796 0 .304-.055.568-.164.792a1.54 1.54 0 01-.444.552 1.89 1.89 0 01-.648.32 2.87 2.87 0 01-.784.104h-.728V25H9.066v-5.216zm1.832 2.512c.64 0 .96-.277.96-.832 0-.272-.081-.464-.244-.576-.163-.112-.401-.168-.716-.168h-.656v1.576h.656zm3.016-2.512h1.472c.4 0 .76.05 1.08.152.32.101.595.257.824.468.23.21.405.479.528.804.123.325.184.712.184 1.16 0 .448-.061.837-.184 1.168-.123.33-.296.604-.52.82a2.137 2.137 0 01-.804.484c-.312.107-.66.16-1.044.16h-1.536v-5.216zm1.4 4.264c.224 0 .427-.03.608-.088.181-.059.336-.153.464-.284a1.33 1.33 0 00.3-.516 2.5 2.5 0 00.108-.792c0-.31-.036-.57-.108-.78a1.263 1.263 0 00-.3-.504 1.092 1.092 0 00-.464-.268 2.152 2.152 0 00-.608-.08h-.224v3.312h.224zm3.68-4.264h3.288v.992H20.17v1.208h1.808v.992H20.17V25h-1.176v-5.216z"})))}},67158:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 17",fill:"none"},e),a.createElement("path",{d:"M3.52 1.3h5.792l4.908 4.907V13.6a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V4a2.7 2.7 0 012.7-2.7z",fill:"#F5FDF7",stroke:"#248A3D"}),a.createElement("path",{d:"M14.72 6.2L9.32.8v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88z",fill:"#248A3D"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.356 9.2h1.32l.806 1.239.824-1.234h1.302l-1.54 2.085 1.608 2.306H8.477l-1.009-1.444-.577.86h.585v.588h-2.2l1.6-2.296L5.356 9.2z",fill:"#34C759"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#9FE6A2",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#0FC016",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM8 9h4v2H8V9zm0-4h4v2H8V5zm0 8h4v2H8v-2zm0 4h4v2H8v-2zm0 4h4v2H8v-2zm0 4h4v2H8v-2zm6-16h4v2h-4V9zm0-4h4v2h-4V5zm0 8h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm6-12h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2zm0 4h4v2h-4v-2z"})))}},75543:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 16",fill:"none"},e),a.createElement("path",{d:"M3.2.5h5.792L13.9 5.407V12.8a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V3.2A2.7 2.7 0 013.2.5z",fill:"#FDFAF5",stroke:"#FF9500"}),a.createElement("path",{d:"M14.4 5.4L9 0v2.793C9 4.233 10.128 5.4 11.52 5.4h2.88z",fill:"#FF9500"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.557 8.4v4.4h.836v-1.588h1c.701 0 1.27-.63 1.27-1.406 0-.776-.569-1.406-1.27-1.406H5.557zm.836 2.15V9.062h.821c.371 0 .672.333.672.744s-.3.744-.672.744h-.821z",fill:"#FF9500"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z",fill:"#FFDEC1"}),a.createElement("path",{d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM22.996 24v2h-10v-2h10zM11 24v2H9v-2h2zm11.996-4v2h-10v-2h10zM11 20v2H9v-2h2zm5-10v4h4a4 4 0 11-4-4zm1-1c2 0 4 2 4 4h-4V9z",fill:"#FF9433"})))}},74838:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 16",fill:"none"},e),a.createElement("path",{d:"M3.2.5h5.792L13.9 5.407V12.8a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V3.2A2.7 2.7 0 013.2.5z",fill:"#F2F8FF",stroke:"#006BD8"}),a.createElement("path",{d:"M14.4 5.4L9 0v2.793C9 4.233 10.128 5.4 11.52 5.4h2.88zm-8.868 3H4.6l.974 4.4h.955l.632-2.562.608 2.562h.898L9.8 8.4H8.226v.733h.536l-.544 2.104L7.656 8.4h-.9l-.699 2.877L5.532 8.4z",fill:"#006BD8"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#B2D3FF",d:"M3 2.002C3 .896 3.89 0 4.997 0H22l7 7v22.996A2 2 0 0127.003 32H4.997A1.995 1.995 0 013 29.998V2.002z"}),a.createElement("path",{fill:"#197BFF",d:"M21.5 0c-.276 0-.5.23-.5.5V8h7.5c.276 0 .5-.232.5-.5V7l-7-7h-.5zM9 11h14v2H9v-2zm0 4h12v2H9v-2zm0 4h14v2H9v-2zm0 4h10v2H9v-2z"})))}},65090:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 17",fill:"none"},e),a.createElement("path",{d:"M3.52 1.3h5.792l4.908 4.907V13.6a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V4a2.7 2.7 0 012.7-2.7z",fill:"#FDF5FA",stroke:"#E64343"}),a.createElement("path",{d:"M14.72 6.2L9.32.8v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88zm-5.64 6.1v-5h.865v5H9.08zm-4.76 0v-5l3.894 2.5-3.894 2.5z",fill:"#E64343"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{fill:"#FFC5CE",d:"M1 2.992C1 1.892 1.898 1 2.992 1h26.016C30.108 1 31 1.898 31 2.992v26.016c0 1.1-.898 1.992-1.992 1.992H2.992C1.892 31 1 30.102 1 29.008V2.992zm1 12.017C2 14.452 2.443 14 3.01 14h1.98c.558 0 1.01.443 1.01 1.01v1.98C6 17.549 5.557 18 4.99 18H3.01C2.451 18 2 17.557 2 16.99v-1.98zm24 0c0-.557.443-1.009 1.01-1.009h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zM2 9a1 1 0 011.01-1h1.98C5.549 8 6 8.444 6 9v3a1 1 0 01-1.01 1H3.01C2.451 13 2 12.556 2 12V9zm24 0a1 1 0 011.01-1h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 01-1.01 1h-1.98c-.558 0-1.01-.444-1.01-1V9zM2 26a1 1 0 011.01-1h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 01-1.01 1H3.01C2.451 30 2 29.556 2 29v-3zm24 0a1 1 0 011.01-1h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 01-1.01 1h-1.98c-.558 0-1.01-.444-1.01-1v-3zM2 3a1 1 0 011.01-1h1.98C5.549 2 6 2.444 6 3v3a1 1 0 01-1.01 1H3.01C2.451 7 2 6.556 2 6V3zm24 0a1 1 0 011.01-1h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 01-1.01 1h-1.98C26.451 7 26 6.556 26 6V3zM2 20a1 1 0 011.01-1h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 01-1.01 1H3.01C2.451 24 2 23.556 2 23v-3zm24 0a1 1 0 011.01-1h1.98c.558 0 1.01.444 1.01 1v3a1 1 0 01-1.01 1h-1.98c-.558 0-1.01-.444-1.01-1v-3z"}),a.createElement("path",{fill:"#FF405D",d:"M12 10.615c0-.554.38-.775.853-.491l8.294 4.977c.471.282.473.739 0 1.023L12.853 21.1c-.471.282-.853.055-.853-.491v-9.995z"})))}},34519:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 17",fill:"none"},e),a.createElement("path",{d:"M3.52 1.3h5.792l4.908 4.907V13.6a2.7 2.7 0 01-2.7 2.7h-8a2.7 2.7 0 01-2.7-2.7V4a2.7 2.7 0 012.7-2.7z",fill:"#E8EDF3",stroke:"#4F5B69"}),a.createElement("path",{d:"M14.72 6.2L9.32.8v2.793c0 1.44 1.128 2.607 2.52 2.607h2.88zm-8.4 2.35h1.25V9.8H6.32zM7.57 9.8h1.25v1.25H7.57zm-1.25 1.25h1.25v1.25H6.32zm1.25 1.25h1.25v1.25H7.57zm-1.25 1.25h1.25v1.25H6.32z",fill:"#4F5B69"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e),a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(3)"},a.createElement("rect",{width:26,height:32,fill:"#D1D5DB",rx:2}),a.createElement("path",{fill:"#4F5B69",d:"M11 1h2v2h-2V1zm0 4h2v2h-2V5zm0 4h2v2h-2V9zm2-6h2v2h-2V3zm0 4h2v2h-2V7zm-2 5h4v7h-4v-7zm1 1h2v2h-2v-2z"})))}},12954:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 0C3.584 0 0 3.584 0 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zM4.28 13.2A6.353 6.353 0 018 12c1.392 0 2.672.448 3.72 1.2A6.353 6.353 0 018 14.4a6.353 6.353 0 01-3.72-1.2zm8.632-1.104a7.957 7.957 0 00-9.824 0A6.365 6.365 0 011.6 8c0-3.536 2.864-6.4 6.4-6.4 3.536 0 6.4 2.864 6.4 6.4 0 1.56-.56 2.984-1.488 4.096z"}),a.createElement("path",{d:"M8 3.2A2.803 2.803 0 005.2 6c0 1.544 1.256 2.8 2.8 2.8 1.544 0 2.8-1.256 2.8-2.8 0-1.544-1.256-2.8-2.8-2.8zm0 4c-.664 0-1.2-.536-1.2-1.2 0-.664.536-1.2 1.2-1.2.664 0 1.2.536 1.2 1.2 0 .664-.536 1.2-1.2 1.2z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M11 0h5v5l-1.793-1.793-2.451 2.452-.265-.149c-.264 1.889-1.706 3.338-3.46 3.338-1.941 0-3.515-1.771-3.515-3.955C4.516 2.708 6.09.937 8.031.937c.191 0 .373.031.555.063l1 1-1.793 1.793 1.414 1.414 1.995-1.995c.018.041.026.088.041.131l1.55-1.55L11 0zm.547 9.727c1.758 0 3.516 2.637 3.516 3.516s0 1.757-.88 1.757H1.88C1 15 1 14.122 1 13.243c0-.88 1.759-3.516 3.517-3.516s.879.879 3.515.879c2.637 0 1.758-.88 3.516-.88z"}))}},3387:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 17 16"},e),a.createElement("path",{d:"M7.245 16a.748.748 0 01-.52-.2.797.797 0 01-.26-.5l-.24-1.86a3.042 3.042 0 01-.49-.24 6.571 6.571 0 01-.45-.3l-1.74.72a.787.787 0 01-1-.32l-1.48-2.58a.752.752 0 01-.1-.56c.04-.2.14-.36.3-.48l1.5-1.14a1.91 1.91 0 01-.02-.27v-.54c0-.087.007-.177.02-.27l-1.5-1.14a.768.768 0 01-.3-.48.752.752 0 01.1-.56l1.48-2.58a.787.787 0 011-.32l1.74.72c.147-.107.3-.207.46-.3.16-.093.32-.173.48-.24L6.465.7a.797.797 0 01.26-.5.75.75 0 01.52-.2h3c.2 0 .374.067.52.2.147.133.234.3.26.5l.24 1.86c.174.067.337.147.49.24.154.093.304.193.45.3l1.74-.72a.787.787 0 011 .32l1.48 2.58a.75.75 0 01.1.56c-.04.2-.14.36-.3.48l-1.5 1.14c.014.093.02.183.02.27v.54a.984.984 0 01-.04.27l1.5 1.14c.16.12.26.28.3.48a.75.75 0 01-.1.56l-1.48 2.56a.832.832 0 01-.45.36.766.766 0 01-.57-.02l-1.7-.72a5.44 5.44 0 01-.46.3c-.16.093-.32.173-.48.24l-.24 1.86a.798.798 0 01-.26.5.748.748 0 01-.52.2h-3zm.7-1.6h1.58l.28-2.12a4.486 4.486 0 001.15-.47c.354-.207.677-.457.97-.75l1.98.82.78-1.36-1.72-1.3a2.83 2.83 0 00.14-.59 4.93 4.93 0 000-1.26 2.83 2.83 0 00-.14-.59l1.72-1.3-.78-1.36-1.98.84a4.445 4.445 0 00-.97-.77 4.486 4.486 0 00-1.15-.47l-.26-2.12h-1.58l-.28 2.12a4.484 4.484 0 00-1.15.47 4.78 4.78 0 00-.97.75l-1.98-.82-.78 1.36 1.72 1.28c-.066.2-.113.4-.14.6a4.848 4.848 0 000 1.26c.027.2.074.4.14.6l-1.72 1.3.78 1.36 1.98-.84c.294.307.617.563.97.77a4.5 4.5 0 001.15.47l.26 2.12zm.84-3.6c.774 0 1.434-.273 1.98-.82.547-.547.82-1.207.82-1.98 0-.773-.273-1.433-.82-1.98a2.698 2.698 0 00-1.98-.82c-.786 0-1.45.273-1.99.82A2.715 2.715 0 005.985 8c0 .773.27 1.433.81 1.98.54.547 1.204.82 1.99.82z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M14.25 7.078c.051.26.077.568.077.926 0 .358-.026.665-.078.925l1.62 1.333c.131.086.163.203.099.352-.325.95-.859 1.826-1.602 2.628-.104.124-.229.155-.37.094l-2.032-.668c-.52.396-1.08.705-1.68.926l-.409 2c-.026.146-.117.233-.273.258-.56.1-1.094.148-1.602.148a9.21 9.21 0 01-1.601-.148c-.157-.024-.248-.11-.274-.259l-.409-1.999a5.98 5.98 0 01-1.68-.926l-2.03.668c-.145.062-.268.03-.372-.094C.892 12.44.359 11.565.032 10.614c-.065-.148-.032-.266.098-.352L1.751 8.93a4.761 4.761 0 01-.078-.925c0-.358.026-.667.078-.926L.131 5.746C0 5.66-.034 5.542.031 5.394c.326-.95.86-1.826 1.602-2.627.104-.123.228-.154.371-.093l2.031.667a5.99 5.99 0 011.68-.926l.41-1.999c.025-.148.116-.234.273-.259a8.221 8.221 0 013.202 0c.156.024.247.111.273.26l.41 1.998c.6.223 1.159.53 1.68.926l2.03-.667c.143-.062.267-.03.371.093.742.802 1.276 1.678 1.602 2.627.064.148.032.266-.098.352l-1.62 1.332zM8 4.5a3.5 3.5 0 100 7 3.5 3.5 0 000-7z",fillRule:"evenodd"}))}},73806:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 0C3.584 0 0 3.584 0 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zM1.6 8c0-.488.064-.968.168-1.424L5.592 10.4v.8c0 .88.72 1.6 1.6 1.6v1.544C4.048 13.944 1.6 11.256 1.6 8zm11.112 4.32a1.594 1.594 0 00-1.52-1.12h-.8V8.8c0-.44-.36-.8-.8-.8h-4.8V6.4h1.6c.44 0 .8-.36.8-.8V4h1.6c.88 0 1.6-.72 1.6-1.6v-.328A6.403 6.403 0 0114.4 8a6.393 6.393 0 01-1.688 4.32z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M7.889 13.999L7 10 6 9 4 6l-.355-2.128A6 6 0 007.888 14zm.238-11.998L10 3.5V5L8 6.5l-1.5 1 .5 1 3 .5 1 1v1.5l-1.549 2.323A6 6 0 008.127 2.001zM8 16A8 8 0 118 0a8 8 0 010 16z"}))}},16385:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8.8 0v2.424c2.712.392 4.8 2.712 4.8 5.536 0 .72-.144 1.4-.384 2.032l2.08 1.224A7.9 7.9 0 0016 7.96C16 3.816 12.84.4 8.8 0zM8 13.56a5.596 5.596 0 01-5.6-5.6c0-2.824 2.088-5.144 4.8-5.536V0A7.993 7.993 0 000 7.96c0 4.416 3.576 8 7.992 8a7.98 7.98 0 006.448-3.272l-2.08-1.224A5.56 5.56 0 018 13.56z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M7 16A7 7 0 017 2v7h7a7 7 0 01-7 7zm2-9V0a7 7 0 017 7H9z"}))}},3473:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 13 16"},e),a.createElement("path",{d:"M12.413 4.667a1.667 1.667 0 00-2-1.634v-.366A1.667 1.667 0 008.3 1.06 1.673 1.673 0 006.746 0c-.82 0-1.5.593-1.64 1.373A1.667 1.667 0 003.08 3v3.927a1.935 1.935 0 00-.813-.44l-.513-.14a1.315 1.315 0 00-1.46.553c-.253.38-.267.873-.1 1.3L1.9 12.487A5.57 5.57 0 007.08 16a5.332 5.332 0 005.333-5.333v-6zm-1.333 6c0 2.206-1.794 4-4 4-1.74 0-3.3-1.06-3.94-2.674l-1.734-4.36.354.094c.306.08.553.306.666.6L3.08 10h1.333V3a.33.33 0 01.333-.333A.33.33 0 015.08 3v5h1.333V1.667a.33.33 0 01.333-.334.33.33 0 01.334.334V8h1.333V2.667a.33.33 0 01.333-.334.33.33 0 01.334.334V8h1.333V4.667a.33.33 0 01.333-.334.33.33 0 01.334.334v6z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 15 16"},e),a.createElement("path",{d:"M14.992 8V5a1.001 1.001 0 00-2 0v3h-1V2a1.001 1.001 0 00-2 0v5h-1V1a1.001 1.001 0 00-2 0v6h-1V2c0-.551-.45-1-1-1-.551 0-1 .449-1 1v6.5a.5.5 0 01-.88.325L1.1 6.125c-.222-.182-.64-.166-.897.091a.7.7 0 00-.075.898c.064.117 1.542 4.144 3.227 6.798A4.486 4.486 0 007.156 16h3.336c2.48 0 4.5-2.019 4.5-4.5V8z"}))}},58896:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 0C3.584 0 0 3.584 0 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm.8 13.6H7.2V12h1.6v1.6zm1.656-6.2l-.72.736C9.16 8.72 8.8 9.2 8.8 10.4H7.2V10c0-.88.36-1.68.936-2.264l.992-1.008C9.424 6.44 9.6 6.04 9.6 5.6 9.6 4.72 8.88 4 8 4c-.88 0-1.6.72-1.6 1.6H4.8a3.2 3.2 0 116.4 0c0 .704-.288 1.344-.744 1.8z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M8 16A8 8 0 118 0a8 8 0 010 16zm1-7.198C10.122 8.355 11 7.21 11 6c0-1.552-1.448-3-3-3S5 4.448 5 6h2c0-.448.552-1 1-1 .448 0 1 .552 1 1 0 .448-.552 1-1 1a1 1 0 00-1 1v2h2V8.802zM7 11v2h2v-2H7z"}))}},16735:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M7.2 12.8h1.6v-1.6H7.2v1.6zM8 0C3.584 0 0 3.584 0 8s3.584 8 8 8 8-3.584 8-8-3.584-8-8-8zm0 14.4A6.408 6.408 0 011.6 8c0-3.528 2.872-6.4 6.4-6.4 3.528 0 6.4 2.872 6.4 6.4 0 3.528-2.872 6.4-6.4 6.4zM8 3.2a3.2 3.2 0 00-3.2 3.2h1.6c0-.88.72-1.6 1.6-1.6.88 0 1.6.72 1.6 1.6 0 1.6-2.4 1.4-2.4 4h1.6c0-1.8 2.4-2 2.4-4A3.2 3.2 0 008 3.2z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M9 8.802C10.122 8.355 11 7.21 11 6c0-1.552-1.448-3-3-3S5 4.448 5 6h2c0-.448.552-1 1-1 .448 0 1 .552 1 1 0 .448-.552 1-1 1a1 1 0 00-1 1v2h2V8.802zM7 11v2h2v-2H7zM1 8a7 7 0 1014 0A7 7 0 001 8zM0 8a8 8 0 1016 0A8 8 0 000 8z"}))}},26712:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8.8 4.664A2.413 2.413 0 0010.264 3.2H12.8l-2.4 5.6c0 1.328 1.256 2.4 2.8 2.4 1.544 0 2.8-1.072 2.8-2.4l-2.4-5.6h1.6V1.6h-4.936A2.392 2.392 0 008 0a2.392 2.392 0 00-2.264 1.6H.8v1.6h1.6L0 8.8c0 1.328 1.256 2.4 2.8 2.4 1.544 0 2.8-1.072 2.8-2.4L3.2 3.2h2.536c.24.68.784 1.224 1.464 1.464V13.6H0v1.6h16v-1.6H8.8V4.664zM14.696 8.8h-2.992L13.2 5.312 14.696 8.8zm-10.4 0H1.304L2.8 5.312 4.296 8.8zM8 3.2c-.44 0-.8-.36-.8-.8 0-.44.36-.8.8-.8.44 0 .8.36.8.8 0 .44-.36.8-.8.8z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 0c1.306 0 2.418.835 2.83 2H14a1 1 0 01.139 1.99l1.825 3.824a.499.499 0 01.036.198V8.5a2.5 2.5 0 01-5 0v-.49a.5.5 0 01.036-.196L12.857 4H10.83A3.008 3.008 0 019 5.83V13h6a1 1 0 110 2H1a1 1 0 110-2h6V5.83A3.008 3.008 0 015.17 4H3.144l1.821 3.814A.498.498 0 015 8.012V8.5a2.5 2.5 0 01-5 0v-.49a.498.498 0 01.036-.196l1.826-3.823A1 1 0 012 2h3.17A3.001 3.001 0 018 0zm5.5 5.346L14.935 8h-2.87L13.5 5.346zM1.065 8h2.87L2.5 5.346 1.065 8zM8 4a1 1 0 100-2 1 1 0 000 2z"}))}},43738:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M12.444 4.444l-1.253 1.254 1.405 1.413H5.333V8.89h7.263l-1.405 1.404 1.253 1.263L16 8l-3.556-3.556zM1.778 1.778H8V0H1.778C.8 0 0 .8 0 1.778v12.444C0 15.2.8 16 1.778 16H8v-1.778H1.778V1.778z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.586 9H5a1 1 0 110-2h7.586l-1.293-1.293a1 1 0 111.414-1.414l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L12.586 9zM0 1a1 1 0 112 0v14a1 1 0 01-2 0V1z"}))}},4230:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 17 17"},e),a.createElement("path",{d:"M12.18 10.808h-.723l-.256-.247a5.92 5.92 0 001.436-3.87 5.946 5.946 0 10-5.946 5.947 5.92 5.92 0 003.87-1.437l.247.256v.723l4.574 4.565 1.363-1.363-4.565-4.574zm-5.489 0a4.111 4.111 0 01-4.116-4.117A4.111 4.111 0 016.69 2.575a4.111 4.111 0 014.117 4.116 4.111 4.111 0 01-4.117 4.117z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M10.472 10H11.5l3.294 3.294a.996.996 0 010 1.412l-.088.088a1 1 0 01-1.412 0L10 11.5v-1.028a6 6 0 11.472-.472zM6 10a4 4 0 100-8 4 4 0 000 8z"}))}},90843:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(51894),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.289 1.92l.02-.02.737-.737.02-.02c.241-.24.454-.453.645-.615a2.11 2.11 0 01.718-.426c.418-.136.87-.136 1.288 0 .286.093.515.253.718.426.191.162.404.374.644.615l.02.02.738.737.02.02c.24.241.454.454.615.645.173.203.333.432.426.718.136.419.136.87 0 1.288a2.117 2.117 0 01-.426.718c-.162.191-.374.404-.615.644l-.02.02-.737.738-.02.02c-.241.24-.454.454-.645.615a2.118 2.118 0 01-.718.426c-.418.136-.87.136-1.288 0a2.117 2.117 0 01-.718-.426 10.947 10.947 0 01-.644-.615l-.02-.02-.738-.737-.02-.02c-.24-.241-.454-.454-.615-.645a2.118 2.118 0 01-.426-.718 2.084 2.084 0 010-1.288 2.11 2.11 0 01.426-.718c.161-.191.374-.404.615-.644zm.576 1.657c-.11.129-.126.177-.13.189a.521.521 0 000 .322c.004.012.02.06.13.19.116.136.283.303.55.57l.737.737c.267.267.434.434.57.55.13.11.178.126.19.13a.521.521 0 00.322 0c.011-.004.06-.02.19-.13.136-.116.303-.283.57-.55l.737-.737c.267-.267.434-.434.55-.57.11-.13.126-.178.13-.19a.521.521 0 000-.322c-.004-.012-.02-.06-.13-.19a11.036 11.036 0 00-.55-.57l-.737-.737a10.98 10.98 0 00-.57-.55c-.13-.11-.178-.126-.19-.13a.521.521 0 00-.322 0c-.012.004-.06.02-.19.13a10.98 10.98 0 00-.57.55l-.737.737c-.267.267-.434.434-.55.57zM3.91 7.314h.028c.34 0 .641 0 .89-.02a2.12 2.12 0 00.81-.207c.392-.2.71-.519.91-.91a2.12 2.12 0 00.207-.81c.02-.249.02-.55.02-.89V3.376c0-.34 0-.64-.02-.89a2.119 2.119 0 00-.206-.808 2.085 2.085 0 00-.911-.911 2.118 2.118 0 00-.81-.207c-.249-.02-.55-.02-.89-.02H2.837c-.34 0-.64 0-.89.02a2.12 2.12 0 00-.809.207c-.392.2-.71.519-.91.91a2.118 2.118 0 00-.208.81c-.02.249-.02.55-.02.89v1.101c0 .34 0 .64.02.89.022.265.07.54.207.808.2.392.519.711.911.911.268.137.543.185.809.207.25.02.55.02.89.02H3.91zm1.018-1.62c-.011.006-.057.028-.226.042a11.01 11.01 0 01-.792.015H2.866c-.377 0-.614 0-.792-.015-.169-.014-.215-.036-.226-.042a.521.521 0 01-.228-.228c-.005-.01-.028-.057-.041-.226a10.986 10.986 0 01-.016-.792V3.406c0-.378.001-.614.016-.792.013-.17.036-.216.041-.226a.521.521 0 01.228-.228c.01-.006.057-.028.226-.042.178-.014.415-.015.792-.015H3.91c.377 0 .614 0 .792.015.169.014.215.036.226.042.098.05.178.13.228.228.005.01.027.057.041.226.015.178.015.414.015.792v1.042c0 .378 0 .614-.015.792-.014.17-.036.216-.041.226a.521.521 0 01-.228.228zM3.909 16h.028c.34 0 .642 0 .89-.02a2.12 2.12 0 00.81-.207c.392-.2.71-.519.91-.911.137-.268.186-.543.207-.809.02-.25.02-.55.02-.89v-1.101c0-.34 0-.64-.02-.89a2.119 2.119 0 00-.206-.809 2.085 2.085 0 00-.911-.91 2.117 2.117 0 00-.81-.207c-.248-.02-.55-.02-.89-.02H2.838c-.34 0-.64 0-.89.02-.266.021-.54.07-.809.206-.392.2-.71.52-.91.911a2.118 2.118 0 00-.208.81c-.02.248-.02.55-.02.89v1.099c0 .34 0 .64.02.89.022.266.07.54.207.809.2.392.519.71.911.91.268.137.543.186.809.208.25.02.55.02.89.02H3.91zm1.018-1.62c-.011.005-.057.028-.226.041a10.95 10.95 0 01-.792.016H2.866c-.377 0-.614-.001-.792-.016-.169-.013-.215-.036-.226-.041a.521.521 0 01-.228-.228c-.005-.01-.028-.057-.041-.226a10.985 10.985 0 01-.016-.792V12.09c0-.377.001-.614.016-.792.013-.168.036-.215.041-.226a.521.521 0 01.228-.228c.01-.005.057-.027.226-.041.178-.015.415-.015.792-.015H3.91c.377 0 .614 0 .792.015.169.014.215.036.226.041.098.05.178.13.228.228.005.01.027.057.041.226.015.178.015.415.015.793v1.042c0 .377 0 .614-.015.792-.014.169-.036.215-.041.226a.521.521 0 01-.228.228zM12.594 16h.03c.34 0 .64 0 .89-.02.265-.022.54-.07.808-.207.392-.2.711-.519.911-.911a2.12 2.12 0 00.207-.809c.02-.25.02-.55.02-.89v-1.101c0-.34 0-.64-.02-.89a2.12 2.12 0 00-.207-.809 2.085 2.085 0 00-.91-.91 2.117 2.117 0 00-.81-.207c-.249-.02-.55-.02-.89-.02h-1.101c-.34 0-.64 0-.89.02-.265.021-.54.07-.808.206-.392.2-.711.52-.911.911a2.118 2.118 0 00-.207.81c-.02.248-.02.55-.02.89v1.099c0 .34 0 .64.02.89.022.266.07.54.207.809.2.392.519.71.91.91.269.137.544.186.81.208.249.02.55.02.89.02h1.071zm1.018-1.62c-.01.005-.057.028-.226.041a10.6 10.6 0 01-.792.016h-1.042a10.6 10.6 0 01-.792-.016c-.17-.013-.216-.036-.226-.041a.521.521 0 01-.228-.228c-.006-.01-.028-.057-.042-.226a11.009 11.009 0 01-.015-.792V12.09c0-.377 0-.614.015-.792.014-.168.036-.215.042-.226a.521.521 0 01.228-.228c.01-.005.057-.027.226-.041.178-.015.414-.015.792-.015h1.042c.378 0 .614 0 .792.015.17.014.216.036.226.041.098.05.178.13.228.228.006.01.028.057.042.226.014.178.015.415.015.793v1.042c0 .377 0 .614-.015.792-.014.169-.036.215-.042.226a.521.521 0 01-.228.228z"}))}},64466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 15"},e),a.createElement("path",{d:"M1.455 12.954h12.363v1.455H1.455A1.46 1.46 0 010 12.954V3.5h1.455v9.454zM16 3.5v6.545c0 .8-.655 1.455-1.454 1.455H4.364a1.46 1.46 0 01-1.455-1.455l.007-8c0-.8.648-1.454 1.448-1.454H8l1.455 1.454h5.09c.8 0 1.455.655 1.455 1.455zM4.364 10.045h10.181V3.5H8.852L7.396 2.045H4.364v8z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M5.007 14A2.006 2.006 0 013 11.999V3H1.998A.999.999 0 001 4.001v10.998A1 1 0 002.007 16h8.986A1 1 0 0012 15.004V14H5.007zM4 1.001A.999.999 0 014.998 0H10v5h5v7.005a1 1 0 01-1.007.995H5.007A1.001 1.001 0 014 11.999V1.001zM11 4V0l4 4h-4z"}))}},19034:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M14.222 14.222H1.778V1.778H8V0H1.778C.79 0 0 .8 0 1.778v12.444C0 15.2.791 16 1.778 16h12.444C15.2 16 16 15.2 16 14.222V8h-1.778v6.222zM9.778 0v1.778h3.19l-8.737 8.738 1.253 1.253 8.738-8.738v3.191H16V0H9.778z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M9 0v2h3.5L6 8.5 7.5 10 14 3.5V7h2V1.003A.996.996 0 0014.997 0H9zM7 2V0H1.003A1 1 0 000 1v14c0 .552.445 1 1 1h14c.552 0 1-.438 1-1.003V9h-2v5H2V2h5z",fillRule:"evenodd"}))}},41286:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 16c-4.408 0-8-3.592-8-8 0-4.408 3.592-8 8-8 4.408 0 8 3.232 8 7.2 0 2.648-2.152 4.8-4.8 4.8H9.784c-.224 0-.4.176-.4.4 0 .096.04.184.104.264.328.376.512.848.512 1.336a2 2 0 01-2 2zM8 1.6A6.408 6.408 0 001.6 8c0 3.528 2.872 6.4 6.4 6.4.224 0 .4-.176.4-.4a.433.433 0 00-.112-.28 1.986 1.986 0 01-.504-1.32 2 2 0 012-2H11.2a3.2 3.2 0 003.2-3.2c0-3.088-2.872-5.6-6.4-5.6z"}),a.createElement("path",{d:"M3.6 8.8a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zM6 5.6a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zm4 0a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zm2.4 3.2a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.889 8a1.333 1.333 0 110-2.667 1.333 1.333 0 010 2.667zm-2.667-3.556a1.333 1.333 0 110-2.666 1.333 1.333 0 010 2.666zm-4.444 0a1.333 1.333 0 110-2.666 1.333 1.333 0 010 2.666zM3.11 8a1.333 1.333 0 110-2.667A1.333 1.333 0 013.11 8zM8 0a8 8 0 100 16c.736 0 1.333-.597 1.333-1.333a1.31 1.31 0 00-.346-.89 1.333 1.333 0 01.996-2.222h1.573A4.444 4.444 0 0016 7.112C16 3.182 12.418 0 8 0z"}))}},90870:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 17 14"},e),a.createElement("path",{d:"M2.031 2.452l5.722 2.453-5.73-.762.008-1.691zm5.715 6.643L2.024 11.55V9.857l5.722-.762zM.508.143L.5 5.476 11.929 7 .5 8.524l.008 5.333L16.5 7 .508.143z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M16 0l-6 15-2.5-2.5L4 15l-1-4 10-8.5-10 6L0 6z",fillRule:"evenodd"}))}},43068:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8 1.9a2.1 2.1 0 110 4.2 2.1 2.1 0 010-4.2zm0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H1.9V13c0-.64 3.13-2.1 6.1-2.1zM8 0C5.79 0 4 1.79 4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M8 9c2.21 0 4-2.015 4-4.5S10.21 0 8 0 4 2.015 4 4.5 5.79 9 8 9zm-8 5c0-1 2-4 4-4s1 1 4 1 2-1 4-1 4 3 4 4 0 2-1 2H1c-1 0-1-1-1-2z"}))}},78504:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(51894),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 13"},e),a.createElement("path",{d:"M12.768 5.398h-.905a.753.753 0 01-.553-.222.745.745 0 01-.223-.55.76.76 0 01.223-.554.746.746 0 01.553-.226h.905v-.904c0-.22.073-.404.221-.553a.745.745 0 01.55-.223.76.76 0 01.555.223c.15.149.226.333.226.553v.904h.904c.22 0 .404.074.553.222a.745.745 0 01.223.55.76.76 0 01-.223.554.746.746 0 01-.553.226h-.904v.905a.75.75 0 01-.222.552.745.745 0 01-.55.224.759.759 0 01-.554-.224.746.746 0 01-.226-.552v-.905zm-6.706.825c-.868 0-1.604-.302-2.208-.906-.604-.604-.906-1.34-.906-2.208 0-.868.302-1.603.906-2.205C4.458.3 5.194 0 6.062 0 6.93 0 7.665.301 8.27.904c.604.602.906 1.337.906 2.205 0 .868-.302 1.604-.906 2.208-.604.604-1.34.906-2.208.906zM0 10.753v-.36c0-.383.094-.734.281-1.055.188-.32.446-.576.774-.766.76-.44 1.563-.778 2.409-1.013a9.646 9.646 0 012.598-.353c.893 0 1.762.117 2.607.35.846.234 1.646.57 2.4 1.01.328.191.586.446.773.765.188.32.282.673.282 1.061v.36c0 .471-.166.872-.497 1.203a1.64 1.64 0 01-1.203.497h-8.73c-.472 0-.871-.166-1.2-.497A1.643 1.643 0 010 10.753z"}))}},32736:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M8.6 8L4.7 4.1a.948.948 0 01-.275-.7c0-.284.092-.517.275-.7a.948.948 0 01.7-.275c.283 0 .517.091.7.275l4.6 4.6c.1.1.17.208.213.325.041.116.062.241.062.375 0 .133-.02.258-.063.375a.878.878 0 01-.212.325l-4.6 4.6a.948.948 0 01-.7.275.948.948 0 01-.7-.275.948.948 0 01-.275-.7c0-.284.092-.517.275-.7L8.6 8z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{fillRule:"evenodd",d:"M12.707 7.293l-6-6a.999.999 0 10-1.414 1.414L10.586 8l-5.293 5.293a.999.999 0 101.414 1.414l6-6a.999.999 0 000-1.414"}))}},4314:function(e,t,n){"use strict";n.d(t,{Z:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e,{role:"progressbar","aria-busy":"true"}),a.createElement("path",{d:"M8 16a7.74 7.74 0 01-3.1-.63 8.114 8.114 0 01-2.55-1.72A8.115 8.115 0 01.63 11.1 7.74 7.74 0 010 8c0-1.107.21-2.143.63-3.11a8.146 8.146 0 011.72-2.54A8.114 8.114 0 014.9.63 7.74 7.74 0 018 0c.227 0 .417.077.57.23.153.153.23.343.23.57a.774.774 0 01-.23.57.774.774 0 01-.57.23c-1.773 0-3.283.623-4.53 1.87C2.223 4.717 1.6 6.227 1.6 8c0 1.773.623 3.283 1.87 4.53C4.717 13.777 6.227 14.4 8 14.4c1.773 0 3.283-.623 4.53-1.87C13.777 11.283 14.4 9.773 14.4 8c0-.227.077-.417.23-.57a.774.774 0 01.57-.23c.227 0 .417.077.57.23.153.153.23.343.23.57a7.74 7.74 0 01-.63 3.1 8.115 8.115 0 01-1.72 2.55 8.146 8.146 0 01-2.54 1.72A7.72 7.72 0 018 16z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 32 32"},e,{role:"progressbar","aria-busy":"true"}),a.createElement("path",{opacity:.25,d:"M16 0a16 16 0 000 32 16 16 0 000-32m0 4a12 12 0 010 24 12 12 0 010-24"}),a.createElement("path",{d:"M16 0a16 16 0 0116 16h-4A12 12 0 0016 4z"}))}},61008:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 12 12"},e),a.createElement("path",{d:"M10 2v8H2V2h8zm2-2H0v12h12V0z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 12 12"},e),a.createElement("path",{d:"M.75 1.5A.75.75 0 011.5.75h9a.75.75 0 01.75.75v9a.75.75 0 01-.75.75h-9a.75.75 0 01-.75-.75v-9z"}))}},3745:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(51894),a=n(67294),i=n(92951);let o=function(e){if((0,i.isTwakeTheme)())return a.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),a.createElement("path",{d:"M3.41 11.705L8 7.125l4.59 4.58 1.41-1.41-6-6-6 6 1.41 1.41z"}));return a.createElement("svg",(0,r.Z)({viewBox:"0 0 24 24"},e),a.createElement("path",{d:"M20.603 17.825a1.571 1.571 0 002.222-2.222l-9.428-9.428a1.571 1.571 0 00-2.222 0l-9.429 9.428a1.571 1.571 0 002.222 2.222l8.318-8.317 8.317 8.317z",fillRule:"evenodd"}))}},81842:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(51894),a=n(67294);let i=function(e){return a.createElement("svg",(0,r.Z)({viewBox:"0 0 22 22",fill:"none"},e),a.createElement("rect",{x:.498,y:.495,width:21.51,height:21.51,rx:6.563,fill:"#fff"}),a.createElement("rect",{x:.498,y:.495,width:21.51,height:21.51,rx:6.563,fill:"url(#workplace_twake_svg__paint0_linear_1573_14803)"}),a.createElement("rect",{x:.498,y:.495,width:21.51,height:21.51,rx:6.563,fill:"url(#workplace_twake_svg__paint1_linear_1573_14803)"}),a.createElement("rect",{x:.498,y:.495,width:21.51,height:21.51,rx:6.563,fill:"url(#workplace_twake_svg__paint2_linear_1573_14803)"}),a.createElement("path",{d:"M11.281 3.7c.008.006.017.01.027.012l.014.002a.405.405 0 01.156.05c.015.007.03.016.044.024l1.068.605 1.25.707.906.512.056.032a.487.487 0 01.229.363l.002.1v3.145a.489.489 0 01-.71.401c-.017-.008-.034-.018-.05-.027l-1.606-.909-1.138-.642-.056-.032a.542.542 0 00-.178-.051h-.058a.462.462 0 00-.213.053c-.02.01-.038.021-.056.032l-1.215.696-1.458.835a3.52 3.52 0 01-.063.036.533.533 0 01-.176.058l-.07.002a.433.433 0 01-.195-.046.48.48 0 01-.283-.433V6.05a.483.483 0 01.224-.404l.05-.029.86-.493 1.021-.585 1.033-.59.256-.147.056-.032a.553.553 0 01.107-.044.53.53 0 01.071-.013.048.048 0 00.025-.012l.07-.002zm-7.514 8.774a.036.036 0 00.026-.032.487.487 0 01.27-.389l.652-.376 1.455-.84.566-.326.063-.036a.49.49 0 01.702.418v3.209a.49.49 0 00.213.394.671.671 0 00.068.04l.62.348 1.278.714.792.442.062.035c.11.064.188.168.22.29a.463.463 0 01.013.192.476.476 0 01-.224.35c-.02.013-.042.024-.063.036L8.411 18.08l-.704.386c-.019.01-.036.022-.057.031a.494.494 0 01-.48-.016l-.217-.127-2.877-1.692a.533.533 0 01-.055-.033.487.487 0 01-.219-.306c-.005-.02-.007-.043-.01-.064a.028.028 0 00-.018-.02.04.04 0 00-.007-.003v-3.763zm11.207 6.103a.078.078 0 00-.017-.012.533.533 0 00-.055-.016.47.47 0 01-.127-.049l-.069-.04-1.063-.613-1.573-.907-.05-.03a.477.477 0 01-.224-.4.477.477 0 01.27-.448l.896-.514 1.21-.692.566-.325.074-.043a.487.487 0 00.227-.35 1.02 1.02 0 00.006-.115v-3.092c0-.024 0-.04.002-.058a.481.481 0 01.356-.43.471.471 0 01.113-.019.492.492 0 01.285.084l.722.415 1.268.733.665.383.062.036a.469.469 0 01.19.218.15.15 0 01.015.048.083.083 0 00.016.032v3.964a.032.032 0 00-.015.023.178.178 0 01-.017.055.48.48 0 01-.18.208.67.67 0 01-.062.035l-.978.56-2.18 1.25a.376.376 0 01-.055.032.468.468 0 01-.127.05.389.389 0 00-.048.013.03.03 0 00-.016.014h-.087z",fill:"#fff"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"workplace_twake_svg__paint0_linear_1573_14803",x1:22.008,y1:13.042,x2:.498,y2:13.042,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:.13,stopColor:"#A033FF"}),a.createElement("stop",{offset:.61,stopColor:"#0094FF"}),a.createElement("stop",{offset:1,stopColor:"#4FB500"})),a.createElement("linearGradient",{id:"workplace_twake_svg__paint1_linear_1573_14803",x1:10.356,y1:7.217,x2:3.634,y2:20.66,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#FFD600",stopOpacity:0}),a.createElement("stop",{offset:.563,stopColor:"#FFC700"})),a.createElement("linearGradient",{id:"workplace_twake_svg__paint2_linear_1573_14803",x1:12.149,y1:13.042,x2:19.767,y2:21.109,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:.03,stopColor:"#FF3B30",stopOpacity:0}),a.createElement("stop",{offset:.843,stopColor:"#E73B2D"}))))}},25750:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(89659).Z},24546:function(e,t,n){"use strict";n.r(t),n.d(t,{BorderedList:()=>a,default:()=>i});var r=n(62822),a=(0,n(68893).Z)({root:{borderTop:"1px solid var(--silver)"}})(r.Z);let i=r.Z},10059:function(e,t,n){"use strict";n.r(t),n.d(t,{LitItemPropTypes:()=>D,default:()=>T});var r=n(51894),a=n(91888),i=n(65691),o=n(50998),c=n(60988),s=n(94184),u=n.n(s),l=n(82492),d=n.n(l),f=n(45697),p=n.n(f),h=n(67294),m=n(41120),v=function(e){var t,n;return e?(null===(t=e.type)||void 0===t?void 0:t.displayName)||(null===(n=e.type)||void 0===n?void 0:n.name)||"Node":null},y=function(e){var t=h.Children.toArray(e.children);return h.Children.count(t)>0?t:null},b=function(e){var t=y(e);return h.Children.count(t)||null},g=function(e){var t=y(e);if(!t)return null;var n=t[t.length-1];return n.type===h.Fragment?y(n.props)[0]:n},x=["gutters"],w=["gutters"],k=["gutters","ellipsis"],O=["className","gutters","ellipsis","componentElement"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=(0,m.Z)({gutters:{paddingLeft:function(e){return e.guttersValue.left},paddingRight:function(e){return e.guttersValue.right}},secondaryAction:{paddingRight:function(e){return e.secondaryActionPaddingRight}}}),C=function(e){var t=e.gutters,n=g((0,i.Z)(e,x));return n&&(0,c.default)(n,["ListItemSecondaryAction"])?48*b(n.props)+("double"===t?24:8):0},P=function(e){var t=e.gutters,n=(0,i.Z)(e,w),r="double"===t?32:16,a=g(n);return{left:r,right:a&&v(a).includes("ListItemIcon")?r-8:r}},j=function(e){var t=e.gutters,n=e.ellipsis,r=(0,i.Z)(e,k),a=y(r),o=b(r);return h.Children.map(a,function(e,r){var a=r===o-1&&(0,c.default)(e,["ListItemSecondaryAction"])||!1,i=v(e).includes("ListItemText");return a&&"double"===t?h.cloneElement(e,{className:"".concat(e.props.className," u-mr-1")}):i?h.cloneElement(e,{ellipsis:n}):e})},A=(0,h.forwardRef)(function(e,t){var n=e.className,a=e.gutters,c=e.ellipsis,s=e.componentElement,l=(0,i.Z)(e,O),f=S({secondaryActionPaddingRight:C(E({gutters:a},l)),guttersValue:P(E({gutters:a},l))}),p=j(E({gutters:a,ellipsis:c},l));return h.createElement(o.Z,(0,r.Z)({},l,{component:s||l.component,ref:t,classes:d()(l.classes,f),className:u()(n,l.size),disableGutters:l.disableGutters||"disabled"===a}),p)});A.displayName="ListItem",A.defaultProps={gutters:"default",size:"medium"};var D={gutters:p().oneOf(["disabled","double","default"]),size:p().oneOf(["small","medium","large"]),ellipsis:p().bool,componentElement:p().elementType};A.propTypes=D;let T=A},96105:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>h,largeSize:()=>f,mediumSize:()=>d,smallSize:()=>l});var r=n(51894),a=n(65691),i=n(46869),o=n(94184),c=n.n(o),s=n(67294),u=["className"],l=16,d=24,f=32,p=(0,s.forwardRef)(function(e,t){var n=e.className,o=(0,a.Z)(e,u);return s.createElement(i.Z,(0,r.Z)({},o,{ref:t,className:c()(n,"cozyListItemIcon")}))});p.displayName="ListItemIcon";let h=p},11075:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(51894),a=n(65691),i=n(91888),o=n(95757),c=n(94184),s=n.n(c),u=n(51463),l=n.n(u),d=n(67294),f=["primaryText","secondaryText","primaryTextClassName","secondaryTextClassName","primary","secondary","ellipsis"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var h=l()(function(){console.warn('primaryText/primaryTextClassName and secondaryText/secondaryTextClassName are deprecated. Please use directly the primary prop : primary={<span className="u-error">Error</span>} for example.')}),m={variant:"caption"},v=function(e,t,n){return t||n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({classes:{root:s()(t,n&&"u-db u-ellipsis")}},e):e},y=(0,d.forwardRef)(function(e,t){var n=e.primaryText,i=e.secondaryText,c=e.primaryTextClassName,s=e.secondaryTextClassName,u=e.primary,l=e.secondary,p=e.ellipsis,y=(0,a.Z)(e,f);(0,d.useEffect)(function(){(n||i||c||s)&&h()},[n,i,c,s]);var b=u||n,g=l||i,x=e.primaryTypographyProps,w=e.secondaryTypographyProps;return x=(0,d.useMemo)(function(){return v(x,c,p)},[x,c,p]),w=(0,d.useMemo)(function(){return v(w||m,s,p)},[w,s,p]),d.createElement(o.Z,(0,r.Z)({ref:t,primary:b,secondary:g,primaryTypographyProps:x,secondaryTypographyProps:w},y))});y.displayName="ListItemText",y.defaultProps={ellipsis:!0};let b=y},71363:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(67294),a=n(30724),i=n.n(a),o=n(25750),c=n(32692);let s=function(e){var t=e.content;return r.createElement(i(),{source:t,renderers:{link:function(e){var t=e.children,n=e.href;return r.createElement(o.default,{href:n,rel:"noreferrer",target:"_blank"},t)},heading:function(e){var t=e.children,n=e.level;return r.createElement(c.default,{variant:"h".concat(n),className:"u-mb-1"},t)},paragraph:function(e){var t=e.children;return r.createElement(c.default,{variant:"body1",className:"u-mb-1"},t)}}})}},24584:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(53625).Z},9758:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(79895).Z},1386:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(23389).Z},96716:function(e,t,n){"use strict";n.r(t),n.d(t,{CircularProgress:()=>a.Z,LinearProgress:()=>r.Z});var r=n(33681),a=n(95477)},49843:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>N});var r=n(51894),a=n(91888),i=n(31573),o=n(65691),c=n(94184),s=n.n(c),u=n(23279),l=n.n(u),d=n(45697),f=n.n(d),p=n(67294),h=n(41256),m={en:{SearchBar:{placeholder:"Search"}},fr:{SearchBar:{placeholder:"Rechercher"}}};(0,h.Z)(m);let v=n(14490).Z;var y=n(32419),b=n(9047),g=n(92951);let x=function(e){if((0,g.isTwakeTheme)())return p.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),p.createElement("path",{d:"M2.4 15L1 13.6 6.6 8 1 2.4 2.4 1 8 6.6 13.6 1 15 2.4 9.4 8l5.6 5.6-1.4 1.4L8 9.4 2.4 15z"}));return p.createElement("svg",(0,r.Z)({viewBox:"0 0 24 24"},e),p.createElement("path",{fillRule:"evenodd",d:"M10.586 12L.293 1.707A1 1 0 011.707.293L12 10.586 22.293.293a1 1 0 011.414 1.414L13.414 12l10.293 10.293a1 1 0 01-1.414 1.414L12 13.414 1.707 23.707a1 1 0 01-1.414-1.414L10.586 12z"}))},w=function(e){if((0,g.isTwakeTheme)())return p.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),p.createElement("path",{d:"M5.12 12L8 9.12 10.88 12 12 10.88 9.12 8 12 5.12 10.88 4 8 6.88 5.12 4 4 5.12 6.88 8 4 10.88 5.12 12zM8 16a7.79 7.79 0 01-3.12-.63 8.079 8.079 0 01-2.54-1.71 8.08 8.08 0 01-1.71-2.54A7.79 7.79 0 010 8c0-1.107.21-2.147.63-3.12.42-.973.99-1.82 1.71-2.54A8.079 8.079 0 014.88.63 7.79 7.79 0 018 0a7.79 7.79 0 013.12.63c.973.42 1.82.99 2.54 1.71s1.29 1.567 1.71 2.54c.42.973.63 2.013.63 3.12a7.79 7.79 0 01-.63 3.12 8.08 8.08 0 01-1.71 2.54 8.08 8.08 0 01-2.54 1.71A7.79 7.79 0 018 16z",fill:"#5F6368"}));return p.createElement("svg",(0,r.Z)({viewBox:"0 0 16 16"},e),p.createElement("path",{fillRule:"evenodd",d:"M8 0a8 8 0 110 16A8 8 0 018 0zM5.707 4.293l-.094-.083a1 1 0 00-1.226 0l-.094.083-.083.094-.07.102a1 1 0 00.062 1.114l.09.104L6.586 8l-2.292 2.293a1 1 0 001.32 1.497l.094-.083L8 9.415l2.293 2.292.094.083a1 1 0 001.226 0l.094-.083.083-.094a1 1 0 000-1.226l-.083-.094L9.415 8l2.292-2.293a1 1 0 00-1.32-1.497l-.094.083L8 6.585 5.707 4.293l-.094-.083.094.083z"}))};var k=n(4230);let O=n(72129).Z;var _=n(9758),E=n(32692),S=n(96122),C=n(27507),P=n(41120),j=["placeholder","icon","size","type","label","componentsProps","disabledClear","disabledFocus","className","defaultValue","value","elevation","disabled","onChange","onClear","onFocus","onBlur"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T={small:40,medium:48,large:56,auto:"auto"},M={small:20,medium:24,large:28,auto:24},R=(0,P.Z)(function(e){return{root:{display:"flex",boxSizing:"border-box",position:"relative",alignItems:"center",height:function(e){return T[e.size]},flex:1,borderRadius:function(e){return M[e.size]},borderStyle:"solid",borderWidth:1,borderColor:"transparent",backgroundColor:(0,g.isTwakeTheme)()?e.palette.background.default:e.palette.background.paper,"&:hover":{"&:not($disabled):not($focused)":{"& $focusHighlight":{opacity:1}}}},flat:{backgroundColor:(0,g.isTwakeTheme)()?e.palette.background.default:e.palette.background.contrast},inputBase:{flex:1,paddingLeft:function(e){return!e.icon&&"1rem"}},buttonBase:{flex:1,justifyContent:"start",height:"100%",borderRadius:99},typography:{color:"currentColor",opacity:.42,paddingLeft:function(e){return!e.icon&&"1rem"}},icon:{color:e.palette.text.secondary,padding:"0 1rem"},commonHighlight:{overflow:"hidden",position:"absolute",top:-1,right:-1,bottom:-1,left:-1,borderRadius:"inherit",opacity:0,transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})},focusHighlight:{pointerEvents:"none",backgroundColor:e.palette.action.hover},disableHighlight:{backgroundColor:e.palette.action.disabled},focused:{borderColor:e.palette.primary.main,backgroundColor:e.palette.background.paper},disabled:{"& $icon":{color:e.palette.text.disabled},"& $disableHighlight":{opacity:1}}}}),I=(0,p.forwardRef)(function(e,t){var n,c,u=e.placeholder,d=e.icon,f=e.size,h=e.type,m=e.label,k=e.componentsProps,C=e.disabledClear,P=e.disabledFocus,A=e.className,T=e.defaultValue,M=e.value,I=e.elevation,N=e.disabled,F=e.onChange,z=e.onClear,L=e.onFocus,B=e.onBlur,U=(0,o.Z)(e,j),H=(0,S.useI18n)().t,G=R({size:f,type:h,icon:d}),W=(0,p.useState)(T),q=(0,i.Z)(W,2),V=q[0],Q=q[1],Z=(0,p.useState)(!1),Y=(0,i.Z)(Z,2),J=Y[0],K=Y[1],$=u||H("SearchBar.placeholder"),X=m||H("SearchBar.placeholder"),ee=M||V,et=void 0===M,en=(0,p.useMemo)(function(){return l()(F,375)},[F]),er=function(e){F(D(D({},e),{},{target:D(D({},e.target),{},{value:""})})),z(e),Q("")};return p.createElement(_.default,(0,r.Z)({component:"form",elevation:+!!I,className:s()(A,G.root,(n={},(0,a.Z)(n,G.flat,!I),(0,a.Z)(n,G.elevation,I),(0,a.Z)(n,G.focused,J&&!P),(0,a.Z)(n,G.disabled,N),n)),ref:t},U),"button"===h?p.createElement(v,{className:G.buttonBase},d&&p.createElement(y.default,{className:G.icon,icon:d}),"string"==typeof X?p.createElement(E.default,{className:G.typography},X):X):p.createElement(p.Fragment,null,d&&p.createElement(y.default,{className:G.icon,icon:d}),p.createElement(O,(0,r.Z)({},null==k?void 0:k.inputBase,{className:s()(G.inputBase,null==k?void 0:null===(c=k.inputBase)||void 0===c?void 0:c.className),placeholder:N?null:$,value:N?$:ee,disabled:N,"aria-label":$,onChange:function(e){if(!et)return F(e);var t=e.target.value;t.length>=1?(en(e),Q(t)):er(e)},onFocus:function(e){L(e),K(!0)},onBlur:function(e){B(e),K(!1)}}))),ee&&!C&&p.createElement(b.default,{size:"medium",onClick:er},p.createElement(y.default,{icon:(0,g.isTwakeTheme)()?x:w})),p.createElement("span",{className:s()(G.commonHighlight,G.focusHighlight)}),N&&p.createElement("span",{className:s()(G.commonHighlight,G.disableHighlight)}))});I.displayName="SearchBar",I.defaultProps={elevation:!0,icon:k.default,size:"small",type:"search",disabledClear:!1,disabledFocus:!1,defaultValue:"",onChange:function(){},onFocus:function(){},onClear:function(){},onBlur:function(){}},I.propTypes={className:f().string,type:f().oneOf(["button","search"]),icon:y.iconPropType,size:f().oneOf(["small","medium","large","auto"]),componentsProps:f().shape({inputBase:f().object}),value:f().string,defaultValue:f().string,disabledClear:f().bool,disabledFocus:f().bool,elevation:f().bool,placeholder:f().string,label:f().oneOfType([f().string,f().func,f().object]),disabled:f().bool,onChange:f().func,onFocus:f().func,onClear:f().func,onBlur:f().func};let N=(0,p.forwardRef)(function(e,t){return(0,C.default)(m),p.createElement(I,(0,r.Z)({},e,{ref:t}))})},61941:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>r});let r=n(21943).Z},28138:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(45697),a=n.n(r),i=n(67294),o=n(20958),c=n(10059),s=n(96105),u=n(11075),l=n(61941),d=function(e){var t=e.hasSecondary,n=e.divider,r=e.gutters;return i.createElement(i.Fragment,null,i.createElement(c.default,{gutters:r},i.createElement(s.default,null,i.createElement(l.default,{className:"u-bdrs-4",variant:"rect",width:32,height:32})),i.createElement(u.default,{primary:i.createElement(l.default,{width:"75%",height:13}),secondary:t?i.createElement(l.default,{width:"37%",height:13}):void 0})),n&&i.createElement(o.default,null))};d.propTypes={hasSecondary:a().bool,divider:a().bool,gutters:a().string};let f=d},32692:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(51894),a=n(65691),i=n(22318),o=n(67294),c=["color","variant","children"];let s=(0,o.forwardRef)(function(e,t){var n=e.color,s=e.variant,u=e.children,l=(0,a.Z)(e,c);return o.createElement(i.Z,(0,r.Z)({ref:t,variant:s,color:n||("caption"===s?"textSecondary":"textPrimary")},l),u)})},36198:function(e,t,n){"use strict";n.r(t),n.d(t,{Button:()=>k,ButtonLink:()=>O,default:()=>_});var r=n(51894),a=n(65691),i=n(91888),o=n(94184),c=n.n(o),s=n(45697),u=n.n(s),l=n(67294),d=n(32419),f=n(4314),p=["busy","disabled"],h=["children","icon","iconOnly","label","subtle","className","extension","round","size","theme","align","extraRight","tag"],m={"c-btn":"styles__c-btn___3kXsk","c-btn--regular":"styles__c-btn--regular___1ilYT","c-btn--ghost":"styles__c-btn--ghost___Md7mm","c-btn--highlight":"styles__c-btn--highlight___GlDOj","c-btn--alpha":"styles__c-btn--alpha___2-bRT","c-btn--action":"styles__c-btn--action___3z98K","c-btn--close":"styles__c-btn--close___C19bl","c-btn--danger":"styles__c-btn--danger___wzHFo","c-btn--secondary":"styles__c-btn--secondary___1hLVM","c-btn--danger-outline":"styles__c-btn--danger-outline___BCng5","c-btn--text":"styles__c-btn--text___33vmu","c-btn--left":"styles__c-btn--left___3f1zH","c-btn--center":"styles__c-btn--center___Nny0n","c-btn--right":"styles__c-btn--right___1B9Tn","c-btn--tiny":"styles__c-btn--tiny___fK37G","c-btn--small":"styles__c-btn--small___9JKyq","c-btn--large":"styles__c-btn--large___3PnsT","c-btn--full":"styles__c-btn--full___1VumB","c-btn--narrow":"styles__c-btn--narrow___erKsd","c-btn--round":"styles__c-btn--round___35GfW","c-btn--subtle":"styles__c-btn--subtle___2rRQ0",spin:"styles__spin___3VrS0",shake:"styles__shake___1yyjR"},v=function(e){var t,n=e.className,r=e.extension,a=e.size,o=e.theme,s=e.variant,u=e.round,l=e.align;return c()(m["c-btn"],(t={},(0,i.Z)(t,m["c-btn--".concat(o)],o),(0,i.Z)(t,m["c-btn--".concat(a)],"normal"!==a),(0,i.Z)(t,m["c-btn--".concat(s)],s),(0,i.Z)(t,m["c-btn--".concat(r)],r),(0,i.Z)(t,m["c-btn--".concat(l)],l),(0,i.Z)(t,m["c-btn--round"],u),t),n)},y=function(e){return function(t){var n=t.busy,r=t.disabled,i=(0,a.Z)(t,p);return n&&(i["aria-busy"]=!0),r&&(i["aria-disabled"]=!0),"button"===e&&r&&(i.disabled=!0),i}},b={button:y("button"),a:y("a")},g=function(e){return e},x={tiny:8,small:12,large:18},w=function(e){var t=e.children,n=e.icon,i=e.iconOnly,o=e.label,c=e.subtle,s=e.className,u=e.extension,p=e.round,m=e.size,y=e.theme,w=e.align,k=e.extraRight,O=e.tag,_=(0,a.Z)(e,h),E=b[O]||g,S=i?o:null;return l.createElement(O,(0,r.Z)({},E(_),{className:v({extension:u,align:w,round:p,size:m,theme:y,className:s,variant:c&&"subtle"}),title:S}),l.createElement("span",null,d.default.isProperIcon(n)?l.createElement(d.default,{size:x[m],icon:n,"aria-hidden":!0,focusable:"false"}):n,o&&l.createElement("span",{className:i?"u-visuallyhidden":null},o),t,k&&l.createElement("span",{className:"u-ml-auto"},k),_.busy&&l.createElement(d.default,{size:x[m],icon:f.Z,spin:!0,className:"u-ml-half","aria-hidden":!0,focusable:"false"})))},k=function(e){return l.createElement(w,e)},O=function(e){return l.createElement(w,e)};let _=function(e){return e.tag?l.createElement(w,e):l.createElement(k,e)};k.propTypes={children:u().node,label:u().node.isRequired,icon:u().oneOfType([u().node,d.iconPropType]),iconOnly:u().bool,theme:u().string,size:u().oneOf(["tiny","small","large","normal"]),extension:u().oneOf(["narrow","full"]),align:u().oneOf(["left","right","center"]),round:u().bool,className:u().string,onClick:u().func,extraRight:u().PropTypes.node,busy:u().bool,disabled:u().bool,type:u().oneOf(["button","reset","submit"]),subtle:u().bool},k.defaultProps={type:"submit",tag:"button",size:"normal",align:"center"},O.defaultProps={tag:"a"}},41170:function(e,t,n){"use strict";n.d(t,{Z:()=>r});let r=function(){return navigator&&navigator.userAgent&&navigator.userAgent.includes("Argos")}},92951:function(e,t,n){"use strict";n.r(t),n.d(t,{isTwakeTheme:()=>a});var r=n(71400),a=function(){return(0,r.default)("ui.theme-twake.enabled")||"Twake"===localStorage.getItem("ui-theme-name")}},34627:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")?e.current:e}n.d(t,{Q:()=>r})},73068:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(67294),a=n(34627);let i=function(e,t,n){(0,r.useEffect)(function(){var r=(0,a.Q)(e);if(r&&t&&n)return r.addEventListener(t,n),function(){r.removeEventListener(t,n)}},[t,n,e])}},32202:function(e,t,n){"use strict";n.d(t,{q6:()=>a,wn:()=>o,ym:()=>i});var r=n(25976),a=!!document.getElementById("rsg-root"),i=a?function(){var e,t=(null===(e=JSON.parse(localStorage.getItem("flagship-app")))||void 0===e?void 0:e.contained)==="on";return{immersive:!t,statusBarHeight:40*!t,navbarHeight:40*!t}}:r.getFlagshipMetadata,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topBackground,n=e.topOverlay,r=e.topTheme,i=e.bottomBackground,o=e.bottomOverlay,c=e.bottomTheme;if(a){var s=document.getElementsByTagName("body")[0];t&&s.style.setProperty("--flagship-top-bgcolor",t),n&&s.style.setProperty("--flagship-top-overlay",n),r&&s.style.setProperty("--flagship-top-color","dark"===r?"black":"white"),i&&s.style.setProperty("--flagship-bottom-bgcolor",i),o&&s.style.setProperty("--flagship-bottom-overlay",o),c&&s.style.setProperty("--flagship-bottom-color","dark"===c?"black":"white")}}},10923:function(e,t,n){"use strict";n.d(t,{Iq:()=>y,Lu:()=>v,tP:()=>a});var r,a,i=n(6557),o=n.n(i),c=n(41609),s=n.n(c),u=n(13218),l=n.n(u),d=n(35937),f=n.n(d),p=n(67294),h=n(22960),m=n(32202);(r=a||(a={})).Dark="dark",r.Light="light";var v=function(e,t,n){var r=l()(t)?f()(t,o()):void 0,a=!s()(r)&&r;(0,m.wn)(r),e&&a&&e.call("setFlagshipUI",a,n)},y=function(e,t,n){var r=(0,h.useWebviewIntent)();(0,p.useEffect)(function(){return v(r,e,"".concat(n||"unknown"," (onMount)")),function(){return v(r,t,"".concat(n||"unknown"," (onUnmount)"))}},[r])}},72339:function(e,t,n){"use strict";n.r(t),n.d(t,{useBreakpoints:()=>h,default:()=>m,BreakpointsProvider:()=>p});var r=n(31573),a=n(23493),i=n.n(a),o=n(67294),c=n(66604),s=n.n(c),u=function(e){var t=window.innerWidth;return s()(e,function(e){var n=(0,r.Z)(e,2),a=n[0],i=n[1];return t>=a&&(void 0===i||t<=i)})};let l={isExtraLarge:[1201],isLarge:[1024,1200],isMedium:[769,1023],isSmall:[544,768],isTiny:[0,543],isDesktop:[1024],isTablet:[769,1023],isMobile:[0,768]};var d=function(){return u(l)},f=(0,o.createContext)(null),p=function(e){var t=e.children,n=(0,o.useState)(d()),a=(0,r.Z)(n,2),c=a[0],s=a[1];return(0,o.useEffect)(function(){var e=i()(function(){s(d())},100);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[]),o.createElement(f.Provider,{value:c},t)},h=function(){var e=(0,o.useContext)(f);if(null===e)throw Error("Cannot use useBreakpoints without BreakpointsProvider. The component must have a BreakpointsProvider above it.");return e};let m=h},24060:function(e,t,n){"use strict";n.r(t),n.d(t,{CozyThemeContext:()=>ei,default:()=>es,useCozyTheme:()=>eo});var r=n(65691),a=n(45697),i=n.n(a),o=n(67294),c=n(33918),s=n.n(c),u=n(51894),l=n(16396),d=n(91888),f=n(94184),p=n.n(f),h=n(14106),m=n(59693),v=n(92951),y=function(e,t){var n=(0,v.isTwakeTheme)()?"Twake":"Cozy";return"".concat(n,"Theme--").concat(e,"-").concat(t)},b=function(e,t){var n=y(e,t);return document.getElementsByClassName(n)[0]},g=function(e,t){if(!b(e,t)){var n=document.createElement("div");n.className=y(e,t),n.style.display="none",document.body.prepend(n)}},x=function(e,t,n){var r=b(t,n);return window.getComputedStyle(r).getPropertyValue("--".concat(e)).trim()},w=function(e,t,n){return x(e,t,n)},k=function(e){var t=e.theme,n=e.severity;return{standard:(0,m.Fq)(t.palette[n].main,t.palette.background.contrastOpacity),outlined:t.palette[n].main,filled:t.palette[n].main}},O=function(e,t){return{"&-standard":{color:e.palette.text.primary,backgroundColor:k({theme:e,severity:t}).standard,"& $icon":{color:"secondary"===t?e.palette.text.primary:e.palette[t].main},"& $action":{'& button[title="Close"]':{color:e.palette.text.secondary}}},"&-outlined":{color:e.palette.text.primary,border:"1px solid ".concat(k({theme:e,severity:t}).outlined),"& $icon":{color:"secondary"===t?e.palette.text.primary:e.palette[t].main}},"&-filled":{color:e.palette[t].contrastText,backgroundColor:k({theme:e,severity:t}).filled,"& $action":{'& button[title="Close"]':{color:e.palette[t].contrastText}}}}},_=function(e,t){return{color:e.palette.text[t]||e.palette[t].main,borderColor:"primary"===t?e.palette.border.main:(0,m.Fq)(e.palette[t].main,e.palette.border.opacity),"&$clickable, &$deletable":{"&:hover, &:focus":{borderColor:"primary"===t?e.palette.border.main:(0,m.Fq)(e.palette[t].main,e.palette.border.opacity),backgroundColor:"primary"===t?e.palette.action.hover:(0,m.Fq)(e.palette[t].main,e.palette.action.hoverOpacity)}},"& $icon":{color:"primary"===t?e.palette.text.icon:e.palette[t].main,fill:"primary"===t?e.palette.text.icon:e.palette[t].main},"& $deleteIcon":{color:"primary"===t?e.palette.text.secondary:e.palette[t].main,fill:"primary"===t?e.palette.text.secondary:e.palette[t].main},"&$colorPrimary":{padding:"0 1px",color:e.palette[t].contrastText,backgroundColor:e.palette[t].main,"& $icon, & $deleteIcon":{color:e.palette[t].contrastText,fill:e.palette[t].contrastText},"&$disabled":{opacity:1,color:e.palette.text.disabled,backgroundColor:e.palette.action.disabledBackground,"& $icon, & $deleteIcon":{color:e.palette.text.disabled,fill:e.palette.text.disabled}},"&$clickable, &$deletable":{"&:hover, &:focus":{backgroundColor:e.palette[t].dark}}},"&.ghost":{borderWidth:"1px",borderStyle:"dashed","&:not($disabled)":{color:e.palette[t].main,borderColor:(0,m.Fq)(e.palette[t].main,e.palette.border.ghostOpacity),backgroundColor:(0,m.Fq)(e.palette[t].main,e.palette.action.ghostOpacity),"& $icon, & $deleteIcon":{color:e.palette[t].main,fill:e.palette[t].main}},"&$clickable, &$deletable":{"&:hover, &:focus":{borderColor:(0,m.Fq)(e.palette[t].main,e.palette.border.ghostOpacity),backgroundColor:(0,m.Fq)(e.palette[t].main,e.palette.action.hoverGhostOpacity)}}}}},E=function(e,t){return{color:e.palette[t].main,borderColor:e.palette[t].main,"&:hover":{backgroundColor:(0,m.Fq)(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&.ghost":{backgroundColor:(0,m.Fq)(e.palette[t].main,e.palette.action.ghostOpacity),"&:hover":{backgroundColor:(0,m.Fq)(e.palette[t].main,e.palette.action.hoverGhostOpacity),"@media (hover: none)":{backgroundColor:(0,m.Fq)(e.palette[t].main,e.palette.action.ghostOpacity)}}}}},S=function(e,t){return{color:e.palette[t].main,"&:hover":{backgroundColor:(0,m.Fq)(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}},C=function(e,t){return{color:e.palette[t].contrastText,backgroundColor:e.palette[t].main,"&:hover":{backgroundColor:e.palette[t].dark,"@media (hover: none)":{backgroundColor:e.palette[t].main}}}},P=function(e){return"var(--flagship-".concat(e,"-height, 0px)")},j=n(82492),A=n.n(j),D={light:{normal:{action:{hoverOpacity:.04,selectedOpacity:.08,disabledOpacity:.32,focusOpacity:.12,activatedOpacity:.12,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.32,ghostOpacity:.48},background:{contrastOpacity:.12}},inverted:{action:{hoverOpacity:.08,selectedOpacity:.16,disabledOpacity:.32,focusOpacity:.25,activatedOpacity:.24,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.48,ghostOpacity:.48},background:{contrastOpacity:.24}}},dark:{normal:{action:{hoverOpacity:.08,selectedOpacity:.16,disabledOpacity:.32,focusOpacity:.24,activatedOpacity:.24,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.48,ghostOpacity:.48},background:{contrastOpacity:.24}},inverted:{action:{hoverOpacity:.04,selectedOpacity:.08,disabledOpacity:.32,focusOpacity:.12,activatedOpacity:.12,ghostOpacity:.08,hoverGhostOpacity:.16},border:{opacity:.32,ghostOpacity:.48},background:{contrastOpacity:.12}}}},T=function(e,t){var n={type:e,variant:t,primary:{light:w("primaryColorLight",e,t),main:w("primaryColor",e,t),dark:w("primaryColorDark",e,t),contrastText:w("primaryContrastTextColor",e,t)},secondary:{light:w("secondaryColorLight",e,t),main:w("secondaryColor",e,t),dark:w("secondaryColorDark",e,t),contrastText:w("secondaryContrastTextColor",e,t)},error:{light:w("errorColorLight",e,t),main:w("errorColor",e,t),dark:w("errorColorDark",e,t),contrastText:w("errorColorContrastText",e,t)},warning:{light:w("warningColorLight",e,t),main:w("warningColor",e,t),dark:w("warningColorDark",e,t),contrastText:w("warningColorContrastText",e,t)},success:{light:w("successColorLight",e,t),main:w("successColor",e,t),dark:w("successColorDark",e,t),contrastText:w("successColorContrastText",e,t)},info:{light:w("infoColorLight",e,t),main:w("infoColor",e,t),dark:w("infoColorDark",e,t),contrastText:w("infoColorContrastText",e,t)},text:{primary:w("primaryTextColor",e,t),secondary:w("secondaryTextColor",e,t),disabled:w("disabledTextColor",e,t),hint:w("hintTextColor",e,t),icon:w("iconTextColor",e,t)},grey:{50:w("grey50",e,t),100:w("grey100",e,t),200:w("grey200",e,t),300:w("grey300",e,t),400:w("grey400",e,t),500:w("grey500",e,t),600:w("grey600",e,t),700:w("grey700",e,t),800:w("grey800",e,t),900:w("grey900",e,t),A100:w("greyA100",e,t),A200:w("greyA200",e,t),A400:w("greyA400",e,t),A700:w("greyA700",e,t)},divider:w("dividerColor",e,t),action:{active:w("actionColorActive",e,t),hover:w("actionColorHover",e,t),selected:w("actionColorSelected",e,t),disabled:w("actionColorDisabled",e,t),disabledBackground:w("actionColorDisabledBackground",e,t),focus:w("actionColorFocus",e,t),ghost:w("actionColorGhost",e,t),hoverGhost:w("actionColorHoverGhost",e,t)},border:{main:w("borderMainColor",e,t),disabled:w("borderDisabledColor",e,t),ghost:w("borderGhostColor",e,t),ghostDisabled:w("borderGhostDisabledColor",e,t)},background:{default:w("defaultBackgroundColor",e,t),paper:w("paperBackgroundColor",e,t),contrast:w("contrastBackgroundColor",e,t),selected:"#F5FAFF"}};return A()(n,D[e][t])};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=function(e){var t,n,r,a;return{MuiSelect:{iconOutlined:{top:"auto",right:14},outlined:{"&&":{paddingRight:39}}},MuiOutlinedInput:{root:{borderRadius:4,"&$disabled":{background:e.palette.background.contrast},"&$focused $notchedOutline":{borderWidth:"0.0625rem"},"&$error $notchedOutline":{borderColor:(0,m.Fq)(e.palette.error.main,e.palette.border.opacity)},"&$focused&$error $notchedOutline":{borderColor:e.palette.error.main},"&:hover $notchedOutline":{borderColor:e.palette.text.hint},"&:hover&$error $notchedOutline":{borderColor:e.palette.error.main}},notchedOutline:{borderColor:e.palette.border.main,transition:"border-color ".concat(e.transitions.duration.shorter,"ms")},input:{textAlign:"left",padding:"18.5px 16px"},inputMarginDense:{paddingTop:14,paddingBottom:15}},MuiInputLabel:{outlined:{"&$marginDense":{transform:"translate(14px, 14px) scale(1)"},"&:not($shrink)":{"&$error":{color:e.palette.text.secondary}}}},MuiToggleButtonGroup:{groupedHorizontal:{"&.rounded":{marginRight:12,"&:last-child":{marginRight:0},"&:not(:first-child)":{borderTopLeftRadius:"inherit",borderBottomLeftRadius:"inherit",marginLeft:"inherit",borderLeft:"inherit"},"&:not(:last-child)":{"&.rounded":{borderTopRightRadius:"inherit",borderBottomRightRadius:"inherit"}}}}},MuiToggleButton:{root:{borderRadius:0,color:e.palette.text.secondary,border:"1px solid ".concat(e.palette.border.main),padding:15,"&$selected":{color:e.palette.text.primary,backgroundColor:"transparent","&:not($disabled)":{"&.customColor":{"&-primary":{color:e.palette.primary.main}}}},"&$disabled":{color:e.palette.text.disabled},"&.rounded":{border:0,borderRadius:e.shape.borderRadius,padding:"10px 12px","&$selected":{backgroundColor:e.palette.action.selected,"&:not($disabled)":{"&.customColor":{"&-primary":{color:e.palette.text.primary,backgroundColor:(0,m.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{textDecoration:"none",backgroundColor:(0,m.Fq)(e.palette.primary.main,e.palette.action.activatedOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}}}}},sizeSmall:{padding:11,"&.rounded":{padding:"7px 10px"}},sizeLarge:{padding:19,"&.rounded":{padding:12}}},MuiButton:{root:{borderRadius:2,lineHeight:"normal",padding:"0 1rem","&.customSize":{"&-default":{height:"2.5rem"},"&-auto":{minHeight:"2.5rem"}},"&.ghost":{borderStyle:"dashed !important","&:hover":{borderStyle:"dashed !important"}}},sizeSmall:{padding:"0 0.75rem","&.customSize":{"&-default":{height:"2rem"},"&-auto":{minHeight:"2rem"}},"&$text":{padding:"8px 6px"}},sizeLarge:{padding:"0 1.25rem","&.customSize":{"&-default":{height:"3rem"},"&-auto":{minHeight:"3rem"}},"&$text":{padding:"14px 10px"}},text:{minWidth:"auto",padding:"11px 8px","&:not($disabled)":{"&.customColor":{"&-success":S(e,"success"),"&-warning":S(e,"warning"),"&-error":S(e,"error"),"&-info":S(e,"info")}}},outlined:{"&:not($disabled)":{"&.ghost":{backgroundColor:(0,m.Fq)(e.palette.primary.main,e.palette.action.ghostOpacity),"&:hover":{backgroundColor:(0,m.Fq)(e.palette.primary.main,e.palette.action.hoverGhostOpacity),"@media (hover: none)":{backgroundColor:(0,m.Fq)(e.palette.primary.main,e.palette.action.ghostOpacity)}}},"&.customColor":{"&-primary":{color:e.palette.text.primary,borderColor:e.palette.border.main,"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.ghost":{color:e.palette.primary.main,borderColor:(0,m.Fq)(e.palette.primary.main,e.palette.border.ghostOpacity)}},"&-success":E(e,"success"),"&-warning":E(e,"warning"),"&-error":E(e,"error"),"&-info":E(e,"info")}}},contained:{boxShadow:0,"&:not($disabled)":{"&.customColor":{"&-success":C(e,"success"),"&-warning":C(e,"warning"),"&-error":C(e,"error"),"&-info":C(e,"info")}}},startIcon:{marginLeft:"0 !important"}},MuiTabs:{root:{"&.segmented":{borderRadius:"99px",backgroundColor:e.palette.background.contrast,overflow:"visible",minHeight:"2.5rem","& $indicator":{top:"1px",height:"calc(100% - 2px)",transform:"scale(0.99)",borderRadius:"99px",zIndex:0,boxShadow:e.shadows[1],backgroundColor:e.palette.background.paper},"& $fixed":{overflow:"visible !important"},"& $scrollButtons":{borderRadius:"99px"}}}},MuiTab:{root:R(R({},e.typography.subtitle2),{},{"&:hover":{color:e.palette.text.primary,opacity:1},"&:focus":{color:e.palette.text.primary},"&.narrowed":(0,d.Z)({minWidth:"auto"},e.breakpoints.up("sm"),{minWidth:"auto"}),"&.segmented":R(R({},e.typography.body2),{},{textTransform:"initial",zIndex:1,borderRadius:"99px",minHeight:"2.5rem","&$selected":{color:e.palette.text.primary}})})},MuiAccordion:{rounded:{borderRadius:e.shape.borderRadius},root:{boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.08)",borderWidth:"0.0625rem",borderStyle:"solid",borderColor:e.palette.border.main,overflow:"hidden",marginBottom:"1rem"}},MuiAccordionSummary:{expanded:{},root:{backgroundColor:e.palette.grey[100],textTransform:"uppercase",fontWeight:"bold",fontSize:"0.875rem",minHeight:"3.5rem",padding:0,color:e.palette.text.primary,"&$expanded":{minHeight:"3.5rem"}},expandIcon:{order:0,"&&":{marginLeft:"0.3125rem"},transform:"rotate(-90deg)","&$expanded":{marginLeft:"0.3125rem",transform:"rotate(0)"}},content:{margin:"0.75rem 0",paddingLeft:"0.5rem",paddingRight:"0.25rem",order:1,"& > :last-child":{paddingRight:0},"&$expanded":{margin:"0.75rem 0"}}},MuiAccordionDetails:{root:{padding:0,borderTop:"0.0625rem solid ".concat(e.palette.border.main)}},MuiStepConnector:{line:{borderColor:e.palette.divider}},MuiStepContent:{root:{borderColor:e.palette.divider}},MuiStepLabel:{label:R(R({},e.typography.body1),{},{"&$active":R({},e.typography.h6),"&$completed":R({},e.typography.h6)})},MuiListItemIcon:{root:{minWidth:"auto",width:32,height:32,alignItems:"center",justifyContent:"center",color:e.palette.text.icon}},MuiListItem:{root:{gap:16,paddingTop:12,paddingBottom:12,minHeight:56,"&.small":{paddingTop:8,paddingBottom:8,minHeight:48},"&.large":{paddingTop:16,paddingBottom:16,minHeight:64},"&.cozyActionsItem":{wordBreak:"break-word"}},dense:{paddingTop:8,paddingBottom:8,minHeight:48,"&.small":{paddingTop:4,paddingBottom:4,minHeight:40},"&.large":{paddingTop:12,paddingBottom:12,minHeight:56}}},MuiListSubheader:{root:R(R({},e.typography.subtitle2),{},{paddingBottom:8,paddingTop:8,marginBottom:"0.5rem",backgroundColor:e.palette.background.contrast}),sticky:{backgroundColor:e.palette.background.default}},MuiListItemText:{root:{marginTop:1,marginBottom:1},multiline:{marginTop:1,marginBottom:1},secondary:{marginTop:1}},MuiListItemSecondaryAction:{root:{right:0}},MuiMenu:{paper:{maxWidth:320}},MuiMenuItem:{root:(t={whiteSpace:"normal",overflow:"auto",wordBreak:"break-word",paddingTop:4,paddingBottom:4},(0,d.Z)(t,e.breakpoints.up("sm"),{minHeight:40}),(0,d.Z)(t,"&.cozyActionsItem",{minWidth:256}),(0,d.Z)(t,"& .cozyListItemIcon",{width:16,height:16}),t),gutters:{paddingLeft:16,paddingRight:16}},MuiFormLabel:{root:{color:e.palette.text.secondary,"&$disabled&$error":{color:e.palette.text.disabled}}},MuiFormHelperText:{root:{fontStyle:"italic",fontSize:"0.875rem",marginTop:4,"&$disabled&$error":{color:e.palette.text.disabled}}},MuiDialog:{paper:{"&.small":(0,d.Z)({width:"480px",maxWidth:"480px"},e.breakpoints.down("md"),{margin:"16px",padding:"0 8px 8px",height:"auto",maxHeight:"calc(100% - 32px)",borderRadius:"6px","& .divider--dialog":{marginLeft:"-8px",marginRight:"-8px"}}),"&.medium":(0,d.Z)({},e.breakpoints.up("md"),{width:"544px",maxWidth:"544px"}),"&.large":(0,d.Z)({},e.breakpoints.up("md"),{width:"800px",maxWidth:"800px"}),"&.full":{width:"100%",maxWidth:"100%"},"&.overflow":{overflowY:"visible !important","& .cozyDialogContent":{overflowY:"visible !important"}}},scrollPaper:{"&.alignTop":{alignItems:"start"}},paperFullScreen:{"& .cozyDialogActions":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(P("bottom"),")")},'& [class*="DialogCloseButton"]':{transform:"translateY(".concat(P("top"),")")},'& [class*="DialogBackButton"]':{transform:"translateY(".concat(P("top"),")")},".flagship-app & .cozyDialogTitle":{paddingTop:"calc(".concat(P("top")," + 0.75rem) !important")},".flagship-app & .cozyDialogContent":{marginBottom:"".concat(P("bottom")," !important")}}},MuiDialogTitle:{root:R(R({},e.typography.h3),{},(n={boxSizing:"border-box",width:"100%",padding:"1.5rem 2rem"},(0,d.Z)(n,e.breakpoints.down("sm"),R(R({},e.typography.h4),{},{padding:"0.75rem 1rem"})),(0,d.Z)(n,"&.dialogTitleWithBack",(0,d.Z)({paddingLeft:"4rem"},e.breakpoints.down("sm"),{paddingLeft:"3rem"})),(0,d.Z)(n,"&.dialogTitleWithClose",(0,d.Z)({paddingRight:"4rem"},e.breakpoints.down("sm"),{paddingRight:"3rem"})),(0,d.Z)(n,"&.dialogTitleFluid",{paddingTop:0}),n))},MuiDialogContent:{root:(r={padding:"24px 32px 0"},(0,d.Z)(r,e.breakpoints.down("sm"),{padding:"24px 16px 0"}),(0,d.Z)(r,"&.disableGutters",{padding:0,"& .dialogContentInner":{marginBottom:0},"& .dialogTitleFluidContainer":{marginLeft:0,marginRight:0,marginTop:0}}),(0,d.Z)(r,"& .dialogContentInner",{marginBottom:"24px","&.withFluidActions":(0,d.Z)({},e.breakpoints.down("sm"),{marginBottom:0,display:"flex",flexDirection:"column",height:"100%","& .dialogContentWrapper":{flexGrow:1,"&:not(.withActions)":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(P("bottom")," + 16px)")}},"& .cozyDialogActions":{paddingBottom:"calc(env(safe-area-inset-bottom) + ".concat(P("bottom")," + 16px)")}}),"& .dialogTitleFluidContainer":(0,d.Z)({marginLeft:"-2rem",marginRight:"-2rem"},e.breakpoints.down("sm"),{marginLeft:"-1rem",marginRight:"-1rem",marginTop:"-0.75rem"})}),r)},MuiDialogActions:{root:(a={margin:"16px 32px",padding:0},(0,d.Z)(a,e.breakpoints.down("sm"),{margin:"8px 16px","& button":{flexGrow:1}}),(0,d.Z)(a,"&.dialogActionsFluid",{margin:"24px 0 0"}),(0,d.Z)(a,"&.columnLayout",{display:"flex",flexDirection:"column-reverse","& button":{width:"100%",margin:0,"&:not(:first-child)":{marginBottom:"8px"}}}),(0,d.Z)(a,"&:not(.columnLayout) > :not(:first-child):not(:first-child)",{marginLeft:4}),a)},MuiDivider:{inset:{marginLeft:64,"&.divider--dialog":{marginLeft:80}}},MuiAvatarGroup:{avatar:{border:"2px solid ".concat(e.palette.background.paper)}},MuiAvatar:{root:{fontWeight:600,"&.size":{"&-xs":{width:16,height:16,fontSize:8,"& svg":{width:8,height:8}},"&-s":{width:24,height:24,fontSize:12,"& svg":{width:12,height:12}},"&-m":{width:32,height:32,fontSize:16,"& svg":{width:16,height:16}},"&-l":{width:48,height:48,fontSize:24,"& svg":{width:24,height:24}},"&-xl":{width:64,height:64,fontSize:32,"& svg":{width:32,height:32}}},"&.disabled":{color:e.palette.primary.contrastText,background:"var(--silver)","& img":{filter:"grayscale(1) brightness(2)",opacity:.5}},"&.border":{border:"2px solid ".concat(e.palette.background.paper)},"&.innerBorder":{boxShadow:"inset 0px 0px 0px 1px ".concat(e.palette.border.main)}}},MuiCheckbox:{colorSecondary:{"&$checked":{color:e.palette.error.main}}},MuiSwitch:{checked:{"& + $track$track":{opacity:1}},switchBase:{top:1,"&$checked":{transform:"translateX(15px)"}},thumb:{width:16,height:16,backgroundColor:e.palette.common.white},track:{width:25,height:12,opacity:1,backgroundColor:e.palette.text.disabled},colorSecondary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.main}}},disabled:{"&$checked + $track":{backgroundColor:"".concat(e.palette.grey[200]," !important")},"& $thumb":{backgroundColor:e.palette.common.white}}},MuiTooltip:{tooltip:{borderRadius:"8px",fontSize:"1rem",lineHeight:"1.3",padding:"16px"}},MuiIconButton:{root:{color:e.palette.text.secondary,"&.small":{padding:3},"&.medium":{padding:12},"&.large":{padding:16},"&.dialogIconButton":{backgroundColor:e.palette.background.paper,"&:hover":{backgroundColor:e.palette.action.selected}},"&.cozyStyles":{"&-error":{color:e.palette.error.main,"&:hover":{backgroundColor:(0,m.Fq)(e.palette.error.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}}},MuiBadge:{badge:{boxSizing:"content-box",padding:0,borderRadius:"100%","&.badgeBorder":{border:"2px solid ".concat(e.palette.background.paper)},"&.badgeSizeLarge":{fontSize:".6875rem",height:"1rem",minWidth:"1rem"},"&.badgeSizeMedium":{height:".875rem",minWidth:".875rem",fontSize:".625rem"},"&.badgeSizeSmall":{height:".75rem",minWidth:".75rem",fontSize:".5rem"}},colorPrimary:{"&.colorSuccess":{backgroundColor:e.palette.success.main,color:e.palette.success.contrastText},"&.colorWarning":{backgroundColor:e.palette.warning.main,color:e.palette.warning.contrastText},"&.colorInfo":{backgroundColor:e.palette.info.main,color:e.palette.info.contrastText}},anchorOriginTopRightRectangular:{transform:"scale(1) translate(37%, -37%)"},anchorOriginBottomRightRectangular:{transform:"scale(1) translate(37%, 37%)"},anchorOriginBottomLeftRectangular:{transform:"scale(1) translate(-37%, 37%)"},anchorOriginTopLeftRectangular:{transform:"scale(1) translate(-37%, -37%)"},dot:{borderRadius:"100%",padding:0,"&.badgeSizeLarge":{height:".625rem",minWidth:".625rem"},"&.badgeSizeMedium":{height:".5rem",minWidth:".5rem"},"&.badgeSizeSmall":{height:".375rem",minWidth:".375rem"}}},MuiRadio:{root:{padding:"12px","&$disabled svg":{borderRadius:"50%",backgroundColor:e.palette.background.contrast,fill:e.palette.border.disabled},"&:not($checked) svg":{fill:e.palette.border.main}},colorPrimary:{"&$checked svg":{fill:e.palette.primary.main},"&$disabled&$checked svg":{fill:e.palette.text.disabled}},colorSecondary:{"&$checked svg":{fill:e.palette.error.main},"&$disabled&$checked svg":{fill:e.palette.text.disabled}}},MuiChip:{root:{"&.noLabel":{width:"32px","& $label":{display:"none"},"& $icon":{margin:0}},"&.customColor":{"&-primary":_(e,"primary"),"&-success":_(e,"success"),"&-error":_(e,"error"),"&-warning":_(e,"warning"),"&-info":_(e,"info")}}},MuiAlert:{root:{padding:"8px 16px","&.cozyStyles":{"&-primary":O(e,"primary"),"&-secondary":O(e,"secondary"),"&-success":O(e,"success"),"&-error":O(e,"error"),"&-warning":O(e,"warning"),"&-info":O(e,"info")},"& $icon":{paddingTop:"9px"},"&.block":{flexWrap:"wrap","& $action":{width:"100%",paddingLeft:0,justifyContent:"end"}}},message:{flex:"auto",display:"flex",alignItems:"center",flexWrap:"wrap"},action:{marginRight:"-8px"}},MuiAlertTitle:{root:{width:"100%",fontWeight:"bold"}},MuiSnackbarContent:{root:{padding:"4px 12px",backgroundColor:e.palette.grey[600]}},MuiFab:{root:{color:e.palette.text.primary,backgroundColor:e.palette.background.paper,"&:hover":{backgroundColor:(0,m._j)(e.palette.background.paper,.05)},"@media (hover: none)":{backgroundColor:e.palette.background.paper}},extended:{borderRadius:28,height:56,minWidth:56,padding:"0 20px","&$sizeSmall":{borderRadius:20,height:40,minWidth:40,padding:"0 12px"},"&$sizeMedium":{borderRadius:24,height:48,minWidth:48,padding:"0 16px"}}},MuiMobileStepper:{root:{background:"transparent",height:40,padding:0},dot:{backgroundColor:"transparent",width:"10px",height:"10px",margin:"0 3px",border:"1px solid ".concat(e.palette.border.main),boxSizing:"border-box"},dotActive:{border:"none"}}}},N=function(e){return A()(I(e),{MuiLinearProgress:{colorPrimary:{backgroundColor:"rgba(255,255,255,0.2)"},colorSecondary:{backgroundColor:"rgba(255,255,255,0.2)"}},MuiSnackbarContent:{root:{backgroundColor:e.palette.grey[200]}},MuiTabs:{root:{"&.segmented":{"& $indicator":{backgroundColor:e.palette.primary.main}}}},MuiTab:{root:{"&.segmented":{"&$selected":{color:e.palette.primary.contrastText}}}},MuiSwitch:{switchBase:{color:e.palette.grey[100]},colorPrimary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.dark}}},colorSecondary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.dark}}}}})},F=function(e){return A()(I(e),{MuiCheckbox:{root:{padding:8}},MuiSwitch:{root:{width:50,height:40,padding:"6px 1px"},switchBase:{padding:5,top:5,color:e.palette.text.icon,"& .cozySwitchThumb":{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:"50%",boxShadow:e.shadows[1],backgroundColor:e.palette.common.white}},track:{width:44,height:"100%",borderRadius:100},thumb:{width:20,height:20},colorPrimary:{"&$disabled + $track":{opacity:1,backgroundColor:e.palette.action.disabledBackground}},colorSecondary:{"&$checked":{color:e.palette.success.main},"&$disabled + $track":{opacity:1,backgroundColor:e.palette.action.disabledBackground}},disabled:{"&$checked + $track":{backgroundColor:e.palette.action.disabledBackground},"& .cozySwitchThumb":{backgroundColor:e.palette.background.default}}},MuiLinearProgress:{root:{height:3},colorPrimary:{backgroundColor:e.palette.divider}},MuiButton:{root:{borderRadius:100,padding:"10px 24px","&.ghost":{border:0,"&:hover":{border:0}}},sizeSmall:{padding:"10px 16px","&.customSize":{"&-default":{height:"2.25rem"},"&-auto":{minHeight:"2.25rem"}},"&$text":{padding:"8px 16px"}},sizeLarge:{padding:"14px 32px"},text:{padding:"10px 8px"},outlined:{"&:not($disabled)":{"&.ghost":{backgroundColor:e.palette.background.default,"&:hover":{backgroundColor:(0,m._j)(e.palette.background.default,.05),"@media (hover: none)":{backgroundColor:(0,m._j)(e.palette.background.default,.05)}}},"&.customColor":{"&-primary":{color:e.palette.primary.main,borderColor:e.palette.primary.main,"&:hover":{backgroundColor:(0,m.Fq)(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.ghost":{color:e.palette.text.primary,borderColor:e.palette.background.default}}}}}},MuiIconButton:{root:{"&.small":{padding:8},"&.xlarge":{padding:20}}},MuiTooltip:{tooltip:{backgroundColor:(0,m.Fq)(e.palette.grey[800],.9),borderRadius:"4px",padding:"8px 12px"}},MuiFab:{root:{borderRadius:28,width:96,height:96},primary:{color:e.palette.primary.dark,backgroundColor:e.palette.primary.light,"&:hover":{backgroundColor:(0,m._j)(e.palette.primary.light,.05),"@media (hover: none)":{backgroundColor:e.palette.primary.light}}},extended:{borderRadius:16,"&$sizeSmall":{borderRadius:16,height:42,minWidth:42},"&$sizeMedium":{borderRadius:16}},sizeSmall:{borderRadius:12},sizeMedium:{borderRadius:16,width:56,height:56}},MuiAvatarGroup:{root:{"& > div:last-child":{boxShadow:"inset 0px 0px 0px 1px ".concat(e.palette.border.main)}}},MuiAvatar:{root:{"&.size":{"&-xs":{"& svg":{width:10,height:10}},"&-s":{fontSize:11,"& svg":{width:16,height:16}},"&-m":{"& svg":{width:20,height:20}},"&-l":{"& svg":{width:28,height:28}},"&-xl":{"& svg":{width:36,height:36}}}},colorDefault:{backgroundColor:e.palette.background.paper,color:e.palette.text.secondary}}})},z=function(e){return A()(F(e),{MuiLinearProgress:{colorPrimary:{backgroundColor:"rgba(255,255,255,0.2)"},colorSecondary:{backgroundColor:"rgba(255,255,255,0.2)"}},MuiSnackbarContent:{root:{backgroundColor:e.palette.grey[200]}},MuiTabs:{root:{"&.segmented":{"& $indicator":{backgroundColor:e.palette.primary.main}}}},MuiTab:{root:{"&.segmented":{"&$selected":{color:e.palette.primary.contrastText}}}},MuiSwitch:{switchBase:{color:e.palette.grey[100]},colorPrimary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.dark}}},colorSecondary:{"&$checked":{"& + $track":{backgroundColor:e.palette.success.dark}}}}})},L=n(41170),B=n(69710);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G=H({shape:{borderRadius:6},breakpoints:{values:{xs:0,sm:480,md:768,lg:1023,xl:1200}},zIndex:{modal:"var(--zIndex-modal)"},textShadows:["none","0px 2px 8px rgba(29, 33, 42, 0.16), 0px 0px 1px rgba(29, 33, 42, 0.48)"]},(0,L.Z)()&&{transitions:{create:function(){return"none"}}}),W=function(e,t){var n,r,a=(0,v.isTwakeTheme)()?"Twake":"Cozy";g(e,t);var i=T(e,t),o=(0,B.Z)(H(H({},G),{},{typography:"Cozy"===a?{fontFamily:"var(--primaryFont)",h1:{fontSize:48,fontWeight:"bold",lineHeight:1.087,letterSpacing:-.8},h2:{fontSize:32,fontWeight:"bold",lineHeight:1.313,letterSpacing:-.4},h3:{fontSize:24,fontWeight:"bold",lineHeight:1.167},h4:{fontSize:20,fontWeight:"bold",lineHeight:1.167},h5:{fontSize:18,fontWeight:"bold",lineHeight:1.313},h6:{fontSize:16,fontWeight:"bold",lineHeight:1.313},subtitle1:{fontWeight:"bold",fontSize:14,lineHeight:1.358,textTransform:"uppercase"},subtitle2:{fontWeight:"bold",fontSize:12,lineHeight:1.334,textTransform:"uppercase"},body1:{fontSize:16,lineHeight:1.313},body2:{fontSize:14,lineHeight:1.313},button:{fontWeight:"bold",fontSize:14,lineHeight:1.313},caption:{fontSize:12,lineHeight:1.313,color:i.text.secondary,display:"block"}}:{fontFamily:"var(--primaryFont)",h1:{fontSize:45,fontWeight:600,lineHeight:1.087},h2:{fontSize:32,fontWeight:600,lineHeight:1.313},h3:{fontSize:24,fontWeight:600,lineHeight:1.167},h4:{fontSize:22,fontWeight:600,lineHeight:1.167},h5:{fontSize:16,fontWeight:500,lineHeight:1.313,letterSpacing:"0.15px"},h6:{fontSize:14,fontWeight:500,lineHeight:1.313,letterSpacing:"0.1px"},subtitle1:{fontSize:14,fontWeight:500,lineHeight:1.358,letterSpacing:"0.1px"},subtitle2:{fontSize:14,fontWeight:600,lineHeight:1.334,letterSpacing:"0.25px"},body1:{fontSize:16,fontWeight:400,lineHeight:1.313,letterSpacing:"-0.15px"},body2:{fontSize:14,fontWeight:500,lineHeight:1.313,letterSpacing:"0.25px"},button:{fontSize:16,fontWeight:500,lineHeight:1.313,textTransform:"inherit"},caption:{fontSize:12,fontWeight:500,lineHeight:1.313,letterSpacing:"0.5px"},overline:{fontSize:11,fontWeight:500,lineHeight:"16px",letterSpacing:"0.5px",textTransform:"inherit"}},shadows:(0,h.Z)(Array(26)).map(function(n,r){return w("shadow".concat(r),e,t)}),type:e,variant:t,palette:i})),c="Cozy"===a?({light:{normal:I(n=o),inverted:N(n)},dark:{normal:I(n),inverted:N(n)}})[e][t]:({light:{normal:F(r=o),inverted:z(r)},dark:{normal:F(r),inverted:z(r)}})[e][t];return H(H({},o),{},{overrides:c})},q={light:{normal:W("light","normal"),inverted:W("light","inverted")},dark:{normal:W("dark","normal"),inverted:W("dark","inverted")}},V=function(e,t){var n,r=null===(n=q[e])||void 0===n?void 0:n[t];if(!r){var a=Object.keys(q).join(", ");throw Error("[MuiCozyTheme] Unknown theme variant: ".concat(t,". Possible variants are ").concat(a))}return r},Q=n(13457),Z=function(e){var t=e.type,n=e.variant,r=e.children,a=V(t,n);return o.createElement(Q.Z,{theme:a},r)};Z.propTypes={type:i().oneOf(["light","dark"]),variant:i().oneOf(["normal","inverted"])},Z.defaultProps={type:"light",variant:"normal"};var Y=n(63457);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){(0,d.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $=function(e){var t,n,r=e.variant,a=e.className,i=e.ignoreItself,c=e.settingsThemeType,s=e.children,u=localStorage.getItem("ui-theme-type"),l=localStorage.getItem("ui-theme-variant"),f=(0,v.isTwakeTheme)()?"Twake":"Cozy",h=(t="(prefers-color-scheme: dark)",(0,Y.Z)(t,K(K({},void 0),{},{noSsr:!0})))?"dark":"light",m=["light","dark"].includes(c)?c:void 0,y=u||m||h,b=l||r;return o.createElement(ei.Provider,{value:{type:y,variant:b,name:f,isLight:"light"===y}},o.createElement(Z,{type:y,variant:b},o.createElement("div",{className:p()(a,(n={},(0,d.Z)(n,"".concat(f,"Theme--").concat(y,"-").concat(b),!!b),(0,d.Z)(n,"u-dc",i),n))},s)))};$.propTypes={variant:i().oneOf(["normal","inverted"]),ignoreItself:i().bool,className:i().string,settingsThemeType:i().oneOf(["light","dark","auto"]),children:i().node};var X="io.cozy.settings",ee=l.fetchPolicies.olderThan(3e5),et=["data"];let en=function(e){var t={definition:(0,l.Q)(X).getById("io.cozy.settings.instance"),options:{as:"".concat(X,"/io.cozy.settings.instance"),fetchPolicy:ee,singleDocData:!0}},n=(0,l.useQuery)(t.definition,t.options),a=n.data,i=(0,r.Z)(n,et);return(0,l.isQueryLoading)(i)&&!(0,l.hasQueryBeenLoaded)(i)?null:o.createElement($,(0,u.Z)({},e,{settingsThemeType:null==a?void 0:a.colorScheme}))};var er=n(32202),ea=["ignoreCozySettings"],ei=(0,o.createContext)(),eo=function(){var e=(0,o.useContext)(ei);return e||(s()("error","`CozyThemeContext` is missing. `useCozyTheme()` must be used within a `<CozyTheme>`. `light normal` is returned as fallback value."),{type:"light",variant:"normal",isLight:!0,name:"Cozy"})},ec=function(e){var t=e.ignoreCozySettings,n=(0,r.Z)(e,ea),a=t||er.q6?$:en;return o.createElement(a,n)};ec.propTypes={variant:i().oneOf(["normal","inverted"]),ignoreItself:i().bool,ignoreCozySettings:i().bool,className:i().string,children:i().node},ec.defaultProps={variant:"normal",ignoreCozySettings:!1,ignoreItself:!0};let es=ec},68659:function(e,t,n){"use strict";n.d(t,{Z:()=>s});var r=n(58622),a=n.n(r),i=n(67294),o=n(96122),c=n(29662);let s=function(e){return function(){var t=((0,o.useI18n)()||{lang:o.DEFAULT_LANG}).lang;return(0,i.useMemo)(function(){var n=new(a())({locale:o.DEFAULT_LANG,phrases:e[o.DEFAULT_LANG]});if(t&&t!==o.DEFAULT_LANG)try{n.locale(t),n.extend(e[t])}catch(e){console.warn('The dict phrases for "'.concat(t,"\" can't be loaded"))}var r=(0,c.NW)(t);return{t:n.t.bind(n),f:r,lang:t}},[t])}}},29662:function(e,t,n){"use strict";n.d(t,{NW:()=>ea});var r=n(91888);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function o(e){i(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===a(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}function c(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function s(e){i(1,arguments);var t=o(e),n=t.getUTCDay();return t.setUTCDate(t.getUTCDate()-(7*(n<1)+n-1)),t.setUTCHours(0,0,0,0),t}function u(e){i(1,arguments);var t=o(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=s(r),c=new Date(0);c.setUTCFullYear(n,0,4),c.setUTCHours(0,0,0,0);var u=s(c);return t.getTime()>=a.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1}var l={};function d(e,t){i(1,arguments);var n,r,a,s,u,d,f,p,h=c(null!==(n=null!==(r=null!==(a=null!==(s=null==t?void 0:t.weekStartsOn)&&void 0!==s?s:null==t?void 0:null===(u=t.locale)||void 0===u?void 0:null===(d=u.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==a?a:l.weekStartsOn)&&void 0!==r?r:null===(f=l.locale)||void 0===f?void 0:null===(p=f.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==n?n:0);if(!(h>=0&&h<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=o(e),v=m.getUTCDay();return m.setUTCDate(m.getUTCDate()-(7*(v<h)+v-h)),m.setUTCHours(0,0,0,0),m}function f(e,t){i(1,arguments);var n,r,a,s,u,f,p,h,m=o(e),v=m.getUTCFullYear(),y=c(null!==(n=null!==(r=null!==(a=null!==(s=null==t?void 0:t.firstWeekContainsDate)&&void 0!==s?s:null==t?void 0:null===(u=t.locale)||void 0===u?void 0:null===(f=u.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==r?r:null===(p=l.locale)||void 0===p?void 0:null===(h=p.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1);if(!(y>=1&&y<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(v+1,0,y),b.setUTCHours(0,0,0,0);var g=d(b,t),x=new Date(0);x.setUTCFullYear(v,0,y),x.setUTCHours(0,0,0,0);var w=d(x,t);return m.getTime()>=g.getTime()?v+1:m.getTime()>=w.getTime()?v:v-1}function p(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n}let h={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return p("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):p(n+1,2)},d:function(e,t){return p(e.getUTCDate(),t.length)},h:function(e,t){return p(e.getUTCHours()%12||12,t.length)},H:function(e,t){return p(e.getUTCHours(),t.length)},m:function(e,t){return p(e.getUTCMinutes(),t.length)},s:function(e,t){return p(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length;return p(Math.floor(e.getUTCMilliseconds()*Math.pow(10,n-3)),t.length)}};var m={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};function v(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;return 0===i?n+String(a):n+String(a)+(t||"")+p(i,2)}function y(e,t){return e%60==0?(e>0?"-":"+")+p(Math.abs(e)/60,2):b(e,t)}function b(e,t){var n=Math.abs(e);return(e>0?"-":"+")+p(Math.floor(n/60),2)+(t||"")+p(n%60,2)}let g={G:function(e,t,n){var r=+(e.getUTCFullYear()>0);switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear();return n.ordinalNumber(r>0?r:1-r,{unit:"year"})}return h.y(e,t)},Y:function(e,t,n,r){var a=f(e,r),i=a>0?a:1-a;return"YY"===t?p(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):p(i,t.length)},R:function(e,t){return p(u(e),t.length)},u:function(e,t){return p(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return p(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return p(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return h.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return p(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=function(e,t){i(1,arguments);var n=o(e);return Math.round((d(n,t).getTime()-(function(e,t){i(1,arguments);var n,r,a,o,s,u,p,h,m=c(null!==(n=null!==(r=null!==(a=null!==(o=null==t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null==t?void 0:null===(s=t.locale)||void 0===s?void 0:null===(u=s.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==a?a:l.firstWeekContainsDate)&&void 0!==r?r:null===(p=l.locale)||void 0===p?void 0:null===(h=p.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==n?n:1),v=f(e,t),y=new Date(0);return y.setUTCFullYear(v,0,m),y.setUTCHours(0,0,0,0),d(y,t)})(n,t).getTime())/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):p(a,t.length)},I:function(e,t,n){var r=function(e){i(1,arguments);var t=o(e);return Math.round((s(t).getTime()-(function(e){i(1,arguments);var t=u(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),s(n)})(t).getTime())/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):p(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):h.d(e,t)},D:function(e,t,n){var r=function(e){i(1,arguments);var t=o(e),n=t.getTime();return t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),Math.floor((n-t.getTime())/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):p(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return p(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return p(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return p(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?m.noon:0===a?m.midnight:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?m.evening:a>=12?m.afternoon:a>=4?m.morning:m.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return h.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):h.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):p(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return(0===r&&(r=24),"ko"===t)?n.ordinalNumber(r,{unit:"hour"}):p(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):h.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):h.s(e,t)},S:function(e,t){return h.S(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return y(a);case"XXXX":case"XX":return b(a);default:return b(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return y(a);case"xxxx":case"xx":return b(a);default:return b(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+v(a,":");default:return"GMT"+b(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+v(a,":");default:return"GMT"+b(a,":")}},t:function(e,t,n,r){return p(Math.floor((r._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,n,r){return p((r._originalDate||e).getTime(),t.length)}};var x=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},w=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};let k={p:w,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],a=r[1],i=r[2];if(!i)return x(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",x(a,t)).replace("{{time}}",w(i,t))}};var O=["D","DD"],_=["YY","YYYY"];function E(e,t,n){if("YYYY"===e)throw RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var S={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};let C=function(e,t,n){var r,a=S[e];return(r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function P(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var j={date:P({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:P({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:P({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},A={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};let D=function(e,t,n,r){return A[e]};function T(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=null!=n&&n.width?String(n.width):a;r=e.formattingValues[i]||e.formattingValues[a]}else{var o=e.defaultWidth,c=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[c]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var M={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:T({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:T({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:T({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:T({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:T({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function R(e){return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var c=o[0],s=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(s,function(e){return e.test(c)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(s,function(e){return e.test(c)});return n=e.valueCallback?e.valueCallback(u):u,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(c.length)}}}function I(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];return{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(a.length)}}}var N={ordinalNumber:I({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:R({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:R({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:R({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:R({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:R({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};let F={code:"en-US",formatDistance:C,formatLong:j,formatRelative:D,localize:M,match:N,options:{weekStartsOn:0,firstWeekContainsDate:1}};var z=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,L=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,B=/^'([^]*?)'?$/,U=/''/g,H=/[a-zA-Z]/;let G={code:"en-GB",formatDistance:C,formatLong:{date:P({formats:{full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"dd/MM/yyyy"},defaultWidth:"full"}),time:P({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:P({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},formatRelative:D,localize:M,match:N,options:{weekStartsOn:1,firstWeekContainsDate:4}};var W={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},q={date:P({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:P({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:P({formats:{full:"{{date}} '\xe0' {{time}}",long:"{{date}} '\xe0' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},V={lastWeek:"eeee 'dernier \xe0' p",yesterday:"'hier \xe0' p",today:"'aujourd’hui \xe0' p",tomorrow:"'demain \xe0' p'",nextWeek:"eeee 'prochain \xe0' p",other:"P"};let Q={code:"fr",formatDistance:function(e,t,n){var r,a=W[e];return(r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix)?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},formatLong:q,formatRelative:function(e,t,n,r){return V[e]},localize:{ordinalNumber:function(e,t){var n,r=Number(e),a=null==t?void 0:t.unit;return 0===r?"0":(n=1===r?a&&["year","week","hour","minute","second"].includes(a)?"\xe8re":"er":"\xe8me",r+n)},era:T({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant J\xe9sus-Christ","apr\xe8s J\xe9sus-Christ"]},defaultWidth:"wide"}),quarter:T({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2\xe8me trim.","3\xe8me trim.","4\xe8me trim."],wide:["1er trimestre","2\xe8me trimestre","3\xe8me trimestre","4\xe8me trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:T({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","f\xe9vr.","mars","avr.","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],wide:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"]},defaultWidth:"wide"}),day:T({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:T({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"apr\xe8s-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’apr\xe8s-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},match:{ordinalNumber:I({matchPattern:/^(\d+)(ième|ère|ème|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:R({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:R({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:R({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:R({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:R({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};var Z={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xeda",other:"{{count}} d\xedas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xf1o",other:"alrededor de {{count}} a\xf1os"},xYears:{one:"1 a\xf1o",other:"{{count}} a\xf1os"},overXYears:{one:"m\xe1s de 1 a\xf1o",other:"m\xe1s de {{count}} a\xf1os"},almostXYears:{one:"casi 1 a\xf1o",other:"casi {{count}} a\xf1os"}},Y={date:P({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:P({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:P({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},J={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xf1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},K={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xf1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"};let $={code:"es",formatDistance:function(e,t,n){var r,a=Z[e];return(r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix)?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},formatLong:Y,formatRelative:function(e,t,n,r){return 1!==t.getUTCHours()?K[e]:J[e]},localize:{ordinalNumber:function(e,t){return Number(e)+"\xba"},era:T({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xe9s de cristo"]},defaultWidth:"wide"}),quarter:T({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xba trimestre","2\xba trimestre","3\xba trimestre","4\xba trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:T({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:T({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xe1"],abbreviated:["dom","lun","mar","mi\xe9","jue","vie","s\xe1b"],wide:["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"]},defaultWidth:"wide"}),dayPeriod:T({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xf1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xf1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:I({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:R({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:R({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:R({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:R({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:R({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};var X=n(96122);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var et=function(e){switch(e){case"en":return G;case"fr":return Q;case"es":return $;default:throw Error("Locale not found")}},en=function(e){return'The "'.concat(e,"\" locale isn't supported by date-fns or has not been included in the build. Check if you have configured a ContextReplacementPlugin that is too restrictive.")},er=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.DEFAULT_LANG;try{return et(e)}catch(t){console.warn(en(e))}try{return et(t)}catch(e){console.warn(en(t))}},ea=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.DEFAULT_LANG;return function(n,s){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=er(e,t),f=n&&"string"==typeof n?new Date(n):n;try{return function(e,t,n){i(2,arguments);var r,s,u,d,f,p,h,m,v,y,b,x,w,S,C,P,j,A,D,T=String(t),M=null!==(s=null!==(u=null==n?void 0:n.locale)&&void 0!==u?u:l.locale)&&void 0!==s?s:F,R=c(null!==(d=null!==(f=null!==(p=null!==(h=null==n?void 0:n.firstWeekContainsDate)&&void 0!==h?h:null==n?void 0:null===(m=n.locale)||void 0===m?void 0:null===(v=m.options)||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==p?p:l.firstWeekContainsDate)&&void 0!==f?f:null===(y=l.locale)||void 0===y?void 0:null===(b=y.options)||void 0===b?void 0:b.firstWeekContainsDate)&&void 0!==d?d:1);if(!(R>=1&&R<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=c(null!==(x=null!==(w=null!==(S=null!==(C=null==n?void 0:n.weekStartsOn)&&void 0!==C?C:null==n?void 0:null===(P=n.locale)||void 0===P?void 0:null===(j=P.options)||void 0===j?void 0:j.weekStartsOn)&&void 0!==S?S:l.weekStartsOn)&&void 0!==w?w:null===(A=l.locale)||void 0===A?void 0:null===(D=A.options)||void 0===D?void 0:D.weekStartsOn)&&void 0!==x?x:0);if(!(I>=0&&I<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!M.localize)throw RangeError("locale must contain localize property");if(!M.formatLong)throw RangeError("locale must contain formatLong property");var N=o(e);if(!function(e){return i(1,arguments),(!!function(e){return i(1,arguments),e instanceof Date||"object"===a(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)||"number"==typeof e)&&!isNaN(Number(o(e)))}(N))throw RangeError("Invalid time value");var G=((r=new Date(Date.UTC(N.getFullYear(),N.getMonth(),N.getDate(),N.getHours(),N.getMinutes(),N.getSeconds(),N.getMilliseconds()))).setUTCFullYear(N.getFullYear()),N.getTime()-r.getTime()),W=function(e,t){return i(2,arguments),function(e,t){return i(2,arguments),new Date(o(e).getTime()+c(t))}(e,-c(t))}(N,G),q={firstWeekContainsDate:R,weekStartsOn:I,locale:M,_originalDate:N};return T.match(L).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,k[t])(e,M.formatLong):e}).join("").match(z).map(function(r){if("''"===r)return"'";var a,i,o=r[0];if("'"===o){return(i=(a=r).match(B))?i[1].replace(U,"'"):a}var c=g[o];if(c)return!(null!=n&&n.useAdditionalWeekYearTokens)&&-1!==_.indexOf(r)&&E(r,t,String(e)),!(null!=n&&n.useAdditionalDayOfYearTokens)&&-1!==O.indexOf(r)&&E(r,t,String(e)),c(W,r,M.localize,q);if(o.match(H))throw RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return r}).join("")}(f,s,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({locale:d},u))}catch(e){console.error("Error in initFormat",e)}}}},96122:function(e,t,n){"use strict";n.r(t),n.d(t,{extend:()=>h.l7,translate:()=>v,DEFAULT_LANG:()=>g,initTranslation:()=>h.QE,I18n:()=>k,useExtendI18n:()=>b.default,createUseI18n:()=>y.Z,default:()=>O,useI18n:()=>w,I18nContext:()=>x});var r=n(59172),a=n(34871),i=n(28457),o=n(99494),c=n(3868),s=n(88035),u=n(91888),l=n(45697),d=n.n(l),f=n(67294),p=n(29662),h=n(79233),m=n(51894);let v=function(){return function(e){var t=(0,f.forwardRef)(function(t,n){var r=(0,f.useContext)(x);return f.createElement(e,(0,m.Z)({},t,{ref:n,t:r&&r.t,f:r&&r.f,lang:r&&r.lang}))});return t.displayName="withI18n(".concat(e.displayName||e.name,")"),t}};var y=n(68659),b=n(27507),g="en",x=f.createContext(),w=function(){var e=(0,f.useContext)(x);if(!e)throw Error("`I18nContext` is missing. `useI18n()` must be used within a `<I18n>`");return e},k=function(e){(0,o.Z)(l,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,s.Z)(l);return e=t?Reflect.construct(n,arguments,(0,s.Z)(this).constructor):n.apply(this,arguments),(0,c.Z)(this,e)});function l(e){var t;return(0,r.Z)(this,l),t=n.call(this,e),(0,u.Z)((0,i.Z)(t),"UNSAFE_componentWillReceiveProps",function(e){e.lang!==t.props.lang&&t.init(e)}),t.init(t.props),t}return(0,a.Z)(l,[{key:"init",value:function(e){var t=e.polyglot,n=e.lang,r=e.dictRequire,a=e.context,i=e.defaultLang;this.translator=t||(0,h.QE)(n,r,a,i),this.format=(0,p.NW)(n,i),this.t=this.translator.t.bind(this.translator),this.contextValue=this.getContextValue(e)}},{key:"getContextValue",value:function(e){return{t:this.t,f:this.format,polyglot:(e||this.props).polyglot||this.translator,lang:(e||this.props).lang}}},{key:"getChildContext",value:function(){return this.contextValue}},{key:"render",value:function(){return f.createElement(x.Provider,{value:this.contextValue},this.props.children)}}]),l}(f.Component);k.propTypes={lang:d().string.isRequired,polyglot:d().object,dictRequire:d().func,context:d().string,defaultLang:d().string},k.defaultProps={defaultLang:g},k.childContextTypes={t:d().func,f:d().func,polyglot:d().object,lang:d().string};let O=k},79233:function(e,t,n){"use strict";n.d(t,{QE:()=>c,l7:()=>s});var r,a=n(58622),i=n.n(a),o=n(96122),c=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.DEFAULT_LANG;if(r=new(i())({phrases:t(a),locale:a}),e&&e!==a)try{var c=t(e);r.extend(c),r.locale(e)}catch(t){console.warn('The dict phrases for "'.concat(e,"\" can't be loaded"))}if(n)try{var s=t(e,n);r.extend(s)}catch(t){console.warn("The context ".concat(n," cannot be loaded for lang ").concat(e))}return r},s=function(e,t){var n;return null===(n=t||r)||void 0===n?void 0:n.extend(e)}},27507:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(31573),a=n(58622),i=n.n(a),o=n(67294),c=n(96122),s=n(79233);let u=function(e){var t=(0,c.useI18n)(),n=t.lang,a=t.polyglot,u=(0,o.useState)(""),l=(0,r.Z)(u,2),d=l[0],f=l[1];if(e&&n&&a&&d!==n){var p=new(i())({phrases:e[n],locale:n});(0,s.l7)(a.phrases,p),(0,s.l7)(p.phrases,a),f(n)}}},41256:function(e,t,n){"use strict";n.d(t,{Z:()=>s});var r=n(91888),a=n(51894),i=n(67294),o=n(96122);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}let s=function(e){return function(t){var n="function"==typeof e?e:function(t){return e[t]},s=(0,i.forwardRef)(function(e,r){var c=(0,o.useI18n)().lang;return i.createElement(o.I18n,{dictRequire:n,lang:c},i.createElement(t,(0,a.Z)({},e,{ref:r})))});return s.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.propTypes||{}),s.displayName="withOnlyLocales(".concat(t.displayName||t.name,")"),s}}},75910:function(e,t,n){"use strict";n.r(t),n.d(t,{MuiThemeProvider:()=>r.n,ServerStyleSheets:()=>r.$,StylesProvider:()=>r.Fo,ThemeProvider:()=>r.f6,alpha:()=>r.Fq,createGenerateClassName:()=>r.hd,createMuiTheme:()=>r.AY,createStyles:()=>r.kc,createTheme:()=>r.jG,darken:()=>r._j,decomposeColor:()=>r.tB,duration:()=>r.x9,easing:()=>r.Ui,emphasize:()=>r._4,fade:()=>r.U1,getContrastRatio:()=>r.mi,getLuminance:()=>r.H3,hexToRgb:()=>r.oo,hslToRgb:()=>r.ve,jssPreset:()=>r.pm,lighten:()=>r.$n,makeStyles:()=>r.ZL,recomposeColor:()=>r.wy,responsiveFontSizes:()=>r.yE,rgbToHex:()=>r.vq,styled:()=>r.zo,unstable_createMuiStrictModeTheme:()=>r.Ol,useTheme:()=>r.Fg,withStyles:()=>r.D2,withTheme:()=>r.Zz});var r=n(13291)},4495:function(e,t,n){var r=n(12244).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a,i,c,s,u=Object.create((t&&t.prototype instanceof m?t:m).prototype);return o(u,"_invoke",{value:(a=e,i=n,c=new S(r||[]),s="suspendedStart",function(e,t){if("executing"===s)throw Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return P()}for(c.method=e,c.arg=t;;){var n=c.delegate;if(n){var r=function e(t,n){var r=n.method,a=t.iterator[r];if(void 0===a)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+r+"' method")),h;var i=p(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,h):o:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,h)}(n,c);if(r){if(r===h)continue;return r}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if("suspendedStart"===s)throw s="completed",c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);s="executing";var o=p(a,i,c);if("normal"===o.type){if(s=c.done?"completed":"suspendedYield",o.arg===h)continue;return{value:o.arg,done:c.done}}"throw"===o.type&&(s="completed",c.method="throw",c.arg=o.arg)}})}),u}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h={};function m(){}function v(){}function y(){}var b={};d(b,s,function(){return this});var g=Object.getPrototypeOf,x=g&&g(g(C([])));x&&x!==n&&i.call(x,s)&&(b=x);var w=y.prototype=m.prototype=Object.create(b);function k(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function O(e,t){var n;o(this,"_invoke",{value:function(a,o){function c(){return new t(function(n,c){!function n(a,o,c,s){var u=p(e[a],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(d).then(function(e){l.value=e,c(l)},function(e){return n("throw",e,c,s)})}s(u.arg)}(a,o,n,c)})}return n=n?n.then(c,c):c()}})}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=d(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(O.prototype),d(O.prototype,u,function(){return this}),t.AsyncIterator=O,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new O(f(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},k(w),d(w,l,"Generator"),d(w,s,function(){return this}),d(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;E(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},12244:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},55552:function(e,t,n){var r=n(4495)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},84490:function(e,t,n){"use strict";var r=n(42124),a=n(21924),i=r("%TypeError%"),o=n(51080),c=r("%Reflect.apply%",!0)||a("Function.prototype.apply");e.exports=function(e,t){var n=arguments.length>2?arguments[2]:[];if(!o(n))throw new i("Assertion failed: optional `argumentsList`, if provided, must be a List");return c(e,t,n)}},12125:function(e,t,n){"use strict";var r=n(42124)("%TypeError%"),a=n(83774),i=n(69987),o=n(14148);e.exports=function(e,t){if("Object"!==o(e))throw new r("Assertion failed: Type(O) is not Object");if(!i(t))throw new r("Assertion failed: IsPropertyKey(P) is not true, got "+a(t));return e[t]}},61131:function(e,t,n){"use strict";var r=n(42124)("%TypeError%"),a=n(69987),i=n(14148);e.exports=function(e,t){if("Object"!==i(e))throw new r("Assertion failed: `O` must be an Object");if(!a(t))throw new r("Assertion failed: `P` must be a Property Key");return t in e}},51080:function(e,t,n){"use strict";e.exports=n(82201)},72308:function(e,t,n){"use strict";e.exports=n(95320)},69987:function(e){"use strict";e.exports=function(e){return"string"==typeof e||"symbol"==typeof e}},76333:function(e,t,n){"use strict";var r=n(42124)("%TypeError%"),a=n(12125),i=n(75337),o=n(14148);e.exports=function(e){if("Object"!==o(e))throw new r("Assertion failed: `obj` must be an Object");return i(a(e,"length"))}},80891:function(e,t,n){"use strict";e.exports=n(59578)},32396:function(e,t,n){"use strict";var r=n(42124),a=r("%Number%"),i=r("%RegExp%"),o=r("%TypeError%"),c=r("%parseInt%"),s=n(21924),u=n(79246),l=s("String.prototype.slice"),d=u(/^0b[01]+$/i),f=u(/^0o[0-7]+$/i),p=u(/^[-+]0x[0-9a-f]+$/i),h=u(new i("[\x85​￾]","g")),m=n(14238),v=n(14148);e.exports=function e(t){if("String"!==v(t))throw new o("Assertion failed: `argument` is not a String");if(d(t))return a(c(l(t,2),2));if(f(t))return a(c(l(t,2),8));if(h(t)||p(t))return NaN;var n=m(t);return n!==t?e(n):a(t)}},96614:function(e,t,n){"use strict";var r=n(92336),a=n(45383),i=n(20944),o=n(95074);e.exports=function(e){var t=r(e);return i(t)||0===t?0:o(t)?a(t):t}},75337:function(e,t,n){"use strict";var r=n(57475),a=n(96614);e.exports=function(e){var t=a(e);return t<=0?0:t>r?r:t}},92336:function(e,t,n){"use strict";var r=n(42124),a=r("%TypeError%"),i=r("%Number%"),o=n(86222),c=n(46200),s=n(32396);e.exports=function(e){var t=o(e)?e:c(e,i);if("symbol"==typeof t)throw new a("Cannot convert a Symbol value to a number");if("bigint"==typeof t)throw new a("Conversion from 'BigInt' to 'number' is not allowed.");return"string"==typeof t?s(t):i(t)}},17147:function(e,t,n){"use strict";var r=n(42124)("%Object%"),a=n(80891);e.exports=function(e){return a(e),r(e)}},46200:function(e,t,n){"use strict";var r=n(41503);e.exports=function(e){return arguments.length>1?r(e,arguments[1]):r(e)}},7681:function(e,t,n){"use strict";var r=n(42124),a=r("%String%"),i=r("%TypeError%");e.exports=function(e){if("symbol"==typeof e)throw new i("Cannot convert a Symbol value to a string");return a(e)}},14148:function(e,t,n){"use strict";var r=n(92309);e.exports=function(e){return"symbol"==typeof e?"Symbol":"bigint"==typeof e?"BigInt":r(e)}},15169:function(e,t,n){"use strict";var r=n(14148),a=Math.floor;e.exports=function(e){return"BigInt"===r(e)?e:a(e)}},45383:function(e,t,n){"use strict";var r=n(42124),a=n(15169),i=r("%TypeError%");e.exports=function(e){if("number"!=typeof e&&"bigint"!=typeof e)throw new i("argument must be a Number or a BigInt");var t=e<0?-a(-e):a(e);return 0===t?0:t}},59578:function(e,t,n){"use strict";var r=n(42124)("%TypeError%");e.exports=function(e,t){if(null==e)throw new r(t||"Cannot call method on "+e);return e}},92309:function(e){"use strict";e.exports=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}},82201:function(e,t,n){"use strict";var r=n(42124)("%Array%"),a=!r.isArray&&n(21924)("Object.prototype.toString");e.exports=r.isArray||function(e){return"[object Array]"===a(e)}},95074:function(e,t,n){"use strict";var r=n(20944);e.exports=function(e){return("number"==typeof e||"bigint"==typeof e)&&!r(e)&&e!==1/0&&e!==-1/0}},20944:function(e){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},86222:function(e){"use strict";e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},57475:function(e,t,n){"use strict";var r=n(42124),a=r("%Math%"),i=r("%Number%");e.exports=i.MAX_SAFE_INTEGER||a.pow(2,53)-1},88996:function(e,t,n){"use strict";e.exports=n(24567)},61189:function(e,t,n){"use strict";var r=n(38882),a=r("%String%"),i=r("%TypeError%");e.exports=function(e){if("symbol"==typeof e)throw new i("Cannot convert a Symbol value to a string");return a(e)}},24567:function(e,t,n){"use strict";var r=n(38882)("%TypeError%");e.exports=function(e,t){if(null==e)throw new r(t||"Cannot call method on "+e);return e}},72802:function(e,t,n){"use strict";n.r(t),n.d(t,{createEndpoint:()=>a,expose:()=>l,finalizer:()=>o,proxy:()=>x,proxyMarker:()=>r,releaseProxy:()=>i,transfer:()=>g,transferHandlers:()=>u,windowEndpoint:()=>w,wrap:()=>f});let r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),o=Symbol("Comlink.finalizer"),c=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,u=new Map([["proxy",{canHandle:e=>s(e)&&e[r],serialize(e){let{port1:t,port2:n}=new MessageChannel;return l(e,t),[n,[n]]},deserialize:e=>(e.start(),f(e))}],["throw",{canHandle:e=>s(e)&&c in e,serialize({value:e}){let t;return[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function l(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(a){let i;if(!a||!a.data)return;if(!function(e,t){for(let n of e)if(t===n||"*"===n||n instanceof RegExp&&n.test(t))return!0;return!1}(n,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}let{id:s,type:u,path:f}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(O);try{let t=f.slice(0,-1).reduce((e,t)=>e[t],e),n=f.reduce((e,t)=>e[t],e);switch(u){case"GET":i=n;break;case"SET":t[f.slice(-1)[0]]=O(a.data.value),i=!0;break;case"APPLY":i=n.apply(t,p);break;case"CONSTRUCT":{let e=new n(...p);i=x(e)}break;case"ENDPOINT":{let{port1:t,port2:n}=new MessageChannel;l(e,n),i=g(t,[t])}break;case"RELEASE":i=void 0;break;default:return}}catch(e){i={value:e,[c]:0}}Promise.resolve(i).catch(e=>({value:e,[c]:0})).then(n=>{let[a,i]=k(n);t.postMessage(Object.assign(Object.assign({},a),{id:s}),i),"RELEASE"===u&&(t.removeEventListener("message",r),d(t),o in e&&"function"==typeof e[o]&&e[o]())}).catch(e=>{let[n,r]=k({value:TypeError("Unserializable return value"),[c]:0});t.postMessage(Object.assign(Object.assign({},n),{id:s}),r)})}),t.start&&t.start()}function d(e){"MessagePort"===e.constructor.name&&e.close()}function f(e,t){return function e(t,n=[],r=function(){}){let o=!1,c=new Proxy(r,{get(r,a){if(p(o),a===i)return()=>{v&&v.unregister(c),h(t),o=!0};if("then"===a){if(0===n.length)return{then:()=>c};let e=_(t,{type:"GET",path:n.map(e=>e.toString())}).then(O);return e.then.bind(e)}return e(t,[...n,a])},set(e,r,a){p(o);let[i,c]=k(a);return _(t,{type:"SET",path:[...n,r].map(e=>e.toString()),value:i},c).then(O)},apply(r,i,c){p(o);let s=n[n.length-1];if(s===a)return _(t,{type:"ENDPOINT"}).then(O);if("bind"===s)return e(t,n.slice(0,-1));let[u,l]=y(c);return _(t,{type:"APPLY",path:n.map(e=>e.toString()),argumentList:u},l).then(O)},construct(e,r){p(o);let[a,i]=y(r);return _(t,{type:"CONSTRUCT",path:n.map(e=>e.toString()),argumentList:a},i).then(O)}});return!function(e,t){let n=(m.get(t)||0)+1;m.set(t,n),v&&v.register(e,t,e)}(c,t),c}(e,[],t)}function p(e){if(e)throw Error("Proxy has been released and is not useable")}function h(e){return _(e,{type:"RELEASE"}).then(()=>{d(e)})}let m=new WeakMap,v="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(m.get(e)||0)-1;m.set(e,t),0===t&&h(e)});function y(e){var t;let n=e.map(k);return[n.map(e=>e[0]),(t=n.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let b=new WeakMap;function g(e,t){return b.set(e,t),e}function x(e){return Object.assign(e,{[r]:!0})}function w(e,t=globalThis,n="*"){return{postMessage:(t,r)=>e.postMessage(t,n,r),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function k(e){for(let[t,n]of u)if(n.canHandle(e)){let[r,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},a]}return[{type:"RAW",value:e},b.get(e)||[]]}function O(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function _(e,t,n){return new Promise(r=>{let a=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)})}},79273:function(e,t,n){"use strict";n.r(t),n.d(t,{createEndpoint:()=>a,expose:()=>l,finalizer:()=>o,proxy:()=>x,proxyMarker:()=>r,releaseProxy:()=>i,transfer:()=>g,transferHandlers:()=>u,windowEndpoint:()=>w,wrap:()=>f});let r=Symbol("Comlink.proxy"),a=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),o=Symbol("Comlink.finalizer"),c=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,u=new Map([["proxy",{canHandle:e=>s(e)&&e[r],serialize(e){let{port1:t,port2:n}=new MessageChannel;return l(e,t),[n,[n]]},deserialize:e=>(e.start(),f(e))}],["throw",{canHandle:e=>s(e)&&c in e,serialize({value:e}){let t;return[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function l(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(a){let i;if(!a||!a.data)return;if(!function(e,t){for(let n of e)if(t===n||"*"===n||n instanceof RegExp&&n.test(t))return!0;return!1}(n,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}let{id:s,type:u,path:f}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(O);try{let t=f.slice(0,-1).reduce((e,t)=>e[t],e),n=f.reduce((e,t)=>e[t],e);switch(u){case"GET":i=n;break;case"SET":t[f.slice(-1)[0]]=O(a.data.value),i=!0;break;case"APPLY":i=n.apply(t,p);break;case"CONSTRUCT":{let e=new n(...p);i=x(e)}break;case"ENDPOINT":{let{port1:t,port2:n}=new MessageChannel;l(e,n),i=g(t,[t])}break;case"RELEASE":i=void 0;break;default:return}}catch(e){i={value:e,[c]:0}}Promise.resolve(i).catch(e=>({value:e,[c]:0})).then(n=>{let[a,i]=k(n);t.postMessage(Object.assign(Object.assign({},a),{id:s}),i),"RELEASE"===u&&(t.removeEventListener("message",r),d(t),o in e&&"function"==typeof e[o]&&e[o]())}).catch(e=>{let[n,r]=k({value:TypeError("Unserializable return value"),[c]:0});t.postMessage(Object.assign(Object.assign({},n),{id:s}),r)})}),t.start&&t.start()}function d(e){"MessagePort"===e.constructor.name&&e.close()}function f(e,t){return function e(t,n=[],r=function(){}){let o=!1,c=new Proxy(r,{get(r,a){if(p(o),a===i)return()=>{v&&v.unregister(c),h(t),o=!0};if("then"===a){if(0===n.length)return{then:()=>c};let e=_(t,{type:"GET",path:n.map(e=>e.toString())}).then(O);return e.then.bind(e)}return e(t,[...n,a])},set(e,r,a){p(o);let[i,c]=k(a);return _(t,{type:"SET",path:[...n,r].map(e=>e.toString()),value:i},c).then(O)},apply(r,i,c){p(o);let s=n[n.length-1];if(s===a)return _(t,{type:"ENDPOINT"}).then(O);if("bind"===s)return e(t,n.slice(0,-1));let[u,l]=y(c);return _(t,{type:"APPLY",path:n.map(e=>e.toString()),argumentList:u},l).then(O)},construct(e,r){p(o);let[a,i]=y(r);return _(t,{type:"CONSTRUCT",path:n.map(e=>e.toString()),argumentList:a},i).then(O)}});return!function(e,t){let n=(m.get(t)||0)+1;m.set(t,n),v&&v.register(e,t,e)}(c,t),c}(e,[],t)}function p(e){if(e)throw Error("Proxy has been released and is not useable")}function h(e){return _(e,{type:"RELEASE"}).then(()=>{d(e)})}let m=new WeakMap,v="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(m.get(e)||0)-1;m.set(e,t),0===t&&h(e)});function y(e){var t;let n=e.map(k);return[n.map(e=>e[0]),(t=n.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let b=new WeakMap;function g(e,t){return b.set(e,t),e}function x(e){return Object.assign(e,{[r]:!0})}function w(e,t=globalThis,n="*"){return{postMessage:(t,r)=>e.postMessage(t,n,r),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function k(e){for(let[t,n]of u)if(n.canHandle(e)){let[r,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},a]}return[{type:"RAW",value:e},b.get(e)||[]]}function O(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function _(e,t,n){return new Promise(r=>{let a=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");e.addEventListener("message",function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)})}},13797:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},28457:function(e,t,n){"use strict";function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>r})},48079:function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function c(e){r(o,a,i,c,s,"next",e)}function s(e){r(o,a,i,c,s,"throw",e)}c(void 0)})}}n.d(t,{Z:()=>a})},59172:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>r})},34871:function(e,t,n){"use strict";n.d(t,{Z:()=>i});var r=n(60012);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,r.Z)(a.key),a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},91888:function(e,t,n){"use strict";n.d(t,{Z:()=>a});var r=n(60012);function a(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},51894:function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Z:()=>r})},88035:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,{Z:()=>r})},99494:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}n.d(t,{Z:()=>a})},65691:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(t,{Z:()=>r})},3868:function(e,t,n){"use strict";n.d(t,{Z:()=>i});var r=n(5977),a=n(28457);function i(e,t){if(t&&("object"===(0,r.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}},31573:function(e,t,n){"use strict";n.d(t,{Z:()=>a});var r=n(27183);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}(e,t)||(0,r.Z)(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},14106:function(e,t,n){"use strict";n.d(t,{Z:()=>i});var r=n(13797),a=n(27183);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},60012:function(e,t,n){"use strict";n.d(t,{Z:()=>a});var r=n(5977);function a(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},5977:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{Z:()=>r})},27183:function(e,t,n){"use strict";n.d(t,{Z:()=>a});var r=n(13797);function a(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return(0,r.Z)(e,t)}}},58609:function(e){"use strict";e.exports=["apps","context"]},94157:function(e){"use strict";e.exports=JSON.parse('{"drawer":"Show menu drawer","profile":"Profile","appearance":"Appearance","plans":"Plans","permissions":"Permissions","connectedDevices":"Connected devices","connections":"Connections","storage":"Storage","storage_phrase":"%{diskUsage} GB of %{diskQuota} GB used","help":"FAQ","contact":"Contact us","logout":"Log out","soon":"soon","termsOfService":"Terms of Service","legalNotice":"Legal notice","error_UnavailableStack":"The stack is unreachable (connection timed-out).","error_UnauthorizedStack":"Some permissions are missing, the application can\'t access the requested resource on the stack.","no_apps":"No applications found on the Cozy.","menu":{"apps":"Apps","settings":"Settings","home_mobile":"Back to dashboard...","home":"Back to dashboard","home_title":"Home"},"Categories":{"cozy":"Cozy apps","partners":"Partners apps","ptnb":"expPTNB","others":"Other apps"},"permsModal":{"title":"Access your whole Cozy from your application","description":"Authorize %{app} to display your Cozy applications on this device","button":"Authorize access"},"comingSoon":{"store":{"title":"The Store application will be available soon in your Cozy.","description":"Thanks to Cozy Store you will be able to install the applications that you want in your Cozy."}},"banner":{"tos-updated":{"description":"To comply with the GDPR, Cozy Cloud has updated its Terms of Services that have taken effect on May 25, 2018","CTA":"Read now"},"moved":{"description":"The Cozy has been moved to a new address"}},"userMenu":{"addAccount":"Add account","manageProfile":"Manage profile","createBusinessAccount":"Create business account","storage":"Storage","storageAvailable":"%{smart_count} GB available","logOut":"Log out"}}')},13585:function(e){"use strict";e.exports=JSON.parse('{"drawer":"Mostrar el menu lateral","profile":"Perfil","connectedDevices":"Aparatos conectados","storage":"Espacio en el disco","storage_phrase":"%{diskUsage} Go de %{diskQuota} Go","view_offers":"Ver ofertas","view_my_offer":"Mi oferta","help":"Ayuda","logout":"Desconectar","soon":"pronto","error_UnavailableStack":"Conexi\xf3n a la stack imposible ( se agot\xf3 el tiempo para la conexi\xf3n ).","error_UnauthorizedStack":"Faltan algunos permisos, la aplicaci\xf3n no puede acceder a los recursos solicitados.","no_apps":"No se han encontrado aplicaciones en su Cozy.","menu":{"apps":"Aplicaciones","settings":"Par\xe1metros","home_mobile":"Regresar a Inicio...","home":"Regresar a Inicio","home_title":"Inicio"},"Categories":{"cozy":"Aplicaciones Cozy","partners":"Aplicaciones de asociados","ptnb":"expPTNB","others":"Otras aplicaciones"},"permsModal":{"title":"Acceder a su Cozy desde su aplicaci\xf3n","description":"Autorizar a %{app} para mostrar sus aplicaciones Cozy en este aparato","button":"Autorizar el acceso"},"comingSoon":{"store":{"title":"En breve, la aplicaci\xf3n Store estar\xe1 disponible en su Cozy","description":"Gracias a Cozy Store usted podr\xe1 instalar en su Cozy las aplicaciones que desee."}},"banner":{"tos-updated":{"description":"Para cumplir con el RGPD, Cozy Cloud ha actualizado sus Condiciones de utilizaci\xf3n que entraron en vigor desde el 25 de mayo de 2018.","CTA":"Leerlo ahora"}}}')},18670:function(e){"use strict";e.exports=JSON.parse('{"drawer":"Afficher le menu lat\xe9ral","profile":"Profil","appearance":"Apparence","plans":"Offres et options","permissions":"Permissions","connectedDevices":"Appareils connect\xe9s","connections":"Connexions","storage":"Stockage","storage_phrase":"%{diskUsage} Go sur %{diskQuota} Go","help":"Manuel d\'utilisation","contact":"Nous contacter","logout":"D\xe9connexion","soon":"\xe0 venir","termsOfService":"Conditions g\xe9n\xe9rales d’utilisation","legalNotice":"Mentions l\xe9gales","error_UnavailableStack":"Connexion \xe0 la stack impossible (connection timed-out)","error_UnauthorizedStack":"Des permissions sont manquante, l\'application ne peut acc\xe9der aux ressources demand\xe9es.","no_apps":"Pas d\'applications Cozy trouv\xe9es.","menu":{"apps":"Applications","settings":"Param\xe8tres","home_mobile":"Retour vers le tableau de bord...","home":"Retour vers le tableau de bord","home_title":"Accueil "},"Categories":{"cozy":"Apps Cozy","partners":"Exp\xe9rimentation MesInfos","ptnb":"Exp\xe9rimentation Carnet du logement","others":"Autres apps"},"permsModal":{"title":"Acc\xe9der \xe0 ton Cozy \xe0 partir de ton application","description":"Autoriser %{app} \xe0 afficher les applications de ton Cozy sur cet appareil","button":"Autoriser l\'acc\xe8s"},"comingSoon":{"store":{"title":"L\'application Store sera bient\xf4t disponible dans votre Cozy","description":"Gr\xe2ce \xe0 cozy Store vous pourrez installer les applications que vous souhaitez sur votre Cozy."}},"banner":{"tos-updated":{"description":"Dans le cadre du RGPD, Cozy Cloud met \xe0 jour ses Conditions G\xe9n\xe9rales d\'Utilisation qui ont pris effet le 25 Mai 2018","CTA":"Lire maintenant"},"moved":{"description":"Ce Cozy a \xe9t\xe9 d\xe9plac\xe9 vers une nouvelle adresse"}},"userMenu":{"addAccount":"Ajouter un compte","manageProfile":"G\xe9rer mon profil","createBusinessAccount":"Cr\xe9er un compte entreprise","storage":"Stockage","storageAvailable":"%{smart_count} Go disponible","logOut":"Se d\xe9connecter"}}')},37504:function(e){"use strict";e.exports=JSON.parse('{"qualifications":[{"label":"identity_photo","purpose":"attestation","subjects":["identity"]},{"label":"national_id_card","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity"]},{"label":"passport","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity"]},{"label":"residence_permit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"immigration","subjects":["permit","identity"]},{"label":"family_record_book","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"birth_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity","family"]},{"label":"driver_license","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"transport","subjects":["permit","driving"]},{"label":"other_identity_document","purpose":"attestation","subjects":["identity"]},{"label":"wedding","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"pacs","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"divorce","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"large_family_card","purpose":"attestation","sourceCategory":"transport","subjects":["right"]},{"label":"caf","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"family","subjects":["right"]},{"label":"other_family_document","subjects":["family"]},{"label":"diploma","purpose":"attestation","sourceCategory":"education","subjects":["achievement"]},{"label":"work_contract","purpose":"contract","sourceCategory":"employer","subjects":["work","employment"]},{"label":"pay_sheet","purpose":"attestation","sourceCategory":"employer","subjects":["work","revenues"]},{"label":"fidelity_card","sourceCategory":"shopping"},{"label":"single_parent_benefit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"family","subjects":["revenues"]},{"label":"transport_card","sourceCategory":"transport","subjects":["vehicule"]},{"label":"electoral_card","sourceCategory":"gov"},{"label":"employment_center_certificate","purpose":"attestation","sourceCategory":"gov","subjects":["employment"]},{"label":"unemployment_benefit","purpose":"attestation","sourceCategory":"gov","subjects":["revenues"]},{"label":"pension","purpose":"attestation","sourceCategory":"gov","subjects":["revenues"]},{"label":"other_revenue","purpose":"attestation","subjects":["revenues"]},{"label":"gradebook","purpose":"report","sourceCategory":"education","subjects":["history"]},{"label":"student_card","purpose":"attestation","sourceCategory":"education","subjects":["identity","right","employment","education"]},{"label":"resume","purpose":"description","subjects":["employment"]},{"label":"motivation_letter","purpose":"description","subjects":["employment"]},{"label":"other_work_document","purpose":"employment"},{"label":"health_book","purpose":"attestation","sourceCategory":"health","subjects":["capacity","vaccine"]},{"label":"health_certificate","purpose":"attestation","sourceCategory":"health","subjects":["capacity","vaccine"]},{"label":"pregnancy_medical_certificate","purpose":"attestation","sourceCategory":"health","subjects":["pregnancy"]},{"label":"work_disability_recognition","purpose":"attestation","sourceCategory":"health","subjects":["right"]},{"label":"national_health_insurance_card","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"health","subjects":["insurance"]},{"label":"national_health_insurance_right_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"health","subjects":["right","insurance"]},{"label":"health_insurance_card","purpose":"attestation","sourceCategory":"insurance","sourceSubCategory":"health","subjects":["insurance"]},{"label":"prescription","purpose":"attestation","sourceCategory":"health","subjects":["right","medecine"]},{"label":"health_invoice","purpose":"invoice","sourceCategory":"health"},{"label":"other_health_document","subjects":["health"]},{"label":"vehicle_registration","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"transport","subjects":["vehicule","identity","right"]},{"label":"car_insurance","purpose":"attestation","sourceCategory":"insurance","sourceSubCategory":"transport","subjects":["insurance","car"]},{"label":"mechanic_invoice","purpose":"invoice","sourceCategory":"transport"},{"label":"transport_invoice","purpose":"invoice","sourceCategory":"transport"},{"label":"other_transport_document","sourceCategory":"transport"},{"label":"house_sale_agreeement","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"real_estate_tax","purpose":"invoice","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["tax","house"]},{"label":"building_permit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["permit","house"]},{"label":"technical_diagnostic_record","purpose":"report","sourceCategory":"real_estate","subjects":["compliance","house"]},{"label":"lease","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"rent_receipt","purpose":"invoice","sourceCategory":"real_estate","subjects":["house"]},{"label":"house_insurance","purpose":"contract","sourceCategory":"insurance","sourceSubCategory":"real_estate","subjects":["insurance","house"]},{"label":"work_quote","purpose":"description","sourceCategory":"building","subjects":["building","house"]},{"label":"work_invoice","purpose":"invoice","sourceCategory":"building","subjects":["building","house"]},{"label":"other_house_document","subjects":["house"]},{"label":"phone_invoice","purpose":"invoice","sourceCategory":"telecom","sourceSubCategory":"mobile"},{"label":"isp_invoice","purpose":"invoice","sourceCategory":"telecom","sourceSubCategory":"internet","subjects":["subscription"]},{"label":"telecom_invoice","purpose":"invoice","sourceCategory":"telecom"},{"label":"energy_invoice","purpose":"invoice","sourceCategory":"energy"},{"label":"water_invoice","purpose":"invoice","sourceCategory":"water"},{"label":"energy_contract","purpose":"contract","sourceCategory":"energy"},{"label":"appliance_invoice","purpose":"invoice","sourceCategory":"retail"},{"label":"web_service_invoice","purpose":"invoice","sourceCategory":"web"},{"label":"restaurant_invoice","purpose":"invoice","sourceCategory":"alimentation"},{"label":"grocery_invoice","purpose":"invoice","sourceCategory":"shopping"},{"label":"other_invoice","purpose":"invoice"},{"label":"tax_certificate","purpose":"attestation","sourceCategory":"gov","subjects":["tax"]},{"label":"tax_return","purpose":"report","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"tax_notice","purpose":"invoice","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"tax_timetable","purpose":"report","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"other_tax_document","subjects":["tax"]},{"label":"bank_details","purpose":"attestation","sourceCategory":"bank","subjects":["bank_account"]},{"label":"bank_statement","purpose":"report","sourceCategory":"bank","subjects":["history"]},{"label":"loan_agreement","purpose":"contract","sourceCategory":"bank"},{"label":"other_bank_document","sourceCategory":"bank"},{"label":"receipt","purpose":"report"},{"label":"payment_proof_family_allowance","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["subvention"]},{"label":"school_attendance_certificate","purpose":"attestation","sourceCategory":"education","subjects":["identity","right","education"]},{"label":"school_insurance_certificate","purpose":"attestation","sourceCategory":"education","subjects":["education","insurance"]},{"label":"unfit_for_habitation_declaration","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["compliance"]},{"label":"accommodation_proof","purpose":"attestation","sourceCategory":"individual","subjects":["address"]},{"label":"citizen_registration_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["achievement","education"]},{"label":"personal_sporting_licence","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"sport","subjects":["permit","invoice"]},{"label":"other_activity_document","sourceSubCategory":"sport","subjects":["permit","invoice"]},{"label":"real_estate_insurance","purpose":"contract","sourceCategory":"insurance","sourceSubCategory":"real_estate","subjects":["insurance"]},{"label":"person_insurance","purpose":"contract","sourceCategory":"insurance","subjects":["insurance"]},{"label":"other_administrative_document"},{"label":"expense_claim","purpose":"invoice"},{"label":"fine","purpose":"invoice","sourceCategory":"gov"},{"label":"condition_report","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"note_identity_document"},{"label":"note_family_document"},{"label":"note_work_document"},{"label":"note_health_document"},{"label":"note_house_document"},{"label":"note_transport_document"},{"label":"note_activity_document"},{"label":"note_finance"},{"label":"note_invoice"}],"purposeKnownValues":["attestation","contract","invoice","report","description","evaluation","employment"],"sourceCategoryKnownValues":["bank","insurance","retail","telecom","energy","water","health","gov","association","education","employer","transport","goods","alimentation","building","real_estate","web","individual","shopping"],"sourceSubCategoryKnownValues":["civil_registration","immigration","transport","family","tax","health","real_estate","mobile","internet","citizen","sport"],"subjectsKnownValues":["identity","permit","family","address","driving","right","subvention","achievement","degree","work","employment","revenues","history","insurance","medical_act","vehicule","car","moto","truck","boat","subscription","buy/sale","house","compliance","building","food","real_estate","tax","address","education","statement","course","internet","phone","vaccine","capacity","health","drugs","child","pregnancy","bank_account"]}')},20455:function(e){"use strict";e.exports=JSON.parse('{"nationalities":{"AD":"Andorran","AE":"Emirian","AF":"Afghan","AG":"Antiguans","AL":"Albanian","AM":"Armenian","AO":"Angolan","AR":"Argentinean","AT":"Austrian","AU":"Australian","AX":"\xc5land Islands","AZ":"Azerbaijani","BA":"Bosnian - Herzegovinian","BB":"Barbadian","BD":"Bangladeshi","BE":"Belgian","BF":"Burkinabe","BG":"Bulgarian","BH":"Bahraini","BI":"Burundian","BJ":"Beninese","BL":"Saint Barth\xe9lemy","BM":"Bermuda","BN":"Bruneian","BO":"Bolivian","BQ":"Bonaire, Sint Eustatius and Saba","BR":"Brazilian","BS":"Bahamian","BT":"Bhutanese","BV":"Bouvet Island","BW":"Batswana","BY":"Belarusian","BZ":"Belizean","CA":"Canadian","CC":"Cocos (Keeling) Islands","CD":"Congolese (Democratic Republic of the Congo)","CF":"Central African","CG":"Congolese (Republic of the Congo)","CH":"Swiss","CI":"Ivorian","CK":"Cook Islands","CL":"Chilean","CM":"Cameroonian","CN":"Chinese","CO":"Colombian","CR":"Costa Rican","CU":"Cuban","CV":"Cape Verdean","CW":"Cura\xe7ao","CX":"Christmas Island","CY":"Cypriot","CZ":"Czech","DE":"German","DJ":"Djibouti","DK":"Danish","DM":"Dominican (Dominica)","DO":"Dominican (Dominican Republic)","DZ":"Algerian","EC":"Ecuadorean","EE":"Estonian","EG":"Egyptian","EH":"Western Sahara","ER":"Eritrean","ES":"Spanish","ET":"Ethiopian","FI":"Finnish","FJ":"Fijian","FK":"Falkland Islands (Malvinas)","FM":"Micronesian","FO":"Faroe Islands","FR":"French","GA":"Gabonese","GB":"British","GD":"Grenadian","GE":"Georgian","GF":"French (French Guiana)","GG":"Guernsey","GH":"Ghanaian","GI":"Gibraltar","GL":"Greenland","GM":"Gambian","GN":"Guinean","GP":"Guadeloupe","GQ":"Equatorial Guinean","GR":"Greek","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemalan","GU":"Guam","GW":"Guinea-Bissauan","GY":"Guyanese","HK":"Hong Kong","HM":"Heard Island and Mcdonald Islands","HN":"Honduran","HR":"Croatian","HT":"Haitian","HU":"Hungarian","ID":"Indonesian","IE":"Irish","IL":"Israeli","IM":"Manx","IN":"Indian","IO":"British Indian Ocean Territory","IQ":"Iraqi","IR":"Iranian","IS":"Icelandic","IT":"Italian","JE":"Jersey","JM":"Jamaican","JO":"Jordanian","JP":"Japanese","KE":"Kenyan","KG":"Kyrgyz","KH":"Cambodian","KI":"I-Kiribati","KM":"Comoran","KN":"Kittian and Nevisian","KP":"North Korean","KR":"South Korean","KW":"Kuwaiti","KY":"Cayman Islands","KZ":"Kazakhstani","LA":"Laotian","LB":"Lebanese","LC":"Saint Lucian","LI":"Liechtensteiner","LK":"Sri Lankan","LR":"Liberian","LS":"Mosotho","LT":"Lithuanian","LU":"Luxembourger","LV":"Latvian","LY":"Libyan","MA":"Moroccan","MC":"Monacan","MD":"Moldovan","ME":"Montenegrin","MF":"Saint Martin (French part)","MG":"Malagasy","MH":"Marshallese","MK":"Macedonian","ML":"Malian","MM":"Burmese","MN":"Mongolian","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritanian","MS":"Montserrat","MT":"Maltese","MU":"Mauritian","MV":"Maldivan","MW":"Malawian","MX":"Mexican","MY":"Malaysian","MZ":"Mozambican","NA":"Namibian","NC":"New Caledonia","NE":"Nigerien","NF":"Norfolk Island","NG":"Nigerian","NI":"Nicaraguan","NL":"Dutch","NO":"Norwegian","NP":"Nepalese","NR":"Nauruan","NU":"Niue","NZ":"New Zealander","OM":"Omani","PA":"Panamanian","PE":"Peruvian","PF":"French (French Polynesia)","PG":"Papua New Guinea","PH":"Filipino","PK":"Pakistani","PL":"Polish","PM":"Saint Pierre and Miquelon","PN":"Pitcairn","PR":"Puerto Rico","PS":"Palestinian Territory, Occupied","PT":"Portuguese","PW":"Palauan","PY":"Paraguayan","QA":"Qatari","RE":"Reunion","RO":"Romanian","RS":"Serbian","RU":"Russian","RW":"Rwandan","SA":"Saudi","SB":"Solomon Islander","SC":"Seychellois","SD":"Sudanese","SE":"Swedish","SG":"Singaporean","SH":"Saint Helena","SI":"Slovenian","SJ":"Svalbard and Jan Mayen","SK":"Slovakian","SL":"Sierra Leonean","SM":"San Marinese","SN":"Senegalese","SO":"Somali","SR":"Surinamer","SS":"South Sudan","ST":"Sao Tomean","SV":"Salvadoran","SX":"Sint Maarten (Dutch part)","SY":"Syrian","SZ":"Swazi","TC":"Turks and Caicos Islands","TD":"Chadian","TF":"French (French Southern Territories)","TG":"Togolese","TH":"Thai","TJ":"Tajik","TK":"Tokelau","TL":"East Timorese","TM":"Turkmenistan","TN":"Tunisian","TO":"Tongan","TR":"Turkish","TT":"Trinidadian or Tobagonian","TV":"Tuvaluan","TW":"Taiwanese","TZ":"Tanzanian","UA":"Ukrainian","UG":"Ugandan","UM":"United States Minor Outlying Islands","US":"American","UY":"Uruguayan","UZ":"Uzbekistani","VA":"Holy See (Vatican City State)","VC":"Saint Vincent and the Grenadines","VE":"Venezuelan","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","VN":"Vietnamese","VU":"Vanuatu","WF":"Welsh","WS":"Samoan","YE":"Yemenite","YT":"Mayotte","ZA":"South African","ZM":"Zambian","ZW":"Zimbabwean"},"countries":{"AD":"Andorra","AE":"United Arab Emirates","AF":"Afghanistan","AG":"Antigua and Barbuda","AL":"Albania","AM":"Armenia","AO":"Angola","AR":"Argentina","AT":"Austria","AU":"Australia","AX":"\xc5land Islands","AZ":"Azerbaijan","BA":"Bosnia and Herzegovina","BB":"Barbados","BD":"Bangladesh","BE":"Belgium","BF":"Burkina Faso","BG":"Bulgaria","BH":"Bahrain","BI":"Burundi","BJ":"Benin","BL":"Saint Barth\xe9lemy","BM":"Bermuda","BN":"Brunei Darussalam","BO":"Bolivia","BQ":"Bonaire, Sint Eustatius and Saba","BR":"Brazil","BS":"Bahamas","BT":"Bhutan","BV":"Bouvet Island","BW":"Botswana","BY":"Belarus","BZ":"Belize","CA":"Canada","CC":"Cocos (Keeling) Islands","CD":"Democratic Republic of the Congo","CF":"Central African Republic","CG":"Republic of the Congo","CH":"Switzerland","CI":"Ivory Coast","CK":"Cook Islands","CL":"Chile","CM":"Cameroon","CN":"People\'s Republic of China","CO":"Colombia","CR":"Costa Rica","CU":"Cuba","CV":"Cape Verde","CW":"Cura\xe7ao","CX":"Christmas Island","CY":"Cyprus","CZ":"Czech Republic","DE":"Germany","DJ":"Djibouti","DK":"Denmark","DM":"Dominica","DO":"Dominican Republic","DZ":"Algeria","EC":"Ecuador","EE":"Estonia","EG":"Egypt","EH":"Western Sahara","ER":"Eritrea","ES":"Spain","ET":"Ethiopia","FI":"Finland","FJ":"Fiji","FK":"Falkland Islands (Malvinas)","FM":"Micronesia, Federated States of","FO":"Faroe Islands","FR":"France","GA":"Gabon","GB":"United Kingdom","GD":"Grenada","GE":"Georgia","GF":"French Guiana","GG":"Guernsey","GH":"Ghana","GI":"Gibraltar","GL":"Greenland","GM":"Gambia","GN":"Guinea","GP":"Guadeloupe","GQ":"Equatorial Guinea","GR":"Greece","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemala","GU":"Guam","GW":"Guinea-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"Heard Island and McDonald Islands","HN":"Honduras","HR":"Croatia","HT":"Haiti","HU":"Hungary","ID":"Indonesia","IE":"Ireland","IL":"Israel","IM":"Isle of Man","IN":"India","IO":"British Indian Ocean Territory","IQ":"Iraq","IR":"Iran","IS":"Iceland","IT":"Italy","JE":"Jersey","JM":"Jamaica","JO":"Jordan","JP":"Japan","KE":"Kenya","KG":"Kyrgyzstan","KH":"Cambodia","KI":"Kiribati","KM":"Comoros","KN":"Saint Kitts and Nevis","KP":"North Korea","KR":"South Korea","KW":"Kuwait","KY":"Cayman Islands","KZ":"Kazakhstan","LA":"Lao People\'s Democratic Republic","LB":"Lebanon","LC":"Saint Lucia","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Liberia","LS":"Lesotho","LT":"Lithuania","LU":"Luxembourg","LV":"Latvia","LY":"Libya","MA":"Morocco","MC":"Monaco","MD":"Moldova, Republic of","ME":"Montenegro","MF":"Saint Martin (French part)","MG":"Madagascar","MH":"Marshall Islands","MK":"North Macedonia","ML":"Mali","MM":"Myanmar","MN":"Mongolia","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritania","MS":"Montserrat","MT":"Malta","MU":"Mauritius","MV":"Maldives","MW":"Malawi","MX":"Mexico","MY":"Malaysia","MZ":"Mozambique","NA":"Namibia","NC":"New Caledonia","NE":"Niger","NF":"Norfolk Island","NG":"Nigeria","NI":"Nicaragua","NL":"Netherlands","NO":"Norway","NP":"Nepal","NR":"Nauru","NU":"Niue","NZ":"New Zealand","OM":"Oman","PA":"Panama","PE":"Peru","PF":"French Polynesia","PG":"Papua New Guinea","PH":"Philippines","PK":"Pakistan","PL":"Poland","PM":"Saint Pierre and Miquelon","PN":"Pitcairn Islands","PR":"Puerto Rico","PS":"Palestine","PT":"Portugal","PW":"Palau","PY":"Paraguay","QA":"Qatar","RE":"Reunion","RO":"Romania","RS":"Serbia","RU":"Russia","RW":"Rwanda","SA":"Saudi Arabia","SB":"Solomon Islands","SC":"Seychelles","SD":"Sudan","SE":"Sweden","SG":"Singapore","SH":"Saint Helena","SI":"Slovenia","SJ":"Svalbard and Jan Mayen","SK":"Slovakia","SL":"Sierra Leone","SM":"San Marino","SN":"Senegal","SO":"Somalia","SR":"Suriname","SS":"South Sudan","ST":"Sao Tome and Principe","SV":"El Salvador","SX":"Sint Maarten (Dutch part)","SY":"Syrian Arab Republic","SZ":"Eswatini","TC":"Turks and Caicos Islands","TD":"Chad","TF":"French Southern Territories","TG":"Togo","TH":"Thailand","TJ":"Tajikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkmenistan","TN":"Tunisia","TO":"Tonga","TR":"Turkey","TT":"Trinidad and Tobago","TV":"Tuvalu","TW":"Taiwan","TZ":"United Republic of Tanzania","UA":"Ukraine","UG":"Uganda","UM":"United States Minor Outlying Islands","US":"United States of America","UY":"Uruguay","UZ":"Uzbekistan","VA":"Holy See (Vatican City State)","VC":"Saint Vincent and the Grenadines","VE":"Venezuela","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis and Futuna","WS":"Samoa","YE":"Yemen","YT":"Mayotte","ZA":"South Africa","ZM":"Zambia","ZW":"Zimbabwe"}}')},40883:function(e){"use strict";e.exports=JSON.parse('{"nationalities":{"AD":"Andorran","AE":"\xc9mirien","AF":"Afghan","AG":"Antiguayen","AL":"Albanais","AM":"Arm\xe9nien","AO":"Angolais","AR":"Argentin","AT":"Autrichien","AU":"Australien","AX":"\xceles Aland","AZ":"Azerba\xefdjanais","BA":"Bosnien","BB":"Barbadien","BD":"Bangladais","BE":"Belge","BF":"Burkinab\xe9","BG":"Bulgare","BH":"Bahre\xefnien","BI":"Burundais","BJ":"B\xe9ninois","BL":"Saint-Barth\xe9lemy","BM":"Bermudien","BN":"Brun\xe9ien","BO":"Bolivien","BQ":"Pays-Bas Carib\xe9ens","BR":"Br\xe9silien","BS":"Bahamien","BT":"Bhoutanais","BV":"\xcele Bouvet","BW":"Botswanais","BY":"Bi\xe9lorusse","BZ":"B\xe9lizien","CA":"Canadien","CC":"\xceles Cocos","CD":"Congolais (R\xe9publique d\xe9mocratique du Congo)","CF":"Centrafricain","CG":"Congolais (R\xe9publique du Congo)","CH":"Suisse","CI":"Ivoirien","CK":"\xceles Cook","CL":"Chilien","CM":"Camerounais","CN":"Chinois","CO":"Colombien","CR":"Costaricain","CU":"Cubain","CV":"Cap verdien","CW":"Curacien","CX":"L\'\xeele Christmas","CY":"Chypriote","CZ":"Tch\xe8que","DE":"Allemand","DJ":"Djiboutien","DK":"Danois","DM":"Dominicain (Dominique)","DO":"Dominicain (R\xe9publique dominicaine)","DZ":"Alg\xe9rien","EC":"\xc9quatorien","EE":"Estonien","EG":"\xc9gyptien","EH":"Sahara Occidental","ER":"\xc9rythr\xe9en","ES":"Espagnol","ET":"\xc9thiopien","FI":"Finlandais","FJ":"Fidjien","FK":"Malouin","FM":"Micron\xe9sien","FO":"F\xe9ro\xefen","FR":"Fran\xe7ais","GA":"Gabonais","GB":"Britannique","GD":"Grenadien","GE":"G\xe9orgien","GF":"Fran\xe7ais (Guyane)","GG":"Guernesiais","GH":"Ghan\xe9en","GI":"Gibraltariens","GL":"Groenlandais","GM":"Gambien","GN":"Guin\xe9en","GP":"Guadeloup\xe9en","GQ":"\xc9quato-guin\xe9en","GR":"Grec","GS":"G\xe9orgie du Sud et les \xeeles Sandwich du Sud","GT":"Guat\xe9malt\xe8que","GU":"Guam","GW":"Bissaoguin\xe9en","GY":"Guyanais","HK":"Hongkongais","HM":"\xceles Heard-et-MacDonald","HN":"Hondurien","HR":"Croate","HT":"Ha\xeftien","HU":"Hongrois","ID":"Indon\xe9sien","IE":"Irlandais","IL":"Isra\xe9lien","IM":"\xcele de Man","IN":"Indien","IO":"Territoire britannique de l\'oc\xe9an Indien","IQ":"Irakien","IR":"Iranien","IS":"Islandais","IT":"Italien","JE":"Jersiais","JM":"Jama\xefquain","JO":"Jordanien","JP":"Japonais","KE":"K\xe9nyan","KG":"Kirghiz","KH":"Cambodgien","KI":"Kiribatiens","KM":"Comorien","KN":"Afro-Kittitien et Afro-Nevisien","KP":"Nord cor\xe9en","KR":"Sud cor\xe9en","KW":"Kowe\xeftien","KY":"Ca\xefmanien","KZ":"Kazakhstanais","LA":"Laotien","LB":"Libanais","LC":"Saint-Lucien","LI":"Liechtensteinois","LK":"Sri Lankais","LR":"Liberian","LS":"Mosotho","LT":"Lituanien","LU":"Luxembourgeois","LV":"Letton","LY":"Libyen","MA":"Marocain","MC":"Mon\xe9gasque","MD":"Moldave","ME":"Mont\xe9n\xe9grin","MF":"Saint-Martinois (France)","MG":"Malgache","MH":"Marshallais","MK":"Mac\xe9donien","ML":"Malien","MM":"Birman","MN":"Mongol","MO":"Macan\xe9en","MP":"\xceles Mariannes du Nord","MQ":"Martiniquais","MR":"Mauritanien","MS":"Montserratien","MT":"Maltais","MU":"Mauricien","MV":"Maldivien","MW":"Malawien","MX":"Mexicain","MY":"Malaisien","MZ":"Mozambicain","NA":"Namibien","NC":"N\xe9o-Cal\xe9donien","NE":"Nig\xe9rien","NF":"Norfolkais","NG":"Nig\xe9rian","NI":"Nicaraguayen","NL":"N\xe9erlandais","NO":"Norv\xe9gien","NP":"N\xe9palais","NR":"Nauruan","NU":"Niu\xe9en","NZ":"N\xe9o-Z\xe9landais","OM":"Omanais","PA":"Panam\xe9en","PE":"P\xe9ruvien","PF":"Fran\xe7ais (Polyn\xe9sie fran\xe7aise)","PG":"Papouasien","PH":"Philippin","PK":"Pakistanais","PL":"Polonais","PM":"Saint-Pierrais ou Miquelonais","PN":"\xceles Pitcairn","PR":"Portoricain","PS":"Territoires Palestiniens, Occup\xe9s","PT":"Portugais","PW":"Palauan","PY":"Paraguayen","QA":"Qatarien","RE":"R\xe9unionnais","RO":"Roumain","RS":"Serbe","RU":"Russe","RW":"Rwandais","SA":"Saoudien","SB":"Salomonais","SC":"Seychellois","SD":"Soudanais","SE":"Su\xe9dois","SG":"Singapourien","SH":"Sainte H\xe9l\xe8ne","SI":"Slov\xe8ne","SJ":"Svalbard et Jan Mayen","SK":"Slovaque","SL":"Sierra L\xe9onais","SM":"Saint-Marinais","SN":"S\xe9n\xe9galais","SO":"Somalien","SR":"Surinamais","SS":"Sud-Soudanais","ST":"Santom\xe9en","SV":"Salvadorien","SX":"Saint-Martinois (Pays-Bas)","SY":"Syrien","SZ":"Swazi","TC":"\xceles Turques-et-Ca\xefques","TD":"Tchadien","TF":"Fran\xe7ais (TAAF)","TG":"Togolais","TH":"Tha\xeflandais","TJ":"Tadjik","TK":"Tok\xe9laou","TL":"Est-Timorais","TM":"Turkm\xe8ne","TN":"Tunisien","TO":"Tongien","TR":"Turc","TT":"Trinidadien ou Tobagonien","TV":"Tuvalais","TW":"Ta\xefwanais","TZ":"Tanzanien","UA":"Ukrainien","UG":"Ougandais","UM":"\xceles mineures \xe9loign\xe9es des \xc9tats-Unis","US":"Am\xe9ricain","UY":"Uruguayen","UZ":"Ouzbek","VA":"Saint-Si\xe8ge (\xc9tat de la cit\xe9 du Vatican)","VC":"Vincentais","VE":"V\xe9n\xe9zu\xe9lien","VG":"\xceles Vierges Britanniques","VI":"\xceles Vierges Am\xe9ricaines","VN":"Vietnamien","VU":"Vanuatais","WF":"Gallois","WS":"Samoan","YE":"Y\xe9m\xe9nite","YT":"Mahorais","ZA":"Sud Africain","ZM":"Zambien","ZW":"Zimbabw\xe9en"},"countries":{"AD":"Andorre","AE":"\xc9mirats Arabes Unis","AF":"Afghanistan","AG":"Antigua-et-Barbuda","AL":"Albanie","AM":"Arm\xe9nie","AO":"Angola","AR":"Argentine","AT":"Autriche","AU":"Australie","AX":"\xc5land","AZ":"Azerba\xefdjan","BA":"Bosnie-Herz\xe9govine","BB":"Barbade","BD":"Bangladesh","BE":"Belgique","BF":"Burkina Faso","BG":"Bulgarie","BH":"Bahre\xefn","BI":"Burundi","BJ":"B\xe9nin","BL":"Saint-Barth\xe9lemy","BM":"Bermudes","BN":"Brunei Darussalam","BO":"Bolivie","BQ":"Bonaire, Saint-Eustache et Saba","BR":"Br\xe9sil","BS":"Bahamas","BT":"Bhoutan","BV":"\xcele Bouvet","BW":"Botswana","BY":"Bi\xe9lorussie","BZ":"Belize","CA":"Canada","CC":"\xceles Cocos","CD":"R\xe9publique d\xe9mocratique du Congo","CF":"R\xe9publique Centrafricaine","CG":"R\xe9publique du Congo","CH":"Suisse","CI":"C\xf4te-d\'Ivoire","CK":"\xceles Cook","CL":"Chili","CM":"Cameroun","CN":"Chine","CO":"Colombie","CR":"Costa Rica","CU":"Cuba","CV":"Cap-Vert","CW":"Cura\xe7ao","CX":"\xcele Christmas","CY":"Chypre","CZ":"R\xe9publique Tch\xe8que","DE":"Allemagne","DJ":"Djibouti","DK":"Danemark","DM":"Dominique","DO":"R\xe9publique Dominicaine","DZ":"Alg\xe9rie","EC":"\xc9quateur","EE":"Estonie","EG":"\xc9gypte","EH":"Sahara occidental","ER":"\xc9rythr\xe9e","ES":"Espagne","ET":"\xc9thiopie","FI":"Finlande","FJ":"Fidji","FK":"\xceles Malouines","FM":"Micron\xe9sie","FO":"\xceles F\xe9ro\xe9","FR":"France","GA":"Gabon","GB":"Royaume-Uni","GD":"Grenade","GE":"G\xe9orgie","GF":"Guyane fran\xe7aise","GG":"Guernesey","GH":"Ghana","GI":"Gibraltar","GL":"Groenland","GM":"Gambie","GN":"Guin\xe9e","GP":"Guadeloupe","GQ":"Guin\xe9e \xe9quatoriale","GR":"Gr\xe8ce","GS":"G\xe9orgie du Sud-et-les \xceles Sandwich du Sud","GT":"Guatemala","GU":"Guam","GW":"Guin\xe9e-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"\xceles Heard-et-MacDonald","HN":"Honduras","HR":"Croatie","HT":"Ha\xefti","HU":"Hongrie","ID":"Indon\xe9sie","IE":"Irlande","IL":"Isra\xebl","IM":"\xcele de Man","IN":"Inde","IO":"Oc\xe9an Indien Britannique","IQ":"Irak","IR":"Iran","IS":"Islande","IT":"Italie","JE":"Jersey","JM":"Jama\xefque","JO":"Jordanie","JP":"Japon","KE":"Kenya","KG":"Kirghizistan","KH":"Cambodge","KI":"Kiribati","KM":"Comores","KN":"Saint-Christophe-et-Ni\xe9v\xe8s","KP":"Cor\xe9e du Nord","KR":"Cor\xe9e du Sud","KW":"Kowe\xeft","KY":"\xceles Ca\xefmans","KZ":"Kazakhstan","LA":"Laos","LB":"Liban","LC":"Sainte-Lucie","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Lib\xe9ria","LS":"Lesotho","LT":"Lituanie","LU":"Luxembourg","LV":"Lettonie","LY":"Libye","MA":"Maroc","MC":"Monaco","MD":"Moldavie","ME":"Mont\xe9n\xe9gro","MF":"Saint-Martin (partie fran\xe7aise)","MG":"Madagascar","MH":"\xceles Marshall","MK":"Mac\xe9doine du Nord","ML":"Mali","MM":"Myanmar","MN":"Mongolie","MO":"Macao","MP":"\xceles Mariannes du Nord","MQ":"Martinique","MR":"Mauritanie","MS":"Montserrat","MT":"Malte","MU":"Maurice","MV":"Maldives","MW":"Malawi","MX":"Mexique","MY":"Malaisie","MZ":"Mozambique","NA":"Namibie","NC":"Nouvelle-Cal\xe9donie","NE":"Niger","NF":"\xcele Norfolk","NG":"Nig\xe9ria","NI":"Nicaragua","NL":"Pays-Bas","NO":"Norv\xe8ge","NP":"N\xe9pal","NR":"Nauru","NU":"Niu\xe9","NZ":"Nouvelle-Z\xe9lande","OM":"Oman","PA":"Panama","PE":"P\xe9rou","PF":"Polyn\xe9sie fran\xe7aise","PG":"Papouasie-Nouvelle-Guin\xe9e","PH":"Philippines","PK":"Pakistan","PL":"Pologne","PM":"Saint-Pierre-et-Miquelon","PN":"\xceles Pitcairn","PR":"Porto Rico","PS":"Palestine","PT":"Portugal","PW":"Palaos","PY":"Paraguay","QA":"Qatar","RE":"R\xe9union","RO":"Roumanie","RS":"Serbie","RU":"Russie","RW":"Rwanda","SA":"Arabie Saoudite","SB":"\xceles Salomon","SC":"Seychelles","SD":"Soudan","SE":"Su\xe8de","SG":"Singapour","SH":"Sainte-H\xe9l\xe8ne","SI":"Slov\xe9nie","SJ":"Svalbard et \xcele Jan Mayen","SK":"Slovaquie","SL":"Sierra Leone","SM":"Saint-Marin","SN":"S\xe9n\xe9gal","SO":"Somalie","SR":"Suriname","SS":"Soudan du Sud","ST":"S\xe3o Tom\xe9-et-Principe","SV":"El Salvador","SX":"Saint-Martin (partie n\xe9erlandaise)","SY":"Syrie","SZ":"Royaume d\'Eswatini","TC":"\xceles Turques-et-Ca\xefques","TD":"Tchad","TF":"Terres australes fran\xe7aises","TG":"Togo","TH":"Tha\xeflande","TJ":"Tadjikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkm\xe9nistan","TN":"Tunisie","TO":"Tonga","TR":"Turquie","TT":"Trinit\xe9-et-Tobago","TV":"Tuvalu","TW":"Ta\xefwan","TZ":"R\xe9publique unie de Tanzanie","UA":"Ukraine","UG":"Ouganda","UM":"\xceles mineures \xe9loign\xe9es des \xc9tats-Unis","US":"\xc9tats-Unis d\'Am\xe9rique","UY":"Uruguay","UZ":"Ouzb\xe9kistan","VA":"Saint-Si\xe8ge (Vatican)","VC":"Saint-Vincent-et-les-Grenadines","VE":"Venezuela","VG":"\xceles vierges britanniques","VI":"\xceles vierges am\xe9ricaines","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis-et-Futuna","WS":"Samoa","YE":"Y\xe9men","YT":"Mayotte","ZA":"Afrique du Sud","ZM":"Zambie","ZW":"Zimbabwe"}}')},28330:function(e){"use strict";e.exports=JSON.parse('{"country":{"foreign":"Foreign"},"Scan":{"scan_a_doc":"Scan a doc","save_doc":"Save the doc","filename":"Filename","save":"Save","cancel":"Cancel","qualify":"Describe","apply":"Apply","error":{"offline":"You are currently offline and you can\'t use this functionality. Please, try again later.","uploading":"You are already uploading a file. Please wait until the end of this upload and try again.","generic":"Something went wrong. Please try again."},"successful":{"qualified_ok":"You just have successfully described your file! "},"items":{"accommodation_proof":"Proof of accommodation |||| Proof of accommodations","appliance_invoice":"Appliance invoice |||| Appliance invoices","bank_details":"Bank detail |||| Bank details","bank_statement":"Bank statement |||| Bank statements","birth_certificate":"Birth certificate |||| Birth certificates","building_permit":"Building permit |||| Building permits","caf":"Social benefit rate |||| Social benefit rates","car_insurance":"Car insurance certificate |||| Car insurance certificates","citizen_registration_certificate":"Certificate of citizen registration |||| Certificates of citizen registration","condition_report":"Condition report |||| Condition reports","diploma":"Diploma |||| Diplomas","divorce":"Divorce |||| Divorces","driver_license":"Driving license |||| Driving licenses","electoral_card":"Electoral card |||| Electoral cards","employment_center_certificate":"Employment center certificate |||| Employment center certificates","energy_contract":"Energy provider contract |||| Energy provider contracts","energy_invoice":"Energy invoice |||| Energy invoices","expense_claim":"Expense claim |||| Expense claims","family_record_book":"Family record book |||| Family record books","family":"Family","fidelity_card":"Benefit card |||| Benefit cards","fine":"Fine |||| Fines","gradebook":"Gradebook |||| Gradebooks","grocery_invoice":"Grocery invoice |||| Grocery invoices","health_book":"Health book |||| Health books","health_certificate":"Health/Vaccination certificate |||| Health/Vaccination certificates","health_insurance_card":"Insurance card |||| Insurance cards","health_invoice":"Health invoice |||| Health invoices","health":"Health","home":"Home","house_insurance":"Home insurance |||| Home insurances","house_sale_agreeement":"House sale agreement |||| House sale agreements","identity_photo":"Identity photo |||| Identity photos","identity":"Identity","invoice":"Invoice |||| Invoices","isp_invoice":"ISP invoice |||| ISP invoices","large_family_card":" Large Family Card |||| Large Family Cards","lease":"Lease |||| Leases","loan_agreement":"Loan agreement |||| Loan agreements","mechanic_invoice":"Repair bill |||| Repair bills","motivation_letter":"Motivation letter |||| Motivation letters","national_health_insurance_card":"National health insurance card |||| National health insurance cards","national_health_insurance_right_certificate":"National health insurance right certificate |||| National health insurance right certificates","national_id_card":"ID card |||| ID cards","note_identity_document":"Note Identity |||| Notes Identity","note_family_document":"Note Family |||| Notes Family","note_work_document":"Note Work & Study |||| Notes Work & Study","note_health_document":"Note Health |||| Notes Health","note_house_document":"Note Home |||| Notes Home","note_transport_document":"Note Transport |||| Notes Transport","note_activity_document":"Note Activities |||| Notes Activities","note_finance":"Note Finance |||| Notes Finance","note_invoice":"Note Invoice |||| Notes Invoice","other_activity_document":"Other activities document |||| Other activities documents","other_bank_document":"Other financial document |||| Other financial documents","other_family_document":"Other family document |||| Other family documents","other_health_document":"Other health document |||| Other health documents","other_house_document":"Other house document |||| Other house documents","other_identity_document":"Other document of identity |||| Other documents of identity","other_invoice":"Other invoice |||| Other invoices","other_revenue":"Other revenue |||| Other revenues","other_tax_document":"Other tax document |||| Other tax documents","other_transport_document":"Other transport document |||| Other transport documents","other_work_document":"Other work document |||| Other work documents","other_administrative_document":"Other administrative document |||| Other administrative documents","others":"Others","pacs":"Civil union |||| Civil unions","passport":"Passeport |||| Passeports","pay_sheet":"Pay sheet |||| Pay sheets","payment_proof_family_allowance":"family allowance payment proof |||| family allowance payment proofs","pension":"Pension |||| Pensions","person_insurance":"Individual insurance certificate |||| Individual insurance certificates","personal_sporting_licence":"Sporting licence |||| Sporting licences","phone_invoice":"Phone invoice |||| Phone invoices","pregnancy_medical_certificate":"Certificate of pregnancy |||| Certificates of pregnancy","prescription":"Prescription |||| Prescriptions","real_estate_insurance":"Real estate insurance certificate |||| Real estate insurance certificates","real_estate_tax":"Real estate tax |||| Real estate taxes","receipt":"Receipt |||| Receipts","rent_receipt":"Rent receipt |||| Rent receipts","residence_permit":"Residence permit |||| Residence permits","restaurant_invoice":"Restaurant invoice |||| Restaurant invoices","resume":"Resume |||| Resumes","school_attendance_certificate":"Certificate of school attendance |||| Certificates of school attendance","school_insurance_certificate":"Certificate of school insurance |||| Certificates of school insurance","single_parent_benefit":"Single parent benefit |||| Single parent benefits","student_card":"Student card |||| Student cards","tax_certificate":"Tax certificate |||| Tax certificates","tax_notice":"Tax notice |||| Tax notices","tax_return":"Tax return |||| Tax returns","tax_timetable":"Payment Plans Installment Agreement |||| Payment Plans Installment Agreements","technical_diagnostic_record":"Technical diagnostic record |||| Technical diagnostic records","telecom_invoice":"Telecom invoice |||| Telecom invoices","transport_card":"Transport card |||| Transport cards","transport_invoice":"Transport invoice |||| Transport invoices","transport":"Transport","unemployment_benefit":"Unemployment benefit |||| Unemployment benefits","unfit_for_habitation_declaration":"Declaration of unfit for habitation |||| Declarations of unfit for habitation","vehicle_registration":"Vehicle registration |||| Vehicle registrations","water_invoice":"Water invoice |||| Water invoices","web_service_invoice":"Web service invoice |||| Web service invoices","wedding":"Wedding contract |||| Wedding contracts","work_contract":"Work contract |||| Work contracts","work_disability_recognition":"Recognition of disability |||| Recognitions of disability","work_invoice":"Work invoice |||| Work invoices","work_quote":"Work quote |||| Work quotes","work_study":"Work & Study"},"attributes":{"contractType":{"cdi":"CDI","cdd":"CDD","alternate":"Alternate","internship":"Internship","other":"Other"},"noticePeriod":{"oneWeek":"1 week before","oneMonth":"1 month before","threeMonth":"3 months before","oneYear":"1 year before","custom":"Custom","noAlert":"Do not be alerted"}},"themes":{"none":"None","activity":"Activities","family":"Family","finance":"Finance","health":"Health","home":"Home","identity":"Identity","invoice":"Invoice","others":"Others","transport":"Transport","undefined":"Undefined","work_study":"Work & Study"},"expiration":{"expired":"Expired","expiresIn":"Expires in %{duration}","description":"This document expires in %{duration}, consider renewing it"},"qualification":{"date":{"title":{"datetime":"Added on","AObtentionDate":"License A, delivered on","BObtentionDate":"License B, delivered on","CObtentionDate":"License C, delivered on","DObtentionDate":"License D, delivered on","issueDate":"Delivered on","expirationDate":"Expiration date","referencedDate":"Referenced date","shootingDate":"Shooting date","obtentionDate":"Date obtained","date":"Document date"}},"information":{"title":{"fine":{"number":"Amount of the fine"},"fidelity_card":{"number":"Card number"},"caf":{"number":"CAF file number"},"payment_proof_family_allowance":{"number":"CAF file number"},"vehicle":{"licenseNumber":"Vehicle registration number","confidentialNumber":"Confidential vehicle registration code"},"vehicle_registration":{"number":"Vehicle registration number (VIN)"},"national_id_card":{"number":"National ID card number"},"bank_details":{"number":"IBAN number"},"passport":{"number":"Passport number"},"driver_license":{"number":"License number"},"residence_permit":{"number":"License number"},"national_health_insurance_card":{"number":"National health insurance card number"},"pay_sheet":{"number":"Gross remuneration"},"tax_return":{"number":"Reference tax number"},"tax_notice":{"number":"Reference tax number"},"real_estate_tax":{"number":"Reference tax number"},"tax_timetable":{"number":"Reference tax number"},"country":"Document issuing country","refTaxIncome":"Reference tax income","contractType":"Contract type","noticePeriod":"Expiration alert","netSocialAmount":"Net social amount","employerName":"Name of employer","employer":"Name of employer","amount":"Amount of expenditure","subtype":"Purpose of expenditure","bicNumber":"BIC number"},"day":"day |||| days"},"contact":"Owner","page":"Side of the document","front":"Front side","back":"Back side","qualification":"Qualification","noInfo":"No information"}},"MagicFolders":{"administrative":"Administrative","photos":"Photos"}}')},6765:function(e){"use strict";e.exports=JSON.parse('{"country":{"foreign":"\xc9tranger"},"Scan":{"scan_a_doc":"Num\xe9riser un doc","save_doc":"Enregistrer le document","filename":"Nom du fichier","save":"Sauvegarder","cancel":"Annuler","qualify":"Qualifier","apply":"Appliquer","error":{"offline":"Vous \xeates actuellement d\xe9connect\xe9, vous ne pouvez donc pas utiliser cette fonctionnalit\xe9. Connectez-vous \xe0 internet et recommencez. ","uploading":"Vous avez d\xe9j\xe0 un fichier en cours de t\xe9l\xe9chargement. Attendez la fin et recommencez.","generic":"Un probl\xe8me est survenu. Veuillez r\xe9essayer. "},"successful":{"qualified_ok":"Vous venez de qualifier votre fichier avec succ\xe8s !"},"items":{"accommodation_proof":"Attestation d\'h\xe9bergement |||| Attestations d\'h\xe9bergement","appliance_invoice":"Facture d\'\xe9lectrom\xe9nager |||| Factures d\'\xe9lectrom\xe9nager","bank_details":"RIB","bank_statement":"Relev\xe9 de compte |||| Relev\xe9s de compte","birth_certificate":"Acte de naissance |||| Actes de naissance","building_permit":"Permis de construire","caf":"Attestation de quotient familial CAF |||| Attestations de quotient familial CAF","car_insurance":"Attestation d\'assurance auto |||| Attestations d\'assurance auto","citizen_registration_certificate":"Attestation de recensement citoyen |||| Attestations de recensement citoyen","condition_report":"\xc9tat des lieux - Entr\xe9e/Sortie |||| \xc9tats des lieux - Entr\xe9e/Sortie","diploma":"Dipl\xf4me |||| Dipl\xf4mes","divorce":"Attestation de divorce |||| Attestations de divorce","driver_license":"Permis de conduire","electoral_card":"Carte \xe9lectorale |||| Cartes \xe9lectorales","employment_center_certificate":"Attestation de France Travail |||| Attestations de France Travail","energy_contract":"Contrat de fournisseur d\'\xe9nergies |||| Contrats de fournisseur d\'\xe9nergies","energy_invoice":"Facture d\'\xe9nergie |||| Factures d\'\xe9nergie","expense_claim":"Note de frais |||| Notes de frais","family_record_book":"Livret de famille |||| Livrets de famille","family":"Famille","fidelity_card":"Carte avantage |||| Cartes avantages","fine":"Amende |||| Amendes","gradebook":"Bulletin de notes |||| Bulletins de notes","grocery_invoice":"Facture de courses |||| Factures de courses","health_book":"Carnet de sant\xe9 |||| Carnets de sant\xe9","health_certificate":"Certificat de sant\xe9/vaccination |||| Certificats de sant\xe9/vaccination","health_insurance_card":"Carte de mutuelle |||| Cartes de mutuelle","health_invoice":"Facture m\xe9dicale |||| Factures m\xe9dicales","health":"Sant\xe9","home":"Logement","house_insurance":"Assurance logement |||| Assurances logement","house_sale_agreeement":"Compromis de vente","identity_photo":"Photo d\'identit\xe9 |||| Photos d\'identit\xe9","identity":"Identit\xe9","invoice":"Facture |||| Factures","isp_invoice":"Facture d\'internet |||| Factures d\'internet","large_family_card":"Carte famille nombreuse |||| Cartes famille nombreuse","lease":"Bail |||| Baux","loan_agreement":"Contrat de pr\xeat |||| Contrats de pr\xeat","mechanic_invoice":"Facture de r\xe9paration |||| Factures de r\xe9paration","motivation_letter":"Lettre de motivation |||| Lettres de motivation","national_health_insurance_card":"Carte vitale |||| Cartes vitales","national_health_insurance_right_certificate":"Attestation de droits de l\'Assurance Maladie |||| Attestations de droits de l\'Assurance Maladie","national_id_card":"Carte d\'identit\xe9 |||| Cartes d\'identit\xe9","note_identity_document":"Note Identit\xe9 |||| Notes Identit\xe9","note_family_document":"Note Famille |||| Notes Famille","note_work_document":"Note Travail & \xc9tudes |||| Notes Travail & \xc9tudes","note_health_document":"Note Sant\xe9 |||| Notes Sant\xe9","note_house_document":"Note Logement |||| Notes Logement","note_transport_document":"Note Transport |||| Notes Transport","note_activity_document":"Note Activit\xe9s & loisirs |||| Notes Activit\xe9s & loisirs","note_finance":"Note Finances |||| Notes Finances","note_invoice":"Note Factures |||| Notes Factures","other_activity_document":"Autre document de loisirs |||| Autres documents de loisirs","other_bank_document":"Autre document financier |||| Autres documents financiers","other_family_document":"Autre document de famille |||| Autres documents de famille","other_health_document":"Autre document de sant\xe9 |||| Autres documents de sant\xe9","other_house_document":"Autre document de logement |||| Autres documents de logement","other_identity_document":"Autre document d\'identit\xe9 |||| Autres documents d\'identit\xe9","other_invoice":"Autre facture |||| Autres factures","other_revenue":"Autre revenu |||| Autres revenus","other_tax_document":"Imp\xf4ts - Autre document |||| Imp\xf4ts - Autres documents","other_transport_document":"Autre document de transport |||| Autres documents de transport","other_work_document":"Autre document de travail |||| Autres documents de travail","other_administrative_document":"Autre document administratif |||| Autres documents administratifs","others":"Autres","pacs":"Attestation de PACS |||| Attestations de PACS","passport":"Passeport |||| Passeports","pay_sheet":"Fiche de paie |||| Fiches de paie","payment_proof_family_allowance":"Attestation de paiement CAF |||| Attestations de paiement CAF","pension":"Retraite |||| Retraites","person_insurance":"Attestation d\'assurance individuelle |||| Attestations d\'assurance individuelle","personal_sporting_licence":"Licence sportive |||| Licences sportives","phone_invoice":"Facture de t\xe9l\xe9phone |||| Factures de t\xe9l\xe9phone","pregnancy_medical_certificate":"Certificat de grossesse |||| Certificats de grossesse","prescription":"Ordonnance |||| Ordonnances","real_estate_insurance":"Attestation d\'assurance immobili\xe8re |||| Attestations d\'assurance immobili\xe8re","real_estate_tax":"Imp\xf4ts - Taxe fonci\xe8re |||| Imp\xf4ts - Taxes fonci\xe8res","receipt":"Accus\xe9 de r\xe9ception |||| Accus\xe9s de r\xe9ception","rent_receipt":"Quittance de loyer |||| Quittances de loyer","residence_permit":"Titre de s\xe9jour |||| Titres de s\xe9jour","restaurant_invoice":"Facture de restaurant |||| Factures de restaurant","resume":"CV","school_attendance_certificate":"Certificat de scolarit\xe9 |||| Certificats de scolarit\xe9","school_insurance_certificate":"Attestation d\'assurance scolaire |||| Attestations d\'assurance scolaire","single_parent_benefit":"Allocation parent isol\xe9 |||| Allocations parent isol\xe9","student_card":"Carte d\'\xe9tudiant |||| Cartes d\'\xe9tudiant","tax_certificate":"Attestation fiscale |||| Attestations fiscales","tax_notice":"Imp\xf4ts - Avis d\'imposition","tax_return":"Imp\xf4ts - D\xe9claration de revenus |||| Imp\xf4ts - D\xe9clarations de revenus","tax_timetable":"Imp\xf4ts - Ech\xe9ancier |||| Imp\xf4ts - Ech\xe9anciers","technical_diagnostic_record":"Dossier de diagnostic technique |||| Dossiers de diagnostic technique","telecom_invoice":"Facture de t\xe9l\xe9com |||| Factures de t\xe9l\xe9com","transport_card":"Carte de transport |||| Cartes de transport","transport_invoice":"Facture de transport |||| Factures de transport","transport":"Transport","unemployment_benefit":"Allocation ch\xf4mage |||| Allocations ch\xf4mage","unfit_for_habitation_declaration":"Arr\xeat\xe9 d\'insalubrit\xe9 |||| Arr\xeat\xe9s d\'insalubrit\xe9","vehicle_registration":"Carte grise |||| Cartes grises","water_invoice":"Facture d\'eau |||| Factures d\'eau","web_service_invoice":"Facture de service web |||| Factures de service web","wedding":"Contrat de mariage |||| Contrats de mariage","work_contract":"Contrat de travail |||| Contrats de travail","work_disability_recognition":"Reconnaissance de handicap - RQTH |||| Reconnaissances de handicap - RQTH","work_invoice":"Facture de travaux |||| Factures de travaux","work_quote":"Devis de travaux","work_study":"Travail & \xc9tudes"},"attributes":{"contractType":{"cdi":"CDI","cdd":"CDD","alternate":"Alternance","internship":"Stage","other":"Autre"},"noticePeriod":{"oneWeek":"1 semaine avant","oneMonth":"1 mois avant","threeMonth":"3 mois avant","oneYear":"1 an avant","custom":"Personnalis\xe9","noAlert":"Ne pas \xeatre alert\xe9"}},"themes":{"none":"Aucun","activity":"Activit\xe9s & loisirs","family":"Famille","finance":"Finances","health":"Sant\xe9","home":"Logement","identity":"Identit\xe9","invoice":"Factures","others":"Autres","transport":"Transport","undefined":"Ind\xe9fini","work_study":"Travail & \xc9tudes"},"expiration":{"expired":"Expir\xe9","expiresIn":"Expire dans %{duration}","description":"Ce document expire dans %{duration}, pensez \xe0 le renouveler"},"qualification":{"date":{"title":{"datetime":"Ajout\xe9 le","AObtentionDate":"Permis A, d\xe9livr\xe9 le","BObtentionDate":"Permis B, d\xe9livr\xe9 le","CObtentionDate":"Permis C, d\xe9livr\xe9 le","DObtentionDate":"Permis D, d\xe9livr\xe9 le","issueDate":"D\xe9livr\xe9 le","expirationDate":"Date d\'expiration","referencedDate":"Date de r\xe9f\xe9rence","shootingDate":"Date de prise de vue","obtentionDate":"Date d\'obtention","date":"Date du document"}},"information":{"title":{"fine":{"number":"Montant de l\'amende"},"fidelity_card":{"number":"Num\xe9ro de la carte"},"caf":{"number":"Num\xe9ro de dossier CAF"},"payment_proof_family_allowance":{"number":"Num\xe9ro de dossier CAF"},"vehicle":{"licenseNumber":"Num\xe9ro d\'immatriculation","confidentialNumber":"Code confidentiel de la carte grise"},"vehicle_registration":{"number":"Num\xe9ro de la carte grise (VIN)"},"national_id_card":{"number":"Num\xe9ro de la carte d\'identit\xe9"},"bank_details":{"number":"Num\xe9ro d\'IBAN"},"passport":{"number":"Num\xe9ro du passeport"},"driver_license":{"number":"Num\xe9ro du permis"},"residence_permit":{"number":"Num\xe9ro du permis"},"national_health_insurance_card":{"number":"Num\xe9ro de s\xe9curit\xe9 sociale"},"pay_sheet":{"number":"R\xe9mun\xe9ration brute"},"tax_return":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"tax_notice":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"real_estate_tax":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"tax_timetable":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"country":"Pays \xe9metteur du document","refTaxIncome":"Revenu fiscal de r\xe9f\xe9rence","contractType":"Type de contrat","noticePeriod":"Alerte d’expiration","netSocialAmount":"Montant net social","employerName":"Nom de l\'employeur","employer":"Nom de l\'employeur","amount":"Montant de la d\xe9pense","subtype":"Objet de la d\xe9pense","bicNumber":"Num\xe9ro BIC"},"day":"jour |||| jours"},"contact":"Titulaire","page":"Face du document","front":"Face avant","back":"Face arri\xe8re","qualification":"Qualification","noInfo":"Non renseign\xe9(e)"}},"MagicFolders":{"administrative":"Administratif","photos":"Photos"}}')},5825:function(e){"use strict";e.exports=JSON.parse('{"qualifications":[{"label":"identity_photo","purpose":"attestation","subjects":["identity"]},{"label":"national_id_card","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity"]},{"label":"passport","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity"]},{"label":"residence_permit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"immigration","subjects":["permit","identity"]},{"label":"family_record_book","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"birth_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["identity","family"]},{"label":"driver_license","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"transport","subjects":["permit","driving"]},{"label":"other_identity_document","purpose":"attestation","subjects":["identity"]},{"label":"wedding","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"pacs","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"divorce","purpose":"contract","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["family"]},{"label":"large_family_card","purpose":"attestation","sourceCategory":"transport","subjects":["right"]},{"label":"caf","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"family","subjects":["right"]},{"label":"other_family_document","subjects":["family"]},{"label":"diploma","purpose":"attestation","sourceCategory":"education","subjects":["achievement"]},{"label":"work_contract","purpose":"contract","sourceCategory":"employer","subjects":["work","employment"]},{"label":"pay_sheet","purpose":"attestation","sourceCategory":"employer","subjects":["work","revenues"]},{"label":"fidelity_card","sourceCategory":"shopping"},{"label":"single_parent_benefit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"family","subjects":["revenues"]},{"label":"transport_card","sourceCategory":"transport","subjects":["vehicule"]},{"label":"electoral_card","sourceCategory":"gov"},{"label":"employment_center_certificate","purpose":"attestation","sourceCategory":"gov","subjects":["employment"]},{"label":"unemployment_benefit","purpose":"attestation","sourceCategory":"gov","subjects":["revenues"]},{"label":"pension","purpose":"attestation","sourceCategory":"gov","subjects":["revenues"]},{"label":"other_revenue","purpose":"attestation","subjects":["revenues"]},{"label":"gradebook","purpose":"report","sourceCategory":"education","subjects":["history"]},{"label":"student_card","purpose":"attestation","sourceCategory":"education","subjects":["identity","right","employment","education"]},{"label":"resume","purpose":"description","subjects":["employment"]},{"label":"motivation_letter","purpose":"description","subjects":["employment"]},{"label":"other_work_document","purpose":"employment"},{"label":"health_book","purpose":"attestation","sourceCategory":"health","subjects":["capacity","vaccine"]},{"label":"health_certificate","purpose":"attestation","sourceCategory":"health","subjects":["capacity","vaccine"]},{"label":"pregnancy_medical_certificate","purpose":"attestation","sourceCategory":"health","subjects":["pregnancy"]},{"label":"work_disability_recognition","purpose":"attestation","sourceCategory":"health","subjects":["right"]},{"label":"national_health_insurance_card","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"health","subjects":["insurance"]},{"label":"national_health_insurance_right_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"health","subjects":["right","insurance"]},{"label":"health_insurance_card","purpose":"attestation","sourceCategory":"insurance","sourceSubCategory":"health","subjects":["insurance"]},{"label":"prescription","purpose":"attestation","sourceCategory":"health","subjects":["right","medecine"]},{"label":"health_invoice","purpose":"invoice","sourceCategory":"health"},{"label":"other_health_document","subjects":["health"]},{"label":"vehicle_registration","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"transport","subjects":["vehicule","identity","right"]},{"label":"car_insurance","purpose":"attestation","sourceCategory":"insurance","sourceSubCategory":"transport","subjects":["insurance","car"]},{"label":"mechanic_invoice","purpose":"invoice","sourceCategory":"transport"},{"label":"transport_invoice","purpose":"invoice","sourceCategory":"transport"},{"label":"other_transport_document","sourceCategory":"transport"},{"label":"house_sale_agreeement","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"real_estate_tax","purpose":"invoice","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["tax","house"]},{"label":"building_permit","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["permit","house"]},{"label":"technical_diagnostic_record","purpose":"report","sourceCategory":"real_estate","subjects":["compliance","house"]},{"label":"lease","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"rent_receipt","purpose":"invoice","sourceCategory":"real_estate","subjects":["house"]},{"label":"house_insurance","purpose":"contract","sourceCategory":"insurance","sourceSubCategory":"real_estate","subjects":["insurance","house"]},{"label":"work_quote","purpose":"description","sourceCategory":"building","subjects":["building","house"]},{"label":"work_invoice","purpose":"invoice","sourceCategory":"building","subjects":["building","house"]},{"label":"other_house_document","subjects":["house"]},{"label":"phone_invoice","purpose":"invoice","sourceCategory":"telecom","sourceSubCategory":"mobile"},{"label":"isp_invoice","purpose":"invoice","sourceCategory":"telecom","sourceSubCategory":"internet","subjects":["subscription"]},{"label":"telecom_invoice","purpose":"invoice","sourceCategory":"telecom"},{"label":"energy_invoice","purpose":"invoice","sourceCategory":"energy"},{"label":"water_invoice","purpose":"invoice","sourceCategory":"water"},{"label":"energy_contract","purpose":"contract","sourceCategory":"energy"},{"label":"appliance_invoice","purpose":"invoice","sourceCategory":"retail"},{"label":"web_service_invoice","purpose":"invoice","sourceCategory":"web"},{"label":"restaurant_invoice","purpose":"invoice","sourceCategory":"alimentation"},{"label":"grocery_invoice","purpose":"invoice","sourceCategory":"shopping"},{"label":"other_invoice","purpose":"invoice"},{"label":"tax_certificate","purpose":"attestation","sourceCategory":"gov","subjects":["tax"]},{"label":"tax_return","purpose":"report","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"tax_notice","purpose":"invoice","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"tax_timetable","purpose":"report","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["tax"]},{"label":"other_tax_document","subjects":["tax"]},{"label":"bank_details","purpose":"attestation","sourceCategory":"bank","subjects":["bank_account"]},{"label":"bank_statement","purpose":"report","sourceCategory":"bank","subjects":["history"]},{"label":"loan_agreement","purpose":"contract","sourceCategory":"bank"},{"label":"other_bank_document","sourceCategory":"bank"},{"label":"receipt","purpose":"report"},{"label":"payment_proof_family_allowance","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"tax","subjects":["subvention"]},{"label":"school_attendance_certificate","purpose":"attestation","sourceCategory":"education","subjects":["identity","right","education"]},{"label":"school_insurance_certificate","purpose":"attestation","sourceCategory":"education","subjects":["education","insurance"]},{"label":"unfit_for_habitation_declaration","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"real_estate","subjects":["compliance"]},{"label":"accommodation_proof","purpose":"attestation","sourceCategory":"individual","subjects":["address"]},{"label":"citizen_registration_certificate","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"civil_registration","subjects":["achievement","education"]},{"label":"personal_sporting_licence","purpose":"attestation","sourceCategory":"gov","sourceSubCategory":"sport","subjects":["permit","invoice"]},{"label":"other_activity_document","sourceSubCategory":"sport","subjects":["permit","invoice"]},{"label":"real_estate_insurance","purpose":"contract","sourceCategory":"insurance","sourceSubCategory":"real_estate","subjects":["insurance"]},{"label":"person_insurance","purpose":"contract","sourceCategory":"insurance","subjects":["insurance"]},{"label":"other_administrative_document"},{"label":"expense_claim","purpose":"invoice"},{"label":"fine","purpose":"invoice","sourceCategory":"gov"},{"label":"condition_report","purpose":"contract","sourceCategory":"real_estate","subjects":["house"]},{"label":"note_identity_document"},{"label":"note_family_document"},{"label":"note_work_document"},{"label":"note_health_document"},{"label":"note_house_document"},{"label":"note_transport_document"},{"label":"note_activity_document"},{"label":"note_finance"},{"label":"note_invoice"}],"purposeKnownValues":["attestation","contract","invoice","report","description","evaluation","employment"],"sourceCategoryKnownValues":["bank","insurance","retail","telecom","energy","water","health","gov","association","education","employer","transport","goods","alimentation","building","real_estate","web","individual","shopping"],"sourceSubCategoryKnownValues":["civil_registration","immigration","transport","family","tax","health","real_estate","mobile","internet","citizen","sport"],"subjectsKnownValues":["identity","permit","family","address","driving","right","subvention","achievement","degree","work","employment","revenues","history","insurance","medical_act","vehicule","car","moto","truck","boat","subscription","buy/sale","house","compliance","building","food","real_estate","tax","address","education","statement","course","internet","phone","vaccine","capacity","health","drugs","child","pregnancy","bank_account"]}')},16300:function(e){"use strict";e.exports=JSON.parse('{"nationalities":{"AD":"Andorran","AE":"Emirian","AF":"Afghan","AG":"Antiguans","AL":"Albanian","AM":"Armenian","AO":"Angolan","AR":"Argentinean","AT":"Austrian","AU":"Australian","AX":"\xc5land Islands","AZ":"Azerbaijani","BA":"Bosnian - Herzegovinian","BB":"Barbadian","BD":"Bangladeshi","BE":"Belgian","BF":"Burkinabe","BG":"Bulgarian","BH":"Bahraini","BI":"Burundian","BJ":"Beninese","BL":"Saint Barth\xe9lemy","BM":"Bermuda","BN":"Bruneian","BO":"Bolivian","BQ":"Bonaire, Sint Eustatius and Saba","BR":"Brazilian","BS":"Bahamian","BT":"Bhutanese","BV":"Bouvet Island","BW":"Batswana","BY":"Belarusian","BZ":"Belizean","CA":"Canadian","CC":"Cocos (Keeling) Islands","CD":"Congolese (Democratic Republic of the Congo)","CF":"Central African","CG":"Congolese (Republic of the Congo)","CH":"Swiss","CI":"Ivorian","CK":"Cook Islands","CL":"Chilean","CM":"Cameroonian","CN":"Chinese","CO":"Colombian","CR":"Costa Rican","CU":"Cuban","CV":"Cape Verdean","CW":"Cura\xe7ao","CX":"Christmas Island","CY":"Cypriot","CZ":"Czech","DE":"German","DJ":"Djibouti","DK":"Danish","DM":"Dominican (Dominica)","DO":"Dominican (Dominican Republic)","DZ":"Algerian","EC":"Ecuadorean","EE":"Estonian","EG":"Egyptian","EH":"Western Sahara","ER":"Eritrean","ES":"Spanish","ET":"Ethiopian","FI":"Finnish","FJ":"Fijian","FK":"Falkland Islands (Malvinas)","FM":"Micronesian","FO":"Faroe Islands","FR":"French","GA":"Gabonese","GB":"British","GD":"Grenadian","GE":"Georgian","GF":"French (French Guiana)","GG":"Guernsey","GH":"Ghanaian","GI":"Gibraltar","GL":"Greenland","GM":"Gambian","GN":"Guinean","GP":"Guadeloupe","GQ":"Equatorial Guinean","GR":"Greek","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemalan","GU":"Guam","GW":"Guinea-Bissauan","GY":"Guyanese","HK":"Hong Kong","HM":"Heard Island and Mcdonald Islands","HN":"Honduran","HR":"Croatian","HT":"Haitian","HU":"Hungarian","ID":"Indonesian","IE":"Irish","IL":"Israeli","IM":"Manx","IN":"Indian","IO":"British Indian Ocean Territory","IQ":"Iraqi","IR":"Iranian","IS":"Icelandic","IT":"Italian","JE":"Jersey","JM":"Jamaican","JO":"Jordanian","JP":"Japanese","KE":"Kenyan","KG":"Kyrgyz","KH":"Cambodian","KI":"I-Kiribati","KM":"Comoran","KN":"Kittian and Nevisian","KP":"North Korean","KR":"South Korean","KW":"Kuwaiti","KY":"Cayman Islands","KZ":"Kazakhstani","LA":"Laotian","LB":"Lebanese","LC":"Saint Lucian","LI":"Liechtensteiner","LK":"Sri Lankan","LR":"Liberian","LS":"Mosotho","LT":"Lithuanian","LU":"Luxembourger","LV":"Latvian","LY":"Libyan","MA":"Moroccan","MC":"Monacan","MD":"Moldovan","ME":"Montenegrin","MF":"Saint Martin (French part)","MG":"Malagasy","MH":"Marshallese","MK":"Macedonian","ML":"Malian","MM":"Burmese","MN":"Mongolian","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritanian","MS":"Montserrat","MT":"Maltese","MU":"Mauritian","MV":"Maldivan","MW":"Malawian","MX":"Mexican","MY":"Malaysian","MZ":"Mozambican","NA":"Namibian","NC":"New Caledonia","NE":"Nigerien","NF":"Norfolk Island","NG":"Nigerian","NI":"Nicaraguan","NL":"Dutch","NO":"Norwegian","NP":"Nepalese","NR":"Nauruan","NU":"Niue","NZ":"New Zealander","OM":"Omani","PA":"Panamanian","PE":"Peruvian","PF":"French (French Polynesia)","PG":"Papua New Guinea","PH":"Filipino","PK":"Pakistani","PL":"Polish","PM":"Saint Pierre and Miquelon","PN":"Pitcairn","PR":"Puerto Rico","PS":"Palestinian Territory, Occupied","PT":"Portuguese","PW":"Palauan","PY":"Paraguayan","QA":"Qatari","RE":"Reunion","RO":"Romanian","RS":"Serbian","RU":"Russian","RW":"Rwandan","SA":"Saudi","SB":"Solomon Islander","SC":"Seychellois","SD":"Sudanese","SE":"Swedish","SG":"Singaporean","SH":"Saint Helena","SI":"Slovenian","SJ":"Svalbard and Jan Mayen","SK":"Slovakian","SL":"Sierra Leonean","SM":"San Marinese","SN":"Senegalese","SO":"Somali","SR":"Surinamer","SS":"South Sudan","ST":"Sao Tomean","SV":"Salvadoran","SX":"Sint Maarten (Dutch part)","SY":"Syrian","SZ":"Swazi","TC":"Turks and Caicos Islands","TD":"Chadian","TF":"French (French Southern Territories)","TG":"Togolese","TH":"Thai","TJ":"Tajik","TK":"Tokelau","TL":"East Timorese","TM":"Turkmenistan","TN":"Tunisian","TO":"Tongan","TR":"Turkish","TT":"Trinidadian or Tobagonian","TV":"Tuvaluan","TW":"Taiwanese","TZ":"Tanzanian","UA":"Ukrainian","UG":"Ugandan","UM":"United States Minor Outlying Islands","US":"American","UY":"Uruguayan","UZ":"Uzbekistani","VA":"Holy See (Vatican City State)","VC":"Saint Vincent and the Grenadines","VE":"Venezuelan","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","VN":"Vietnamese","VU":"Vanuatu","WF":"Welsh","WS":"Samoan","YE":"Yemenite","YT":"Mayotte","ZA":"South African","ZM":"Zambian","ZW":"Zimbabwean"},"countries":{"AD":"Andorra","AE":"United Arab Emirates","AF":"Afghanistan","AG":"Antigua and Barbuda","AL":"Albania","AM":"Armenia","AO":"Angola","AR":"Argentina","AT":"Austria","AU":"Australia","AX":"\xc5land Islands","AZ":"Azerbaijan","BA":"Bosnia and Herzegovina","BB":"Barbados","BD":"Bangladesh","BE":"Belgium","BF":"Burkina Faso","BG":"Bulgaria","BH":"Bahrain","BI":"Burundi","BJ":"Benin","BL":"Saint Barth\xe9lemy","BM":"Bermuda","BN":"Brunei Darussalam","BO":"Bolivia","BQ":"Bonaire, Sint Eustatius and Saba","BR":"Brazil","BS":"Bahamas","BT":"Bhutan","BV":"Bouvet Island","BW":"Botswana","BY":"Belarus","BZ":"Belize","CA":"Canada","CC":"Cocos (Keeling) Islands","CD":"Democratic Republic of the Congo","CF":"Central African Republic","CG":"Republic of the Congo","CH":"Switzerland","CI":"Ivory Coast","CK":"Cook Islands","CL":"Chile","CM":"Cameroon","CN":"People\'s Republic of China","CO":"Colombia","CR":"Costa Rica","CU":"Cuba","CV":"Cape Verde","CW":"Cura\xe7ao","CX":"Christmas Island","CY":"Cyprus","CZ":"Czech Republic","DE":"Germany","DJ":"Djibouti","DK":"Denmark","DM":"Dominica","DO":"Dominican Republic","DZ":"Algeria","EC":"Ecuador","EE":"Estonia","EG":"Egypt","EH":"Western Sahara","ER":"Eritrea","ES":"Spain","ET":"Ethiopia","FI":"Finland","FJ":"Fiji","FK":"Falkland Islands (Malvinas)","FM":"Micronesia, Federated States of","FO":"Faroe Islands","FR":"France","GA":"Gabon","GB":"United Kingdom","GD":"Grenada","GE":"Georgia","GF":"French Guiana","GG":"Guernsey","GH":"Ghana","GI":"Gibraltar","GL":"Greenland","GM":"Gambia","GN":"Guinea","GP":"Guadeloupe","GQ":"Equatorial Guinea","GR":"Greece","GS":"South Georgia and the South Sandwich Islands","GT":"Guatemala","GU":"Guam","GW":"Guinea-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"Heard Island and McDonald Islands","HN":"Honduras","HR":"Croatia","HT":"Haiti","HU":"Hungary","ID":"Indonesia","IE":"Ireland","IL":"Israel","IM":"Isle of Man","IN":"India","IO":"British Indian Ocean Territory","IQ":"Iraq","IR":"Iran","IS":"Iceland","IT":"Italy","JE":"Jersey","JM":"Jamaica","JO":"Jordan","JP":"Japan","KE":"Kenya","KG":"Kyrgyzstan","KH":"Cambodia","KI":"Kiribati","KM":"Comoros","KN":"Saint Kitts and Nevis","KP":"North Korea","KR":"South Korea","KW":"Kuwait","KY":"Cayman Islands","KZ":"Kazakhstan","LA":"Lao People\'s Democratic Republic","LB":"Lebanon","LC":"Saint Lucia","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Liberia","LS":"Lesotho","LT":"Lithuania","LU":"Luxembourg","LV":"Latvia","LY":"Libya","MA":"Morocco","MC":"Monaco","MD":"Moldova, Republic of","ME":"Montenegro","MF":"Saint Martin (French part)","MG":"Madagascar","MH":"Marshall Islands","MK":"North Macedonia","ML":"Mali","MM":"Myanmar","MN":"Mongolia","MO":"Macao","MP":"Northern Mariana Islands","MQ":"Martinique","MR":"Mauritania","MS":"Montserrat","MT":"Malta","MU":"Mauritius","MV":"Maldives","MW":"Malawi","MX":"Mexico","MY":"Malaysia","MZ":"Mozambique","NA":"Namibia","NC":"New Caledonia","NE":"Niger","NF":"Norfolk Island","NG":"Nigeria","NI":"Nicaragua","NL":"Netherlands","NO":"Norway","NP":"Nepal","NR":"Nauru","NU":"Niue","NZ":"New Zealand","OM":"Oman","PA":"Panama","PE":"Peru","PF":"French Polynesia","PG":"Papua New Guinea","PH":"Philippines","PK":"Pakistan","PL":"Poland","PM":"Saint Pierre and Miquelon","PN":"Pitcairn Islands","PR":"Puerto Rico","PS":"Palestine","PT":"Portugal","PW":"Palau","PY":"Paraguay","QA":"Qatar","RE":"Reunion","RO":"Romania","RS":"Serbia","RU":"Russia","RW":"Rwanda","SA":"Saudi Arabia","SB":"Solomon Islands","SC":"Seychelles","SD":"Sudan","SE":"Sweden","SG":"Singapore","SH":"Saint Helena","SI":"Slovenia","SJ":"Svalbard and Jan Mayen","SK":"Slovakia","SL":"Sierra Leone","SM":"San Marino","SN":"Senegal","SO":"Somalia","SR":"Suriname","SS":"South Sudan","ST":"Sao Tome and Principe","SV":"El Salvador","SX":"Sint Maarten (Dutch part)","SY":"Syrian Arab Republic","SZ":"Eswatini","TC":"Turks and Caicos Islands","TD":"Chad","TF":"French Southern Territories","TG":"Togo","TH":"Thailand","TJ":"Tajikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkmenistan","TN":"Tunisia","TO":"Tonga","TR":"Turkey","TT":"Trinidad and Tobago","TV":"Tuvalu","TW":"Taiwan","TZ":"United Republic of Tanzania","UA":"Ukraine","UG":"Uganda","UM":"United States Minor Outlying Islands","US":"United States of America","UY":"Uruguay","UZ":"Uzbekistan","VA":"Holy See (Vatican City State)","VC":"Saint Vincent and the Grenadines","VE":"Venezuela","VG":"Virgin Islands, British","VI":"Virgin Islands, U.S.","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis and Futuna","WS":"Samoa","YE":"Yemen","YT":"Mayotte","ZA":"South Africa","ZM":"Zambia","ZW":"Zimbabwe"}}')},61127:function(e){"use strict";e.exports=JSON.parse('{"nationalities":{"AD":"Andorran","AE":"\xc9mirien","AF":"Afghan","AG":"Antiguayen","AL":"Albanais","AM":"Arm\xe9nien","AO":"Angolais","AR":"Argentin","AT":"Autrichien","AU":"Australien","AX":"\xceles Aland","AZ":"Azerba\xefdjanais","BA":"Bosnien","BB":"Barbadien","BD":"Bangladais","BE":"Belge","BF":"Burkinab\xe9","BG":"Bulgare","BH":"Bahre\xefnien","BI":"Burundais","BJ":"B\xe9ninois","BL":"Saint-Barth\xe9lemy","BM":"Bermudien","BN":"Brun\xe9ien","BO":"Bolivien","BQ":"Pays-Bas Carib\xe9ens","BR":"Br\xe9silien","BS":"Bahamien","BT":"Bhoutanais","BV":"\xcele Bouvet","BW":"Botswanais","BY":"Bi\xe9lorusse","BZ":"B\xe9lizien","CA":"Canadien","CC":"\xceles Cocos","CD":"Congolais (R\xe9publique d\xe9mocratique du Congo)","CF":"Centrafricain","CG":"Congolais (R\xe9publique du Congo)","CH":"Suisse","CI":"Ivoirien","CK":"\xceles Cook","CL":"Chilien","CM":"Camerounais","CN":"Chinois","CO":"Colombien","CR":"Costaricain","CU":"Cubain","CV":"Cap verdien","CW":"Curacien","CX":"L\'\xeele Christmas","CY":"Chypriote","CZ":"Tch\xe8que","DE":"Allemand","DJ":"Djiboutien","DK":"Danois","DM":"Dominicain (Dominique)","DO":"Dominicain (R\xe9publique dominicaine)","DZ":"Alg\xe9rien","EC":"\xc9quatorien","EE":"Estonien","EG":"\xc9gyptien","EH":"Sahara Occidental","ER":"\xc9rythr\xe9en","ES":"Espagnol","ET":"\xc9thiopien","FI":"Finlandais","FJ":"Fidjien","FK":"Malouin","FM":"Micron\xe9sien","FO":"F\xe9ro\xefen","FR":"Fran\xe7ais","GA":"Gabonais","GB":"Britannique","GD":"Grenadien","GE":"G\xe9orgien","GF":"Fran\xe7ais (Guyane)","GG":"Guernesiais","GH":"Ghan\xe9en","GI":"Gibraltariens","GL":"Groenlandais","GM":"Gambien","GN":"Guin\xe9en","GP":"Guadeloup\xe9en","GQ":"\xc9quato-guin\xe9en","GR":"Grec","GS":"G\xe9orgie du Sud et les \xeeles Sandwich du Sud","GT":"Guat\xe9malt\xe8que","GU":"Guam","GW":"Bissaoguin\xe9en","GY":"Guyanais","HK":"Hongkongais","HM":"\xceles Heard-et-MacDonald","HN":"Hondurien","HR":"Croate","HT":"Ha\xeftien","HU":"Hongrois","ID":"Indon\xe9sien","IE":"Irlandais","IL":"Isra\xe9lien","IM":"\xcele de Man","IN":"Indien","IO":"Territoire britannique de l\'oc\xe9an Indien","IQ":"Irakien","IR":"Iranien","IS":"Islandais","IT":"Italien","JE":"Jersiais","JM":"Jama\xefquain","JO":"Jordanien","JP":"Japonais","KE":"K\xe9nyan","KG":"Kirghiz","KH":"Cambodgien","KI":"Kiribatiens","KM":"Comorien","KN":"Afro-Kittitien et Afro-Nevisien","KP":"Nord cor\xe9en","KR":"Sud cor\xe9en","KW":"Kowe\xeftien","KY":"Ca\xefmanien","KZ":"Kazakhstanais","LA":"Laotien","LB":"Libanais","LC":"Saint-Lucien","LI":"Liechtensteinois","LK":"Sri Lankais","LR":"Liberian","LS":"Mosotho","LT":"Lituanien","LU":"Luxembourgeois","LV":"Letton","LY":"Libyen","MA":"Marocain","MC":"Mon\xe9gasque","MD":"Moldave","ME":"Mont\xe9n\xe9grin","MF":"Saint-Martinois (France)","MG":"Malgache","MH":"Marshallais","MK":"Mac\xe9donien","ML":"Malien","MM":"Birman","MN":"Mongol","MO":"Macan\xe9en","MP":"\xceles Mariannes du Nord","MQ":"Martiniquais","MR":"Mauritanien","MS":"Montserratien","MT":"Maltais","MU":"Mauricien","MV":"Maldivien","MW":"Malawien","MX":"Mexicain","MY":"Malaisien","MZ":"Mozambicain","NA":"Namibien","NC":"N\xe9o-Cal\xe9donien","NE":"Nig\xe9rien","NF":"Norfolkais","NG":"Nig\xe9rian","NI":"Nicaraguayen","NL":"N\xe9erlandais","NO":"Norv\xe9gien","NP":"N\xe9palais","NR":"Nauruan","NU":"Niu\xe9en","NZ":"N\xe9o-Z\xe9landais","OM":"Omanais","PA":"Panam\xe9en","PE":"P\xe9ruvien","PF":"Fran\xe7ais (Polyn\xe9sie fran\xe7aise)","PG":"Papouasien","PH":"Philippin","PK":"Pakistanais","PL":"Polonais","PM":"Saint-Pierrais ou Miquelonais","PN":"\xceles Pitcairn","PR":"Portoricain","PS":"Territoires Palestiniens, Occup\xe9s","PT":"Portugais","PW":"Palauan","PY":"Paraguayen","QA":"Qatarien","RE":"R\xe9unionnais","RO":"Roumain","RS":"Serbe","RU":"Russe","RW":"Rwandais","SA":"Saoudien","SB":"Salomonais","SC":"Seychellois","SD":"Soudanais","SE":"Su\xe9dois","SG":"Singapourien","SH":"Sainte H\xe9l\xe8ne","SI":"Slov\xe8ne","SJ":"Svalbard et Jan Mayen","SK":"Slovaque","SL":"Sierra L\xe9onais","SM":"Saint-Marinais","SN":"S\xe9n\xe9galais","SO":"Somalien","SR":"Surinamais","SS":"Sud-Soudanais","ST":"Santom\xe9en","SV":"Salvadorien","SX":"Saint-Martinois (Pays-Bas)","SY":"Syrien","SZ":"Swazi","TC":"\xceles Turques-et-Ca\xefques","TD":"Tchadien","TF":"Fran\xe7ais (TAAF)","TG":"Togolais","TH":"Tha\xeflandais","TJ":"Tadjik","TK":"Tok\xe9laou","TL":"Est-Timorais","TM":"Turkm\xe8ne","TN":"Tunisien","TO":"Tongien","TR":"Turc","TT":"Trinidadien ou Tobagonien","TV":"Tuvalais","TW":"Ta\xefwanais","TZ":"Tanzanien","UA":"Ukrainien","UG":"Ougandais","UM":"\xceles mineures \xe9loign\xe9es des \xc9tats-Unis","US":"Am\xe9ricain","UY":"Uruguayen","UZ":"Ouzbek","VA":"Saint-Si\xe8ge (\xc9tat de la cit\xe9 du Vatican)","VC":"Vincentais","VE":"V\xe9n\xe9zu\xe9lien","VG":"\xceles Vierges Britanniques","VI":"\xceles Vierges Am\xe9ricaines","VN":"Vietnamien","VU":"Vanuatais","WF":"Gallois","WS":"Samoan","YE":"Y\xe9m\xe9nite","YT":"Mahorais","ZA":"Sud Africain","ZM":"Zambien","ZW":"Zimbabw\xe9en"},"countries":{"AD":"Andorre","AE":"\xc9mirats Arabes Unis","AF":"Afghanistan","AG":"Antigua-et-Barbuda","AL":"Albanie","AM":"Arm\xe9nie","AO":"Angola","AR":"Argentine","AT":"Autriche","AU":"Australie","AX":"\xc5land","AZ":"Azerba\xefdjan","BA":"Bosnie-Herz\xe9govine","BB":"Barbade","BD":"Bangladesh","BE":"Belgique","BF":"Burkina Faso","BG":"Bulgarie","BH":"Bahre\xefn","BI":"Burundi","BJ":"B\xe9nin","BL":"Saint-Barth\xe9lemy","BM":"Bermudes","BN":"Brunei Darussalam","BO":"Bolivie","BQ":"Bonaire, Saint-Eustache et Saba","BR":"Br\xe9sil","BS":"Bahamas","BT":"Bhoutan","BV":"\xcele Bouvet","BW":"Botswana","BY":"Bi\xe9lorussie","BZ":"Belize","CA":"Canada","CC":"\xceles Cocos","CD":"R\xe9publique d\xe9mocratique du Congo","CF":"R\xe9publique Centrafricaine","CG":"R\xe9publique du Congo","CH":"Suisse","CI":"C\xf4te-d\'Ivoire","CK":"\xceles Cook","CL":"Chili","CM":"Cameroun","CN":"Chine","CO":"Colombie","CR":"Costa Rica","CU":"Cuba","CV":"Cap-Vert","CW":"Cura\xe7ao","CX":"\xcele Christmas","CY":"Chypre","CZ":"R\xe9publique Tch\xe8que","DE":"Allemagne","DJ":"Djibouti","DK":"Danemark","DM":"Dominique","DO":"R\xe9publique Dominicaine","DZ":"Alg\xe9rie","EC":"\xc9quateur","EE":"Estonie","EG":"\xc9gypte","EH":"Sahara occidental","ER":"\xc9rythr\xe9e","ES":"Espagne","ET":"\xc9thiopie","FI":"Finlande","FJ":"Fidji","FK":"\xceles Malouines","FM":"Micron\xe9sie","FO":"\xceles F\xe9ro\xe9","FR":"France","GA":"Gabon","GB":"Royaume-Uni","GD":"Grenade","GE":"G\xe9orgie","GF":"Guyane fran\xe7aise","GG":"Guernesey","GH":"Ghana","GI":"Gibraltar","GL":"Groenland","GM":"Gambie","GN":"Guin\xe9e","GP":"Guadeloupe","GQ":"Guin\xe9e \xe9quatoriale","GR":"Gr\xe8ce","GS":"G\xe9orgie du Sud-et-les \xceles Sandwich du Sud","GT":"Guatemala","GU":"Guam","GW":"Guin\xe9e-Bissau","GY":"Guyana","HK":"Hong Kong","HM":"\xceles Heard-et-MacDonald","HN":"Honduras","HR":"Croatie","HT":"Ha\xefti","HU":"Hongrie","ID":"Indon\xe9sie","IE":"Irlande","IL":"Isra\xebl","IM":"\xcele de Man","IN":"Inde","IO":"Oc\xe9an Indien Britannique","IQ":"Irak","IR":"Iran","IS":"Islande","IT":"Italie","JE":"Jersey","JM":"Jama\xefque","JO":"Jordanie","JP":"Japon","KE":"Kenya","KG":"Kirghizistan","KH":"Cambodge","KI":"Kiribati","KM":"Comores","KN":"Saint-Christophe-et-Ni\xe9v\xe8s","KP":"Cor\xe9e du Nord","KR":"Cor\xe9e du Sud","KW":"Kowe\xeft","KY":"\xceles Ca\xefmans","KZ":"Kazakhstan","LA":"Laos","LB":"Liban","LC":"Sainte-Lucie","LI":"Liechtenstein","LK":"Sri Lanka","LR":"Lib\xe9ria","LS":"Lesotho","LT":"Lituanie","LU":"Luxembourg","LV":"Lettonie","LY":"Libye","MA":"Maroc","MC":"Monaco","MD":"Moldavie","ME":"Mont\xe9n\xe9gro","MF":"Saint-Martin (partie fran\xe7aise)","MG":"Madagascar","MH":"\xceles Marshall","MK":"Mac\xe9doine du Nord","ML":"Mali","MM":"Myanmar","MN":"Mongolie","MO":"Macao","MP":"\xceles Mariannes du Nord","MQ":"Martinique","MR":"Mauritanie","MS":"Montserrat","MT":"Malte","MU":"Maurice","MV":"Maldives","MW":"Malawi","MX":"Mexique","MY":"Malaisie","MZ":"Mozambique","NA":"Namibie","NC":"Nouvelle-Cal\xe9donie","NE":"Niger","NF":"\xcele Norfolk","NG":"Nig\xe9ria","NI":"Nicaragua","NL":"Pays-Bas","NO":"Norv\xe8ge","NP":"N\xe9pal","NR":"Nauru","NU":"Niu\xe9","NZ":"Nouvelle-Z\xe9lande","OM":"Oman","PA":"Panama","PE":"P\xe9rou","PF":"Polyn\xe9sie fran\xe7aise","PG":"Papouasie-Nouvelle-Guin\xe9e","PH":"Philippines","PK":"Pakistan","PL":"Pologne","PM":"Saint-Pierre-et-Miquelon","PN":"\xceles Pitcairn","PR":"Porto Rico","PS":"Palestine","PT":"Portugal","PW":"Palaos","PY":"Paraguay","QA":"Qatar","RE":"R\xe9union","RO":"Roumanie","RS":"Serbie","RU":"Russie","RW":"Rwanda","SA":"Arabie Saoudite","SB":"\xceles Salomon","SC":"Seychelles","SD":"Soudan","SE":"Su\xe8de","SG":"Singapour","SH":"Sainte-H\xe9l\xe8ne","SI":"Slov\xe9nie","SJ":"Svalbard et \xcele Jan Mayen","SK":"Slovaquie","SL":"Sierra Leone","SM":"Saint-Marin","SN":"S\xe9n\xe9gal","SO":"Somalie","SR":"Suriname","SS":"Soudan du Sud","ST":"S\xe3o Tom\xe9-et-Principe","SV":"El Salvador","SX":"Saint-Martin (partie n\xe9erlandaise)","SY":"Syrie","SZ":"Royaume d\'Eswatini","TC":"\xceles Turques-et-Ca\xefques","TD":"Tchad","TF":"Terres australes fran\xe7aises","TG":"Togo","TH":"Tha\xeflande","TJ":"Tadjikistan","TK":"Tokelau","TL":"Timor-Leste","TM":"Turkm\xe9nistan","TN":"Tunisie","TO":"Tonga","TR":"Turquie","TT":"Trinit\xe9-et-Tobago","TV":"Tuvalu","TW":"Ta\xefwan","TZ":"R\xe9publique unie de Tanzanie","UA":"Ukraine","UG":"Ouganda","UM":"\xceles mineures \xe9loign\xe9es des \xc9tats-Unis","US":"\xc9tats-Unis d\'Am\xe9rique","UY":"Uruguay","UZ":"Ouzb\xe9kistan","VA":"Saint-Si\xe8ge (Vatican)","VC":"Saint-Vincent-et-les-Grenadines","VE":"Venezuela","VG":"\xceles vierges britanniques","VI":"\xceles vierges am\xe9ricaines","VN":"Vietnam","VU":"Vanuatu","WF":"Wallis-et-Futuna","WS":"Samoa","YE":"Y\xe9men","YT":"Mayotte","ZA":"Afrique du Sud","ZM":"Zambie","ZW":"Zimbabwe"}}')},60080:function(e){"use strict";e.exports=JSON.parse('{"country":{"foreign":"Foreign"},"Scan":{"scan_a_doc":"Scan a doc","save_doc":"Save the doc","filename":"Filename","save":"Save","cancel":"Cancel","qualify":"Describe","apply":"Apply","error":{"offline":"You are currently offline and you can\'t use this functionality. Please, try again later.","uploading":"You are already uploading a file. Please wait until the end of this upload and try again.","generic":"Something went wrong. Please try again."},"successful":{"qualified_ok":"You just have successfully described your file! "},"items":{"accommodation_proof":"Proof of accommodation |||| Proof of accommodations","appliance_invoice":"Appliance invoice |||| Appliance invoices","bank_details":"Bank detail |||| Bank details","bank_statement":"Bank statement |||| Bank statements","birth_certificate":"Birth certificate |||| Birth certificates","building_permit":"Building permit |||| Building permits","caf":"Social benefit rate |||| Social benefit rates","car_insurance":"Car insurance certificate |||| Car insurance certificates","citizen_registration_certificate":"Certificate of citizen registration |||| Certificates of citizen registration","condition_report":"Condition report |||| Condition reports","diploma":"Diploma |||| Diplomas","divorce":"Divorce |||| Divorces","driver_license":"Driving license |||| Driving licenses","electoral_card":"Electoral card |||| Electoral cards","employment_center_certificate":"Employment center certificate |||| Employment center certificates","energy_contract":"Energy provider contract |||| Energy provider contracts","energy_invoice":"Energy invoice |||| Energy invoices","expense_claim":"Expense claim |||| Expense claims","family_record_book":"Family record book |||| Family record books","family":"Family","fidelity_card":"Benefit card |||| Benefit cards","fine":"Fine |||| Fines","gradebook":"Gradebook |||| Gradebooks","grocery_invoice":"Grocery invoice |||| Grocery invoices","health_book":"Health book |||| Health books","health_certificate":"Health/Vaccination certificate |||| Health/Vaccination certificates","health_insurance_card":"Insurance card |||| Insurance cards","health_invoice":"Health invoice |||| Health invoices","health":"Health","home":"Home","house_insurance":"Home insurance |||| Home insurances","house_sale_agreeement":"House sale agreement |||| House sale agreements","identity_photo":"Identity photo |||| Identity photos","identity":"Identity","invoice":"Invoice |||| Invoices","isp_invoice":"ISP invoice |||| ISP invoices","large_family_card":" Large Family Card |||| Large Family Cards","lease":"Lease |||| Leases","loan_agreement":"Loan agreement |||| Loan agreements","mechanic_invoice":"Repair bill |||| Repair bills","motivation_letter":"Motivation letter |||| Motivation letters","national_health_insurance_card":"National health insurance card |||| National health insurance cards","national_health_insurance_right_certificate":"National health insurance right certificate |||| National health insurance right certificates","national_id_card":"ID card |||| ID cards","note_identity_document":"Note Identity |||| Notes Identity","note_family_document":"Note Family |||| Notes Family","note_work_document":"Note Work & Study |||| Notes Work & Study","note_health_document":"Note Health |||| Notes Health","note_house_document":"Note Home |||| Notes Home","note_transport_document":"Note Transport |||| Notes Transport","note_activity_document":"Note Activities |||| Notes Activities","note_finance":"Note Finance |||| Notes Finance","note_invoice":"Note Invoice |||| Notes Invoice","other_activity_document":"Other activities document |||| Other activities documents","other_bank_document":"Other financial document |||| Other financial documents","other_family_document":"Other family document |||| Other family documents","other_health_document":"Other health document |||| Other health documents","other_house_document":"Other house document |||| Other house documents","other_identity_document":"Other document of identity |||| Other documents of identity","other_invoice":"Other invoice |||| Other invoices","other_revenue":"Other revenue |||| Other revenues","other_tax_document":"Other tax document |||| Other tax documents","other_transport_document":"Other transport document |||| Other transport documents","other_work_document":"Other work document |||| Other work documents","other_administrative_document":"Other administrative document |||| Other administrative documents","others":"Others","pacs":"Civil union |||| Civil unions","passport":"Passeport |||| Passeports","pay_sheet":"Pay sheet |||| Pay sheets","payment_proof_family_allowance":"family allowance payment proof |||| family allowance payment proofs","pension":"Pension |||| Pensions","person_insurance":"Individual insurance certificate |||| Individual insurance certificates","personal_sporting_licence":"Sporting licence |||| Sporting licences","phone_invoice":"Phone invoice |||| Phone invoices","pregnancy_medical_certificate":"Certificate of pregnancy |||| Certificates of pregnancy","prescription":"Prescription |||| Prescriptions","real_estate_insurance":"Real estate insurance certificate |||| Real estate insurance certificates","real_estate_tax":"Real estate tax |||| Real estate taxes","receipt":"Receipt |||| Receipts","rent_receipt":"Rent receipt |||| Rent receipts","residence_permit":"Residence permit |||| Residence permits","restaurant_invoice":"Restaurant invoice |||| Restaurant invoices","resume":"Resume |||| Resumes","school_attendance_certificate":"Certificate of school attendance |||| Certificates of school attendance","school_insurance_certificate":"Certificate of school insurance |||| Certificates of school insurance","single_parent_benefit":"Single parent benefit |||| Single parent benefits","student_card":"Student card |||| Student cards","tax_certificate":"Tax certificate |||| Tax certificates","tax_notice":"Tax notice |||| Tax notices","tax_return":"Tax return |||| Tax returns","tax_timetable":"Payment Plans Installment Agreement |||| Payment Plans Installment Agreements","technical_diagnostic_record":"Technical diagnostic record |||| Technical diagnostic records","telecom_invoice":"Telecom invoice |||| Telecom invoices","transport_card":"Transport card |||| Transport cards","transport_invoice":"Transport invoice |||| Transport invoices","transport":"Transport","unemployment_benefit":"Unemployment benefit |||| Unemployment benefits","unfit_for_habitation_declaration":"Declaration of unfit for habitation |||| Declarations of unfit for habitation","vehicle_registration":"Vehicle registration |||| Vehicle registrations","water_invoice":"Water invoice |||| Water invoices","web_service_invoice":"Web service invoice |||| Web service invoices","wedding":"Wedding contract |||| Wedding contracts","work_contract":"Work contract |||| Work contracts","work_disability_recognition":"Recognition of disability |||| Recognitions of disability","work_invoice":"Work invoice |||| Work invoices","work_quote":"Work quote |||| Work quotes","work_study":"Work & Study"},"attributes":{"contractType":{"cdi":"CDI","cdd":"CDD","alternate":"Alternate","internship":"Internship","other":"Other"},"noticePeriod":{"oneWeek":"1 week before","oneMonth":"1 month before","threeMonth":"3 months before","oneYear":"1 year before","custom":"Custom","noAlert":"Do not be alerted"}},"themes":{"none":"None","activity":"Activities","family":"Family","finance":"Finance","health":"Health","home":"Home","identity":"Identity","invoice":"Invoice","others":"Others","transport":"Transport","undefined":"Undefined","work_study":"Work & Study"},"expiration":{"expired":"Expired","expiresIn":"Expires in %{duration}","description":"This document expires in %{duration}, consider renewing it"},"qualification":{"date":{"title":{"datetime":"Added on","AObtentionDate":"License A, delivered on","BObtentionDate":"License B, delivered on","CObtentionDate":"License C, delivered on","DObtentionDate":"License D, delivered on","issueDate":"Delivered on","expirationDate":"Expiration date","referencedDate":"Referenced date","shootingDate":"Shooting date","obtentionDate":"Date obtained","date":"Document date"}},"information":{"title":{"fine":{"number":"Amount of the fine"},"fidelity_card":{"number":"Card number"},"caf":{"number":"CAF file number"},"payment_proof_family_allowance":{"number":"CAF file number"},"vehicle":{"licenseNumber":"Vehicle registration number","confidentialNumber":"Confidential vehicle registration code"},"vehicle_registration":{"number":"Vehicle registration number (VIN)"},"national_id_card":{"number":"National ID card number"},"bank_details":{"number":"IBAN number"},"passport":{"number":"Passport number"},"driver_license":{"number":"License number"},"residence_permit":{"number":"License number"},"national_health_insurance_card":{"number":"National health insurance card number"},"pay_sheet":{"number":"Gross remuneration"},"tax_return":{"number":"Reference tax number"},"tax_notice":{"number":"Reference tax number"},"real_estate_tax":{"number":"Reference tax number"},"tax_timetable":{"number":"Reference tax number"},"country":"Document issuing country","refTaxIncome":"Reference tax income","contractType":"Contract type","noticePeriod":"Expiration alert","netSocialAmount":"Net social amount","employerName":"Name of employer","employer":"Name of employer","amount":"Amount of expenditure","subtype":"Purpose of expenditure","bicNumber":"BIC number"},"day":"day |||| days"},"contact":"Owner","page":"Side of the document","front":"Front side","back":"Back side","qualification":"Qualification","noInfo":"No information"}},"MagicFolders":{"administrative":"Administrative","photos":"Photos"}}')},76785:function(e){"use strict";e.exports=JSON.parse('{"country":{"foreign":"\xc9tranger"},"Scan":{"scan_a_doc":"Num\xe9riser un doc","save_doc":"Enregistrer le document","filename":"Nom du fichier","save":"Sauvegarder","cancel":"Annuler","qualify":"Qualifier","apply":"Appliquer","error":{"offline":"Vous \xeates actuellement d\xe9connect\xe9, vous ne pouvez donc pas utiliser cette fonctionnalit\xe9. Connectez-vous \xe0 internet et recommencez. ","uploading":"Vous avez d\xe9j\xe0 un fichier en cours de t\xe9l\xe9chargement. Attendez la fin et recommencez.","generic":"Un probl\xe8me est survenu. Veuillez r\xe9essayer. "},"successful":{"qualified_ok":"Vous venez de qualifier votre fichier avec succ\xe8s !"},"items":{"accommodation_proof":"Attestation d\'h\xe9bergement |||| Attestations d\'h\xe9bergement","appliance_invoice":"Facture d\'\xe9lectrom\xe9nager |||| Factures d\'\xe9lectrom\xe9nager","bank_details":"RIB","bank_statement":"Relev\xe9 de compte |||| Relev\xe9s de compte","birth_certificate":"Acte de naissance |||| Actes de naissance","building_permit":"Permis de construire","caf":"Attestation de quotient familial CAF |||| Attestations de quotient familial CAF","car_insurance":"Attestation d\'assurance auto |||| Attestations d\'assurance auto","citizen_registration_certificate":"Attestation de recensement citoyen |||| Attestations de recensement citoyen","condition_report":"\xc9tat des lieux - Entr\xe9e/Sortie |||| \xc9tats des lieux - Entr\xe9e/Sortie","diploma":"Dipl\xf4me |||| Dipl\xf4mes","divorce":"Attestation de divorce |||| Attestations de divorce","driver_license":"Permis de conduire","electoral_card":"Carte \xe9lectorale |||| Cartes \xe9lectorales","employment_center_certificate":"Attestation de France Travail |||| Attestations de France Travail","energy_contract":"Contrat de fournisseur d\'\xe9nergies |||| Contrats de fournisseur d\'\xe9nergies","energy_invoice":"Facture d\'\xe9nergie |||| Factures d\'\xe9nergie","expense_claim":"Note de frais |||| Notes de frais","family_record_book":"Livret de famille |||| Livrets de famille","family":"Famille","fidelity_card":"Carte avantage |||| Cartes avantages","fine":"Amende |||| Amendes","gradebook":"Bulletin de notes |||| Bulletins de notes","grocery_invoice":"Facture de courses |||| Factures de courses","health_book":"Carnet de sant\xe9 |||| Carnets de sant\xe9","health_certificate":"Certificat de sant\xe9/vaccination |||| Certificats de sant\xe9/vaccination","health_insurance_card":"Carte de mutuelle |||| Cartes de mutuelle","health_invoice":"Facture m\xe9dicale |||| Factures m\xe9dicales","health":"Sant\xe9","home":"Logement","house_insurance":"Assurance logement |||| Assurances logement","house_sale_agreeement":"Compromis de vente","identity_photo":"Photo d\'identit\xe9 |||| Photos d\'identit\xe9","identity":"Identit\xe9","invoice":"Facture |||| Factures","isp_invoice":"Facture d\'internet |||| Factures d\'internet","large_family_card":"Carte famille nombreuse |||| Cartes famille nombreuse","lease":"Bail |||| Baux","loan_agreement":"Contrat de pr\xeat |||| Contrats de pr\xeat","mechanic_invoice":"Facture de r\xe9paration |||| Factures de r\xe9paration","motivation_letter":"Lettre de motivation |||| Lettres de motivation","national_health_insurance_card":"Carte vitale |||| Cartes vitales","national_health_insurance_right_certificate":"Attestation de droits de l\'Assurance Maladie |||| Attestations de droits de l\'Assurance Maladie","national_id_card":"Carte d\'identit\xe9 |||| Cartes d\'identit\xe9","note_identity_document":"Note Identit\xe9 |||| Notes Identit\xe9","note_family_document":"Note Famille |||| Notes Famille","note_work_document":"Note Travail & \xc9tudes |||| Notes Travail & \xc9tudes","note_health_document":"Note Sant\xe9 |||| Notes Sant\xe9","note_house_document":"Note Logement |||| Notes Logement","note_transport_document":"Note Transport |||| Notes Transport","note_activity_document":"Note Activit\xe9s & loisirs |||| Notes Activit\xe9s & loisirs","note_finance":"Note Finances |||| Notes Finances","note_invoice":"Note Factures |||| Notes Factures","other_activity_document":"Autre document de loisirs |||| Autres documents de loisirs","other_bank_document":"Autre document financier |||| Autres documents financiers","other_family_document":"Autre document de famille |||| Autres documents de famille","other_health_document":"Autre document de sant\xe9 |||| Autres documents de sant\xe9","other_house_document":"Autre document de logement |||| Autres documents de logement","other_identity_document":"Autre document d\'identit\xe9 |||| Autres documents d\'identit\xe9","other_invoice":"Autre facture |||| Autres factures","other_revenue":"Autre revenu |||| Autres revenus","other_tax_document":"Imp\xf4ts - Autre document |||| Imp\xf4ts - Autres documents","other_transport_document":"Autre document de transport |||| Autres documents de transport","other_work_document":"Autre document de travail |||| Autres documents de travail","other_administrative_document":"Autre document administratif |||| Autres documents administratifs","others":"Autres","pacs":"Attestation de PACS |||| Attestations de PACS","passport":"Passeport |||| Passeports","pay_sheet":"Fiche de paie |||| Fiches de paie","payment_proof_family_allowance":"Attestation de paiement CAF |||| Attestations de paiement CAF","pension":"Retraite |||| Retraites","person_insurance":"Attestation d\'assurance individuelle |||| Attestations d\'assurance individuelle","personal_sporting_licence":"Licence sportive |||| Licences sportives","phone_invoice":"Facture de t\xe9l\xe9phone |||| Factures de t\xe9l\xe9phone","pregnancy_medical_certificate":"Certificat de grossesse |||| Certificats de grossesse","prescription":"Ordonnance |||| Ordonnances","real_estate_insurance":"Attestation d\'assurance immobili\xe8re |||| Attestations d\'assurance immobili\xe8re","real_estate_tax":"Imp\xf4ts - Taxe fonci\xe8re |||| Imp\xf4ts - Taxes fonci\xe8res","receipt":"Accus\xe9 de r\xe9ception |||| Accus\xe9s de r\xe9ception","rent_receipt":"Quittance de loyer |||| Quittances de loyer","residence_permit":"Titre de s\xe9jour |||| Titres de s\xe9jour","restaurant_invoice":"Facture de restaurant |||| Factures de restaurant","resume":"CV","school_attendance_certificate":"Certificat de scolarit\xe9 |||| Certificats de scolarit\xe9","school_insurance_certificate":"Attestation d\'assurance scolaire |||| Attestations d\'assurance scolaire","single_parent_benefit":"Allocation parent isol\xe9 |||| Allocations parent isol\xe9","student_card":"Carte d\'\xe9tudiant |||| Cartes d\'\xe9tudiant","tax_certificate":"Attestation fiscale |||| Attestations fiscales","tax_notice":"Imp\xf4ts - Avis d\'imposition","tax_return":"Imp\xf4ts - D\xe9claration de revenus |||| Imp\xf4ts - D\xe9clarations de revenus","tax_timetable":"Imp\xf4ts - Ech\xe9ancier |||| Imp\xf4ts - Ech\xe9anciers","technical_diagnostic_record":"Dossier de diagnostic technique |||| Dossiers de diagnostic technique","telecom_invoice":"Facture de t\xe9l\xe9com |||| Factures de t\xe9l\xe9com","transport_card":"Carte de transport |||| Cartes de transport","transport_invoice":"Facture de transport |||| Factures de transport","transport":"Transport","unemployment_benefit":"Allocation ch\xf4mage |||| Allocations ch\xf4mage","unfit_for_habitation_declaration":"Arr\xeat\xe9 d\'insalubrit\xe9 |||| Arr\xeat\xe9s d\'insalubrit\xe9","vehicle_registration":"Carte grise |||| Cartes grises","water_invoice":"Facture d\'eau |||| Factures d\'eau","web_service_invoice":"Facture de service web |||| Factures de service web","wedding":"Contrat de mariage |||| Contrats de mariage","work_contract":"Contrat de travail |||| Contrats de travail","work_disability_recognition":"Reconnaissance de handicap - RQTH |||| Reconnaissances de handicap - RQTH","work_invoice":"Facture de travaux |||| Factures de travaux","work_quote":"Devis de travaux","work_study":"Travail & \xc9tudes"},"attributes":{"contractType":{"cdi":"CDI","cdd":"CDD","alternate":"Alternance","internship":"Stage","other":"Autre"},"noticePeriod":{"oneWeek":"1 semaine avant","oneMonth":"1 mois avant","threeMonth":"3 mois avant","oneYear":"1 an avant","custom":"Personnalis\xe9","noAlert":"Ne pas \xeatre alert\xe9"}},"themes":{"none":"Aucun","activity":"Activit\xe9s & loisirs","family":"Famille","finance":"Finances","health":"Sant\xe9","home":"Logement","identity":"Identit\xe9","invoice":"Factures","others":"Autres","transport":"Transport","undefined":"Ind\xe9fini","work_study":"Travail & \xc9tudes"},"expiration":{"expired":"Expir\xe9","expiresIn":"Expire dans %{duration}","description":"Ce document expire dans %{duration}, pensez \xe0 le renouveler"},"qualification":{"date":{"title":{"datetime":"Ajout\xe9 le","AObtentionDate":"Permis A, d\xe9livr\xe9 le","BObtentionDate":"Permis B, d\xe9livr\xe9 le","CObtentionDate":"Permis C, d\xe9livr\xe9 le","DObtentionDate":"Permis D, d\xe9livr\xe9 le","issueDate":"D\xe9livr\xe9 le","expirationDate":"Date d\'expiration","referencedDate":"Date de r\xe9f\xe9rence","shootingDate":"Date de prise de vue","obtentionDate":"Date d\'obtention","date":"Date du document"}},"information":{"title":{"fine":{"number":"Montant de l\'amende"},"fidelity_card":{"number":"Num\xe9ro de la carte"},"caf":{"number":"Num\xe9ro de dossier CAF"},"payment_proof_family_allowance":{"number":"Num\xe9ro de dossier CAF"},"vehicle":{"licenseNumber":"Num\xe9ro d\'immatriculation","confidentialNumber":"Code confidentiel de la carte grise"},"vehicle_registration":{"number":"Num\xe9ro de la carte grise (VIN)"},"national_id_card":{"number":"Num\xe9ro de la carte d\'identit\xe9"},"bank_details":{"number":"Num\xe9ro d\'IBAN"},"passport":{"number":"Num\xe9ro du passeport"},"driver_license":{"number":"Num\xe9ro du permis"},"residence_permit":{"number":"Num\xe9ro du permis"},"national_health_insurance_card":{"number":"Num\xe9ro de s\xe9curit\xe9 sociale"},"pay_sheet":{"number":"R\xe9mun\xe9ration brute"},"tax_return":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"tax_notice":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"real_estate_tax":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"tax_timetable":{"number":"Num\xe9ro fiscal de r\xe9f\xe9rence"},"country":"Pays \xe9metteur du document","refTaxIncome":"Revenu fiscal de r\xe9f\xe9rence","contractType":"Type de contrat","noticePeriod":"Alerte d’expiration","netSocialAmount":"Montant net social","employerName":"Nom de l\'employeur","employer":"Nom de l\'employeur","amount":"Montant de la d\xe9pense","subtype":"Objet de la d\xe9pense","bicNumber":"Num\xe9ro BIC"},"day":"jour |||| jours"},"contact":"Titulaire","page":"Face du document","front":"Face avant","back":"Face arri\xe8re","qualification":"Qualification","noInfo":"Non renseign\xe9(e)"}},"MagicFolders":{"administrative":"Administratif","photos":"Photos"}}')},1274:function(e){"use strict";e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/3gpphal+json":{"source":"iana","compressible":true},"application/3gpphalforms+json":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/ace+cbor":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/at+jwt":{"source":"iana"},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/captive+json":{"source":"iana","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/city+json":{"source":"iana","compressible":true},"application/clr":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true,"extensions":["cpl"]},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dash-patch+xml":{"source":"iana","compressible":true,"extensions":["mpp"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["es","ecma"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/elm+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/elm+xml":{"source":"iana","compressible":true},"application/emergencycalldata.cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/express":{"source":"iana","extensions":["exp"]},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/jscalendar+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true,"extensions":["mpf"]},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/missing-blocks+cbor-seq":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true},"application/mrb-publish+xml":{"source":"iana","compressible":true},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/oauth-authz-req+jwt":{"source":"iana"},"application/oblivious-dns-message":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{"source":"iana","compressible":true},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p21":{"source":"iana"},"application/p21+zip":{"source":"iana","compressible":false},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana","extensions":["asc"]},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.cyn":{"source":"iana","charset":"7-BIT"},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sarif+json":{"source":"iana","compressible":true},"application/sarif-external-properties+json":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spdx+json":{"source":"iana","compressible":true},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/token-introspection+jwt":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana","extensions":["trig"]},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ubjson":{"compressible":false,"extensions":["ubj"]},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true,"extensions":["td"]},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.5gnas":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gtpc":{"source":"iana"},"application/vnd.3gpp.interworking-data":{"source":"iana"},"application/vnd.3gpp.lpp":{"source":"iana"},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ngap":{"source":"iana"},"application/vnd.3gpp.pfcp":{"source":"iana"},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.s1ap":{"source":"iana"},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.cmoca-cmresource":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-cmtable":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.age":{"source":"iana","extensions":["age"]},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.arrow.file":{"source":"iana"},"application/vnd.apache.arrow.stream":{"source":"iana"},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["key"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.cryptomator.encrypted":{"source":"iana"},"application/vnd.cryptomator.vault":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.cyclonedx+json":{"source":"iana","compressible":true},"application/vnd.cyclonedx+xml":{"source":"iana","compressible":true},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.d3m-dataset":{"source":"iana"},"application/vnd.d3m-problem":{"source":"iana"},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana","extensions":["dbf"]},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.eclipse.ditto+json":{"source":"iana","compressible":true},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eu.kasparian.car+json":{"source":"iana","compressible":true},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.familysearch.gedcom+zip":{"source":"iana","compressible":false},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujifilm.fb.docuworks":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{"source":"iana"},"application/vnd.fujifilm.fb.docuworks.container":{"source":"iana"},"application/vnd.fujifilm.fb.jfi+xml":{"source":"iana","compressible":true},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.slides":{"source":"iana"},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hl7cda+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hl7v2+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana","extensions":["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxar.archive.3tz+zip":{"source":"iana","compressible":false},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.nacamar.ybrid+json":{"source":"iana","compressible":true},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nebumind.line":{"source":"iana"},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+cbor":{"source":"iana"},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.opentimestamps.ots":{"source":"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana","extensions":["rar"]},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.resilient.logic":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.seis+json":{"source":"iana","compressible":true},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.sycle+xml":{"source":"iana","compressible":true},"application/vnd.syft+json":{"source":"iana","compressible":true},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veritone.aion+json":{"source":"iana","compressible":true},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.dpp":{"source":"iana"},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"source":"iana","compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true,"extensions":["wif"]},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-iwork-keynote-sffkey":{"extensions":["key"]},"application/x-iwork-numbers-sffnumbers":{"extensions":["numbers"]},"application/x-iwork-pages-sffpages":{"extensions":["pages"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xsl","xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana","extensions":["amr"]},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx","opus"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/scip":{"source":"iana"},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sofa":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/tsvcis":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana","extensions":["avci"]},"image/avcs":{"source":"iana","extensions":["avcs"]},"image/avif":{"source":"iana","compressible":false,"extensions":["avif"]},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/ktx2":{"source":"iana","extensions":["ktx2"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","compressible":true,"extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"compressible":true,"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.pco.b16":{"source":"iana","extensions":["b16"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/e57":{"source":"iana"},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/step":{"source":"iana"},"model/step+xml":{"source":"iana","compressible":true,"extensions":["stpx"]},"model/step+zip":{"source":"iana","compressible":false,"extensions":["stpz"]},"model/step-xml+zip":{"source":"iana","compressible":false,"extensions":["stpxz"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.pytha.pyox":{"source":"iana"},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.sap.vds":{"source":"iana","extensions":["vds"]},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/cql":{"source":"iana"},"text/cql-expression":{"source":"iana"},"text/cql-identifier":{"source":"iana"},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/fhirpath":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/gff3":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shaclc":{"source":"iana"},"text/shex":{"source":"iana","extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/spdx":{"source":"iana","extensions":["spdx"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.familysearch.gedcom":{"source":"iana","extensions":["ged"]},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hans":{"source":"iana"},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"compressible":true,"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/av1":{"source":"iana"},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/ffv1":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana","extensions":["m4s"]},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/jxsv":{"source":"iana"},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/scip":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/vp9":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')}}]);